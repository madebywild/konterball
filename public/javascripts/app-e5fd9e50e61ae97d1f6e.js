!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="javascripts/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var i=e.slice(1),n=t[e[0]];return function(t,e,r){n.apply(this,[t,e,r].concat(i))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,i){t.exports=i(1)},function(t,e,i){(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),a=n(s),l=i(6),h=i(7),c=n(h),u=i(13),p=n(u),f=i(15),d=n(f),m=i(23),g=n(m),y=i(24),v=n(y),_=i(41),b=n(_),T=i(42),E=e(T),x=i(50),S=i(51),w=n(S),A=i(61),M=n(A),P=i(182),C=n(P);document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock;var R=1,I=.1,O=l.Power4.easeInOut,N=function(){function e(){r(this,e),this.emitter=(0,v["default"])({}),this.communication=new C["default"](this.emitter),this.scene=new w["default"](this.emitter,this.communication),this.setupDOMHandlers(),this.setupCustomEventHandlers(),this.introBallTween=null,this.activeScreen=".intro-screen",this.mobileDetect=new p["default"](window.navigator.userAgent),M["default"].isMobile()&&"orientation"in window?this.checkPhoneOrientation():this.startLoading(),this.iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.iOS&&(this.hideFullscreenButton(),l.TweenMax.set(".enter-vr",{right:"0",bottom:"-10px"}),l.TweenMax.set(".reset-pose",{right:"60px"}))}return o(e,[{key:"checkPhoneOrientation",value:function(){var t=this;l.TweenMax.set(".phone",{rotation:90}),l.TweenMax.set(".checkmark",{visibility:"hidden"},.3);var e=new l.TimelineMax({repeat:-1,repeatDelay:1,paused:!0});e.to(".phone",.5,{ease:l.Back.easeInOut.config(1),rotation:180}),e.set(".x",{visibility:"hidden"},.3),e.set(".checkmark",{visibility:"visible"},.3),e.to(".phone",.5,{ease:l.Back.easeInOut.config(1),rotation:90},"+=1"),e.set(".x",{visibility:"visible"},"-=0.2"),e.set(".checkmark",{visibility:"hidden"},"-=0.2"),(0,c["default"])(window).width()<(0,c["default"])(window).height()?(l.TweenMax.set(".rotate-phone-screen",{visibility:"visible"}),e.play()):this.startedLoading||this.startLoading(),(0,c["default"])(window).on("orientationchange",function(){setTimeout(function(){(0,c["default"])(window).width()>(0,c["default"])(window).height()?(l.TweenMax.to(".rotate-phone-screen",.3,{autoAlpha:0}),t.startedLoading||t.startLoading(),e.pause()):(l.TweenMax.to(".rotate-phone-screen",.3,{autoAlpha:1}),e.play())},400)})}},{key:"startLoading",value:function(){var e=this;this.startedLoading=!0,t.all([this.scene.setup(),this.loadModeChooserAnimation(),this.loadingAnimation()]).then(function(){e.introAnimation()})["catch"](function(t){console.warn(t)})}},{key:"hideFullscreenButton",value:function(){this.iOS&&l.TweenMax.set(".fullscreen-button",{display:"none"})}},{key:"setupVRButton",value:function(){var t=this,e={color:"#fff",corners:"square"};this.scene.display?ga("send","event","VR Display","custom",this.scene.display.displayName):ga("send","event","VR Display","custom","No VR Display"),this.enterVRButton=new E.EnterVRButton(this.scene.renderer.domElement,e),document.getElementById("cardboard").appendChild(this.enterVRButton.domElement),this.mobileDetect.tablet()&&!/OculusBrowser/.test(navigator.userAgent)&&this.enterVRButton.disable(),this.enterVRButton.on("enter",function(){ga("send","event","VR Mode","click","Enter VR Button"),l.TweenMax.set(".enter-vr, .mute, .reset-pose",{display:"none",opacity:0}),t.scene.config.state!==x.STATE.PLAYING&&t.scene.config.state!==x.STATE.GAME_OVER&&t.scene.config.state!==x.STATE.COUNTDOWN&&t.scene.config.state!==x.STATE.PAUSED&&(l.TweenMax.to(".choose-vr-mode-screen",.4,{autoAlpha:0}),t.scene.setupVRControls(),t.scene.controlMode=x.CONTROLMODE.VR,t.scene.startGame(),t.scene.onResize(),t.hideFullscreenButton())}),this.enterVRButton.on("exit",function(){l.TweenMax.set([t.scene.renderer,".mute","canvas"],{display:"block",visibility:"visible",opacity:1}),t.hideFullscreenButton(),t.scene.display&&l.TweenMax.set(".enter-vr",{display:"block",opacity:1}),M["default"].isMobile()&&l.TweenMax.set(".reset-pose",{display:"block",opacity:1})})}},{key:"loadingAnimation",value:function(){return new t(function(t){l.TweenMax.to("header span",.5,{ease:l.SlowMo.ease.config(.3,.7,!1),width:"100%",onComplete:function(){l.TweenMax.set("header h1",{opacity:1,color:"#fff"}),(0,c["default"])("header span").remove(),t()}})})}},{key:"introAnimation",value:function(){l.TweenMax.to([".intro-screen > div > *"],.5,{y:10}),l.TweenMax.to([".intro-screen > div > *"],.2,{opacity:1,delay:.3}),l.TweenMax.to([".ui"],.8,{opacity:1}),this.startBallTween()}},{key:"startBallTween",value:function(){var t=this,e=parseInt((0,c["default"])("#ball").attr("r"),10),i={x:Math.random()>.5?-e:1920+e,y:800*Math.random()-400};this.introBallTween=new l.TimelineMax({onComplete:function(){setTimeout(function(){t.introOver||t.startBallTween()},2e3*Math.random())}});var n=(0,c["default"])("#ball"),r=(0,c["default"])("#ball-shadow"),o=i.y,s=840,a=1.8;this.introBallTween.to(i,1/a,{x:i.x>0?-e:1920+e,ease:l.Power0.easeNone,onUpdate:function(){n.attr("cx",i.x),r.attr("cx",i.x),r.attr("cy",s);var t=40+15*(1-(s-i.y)/s),e=t/2;r.attr("rx",t),r.attr("ry",e)}},0),this.introBallTween.to(i,.6/a,{y:800,ease:l.Power1.easeIn,onUpdate:function(){n.attr("cy",i.y)},onComplete:function(){}},0),this.introBallTween.call(function(){t.scene.sound.table()},null,null,"-=0.216"),this.introBallTween.to(i,.8/a,{y:o+150,ease:l.Power1.easeOut,onUpdate:function(){n.attr("cy",i.y)}},.6/a)}},{key:"setupCustomEventHandlers",value:function(){var t=this;this.emitter.on(x.EVENT.GAME_OVER,function(){document.exitPointerLock&&document.exitPointerLock()}),this.emitter.on(x.EVENT.EXIT_BUTTON_PRESSED,function(){t.scene.manager.mode===b["default"].VR?setTimeout(function(){location.reload()},3e3):location.reload()}),this.emitter.on(x.EVENT.OPPONENT_DISCONNECTED,function(){t.scene.showOverlay(),t.scene.hud.message.setMessage("opponent disconnected"),t.scene.hud.message.showMessage(),t.scene.paddleOpponent.visible=!1,t.scene.config.state=x.STATE.PAUSED}),this.emitter.on(x.EVENT.OPPONENT_PAUSED,function(){t.scene.config.state===x.STATE.PLAYING&&(t.scene.hud.message.setMessage("opponent paused"),t.scene.hud.message.showMessage(),t.scene.config.state=x.STATE.PAUSED,t.scene.showOverlay())}),this.emitter.on(x.EVENT.OPPONENT_UNPAUSED,function(){t.scene.hud.message.hideMessage(),t.scene.config.state=x.STATE.PLAYING,t.scene.hideOverlay()})}},{key:"loadModeChooserAnimation",value:function(){var e=this;return t.all([new t(function(t){c["default"].getJSON("/animations/1player-v3.json",function(i){e.singleplayerAnimation=g["default"].loadAnimation({container:document.getElementById("singleplayer-animation"),renderer:"svg",loop:!0,animationData:i}),t()})}),new t(function(t){c["default"].getJSON("/animations/2player-v3.json",function(i){e.multiplayerAnimation=g["default"].loadAnimation({container:document.getElementById("multiplayer-animation"),renderer:"svg",loop:!0,animationData:i}),t()})})])}},{key:"setupDOMHandlers",value:function(){var t=this;(0,c["default"])(document).on("visibilitychange",this.onVisibilityChange.bind(this)),(0,c["default"])("#start-singleplayer").on("click",this.onStartSingleplayerClick.bind(this)),(0,c["default"])("#open-room").on("click",this.onOpenRoomClick.bind(this)),(0,c["default"])("#join-room").on("click",this.onJoinRoomClick.bind(this)),(0,c["default"])("#play-again").on("click",this.onPlayAgainClick.bind(this)),(0,c["default"])(".enter-vr").on("click",this.onEnterVRClick.bind(this)),(0,c["default"])(".about-button").on("click",this.onAboutButtonClick.bind(this)),(0,c["default"])("#start").on("click",this.onStartClick.bind(this)),(0,c["default"])("#tilt").on("click",this.onTiltClick.bind(this)),(0,c["default"])(".reset-pose").on("click",this.scene.resetPose.bind(this.scene)),(0,c["default"])("button.btn").on("click",function(){t.scene.sound.playUI("button")}),(0,c["default"])("#reload").on("click",window.location.reload),(0,c["default"])(".join-room-screen .back-arrow").on("click",function(){t.backAnimation(".choose-mode-screen")}),(0,c["default"])(".open-room-screen .back-arrow").on("click",function(){t.backAnimation(".choose-mode-screen")}),(0,c["default"])(".about-screen .back-arrow").on("click",function(){t.backAnimation(t.activeScreen,!0)}),(0,c["default"])(".mute").on("click",this.scene.sound.toggleMute.bind(this.scene.sound)),(0,c["default"])("input").on("focus",function(t){M["default"].isMobile()&&l.TweenMax.to(t.target,.3,{scale:.5})}),(0,c["default"])("input").on("blur",function(t){l.TweenMax.to(t.target,.3,{scale:1})}),(0,c["default"])("button.btn:not(.about-button)").mouseenter(function(){l.TweenMax.to((0,c["default"])(this),.2,{boxShadow:"inset 0px 0px 0px 2px rgba(255, 255, 255, 1)"})}).mouseleave(function(){l.TweenMax.to((0,c["default"])(this),.2,{boxShadow:"inset 0px 0px 0px 0px rgba(255, 255, 255, 0)"})}),(0,c["default"])("button.btn").on("click",function(){var t=.1;l.TweenMax.to((0,c["default"])(this),t,{backgroundColor:"#fff"}),l.TweenMax.to((0,c["default"])(this),t,{backgroundColor:"transparent",delay:t})})}},{key:"onVisibilityChange",value:function(){document.hidden?(this.scene.tabActive=!1,this.scene.sound.blur(),this.scene.communication.isOpponentConnected&&this.scene.config.state===x.STATE.PLAYING&&this.scene.communication.sendPause()):(this.scene.tabActive=!0,this.scene.firstActiveFrame=this.scene.frameNumber,this.scene.sound.focus(),this.scene.communication.isOpponentConnected&&this.scene.config.state===x.STATE.PLAYING&&this.scene.communication.sendUnpause())}},{key:"onEnterVRClick",value:function(){this.enterVRButton.requestEnterVR()}},{key:"onStartSingleplayerClick",value:function(){(0,c["default"])(".choose-vr-mode-screen").removeClass("blue green"),(0,c["default"])(".choose-vr-mode-screen").addClass("pink"),(0,c["default"])(".choose-vr-mode-screen a .before, .choose-vr-mode-screen #tilt .before").addClass("pink"),this.scene.setSingleplayer(),this.viewVRChooserScreen()}},{key:"onOpenRoomClick",value:function(){(0,c["default"])(".choose-vr-mode-screen").removeClass("pink green"),(0,c["default"])(".choose-vr-mode-screen").addClass("blue"),(0,c["default"])(".choose-vr-mode-screen a .before, .choose-vr-mode-screen #tilt .before").addClass("blue"),this.scene.setMultiplayer(),this.viewOpenRoomScreenAnimation()}},{key:"onJoinRoomClick",value:function(){(0,c["default"])(".choose-vr-mode-screen").removeClass("pink blue"),(0,c["default"])(".choose-vr-mode-screen").addClass("green"),(0,c["default"])(".choose-vr-mode-screen a .before, .choose-vr-mode-screen #tilt .before").addClass("green"),this.scene.setMultiplayer(),this.viewJoinRoomScreenAnimation()}},{key:"onPlayAgainClick",value:function(){this.scene.config.mode===x.MODE.MULTIPLAYER&&((0,c["default"])("#play-again").text("waiting for opponent to restart"),this.scene.playerRequestedRestart=!0,this.communication.sendRestartGame()),this.scene.restartGame()}},{key:"onAboutButtonClick",value:function(){var t=new l.TimelineMax;t.set(this.activeScreen,{zIndex:10}),t.set(".transition-color-screen.green",{zIndex:11,left:"-100%"}),t.set(".transition-color-screen.blue",{zIndex:12,left:"-100%"}),t.set(".transition-color-screen.pink",{zIndex:13,left:"-100%"}),t.set(".about-screen",{zIndex:14}),t.to(this.activeScreen,R,{left:"100%",ease:O}),t.staggerTo([".transition-color-screen.green",".transition-color-screen.blue",".transition-color-screen.pink",".about-screen"],R,{left:"0%",ease:O},I,"-="+R)}},{key:"onStartClick",value:function(){var t=this;if(M["default"].isMobile()){var e=new a["default"];e.enable()}this.activeScreen=".choose-mode-screen",this.scene.sound.playLoop("bass-pad"),this.scene.sound.playUI("transition");var i=new l.TimelineMax;i.set(".choose-mode-screen h3, .choose-mode-screen svg, .buttons",{opacity:0,y:10}),i.set(".intro-screen",{zIndex:10}),i.set(".transition-color-screen",{zIndex:11,left:"-100%"}),i.set(".choose-mode-screen",{zIndex:12});var n=(0,c["default"])(window).width();i.staggerTo([".intro-screen h1",".intro-screen p",".intro-screen button",".intro-screen"],R,{x:n,ease:O},I),i.set(".intro-screen",{display:"none"}),i.call(function(){t.introBallTween.kill(),t.introOver=!0}),i.staggerTo([".transition-color-screen.pink",".transition-color-screen.green",".choose-mode-screen"],R,{left:"0%",ease:O},I,"-="+(R+I)),i.set([".transition-color-screen.pink",".transition-color-screen.blue",".transition-color-screen.green"],{left:"-100%"}),i.staggerTo(["#singleplayer-animation svg","#multiplayer-animation svg",".one-player-col h3",".two-player-col h3"],.3,{y:0,opacity:1},.1),i.staggerTo([".one-player-col .buttons",".two-player-col .buttons"],.3,{y:0,opacity:1},.1,"+=0.2")}},{key:"onTiltClick",value:function(){ga("send","event","VR Mode","click","Enter 360 Button"),M["default"].isMobile()||this.mobileDetect.tablet()?(this.scene.manager.onFSClick_(),this.scene.setupVRControls(),this.scene.controlMode=x.CONTROLMODE.VR):this.scene.controlMode=x.CONTROLMODE.MOUSE,this.scene.startGame(),this.hideFullscreenButton()}},{key:"viewVRChooserScreen",value:function(){var e=this;return this.scene.config.mode===x.MODE.MULTIPLAYER?ga("send","event","Mode","custom","Multiplayer"):ga("send","event","Mode","custom","Singleplayer"),new t(function(t){e.scene.sound.playUI("transition");var i=new l.TimelineMax;i.set(".choose-vr-mode-screen, .transition-color-screen",{left:"-100%"}),i.set([".open-room-screen",".join-room-screen",".choose-mode-screen"],{zIndex:10}),i.set(".transition-color-screen",{zIndex:11}),i.set(".choose-vr-mode-screen",{zIndex:12,display:"block"}),i.to([".open-room-screen",".join-room-screen",".choose-mode-screen"],R,{left:"100%",ease:O}),i.staggerTo([".transition-color-screen.pink",".transition-color-screen.blue",".transition-color-screen.green",".choose-vr-mode-screen"],R,{left:"0%",ease:O},I,"-="+(R+I)),i.call(function(){g["default"].stop(),g["default"].destroy(),g["default"].stop(),g["default"].destroy()}),i.call(t)})}},{key:"viewJoinRoomScreenAnimation",value:function(){var e=this;return new t(function(t){e.activeScreen=".join-room-screen",(0,c["default"])("#room-code").focus(),(0,c["default"])("#room-code").bind("input",function(){e.scene.sound.playUI("type"),0!==(0,c["default"])("#room-code").val().length?(0,c["default"])(".input-wrapper .placeholder").hide():(0,c["default"])(".input-wrapper .placeholder").show(),4===(0,c["default"])("#room-code").val().length?((0,c["default"])("#join-room-button").removeClass("inactive"),(0,c["default"])("#join-room-button").css("pointer-events","auto")):((0,c["default"])("#join-room-button").addClass("inactive"),(0,c["default"])("#join-room-button").css("pointer-events","none"))}),(0,c["default"])("#room-form").on("submit",function(){(0,c["default"])("#room-code").attr("readonly","readonly"),setTimeout(function(){(0,c["default"])("#room-code").blur(),(0,c["default"])("#room-code").removeAttr("readonly")},100),(0,c["default"])("#room-form .grey-text").css("color","#fff"),(0,c["default"])("#room-form .grey-text").text("connecting to server...");var t=new l.TimelineMax({repeat:-1,repeatDelay:.5});t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server&nbsp;&nbsp;&nbsp;")},null,null,.5),t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server.&nbsp;&nbsp;")},null,null,1),t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server..&nbsp;")},null,null,1.5),t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server...")},null,null,2),e.communication.tryConnecting((0,c["default"])("#room-code").val().toUpperCase()).then(function(){(0,c["default"])("#room-form .grey-text").text("game starts"),(0,c["default"])("#room-form #join-room-button").css("visibility","hidden"),l.TweenMax.set(".opponent-icon > *",{fill:"#fff"}),t.kill(),setTimeout(function(){e.viewVRChooserScreen()},1e3)})["catch"](function(e){t.kill(),(0,c["default"])("#room-form .grey-text").text(e)})}),e.scene.sound.playUI("transition"),e.scene.sound.playLoop("waiting");var i=new l.TimelineMax;i.set(".join-room-screen form > *",{opacity:0,y:10}),(0,c["default"])(".intro-wrapper").removeClass("green blue pink"),(0,c["default"])(".intro-wrapper").addClass("pink"),i.set(".choose-mode-screen",{zIndex:10}),i.set(".transition-color-screen.green",{zIndex:11}),i.set(".transition-color-screen.blue",{zIndex:12}),i.set(".join-room-screen",{zIndex:13}),i.to(".choose-mode-screen",R,{left:"100%",ease:O}),i.staggerTo([".transition-color-screen.green",".transition-color-screen.blue",".join-room-screen"],R,{left:"0%",ease:O},I,"-="+(R-I)),i.staggerTo([".join-room-screen .input-wrapper",".join-room-screen .grey-text",".join-room-screen #join-room-button"],.3,{y:0,opacity:1},.1),i.call(t)})}},{key:"backAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.scene.sound.playUI("transition");var i=new l.TimelineMax;i.set(".choose-mode-screen",{zIndex:10}),i.set(".transition-color-screen."+(".join-room-screen"===this.activeScreen?"blue":"green"),{zIndex:11,left:"0"}),i.set(".transition-color-screen."+(".join-room-screen"===this.activeScreen?"green":"blue"),{zIndex:11,left:"-100%"}),i.set(".transition-color-screen.pink",{zIndex:12,left:"0"}),e||i.set(".join-room-screen, .open-room-screen",{zIndex:13}),i.staggerTo([e?".about-screen":this.activeScreen,".transition-color-screen.pink",".transition-color-screen."+(".join-room-screen"===this.activeScreen?"blue":"green")],R,{left:"-100%",ease:O},I),i.to([e?this.activeScreen:t],R,{left:"0%",ease:O},"-="+R),e||this.scene.sound.playLoop("bass-pad"),this.activeScreen=t}},{key:"viewOpenRoomScreenAnimation",value:function(){var e=this;return new t(function(t){e.activeScreen=".open-room-screen",e.communication.chooseClosestServer().then(function(){var t=e.communication.openRoom();(0,c["default"])("#generated-room-code").val(t),(0,c["default"])(".opponent-joined").text("waiting for opponent")})["catch"](function(t){console.warn(t),(0,c["default"])(".opponent-joined").text("cannot connect to server"),l.TweenMax.killTweensOf(".opponent-joined"),l.TweenMax.set(".opponent-joined",{visibility:"visible",opacity:1})}),e.emitter.on(x.EVENT.OPPONENT_CONNECTED,function(){e.scene.sound.playUI("joined"),(0,c["default"])(".opponent-joined").text("Opponent joined"),l.TweenMax.set(".opponent-icon > *",{fill:"#fff"}),(0,c["default"])("#join-waiting-room").hide(),l.TweenMax.killTweensOf(".opponent-joined"),l.TweenMax.set(".opponent-joined",{visibility:"visible",opacity:1}),setTimeout(function(){e.viewVRChooserScreen()},1e3)}),e.scene.sound.playUI("transition"),e.scene.sound.playLoop("waiting"),(0,c["default"])(".intro-wrapper").removeClass("green blue pink"),(0,c["default"])(".intro-wrapper").addClass("pink");var i=(new d["default"]("#generated-room-code"),new l.TimelineMax);i.set(".open-room-screen > .inner > *",{opacity:0,y:10}),i.set(["#generated-room-code",".open-room-screen .grey-text"],{opacity:0,y:10}),i.set([".open-room-screen .opponent-joined"],{opacity:0}),i.set(".choose-mode-screen",{zIndex:10}),i.set(".transition-color-screen",{zIndex:11,left:"-100%"}),i.set(".open-room-screen",{zIndex:12}),i.to(".choose-mode-screen",R,{left:"100%",ease:O}),i.staggerTo([".transition-color-screen.blue",".transition-color-screen.green",".open-room-screen"],R,{left:"0%",ease:O},I,"-="+R),i.staggerTo(["#generated-room-code",".open-room-screen .grey-text"],.3,{y:0,opacity:1}),i.to([".open-room-screen .opponent-joined"],.3,{opacity:1},"+=0.5"),i.call(t);var n=1,r=new l.TimelineMax({repeat:-1,repeatDelay:n});r.set(".opponent-joined",{color:"#392a85"},0),r.set(".opponent-joined",{color:"#ffffff"},n)})["catch"](function(t){console.warn(t)})}}]),e}();new N}).call(e,i(2))},function(t,e,i){(function(e,n,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   3.3.1
	 */
!function(e,i){t.exports=i()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){Z=t}function s(t){K=t}function a(){return function(){return e.nextTick(p)}}function l(){return function(){q(p)}}function h(){var t=0,e=new J(p),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=p,function(){return t.port2.postMessage(0)}}function u(){var t=setTimeout;return function(){return t(p,1)}}function p(){for(var t=0;t<Y;t+=2){var e=it[t],i=it[t+1];e(i),it[t]=void 0,it[t+1]=void 0}Y=0}function f(){try{var t=i(4);return q=t.runOnLoop||t.runOnContext,l()}catch(e){return u()}}function d(t,e){var i=arguments,n=this,r=new this.constructor(g);void 0===r[rt]&&D(r);var o=n._state;return o?!function(){var t=i[o-1];K(function(){return O(o,r,t,n._result)})}():P(n,r,t,e),r}function m(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var i=new e(g);return S(i,t),i}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return lt.error=e,lt}}function b(t,e,i,n){try{t.call(e,i,n)}catch(r){return r}}function T(t,e,i){K(function(t){var n=!1,r=b(i,e,function(i){n||(n=!0,e!==i?S(t,i):A(t,i))},function(e){n||(n=!0,M(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&r&&(n=!0,M(t,r))},t)}function E(t,e){e._state===st?A(t,e._result):e._state===at?M(t,e._result):P(e,void 0,function(e){return S(t,e)},function(e){return M(t,e)})}function x(t,e,i){e.constructor===t.constructor&&i===d&&e.constructor.resolve===m?E(t,e):i===lt?M(t,lt.error):void 0===i?A(t,e):n(i)?T(t,e,i):A(t,e)}function S(e,i){e===i?M(e,y()):t(i)?x(e,i,_(i)):A(e,i)}function w(t){t._onerror&&t._onerror(t._result),C(t)}function A(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&K(C,t))}function M(t,e){t._state===ot&&(t._state=at,t._result=e,K(w,t))}function P(t,e,i,n){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+st]=i,r[o+at]=n,0===o&&t._state&&K(C,t)}function C(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,r=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],r=e[s+i],n?O(i,n,r,o):r(o);t._subscribers.length=0}}function R(){this.error=null}function I(t,e){try{return t(e)}catch(i){return ht.error=i,ht}}function O(t,e,i,r){var o=n(i),s=void 0,a=void 0,l=void 0,h=void 0;if(o){if(s=I(i,r),s===ht?(h=!0,a=s.error,s=null):l=!0,e===s)return void M(e,v())}else s=r,l=!0;e._state!==ot||(o&&l?S(e,s):h?M(e,a):t===st?A(e,s):t===at&&M(e,s))}function N(t,e){try{e(function(e){S(t,e)},function(e){M(t,e)})}catch(i){M(t,i)}}function L(){return ct++}function D(t){t[rt]=ct++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(t,e){this._instanceConstructor=t,this.promise=new t(g),this.promise[rt]||D(this.promise),X(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):M(this.promise,B())}function B(){return new Error("Array Methods must be provided an Array")}function G(t){return new k(this,t).promise}function F(t){var e=this;return new e(X(t)?function(i,n){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(i,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function V(t){var e=this,i=new e(g);return M(i,t),i}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(t){this[rt]=L(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&U(),this instanceof j?N(this,t):H())}function z(){var t=void 0;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(e){}if("[object Promise]"===n&&!i.cast)return}t.Promise=j}var W=void 0;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X=W,Y=0,q=void 0,Z=void 0,K=function(t,e){it[Y]=t,it[Y+1]=e,Y+=2,2===Y&&(Z?Z(p):nt())},$="undefined"!=typeof window?window:void 0,Q=$||{},J=Q.MutationObserver||Q.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,it=new Array(1e3),nt=void 0;nt=tt?a():J?h():et?c():void 0===$?f():u();var rt=Math.random().toString(36).substring(16),ot=void 0,st=1,at=2,lt=new R,ht=new R,ct=0;return k.prototype._enumerate=function(){for(var t=this.length,e=this._input,i=0;this._state===ot&&i<t;i++)this._eachEntry(e[i],i)},k.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===m){var r=_(t);if(r===d&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===j){var o=new i(g);x(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},k.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===ot&&(this._remaining--,t===at?M(n,i):this._result[e]=i),0===this._remaining&&A(n,this._result)},k.prototype._willSettleAt=function(t,e){var i=this;P(t,void 0,function(t){return i._settledAt(st,e,t)},function(t){return i._settledAt(at,e,t)})},j.all=G,j.race=F,j.resolve=m,j.reject=V,j._setScheduler=o,j._setAsap=s,j._asap=K,j.prototype={constructor:j,then:d,"catch":function(t){return this.then(null,t)}},z(),j.polyfill=z,j.Promise=j,j})}).call(e,i(3),i(2),function(){return this}())},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(u===clearTimeout)return clearTimeout(t);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?d=f.concat(d):g=-1,d.length&&a())}function a(){if(!m){var t=r(s);m=!0;for(var e=d.length;e;){for(f=d,d=[];++g<e;)f&&f[g].run();g=-1,e=d.length}f=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function h(){}var c,u,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(t){c=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(t){u=n}}();var f,d=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new l(t,e)),1!==d.length||m||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=h,p.addListener=h,p.once=h,p.off=h,p.removeListener=h,p.removeAllListeners=h,p.emit=h,p.prependListener=h,p.prependOnceListener=h,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){},function(t,e){function i(t,e,i){var n=document.createElement("source");n.src=i,n.type="video/"+e,t.appendChild(n)}var n={Android:/Android/gi.test(navigator.userAgent),iOS:/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)},r={WebM:"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",MP4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw=="},o=function(){return n.iOS?this.noSleepTimer=null:n.Android&&(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("loop",""),i(this.noSleepVideo,"webm",r.WebM),i(this.noSleepVideo,"mp4",r.MP4)),this};o.prototype.enable=function(t){n.iOS?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},t||15e3)):n.Android&&this.noSleepVideo.play()},o.prototype.disable=function(){n.iOS?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):n.Android&&this.noSleepVideo.pause()},t.exports=o},function(t,e,i){var n,r;(function(i){/*!
	 * VERSION: 1.20.5
	 * DATE: 2018-05-21
	 * UPDATES AND DOCS AT: http://greensock.com
	 * 
	 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
	 *
	 * @license Copyright (c) 2008-2018, GreenSock. All rights reserved.
	 * This work is subject to the terms at http://greensock.com/standard-license or for
	 * Club GreenSock members, the software agreement that was issued with your membership.
	 * 
	 * @author: Jack Doyle, jack@greensock.com
	 **/
var o="undefined"!=typeof t&&t.exports&&"undefined"!=typeof i?i:this||window;(o._gsQueue||(o._gsQueue=[])).push(function(){"use strict";o._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,i){var n,r,o=t.cycle;for(n in o)r=o[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},o=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=this.vars.yoyo===!0||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=o.prototype.render},s=1e-10,a=i._internals,l=a.isSelector,h=a.isArray,c=o.prototype=i.to({},.1,{}),u=[];o.version="1.20.5",c.constructor=o,c.kill()._gc=!1,o.killTweensOf=o.killDelayedCallsTo=i.killTweensOf,o.getTweensOf=i.getTweensOf,o.lagSmoothing=i.lagSmoothing,o.ticker=i.ticker,o.render=i.render,c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i.prototype.invalidate.call(this)},c.updateTo=function(t,e){var n,r=this.ratio,o=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted||o)if(e)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var a,l=1/(1-r),h=this._firstPT;h;)a=h.s+h.c,h.c*=l,h.s=a-h.c,h=h._next;return this},c.render=function(t,e,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,o,l,h,c,u,p,f,d,m=this._dirty?this.totalDuration():this._totalDuration,g=this._time,y=this._totalTime,v=this._cycle,_=this._duration,b=this._rawPrevTime;if(t>=m-1e-7&&t>=0?(this._totalTime=m,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=_,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,o="onComplete",n=n||this._timeline.autoRemoveChildren),0===_&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(b<0||t<=0&&t>=-1e-7||b===s&&"isPause"!==this.data)&&b!==t&&(n=!0,b>s&&(o="onReverseComplete")),this._rawPrevTime=f=!e||t||b===t?t:s)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==y||0===_&&b>0)&&(o="onReverseComplete",r=this._reversed),t<0&&(this._active=!1,0===_&&(this._initted||!this.vars.lazy||n)&&(b>=0&&(n=!0),this._rawPrevTime=f=!e||t||b===t?t:s)),this._initted||(n=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=_+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&y<=t&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=_-this._time,d=this._yoyoEase||this.vars.yoyoEase,d&&(this._yoyoEase||(d!==!0||this._initted?this._yoyoEase=d=d===!0?this._ease:d instanceof Ease?d:Ease.map[d]:(d=this.vars.ease,this._yoyoEase=d=d?d instanceof Ease?d:"function"==typeof d?new Ease(d,this.vars.easeParams):Ease.map[d]||i.defaultEase:i.defaultEase)),this.ratio=d?1-d.getRatio((_-this._time)/_):0)),this._time>_?this._time=_:this._time<0&&(this._time=0)),this._easeType&&!d?(c=this._time/_,u=this._easeType,p=this._easePower,(1===u||3===u&&c>=.5)&&(c=1-c),3===u&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),1===u?this.ratio=1-c:2===u?this.ratio=c:this._time/_<.5?this.ratio=c/2:this.ratio=1-c/2):d||(this.ratio=this._ease.getRatio(this._time/_))),g===this._time&&!n&&v===this._cycle)return void(y!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=y,this._rawPrevTime=b,this._cycle=v,a.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||r||d?r&&this._ease._calcEnd&&!d&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/_)}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===y&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,!0,n):o||(o="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==_||e||this._callback("onStart"))),l=this._firstPT;l;)l.f?l.t[l.p](l.c*this.ratio+l.s):l.t[l.p]=l.c*this.ratio+l.s,l=l._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,!0,n),e||(this._totalTime!==y||o)&&this._callback("onUpdate")),this._cycle!==v&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),o&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o),0===_&&this._rawPrevTime===s&&f!==s&&(this._rawPrevTime=0)))},o.to=function(t,e,i){return new o(t,e,i)},o.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new o(t,e,i)},o.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new o(t,e,n)},o.staggerTo=o.allTo=function(t,e,s,a,c,p,f){a=a||0;var d,m,g,y,v=0,_=[],b=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),c.apply(f||s.callbackScope||this,p||u)},T=s.cycle,E=s.startAt&&s.startAt.cycle;for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=n(t))),t=t||[],a<0&&(t=n(t),t.reverse(),a*=-1),d=t.length-1,g=0;g<=d;g++){m={};for(y in s)m[y]=s[y];if(T&&(r(m,t,g),null!=m.duration&&(e=m.duration,delete m.duration)),E){E=m.startAt={};for(y in s.startAt)E[y]=s.startAt[y];r(m.startAt,t,g)}m.delay=v+(m.delay||0),g===d&&c&&(m.onComplete=b),_[g]=new o(t[g],e,m),v+=a}return _},o.staggerFrom=o.allFrom=function(t,e,i,n,r,s,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,o.staggerTo(t,e,i,n,r,s,a)},o.staggerFromTo=o.allFromTo=function(t,e,i,n,r,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,o.staggerTo(t,e,n,r,s,a,l)},o.delayedCall=function(t,e,i,n,r){return new o(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},o.set=function(t,e){return new o(t,0,e)},o.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var p=function(t,e){for(var n=[],r=0,o=t._first;o;)o instanceof i?n[r++]=o:(e&&(n[r++]=o),n=n.concat(p(o,e)),r=n.length),o=o._next;return n},f=o.getAllTweens=function(e){return p(t._rootTimeline,e).concat(p(t._rootFramesTimeline,e))};o.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var o,s,a,l=f(0!=r),h=l.length,c=i&&n&&r;for(a=0;a<h;a++)s=l[a],(c||s instanceof e||(o=s.target===s.vars.onComplete)&&n||i&&!o)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},o.killChildTweensOf=function(t,e){if(null!=t){var r,s,c,u,p,f=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=n(t)),h(t))for(u=t.length;--u>-1;)o.killChildTweensOf(t[u],e);else{r=[];for(c in f)for(s=f[c].target.parentNode;s;)s===t&&(r=r.concat(f[c].tweens)),s=s.parentNode;for(p=r.length,u=0;u<p;u++)e&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var d=function(t,i,n,r){i=i!==!1,n=n!==!1,r=r!==!1;for(var o,s,a=f(r),l=i&&n&&r,h=a.length;--h>-1;)s=a[h],(l||s instanceof e||(o=s.target===s.vars.onComplete)&&n||i&&!o)&&s.paused(t)};return o.pauseAll=function(t,e,i){d(!0,t,e,i)},o.resumeAll=function(t,e,i){d(!1,t,e,i)},o.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||s,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},c.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},c.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},c.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o},!0),o._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],h(i)&&i.join("").indexOf("{self}")!==-1&&(r[n]=this._swapSelfInParams(i));h(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,s=i._internals,a=n._internals={},l=s.isSelector,h=s.isArray,c=s.lazyTweens,u=s.lazyRender,p=o._gsDefine.globals,f=function(t){var e,i={};for(e in t)i[e]=t[e];return i},d=function(t,e,i){var n,r,o=t.cycle;for(n in o)r=o[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},m=a.pauseCallback=function(){},g=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},y=n.prototype=new e;return n.version="1.20.4",y.constructor=n,y.kill()._gc=y._forcingPlayhead=y._hasPause=!1,y.to=function(t,e,n,r){var o=n.repeat&&p.TweenMax||i;return e?this.add(new o(t,e,n),r):this.set(t,n,r)},y.from=function(t,e,n,r){return this.add((n.repeat&&p.TweenMax||i).from(t,e,n),r)},y.fromTo=function(t,e,n,r,o){var s=r.repeat&&p.TweenMax||i;return e?this.add(s.fromTo(t,e,n,r),o):this.set(t,r,o)},y.staggerTo=function(t,e,r,o,s,a,h,c){var u,p,m=new n({onComplete:a,onCompleteParams:h,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),y=r.cycle;for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],l(t)&&(t=g(t)),o=o||0,o<0&&(t=g(t),t.reverse(),o*=-1),p=0;p<t.length;p++)u=f(r),u.startAt&&(u.startAt=f(u.startAt),u.startAt.cycle&&d(u.startAt,t,p)),y&&(d(u,t,p),null!=u.duration&&(e=u.duration,delete u.duration)),m.to(t[p],e,u,p*o);return this.add(m,s)},y.staggerFrom=function(t,e,i,n,r,o,s,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,o,s,a)},y.staggerFromTo=function(t,e,i,n,r,o,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,o,s,a,l)},y.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},y.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,o,s,a,l=new n(t),h=l._timeline;for(null==e&&(e=!0),h._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=h._time,s=h._first;s;)a=s._next,e&&s instanceof i&&s.target===s.vars.onComplete||(o=s._startTime-s._delay,o<0&&(r=1),l.add(s,o)),s=a;return h.add(l,0),r&&l.totalDuration(),l},y.add=function(r,o,s,a){var l,c,u,p,f,d;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&h(r)){for(s=s||"normal",a=a||0,l=o,c=r.length,u=0;u<c;u++)h(p=r[u])&&(p=new n({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===s?l=p._startTime+p.totalDuration()/p._timeScale:"start"===s&&(p._startTime-=p.delay())),l+=a;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,o);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,o),r._time&&r.render((this.rawTime()-r._startTime)*r._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,d=f.rawTime()>r._startTime;f._timeline;)d&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},y.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&h(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},y._remove=function(t,i){e.prototype._remove.call(this,t,i);var n=this._last;return n?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},y.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},y.insert=y.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},y.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},y.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},y.addPause=function(t,e,n,r){var o=i.delayedCall(0,m,n,r||this);return o.vars.onComplete=o.vars.onReverseComplete=e,o.data="isPause",this._hasPause=!0,this.add(o,t)},y.removeLabel=function(t){return delete this._labels[t],this},y.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},y._parseTimeOrLabel=function(e,i,n,r){var o,s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&h(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if(o="number"!=typeof e||i?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-o:0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=o);else{if(s=e.indexOf("="),s===-1)return null==this._labels[e]?n?this._labels[e]=o+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):o}return Number(e)+i},y.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},y.stop=function(){return this.paused(!0)},y.gotoAndPlay=function(t,e){return this.play(t,e)},y.gotoAndStop=function(t,e){return this.pause(t,e)},y.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,o,s,a,l,h,p,f=this._time,d=this._dirty?this.totalDuration():this._totalDuration,m=this._startTime,g=this._timeScale,y=this._paused;if(f!==this._time&&(t+=this._time-f),t>=d-1e-7&&t>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(o=!0,a="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=d+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(a="onReverseComplete",o=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=o=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&o)for(n=this._first;n&&0===n._startTime;)n._duration||(o=!1),n=n._next;t=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=f)for(n=this._first;n&&n._startTime<=t&&!h;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(h=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!h;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(h=n),n=n._prev;h&&(this._time=t=h._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==f&&this._first||i||l||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),p=this._time,p>=f)for(n=this._first;n&&(s=n._next,p===this._time&&(!this._paused||y));)(n._active||n._startTime<=p&&!n._paused&&!n._gc)&&(h===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;else for(n=this._last;n&&(s=n._prev,p===this._time&&(!this._paused||y));){if(n._active||n._startTime<=f&&!n._paused&&!n._gc){if(h===n){for(h=n._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(t-h._startTime)*h._timeScale:(t-h._startTime)*h._timeScale,e,i),h=h._prev;h=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=s}this._onUpdate&&(e||(c.length&&u(),this._callback("onUpdate"))),a&&(this._gc||m!==this._startTime&&g===this._timeScale||(0===this._time||d>=this.totalDuration())&&(o&&(c.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},y._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},y.getChildren=function(t,e,n,r){r=r||-9999999999;for(var o=[],s=this._first,a=0;s;)s._startTime<r||(s instanceof i?e!==!1&&(o[a++]=s):(n!==!1&&(o[a++]=s),t!==!1&&(o=o.concat(s.getChildren(!0,e,n)),a=o.length))),s=s._next;return o},y.getTweensOf=function(t,e){var n,r,o=this._gc,s=[],a=0;for(o&&this._enabled(!0,!0),n=i.getTweensOf(t),r=n.length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(s[a++]=n[r]);return o&&this._enabled(!1,!0),s},y.recent=function(){return this._recent},y._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},y.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,o=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in o)o[n]>=i&&(o[n]+=t);return this._uncache(!0)},y._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},y.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},y.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},y._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},y.totalTime=function(e,i,n){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},y.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},y.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,o=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&this._sortChildren&&!r._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(r,r._startTime-r._delay),this._calculatingDuration=0):o=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale,this._time-=r._startTime,this._totalTime-=r._startTime,this._rawPrevTime-=r._startTime),this.shiftChildren(-r._startTime,!1,-9999999999),o=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},y.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},y.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},y.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},n},!0),o._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,s=e._internals,a=s.lazyTweens,l=s.lazyRender,h=o._gsDefine.globals,c=new i(null,null,1,0),u=n.prototype=new t;return u.constructor=n,u.kill()._gc=!1,n.version="1.20.4",u.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},u.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},u.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},u.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},u.tweenTo=function(t,i){i=i||{};var n,r,o,s={ease:c,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},a=i.repeat&&h.TweenMax||e;for(r in i)s[r]=i[r];return s.time=this._parseTimeOrLabel(t),n=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,o=new a(this,n,s),s.onStart=function(){o.target.paused(!0),o.vars.time===o.target.time()||n!==o.duration()||o.isFromTo||o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale).render(o.time(),!0,!0),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||o,i.onStartParams||[])},o},u.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var n=this.tweenTo(e,i);return n.isFromTo=1,n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},u.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,o,s,h,c,u,p,f,d=this._time,m=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,y=this._totalTime,v=this._startTime,_=this._timeScale,b=this._rawPrevTime,T=this._paused,E=this._cycle;if(d!==this._time&&(t+=this._time-d),t>=m-1e-7&&t>=0)this._locked||(this._totalTime=m,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,h="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||b<0||b===r)&&b!==t&&this._first&&(c=!0,b>r&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=g,t=g+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==d||0===g&&b!==r&&(b>0||t<0&&b>=0)&&!this._locked)&&(h="onReverseComplete",o=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=o=!0,h="onReverseComplete"):b>=0&&this._first&&(c=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=g||!e||t||this._rawPrevTime===t?t:r,0===t&&o)for(n=this._first;n&&0===n._startTime;)n._duration||(o=!1),n=n._next;t=0,this._initted||(c=!0)}else if(0===g&&b<0&&(c=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=g+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&y<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,t=g+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if(t=this._time,t>=d||this._repeat&&E!==this._cycle)for(n=this._first;n&&n._startTime<=t&&!p;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(p=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!p;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(p=n),n=n._prev;p&&p._startTime<g&&(this._time=t=p._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==E&&!this._locked){var x=this._yoyo&&0!==(1&E),S=x===(this._yoyo&&0!==(1&this._cycle)),w=this._totalTime,A=this._cycle,M=this._rawPrevTime,P=this._time;if(this._totalTime=E*g,this._cycle<E?x=!x:this._totalTime+=g,this._time=d,this._rawPrevTime=0===g?b-1e-4:b,this._cycle=E,this._locked=!0,d=x?0:g,this.render(d,e,0===g),e||this._gc||this.vars.onRepeat&&(this._cycle=A,this._locked=!1,this._callback("onRepeat")),d!==this._time)return;if(S&&(this._cycle=E,this._locked=!0,d=x?g+1e-4:-1e-4,this.render(d,!0,!1)),this._locked=!1,this._paused&&!T)return;this._time=P,this._totalTime=w,this._cycle=A,this._rawPrevTime=M}if(!(this._time!==d&&this._first||i||c||p))return void(y!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==y&&t>0&&(this._active=!0),0===y&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),f=this._time,f>=d)for(n=this._first;n&&(s=n._next,f===this._time&&(!this._paused||T));)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(p===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;else for(n=this._last;n&&(s=n._prev,f===this._time&&(!this._paused||T));){if(n._active||n._startTime<=d&&!n._paused&&!n._gc){if(p===n){for(p=n._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(t-p._startTime)*p._timeScale:(t-p._startTime)*p._timeScale,e,i),p=p._prev;p=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=s}this._onUpdate&&(e||(a.length&&l(),this._callback("onUpdate"))),h&&(this._locked||this._gc||v!==this._startTime&&_===this._timeScale||(0===this._time||m>=this.totalDuration())&&(o&&(a.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this._callback(h)))},u.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,o=[],s=this.getChildren(t,e,i),a=0,l=s.length;for(n=0;n<l;n++)r=s[n],r.isActive()&&(o[a++]=r);return o},u.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},u.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},u.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},u.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},u.totalDuration=function(e){return arguments.length?this._repeat!==-1&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},u.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],i=[],n=[],r={},s=o._gsDefine.globals,a=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},l=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,n){var r={a:t},o={},s={},a={c:n},l=(t+e)/2,h=(e+i)/2,c=(i+n)/2,u=(l+h)/2,p=(h+c)/2,f=(p-u)/8;return r.b=l+(t-l)/4,o.b=u+f,r.c=o.a=(r.b+o.b)/2,o.c=s.a=(u+p)/2,s.b=p-f,a.b=c+(n-c)/4,s.c=a.a=(s.b+a.b)/2,[r,o,s,a]},c=function(t,r,o,s,a){var l,c,u,p,f,d,m,g,y,v,_,b,T,E=t.length-1,x=0,S=t[0].a;for(l=0;l<E;l++)f=t[x],c=f.a,u=f.d,p=t[x+1].d,a?(_=e[l],b=i[l],T=(b+_)*r*.25/(s?.5:n[l]||.5),d=u-(u-c)*(s?.5*r:0!==_?T/_:0),m=u+(p-u)*(s?.5*r:0!==b?T/b:0),g=u-(d+((m-d)*(3*_/(_+b)+.5)/4||0))):(d=u-(u-c)*r*.5,m=u+(p-u)*r*.5,g=u-(d+m)/2),d+=g,m+=g,f.c=y=d,0!==l?f.b=S:f.b=S=f.a+.6*(f.c-f.a),f.da=u-c,f.ca=y-c,f.ba=S-c,o?(v=h(c,S,y,u),t.splice(x,1,v[0],v[1],v[2],v[3]),x+=4):x++,S=m;f=t[x],f.b=S,f.c=S+.4*(f.d-S),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=S-f.a,o&&(v=h(f.a,S,f.c,f.d),t.splice(x,1,v[0],v[1],v[2],v[3]))},u=function(t,n,r,o){var s,l,h,c,u,p,f=[];if(o)for(t=[o].concat(t),l=t.length;--l>-1;)"string"==typeof(p=t[l][n])&&"="===p.charAt(1)&&(t[l][n]=o[n]+Number(p.charAt(0)+p.substr(2)));if(s=t.length-2,s<0)return f[0]=new a(t[0][n],0,0,t[0][n]),f;for(l=0;l<s;l++)h=t[l][n],c=t[l+1][n],f[l]=new a(h,0,0,c),r&&(u=t[l+2][n],e[l]=(e[l]||0)+(c-h)*(c-h),i[l]=(i[l]||0)+(u-c)*(u-c));return f[l]=new a(t[l][n],0,0,t[l+1][n]),f},p=function(t,o,s,a,h,p){var f,d,m,g,y,v,_,b,T={},E=[],x=p||t[0];h="string"==typeof h?","+h+",":l,null==o&&(o=1);for(d in t[0])E.push(d);if(t.length>1){for(b=t[t.length-1],_=!0,f=E.length;--f>-1;)if(d=E[f],Math.abs(x[d]-b[d])>.05){_=!1;break}_&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=n.length=0,f=E.length;--f>-1;)d=E[f],r[d]=h.indexOf(","+d+",")!==-1,T[d]=u(t,d,r[d],p);for(f=e.length;--f>-1;)e[f]=Math.sqrt(e[f]),i[f]=Math.sqrt(i[f]);if(!a){for(f=E.length;--f>-1;)if(r[d])for(m=T[E[f]],v=m.length-1,g=0;g<v;g++)y=m[g+1].da/i[g]+m[g].da/e[g]||0,n[g]=(n[g]||0)+y*y;for(f=n.length;--f>-1;)n[f]=Math.sqrt(n[f]);
}for(f=E.length,g=s?4:1;--f>-1;)d=E[f],m=T[d],c(m,o,s,a,r[d]),_&&(m.splice(0,g),m.splice(m.length-g,g));return T},f=function(t,e,i){e=e||"soft";var n,r,o,s,l,h,c,u,p,f,d,m={},g="cubic"===e?3:2,y="soft"===e,v=[];if(y&&i&&(t=[i].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(p in t[0])v.push(p);for(h=v.length;--h>-1;){for(p=v[h],m[p]=l=[],f=0,u=t.length,c=0;c<u;c++)n=null==i?t[c][p]:"string"==typeof(d=t[c][p])&&"="===d.charAt(1)?i[p]+Number(d.charAt(0)+d.substr(2)):Number(d),y&&c>1&&c<u-1&&(l[f++]=(n+l[f-2])/2),l[f++]=n;for(u=f-g+1,f=0,c=0;c<u;c+=g)n=l[c],r=l[c+1],o=l[c+2],s=2===g?0:l[c+3],l[f++]=d=3===g?new a(n,r,o,s):new a(n,(2*r+n)/3,(2*r+o)/3,o);l.length=f}return m},d=function(t,e,i){for(var n,r,o,s,a,l,h,c,u,p,f,d=1/i,m=t.length;--m>-1;)for(p=t[m],o=p.a,s=p.d-o,a=p.c-o,l=p.b-o,n=r=0,c=1;c<=i;c++)h=d*c,u=1-h,n=r-(r=(h*h*s+3*u*(h*a+u*l))*h),f=m*i+c-1,e[f]=(e[f]||0)+n*n},m=function(t,e){e=e>>0||6;var i,n,r,o,s=[],a=[],l=0,h=0,c=e-1,u=[],p=[];for(i in t)d(t[i],s,e);for(r=s.length,n=0;n<r;n++)l+=Math.sqrt(s[n]),o=n%e,p[o]=l,o===c&&(h+=l,o=n/e>>0,u[o]=p,a[o]=h,l=0,p=[]);return{length:h,lengths:a,segments:u}},g=o._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,o,s,a,l=e.values||[],h={},c=l[0],u=e.autoRotate||i.vars.orientToBezier;this._autoRotate=u?u instanceof Array?u:[["x","y","rotation",u===!0?0:Number(u)||0]]:null;for(n in c)this._props.push(n);for(o=this._props.length;--o>-1;)n=this._props[o],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],h[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||h[n]!==l[0][n]&&(a=h);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):f(l,e.type,h),this._segCount=this._beziers[n].length,this._timeRes){var d=m(this._beziers,this._timeRes);this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(u=this._autoRotate)for(this._initialRotations=[],u[0]instanceof Array||(this._autoRotate=u=[u]),o=u.length;--o>-1;){for(s=0;s<3;s++)n=u[o][s],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=u[o][2],this._initialRotations[o]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,o,s,a,l,h,c,u,p=this._segCount,f=this._func,d=this._target,m=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<p-1){for(h=p-1;r<h&&(this._l2=c[++r])<=e;);this._l1=c[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=c[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&r<u.length-1){for(h=u.length-1;r<h&&(this._s2=u[++r])<=e;);this._s1=u[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=u[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else i=e<0?0:e>=1?p-1:p*e>>0,a=(e-i*(1/p))*p;for(n=1-a,r=this._props.length;--r>-1;)o=this._props[r],s=this._beziers[o][i],l=(a*a*s.da+3*n*(a*s.ca+n*s.ba))*a+s.a,this._mod[o]&&(l=this._mod[o](l,d)),f[o]?d[o](l):d[o]=l;if(this._autoRotate){var g,y,v,_,b,T,E,x=this._autoRotate;for(r=x.length;--r>-1;)o=x[r][2],T=x[r][3]||0,E=x[r][4]===!0?1:t,s=this._beziers[x[r][0]],g=this._beziers[x[r][1]],s&&g&&(s=s[i],g=g[i],y=s.a+(s.b-s.a)*a,_=s.b+(s.c-s.b)*a,y+=(_-y)*a,_+=(s.c+(s.d-s.c)*a-_)*a,v=g.a+(g.b-g.a)*a,b=g.b+(g.c-g.b)*a,v+=(b-v)*a,b+=(g.c+(g.d-g.c)*a-b)*a,l=m?Math.atan2(b-v,_-y)*E+T:this._initialRotations[r],this._mod[o]&&(l=this._mod[o](l,d)),f[o]?d[o](l):d[o]=l)}}}),y=g.prototype;g.bezierThrough=p,g.cubicToQuadratic=h,g._autoCSS=!0,g.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},g._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,o,s,a,l){e instanceof Array&&(e={values:e}),l=new g;var h,c,u,p=e.values,f=p.length-1,d=[],m={};if(f<0)return a;for(h=0;h<=f;h++)u=i(t,p[h],s,a,l,f!==h),d[h]=u.end;for(c in e)m[c]=e[c];return m.values=d,a=new r(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=l,a.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(h=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",h,!1]]:null!=u.end.x&&[["x","y","rotation",h,!1]]),m.autoRotate&&(s._transform||s._enableTransforms(!1),u.autoRotate=s._target._gsTransform,u.proxy.rotation=u.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(u.proxy,m,s._tween),a}})}},y._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)e=t[i[n]],e&&"function"==typeof e&&(this._mod[i[n]]=e)},y._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)}}(),o._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,s,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},l=o._gsDefine.globals,h={},c=a.prototype=new t("css");c.constructor=a,a.version="1.20.5",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,c="px",a.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var u,p,f,d,m,g,y,v,_=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,T=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,E=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,S=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,A=/alpha\(opacity *=.+?\)/i,M=/^(rgb|hsl)/,P=/([A-Z])/g,C=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(t,e){return e.toUpperCase()},O=/(?:Left|Right|Width)/i,N=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,D=/,(?=[^\)]*(?:\(|$))/gi,k=/[\s,\(]/i,B=Math.PI/180,G=180/Math.PI,F={},V={style:{}},U=o.document||{createElement:function(){return V}},H=function(t,e){return U.createElementNS?U.createElementNS(e||"http://www.w3.org/1999/xhtml",t):U.createElement(t)},j=H("div"),z=H("img"),W=a._internals={_specialProps:h},X=(o.navigator||{}).userAgent||"",Y=function(){var t=X.indexOf("Android"),e=H("a");return f=X.indexOf("Safari")!==-1&&X.indexOf("Chrome")===-1&&(t===-1||parseFloat(X.substr(t+8,2))>3),m=f&&parseFloat(X.substr(X.indexOf("Version/")+8,2))<6,d=X.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(X)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(X))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),q=function(t){return S.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(t){o.console&&console.log(t)},K="",$="",Q=function(t,e){e=e||j;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?($=3===n?"ms":i[n],K="-"+$.toLowerCase()+"-",$+t):null},J=("undefined"!=typeof window?window:U.defaultView||{getComputedStyle:function(){}}).getComputedStyle,tt=a.getStyle=function(t,e,i,n,r){var o;return Y||"opacity"!==e?(!n&&t.style[e]?o=t.style[e]:(i=i||J(t))?o=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(P,"-$1").toLowerCase()):t.currentStyle&&(o=t.currentStyle[e]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):q(t)},et=W.convertToPixels=function(t,i,n,r,o){if("px"===r||!r&&"lineHeight"!==i)return n;if("auto"===r||!n)return 0;var s,l,h,c=O.test(i),u=t,p=j.style,f=n<0,d=1===n;if(f&&(n=-n),d&&(n*=100),"lineHeight"!==i||r)if("%"===r&&i.indexOf("border")!==-1)s=n/100*(c?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)p[c?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=t.parentNode||U.body,tt(u,"display").indexOf("flex")!==-1&&(p.position="absolute"),l=u._gsCache,h=e.ticker.frame,l&&c&&l.time===h)return l.width*n/100;p[c?"width":"height"]=n+r}u.appendChild(j),s=parseFloat(j[c?"offsetWidth":"offsetHeight"]),u.removeChild(j),c&&"%"===r&&a.cacheWidths!==!1&&(l=u._gsCache=u._gsCache||{},l.time=h,l.width=s/n*100),0!==s||o||(s=et(t,i,n,r,!0))}else l=J(t).lineHeight,t.style.lineHeight=n,s=parseFloat(J(t).lineHeight),t.style.lineHeight=l;return d&&(s/=100),f?-s:s},it=W.calculateOffset=function(t,e,i){if("absolute"!==tt(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=tt(t,"margin"+n,i);return t["offset"+n]-(et(t,e,parseFloat(r),r.replace(x,""))||0)},nt=function(t,e){var i,n,r,o={};if(e=e||J(t,null))if(i=e.length)for(;--i>-1;)r=e[i],r.indexOf("-transform")!==-1&&Rt!==r||(o[r.replace(C,I)]=e.getPropertyValue(r));else for(i in e)i.indexOf("Transform")!==-1&&Ct!==i||(o[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===o[i]&&(o[i.replace(C,I)]=e[i]);return Y||(o.opacity=q(t)),n=zt(t,e,!1),o.rotation=n.rotation,o.skewX=n.skewX,o.scaleX=n.scaleX,o.scaleY=n.scaleY,o.x=n.x,o.y=n.y,Ot&&(o.z=n.z,o.rotationX=n.rotationX,o.rotationY=n.rotationY,o.scaleZ=n.scaleZ),o.filters&&delete o.filters,o},rt=function(t,e,i,n,r){var o,s,a,l={},h=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(o=i[s])||r&&r[s])&&s.indexOf("Origin")===-1&&("number"!=typeof o&&"string"!=typeof o||(l[s]="auto"!==o||"left"!==s&&"top"!==s?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[s]||""===e[s].replace(E,"")?o:0:it(t,s),void 0!==h[s]&&(a=new _t(h,s,h[s],a))));if(n)for(s in n)"className"!==s&&(l[s]=n[s]);return{difs:l,firstMPT:a}},ot={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||J(t))[e]||0;if(t.getCTM&&Ut(t))return t.getBBox()[e]||0;var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=ot[e],o=r.length;for(i=i||J(t,null);--o>-1;)n-=parseFloat(tt(t,"padding"+r[o],i,!0))||0,n-=parseFloat(tt(t,"border"+r[o]+"Width",i,!0))||0;return n},lt=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,n=t.split(" "),r=t.indexOf("left")!==-1?"0%":t.indexOf("right")!==-1?"100%":n[0],o=t.indexOf("top")!==-1?"0%":t.indexOf("bottom")!==-1?"100%":n[1];if(n.length>3&&!e){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(lt(n[i]));return t.join(",")}return null==o?o="center"===r?"50%":"0":"center"===o&&(o="50%"),("center"===r||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1)&&(r="50%"),t=r+" "+o+(n.length>2?" "+n[2]:""),e&&(e.oxp=r.indexOf("%")!==-1,e.oyp=o.indexOf("%")!==-1,e.oxr="="===r.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(r.replace(E,"")),e.oy=parseFloat(o.replace(E,"")),e.v=t),e||t},ht=function(t,e){return"function"==typeof t&&(t=t(v,y)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ct=function(t,e){return"function"==typeof t&&(t=t(v,y)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ut=function(t,e,i,n){var r,o,s,a,l,h=1e-6;return"function"==typeof t&&(t=t(v,y)),null==t?a=e:"number"==typeof t?a=t:(r=360,o=t.split("_"),l="="===t.charAt(1),s=(l?parseInt(t.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(t.indexOf("rad")===-1?1:G)-(l?0:e),o.length&&(n&&(n[i]=e+s),t.indexOf("short")!==-1&&(s%=r,s!==s%(r/2)&&(s=s<0?s+r:s-r)),t.indexOf("_cw")!==-1&&s<0?s=(s+9999999999*r)%r-(s/r|0)*r:t.indexOf("ccw")!==-1&&s>0&&(s=(s-9999999999*r)%r-(s/r|0)*r)),a=e+s),a<h&&a>-h&&(a=0),a},pt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ft=function(t,e,i){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},dt=a.parseColor=function(t,e){var i,n,r,o,s,a,l,h,c,u,p;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),pt[t])i=pt[t];else if("#"===t.charAt(0))4===t.length&&(n=t.charAt(1),r=t.charAt(2),o=t.charAt(3),t="#"+n+n+r+r+o+o),t=parseInt(t.substr(1),16),i=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=p=t.match(_),e){if(t.indexOf("=")!==-1)return t.match(b)}else s=Number(i[0])%360/360,a=Number(i[1])/100,l=Number(i[2])/100,r=l<=.5?l*(a+1):l+a-l*a,n=2*l-r,i.length>3&&(i[3]=Number(i[3])),i[0]=ft(s+1/3,n,r),i[1]=ft(s,n,r),i[2]=ft(s-1/3,n,r);else i=t.match(_)||pt.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=pt.black;return e&&!p&&(n=i[0]/255,r=i[1]/255,o=i[2]/255,h=Math.max(n,r,o),c=Math.min(n,r,o),l=(h+c)/2,h===c?s=a=0:(u=h-c,a=l>.5?u/(2-h-c):u/(h+c),s=h===n?(r-o)/u+(r<o?6:0):h===r?(o-n)/u+2:(n-r)/u+4,s*=60),i[0]=s+.5|0,i[1]=100*a+.5|0,i[2]=100*l+.5|0),i},mt=function(t,e){var i,n,r,o=t.match(gt)||[],s=0,a="";if(!o.length)return t;for(i=0;i<o.length;i++)n=o[i],r=t.substr(s,t.indexOf(n,s)-s),s+=r.length+n.length,n=dt(n,e),3===n.length&&n.push(1),a+=r+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return a+t.substr(s)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in pt)gt+="|"+c+"\\b";gt=new RegExp(gt+")","gi"),a.colorStringFilter=function(t){var e,i=t[0]+" "+t[1];gt.test(i)&&(e=i.indexOf("hsl(")!==-1||i.indexOf("hsla(")!==-1,t[0]=mt(t[0],e),t[1]=mt(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var yt=function(t,e,i,n){if(null==t)return function(t){return t};var r,o=e?(t.match(gt)||[""])[0]:"",s=t.split(o).join("").match(T)||[],a=t.substr(0,t.indexOf(s[0])),l=")"===t.charAt(t.length-1)?")":"",h=t.indexOf(" ")!==-1?" ":",",c=s.length,u=c>0?s[0].replace(_,""):"";return c?r=e?function(t){var e,p,f,d;if("number"==typeof t)t+=u;else if(n&&D.test(t)){for(d=t.replace(D,"|").split("|"),f=0;f<d.length;f++)d[f]=r(d[f]);return d.join(",")}if(e=(t.match(gt)||[o])[0],p=t.split(e).join("").match(T)||[],f=p.length,c>f--)for(;++f<c;)p[f]=i?p[(f-1)/2|0]:s[f];return a+p.join(h)+h+e+l+(t.indexOf("inset")!==-1?" inset":"")}:function(t){var e,o,p;if("number"==typeof t)t+=u;else if(n&&D.test(t)){for(o=t.replace(D,"|").split("|"),p=0;p<o.length;p++)o[p]=r(o[p]);return o.join(",")}if(e=t.match(T)||[],p=e.length,c>p--)for(;++p<c;)e[p]=i?e[(p-1)/2|0]:s[p];return a+e.join(h)+l}:function(t){return t}},vt=function(t){return t=t.split(","),function(e,i,n,r,o,s,a){var l,h=(i+"").split(" ");for(a={},l=0;l<4;l++)a[t[l]]=h[l]=h[l]||h[(l-1)/2>>0];return r.parse(e,a,o,s)}},_t=(W._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,o,s=this.data,a=s.proxy,l=s.firstMPT,h=1e-6;l;)e=a[l.v],l.r?e=l.r(e):e<h&&e>-h&&(e=0),l.t[l.p]=e,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,a.rotation,this.t,this._tween):a.rotation),1===t||0===t)for(l=s.firstMPT,o=1===t?"e":"b";l;){if(i=l.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[o]=r}}else i[o]=i.s+i.xs0;l=l._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),bt=(W._parseToProxy=function(t,e,i,n,r,o){var s,a,l,h,c,u=n,p={},f={},d=i._transform,m=F;for(i._transform=null,F=e,n=c=i.parse(t,e,n,r),F=m,o&&(i._transform=d,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(n.type<=1&&(a=n.p,f[a]=n.s+n.c,p[a]=n.s,o||(h=new _t(n,"s",a,h,n.r),n.c=0),1===n.type))for(s=n.l;--s>0;)l="xn"+s,a=n.p+"_"+l,f[a]=n.data[l],p[a]=n[l],o||(h=new _t(n,l,a,h,n.rxp[l]));n=n._next}return{proxy:p,end:f,firstMPT:h,pt:c}},W.CSSPropTween=function(t,e,n,r,o,a,l,h,c,u,p){this.t=t,this.p=e,this.s=n,this.c=r,this.n=l||e,t instanceof bt||s.push(this.n),this.r=h?"function"==typeof h?h:Math.round:h,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?n:u,this.e=void 0===p?n+r:p,o&&(this._next=o,o._prev=this)}),Tt=function(t,e,i,n,r,o){var s=new bt(t,e,i,n-i,r,(-1),o);return s.b=i,s.e=s.xs0=n,s},Et=a.parseComplex=function(t,e,i,n,r,o,s,l,h,c){i=i||o||"","function"==typeof n&&(n=n(v,y)),s=new bt(t,e,0,0,s,c?2:1,null,(!1),l,i,n),n+="",r&&gt.test(n+i)&&(n=[i,n],a.colorStringFilter(n),i=n[0],n=n[1]);var p,f,d,m,g,T,E,x,S,w,A,M,P,C=i.split(", ").join(",").split(" "),R=n.split(", ").join(",").split(" "),I=C.length,O=u!==!1;for(n.indexOf(",")===-1&&i.indexOf(",")===-1||((n+i).indexOf("rgb")!==-1||(n+i).indexOf("hsl")!==-1?(C=C.join(" ").replace(D,", ").split(" "),R=R.join(" ").replace(D,", ").split(" ")):(C=C.join(" ").split(",").join(", ").split(" "),R=R.join(" ").split(",").join(", ").split(" ")),I=C.length),I!==R.length&&(C=(o||"").split(" "),I=C.length),s.plugin=h,s.setRatio=c,gt.lastIndex=0,p=0;p<I;p++)if(m=C[p],g=R[p]+"",x=parseFloat(m),x||0===x)s.appendXtra("",x,ht(g,x),g.replace(b,""),!(!O||g.indexOf("px")===-1)&&Math.round,!0);else if(r&&gt.test(m))M=g.indexOf(")")+1,M=")"+(M?g.substr(M):""),P=g.indexOf("hsl")!==-1&&Y,w=g,m=dt(m,P),g=dt(g,P),S=m.length+g.length>6,S&&!Y&&0===g[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(R[p]).join("transparent")):(Y||(S=!1),P?s.appendXtra(w.substr(0,w.indexOf("hsl"))+(S?"hsla(":"hsl("),m[0],ht(g[0],m[0]),",",!1,!0).appendXtra("",m[1],ht(g[1],m[1]),"%,",!1).appendXtra("",m[2],ht(g[2],m[2]),S?"%,":"%"+M,!1):s.appendXtra(w.substr(0,w.indexOf("rgb"))+(S?"rgba(":"rgb("),m[0],g[0]-m[0],",",Math.round,!0).appendXtra("",m[1],g[1]-m[1],",",Math.round).appendXtra("",m[2],g[2]-m[2],S?",":M,Math.round),S&&(m=m.length<4?1:m[3],s.appendXtra("",m,(g.length<4?1:g[3])-m,M,!1))),gt.lastIndex=0;else if(T=m.match(_)){if(E=g.match(b),!E||E.length!==T.length)return s;for(d=0,f=0;f<T.length;f++)A=T[f],w=m.indexOf(A,d),s.appendXtra(m.substr(d,w-d),Number(A),ht(E[f],A),"",!(!O||"px"!==m.substr(w+A.length,2))&&Math.round,0===f),d=w+A.length;s["xs"+s.l]+=m.substr(d)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+g:g;if(n.indexOf("=")!==-1&&s.data){for(M=s.xs0+s.data.s,p=1;p<s.l;p++)M+=s["xs"+p]+s.data["xn"+p];s.e=M+s["xs"+p]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},xt=9;for(c=bt.prototype,c.l=c.pr=0;--xt>0;)c["xn"+xt]=0,c["xs"+xt]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(t,e,i,n,r,o){var s=this,a=s.l;return s["xs"+a]+=o&&(a||s["xs"+a])?" "+t:t||"",i||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",a>0?(s.data["xn"+a]=e+i,s.rxp["xn"+a]=r,s["xn"+a]=e,s.plugin||(s.xfirst=new bt(s,"xn"+a,e,i,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=r,s)):(s["xs"+a]+=e+(n||""),s)};var St=function(t,e){e=e||{},this.p=e.prefix?Q(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||yt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},wt=W._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r,o=t.split(","),s=e.defaultValue;for(i=i||[s],n=0;n<o.length;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||s,r=new St(o[n],e)},At=W._registerPluginProp=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";wt(t,{parser:function(t,i,n,r,o,s,a){var c=l.com.greensock.plugins[e];return c?(c._cssRegister(),h[n].parse(t,i,n,r,o,s,a)):(Z("Error: "+e+" js file not loaded."),o)}})}};c=St.prototype,c.parseComplex=function(t,e,i,n,r,o){var s,a,l,h,c,u,p=this.keyword;if(this.multi&&(D.test(i)||D.test(e)?(a=e.replace(D,"|").split("|"),l=i.replace(D,"|").split("|")):p&&(a=[e],l=[i])),l){for(h=l.length>a.length?l.length:a.length,s=0;s<h;s++)e=a[s]=a[s]||this.dflt,i=l[s]=l[s]||this.dflt,p&&(c=e.indexOf(p),u=i.indexOf(p),c!==u&&(u===-1?a[s]=a[s].split(p).join(""):c===-1&&(a[s]+=" "+p)));e=a.join(", "),i=l.join(", ")}return Et(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,o)},c.parse=function(t,e,i,n,o,s,a){return this.parseComplex(t.style,this.format(tt(t,this.p,r,!1,this.dflt)),this.format(e),o,s)},a.registerSpecialProp=function(t,e,i){wt(t,{parser:function(t,n,r,o,s,a,l){var h=new bt(t,r,0,0,s,2,r,(!1),i);return h.plugin=a,h.setRatio=e(t,n,o._tween,r),h},priority:i})},a.useSVGTransformAttr=!0;var Mt,Pt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ct=Q("transform"),Rt=K+"transform",It=Q("transformOrigin"),Ot=null!==Q("perspective"),Nt=W.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(a.defaultForce3D===!1||!Ot)&&(a.defaultForce3D||"auto")},Lt=o.SVGElement,Dt=function(t,e,i){var n,r=U.createElementNS("http://www.w3.org/2000/svg",t),o=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(o,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},kt=U.documentElement||{},Bt=function(){var t,e,i,n=g||/Android/i.test(X)&&!o.chrome;return U.createElementNS&&!n&&(t=Dt("svg",kt),e=Dt("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[It]="50% 50%",e.style[Ct]="scaleX(0.5)",n=i===e.getBoundingClientRect().width&&!(d&&Ot),kt.removeChild(t)),n}(),Gt=function(t,e,i,n,r,o){var s,l,h,c,u,p,f,d,m,g,y,v,_,b,T=t._gsTransform,E=jt(t,!0);T&&(_=T.xOrigin,b=T.yOrigin),(!n||(s=n.split(" ")).length<2)&&(f=t.getBBox(),0===f.x&&0===f.y&&f.width+f.height===0&&(f={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),e=lt(e).split(" "),s=[(e[0].indexOf("%")!==-1?parseFloat(e[0])/100*f.width:parseFloat(e[0]))+f.x,(e[1].indexOf("%")!==-1?parseFloat(e[1])/100*f.height:parseFloat(e[1]))+f.y]),i.xOrigin=c=parseFloat(s[0]),i.yOrigin=u=parseFloat(s[1]),n&&E!==Ht&&(p=E[0],f=E[1],d=E[2],m=E[3],g=E[4],y=E[5],v=p*m-f*d,v&&(l=c*(m/v)+u*(-d/v)+(d*y-m*g)/v,h=c*(-f/v)+u*(p/v)-(p*y-f*g)/v,c=i.xOrigin=s[0]=l,u=i.yOrigin=s[1]=h)),T&&(o&&(i.xOffset=T.xOffset,i.yOffset=T.yOffset,T=i),r||r!==!1&&a.defaultSmoothOrigin!==!1?(l=c-_,h=u-b,T.xOffset+=l*E[0]+h*E[2]-l,T.yOffset+=l*E[1]+h*E[3]-h):T.xOffset=T.yOffset=0),o||t.setAttribute("data-svg-origin",s.join(" "))},Ft=function(t){var e,i=H("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,o=this.style.cssText;if(kt.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ft}catch(s){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),kt.removeChild(i),this.style.cssText=o,e},Vt=function(t){try{return t.getBBox()}catch(e){return Ft.call(t,!0)}},Ut=function(t){return!(!Lt||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Vt(t))},Ht=[1,0,0,1,0,0],jt=function(t,e){var i,n,r,o,s,a,l=t._gsTransform||new Nt,h=1e5,c=t.style;if(Ct?n=tt(t,Rt,null,!0):t.currentStyle&&(n=t.currentStyle.filter.match(N),n=n&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),l.x||0,l.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,!Ct||!(a=!J(t)||"none"===J(t).display)&&t.parentNode||(a&&(o=c.display,c.display="block"),t.parentNode||(s=1,kt.appendChild(t)),n=tt(t,Rt,null,!0),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,o?c.display=o:a&&qt(c,"display"),s&&kt.removeChild(t)),(l.svg||t.getCTM&&Ut(t))&&(i&&(c[Ct]+"").indexOf("matrix")!==-1&&(n=c[Ct],i=0),r=t.getAttribute("transform"),i&&r&&(r=t.transform.baseVal.consolidate().matrix,n="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",i=0)),i)return Ht;for(r=(n||"").match(_)||[],xt=r.length;--xt>-1;)o=Number(r[xt]),r[xt]=(s=o-(o|=0))?(s*h+(s<0?-.5:.5)|0)/h+o:o;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},zt=W.getTransform=function(t,i,n,r){if(t._gsTransform&&n&&!r)return t._gsTransform;var o,s,l,h,c,u,p=n?t._gsTransform||new Nt:new Nt,f=p.scaleX<0,d=2e-5,m=1e5,g=Ot?parseFloat(tt(t,It,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,y=parseFloat(a.defaultTransformPerspective)||0;if(p.svg=!(!t.getCTM||!Ut(t)),p.svg&&(Gt(t,tt(t,It,i,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),Mt=a.useSVGTransformAttr||Bt),o=jt(t),o!==Ht){if(16===o.length){var v,_,b,T,E,x=o[0],S=o[1],w=o[2],A=o[3],M=o[4],P=o[5],C=o[6],R=o[7],I=o[8],O=o[9],N=o[10],L=o[12],D=o[13],k=o[14],B=o[11],F=Math.atan2(C,N);p.zOrigin&&(k=-p.zOrigin,L=I*k-o[12],D=O*k-o[13],k=N*k+p.zOrigin-o[14]),p.rotationX=F*G,F&&(T=Math.cos(-F),E=Math.sin(-F),v=M*T+I*E,_=P*T+O*E,b=C*T+N*E,I=M*-E+I*T,O=P*-E+O*T,N=C*-E+N*T,B=R*-E+B*T,M=v,P=_,C=b),F=Math.atan2(-w,N),p.rotationY=F*G,F&&(T=Math.cos(-F),E=Math.sin(-F),v=x*T-I*E,_=S*T-O*E,b=w*T-N*E,O=S*E+O*T,N=w*E+N*T,B=A*E+B*T,x=v,S=_,w=b),F=Math.atan2(S,x),p.rotation=F*G,F&&(T=Math.cos(F),E=Math.sin(F),v=x*T+S*E,_=M*T+P*E,b=I*T+O*E,S=S*T-x*E,P=P*T-M*E,O=O*T-I*E,x=v,M=_,I=b),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),F=Math.atan2(M,P),p.scaleX=(Math.sqrt(x*x+S*S+w*w)*m+.5|0)/m,p.scaleY=(Math.sqrt(P*P+C*C)*m+.5|0)/m,p.scaleZ=(Math.sqrt(I*I+O*O+N*N)*m+.5|0)/m,x/=p.scaleX,M/=p.scaleY,S/=p.scaleX,P/=p.scaleY,Math.abs(F)>d?(p.skewX=F*G,M=0,"simple"!==p.skewType&&(p.scaleY*=1/Math.cos(F))):p.skewX=0,p.perspective=B?1/(B<0?-B:B):0,p.x=L,p.y=D,p.z=k,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*x-p.yOrigin*M),p.y-=p.yOrigin-(p.yOrigin*S-p.xOrigin*P))}else if(!Ot||r||!o.length||p.x!==o[4]||p.y!==o[5]||!p.rotationX&&!p.rotationY){var V=o.length>=6,U=V?o[0]:1,H=o[1]||0,j=o[2]||0,z=V?o[3]:1;p.x=o[4]||0,p.y=o[5]||0,l=Math.sqrt(U*U+H*H),h=Math.sqrt(z*z+j*j),c=U||H?Math.atan2(H,U)*G:p.rotation||0,u=j||z?Math.atan2(j,z)*G+c:p.skewX||0,p.scaleX=l,p.scaleY=h,p.rotation=c,p.skewX=u,Ot&&(p.rotationX=p.rotationY=p.z=0,p.perspective=y,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*U+p.yOrigin*j),p.y-=p.yOrigin-(p.xOrigin*H+p.yOrigin*z))}Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(f?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180)),p.zOrigin=g;for(s in p)p[s]<d&&p[s]>-d&&(p[s]=0)}return n&&(t._gsTransform=p,p.svg&&(Mt&&t.style[Ct]?e.delayedCall(.001,function(){qt(t.style,Ct)}):!Mt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Wt=function(t){var e,i,n=this.data,r=-n.rotation*B,o=r+n.skewX*B,s=1e5,a=(Math.cos(r)*n.scaleX*s|0)/s,l=(Math.sin(r)*n.scaleX*s|0)/s,h=(Math.sin(o)*-n.scaleY*s|0)/s,c=(Math.cos(o)*n.scaleY*s|0)/s,u=this.t.style,p=this.t.currentStyle;if(p){i=l,l=-h,h=-i,e=p.filter,u.filter="";var f,d,m=this.t.offsetWidth,y=this.t.offsetHeight,v="absolute"!==p.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+h+", M22="+c,b=n.x+m*n.xPercent/100,T=n.y+y*n.yPercent/100;if(null!=n.ox&&(f=(n.oxp?m*n.ox*.01:n.ox)-m/2,d=(n.oyp?y*n.oy*.01:n.oy)-y/2,b+=f-(f*a+d*l),T+=d-(f*h+d*c)),v?(f=m/2,d=y/2,_+=", Dx="+(f-(f*a+d*l)+b)+", Dy="+(d-(f*h+d*c)+T)+")"):_+=", sizingMethod='auto expand')",e.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?u.filter=e.replace(L,_):u.filter=_+" "+e,0!==t&&1!==t||1===a&&0===l&&0===h&&1===c&&(v&&_.indexOf("Dx=0, Dy=0")===-1||S.test(e)&&100!==parseFloat(RegExp.$1)||e.indexOf(e.indexOf("Alpha"))===-1&&u.removeAttribute("filter")),!v){var E,w,A,M=g<8?1:-1;for(f=n.ieOffsetX||0,d=n.ieOffsetY||0,n.ieOffsetX=Math.round((m-((a<0?-a:a)*m+(l<0?-l:l)*y))/2+b),n.ieOffsetY=Math.round((y-((c<0?-c:c)*y+(h<0?-h:h)*m))/2+T),xt=0;xt<4;xt++)w=st[xt],E=p[w],i=E.indexOf("px")!==-1?parseFloat(E):et(this.t,w,parseFloat(E),E.replace(x,""))||0,A=i!==n[w]?xt<2?-n.ieOffsetX:-n.ieOffsetY:xt<2?f-n.ieOffsetX:d-n.ieOffsetY,u[w]=(n[w]=Math.round(i-A*(0===xt||2===xt?1:M)))+"px"}}},Xt=W.set3DTransformRatio=W.setTransformRatio=function(t){var e,i,n,r,o,s,a,l,h,c,u,p,f,m,g,y,v,_,b,T,E,x,S,w=this.data,A=this.t.style,M=w.rotation,P=w.rotationX,C=w.rotationY,R=w.scaleX,I=w.scaleY,O=w.scaleZ,N=w.x,L=w.y,D=w.z,k=w.svg,G=w.perspective,F=w.force3D,V=w.skewY,U=w.skewX;if(V&&(U+=V,M+=V),((1===t||0===t)&&"auto"===F&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!F)&&!D&&!G&&!C&&!P&&1===O||Mt&&k||!Ot)return void(M||U||k?(M*=B,x=U*B,S=1e5,i=Math.cos(M)*R,o=Math.sin(M)*R,n=Math.sin(M-x)*-I,s=Math.cos(M-x)*I,x&&"simple"===w.skewType&&(e=Math.tan(x-V*B),e=Math.sqrt(1+e*e),n*=e,s*=e,V&&(e=Math.tan(V*B),e=Math.sqrt(1+e*e),i*=e,o*=e)),k&&(N+=w.xOrigin-(w.xOrigin*i+w.yOrigin*n)+w.xOffset,L+=w.yOrigin-(w.xOrigin*o+w.yOrigin*s)+w.yOffset,Mt&&(w.xPercent||w.yPercent)&&(g=this.t.getBBox(),N+=.01*w.xPercent*g.width,L+=.01*w.yPercent*g.height),g=1e-6,N<g&&N>-g&&(N=0),L<g&&L>-g&&(L=0)),b=(i*S|0)/S+","+(o*S|0)/S+","+(n*S|0)/S+","+(s*S|0)/S+","+N+","+L+")",k&&Mt?this.t.setAttribute("transform","matrix("+b):A[Ct]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+b):A[Ct]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+R+",0,0,"+I+","+N+","+L+")");if(d&&(g=1e-4,R<g&&R>-g&&(R=O=2e-5),I<g&&I>-g&&(I=O=2e-5),!G||w.z||w.rotationX||w.rotationY||(G=0)),M||U)M*=B,y=i=Math.cos(M),v=o=Math.sin(M),U&&(M-=U*B,y=Math.cos(M),v=Math.sin(M),"simple"===w.skewType&&(e=Math.tan((U-V)*B),e=Math.sqrt(1+e*e),y*=e,v*=e,w.skewY&&(e=Math.tan(V*B),e=Math.sqrt(1+e*e),i*=e,o*=e))),n=-v,s=y;else{if(!(C||P||1!==O||G||k))return void(A[Ct]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+N+"px,"+L+"px,"+D+"px)"+(1!==R||1!==I?" scale("+R+","+I+")":""));i=s=1,n=o=0}c=1,r=a=l=h=u=p=0,f=G?-1/G:0,m=w.zOrigin,g=1e-6,T=",",E="0",M=C*B,M&&(y=Math.cos(M),v=Math.sin(M),l=-v,u=f*-v,r=i*v,a=o*v,c=y,f*=y,i*=y,o*=y),M=P*B,M&&(y=Math.cos(M),v=Math.sin(M),e=n*y+r*v,_=s*y+a*v,h=c*v,p=f*v,r=n*-v+r*y,a=s*-v+a*y,c*=y,f*=y,n=e,s=_),1!==O&&(r*=O,a*=O,c*=O,f*=O),1!==I&&(n*=I,s*=I,h*=I,p*=I),1!==R&&(i*=R,o*=R,l*=R,u*=R),(m||k)&&(m&&(N+=r*-m,L+=a*-m,D+=c*-m+m),k&&(N+=w.xOrigin-(w.xOrigin*i+w.yOrigin*n)+w.xOffset,L+=w.yOrigin-(w.xOrigin*o+w.yOrigin*s)+w.yOffset),N<g&&N>-g&&(N=E),L<g&&L>-g&&(L=E),D<g&&D>-g&&(D=0)),b=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(",b+=(i<g&&i>-g?E:i)+T+(o<g&&o>-g?E:o)+T+(l<g&&l>-g?E:l),b+=T+(u<g&&u>-g?E:u)+T+(n<g&&n>-g?E:n)+T+(s<g&&s>-g?E:s),P||C||1!==O?(b+=T+(h<g&&h>-g?E:h)+T+(p<g&&p>-g?E:p)+T+(r<g&&r>-g?E:r),b+=T+(a<g&&a>-g?E:a)+T+(c<g&&c>-g?E:c)+T+(f<g&&f>-g?E:f)+T):b+=",0,0,0,0,1,0,",b+=N+T+L+T+D+T+(G?1+-D/G:1)+")",A[Ct]=b};c=Nt.prototype,c.x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,wt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{
parser:function(t,e,i,n,o,s,l){if(n._lastParsedTransform===l)return o;n._lastParsedTransform=l;var h,c=l.scale&&"function"==typeof l.scale?l.scale:0;"function"==typeof l[i]&&(h=l[i],l[i]=e),c&&(l.scale=c(v,t));var u,p,f,d,m,g,_,b,T,E=t._gsTransform,x=t.style,S=1e-6,w=Pt.length,A=l,M={},P="transformOrigin",C=zt(t,r,!0,A.parseTransform),R=A.transform&&("function"==typeof A.transform?A.transform(v,y):A.transform);if(C.skewType=A.skewType||C.skewType||a.defaultSkewType,n._transform=C,R&&"string"==typeof R&&Ct)p=j.style,p[Ct]=R,p.display="block",p.position="absolute",R.indexOf("%")!==-1&&(p.width=tt(t,"width"),p.height=tt(t,"height")),U.body.appendChild(j),u=zt(j,null,!1),"simple"===C.skewType&&(u.scaleY*=Math.cos(u.skewX*B)),C.svg&&(g=C.xOrigin,_=C.yOrigin,u.x-=C.xOffset,u.y-=C.yOffset,(A.transformOrigin||A.svgOrigin)&&(R={},Gt(t,lt(A.transformOrigin),R,A.svgOrigin,A.smoothOrigin,!0),g=R.xOrigin,_=R.yOrigin,u.x-=R.xOffset-C.xOffset,u.y-=R.yOffset-C.yOffset),(g||_)&&(b=jt(j,!0),u.x-=g-(g*b[0]+_*b[2]),u.y-=_-(g*b[1]+_*b[3]))),U.body.removeChild(j),u.perspective||(u.perspective=C.perspective),null!=A.xPercent&&(u.xPercent=ct(A.xPercent,C.xPercent)),null!=A.yPercent&&(u.yPercent=ct(A.yPercent,C.yPercent));else if("object"==typeof A){if(u={scaleX:ct(null!=A.scaleX?A.scaleX:A.scale,C.scaleX),scaleY:ct(null!=A.scaleY?A.scaleY:A.scale,C.scaleY),scaleZ:ct(A.scaleZ,C.scaleZ),x:ct(A.x,C.x),y:ct(A.y,C.y),z:ct(A.z,C.z),xPercent:ct(A.xPercent,C.xPercent),yPercent:ct(A.yPercent,C.yPercent),perspective:ct(A.transformPerspective,C.perspective)},m=A.directionalRotation,null!=m)if("object"==typeof m)for(p in m)A[p]=m[p];else A.rotation=m;"string"==typeof A.x&&A.x.indexOf("%")!==-1&&(u.x=0,u.xPercent=ct(A.x,C.xPercent)),"string"==typeof A.y&&A.y.indexOf("%")!==-1&&(u.y=0,u.yPercent=ct(A.y,C.yPercent)),u.rotation=ut("rotation"in A?A.rotation:"shortRotation"in A?A.shortRotation+"_short":"rotationZ"in A?A.rotationZ:C.rotation,C.rotation,"rotation",M),Ot&&(u.rotationX=ut("rotationX"in A?A.rotationX:"shortRotationX"in A?A.shortRotationX+"_short":C.rotationX||0,C.rotationX,"rotationX",M),u.rotationY=ut("rotationY"in A?A.rotationY:"shortRotationY"in A?A.shortRotationY+"_short":C.rotationY||0,C.rotationY,"rotationY",M)),u.skewX=ut(A.skewX,C.skewX),u.skewY=ut(A.skewY,C.skewY)}for(Ot&&null!=A.force3D&&(C.force3D=A.force3D,d=!0),f=C.force3D||C.z||C.rotationX||C.rotationY||u.z||u.rotationX||u.rotationY||u.perspective,f||null==A.scale||(u.scaleZ=1);--w>-1;)T=Pt[w],R=u[T]-C[T],(R>S||R<-S||null!=A[T]||null!=F[T])&&(d=!0,o=new bt(C,T,C[T],R,o),T in M&&(o.e=M[T]),o.xs0=0,o.plugin=s,n._overwriteProps.push(o.n));return R=A.transformOrigin,C.svg&&(R||A.svgOrigin)&&(g=C.xOffset,_=C.yOffset,Gt(t,lt(R),u,A.svgOrigin,A.smoothOrigin),o=Tt(C,"xOrigin",(E?C:u).xOrigin,u.xOrigin,o,P),o=Tt(C,"yOrigin",(E?C:u).yOrigin,u.yOrigin,o,P),g===C.xOffset&&_===C.yOffset||(o=Tt(C,"xOffset",E?g:C.xOffset,C.xOffset,o,P),o=Tt(C,"yOffset",E?_:C.yOffset,C.yOffset,o,P)),R="0px 0px"),(R||Ot&&f&&C.zOrigin)&&(Ct?(d=!0,T=It,R=(R||tt(t,T,r,!1,"50% 50%"))+"",o=new bt(x,T,0,0,o,(-1),P),o.b=x[T],o.plugin=s,Ot?(p=C.zOrigin,R=R.split(" "),C.zOrigin=(R.length>2&&(0===p||"0px"!==R[2])?parseFloat(R[2]):p)||0,o.xs0=o.e=R[0]+" "+(R[1]||"50%")+" 0px",o=new bt(C,"zOrigin",0,0,o,(-1),o.n),o.b=p,o.xs0=o.e=C.zOrigin):o.xs0=o.e=R):lt(R+"",C)),d&&(n._transformType=C.svg&&Mt||!f&&3!==this._transformType?2:3),h&&(l[i]=h),c&&(l.scale=c),o},prefix:!0}),wt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),wt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,o,s,a){e=this.format(e);var l,h,c,u,p,f,d,m,g,y,v,_,b,T,E,x,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],w=t.style;for(g=parseFloat(t.offsetWidth),y=parseFloat(t.offsetHeight),l=e.split(" "),h=0;h<S.length;h++)this.p.indexOf("border")&&(S[h]=Q(S[h])),p=u=tt(t,S[h],r,!1,"0px"),p.indexOf(" ")!==-1&&(u=p.split(" "),p=u[0],u=u[1]),f=c=l[h],d=parseFloat(p),_=p.substr((d+"").length),b="="===f.charAt(1),b?(m=parseInt(f.charAt(0)+"1",10),f=f.substr(2),m*=parseFloat(f),v=f.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(f),v=f.substr((m+"").length)),""===v&&(v=n[i]||_),v!==_&&(T=et(t,"borderLeft",d,_),E=et(t,"borderTop",d,_),"%"===v?(p=T/g*100+"%",u=E/y*100+"%"):"em"===v?(x=et(t,"borderLeft",1,"em"),p=T/x+"em",u=E/x+"em"):(p=T+"px",u=E+"px"),b&&(f=parseFloat(p)+m+v,c=parseFloat(u)+m+v)),s=Et(w,S[h],p+" "+u,f+" "+c,!1,"0px",s);return s},prefix:!0,formatter:yt("0px 0px 0px 0px",!1,!0)}),wt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,o,s){return Et(t.style,i,this.format(tt(t,i,r,!1,"0px 0px")),this.format(e),!1,"0px",o)},prefix:!0,formatter:yt("0px 0px",!1,!0)}),wt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,o,s){var a,l,h,c,u,p,f="background-position",d=r||J(t,null),m=this.format((d?g?d.getPropertyValue(f+"-x")+" "+d.getPropertyValue(f+"-y"):d.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),y=this.format(e);if(m.indexOf("%")!==-1!=(y.indexOf("%")!==-1)&&y.split(",").length<2&&(p=tt(t,"backgroundImage").replace(R,""),p&&"none"!==p)){for(a=m.split(" "),l=y.split(" "),z.setAttribute("src",p),h=2;--h>-1;)m=a[h],c=m.indexOf("%")!==-1,c!==(l[h].indexOf("%")!==-1)&&(u=0===h?t.offsetWidth-z.width:t.offsetHeight-z.height,a[h]=c?parseFloat(m)/100*u+"px":parseFloat(m)/u*100+"%");m=a.join(" ")}return this.parseComplex(t.style,m,y,o,s)},formatter:lt}),wt("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="","co"===t.substr(0,2)?t:lt(t.indexOf(" ")===-1?t+" "+t:t)}}),wt("perspective",{defaultValue:"0px",prefix:!0}),wt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),wt("transformStyle",{prefix:!0}),wt("backfaceVisibility",{prefix:!0}),wt("userSelect",{prefix:!0}),wt("margin",{parser:vt("marginTop,marginRight,marginBottom,marginLeft")}),wt("padding",{parser:vt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),wt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,o,s){var a,l,h;return g<9?(l=t.currentStyle,h=g<8?" ":",",a="rect("+l.clipTop+h+l.clipRight+h+l.clipBottom+h+l.clipLeft+")",e=this.format(e).split(",").join(h)):(a=this.format(tt(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,o,s)}}),wt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),wt("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),wt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,o,s){var a=tt(t,"borderTopWidth",r,!1,"0px"),l=this.format(e).split(" "),h=l[0].replace(x,"");return"px"!==h&&(a=parseFloat(a)/et(t,"borderTopWidth",1,h)+h),this.parseComplex(t.style,this.format(a+" "+tt(t,"borderTopStyle",r,!1,"solid")+" "+tt(t,"borderTopColor",r,!1,"#000")),l.join(" "),o,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),wt("borderWidth",{parser:vt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),wt("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r,o){var s=t.style,a="cssFloat"in s?"cssFloat":"styleFloat";return new bt(s,a,0,0,r,(-1),i,(!1),0,s[a],e)}});var Yt=function(t){var e,i=this.t,n=i.filter||tt(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(n.indexOf("atrix(")===-1&&n.indexOf("radient(")===-1&&n.indexOf("oader(")===-1?(i.removeAttribute("filter"),e=!tt(this.data,"filter")):(i.filter=n.replace(A,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),n.indexOf("pacity")===-1?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(S,"opacity="+r))};wt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,o,s){var a=parseFloat(tt(t,"opacity",r,!1,"1")),l=t.style,h="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),h&&1===a&&"hidden"===tt(t,"visibility",r)&&0!==e&&(a=0),Y?o=new bt(l,"opacity",a,e-a,o):(o=new bt(l,"opacity",100*a,100*(e-a),o),o.xn1=h?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=t,o.plugin=s,o.setRatio=Yt),h&&(o=new bt(l,"visibility",0,0,o,(-1),null,(!1),0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),o.xs0="inherit",n._overwriteProps.push(o.n),n._overwriteProps.push(i)),o}});var qt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(P,"-$1").toLowerCase())):t.removeAttribute(e))},Zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:qt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};wt("className",{parser:function(t,e,n,o,s,a,l){var h,c,u,p,f,d=t.getAttribute("class")||"",m=t.style.cssText;if(s=o._classNamePT=new bt(t,n,0,0,s,2),s.setRatio=Zt,s.pr=-11,i=!0,s.b=d,c=nt(t,r),u=t._gsClassPT){for(p={},f=u.data;f;)p[f.p]=1,f=f._next;u.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",s.e),h=rt(t,c,nt(t),l,p),t.setAttribute("class",d),s.data=h.firstMPT,t.style.cssText=m,s=s.xfirst=o.parse(t,h.difs,s,a)}});var Kt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,o,s=this.t.style,a=h.transform.parse;if("all"===this.e)s.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),n=e.length;--n>-1;)i=e[n],h[i]&&(h[i].parse===a?r=!0:i="transformOrigin"===i?It:h[i].p),qt(s,i);r&&(qt(s,Ct),o=this.t._gsTransform,o&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(wt("clearProps",{parser:function(t,e,n,r,o){return o=new bt(t,n,0,0,o,2),o.setRatio=Kt,o.e=e,o.pr=-10,o.data=r._tween,i=!0,o}}),c="bezier,throwProps,physicsProps,physics2D".split(","),xt=c.length;xt--;)At(c[xt]);c=a.prototype,c._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(t,e,o,l){if(!t.nodeType)return!1;this._target=y=t,this._tween=o,this._vars=e,v=l,u=e.autoRound,i=!1,n=e.suffixMap||a.suffixMap,r=J(t,""),s=this._overwriteProps;var c,d,g,_,b,T,E,x,S,A=t.style;if(p&&""===A.zIndex&&(c=tt(t,"zIndex",r),"auto"!==c&&""!==c||this._addLazySet(A,"zIndex",0)),"string"==typeof e&&(_=A.cssText,c=nt(t,r),A.cssText=_+";"+e,c=rt(t,c,nt(t)).difs,!Y&&w.test(e)&&(c.opacity=parseFloat(RegExp.$1)),e=c,A.cssText=_),e.className?this._firstPT=d=h.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=d=this.parse(t,e,null),this._transformType){for(S=3===this._transformType,Ct?f&&(p=!0,""===A.zIndex&&(E=tt(t,"zIndex",r),"auto"!==E&&""!==E||this._addLazySet(A,"zIndex",0)),m&&this._addLazySet(A,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(S?"visible":"hidden"))):A.zoom=1,g=d;g&&g._next;)g=g._next;x=new bt(t,"transform",0,0,null,2),this._linkCSSP(x,null,g),x.setRatio=Ct?Xt:Wt,x.data=this._transform||zt(t,r,!0),x.tween=o,x.pr=-1,s.pop()}if(i){for(;d;){for(T=d._next,g=_;g&&g.pr>d.pr;)g=g._next;(d._prev=g?g._prev:b)?d._prev._next=d:_=d,(d._next=g)?g._prev=d:b=d,d=T}this._firstPT=_}return!0},c.parse=function(t,e,i,o){var s,a,l,c,p,f,d,m,g,_,b=t.style;for(s in e){if(f=e[s],"function"==typeof f&&(f=f(v,y)),a=h[s])i=a.parse(t,f,s,this,i,o,e);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,t.style,"setProperty",J(t).getPropertyValue(s)+"",f+"",s,!1,s);continue}p=tt(t,s,r)+"",g="string"==typeof f,"color"===s||"fill"===s||"stroke"===s||s.indexOf("Color")!==-1||g&&M.test(f)?(g||(f=dt(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),i=Et(b,s,p,f,!0,"transparent",i,0,o)):g&&k.test(f)?i=Et(b,s,p,f,!0,null,i,0,o):(l=parseFloat(p),d=l||0===l?p.substr((l+"").length):"",""!==p&&"auto"!==p||("width"===s||"height"===s?(l=at(t,s,r),d="px"):"left"===s||"top"===s?(l=it(t,s,r),d="px"):(l="opacity"!==s?0:1,d="")),_=g&&"="===f.charAt(1),_?(c=parseInt(f.charAt(0)+"1",10),f=f.substr(2),c*=parseFloat(f),m=f.replace(x,"")):(c=parseFloat(f),m=g?f.replace(x,""):""),""===m&&(m=s in n?n[s]:d),f=c||0===c?(_?c+l:c)+m:e[s],d!==m&&(""===m&&"lineHeight"!==s||(c||0===c)&&l&&(l=et(t,s,l,d),"%"===m?(l/=et(t,s,100,"%")/100,e.strictUnits!==!0&&(p=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=et(t,s,1,m):"px"!==m&&(c=et(t,s,c,m),m="px"),_&&(c||0===c)&&(f=c+l+m))),_&&(c+=l),!l&&0!==l||!c&&0!==c?void 0!==b[s]&&(f||f+""!="NaN"&&null!=f)?(i=new bt(b,s,c||l||0,0,i,(-1),s,(!1),0,p,f),i.xs0="none"!==f||"display"!==s&&s.indexOf("Style")===-1?f:p):Z("invalid "+s+" tween value: "+e[s]):(i=new bt(b,s,l,c-l,i,0,s,u!==!1&&("px"===m||"zIndex"===s),0,p,f),i.xs0=m))}o&&i&&!i.plugin&&(i.plugin=o)}return i},c.setRatio=function(t){var e,i,n,r=this._firstPT,o=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=r.r(e):e<o&&e>-o&&(e=0),r.type)if(1===r.type)if(n=r.l,2===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else r.type===-1?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&r.type!==-1)if(e=r.r(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},c._enableTransforms=function(t){this._transform=this._transform||zt(this._target,r,!0),this._transformType=this._transform.svg&&Mt||!t&&3!==this._transformType?2:3};var $t=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(t,e,i){var n=this._firstPT=new bt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=$t,n.data=this},c._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},c._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&(e.r=t[e.p]),e=e._next},c._kill=function(e){var i,n,r,o=e;if(e.autoAlpha||e.alpha){o={};for(n in e)o[n]=e[n];o.opacity=1,o.autoAlpha&&(o.visibility=1)}for(e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(e),n=i.plugin),i=i._next;return t.prototype._kill.call(this,o)};var Qt=function(t,e,i){var n,r,o,s;if(t.slice)for(r=t.length;--r>-1;)Qt(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)o=n[r],s=o.type,o.style&&(e.push(nt(o)),i&&i.push(o)),1!==s&&9!==s&&11!==s||!o.childNodes.length||Qt(o,e,i)};return a.cascadeTo=function(t,i,n){var r,o,s,a,l=e.to(t,i,n),h=[l],c=[],u=[],p=[],f=e._internals.reservedProps;for(t=l._targets||l.target,Qt(t,c,p),l.render(i,!0,!0),Qt(t,u),l.render(0,!0,!0),l._enabled(!0),r=p.length;--r>-1;)if(o=rt(p[r],c[r],u[r]),o.firstMPT){o=o.difs;for(s in n)f[s]&&(o[s]=n[s]);a={};for(s in o)a[s]=c[r][s];h.push(e.fromTo(p[r],i,a,o))}return h},t.activate([a]),a},!0),function(){var t=o._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(i){return(Math.round(i/t)*t*e|0)/e}},i=function(t,e){for(;t;)t.f||t.blob||(t.m=e||Math.round),t=t._next},n=t.prototype;n._onInitAllProps=function(){var t,n,r,o,s=this._tween,a=s.vars.roundProps,l={},h=s._propLookup.roundProps;if("object"!=typeof a||a.push)for("string"==typeof a&&(a=a.split(",")),r=a.length;--r>-1;)l[a[r]]=Math.round;else for(o in a)l[o]=e(a[o]);for(o in l)for(t=s._firstPT;t;)n=t._next,t.pg?t.t._mod(l):t.n===o&&(2===t.f&&t.t?i(t.t._firstPT,l[o]):(this._add(t.t,o,t.s,t.c,l[o]),n&&(n._prev=t._prev),t._prev?t._prev._next=n:s._firstPT===t&&(s._firstPT=n),t._next=t._prev=null,s._propLookup[o]=h)),t=n;return!1},n._add=function(t,e,i,n,r){this._addTween(t,e,i,i+n,e,r||Math.round),this._overwriteProps.push(e)}}(),function(){o._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,i,n){var r,o;if("function"!=typeof t.setAttribute)return!1;for(r in e)o=e[r],"function"==typeof o&&(o=o(n,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",o+"",r,!1,r),this._overwriteProps.push(r);return!0}})}(),o._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,i,n){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,o,s,a,l,h,c=e.useRadians===!0?2*Math.PI:360,u=1e-6;for(r in e)"useRadians"!==r&&(a=e[r],"function"==typeof a&&(a=a(n,t)),h=(a+"").split("_"),o=h[0],s=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),a=this.finals[r]="string"==typeof o&&"="===o.charAt(1)?s+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0,l=a-s,h.length&&(o=h.join("_"),o.indexOf("short")!==-1&&(l%=c,l!==l%(c/2)&&(l=l<0?l+c:l-c)),o.indexOf("_cw")!==-1&&l<0?l=(l+9999999999*c)%c-(l/c|0)*c:o.indexOf("ccw")!==-1&&l>0&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(l>u||l<-u)&&(this._addTween(t,r,s,s+l,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,o._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r,s=o.GreenSockGlobals||o,a=s.com.greensock,l=2*Math.PI,h=Math.PI/2,c=a._class,u=function(e,i){var n=c("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},p=t.register||function(){},f=function(t,e,i,n,r){var o=c("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return p(o,t),o},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},m=function(e,i){var n=c("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},g=f("Back",m("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),m("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),m("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),y=c("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),v=y.prototype=new t;return v.constructor=y,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},y.ease=new y(.7,.7),v.config=y.config=function(t,e,i){return new y(t,e,i)},e=c("easing.SteppedEase",function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0},!0),v=e.prototype=new t,v.constructor=e,v.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},v.config=e.config=function(t,i){return new e(t,i)},i=c("easing.ExpoScaleEase",function(t,e,i){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=i},!0),v=i.prototype=new t,v.constructor=i,v.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},v.config=i.config=function(t,e,n){return new i(t,e,n)},n=c("easing.RoughEase",function(e){e=e||{};for(var i,n,r,o,s,a,l=e.taper||"none",h=[],c=0,u=0|(e.points||20),p=u,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,y="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,n=g?g.getRatio(i):i,"none"===l?r=y:"out"===l?(o=1-i,r=o*o*y):"in"===l?r=i*i*y:i<.5?(o=2*i,r=o*o*.5*y):(o=2*(1-i),r=o*o*.5*y),f?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:n<0&&(n=0)),h[c++]={x:i,y:n};for(h.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)s=h[p],a=new d(s.x,s.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),v=n.prototype=new t,v.constructor=n,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new n(t)},n.ease=new n,f("Bounce",u("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),u("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),u("BounceInOut",function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t=t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),f("Circ",u("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),u("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),u("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,n){var r=c("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/l*(Math.asin(1/this._p1)||0),this._p2=l/this._p2},!0),o=r.prototype=new t;return o.constructor=r,o.getRatio=i,o.config=function(t,e){return new r(t,e)},r},f("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),r("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),f("Expo",u("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),u("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),u("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),f("Sine",u("SineOut",function(t){return Math.sin(t*h)}),u("SineIn",function(t){return-Math.cos(t*h)+1}),u("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),c("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),p(s.SlowMo,"SlowMo","ease,"),p(n,"RoughEase","ease,"),p(e,"SteppedEase","ease,"),g},!0)}),o._gsDefine&&o._gsQueue.pop()(),function(i,o){"use strict";var s={},a=i.document,l=i.GreenSockGlobals=i.GreenSockGlobals||i;if(l.TweenLite)return l.TweenLite;var h,c,u,p,f,d=function(t){var e,i=t.split("."),n=l;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},m=d("com.greensock"),g=1e-10,y=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},v=function(){},_=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),b={},T=function(i,a,h,c){this.sc=b[i]?b[i].sc:[],b[i]=this,this.gsClass=null,this.func=h;var u=[];this.check=function(p){for(var f,m,g,y,v=a.length,_=v;--v>-1;)(f=b[a[v]]||new T(a[v],[])).gsClass?(u[v]=f.gsClass,_--):p&&f.sc.push(this);if(0===_&&h){if(m=("com.greensock."+i).split("."),g=m.pop(),y=d(m.join("."))[g]=this.gsClass=h.apply(h,u),c)if(l[g]=s[g]=y,"undefined"!=typeof t&&t.exports)if(i===o){t.exports=s[o]=y;for(v in s)y[v]=s[v]}else s[o]&&(s[o][g]=y);else n=[],r=function(){return y}.apply(e,n),!(void 0!==r&&(t.exports=r));for(v=0;v<this.sc.length;v++)this.sc[v].check()}},this.check(!0)},E=i._gsDefine=function(t,e,i,n){return new T(t,e,i,n)},x=m._class=function(t,e,i){return e=e||function(){},E(t,[],function(){return e},i),e};E.globals=l;var S=[0,0,1,1],w=x("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?S.concat(e):S},!0),A=w.map={},M=w.register=function(t,e,i,n){for(var r,o,s,a,l=e.split(","),h=l.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--h>-1;)for(o=l[h],r=n?x("easing."+o,null,!0):m.easing[o]||{},s=c.length;--s>-1;)a=c[s],A[o+"."+a]=A[a+o]=r[a]=t.getRatio?t:t[a]||new t};for(u=w.prototype,u._calcEnd=!1,u.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},h=["Linear","Quad","Cubic","Quart","Quint,Strong"],c=h.length;--c>-1;)u=h[c]+",Power"+c,M(new w(null,null,1,c),u,"easeOut",!0),M(new w(null,null,2,c),u,"easeIn"+(0===c?",easeNone":"")),M(new w(null,null,3,c),u,"easeInOut");A.linear=m.easing.Linear.easeIn,A.swing=m.easing.Quad.easeInOut;var P=x("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});u=P.prototype,u.addEventListener=function(t,e,i,n,r){r=r||0;var o,s,a=this._listeners[t],l=0;for(this!==p||f||p.wake(),null==a&&(this._listeners[t]=a=[]),s=a.length;--s>-1;)o=a[s],o.c===e&&o.s===i?a.splice(s,1):0===l&&o.pr<r&&(l=s+1);a.splice(l,0,{c:e,s:i,up:n,pr:r})},u.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},u.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,e>1&&(r=r.slice(0)),i=this._eventTarget;--e>-1;)n=r[e],n&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var C=i.requestAnimationFrame,R=i.cancelAnimationFrame,I=Date.now||function(){return(new Date).getTime()},O=I();for(h=["ms","moz","webkit","o"],c=h.length;--c>-1&&!C;)C=i[h[c]+"RequestAnimationFrame"],R=i[h[c]+"CancelAnimationFrame"]||i[h[c]+"CancelRequestAnimationFrame"];x("Ticker",function(t,e){var i,n,r,o,s,l=this,h=I(),c=!(e===!1||!C)&&"auto",u=500,d=33,m="tick",y=function(t){var e,a,c=I()-O;c>u&&(h+=c-d),O+=c,l.time=(O-h)/1e3,e=l.time-s,(!i||e>0||t===!0)&&(l.frame++,s+=e+(e>=o?.004:o-e),a=!0),t!==!0&&(r=n(y)),a&&l.dispatchEvent(m)};P.call(l),l.time=l.frame=0,l.tick=function(){y(!0)},l.lagSmoothing=function(t,e){return arguments.length?(u=t||1/g,void(d=Math.min(e,u,0))):u<1/g},l.sleep=function(){null!=r&&(c&&R?R(r):clearTimeout(r),n=v,r=null,l===p&&(f=!1))},l.wake=function(t){null!==r?l.sleep():t?h+=-O+(O=I()):l.frame>10&&(O=I()-u+5),n=0===i?v:c&&C?C:function(t){return setTimeout(t,1e3*(s-l.time)+1|0)},l===p&&(f=!0),y(2)},l.fps=function(t){return arguments.length?(i=t,o=1/(i||60),s=this.time+o,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),c=t,void l.fps(i)):c},l.fps(t),setTimeout(function(){"auto"===c&&l.frame<5&&"hidden"!==(a||{}).visibilityState&&l.useRAF(!1)},1500)}),u=m.Ticker.prototype=new m.events.EventDispatcher,u.constructor=m.Ticker;var N=x("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,J){f||p.wake();var i=this.vars.useFrames?Q:J;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});p=N.ticker=new m.Ticker,u=N.prototype,u._dirty=u._gc=u._initted=u._paused=!1,u._totalTime=u._time=0,u._rawPrevTime=-1,u._next=u._last=u._onUpdate=u._timeline=u.timeline=null,u._paused=!1;var L=function(){f&&I()-O>2e3&&("hidden"!==(a||{}).visibilityState||!p.lagSmoothing())&&p.wake();var t=setTimeout(L,2e3);t.unref&&t.unref()};L(),u.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},u.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},u.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},u.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},u.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},u.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},u.render=function(t,e,i){},u.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},u.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale-1e-7},u._enabled=function(t,e){return f||p.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},u._kill=function(t,e){return this._enabled(!1,!1)},u.kill=function(t,e){return this._kill(t,e),this},u._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},u._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},u._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this,o=n?n.length:0;switch(o){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},u.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=_(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},u.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},u.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},u.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},u.totalTime=function(t,e,i){if(f||p.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(F.length&&et(),this.render(t,e,!1),F.length&&et())}return this},u.progress=u.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},u.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},u.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},u.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,i;for(t=t||g,this._timeline&&this._timeline.smoothChildTiming&&(e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/t),this._timeScale=t,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),
i=i.timeline;return this},u.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},u.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(f||t||p.wake(),e=n.rawTime(),i=e-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var D=x("core.SimpleTimeline",function(t){N.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});u=D.prototype=new N,u.constructor=D,u.kill()._gc=!1,u._first=u._last=u._recent=null,u._sortChildren=!1,u.add=u.insert=function(t,e,i,n){var r,o;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(o=t._startTime;r&&r._startTime>o;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},u._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},u.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},u.rawTime=function(){return f||p.wake(),this._totalTime};var k=x("TweenLite",function(t,e,n){if(N.call(this,e,n),this.render=k.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:k.selector(t)||t;var r,o,s,a=t.jquery||t.length&&t!==i&&t[0]&&(t[0]===i||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?$[k.defaultOverwrite]:"number"==typeof l?l>>0:$[l],(a||t instanceof Array||t.push&&_(t))&&"number"!=typeof t[0])for(this._targets=s=y(t),this._propLookup=[],this._siblings=[],r=0;r<s.length;r++)o=s[r],o?"string"!=typeof o?o.length&&o!==i&&o[0]&&(o[0]===i||o[0].nodeType&&o[0].style&&!o.nodeType)?(s.splice(r--,1),this._targets=s=s.concat(y(o))):(this._siblings[r]=it(o,this,!1),1===l&&this._siblings[r].length>1&&rt(o,this,null,1,this._siblings[r])):(o=s[r--]=k.selector(o),"string"==typeof o&&s.splice(r+1,1)):s.splice(r--,1);else this._propLookup={},this._siblings=it(t,this,!1),1===l&&this._siblings.length>1&&rt(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-g,this.render(Math.min(0,-this._delay)))},!0),B=function(t){return t&&t.length&&t!==i&&t[0]&&(t[0]===i||t[0].nodeType&&t[0].style&&!t.nodeType)},G=function(t,e){var i,n={};for(i in t)K[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!Y[i]||Y[i]&&Y[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};u=k.prototype=new N,u.constructor=k,u.kill()._gc=!1,u.ratio=0,u._firstPT=u._targets=u._overwrittenProps=u._startAt=null,u._notifyPluginsOfEnabled=u._lazy=!1,k.version="1.20.5",k.defaultEase=u._ease=new w(null,null,1,1),k.defaultOverwrite="auto",k.ticker=p,k.autoSleep=120,k.lagSmoothing=function(t,e){p.lagSmoothing(t,e)},k.selector=i.$||i.jQuery||function(t){var e=i.$||i.jQuery;return e?(k.selector=e,e(t)):(a||(a=i.document),a?a.querySelectorAll?a.querySelectorAll(t):a.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var F=[],V={},U=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,H=/[\+-]=-?[\.\d]/,j=function(t){for(var e,i=this._firstPT,n=1e-6;i;)e=i.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m.call(this._tween,e,this._target||i.t,this._tween):e<n&&e>-n&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},z=function(t,e,i,n){var r,o,s,a,l,h,c,u=[],p=0,f="",d=0;for(u.start=t,u.end=e,t=u[0]=t+"",e=u[1]=e+"",i&&(i(u),t=u[0],e=u[1]),u.length=0,r=t.match(U)||[],o=e.match(U)||[],n&&(n._next=null,n.blob=1,u._firstPT=u._applyPT=n),l=o.length,a=0;a<l;a++)c=o[a],h=e.substr(p,e.indexOf(c,p)-p),f+=h||!a?h:",",p+=h.length,d?d=(d+1)%5:"rgba("===h.substr(-5)&&(d=1),c===r[a]||r.length<=a?f+=c:(f&&(u.push(f),f=""),s=parseFloat(r[a]),u.push(s),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:s,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-s)||0,f:0,m:d&&d<4?Math.round:0}),p+=c.length;return f+=e.substr(p),f&&u.push(f),u.setRatio=j,H.test(e)&&(u.end=null),u},W=function(t,e,i,n,r,o,s,a,l){"function"==typeof n&&(n=n(l||0,t));var h,c=typeof t[e],u="function"!==c?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),p="get"!==i?i:u?s?t[u](s):t[u]():t[e],f="string"==typeof n&&"="===n.charAt(1),d={t:t,p:e,s:p,f:"function"===c,pg:0,n:r||e,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:f?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-p||0};if(("number"!=typeof p||"number"!=typeof n&&!f)&&(s||isNaN(p)||!f&&isNaN(n)||"boolean"==typeof p||"boolean"==typeof n?(d.fp=s,h=z(p,f?parseFloat(d.s)+d.c+(d.s+"").replace(/[0-9\-\.]/g,""):n,a||k.defaultStringFilter,d),d={t:h,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(d.s=parseFloat(p),f||(d.c=parseFloat(n)-d.s||0))),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d},X=k._internals={isArray:_,isSelector:B,lazyTweens:F,blobDif:z},Y=k._plugins={},q=X.tweenLookup={},Z=0,K=X.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},$={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},Q=N._rootFramesTimeline=new D,J=N._rootTimeline=new D,tt=30,et=X.lazyRender=function(){var t,e=F.length;for(V={};--e>-1;)t=F[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);F.length=0};J._startTime=p.time,Q._startTime=p.frame,J._active=Q._active=!0,setTimeout(et,1),N._updateRoot=k.render=function(){var t,e,i;if(F.length&&et(),J.render((p.time-J._startTime)*J._timeScale,!1,!1),Q.render((p.frame-Q._startTime)*Q._timeScale,!1,!1),F.length&&et(),p.frame>=tt){tt=p.frame+(parseInt(k.autoSleep,10)||120);for(i in q){for(e=q[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete q[i]}if(i=J._first,(!i||i._paused)&&k.autoSleep&&!Q._first&&1===p._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||p.sleep()}}},p.addEventListener("tick",N._updateRoot);var it=function(t,e,i){var n,r,o=t._gsTweenID;if(q[o||(t._gsTweenID=o="t"+Z++)]||(q[o]={target:t,tweens:[]}),e&&(n=q[o].tweens,n[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return q[o].tweens},nt=function(t,e,i,n){var r,o,s=t.vars.onOverwrite;return s&&(r=s(t,e,i,n)),s=k.onOverwrite,s&&(o=s(t,e,i,n)),r!==!1&&o!==!1},rt=function(t,e,i,n,r){var o,s,a,l;if(1===n||n>=4){for(l=r.length,o=0;o<l;o++)if((a=r[o])!==e)a._gc||a._kill(null,t,e)&&(s=!0);else if(5===n)break;return s}var h,c=e._startTime+g,u=[],p=0,f=0===e._duration;for(o=r.length;--o>-1;)(a=r[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(h=h||ot(e,0,f),0===ot(a,h,f)&&(u[p++]=a)):a._startTime<=c&&a._startTime+a.totalDuration()/a._timeScale>c&&((f||!a._initted)&&c-a._startTime<=2e-10||(u[p++]=a)));for(o=p;--o>-1;)if(a=u[o],2===n&&a._kill(i,t,e)&&(s=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!nt(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},ot=function(t,e,i){for(var n=t._timeline,r=n._timeScale,o=t._startTime;n._timeline;){if(o+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return o/=r,o>e?o-e:i&&o===e||!t._initted&&o-e<2*g?g:(o+=t.totalDuration()/t._timeScale/r)>e+g?0:o-e-g};u._init=function(){var t,e,i,n,r,o,s=this.vars,a=this._overwrittenProps,l=this._duration,h=!!s.immediateRender,c=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in s.startAt)r[n]=s.startAt[n];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&s.lazy!==!1,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateParams=s.onUpdateParams,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=k.to(this.target||{},0,r),h)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(n in s)K[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&s.lazy!==!1,i.immediateRender=h,this._startAt=k.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof w?c:"function"==typeof c?new w(c,s.easeParams):A[c]||k.defaultEase:k.defaultEase,s.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,t=0;t<o;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&k._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},u._initProps=function(t,e,n,r,o){var s,a,l,h,c,u;if(null==t)return!1;V[t._gsTweenID]&&et(),this.vars.css||t.style&&t!==i&&t.nodeType&&Y.css&&this.vars.autoCSS!==!1&&G(this.vars,t);for(s in this.vars)if(u=this.vars[s],K[s])u&&(u instanceof Array||u.push&&_(u))&&u.join("").indexOf("{self}")!==-1&&(this.vars[s]=u=this._swapSelfInParams(u,this));else if(Y[s]&&(h=new Y[s])._onInitTween(t,this.vars[s],this,o)){for(this._firstPT=c={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:h._priority,m:0},a=h._overwriteProps.length;--a>-1;)e[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(l=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else e[s]=W.call(this,t,s,"get",u,s,0,null,this.vars.stringFilter,o);return r&&this._kill(r,t)?this._initProps(t,e,n,r,o):this._overwrite>1&&this._firstPT&&n.length>1&&rt(t,this,e,this._overwrite,n)?(this._kill(e,t),this._initProps(t,e,n,r,o)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(V[t._gsTweenID]=!0),l)},u.render=function(t,e,i){var n,r,o,s,a=this._time,l=this._duration,h=this._rawPrevTime;if(t>=l-1e-7&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(h<0||t<=0&&t>=-1e-7||h===g&&"isPause"!==this.data)&&h!==t&&(i=!0,h>g&&(r="onReverseComplete")),this._rawPrevTime=s=!e||t||h===t?t:g);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&h>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(h!==g||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=s=!e||t||h===t?t:g)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=t,this._easeType){var c=t/l,u=this._easeType,p=this._easePower;(1===u||3===u&&c>=.5)&&(c=1-c),3===u&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),1===u?this.ratio=1-c:2===u?this.ratio=c:t/l<.5?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=h,F.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,!0,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&t!==-1e-4&&this._startAt.render(t,!0,i),e||(this._time!==a||n||i)&&this._callback("onUpdate")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,!0,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===g&&s!==g&&(this._rawPrevTime=0)))}},u._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:k.selector(e)||e;var n,r,o,s,a,l,h,c,u,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((_(e)||B(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(h=t||a,c=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(k.onOverwrite||this.vars.onOverwrite)){for(o in h)a[o]&&(u||(u=[]),u.push(o));if((u||!t)&&!nt(this,i,e,u))return!1}for(o in h)(s=a[o])&&(p&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(h)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),c&&(r[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},u.invalidate=function(){return this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],N.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-g,this.render(Math.min(0,-this._delay))),this},u._enabled=function(t,e){if(f||p.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=it(n[i],this,!0);else this._siblings=it(this.target,this,!0)}return N.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&k._onPluginEvent(t?"_onEnable":"_onDisable",this)},k.to=function(t,e,i){return new k(t,e,i)},k.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new k(t,e,i)},k.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new k(t,e,n)},k.delayedCall=function(t,e,i,n,r){return new k(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},k.set=function(t,e){return new k(t,0,e)},k.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:k.selector(t)||t;var i,n,r,o;if((_(t)||B(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(k.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(o=n[i],r=i;--r>-1;)o===n[r]&&n.splice(i,1)}else if(t._gsTweenID)for(n=it(t).concat(),i=n.length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n||[]},k.killTweensOf=k.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=k.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var st=x("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=st.prototype},!0);if(u=st.prototype,st.version="1.19.0",st.API=2,u._firstPT=null,u._addTween=W,u.setRatio=j,u._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},u._mod=u._roundProps=function(t){for(var e,i=this._firstPT;i;)e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")],e&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},k._onPluginEvent=function(t,e){var i,n,r,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:o)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:o=a,a=s}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},st.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===st.API&&(Y[(new t[e])._propName]=t[e]);return!0},E.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=x("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){st.call(this,i,n),this._overwriteProps=r||[]},t.global===!0),a=s.prototype=new st(i);a.constructor=s,s.API=t.API;for(e in o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,st.activate([s]),s},h=i._gsQueue){for(c=0;c<h.length;c++)h[c]();for(u in b)b[u].func||i.console.log("GSAP encountered missing dependency: "+u)}f=!1}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof i?i:this||window,"TweenMax")}).call(e,function(){return this}())},function(t,e,i){var n=i(8);i(9),i(10),i(11),i(12),t.exports=n},function(t,e){var i=function(){function t(t){return null==t?String(t):q[Z.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){var e=!!t&&"length"in t&&t.length,n=S.type(t);return"function"!=n&&!i(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t){return R.call(t,function(t){return null!=t})}function l(t){return t.length>0?S.fn.concat.apply([],t):t}function h(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(t){return t in L?L[t]:L[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){return"number"!=typeof e||D[h(t)]?e:e+"px"}function p(t){var e,i;return N[t]||(e=O.createElement(t),O.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),N[t]=i),N[t]}function f(t){return"children"in t?I.call(t.children):S.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function d(t,e){var i,n=t?t.length:0;for(i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function m(t,e,i){for(x in e)i&&(o(e[x])||J(e[x]))?(o(e[x])&&!o(t[x])&&(t[x]={}),J(e[x])&&!J(t[x])&&(t[x]=[]),m(t[x],e[x],i)):e[x]!==E&&(t[x]=e[x])}function g(t,e){return null==e?S(t):S(t).filter(e)}function y(t,i,n,r){return e(i)?i.call(t,n,r):i}function v(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function _(t,e){var i=t.className||"",n=i&&i.baseVal!==E;return e===E?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?S.parseJSON(t):t):t}catch(e){return t}}function T(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)T(t.childNodes[i],e)}var E,x,S,w,A,M,P=[],C=P.concat,R=P.filter,I=P.slice,O=window.document,N={},L={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,B=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,G=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,V=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],j=O.createElement("table"),z=O.createElement("tr"),W={tr:O.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:z,th:z,"*":O.createElement("div")},X=/complete|loaded|interactive/,Y=/^[\w-]*$/,q={},Z=q.toString,K={},$=O.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(t){return t instanceof Array};return K.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,r=t.parentNode,o=!r;return o&&(r=$).appendChild(t),n=~K.qsa(r,e).indexOf(t),o&&$.removeChild(t),n},A=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},M=function(t){return R.call(t,function(e,i){return t.indexOf(e)==i})},K.fragment=function(t,e,i){var n,r,s;return B.test(t)&&(n=S(O.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(G,"<$1></$2>")),e===E&&(e=k.test(t)&&RegExp.$1),e in W||(e="*"),s=W[e],s.innerHTML=""+t,n=S.each(I.call(s.childNodes),function(){s.removeChild(this)})),o(i)&&(r=S(n),S.each(i,function(t,e){U.indexOf(t)>-1?r[t](e):r.attr(t,e)})),n},K.Z=function(t,e){return new d(t,e)},K.isZ=function(t){return t instanceof K.Z},K.init=function(t,i){var n;if(!t)return K.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&k.test(t))n=K.fragment(t,RegExp.$1,i),t=null;else{if(i!==E)return S(i).find(t);n=K.qsa(O,t)}else{if(e(t))return S(O).ready(t);if(K.isZ(t))return t;if(J(t))n=a(t);else if(r(t))n=[t],t=null;else if(k.test(t))n=K.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==E)return S(i).find(t);n=K.qsa(O,t)}}return K.Z(n,t)},S=function(t,e){return K.init(t,e)},S.extend=function(t){var e,i=I.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},K.qsa=function(t,e){var i,n="#"==e[0],r=!n&&"."==e[0],o=n||r?e.slice(1):e,s=Y.test(o);return t.getElementById&&s&&n?(i=t.getElementById(o))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:I.call(s&&!n&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},S.contains=O.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},S.type=t,S.isFunction=e,S.isWindow=i,S.isArray=J,S.isPlainObject=o,S.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},S.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},S.inArray=function(t,e,i){return P.indexOf.call(e,t,i)},S.camelCase=A,S.trim=function(t){return null==t?"":String.prototype.trim.call(t)},S.uuid=0,S.support={},S.expr={},S.noop=function(){},S.map=function(t,e){var i,n,r,o=[];if(s(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&o.push(i);else for(r in t)i=e(t[r],r),null!=i&&o.push(i);return l(o)},S.each=function(t,e){var i,n;if(s(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},S.grep=function(t,e){return R.call(t,e)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){q["[object "+e+"]"]=e.toLowerCase()}),S.fn={constructor:K.Z,length:0,forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,splice:P.splice,indexOf:P.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=K.isZ(e)?e.toArray():e;return C.apply(K.isZ(this)?this.toArray():this,i)},map:function(t){return S(S.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return S(I.apply(this,arguments))},ready:function(t){return X.test(O.readyState)&&O.body?t(S):O.addEventListener("DOMContentLoaded",function(){t(S)},!1),this},get:function(t){return t===E?I.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):S(R.call(this,function(e){return K.matches(e,t)}))},add:function(t,e){return S(M(this.concat(S(t,e))))},is:function(t){return this.length>0&&K.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==E)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):s(t)&&e(t.item)?I.call(t):S(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return S(i)},has:function(t){return this.filter(function(){return r(t)?S.contains(this,t):S(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:S(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:S(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?S(t).filter(function(){var t=this;return P.some.call(i,function(e){return S.contains(e,t)})}):1==this.length?S(K.qsa(this[0],t)):this.map(function(){return K.qsa(this,t)}):S()},closest:function(t,e){var i=[],r="object"==typeof t&&S(t);return this.each(function(o,s){for(;s&&!(r?r.indexOf(s)>=0:K.matches(s,t));)s=s!==e&&!n(s)&&s.parentNode;s&&i.indexOf(s)<0&&i.push(s)}),S(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=S.map(i,function(t){if((t=t.parentNode)&&!n(t)&&e.indexOf(t)<0)return e.push(t),t});return g(e,t)},parent:function(t){return g(M(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||I.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return R.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return S.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=S(t).get(0),r=n.parentNode||this.length>1;return this.each(function(e){S(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){S(this[0]).before(t=S(t));for(var e;(e=t.children()).length;)t=e.first();S(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=S(this),r=n.contents(),o=i?t.call(this,e):t;r.length?r.wrapAll(o):n.append(o)})},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(S(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=S(this);(t===E?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return S(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return S(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;S(this).empty().append(y(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=y(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(r(t))for(x in t)v(this,x,t[x]);else v(this,t,y(this,e,i,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:E},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){v(this,t)},this)})},prop:function(t,e){return t=Q[t]||t,1 in arguments?this.each(function(i){this[t]=y(this,e,i,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=Q[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(V,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?b(n):E},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=y(this,t,e,this.value)})):this[0]&&(this[0].multiple?S(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=S(this),n=y(this,t,e,i.offset()),r=i.offsetParent().offset(),o={top:n.top-r.top,left:n.left-r.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)});if(!this.length)return null;if(O.documentElement!==this[0]&&!S.contains(O.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[A(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(J(e)){if(!n)return;var r={},o=getComputedStyle(n,"");return S.each(e,function(t,e){r[e]=n.style[A(e)]||o.getPropertyValue(e)}),r}}var s="";if("string"==t(e))i||0===i?s=h(e)+":"+u(e,i):this.each(function(){this.style.removeProperty(h(e))});else for(x in e)e[x]||0===e[x]?s+=h(x)+":"+u(x,e[x])+";":this.each(function(){this.style.removeProperty(h(x))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(S(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&P.some.call(this,function(t){return this.test(_(t))},c(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){w=[];var i=_(this),n=y(this,t,e,i);n.split(/\s+/g).forEach(function(t){S(this).hasClass(t)||w.push(t)},this),w.length&&_(this,i+(i?" ":"")+w.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===E)return _(this,"");w=_(this),y(this,t,e,w).split(/\s+/g).forEach(function(t){w=w.replace(c(t)," ")}),_(this,w.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=S(this),r=y(this,t,i,_(this));r.split(/\s+/g).forEach(function(t){(e===E?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===E?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t;
}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===E?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=F.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(S(t).css("margin-top"))||0,i.left-=parseFloat(S(t).css("margin-left"))||0,n.top+=parseFloat(S(e[0]).css("border-top-width"))||0,n.left+=parseFloat(S(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||O.body;t&&!F.test(t.nodeName)&&"static"==S(t).css("position");)t=t.offsetParent;return t})}},S.fn.detach=S.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});S.fn[t]=function(r){var o,s=this[0];return r===E?i(s)?s["inner"+e]:n(s)?s.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){s=S(this),s.css(t,y(this,r,e,s[t]()))})}}),H.forEach(function(e,i){var n=i%2;S.fn[e]=function(){var e,r,o=S.map(arguments,function(i){var n=[];return e=t(i),"array"==e?(i.forEach(function(t){return t.nodeType!==E?n.push(t):S.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(K.fragment(t)))}),n):"object"==e||null==i?i:K.fragment(i)}),s=this.length>1;return o.length<1?this:this.each(function(t,e){r=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var a=S.contains(O.documentElement,r);o.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return S(t).remove();r.insertBefore(t,e),a&&T(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}})})})},S.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return S(t)[e](this),this}}),K.Z.prototype=d.prototype=S.fn,K.uniq=M,K.deserializeValue=b,S.zepto=K,S}();t.exports=i},function(t,e,i){var n=i(8);!function(t){function e(t){return t._zid||(t._zid=p++)}function i(t,i,o,s){if(i=n(i),i.ns)var a=r(i.ns);return(g[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||a.test(t.ns))&&(!o||e(t.fn)===e(o))&&(!s||t.sel==s)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!v&&t.e in _||!!e}function s(t){return b[t]||v&&_[t]||t}function a(i,r,a,l,c,p,f){var d=e(i),m=g[d]||(g[d]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var r=n(e);r.fn=a,r.sel=c,r.e in b&&(a=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return r.fn.apply(this,arguments)}),r.del=p;var d=p||a;r.proxy=function(t){if(t=h(t),!t.isImmediatePropagationStopped()){t.data=l;var e=d.apply(i,t._args==u?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=m.length,m.push(r),"addEventListener"in i&&i.addEventListener(s(r.e),r.proxy,o(r,f))})}function l(t,n,r,a,l){var h=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,r,a).forEach(function(e){delete g[h][e.i],"removeEventListener"in t&&t.removeEventListener(s(e.e),e.proxy,o(e,l))})})}function h(e,i){if(i||!e.isDefaultPrevented){i||(i=e),t.each(S,function(t,n){var r=i[t];e[t]=function(){return this[n]=T,r&&r.apply(i,arguments)},e[n]=E});try{e.timeStamp||(e.timeStamp=Date.now())}catch(n){}(i.defaultPrevented!==u?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=T)}return e}function c(t){var e,i={originalEvent:t};for(e in t)x.test(e)||t[e]===u||(i[e]=t[e]);return h(i,t)}var u,p=1,f=Array.prototype.slice,d=t.isFunction,m=function(t){return"string"==typeof t},g={},y={},v="onfocusin"in window,_={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};y.click=y.mousedown=y.mouseup=y.mousemove="MouseEvents",t.event={add:a,remove:l},t.proxy=function(i,n){var r=2 in arguments&&f.call(arguments,2);if(d(i)){var o=function(){return i.apply(n,r?r.concat(f.call(arguments)):arguments)};return o._zid=e(i),o}if(m(n))return r?(r.unshift(i[n],i),t.proxy.apply(null,r)):t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var T=function(){return!0},E=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,r,o){var s,h,p=this;return e&&!m(e)?(t.each(e,function(t,e){p.on(t,i,n,e,o)}),p):(m(i)||d(r)||r===!1||(r=n,n=i,i=u),r!==u&&n!==!1||(r=n,n=u),r===!1&&(r=E),p.each(function(u,p){o&&(s=function(t){return l(p,t.type,r),r.apply(this,arguments)}),i&&(h=function(e){var n,o=t(e.target).closest(i,p).get(0);if(o&&o!==p)return n=t.extend(c(e),{currentTarget:o,liveFired:p}),(s||r).apply(o,[n].concat(f.call(arguments,1)))}),a(p,e,r,n,i,h||s)}))},t.fn.off=function(e,i,n){var r=this;return e&&!m(e)?(t.each(e,function(t,e){r.off(t,i,e)}),r):(m(i)||d(n)||n===!1||(n=i,i=u),n===!1&&(n=E),r.each(function(){l(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=m(e)||t.isPlainObject(e)?t.Event(e):h(e),e._args=i,this.each(function(){e.type in _&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var r,o;return this.each(function(s,a){r=c(m(e)?t.Event(e):e),r._args=n,r.target=a,t.each(i(a,e.type||e),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var i=document.createEvent(y[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),h(i)}}(n)},function(t,e,i){var n=i(8);!function(t){function e(e,i,n){var r=t.Event(i);return t(e).trigger(r,n),!r.isDefaultPrevented()}function i(t,i,n,r){if(t.global)return e(i||_,n,r)}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function o(t,e){var n=e.context;return e.beforeSend.call(n,t,e)!==!1&&i(e,n,"ajaxBeforeSend",[t,e])!==!1&&void i(e,n,"ajaxSend",[t,e])}function s(t,e,n,r){var o=n.context,s="success";n.success.call(o,t,s,e),r&&r.resolveWith(o,[t,s,e]),i(n,o,"ajaxSuccess",[e,n,t]),l(s,e,n)}function a(t,e,n,r,o){var s=r.context;r.error.call(s,n,e,t),o&&o.rejectWith(s,[n,e,t]),i(r,s,"ajaxError",[n,r,t||e]),l(e,n,r)}function l(t,e,n){var o=n.context;n.complete.call(o,e,t),i(n,o,"ajaxComplete",[e,n]),r(n)}function h(t,e,i){if(i.dataFilter==c)return t;var n=i.context;return i.dataFilter.call(n,t,e)}function c(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==S?"html":t==x?"json":T.test(t)?"script":E.test(t)&&"xml")||"text"}function p(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=p(e.url,e.data),e.data=void 0)}function d(e,i,n,r){return t.isFunction(i)&&(r=n,n=i,i=void 0),t.isFunction(n)||(r=n,n=void 0),{url:e,data:i,success:n,dataType:r}}function m(e,i,n,r){var o,s=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,l){o=t.type(l),r&&(i=n?r:r+"["+(a||"object"==o||"array"==o?i:"")+"]"),!r&&s?e.add(l.name,l.value):"array"==o||!n&&"object"==o?m(e,l,n,i):e.add(i,l)})}var g,y,v=+new Date,_=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,T=/^(?:text|application)\/javascript/i,E=/^(?:text|application)\/xml/i,x="application/json",S="text/html",w=/^\s*$/,A=_.createElement("a");A.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,r,l=e.jsonpCallback,h=(t.isFunction(l)?l():l)||"Zepto"+v++,c=_.createElement("script"),u=window[h],p=function(e){t(c).triggerHandler("error",e||"abort")},f={abort:p};return i&&i.promise(f),t(c).on("load error",function(o,l){clearTimeout(r),t(c).off().remove(),"error"!=o.type&&n?s(n[0],f,e,i):a(null,l||"error",f,e,i),window[h]=u,n&&t.isFunction(u)&&u(n[0]),u=n=void 0}),o(f,e)===!1?(p("abort"),f):(window[h]=function(){n=arguments},c.src=e.url.replace(/\?(.+)=\?/,"?$1="+h),_.head.appendChild(c),e.timeout>0&&(r=setTimeout(function(){p("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:c},t.ajax=function(e){var i,r,l=t.extend({},e||{}),d=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===l[g]&&(l[g]=t.ajaxSettings[g]);n(l),l.crossDomain||(i=_.createElement("a"),i.href=l.url,i.href=i.href,l.crossDomain=A.protocol+"//"+A.host!=i.protocol+"//"+i.host),l.url||(l.url=window.location.toString()),(r=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,r)),f(l);var m=l.dataType,v=/\?.+=\?/.test(l.url);if(v&&(m="jsonp"),l.cache!==!1&&(e&&e.cache===!0||"script"!=m&&"jsonp"!=m)||(l.url=p(l.url,"_="+Date.now())),"jsonp"==m)return v||(l.url=p(l.url,l.jsonp?l.jsonp+"=?":l.jsonp===!1?"":"callback=?")),t.ajaxJSONP(l,d);var b,T=l.accepts[m],E={},x=function(t,e){E[t.toLowerCase()]=[t,e]},S=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,M=l.xhr(),P=M.setRequestHeader;if(d&&d.promise(M),l.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",T||"*/*"),(T=l.mimeType||T)&&(T.indexOf(",")>-1&&(T=T.split(",",2)[0]),M.overrideMimeType&&M.overrideMimeType(T)),(l.contentType||l.contentType!==!1&&l.data&&"GET"!=l.type.toUpperCase())&&x("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(y in l.headers)x(y,l.headers[y]);if(M.setRequestHeader=x,M.onreadystatechange=function(){if(4==M.readyState){M.onreadystatechange=c,clearTimeout(b);var e,i=!1;if(M.status>=200&&M.status<300||304==M.status||0==M.status&&"file:"==S){if(m=m||u(l.mimeType||M.getResponseHeader("content-type")),"arraybuffer"==M.responseType||"blob"==M.responseType)e=M.response;else{e=M.responseText;try{e=h(e,m,l),"script"==m?(0,eval)(e):"xml"==m?e=M.responseXML:"json"==m&&(e=w.test(e)?null:t.parseJSON(e))}catch(n){i=n}if(i)return a(i,"parsererror",M,l,d)}s(e,M,l,d)}else a(M.statusText||null,M.status?"error":"abort",M,l,d)}},o(M,l)===!1)return M.abort(),a(null,"abort",M,l,d),M;var C=!("async"in l)||l.async;if(M.open(l.type,l.url,C,l.username,l.password),l.xhrFields)for(y in l.xhrFields)M[y]=l.xhrFields[y];for(y in E)P.apply(M,E[y]);return l.timeout>0&&(b=setTimeout(function(){M.onreadystatechange=c,M.abort(),a(null,"timeout",M,l,d)},l.timeout)),M.send(l.data?l.data:null),M},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var r,o=this,s=e.split(/\s/),a=d(e,i,n),l=a.success;return s.length>1&&(a.url=s[0],r=s[1]),a.success=function(e){o.html(r?t("<div>").html(e.replace(b,"")).find(r):e),l&&l.apply(o,arguments)},t.ajax(a),this};var M=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(M(e)+"="+M(i))},m(n,e,i),n.join("&").replace(/%20/g,"+")}}(n)},function(t,e,i){var n=i(8);!function(t){t.fn.serializeArray=function(){var e,i,n=[],r=function(t){return t.forEach?t.forEach(r):void n.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(n,o){i=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||o.checked)&&r(t(o).val())}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(n)},function(t,e){!function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,i){try{return e(t,i)}catch(n){return null}}}}()},function(t,e,i){/*!mobile-detect v1.4.3 2018-09-08*/
/*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/
!function(t,e){t(function(){"use strict";function t(t,e){return null!=t&&null!=e&&t.toLowerCase()===e.toLowerCase()}function i(t,e){var i,n,r=t.length;if(!r||!e)return!1;for(i=e.toLowerCase(),n=0;n<r;++n)if(i===t[n].toLowerCase())return!0;return!1}function n(t){for(var e in t)l.call(t,e)&&(t[e]=new RegExp(t[e],"i"))}function r(t){return(t||"").substr(0,500)}function o(t,e){this.ua=r(t),this._cache={},this.maxPhoneWidth=e||600}var s={};s.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304F|TB-X304L|TB-8703F|Tab2A7-10F|TB2-X30L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b(?!\\))",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},s.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,
tabletPattern:/android|ipad|playbook|silk/i};var a,l=Object.prototype.hasOwnProperty;return s.FALLBACK_PHONE="UnknownPhone",s.FALLBACK_TABLET="UnknownTablet",s.FALLBACK_MOBILE="UnknownMobile",a="isArray"in Array?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},function(){var t,e,i,r,o,h,c=s.mobileDetectRules;for(t in c.props)if(l.call(c.props,t)){for(e=c.props[t],a(e)||(e=[e]),o=e.length,r=0;r<o;++r)i=e[r],h=i.indexOf("[VER]"),h>=0&&(i=i.substring(0,h)+"([\\w._\\+]+)"+i.substring(h+5)),e[r]=new RegExp(i,"i");c.props[t]=e}n(c.oss),n(c.phones),n(c.tablets),n(c.uas),n(c.utils),c.oss0={WindowsPhoneOS:c.oss.WindowsPhoneOS,WindowsMobileOS:c.oss.WindowsMobileOS}}(),s.findMatch=function(t,e){for(var i in t)if(l.call(t,i)&&t[i].test(e))return i;return null},s.findMatches=function(t,e){var i=[];for(var n in t)l.call(t,n)&&t[n].test(e)&&i.push(n);return i},s.getVersionStr=function(t,e){var i,n,r,o,a=s.mobileDetectRules.props;if(l.call(a,t))for(i=a[t],r=i.length,n=0;n<r;++n)if(o=i[n].exec(e),null!==o)return o[1];return null},s.getVersion=function(t,e){var i=s.getVersionStr(t,e);return i?s.prepareVersionNo(i):NaN},s.prepareVersionNo=function(t){var e;return e=t.split(/[a-z._ \/\-]/i),1===e.length&&(t=e[0]),e.length>1&&(t=e[0]+".",e.shift(),t+=e.join("")),Number(t)},s.isMobileFallback=function(t){return s.detectMobileBrowsers.fullPattern.test(t)||s.detectMobileBrowsers.shortPattern.test(t.substr(0,4))},s.isTabletFallback=function(t){return s.detectMobileBrowsers.tabletPattern.test(t)},s.prepareDetectionCache=function(t,i,n){if(t.mobile===e){var r,a,l;return(a=s.findMatch(s.mobileDetectRules.tablets,i))?(t.mobile=t.tablet=a,void(t.phone=null)):(r=s.findMatch(s.mobileDetectRules.phones,i))?(t.mobile=t.phone=r,void(t.tablet=null)):void(s.isMobileFallback(i)?(l=o.isPhoneSized(n),l===e?(t.mobile=s.FALLBACK_MOBILE,t.tablet=t.phone=null):l?(t.mobile=t.phone=s.FALLBACK_PHONE,t.tablet=null):(t.mobile=t.tablet=s.FALLBACK_TABLET,t.phone=null)):s.isTabletFallback(i)?(t.mobile=t.tablet=s.FALLBACK_TABLET,t.phone=null):t.mobile=t.tablet=t.phone=null)}},s.mobileGrade=function(t){var e=null!==t.mobile();return t.os("iOS")&&t.version("iPad")>=4.3||t.os("iOS")&&t.version("iPhone")>=3.1||t.os("iOS")&&t.version("iPod")>=3.1||t.version("Android")>2.1&&t.is("Webkit")||t.version("Windows Phone OS")>=7||t.is("BlackBerry")&&t.version("BlackBerry")>=6||t.match("Playbook.*Tablet")||t.version("webOS")>=1.4&&t.match("Palm|Pre|Pixi")||t.match("hp.*TouchPad")||t.is("Firefox")&&t.version("Firefox")>=12||t.is("Chrome")&&t.is("AndroidOS")&&t.version("Android")>=4||t.is("Skyfire")&&t.version("Skyfire")>=4.1&&t.is("AndroidOS")&&t.version("Android")>=2.3||t.is("Opera")&&t.version("Opera Mobi")>11&&t.is("AndroidOS")||t.is("MeeGoOS")||t.is("Tizen")||t.is("Dolfin")&&t.version("Bada")>=2||(t.is("UC Browser")||t.is("Dolfin"))&&t.version("Android")>=2.3||t.match("Kindle Fire")||t.is("Kindle")&&t.version("Kindle")>=3||t.is("AndroidOS")&&t.is("NookTablet")||t.version("Chrome")>=11&&!e||t.version("Safari")>=5&&!e||t.version("Firefox")>=4&&!e||t.version("MSIE")>=7&&!e||t.version("Opera")>=10&&!e?"A":t.os("iOS")&&t.version("iPad")<4.3||t.os("iOS")&&t.version("iPhone")<3.1||t.os("iOS")&&t.version("iPod")<3.1||t.is("Blackberry")&&t.version("BlackBerry")>=5&&t.version("BlackBerry")<6||t.version("Opera Mini")>=5&&t.version("Opera Mini")<=6.5&&(t.version("Android")>=2.3||t.is("iOS"))||t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||t.version("Opera Mobi")>=11&&t.is("SymbianOS")?"B":(t.version("BlackBerry")<5||t.match("MSIEMobile|Windows CE.*Mobile")||t.version("Windows Mobile")<=5.2,"C")},s.detectOS=function(t){return s.findMatch(s.mobileDetectRules.oss0,t)||s.findMatch(s.mobileDetectRules.oss,t)},s.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},o.prototype={constructor:o,mobile:function(){return s.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return s.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return s.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===e&&(this._cache.userAgent=s.findMatch(s.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===e&&(this._cache.userAgents=s.findMatches(s.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===e&&(this._cache.os=s.detectOS(this.ua)),this._cache.os},version:function(t){return s.getVersion(t,this.ua)},versionStr:function(t){return s.getVersionStr(t,this.ua)},is:function(e){return i(this.userAgents(),e)||t(e,this.os())||t(e,this.phone())||t(e,this.tablet())||i(s.findMatches(s.mobileDetectRules.utils,this.ua),e)},match:function(t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(this.ua)},isPhoneSized:function(t){return o.isPhoneSized(t||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===e&&(this._cache.grade=s.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?o.isPhoneSized=function(t){return t<0?e:s.getDeviceSmallerSide()<=t}:o.isPhoneSized=function(){},o._impl=s,o.version="1.4.3 2018-09-08",o})}(function(e){return"undefined"!=typeof t&&t.exports?function(e){t.exports=e()}:i(14)}())},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,i){var n,r,o;!function(s,a){r=[t,i(16),i(18),i(19)],n=a,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))}(this,function(t,e,i,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}var h=r(e),c=r(i),u=r(n),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),d=function(t){function e(t,i){o(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.resolveOptions(i),n.listenClick(t),n}return a(e,t),f(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===p(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,u["default"])(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new h["default"]({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return l("action",t)}},{key:"defaultTarget",value:function(t){var e=l("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return l("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),e}(c["default"]);t.exports=d})},function(t,e,i){var n,r,o;!function(s,a){r=[t,i(17)],n=a,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o))}(this,function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},function(t,e){function i(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r),e=n.toString()}return e}t.exports=i},function(t,e){function i(){}i.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){function n(){r.off(t,n),e.apply(i,arguments)}var r=this;return n._=e,this.on(t,n,i)},emit:function(t){var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,r=i.length;for(n;n<r;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],r=[];if(n&&e)for(var o=0,s=n.length;o<s;o++)n[o].fn!==e&&n[o].fn._!==e&&r.push(n[o]);return r.length?i[t]=r:delete i[t],this}},t.exports=i},function(t,e,i){function n(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(i))throw new TypeError("Third argument must be a Function");if(a.node(t))return r(t,e,i);if(a.nodeList(t))return o(t,e,i);if(a.string(t))return s(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}function o(t,e,i){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,i)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,i)})}}}function s(t,e,i){return l(document.body,t,e,i)}var a=i(20),l=i(21);t.exports=n},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var i=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},function(t,e,i){function n(t,e,i,n,r){var s=o.apply(this,arguments);return t.addEventListener(i,s,r),{destroy:function(){t.removeEventListener(i,s,r)}}}function r(t,e,i,r,o){return"function"==typeof t.addEventListener?n.apply(null,arguments):"function"==typeof i?n.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return n(t,e,i,r,o)}))}function o(t,e,i,n){return function(i){i.delegateTarget=s(i.target,e),i.delegateTarget&&n.call(t,i)}}var s=i(22);t.exports=r},function(t,e){function i(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=i},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){__WEBPACK_AMD_DEFINE_RESULT__=function(){return e(t)}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(window||{},function(window){function ProjectInterface(){return{}}function roundValues(t){bm_rnd=t?Math.round:function(t){return t}}function roundTo2Decimals(t){return Math.round(1e4*t)/1e4}function roundTo3Decimals(t){return Math.round(100*t)/100}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin=t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible",t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function styleUnselectableDiv(t){t.style.userSelect="none",t.style.MozUserSelect="none",t.style.webkitUserSelect="none",t.style.oUserSelect="none"}function BMEnterFrameEvent(t,e,i,n){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,i,n){this.type=t,this.currentLoop=e,this.totalLoops=i,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function BMDestroyEvent(t,e){this.type=t,this.target=e}function _addEventListener(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)}function _removeEventListener(t,e){if(e){if(this._cbs[t]){for(var i=0,n=this._cbs[t].length;i<n;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,n-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}function _triggerEvent(t,e){if(this._cbs[t])for(var i=this._cbs[t].length,n=0;n<i;n++)this._cbs[t][n](e)}function randomString(t,e){void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var i,n="";for(i=t;i>0;--i)n+=e[Math.round(Math.random()*(e.length-1))];return n}function HSVtoRGB(t,e,i){var n,r,o,s,a,l,h,c;switch(1===arguments.length&&(e=t.s,i=t.v,t=t.h),s=Math.floor(6*t),a=6*t-s,l=i*(1-e),h=i*(1-a*e),c=i*(1-(1-a)*e),s%6){case 0:n=i,r=c,o=l;break;case 1:n=h,r=i,o=l;break;case 2:n=l,r=i,o=c;break;case 3:n=l,r=h,o=i;break;case 4:n=c,r=l,o=i;break;case 5:n=i,r=l,o=h}return[n,r,o]}function RGBtoHSV(t,e,i){1===arguments.length&&(e=t.g,i=t.b,t=t.r);var n,r=Math.max(t,e,i),o=Math.min(t,e,i),s=r-o,a=0===r?0:s/r,l=r/255;switch(r){case o:n=0;break;case t:n=e-i+s*(e<i?6:0),n/=6*s;break;case e:n=i-t+2*s,n/=6*s;break;case i:n=t-e+4*s,n/=6*s}return[n,a,l]}function addSaturationToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}function componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function fillToRgba(t,e){if(!cachedColors[t]){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);cachedColors[t]=parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)}return"rgba("+cachedColors[t]+","+e+")"}function RenderedFrame(t,e){this.tr=t,this.o=e}function iterateDynamicProperties(t){var e,i=this.dynamicProperties;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t)}function reversePath(t){var e,i,n=[],r=[],o=[],s={},a=0;t.c&&(n[0]=t.o[0],r[0]=t.i[0],o[0]=t.v[0],a=1),i=t.i.length;var l=i-1;for(e=a;e<i;e+=1)n.push(t.o[l]),r.push(t.i[l]),o.push(t.v[l]),l-=1;return s.i=n,s.o=r,s.v=o,s}function Matrix(){}function createElement(t,e,i){if(!e){var n=Object.create(t.prototype,i),r={};return n&&"[object Function]"===r.toString.call(n.init)&&n.init(),n}e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._parent=t.prototype}function extendPrototype(t,e){for(var i in t.prototype)t.prototype.hasOwnProperty(i)&&(e.prototype[i]=t.prototype[i])}function bezFunction(){function t(t,e,i,n,r,o){var s=t*n+e*r+i*o-r*n-o*t-i*e;return s>-1e-4&&s<1e-4}function e(e,i,n,r,o,s,a,l,h){if(0===n&&0===s&&0===h)return t(e,i,r,o,a,l);var c,u=Math.sqrt(Math.pow(r-e,2)+Math.pow(o-i,2)+Math.pow(s-n,2)),p=Math.sqrt(Math.pow(a-e,2)+Math.pow(l-i,2)+Math.pow(h-n,2)),f=Math.sqrt(Math.pow(a-r,2)+Math.pow(l-o,2)+Math.pow(h-s,2));return c=u>p?u>f?u-p-f:f-p-u:f>p?f-p-u:p-u-f,c>-1e-4&&c<1e-4}function i(t){var e,i=t.c,n=t.v,r=t.o,o=t.i,s=t._length,a=[],l=0;for(e=0;e<s-1;e+=1)a[e]=h(n[e],n[e+1],r[e],o[e+1]),l+=a[e].addedLength;return i&&(a[e]=h(n[e],n[0],r[e],o[0]),l+=a[e].addedLength),{lengths:a,totalLength:l}}function n(t){this.segmentLength=0,this.points=new Array(t)}function r(t,e){this.partialLength=t,this.point=e}function o(t,e){var i=e.segments,n=i.length,r=bm_floor((n-1)*t),o=t*e.addedLength,s=0;if(o==i[r].l)return i[r].p;for(var a=i[r].l>o?-1:1,l=!0;l;)i[r].l<=o&&i[r+1].l>o?(s=(o-i[r].l)/(i[r+1].l-i[r].l),l=!1):r+=a,(r<0||r>=n-1)&&(l=!1);return i[r].p+(i[r+1].p-i[r].p)*s}function s(){this.pt1=new Array(2),this.pt2=new Array(2),this.pt3=new Array(2),this.pt4=new Array(2)}function a(t,e,i,n,r,s){var a=o(r,s),l=1-a,h=Math.round(1e3*(l*l*l*t[0]+(a*l*l+l*a*l+l*l*a)*i[0]+(a*a*l+l*a*a+a*l*a)*n[0]+a*a*a*e[0]))/1e3,c=Math.round(1e3*(l*l*l*t[1]+(a*l*l+l*a*l+l*l*a)*i[1]+(a*a*l+l*a*a+a*l*a)*n[1]+a*a*a*e[1]))/1e3;return[h,c]}function l(t,e,i,n,r,a,l){var h=new s;r=r<0?0:r>1?1:r;var c=o(r,l);a=a>1?1:a;var u,p=o(a,l),f=t.length,d=1-c,m=1-p;for(u=0;u<f;u+=1)h.pt1[u]=Math.round(1e3*(d*d*d*t[u]+(c*d*d+d*c*d+d*d*c)*i[u]+(c*c*d+d*c*c+c*d*c)*n[u]+c*c*c*e[u]))/1e3,h.pt3[u]=Math.round(1e3*(d*d*m*t[u]+(c*d*m+d*c*m+d*d*p)*i[u]+(c*c*m+d*c*p+c*d*p)*n[u]+c*c*p*e[u]))/1e3,h.pt4[u]=Math.round(1e3*(d*m*m*t[u]+(c*m*m+d*p*m+d*m*p)*i[u]+(c*p*m+d*p*p+c*m*p)*n[u]+c*p*p*e[u]))/1e3,h.pt2[u]=Math.round(1e3*(m*m*m*t[u]+(p*m*m+m*p*m+m*m*p)*i[u]+(p*p*m+m*p*p+p*m*p)*n[u]+p*p*p*e[u]))/1e3;return h}var h=(Math,function(){function t(t,e){this.l=t,this.p=e}return function(e,i,n,r){var o,s,a,l,h,c,u=defaultCurveSegments,p=0,f=[],d=[],m={addedLength:0,segments:[]};for(a=n.length,o=0;o<u;o+=1){for(h=o/(u-1),c=0,s=0;s<a;s+=1)l=bm_pow(1-h,3)*e[s]+3*bm_pow(1-h,2)*h*n[s]+3*(1-h)*bm_pow(h,2)*r[s]+bm_pow(h,3)*i[s],f[s]=l,null!==d[s]&&(c+=bm_pow(f[s]-d[s],2)),d[s]=f[s];c&&(c=bm_sqrt(c),p+=c),m.segments.push(new t(p,h))}return m.addedLength=p,m}}()),c=function(){var e={};return function(i){var o=i.s,s=i.e,a=i.to,l=i.ti,h=(o.join("_")+"_"+s.join("_")+"_"+a.join("_")+"_"+l.join("_")).replace(/\./g,"p");if(e[h])return void(i.bezierData=e[h]);var c,u,p,f,d,m,g,y=defaultCurveSegments,v=0,_=null;2===o.length&&(o[0]!=s[0]||o[1]!=s[1])&&t(o[0],o[1],s[0],s[1],o[0]+a[0],o[1]+a[1])&&t(o[0],o[1],s[0],s[1],s[0]+l[0],s[1]+l[1])&&(y=2);var b=new n(y);for(p=a.length,c=0;c<y;c+=1){for(g=new Array(p),d=c/(y-1),m=0,u=0;u<p;u+=1)f=bm_pow(1-d,3)*o[u]+3*bm_pow(1-d,2)*d*(o[u]+a[u])+3*(1-d)*bm_pow(d,2)*(s[u]+l[u])+bm_pow(d,3)*s[u],g[u]=f,null!==_&&(m+=bm_pow(g[u]-_[u],2));m=bm_sqrt(m),v+=m,b.points[c]=new r(m,g),_=g}b.segmentLength=v,i.bezierData=b,e[h]=b}}();return{getBezierLength:h,getSegmentsLength:i,getNewSegment:l,getPointInSegment:a,buildBezierData:c,pointOnLine2D:t,pointOnLine3D:e}}function dataFunctionManager(){function t(r,o,a){var l,h,c,u,p,f,d,m,g=r.length;for(u=0;u<g;u+=1)if(l=r[u],"ks"in l&&!l.completed){if(l.completed=!0,l.tt&&(r[u-1].td=l.tt),h=[],c=-1,l.hasMask){var y=l.masksProperties;for(f=y.length,p=0;p<f;p+=1)if(y[p].pt.k.i)n(y[p].pt.k);else for(m=y[p].pt.k.length,d=0;d<m;d+=1)y[p].pt.k[d].s&&n(y[p].pt.k[d].s[0]),y[p].pt.k[d].e&&n(y[p].pt.k[d].e[0])}0===l.ty?(l.layers=e(l.refId,o),t(l.layers,o,a)):4===l.ty?i(l.shapes):5==l.ty&&s(l,a)}}function e(t,e){for(var i=0,n=e.length;i<n;){if(e[i].id===t)return e[i].layers.__used?JSON.parse(JSON.stringify(e[i].layers)):(e[i].layers.__used=!0,e[i].layers);i+=1}}function i(t){var e,r,o,s=t.length,a=!1;for(e=s-1;e>=0;e-=1)if("sh"==t[e].ty){if(t[e].ks.k.i)n(t[e].ks.k);else for(o=t[e].ks.k.length,r=0;r<o;r+=1)t[e].ks.k[r].s&&n(t[e].ks.k[r].s[0]),t[e].ks.k[r].e&&n(t[e].ks.k[r].e[0]);a=!0}else"gr"==t[e].ty&&i(t[e].it)}function n(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&void 0))}function o(e,i){e.__complete||(h(e),a(e),l(e),c(e),t(e.layers,e.assets,i),e.__complete=!0)}function s(t,e){0!==t.t.a.length||"m"in t.t.p||(t.singleShape=!0)}var a=function(){function t(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function e(e){var i,n=e.length;for(i=0;i<n;i+=1)5===e[i].ty&&t(e[i])}var i=[4,4,14];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,o=t.assets.length;for(n=0;n<o;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),l=function(){var t=[4,7,99];return function(e){if(e.chars&&!r(t,e.v)){var i,o,s,a,l,h=e.chars.length;for(i=0;i<h;i+=1)if(e.chars[i].data&&e.chars[i].data.shapes)for(l=e.chars[i].data.shapes[0].it,s=l.length,o=0;o<s;o+=1)a=l[o].ks.k,a.__converted||(n(l[o].ks.k),a.__converted=!0)}}}(),h=function(){function t(e){var i,n,r,o=e.length;for(i=0;i<o;i+=1)if("gr"===e[i].ty)t(e[i].it);else if("fl"===e[i].ty||"st"===e[i].ty)if(e[i].c.k&&e[i].c.k[0].i)for(r=e[i].c.k.length,n=0;n<r;n+=1)e[i].c.k[n].s&&(e[i].c.k[n].s[0]/=255,e[i].c.k[n].s[1]/=255,e[i].c.k[n].s[2]/=255,e[i].c.k[n].s[3]/=255),e[i].c.k[n].e&&(e[i].c.k[n].e[0]/=255,e[i].c.k[n].e[1]/=255,e[i].c.k[n].e[2]/=255,e[i].c.k[n].e[3]/=255);else e[i].c.k[0]/=255,e[i].c.k[1]/=255,e[i].c.k[2]/=255,e[i].c.k[3]/=255}function e(e){var i,n=e.length;for(i=0;i<n;i+=1)4===e[i].ty&&t(e[i].shapes)}var i=[4,1,9];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,o=t.assets.length;for(n=0;n<o;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),c=function(){function t(e){var i,n,r,o=e.length,s=!1;for(i=o-1;i>=0;i-=1)if("sh"==e[i].ty){if(e[i].ks.k.i)e[i].ks.k.c=e[i].closed;else for(r=e[i].ks.k.length,n=0;n<r;n+=1)e[i].ks.k[n].s&&(e[i].ks.k[n].s[0].c=e[i].closed),e[i].ks.k[n].e&&(e[i].ks.k[n].e[0].c=e[i].closed);s=!0}else"gr"==e[i].ty&&t(e[i].it)}function e(e){var i,n,r,o,s,a,l=e.length;for(n=0;n<l;n+=1){if(i=e[n],i.hasMask){var h=i.masksProperties;for(o=h.length,r=0;r<o;r+=1)if(h[r].pt.k.i)h[r].pt.k.c=h[r].cl;else for(a=h[r].pt.k.length,s=0;s<a;s+=1)h[r].pt.k[s].s&&(h[r].pt.k[s].s[0].c=h[r].cl),h[r].pt.k[s].e&&(h[r].pt.k[s].e[0].c=h[r].cl)}4===i.ty&&t(i.shapes)}}var i=[4,4,18];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,o=t.assets.length;for(n=0;n<o;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),u={};return u.completeData=o,u}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=Array.apply(null,{length:this._maxLength}),this.o=Array.apply(null,{length:this._maxLength}),this.i=Array.apply(null,{length:this._maxLength})}function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=Array.apply(null,{length:this._maxLength})}function TextAnimatorProperty(t,e,i){this.mdf=!1,this._firstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._dynamicProperties=[],this._textData=t,this._renderType=e,this._elem=i,this._animatorsData=Array.apply(null,{length:this._textData.a.length}),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1}function LetterProps(t,e,i,n,r,o){this.o=t,this.sw=e,this.sc=i,this.fc=n,this.m=r,this.p=o,this.mdf={o:!0,sw:!!e,sc:!!i,fc:!!n,m:!0,p:!0}}function TextProperty(t,e,i){this._frameId=-99999,this.pv="",this.v="",this.kf=!1,this.firstFrame=!0,this.mdf=!0,this.data=e,this.elem=t,this.keysIndex=-1,this.currentData={ascent:0,boxWidth:[0,0],f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,__complete:!1},this.searchProperty()?i.push(this):this.getValue(!0)}function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!e||e.hideOnTransparent!==!1,viewBoxOnly:e&&e.viewBoxOnly||!1,className:e&&e.className||""},this.globalData.renderConfig=this.renderConfig,this.elements=[],this.pendingElements=[],this.destroyed=!1}function MaskElement(t,e,i){this.dynamicProperties=[],this.data=t,this.element=e,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties,this.viewData=Array.apply(null,{length:this.masksProperties.length}),this.maskElement=null,this.firstFrame=!0;var n,r,o,s,a,l,h,c,u=this.globalData.defs,p=this.masksProperties.length,f=this.masksProperties,d=0,m=[],g=randomString(10),y="clipPath",v="clip-path";for(n=0;n<p;n++)if(("a"!==f[n].mode&&"n"!==f[n].mode||f[n].inv||100!==f[n].o.k)&&(y="mask",v="mask"),"s"!=f[n].mode&&"i"!=f[n].mode||0!=d?a=null:(a=document.createElementNS(svgNS,"rect"),a.setAttribute("fill","#ffffff"),a.setAttribute("width",this.element.comp.data.w),a.setAttribute("height",this.element.comp.data.h),m.push(a)),r=document.createElementNS(svgNS,"path"),"n"!=f[n].mode){if(d+=1,"s"==f[n].mode?r.setAttribute("fill","#000000"):r.setAttribute("fill","#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==f[n].x.k){y="mask",v="mask",c=PropertyFactory.getProp(this.element,f[n].x,0,null,this.dynamicProperties);var _="fi_"+randomString(10);l=document.createElementNS(svgNS,"filter"),l.setAttribute("id",_),h=document.createElementNS(svgNS,"feMorphology"),h.setAttribute("operator","dilate"),h.setAttribute("in","SourceGraphic"),h.setAttribute("radius","0"),l.appendChild(h),u.appendChild(l),"s"==f[n].mode?r.setAttribute("stroke","#000000"):r.setAttribute("stroke","#ffffff")}else h=null,c=null;if(this.storedData[n]={elem:r,x:c,expan:h,lastPath:"",lastOperator:"",filterId:_,lastRadius:0},"i"==f[n].mode){s=m.length;var b=document.createElementNS(svgNS,"g");for(o=0;o<s;o+=1)b.appendChild(m[o]);var T=document.createElementNS(svgNS,"mask");T.setAttribute("mask-type","alpha"),T.setAttribute("id",g+"_"+d),T.appendChild(r),u.appendChild(T),b.setAttribute("mask","url("+locationHref+"#"+g+"_"+d+")"),m.length=0,m.push(b)}else m.push(r);f[n].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[n]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,f[n].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,f[n],3,this.dynamicProperties,null)},a&&(this.viewData[n].invRect=a),this.viewData[n].prop.k||this.drawPath(f[n],this.viewData[n].prop.v,this.viewData[n])}else this.viewData[n]={op:PropertyFactory.getProp(this.element,f[n].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,f[n],3,this.dynamicProperties,null),elem:r},u.appendChild(r);for(this.maskElement=document.createElementNS(svgNS,y),p=m.length,n=0;n<p;n+=1)this.maskElement.appendChild(m[n]);this.maskElement.setAttribute("id",g),d>0&&this.element.maskedElement.setAttribute(v,"url("+locationHref+"#"+g+")"),u.appendChild(this.maskElement)}function BaseElement(){}function SVGBaseElement(t,e,i,n,r){this.globalData=i,this.comp=n,this.data=t,this.matteElement=null,this.transformedElement=null,this.isTransparent=!1,this.parentContainer=e,this.layerId=r?r.layerId:"ly_"+randomString(10),this.placeholder=r,this._sizeChanged=!1,this.init()}function IShapeElement(t,e,i,n,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,t,e,i,n,r)}function ITextElement(t,e,i,n){}function SVGTextElement(t,e,i,n,r){this.textSpans=[],this.renderType="svg",this._parent.constructor.call(this,t,e,i,n,r)}function SVGTintFilter(t,e){this.filterManager=e;var i=document.createElementNS(svgNS,"feColorMatrix");if(i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i),i=document.createElementNS(svgNS,"feColorMatrix"),i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),
i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result","f2"),t.appendChild(i),this.matrixFilter=i,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var n=document.createElementNS(svgNS,"feMerge");t.appendChild(n);var r;r=document.createElementNS(svgNS,"feMergeNode"),r.setAttribute("in","SourceGraphic"),n.appendChild(r),r=document.createElementNS(svgNS,"feMergeNode"),r.setAttribute("in","f2"),n.appendChild(r)}}function SVGFillFilter(t,e){this.filterManager=e;var i=document.createElementNS(svgNS,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(i),this.matrixFilter=i}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var i=document.createElementNS(svgNS,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i);var n=document.createElementNS(svgNS,"feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.matrixFilter=n;var r=document.createElementNS(svgNS,"feFuncR");r.setAttribute("type","table"),n.appendChild(r),this.feFuncR=r;var o=document.createElementNS(svgNS,"feFuncG");o.setAttribute("type","table"),n.appendChild(o),this.feFuncG=o;var s=document.createElementNS(svgNS,"feFuncB");s.setAttribute("type","table"),n.appendChild(s),this.feFuncB=s}function SVGProLevelsFilter(t,e){this.filterManager=e;var i=this.filterManager.effectElements,n=document.createElementNS(svgNS,"feComponentTransfer");(i[9].p.k||0!==i[9].p.v||i[10].p.k||1!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||0!==i[12].p.v||i[13].p.k||1!==i[13].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(i[16].p.k||0!==i[16].p.v||i[17].p.k||1!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||0!==i[19].p.v||i[20].p.k||1!==i[20].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(i[23].p.k||0!==i[23].p.v||i[24].p.k||1!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||0!==i[26].p.v||i[27].p.k||1!==i[27].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(i[30].p.k||0!==i[30].p.v||i[31].p.k||1!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||0!==i[33].p.v||i[34].p.k||1!==i[34].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),n=document.createElementNS(svgNS,"feComponentTransfer")),(i[2].p.k||0!==i[2].p.v||i[3].p.k||1!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||0!==i[5].p.v||i[6].p.k||1!==i[6].p.v)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","400%"),t.setAttribute("height","400%"),this.filterManager=e;var i=document.createElementNS(svgNS,"feGaussianBlur");i.setAttribute("in","SourceAlpha"),i.setAttribute("result","drop_shadow_1"),i.setAttribute("stdDeviation","0"),this.feGaussianBlur=i,t.appendChild(i);var n=document.createElementNS(svgNS,"feOffset");n.setAttribute("dx","25"),n.setAttribute("dy","0"),n.setAttribute("in","drop_shadow_1"),n.setAttribute("result","drop_shadow_2"),this.feOffset=n,t.appendChild(n);var r=document.createElementNS(svgNS,"feFlood");r.setAttribute("flood-color","#00ff00"),r.setAttribute("flood-opacity","1"),r.setAttribute("result","drop_shadow_3"),this.feFlood=r,t.appendChild(r);var o=document.createElementNS(svgNS,"feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),t.appendChild(o);var s=document.createElementNS(svgNS,"feMerge");t.appendChild(s);var a;a=document.createElementNS(svgNS,"feMergeNode"),s.appendChild(a),a=document.createElementNS(svgNS,"feMergeNode"),a.setAttribute("in","SourceGraphic"),this.feMergeNode=a,this.feMerge=s,this.originalNodeAdded=!1,s.appendChild(a)}function SVGMatte3Effect(t,e,i){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=i,i.matteElement=document.createElementNS(svgNS,"g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}function SVGEffects(t){var e,i=t.data.ef.length,n=randomString(10),r=filtersFactory.createFilter(n),o=0;this.filters=[];var s;for(e=0;e<i;e+=1)20===t.data.ef[e].ty?(o+=1,s=new SVGTintFilter(r,t.effects.effectElements[e]),this.filters.push(s)):21===t.data.ef[e].ty?(o+=1,s=new SVGFillFilter(r,t.effects.effectElements[e]),this.filters.push(s)):22===t.data.ef[e].ty?(s=new SVGStrokeEffect(t,t.effects.effectElements[e]),this.filters.push(s)):23===t.data.ef[e].ty?(o+=1,s=new SVGTritoneFilter(r,t.effects.effectElements[e]),this.filters.push(s)):24===t.data.ef[e].ty?(o+=1,s=new SVGProLevelsFilter(r,t.effects.effectElements[e]),this.filters.push(s)):25===t.data.ef[e].ty?(o+=1,s=new SVGDropShadowEffect(r,t.effects.effectElements[e]),this.filters.push(s)):28===t.data.ef[e].ty&&(s=new SVGMatte3Effect(r,t.effects.effectElements[e],t),this.filters.push(s));o&&(t.globalData.defs.appendChild(r),t.layerElement.setAttribute("filter","url("+locationHref+"#"+n+")"))}function ICompElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r),this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?Array.apply(null,{length:this.layers.length}):[],this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),this.data.xt?(this.layerElement=document.createElementNS(svgNS,"g"),this.buildAllItems()):i.progressiveLoad||this.buildAllItems()}function IImageElement(t,e,i,n,r){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i,n,r)}function ISolidElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r)}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",className:e&&e.className||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1};var i,n=15;for(i=0;i<n;i+=1)this.contextData.saved[i]=Array.apply(null,{length:16});this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={className:e&&e.className||""},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0}function CVBaseElement(t,e,i){this.globalData=i,this.data=t,this.comp=e,this.canvasContext=i.canvasContext,this.init()}function CVCompElement(t,e,i){this._parent.constructor.call(this,t,e,i);var n={};for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r]);n.renderer=this,n.compHeight=this.data.h,n.compWidth=this.data.w,this.renderConfig={clearCanvas:!0},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1},this.completeLayers=!1;var o,s=15;for(o=0;o<s;o+=1)this.contextData.saved[o]=Array.apply(null,{length:16});this.transformMat=new Matrix,this.parentGlobalData=this.globalData;var a=document.createElement("canvas");n.canvasContext=a.getContext("2d"),this.canvasContext=n.canvasContext,a.width=this.data.w,a.height=this.data.h,this.canvas=a,this.globalData=n,this.layers=t.layers,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),!this.data.xt&&i.progressiveLoad||this.buildAllItems()}function CVImageElement(t,e,i){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i),this.globalData.addPendingElement()}function CVMaskElement(t,e){this.data=t,this.element=e,this.dynamicProperties=[],this.masksProperties=this.data.masksProperties,this.viewData=Array.apply(null,{length:this.masksProperties.length});var i,n=this.masksProperties.length;for(i=0;i<n;i++)this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3,this.dynamicProperties,null)}function CVShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,t,e,i)}function CVSolidElement(t,e,i){this._parent.constructor.call(this,t,e,i)}function CVTextElement(t,e,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this._parent.constructor.call(this,t,e,i)}function HBaseElement(t,e,i,n,r){this.globalData=i,this.comp=n,this.data=t,this.matteElement=null,this.parentContainer=e,this.layerId=r?r.layerId:"ly_"+randomString(10),this.placeholder=r,this.init()}function HSolidElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r)}function HCompElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r),this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),this.data.hasMask&&(this.supports3d=!1),this.data.xt&&(this.layerElement=document.createElement("div")),this.buildAllItems()}function HShapeElement(t,e,i,n,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,t,e,i,n,r),this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,i,n,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this._parent.constructor.call(this,t,e,i,n,r)}function HImageElement(t,e,i,n,r){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i,n,r)}function HCameraElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r);var o=PropertyFactory.getProp;if(this.pe=o(this,t.pe,0,0,this.dynamicProperties),t.ks.p.s?(this.px=o(this,t.ks.p.x,1,0,this.dynamicProperties),this.py=o(this,t.ks.p.y,1,0,this.dynamicProperties),this.pz=o(this,t.ks.p.z,1,0,this.dynamicProperties)):this.p=o(this,t.ks.p,1,0,this.dynamicProperties),t.ks.a&&(this.a=o(this,t.ks.a,1,0,this.dynamicProperties)),t.ks.or.k.length&&t.ks.or.k[0].to){var s,a=t.ks.or.k.length;for(s=0;s<a;s+=1)t.ks.or.k[s].to=null,t.ks.or.k[s].ti=null}this.or=o(this,t.ks.or,1,degToRads,this.dynamicProperties),this.or.sh=!0,this.rx=o(this,t.ks.rx,0,degToRads,this.dynamicProperties),this.ry=o(this,t.ks.ry,0,degToRads,this.dynamicProperties),this.rz=o(this,t.ks.rz,0,degToRads,this.dynamicProperties),this.mat=new Matrix}function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function MaskIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function CheckboxEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(t,e,i){var n=t.ef;this.effectElements=[];var r,o,s=n.length;for(r=0;r<s;r++)o=new GroupEffect(n[r],e,i),this.effectElements.push(o)}function GroupEffect(t,e,i){this.dynamicProperties=[],this.init(t,e,this.dynamicProperties),this.dynamicProperties.length&&i.push(this)}function setLocationHref(t){locationHref=t}function play(t){animationManager.play(t)}function pause(t){animationManager.pause(t)}function togglePause(t){animationManager.togglePause(t)}function setSpeed(t,e){animationManager.setSpeed(t,e)}function setDirection(t,e){animationManager.setDirection(t,e)}function stop(t){animationManager.stop(t)}function moveFrame(t){animationManager.moveFrame(t)}function searchAnimations(){standalone===!0?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function registerAnimation(t){return animationManager.registerAnimation(t)}function resize(){animationManager.resize()}function start(){animationManager.start()}function goToAndStop(t,e,i){animationManager.goToAndStop(t,e,i)}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){return standalone===!0&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function destroy(t){return animationManager.destroy(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i++){var n=e[i].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}var svgNS="http://www.w3.org/2000/svg",locationHref="",subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};!function(){var t,e=Object.getOwnPropertyNames(Math),i=e.length;for(t=0;t<i;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){var e=typeof t;if("object"===e&&t.length){var i,n=Array.apply(null,{length:t.length}),r=t.length;for(i=0;i<r;i+=1)n[i]=Math.abs(t[i]);return n}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;roundValues(!1);var rgbToHex=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1==e.length?"0"+e:e;return function(t,e,n){return t<0&&(t=0),e<0&&(e=0),n<0&&(n=0),"#"+i[t]+i[e]+i[n]}}(),fillColorToString=function(){var t=[];return function(e,i){return void 0!==i&&(e[3]=i),t[e[0]]||(t[e[0]]={}),t[e[0]][e[1]]||(t[e[0]][e[1]]={}),t[e[0]][e[1]][e[2]]||(t[e[0]][e[1]][e[2]]={}),t[e[0]][e[1]][e[2]][e[3]]||(t[e[0]][e[1]][e[2]][e[3]]="rgba("+e.join(",")+")"),t[e[0]][e[1]][e[2]][e[3]]}}(),Matrix=function(){function t(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function e(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function i(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1)}function n(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1)}function r(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function o(t,e){return this._t(1,e,t,1,0,0)}function s(t,e){return this.shear(Math.tan(t),Math.tan(e))}function a(t,e){var i=Math.cos(e),n=Math.sin(e);return this._t(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1)._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function l(t,e,i){return i=isNaN(i)?1:i,1==t&&1==e&&1==i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function h(t,e,i,n,r,o,s,a,l,h,c,u,p,f,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=n,this.props[4]=r,this.props[5]=o,this.props[6]=s,this.props[7]=a,this.props[8]=l,this.props[9]=h,this.props[10]=c,this.props[11]=u,this.props[12]=p,this.props[13]=f,this.props[14]=d,this.props[15]=m,this}function c(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function u(t,e,i,n,r,o,s,a,l,h,c,u,p,f,d,m){if(1===t&&0===e&&0===i&&0===n&&0===r&&1===o&&0===s&&0===a&&0===l&&0===h&&1===c&&0===u)return 0===p&&0===f&&0===d||(this.props[12]=this.props[12]*t+this.props[13]*r+this.props[14]*l+this.props[15]*p,this.props[13]=this.props[12]*e+this.props[13]*o+this.props[14]*h+this.props[15]*f,this.props[14]=this.props[12]*i+this.props[13]*s+this.props[14]*c+this.props[15]*d,this.props[15]=this.props[12]*n+this.props[13]*a+this.props[14]*u+this.props[15]*m),this._identityCalculated=!1,this;var g=this.props[0],y=this.props[1],v=this.props[2],_=this.props[3],b=this.props[4],T=this.props[5],E=this.props[6],x=this.props[7],S=this.props[8],w=this.props[9],A=this.props[10],M=this.props[11],P=this.props[12],C=this.props[13],R=this.props[14],I=this.props[15];return this.props[0]=g*t+y*r+v*l+_*p,this.props[1]=g*e+y*o+v*h+_*f,this.props[2]=g*i+y*s+v*c+_*d,this.props[3]=g*n+y*a+v*u+_*m,this.props[4]=b*t+T*r+E*l+x*p,this.props[5]=b*e+T*o+E*h+x*f,this.props[6]=b*i+T*s+E*c+x*d,this.props[7]=b*n+T*a+E*u+x*m,this.props[8]=S*t+w*r+A*l+M*p,this.props[9]=S*e+w*o+A*h+M*f,this.props[10]=S*i+w*s+A*c+M*d,this.props[11]=S*n+w*a+A*u+M*m,this.props[12]=P*t+C*r+R*l+I*p,this.props[13]=P*e+C*o+R*h+I*f,this.props[14]=P*i+C*s+R*c+I*d,this.props[15]=P*n+C*a+R*u+I*m,this._identityCalculated=!1,this}function p(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function f(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function d(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function m(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function g(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function y(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function v(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function _(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],i=this.props[5]/e,n=-this.props[1]/e,r=-this.props[4]/e,o=this.props[0]/e,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*i+t[1]*r+s,t[0]*n+t[1]*o+a,0]}function b(t){var e,i=t.length,n=[];for(e=0;e<i;e+=1)n[e]=_(t[e]);return n}function T(t,e,i,n){if(n&&2===n){var r=point_pool.newPoint();return r[0]=t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],r[1]=t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],r}return[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function E(t,e){return this.isIdentity()?t+","+e:bm_rnd(t*this.props[0]+e*this.props[4]+this.props[12])+","+bm_rnd(t*this.props[1]+e*this.props[5]+this.props[13])}function x(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function S(){return isSafari?"matrix3d("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[2])+","+roundTo2Decimals(this.props[3])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[6])+","+roundTo2Decimals(this.props[7])+","+roundTo2Decimals(this.props[8])+","+roundTo2Decimals(this.props[9])+","+roundTo2Decimals(this.props[10])+","+roundTo2Decimals(this.props[11])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+","+roundTo2Decimals(this.props[14])+","+roundTo2Decimals(this.props[15])+")":(this.cssParts[1]=this.props.join(","),this.cssParts.join(""))}function w(){return"matrix("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+")"}function A(){return""+this.toArray()}return function(){this.reset=t,this.rotate=e,this.rotateX=i,this.rotateY=n,this.rotateZ=r,this.skew=s,this.skewFromAxis=a,this.shear=o,this.scale=l,this.setTransform=h,this.translate=c,this.transform=u,this.applyToPoint=m,this.applyToX=g,this.applyToY=y,this.applyToZ=v,this.applyToPointArray=T,this.applyToPointStringified=E,this.toArray=x,this.toCSS=S,this.to2dCSS=w,this.toString=A,this.clone=f,this.cloneFromProps=d,this.inversePoints=b,this.inversePoint=_,this._t=this.transform,this.isIdentity=p,this._identity=!0,this._identityCalculated=!1,this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.cssParts=["matrix3d(","",")"]}}();!function(t,e){function i(i,h,c){var f=[];h=1==h?{entropy:!0}:h||{};var v=s(o(h.entropy?[i,l(t)]:null==i?a():i,3),f),_=new n(f),b=function(){for(var t=_.g(p),e=m,i=0;t<g;)t=(t+i)*u,e*=u,i=_.g(1);for(;t>=y;)t/=2,e/=2,i>>>=1;return(t+i)/e};return b.int32=function(){return 0|_.g(4)},b.quick=function(){return _.g(4)/4294967296},b["double"]=b,s(l(_.S),t),(h.pass||c||function(t,i,n,o){return o&&(o.S&&r(o,_),t.state=function(){return r(_,{})}),n?(e[d]=t,i):t})(b,v,"global"in h?h.global:this==e,h.state)}function n(t){var e,i=t.length,n=this,r=0,o=n.i=n.j=0,s=n.S=[];for(i||(t=[i++]);r<u;)s[r]=r++;for(r=0;r<u;r++)s[r]=s[o=v&o+t[r%i]+(e=s[r])],s[o]=e;(n.g=function(t){for(var e,i=0,r=n.i,o=n.j,s=n.S;t--;)e=s[r=v&r+1],i=i*u+s[v&(s[r]=s[o=v&o+e])+(s[o]=e)];return n.i=r,n.j=o,i})(u)}function r(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function o(t,e){var i,n=[],r=typeof t;if(e&&"object"==r)for(i in t)try{n.push(o(t[i],e-1))}catch(s){}return n.length?n:"string"==r?t:t+"\0"}function s(t,e){for(var i,n=t+"",r=0;r<n.length;)e[v&r]=v&(i^=19*e[v&r])+n.charCodeAt(r++);return l(e)}function a(){try{if(h)return l(h.randomBytes(u));var e=new Uint8Array(u);return(c.crypto||c.msCrypto).getRandomValues(e),l(e)}catch(i){var n=c.navigator,r=n&&n.plugins;return[+new Date,c,r,c.screen,l(t)]}}function l(t){return String.fromCharCode.apply(0,t)}var h,c=this,u=256,p=6,f=52,d="random",m=e.pow(u,p),g=e.pow(2,f),y=2*g,v=u-1;e["seed"+d]=i,s(e.random(),t)}([],BMMath);var BezierFactory=function(){function t(t,e,i,n,r){var o=r||("bez_"+t+"_"+e+"_"+i+"_"+n).replace(/\./g,"p");if(c[o])return c[o];var s=new l([t,e,i,n]);return c[o]=s,s}function e(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function r(t,r,o){return((e(r,o)*t+i(r,o))*t+n(r))*t}function o(t,r,o){return 3*e(r,o)*t*t+2*i(r,o)*t+n(r)}function s(t,e,i,n,o){var s,a,l=0;do a=e+(i-e)/2,s=r(a,n,o)-t,s>0?i=a:e=a;while(Math.abs(s)>f&&++l<d);return a}function a(t,e,i,n){for(var s=0;s<u;++s){var a=o(e,i,n);if(0===a)return e;var l=r(e,i,n)-t;e-=l/a}return e}function l(t){this._p=t,this._mSampleValues=y?new Float32Array(m):new Array(m),this._precomputed=!1,this.get=this.get.bind(this)}var h={};h.getBezierEasing=t;var c={},u=4,p=.001,f=1e-7,d=10,m=11,g=1/(m-1),y="function"==typeof Float32Array;return l.prototype={get:function(t){var e=this._p[0],i=this._p[1],n=this._p[2],o=this._p[3];return this._precomputed||this._precompute(),e===i&&n===o?t:0===t?0:1===t?1:r(this._getTForX(t),i,o)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],n=this._p[3];this._precomputed=!0,t===e&&i===n||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<m;++i)this._mSampleValues[i]=r(i*g,t,e)},_getTForX:function(t){for(var e=this._p[0],i=this._p[2],n=this._mSampleValues,r=0,l=1,h=m-1;l!==h&&n[l]<=t;++l)r+=g;--l;var c=(t-n[l])/(n[l+1]-n[l]),u=r+c*g,f=o(u,e,i);return f>=p?a(t,u,e,i):0===f?u:s(t,r,r+g,e,i)}},h}();!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),o=setTimeout(function(){e(n+r)},r);return t=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction(),dataManager=dataFunctionManager(),FontManager=function(){function t(t,e){var i=document.createElement("span");i.style.fontFamily=e;var n=document.createElement("span");n.innerHTML="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(n),document.body.appendChild(i);var r=n.offsetWidth;return n.style.fontFamily=t+", "+e,{node:n,w:r,parent:i}}function e(){var t,i,n,r=this.fonts.length,o=r;for(t=0;t<r;t+=1)if(this.fonts[t].loaded)o-=1;else if("t"===this.fonts[t].fOrigin||2===this.fonts[t].origin){if(window.Typekit&&window.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{window.Typekit.load({async:!0,active:function(){this.typekitLoaded=2}.bind(this)})}catch(s){}}2===this.typekitLoaded&&(this.fonts[t].loaded=!0)}else"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(i=this.fonts[t].monoCase.node,n=this.fonts[t].monoCase.w,i.offsetWidth!==n?(o-=1,this.fonts[t].loaded=!0):(i=this.fonts[t].sansCase.node,n=this.fonts[t].sansCase.w,i.offsetWidth!==n&&(o-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==o&&Date.now()-this.initTime<l?setTimeout(e.bind(this),20):setTimeout(function(){this.loaded=!0}.bind(this),0)}function i(t,e){var i=document.createElementNS(svgNS,"text");i.style.fontSize="100px",i.style.fontFamily=e.fFamily,i.textContent="1",e.fClass?(i.style.fontFamily="inherit",i.className=e.fClass):i.style.fontFamily=e.fFamily,t.appendChild(i);var n=document.createElement("canvas").getContext("2d");return n.font="100px "+e.fFamily,n}function n(n,r){if(!n)return void(this.loaded=!0);if(this.chars)return this.loaded=!0,void(this.fonts=n.list);var o,s=n.list,a=s.length;for(o=0;o<a;o+=1){if(s[o].loaded=!1,s[o].monoCase=t(s[o].fFamily,"monospace"),s[o].sansCase=t(s[o].fFamily,"sans-serif"),s[o].fPath){if("p"===s[o].fOrigin||3===s[o].origin){var l=document.createElement("style");l.type="text/css",l.innerHTML="@font-face {font-family: "+s[o].fFamily+"; font-style: normal; src: url('"+s[o].fPath+"');}",r.appendChild(l)}else if("g"===s[o].fOrigin||1===s[o].origin){var h=document.createElement("link");h.type="text/css",h.rel="stylesheet",h.href=s[o].fPath,r.appendChild(h)}else if("t"===s[o].fOrigin||2===s[o].origin){var c=document.createElement("script");c.setAttribute("src",s[o].fPath),r.appendChild(c)}}else s[o].loaded=!0;s[o].helper=i(r,s[o]),this.fonts.push(s[o])}e.bind(this)()}function r(t){if(t){this.chars||(this.chars=[]);var e,i,n,r=t.length,o=this.chars.length;for(e=0;e<r;e+=1){for(i=0,n=!1;i<o;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(n=!0),i+=1;n||(this.chars.push(t[e]),o+=1)}}}function o(t,e,i){for(var n=0,r=this.chars.length;n<r;){if(this.chars[n].ch===t&&this.chars[n].style===e&&this.chars[n].fFamily===i)return this.chars[n];n+=1}}function s(t,e,i){var n=this.getFontByName(e),r=n.helper;return r.measureText(t).width*i/100}function a(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return"sans-serif"}var l=5e3,h=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.loaded=!1,this.initTime=Date.now()};return h.prototype.addChars=r,h.prototype.addFonts=n,h.prototype.getCharData=o,h.prototype.getFontByName=a,h.prototype.measureText=s,h}(),PropertyFactory=function(){function t(t,e,i,n){var r,o=this.offsetTime;i.constructor===Array&&(r=Array.apply(null,{length:i.length}));for(var s,a,l=e,h=this.keyframes.length-1,c=!0;c;){if(s=this.keyframes[l],a=this.keyframes[l+1],l==h-1&&t>=a.t-o){s.h&&(s=a),e=0;break}if(a.t-o>t){e=l;break}l<h-1?l+=1:(e=0,c=!1)}var u,p,f,d,m,g;if(s.to){s.bezierData||bez.buildBezierData(s);var y=s.bezierData;if(t>=a.t-o||t<s.t-o){var v=t>=a.t-o?y.points.length-1:0;for(p=y.points[v].point.length,u=0;u<p;u+=1)r[u]=y.points[v].point[u];n._lastBezierData=null}else{s.__fnct?g=s.__fnct:(g=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,s.__fnct=g),f=g((t-(s.t-o))/(a.t-o-(s.t-o)));var _,b=y.segmentLength*f,T=n.lastFrame<t&&n._lastBezierData===y?n._lastAddedLength:0;for(m=n.lastFrame<t&&n._lastBezierData===y?n._lastPoint:0,c=!0,d=y.points.length;c;){if(T+=y.points[m].partialLength,0===b||0===f||m==y.points.length-1){for(p=y.points[m].point.length,u=0;u<p;u+=1)r[u]=y.points[m].point[u];break}if(b>=T&&b<T+y.points[m+1].partialLength){for(_=(b-T)/y.points[m+1].partialLength,p=y.points[m].point.length,u=0;u<p;u+=1)r[u]=y.points[m].point[u]+(y.points[m+1].point[u]-y.points[m].point[u])*_;break}m<d-1?m+=1:c=!1}n._lastPoint=m,n._lastAddedLength=T-y.points[m].partialLength,n._lastBezierData=y}}else{var E,x,S,w,A;for(h=s.s.length,l=0;l<h;l+=1){if(1!==s.h&&(t>=a.t-o?f=1:t<s.t-o?f=0:(s.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[l]?g=s.__fnct[l]:(E=s.o.x[l]||s.o.x[0],x=s.o.y[l]||s.o.y[0],S=s.i.x[l]||s.i.x[0],w=s.i.y[l]||s.i.y[0],g=BezierFactory.getBezierEasing(E,x,S,w).get,s.__fnct[l]=g)):s.__fnct?g=s.__fnct:(E=s.o.x,x=s.o.y,S=s.i.x,w=s.i.y,g=BezierFactory.getBezierEasing(E,x,S,w).get,s.__fnct=g),f=g((t-(s.t-o))/(a.t-o-(s.t-o))))),this.sh&&1!==s.h){var M=s.s[l],P=s.e[l];M-P<-180?M+=360:M-P>180&&(M-=360),A=M+(P-M)*f}else A=1===s.h?s.s[l]:s.s[l]+(s.e[l]-s.s[l])*f;1===h?r=A:r[l]=A}}return{value:r,iterationIndex:e}}function e(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==c&&(this._caching.lastFrame>=i&&t>=i||this._caching.lastFrame<e&&t<e))){var n=this._caching.lastFrame<t?this._caching.lastIndex:0,r=this.interpolateValue(t,n,this.pv,this._caching);if(this._caching.lastIndex=r.iterationIndex,this.pv.constructor===Array)for(n=0;n<this.v.length;)this.pv[n]=r.value[n],this.v[n]=this.mult?this.pv[n]*this.mult:this.pv[n],
this.lastPValue[n]!==this.pv[n]&&(this.mdf=!0,this.lastPValue[n]=this.pv[n]),n+=1;else this.pv=r.value,this.v=this.mult?this.pv*this.mult:this.pv,this.lastPValue!=this.pv&&(this.mdf=!0,this.lastPValue=this.pv)}this._caching.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function i(){}function n(t,e,n){this.mult=n,this.v=n?e.k*n:e.k,this.pv=e.k,this.mdf=!1,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.getValue=i}function r(t,e,n){this.mult=n,this.data=e,this.mdf=!1,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1,this.v=Array.apply(null,{length:e.k.length}),this.pv=Array.apply(null,{length:e.k.length}),this.lastValue=Array.apply(null,{length:e.k.length});var r=Array.apply(null,{length:e.k.length});this.vel=r.map(function(){return 0});var o,s=e.k.length;for(o=0;o<s;o+=1)this.v[o]=n?e.k[o]*n:e.k[o],this.pv[o]=e.k[o];this.getValue=i}function o(i,n,r){this.keyframes=n.k,this.offsetTime=i.data.st,this.lastValue=-99999,this.lastPValue=-99999,this.frameId=-1,this._caching={lastFrame:c,lastIndex:0},this.k=!0,this.kf=!0,this.data=n,this.mult=r,this.elem=i,this.comp=i.comp,this.v=r?n.k[0].s[0]*r:n.k[0].s[0],this.pv=n.k[0].s[0],this.getValue=e,this.interpolateValue=t}function s(i,n,r){var o,s,a,l,h,u=n.k.length;for(o=0;o<u-1;o+=1)n.k[o].to&&n.k[o].s&&n.k[o].e&&(s=n.k[o].s,a=n.k[o].e,l=n.k[o].to,h=n.k[o].ti,(2===s.length&&(s[0]!==a[0]||s[1]!==a[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],s[0]+l[0],s[1]+l[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],a[0]+h[0],a[1]+h[1])||3===s.length&&(s[0]!==a[0]||s[1]!==a[1]||s[2]!==a[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],s[0]+l[0],s[1]+l[1],s[2]+l[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],a[0]+h[0],a[1]+h[1],a[2]+h[2]))&&(n.k[o].to=null,n.k[o].ti=null));this.keyframes=n.k,this.offsetTime=i.data.st,this.k=!0,this.kf=!0,this.mult=r,this.elem=i,this.comp=i.comp,this._caching={lastFrame:c,lastIndex:0},this.getValue=e,this.interpolateValue=t,this.frameId=-1,this.v=Array.apply(null,{length:n.k[0].s.length}),this.pv=Array.apply(null,{length:n.k[0].s.length}),this.lastValue=Array.apply(null,{length:n.k[0].s.length}),this.lastPValue=Array.apply(null,{length:n.k[0].s.length})}function a(t,e,i,a,l){var h;if(2===i)h=new u(t,e,l);else if(0===e.a)h=0===i?new n(t,e,a):new r(t,e,a);else if(1===e.a)h=0===i?new o(t,e,a):new s(t,e,a);else if(e.k.length)if("number"==typeof e.k[0])h=new r(t,e,a);else switch(i){case 0:h=new o(t,e,a);break;case 1:h=new s(t,e,a)}else h=new n(t,e,a);return h.k&&l.push(h),h}function l(t,e,i,n){return new f(t,e,i,n)}function h(t,e,i){return new d(t,e,i)}var c=-999999,u=function(){function t(){return this.p?ExpressionValue(this.p):[this.px.v,this.py.v,this.pz?this.pz.v:0]}function e(){return ExpressionValue(this.px)}function i(){return ExpressionValue(this.py)}function n(){return ExpressionValue(this.a)}function r(){return ExpressionValue(this.or)}function o(){return this.r?ExpressionValue(this.r,1/degToRads):ExpressionValue(this.rz,1/degToRads)}function s(){return ExpressionValue(this.s,100)}function a(){return ExpressionValue(this.o,100)}function l(){return ExpressionValue(this.sk)}function h(){return ExpressionValue(this.sa)}function c(t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function u(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);if(this.mdf){if(this.v.reset(),this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&this.p.keyframes&&this.p.getValueAtTime){var i,n;this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/this.elem.globalData.frameRate,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/this.elem.globalData.frameRate,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/this.elem.globalData.frameRate,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/this.elem.globalData.frameRate,0)):(i=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/this.elem.globalData.frameRate,this.p.offsetTime)),this.v.rotate(-Math.atan2(i[1]-n[1],i[0]-n[0]))}this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function p(){this.inverted=!0,this.iv=new Matrix,this.k||(this.data.p.s?this.iv.translate(this.px.v,this.py.v,-this.pz.v):this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]),this.r?this.iv.rotate(-this.r.v):this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.s&&this.iv.scale(this.s.v[0],this.s.v[1],1),this.a&&this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]))}function f(){}return function(d,m,g){this.elem=d,this.frameId=-1,this.type="transform",this.dynamicProperties=[],this.mdf=!1,this.data=m,this.getValue=u,this.applyToMatrix=c,this.setInverted=p,this.autoOrient=f,this.v=new Matrix,m.p.s?(this.px=PropertyFactory.getProp(d,m.p.x,0,0,this.dynamicProperties),this.py=PropertyFactory.getProp(d,m.p.y,0,0,this.dynamicProperties),m.p.z&&(this.pz=PropertyFactory.getProp(d,m.p.z,0,0,this.dynamicProperties))):this.p=PropertyFactory.getProp(d,m.p,1,0,this.dynamicProperties),m.r?this.r=PropertyFactory.getProp(d,m.r,0,degToRads,this.dynamicProperties):m.rx&&(this.rx=PropertyFactory.getProp(d,m.rx,0,degToRads,this.dynamicProperties),this.ry=PropertyFactory.getProp(d,m.ry,0,degToRads,this.dynamicProperties),this.rz=PropertyFactory.getProp(d,m.rz,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(d,m.or,1,degToRads,this.dynamicProperties),this.or.sh=!0),m.sk&&(this.sk=PropertyFactory.getProp(d,m.sk,0,degToRads,this.dynamicProperties),this.sa=PropertyFactory.getProp(d,m.sa,0,degToRads,this.dynamicProperties)),m.a&&(this.a=PropertyFactory.getProp(d,m.a,1,0,this.dynamicProperties)),m.s&&(this.s=PropertyFactory.getProp(d,m.s,1,.01,this.dynamicProperties)),m.o?this.o=PropertyFactory.getProp(d,m.o,0,.01,this.dynamicProperties):this.o={mdf:!1,v:1},this.dynamicProperties.length?g.push(this):(this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?m.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),Object.defineProperty(this,"position",{get:t}),Object.defineProperty(this,"xPosition",{get:e}),Object.defineProperty(this,"yPosition",{get:i}),Object.defineProperty(this,"orientation",{get:r}),Object.defineProperty(this,"anchorPoint",{get:n}),Object.defineProperty(this,"rotation",{get:o}),Object.defineProperty(this,"scale",{get:s}),Object.defineProperty(this,"opacity",{get:a}),Object.defineProperty(this,"skew",{get:l}),Object.defineProperty(this,"skewAxis",{get:h})}}(),p=function(){function t(t){if(this.prop.getValue(),this.cmdf=!1,this.omdf=!1,this.prop.mdf||t){var e,i,n,r=4*this.data.p;for(e=0;e<r;e+=1)i=e%4===0?100:255,n=Math.round(this.prop.v[e]*i),this.c[e]!==n&&(this.c[e]=n,this.cmdf=!0);if(this.o.length)for(r=this.prop.v.length,e=4*this.data.p;e<r;e+=1)i=e%2===0?100:1,n=e%2===0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==n&&(this.o[e-4*this.data.p]=n,this.omdf=!0)}}function e(e,i,n){this.prop=a(e,i.k,1,null,[]),this.data=i,this.k=this.prop.k,this.c=Array.apply(null,{length:4*i.p});var r=i.k.k[0].s?i.k.k[0].s.length-4*i.p:i.k.k.length-4*i.p;this.o=Array.apply(null,{length:r}),this.cmdf=!1,this.omdf=!1,this.getValue=t,this.prop.k&&n.push(this),this.getValue(!0)}return function(t,i,n){return new e(t,i,n)}}(),f=function(){function t(t){var e=0,i=this.dataProps.length;if(this.elem.globalData.frameId!==this.frameId||t){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId;e<i;){if(this.dataProps[e].p.mdf){this.mdf=!0;break}e+=1}if(this.mdf||t)for("svg"===this.renderer&&(this.dasharray=""),e=0;e<i;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dasharray+=" "+this.dataProps[e].p.v:this.dasharray[e]=this.dataProps[e].p.v:this.dashoffset=this.dataProps[e].p.v}}return function(e,i,n,r){this.elem=e,this.frameId=-1,this.dataProps=new Array(i.length),this.renderer=n,this.mdf=!1,this.k=!1,"svg"===this.renderer?this.dasharray="":this.dasharray=new Array(i.length-1),this.dashoffset=0;var o,s,a=i.length;for(o=0;o<a;o+=1)s=PropertyFactory.getProp(e,i[o].v,0,0,r),this.k=!!s.k||this.k,this.dataProps[o]={n:i[o].n,p:s};this.getValue=t,this.k?r.push(this):this.getValue(!0)}}(),d=function(){function t(t){if(this.mdf=t||!1,this.dynamicProperties.length){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}var n=this.elem.textProperty.currentData?this.elem.textProperty.currentData.l.length:0;t&&2===this.data.r&&(this.e.v=n);var r=2===this.data.r?1:100/n,o=this.o.v/r,s=this.s.v/r+o,a=this.e.v/r+o;if(s>a){var l=s;s=a,a=l}this.finalS=s,this.finalE=a}function e(t){var e=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,o=0,s=this.finalS,a=this.finalE,l=this.data.sh;if(2==l)o=a===s?t>=a?1:0:i(0,n(.5/(a-s)+(t-s)/(a-s),1)),o=e(o);else if(3==l)o=a===s?t>=a?0:1:1-i(0,n(.5/(a-s)+(t-s)/(a-s),1)),o=e(o);else if(4==l)a===s?o=0:(o=i(0,n(.5/(a-s)+(t-s)/(a-s),1)),o<.5?o*=2:o=1-2*(o-.5)),o=e(o);else if(5==l){if(a===s)o=0;else{var h=a-s;t=n(i(0,t+.5-s),a-s);var c=-h/2+t,u=h/2;o=Math.sqrt(1-c*c/(u*u))}o=e(o)}else 6==l?(a===s?o=0:(t=n(i(0,t+.5-s),a-s),o=(1+Math.cos(Math.PI+2*Math.PI*t/(a-s)))/2),o=e(o)):(t>=r(s)&&(o=t-s<0?1-(s-t):i(0,n(a-t,1))),o=e(o));return o*this.a.v}var i=Math.max,n=Math.min,r=Math.floor;return function(i,n,r){this.mdf=!1,this.k=!1,this.data=n,this.dynamicProperties=[],this.getValue=t,this.getMult=e,this.elem=i,this.comp=i.comp,this.finalS=0,this.finalE=0,this.s=PropertyFactory.getProp(i,n.s||{k:0},0,0,this.dynamicProperties),"e"in n?this.e=PropertyFactory.getProp(i,n.e,0,0,this.dynamicProperties):this.e={v:100},this.o=PropertyFactory.getProp(i,n.o||{k:0},0,0,this.dynamicProperties),this.xe=PropertyFactory.getProp(i,n.xe||{k:0},0,0,this.dynamicProperties),this.ne=PropertyFactory.getProp(i,n.ne||{k:0},0,0,this.dynamicProperties),this.a=PropertyFactory.getProp(i,n.a,0,.01,this.dynamicProperties),this.dynamicProperties.length?r.push(this):this.getValue()}}(),m={getProp:a,getDashProp:l,getTextSelectorProp:h,getGradientProp:p};return m}();ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=point_pool.newPoint(),this.o[i]=point_pool.newPoint(),this.i[i]=point_pool.newPoint(),i+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(Array.apply(null,{length:this._maxLength})),this.i=this.i.concat(Array.apply(null,{length:this._maxLength})),this.o=this.o.concat(Array.apply(null,{length:this._maxLength})),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,i,n,r){var o;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o}(!o[n]||o[n]&&!r)&&(o[n]=point_pool.newPoint()),o[n][0]=t,o[n][1]=e},ShapePath.prototype.setTripleAt=function(t,e,i,n,r,o,s,a){this.setXYAt(t,e,"v",s,a),this.setXYAt(i,n,"o",s,a),this.setXYAt(r,o,"i",s,a)};var ShapePropertyFactory=function(){function t(t,e,i,n){var r,o,s;if(t<this.keyframes[0].t-this.offsetTime)r=this.keyframes[0].s[0],s=!0,e=0;else if(t>=this.keyframes[this.keyframes.length-1].t-this.offsetTime)r=1===this.keyframes[this.keyframes.length-2].h?this.keyframes[this.keyframes.length-1].s[0]:this.keyframes[this.keyframes.length-2].e[0],s=!0;else{for(var a,l,h,c,u,p,f=e,d=this.keyframes.length-1,m=!0;m&&(a=this.keyframes[f],l=this.keyframes[f+1],!(l.t-this.offsetTime>t));)f<d-1?f+=1:m=!1;s=1===a.h,e=f;var g;if(!s){if(t>=l.t-this.offsetTime)g=1;else if(t<a.t-this.offsetTime)g=0;else{var y;a.__fnct?y=a.__fnct:(y=BezierFactory.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y).get,a.__fnct=y),g=y((t-(a.t-this.offsetTime))/(l.t-this.offsetTime-(a.t-this.offsetTime)))}o=a.e[0]}r=a.s[0]}c=i._length,p=r.i[0].length;var v,_=!1;for(h=0;h<c;h+=1)for(u=0;u<p;u+=1)s?(v=r.i[h][u],i.i[h][u]!==v&&(i.i[h][u]=v,n&&(this.pv.i[h][u]=v),_=!0),v=r.o[h][u],i.o[h][u]!==v&&(i.o[h][u]=v,n&&(this.pv.o[h][u]=v),_=!0),v=r.v[h][u],i.v[h][u]!==v&&(i.v[h][u]=v,n&&(this.pv.v[h][u]=v),_=!0)):(v=r.i[h][u]+(o.i[h][u]-r.i[h][u])*g,i.i[h][u]!==v&&(i.i[h][u]=v,n&&(this.pv.i[h][u]=v),_=!0),v=r.o[h][u]+(o.o[h][u]-r.o[h][u])*g,i.o[h][u]!==v&&(i.o[h][u]=v,n&&(this.pv.o[h][u]=v),_=!0),v=r.v[h][u]+(o.v[h][u]-r.v[h][u])*g,i.v[h][u]!==v&&(i.v[h][u]=v,n&&(this.pv.v[h][u]=v),_=!0));return _&&(i.c=r.c),{iterationIndex:e,hasModified:_}}function e(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(this.lastFrame===h||!(this.lastFrame<e&&t<e||this.lastFrame>i&&t>i)){var n=this.lastFrame<t?this._lastIndex:0,r=this.interpolateShape(t,n,this.v,!0);this._lastIndex=r.iterationIndex,this.mdf=r.hasModified,r.hasModified&&(this.paths=this.localShapeCollection)}this.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function i(){return this.v}function n(){this.paths=this.localShapeCollection,this.k||(this.mdf=!1)}function r(t,e,i){this.__shapeObject=1,this.comp=t.comp,this.k=!1,this.mdf=!1;var r=3===i?e.pt.k:e.ks.k;this.v=shape_pool.clone(r),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n}function o(t,e,i){this.__shapeObject=1,this.comp=t.comp,this.elem=t,this.offsetTime=t.data.st,this._lastIndex=0,this.keyframes=3===i?e.pt.k:e.ks.k,this.k=!0,this.kf=!0;var r=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newShape(),this.v.setPathData(this.keyframes[0].s[0].c,r),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=h,this.reset=n}function s(t,e,i,n){var s;if(3===i||4===i){var a=3===i?e.pt:e.ks,l=a.k;s=1===a.a||l.length?new o(t,e,i):new r(t,e,i)}else 5===i?s=new p(t,e):6===i?s=new c(t,e):7===i&&(s=new u(t,e));return s.k&&n.push(s),s}function a(){return r}function l(){return o}var h=-999999;r.prototype.interpolateShape=t,r.prototype.getValue=i,o.prototype.getValue=e,o.prototype.interpolateShape=t;var c=function(){function t(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2;3!==this.d?(this.v.v[0][0]=t,this.v.v[0][1]=e-r,this.v.v[1][0]=t+n,this.v.v[1][1]=e,this.v.v[2][0]=t,this.v.v[2][1]=e+r,this.v.v[3][0]=t-n,this.v.v[3][1]=e,this.v.i[0][0]=t-n*i,this.v.i[0][1]=e-r,this.v.i[1][0]=t+n,this.v.i[1][1]=e-r*i,this.v.i[2][0]=t+n*i,this.v.i[2][1]=e+r,this.v.i[3][0]=t-n,this.v.i[3][1]=e+r*i,this.v.o[0][0]=t+n*i,this.v.o[0][1]=e-r,this.v.o[1][0]=t+n,this.v.o[1][1]=e+r*i,this.v.o[2][0]=t-n*i,this.v.o[2][1]=e+r,this.v.o[3][0]=t-n,this.v.o[3][1]=e-r*i):(this.v.v[0][0]=t,this.v.v[0][1]=e-r,this.v.v[1][0]=t-n,this.v.v[1][1]=e,this.v.v[2][0]=t,this.v.v[2][1]=e+r,this.v.v[3][0]=t+n,this.v.v[3][1]=e,this.v.i[0][0]=t+n*i,this.v.i[0][1]=e-r,this.v.i[1][0]=t-n,this.v.i[1][1]=e-r*i,this.v.i[2][0]=t-n*i,this.v.i[2][1]=e+r,this.v.i[3][0]=t+n,this.v.i[3][1]=e+r*i,this.v.o[0][0]=t-n*i,this.v.o[0][1]=e-r,this.v.o[1][0]=t-n,this.v.o[1][1]=e+r*i,this.v.o[2][0]=t+n*i,this.v.o[2][1]=e+r,this.v.o[3][0]=t+n,this.v.o[3][1]=e-r*i)}function e(t){var e,i=this.dynamicProperties.length;if(this.elem.globalData.frameId!==this.frameId){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId,e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertEllToPath()}}var i=roundCorner;return function(i,r){this.v=shape_pool.newShape(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=r.d,this.dynamicProperties=[],this.elem=i,this.comp=i.comp,this.frameId=-1,this.mdf=!1,this.getValue=e,this.convertEllToPath=t,this.reset=n,this.p=PropertyFactory.getProp(i,r.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(i,r.s,1,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertEllToPath()}}(),u=function(){function t(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,n=this.or.v,r=this.os.v,o=2*Math.PI*n/(4*e),s=-Math.PI/2,a=3===this.data.d?-1:1;for(s+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var l=n*Math.cos(s),h=n*Math.sin(s),c=0===l&&0===h?0:h/Math.sqrt(l*l+h*h),u=0===l&&0===h?0:-l/Math.sqrt(l*l+h*h);l+=+this.p.v[0],h+=+this.p.v[1],this.v.setTripleAt(l,h,l-c*o*r*a,h-u*o*r*a,l+c*o*r*a,h+u*o*r*a,t,!0),s+=i*a}this.paths.length=0,this.paths[0]=this.v}function e(){var t,e,i,n,r=2*Math.floor(this.pt.v),o=2*Math.PI/r,s=!0,a=this.or.v,l=this.ir.v,h=this.os.v,c=this.is.v,u=2*Math.PI*a/(2*r),p=2*Math.PI*l/(2*r),f=-Math.PI/2;f+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<r;t+=1){e=s?a:l,i=s?h:c,n=s?u:p;var m=e*Math.cos(f),g=e*Math.sin(f),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),v=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-y*n*i*d,g-v*n*i*d,m+y*n*i*d,g+v*n*i*d,t,!0),s=!s,f+=o*d}}function i(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&this.convertToPath()}}return function(r,o){this.v=shape_pool.newShape(),this.v.setPathData(!0,0),this.elem=r,this.comp=r.comp,this.data=o,this.frameId=-1,this.d=o.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=i,this.reset=n,1===o.sy?(this.ir=PropertyFactory.getProp(r,o.ir,0,0,this.dynamicProperties),this.is=PropertyFactory.getProp(r,o.is,0,.01,this.dynamicProperties),this.convertToPath=e):this.convertToPath=t,this.pt=PropertyFactory.getProp(r,o.pt,0,0,this.dynamicProperties),this.p=PropertyFactory.getProp(r,o.p,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(r,o.r,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(r,o.or,0,0,this.dynamicProperties),this.os=PropertyFactory.getProp(r,o.os,0,.01,this.dynamicProperties),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:this.convertToPath()}}(),p=function(){function t(t){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertRectToPath()}}function e(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,r=bm_min(i,n,this.r.v),o=r*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-n+r,t+i,e-n+r,t+i,e-n+o,0,!0),this.v.setTripleAt(t+i,e+n-r,t+i,e+n-o,t+i,e+n-r,1,!0),0!==r?(this.v.setTripleAt(t+i-r,e+n,t+i-r,e+n,t+i-o,e+n,2,!0),this.v.setTripleAt(t-i+r,e+n,t-i+o,e+n,t-i+r,e+n,3,!0),this.v.setTripleAt(t-i,e+n-r,t-i,e+n-r,t-i,e+n-o,4,!0),this.v.setTripleAt(t-i,e-n+r,t-i,e-n+o,t-i,e-n+r,5,!0),this.v.setTripleAt(t-i+r,e-n,t-i+r,e-n,t-i+o,e-n,6,!0),this.v.setTripleAt(t+i-r,e-n,t+i-o,e-n,t+i-r,e-n,7,!0)):(this.v.setTripleAt(t-i,e+n,t-i+o,e+n,t-i,e+n,2),this.v.setTripleAt(t-i,e-n,t-i,e-n+o,t-i,e-n,3))):(this.v.setTripleAt(t+i,e-n+r,t+i,e-n+o,t+i,e-n+r,0,!0),0!==r?(this.v.setTripleAt(t+i-r,e-n,t+i-r,e-n,t+i-o,e-n,1,!0),this.v.setTripleAt(t-i+r,e-n,t-i+o,e-n,t-i+r,e-n,2,!0),this.v.setTripleAt(t-i,e-n+r,t-i,e-n+r,t-i,e-n+o,3,!0),this.v.setTripleAt(t-i,e+n-r,t-i,e+n-o,t-i,e+n-r,4,!0),this.v.setTripleAt(t-i+r,e+n,t-i+r,e+n,t-i+o,e+n,5,!0),this.v.setTripleAt(t+i-r,e+n,t+i-o,e+n,t+i-r,e+n,6,!0),this.v.setTripleAt(t+i,e+n-r,t+i,e+n-r,t+i,e+n-o,7,!0)):(this.v.setTripleAt(t-i,e-n,t-i+o,e-n,t-i,e-n,1,!0),this.v.setTripleAt(t-i,e+n,t-i,e+n-o,t-i,e+n,2,!0),this.v.setTripleAt(t+i,e+n,t+i-o,e+n,t+i,e+n,3,!0)))}return function(i,r){this.v=shape_pool.newShape(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=i,this.comp=i.comp,this.frameId=-1,this.d=r.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=t,this.convertRectToPath=e,this.reset=n,this.p=PropertyFactory.getProp(i,r.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(i,r.s,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(i,r.r,0,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertRectToPath()}}(),f={};return f.getShapeProp=s,f.getConstructorFunction=a,f.getKeyframedConstructorFunction=l,f}(),ShapeModifiers=function(){function t(t,e){n[t]||(n[t]=e)}function e(t,e,i,r){return new n[t](e,i,r)}var i={},n={};return i.registerModifier=t,i.getModifier=e,i}();ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){this.closed||(this.shapes.push({shape:t.sh,data:t,localShapeCollection:shapeCollection_pool.newShapeCollection()}),this.addShapeToModifier(t.sh))},ShapeModifier.prototype.init=function(t,e,i){this.elem=t,this.frameId=-1,this.shapes=[],this.dynamicProperties=[],this.mdf=!1,this.closed=!1,this.k=!1,this.comp=t.comp,this.initModifierProperties(t,e),this.dynamicProperties.length?(this.k=!0,i.push(this)):this.getValue(!0)},extendPrototype(ShapeModifier,TrimModifier),TrimModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);if(this.mdf||t){var n=this.o.v%360/360;n<0&&(n+=1);var r=this.s.v+n,o=this.e.v+n;if(r>o){var s=r;r=o,o=s}this.sValue=r,this.eValue=o,this.oValue=n}}},TrimModifier.prototype.initModifierProperties=function(t,e){this.sValue=0,this.eValue=0,this.oValue=0,this.getValue=this.processKeys,this.s=PropertyFactory.getProp(t,e.s,0,.01,this.dynamicProperties),this.e=PropertyFactory.getProp(t,e.e,0,.01,this.dynamicProperties),this.o=PropertyFactory.getProp(t,e.o,0,0,this.dynamicProperties),this.m=e.m,this.dynamicProperties.length||this.getValue(!0)},TrimModifier.prototype.calculateShapeEdges=function(t,e,i,n,r){var o=[];e<=1?o.push({s:t,e:e}):t>=1?o.push({s:t-1,e:e-1}):(o.push({s:t,e:1}),o.push({s:0,e:e-1}));var s,a,l=[],h=o.length;for(s=0;s<h;s+=1)if(a=o[s],a.e*r<n||a.s*r>n+i);else{var c,u;c=a.s*r<=n?0:(a.s*r-n)/i,u=a.e*r>=n+i?1:(a.e*r-n)/i,l.push([c,u])}return l.length||l.push([0,0]),l},TrimModifier.prototype.processShapes=function(t){var e,i,n,r,o,s,a,l=this.shapes.length,h=this.sValue,c=this.eValue,u=0;if(c===h)for(i=0;i<l;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape.mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection;else if(1===c&&0===h||0===c&&1===h){if(this.mdf)for(i=0;i<l;i+=1)this.shapes[i].shape.mdf=!0}else{var p,f,d=[];for(i=0;i<l;i+=1)if(p=this.shapes[i],p.shape.mdf||this.mdf||t||2===this.m){if(e=p.shape.paths,r=e._length,a=0,!p.shape.mdf&&p.pathsData)a=p.totalShapeLength;else{for(o=[],n=0;n<r;n+=1)s=bez.getSegmentsLength(e.shapes[n]),o.push(s),a+=s.totalLength;p.totalShapeLength=a,p.pathsData=o}u+=a,p.shape.mdf=!0}else p.shape.paths=p.localShapeCollection;var n,r,m=h,g=c,y=0;for(i=l-1;i>=0;i-=1)if(p=this.shapes[i],p.shape.mdf){if(f=p.localShapeCollection,f.releaseShapes(),2===this.m&&l>1){var v=this.calculateShapeEdges(h,c,p.totalShapeLength,y,u);y+=p.totalShapeLength}else v=[[m,g]];for(r=v.length,n=0;n<r;n+=1){m=v[n][0],g=v[n][1],d.length=0,g<=1?d.push({s:p.totalShapeLength*m,e:p.totalShapeLength*g}):m>=1?d.push({s:p.totalShapeLength*(m-1),e:p.totalShapeLength*(g-1)}):(d.push({s:p.totalShapeLength*m,e:p.totalShapeLength}),d.push({s:0,e:p.totalShapeLength*(g-1)}));var _=this.addShapes(p,d[0]);if(d[0].s!==d[0].e){if(d.length>1)if(p.shape.v.c){var b=_.pop();this.addPaths(_,f),_=this.addShapes(p,d[1],b)}else this.addPaths(_,f),_=this.addShapes(p,d[1]);this.addPaths(_,f)}}p.shape.paths=f}}this.dynamicProperties.length||(this.mdf=!1)},TrimModifier.prototype.addPaths=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)e.addShape(t[i])},TrimModifier.prototype.addSegment=function(t,e,i,n,r,o,s){r.setXYAt(e[0],e[1],"o",o),r.setXYAt(i[0],i[1],"i",o+1),s&&r.setXYAt(t[0],t[1],"v",o),r.setXYAt(n[0],n[1],"v",o+1)},TrimModifier.prototype.addShapes=function(t,e,i){var n,r,o,s,a,l,h,c,u=t.pathsData,p=t.shape.paths.shapes,f=t.shape.paths._length,d=0,m=[],g=!0;for(i?(a=i._length,c=i._length):(i=shape_pool.newShape(),a=0,c=0),m.push(i),n=0;n<f;n+=1){for(l=u[n].lengths,i.c=p[n].c,o=p[n].c?l.length:l.length+1,r=1;r<o;r+=1)if(s=l[r-1],d+s.addedLength<e.s)d+=s.addedLength,i.c=!1;else{if(d>e.e){i.c=!1;break}e.s<=d&&e.e>=d+s.addedLength?(this.addSegment(p[n].v[r-1],p[n].o[r-1],p[n].i[r],p[n].v[r],i,a,g),g=!1):(h=bez.getNewSegment(p[n].v[r-1],p[n].v[r],p[n].o[r-1],p[n].i[r],(e.s-d)/s.addedLength,(e.e-d)/s.addedLength,l[r-1]),this.addSegment(h.pt1,h.pt3,h.pt4,h.pt2,i,a,g),g=!1,i.c=!1),d+=s.addedLength,a+=1}if(p[n].c){if(s=l[r-1],d<=e.e){var y=l[r-1].addedLength;e.s<=d&&e.e>=d+y?(this.addSegment(p[n].v[r-1],p[n].o[r-1],p[n].i[0],p[n].v[0],i,a,g),g=!1):(h=bez.getNewSegment(p[n].v[r-1],p[n].v[0],p[n].o[r-1],p[n].i[0],(e.s-d)/y,(e.e-d)/y,l[r-1]),this.addSegment(h.pt1,h.pt3,h.pt4,h.pt2,i,a,g),g=!1,i.c=!1)}else i.c=!1;d+=s.addedLength,a+=1}if(i._length&&(i.setXYAt(i.v[c][0],i.v[c][1],"i",c),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),d>e.e)break;n<f-1&&(i=shape_pool.newShape(),g=!0,m.push(i),a=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype(ShapeModifier,RoundCornersModifier),RoundCornersModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}},RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},RoundCornersModifier.prototype.processPath=function(t,e){var i=shape_pool.newShape();i.c=t.c;var n,r,o,s,a,l,h,c,u,p,f,d,m,g=t._length,y=0;for(n=0;n<g;n+=1)r=t.v[n],s=t.o[n],o=t.i[n],r[0]===s[0]&&r[1]===s[1]&&r[0]===o[0]&&r[1]===o[1]?0!==n&&n!==g-1||t.c?(a=0===n?t.v[g-1]:t.v[n-1],l=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)),h=l?Math.min(l/2,e)/l:0,c=d=r[0]+(a[0]-r[0])*h,u=m=r[1]-(r[1]-a[1])*h,p=c-(c-r[0])*roundCorner,f=u-(u-r[1])*roundCorner,i.setTripleAt(c,u,p,f,d,m,y),y+=1,a=n===g-1?t.v[0]:t.v[n+1],l=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)),h=l?Math.min(l/2,e)/l:0,c=p=r[0]+(a[0]-r[0])*h,u=f=r[1]+(a[1]-r[1])*h,d=c-(c-r[0])*roundCorner,m=u-(u-r[1])*roundCorner,i.setTripleAt(c,u,p,f,d,m,y),y+=1):(i.setTripleAt(r[0],r[1],s[0],s[1],o[0],o[1],y),y+=1):(i.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],y),y+=1);return i},RoundCornersModifier.prototype.processShapes=function(t){var e,i,n,r,o=this.shapes.length,s=this.rd.v;if(0!==s){var a,l,h;for(i=0;i<o;i+=1){if(a=this.shapes[i],l=a.shape.paths,h=a.localShapeCollection,a.shape.mdf||this.mdf||t)for(h.releaseShapes(),a.shape.mdf=!0,e=a.shape.paths.shapes,r=a.shape.paths._length,n=0;n<r;n+=1)h.addShape(this.processPath(e[n],s));a.shape.paths=a.localShapeCollection}}this.dynamicProperties.length||(this.mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),RepeaterModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}},RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this.dynamicProperties),this.o=PropertyFactory.getProp(t,e.o,0,null,this.dynamicProperties),this.tr=PropertyFactory.getProp(t,e.tr,2,null,this.dynamicProperties),this.data=e,this.dynamicProperties.length||this.getValue(!0),this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,i,n,r,o){var s=o?-1:1,a=n.s.v[0]+(1-n.s.v[0])*(1-r),l=n.s.v[1]+(1-n.s.v[1])*(1-r);t.translate(n.p.v[0]*s*r,n.p.v[1]*s*r,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*s*r),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),i.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),i.scale(o?1/a:a,o?1/l:l),i.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(t,e,i,n,r){this.elem=t,this.arr=e,this.pos=i,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.dynamicProperties=[],this.frameId=-1,this.initModifierProperties(t,e[i]);for(var o=0;i>0;)i-=1,this._elements.unshift(e[i]),o+=1;this.dynamicProperties.length?(this.k=!0,r.push(this)):this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=(t.length,JSON.parse(JSON.stringify(t)));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},RepeaterModifier.prototype.processShapes=function(t){if(this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.dynamicProperties.length||t||(this.mdf=!1),this.mdf)){var e=Math.ceil(this.c.v);if(this._groups.length<e){for(;this._groups.length<e;){var i={it:this.cloneElements(this._elements),ty:"gr"};i.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:0,ix:6,k:0},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,i),this._groups.splice(0,0,i),this._currentCopies+=1}this.elem.reloadShapes()}var n,r,o=0;for(n=0;n<=this._groups.length-1;n+=1)r=o<e,this._groups[n]._render=r,this.changeGroupRender(this._groups[n].it,r),o+=1;this._currentCopies=e,this.elem.firstFrame=!0;
var s=this.o.v,a=s%1,l=s>0?Math.floor(s):Math.ceil(s),h=(this.tr.v.props,this.pMatrix.props),c=this.rMatrix.props,u=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var p=0;if(s>0){for(;p<l;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),p+=1;a&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,a,!1),p+=a)}else if(s<0){for(;p>l;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),p-=1;a&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-a,!0),p-=a)}n=1===this.data.m?0:this._currentCopies-1;var f=1===this.data.m?1:-1;for(o=this._currentCopies;o;){if(0!==p){(0!==n&&1===f||n!==this._currentCopies-1&&f===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),this.matrix.transform(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15]);var d,m=this.elemsData[n].it,g=m[m.length-1].transform.mProps.v.props,y=g.length;for(d=0;d<y;d+=1)g[d]=this.matrix.props[d];this.matrix.reset()}else{this.matrix.reset();var d,m=this.elemsData[n].it,g=m[m.length-1].transform.mProps.v.props,y=g.length;for(d=0;d<y;d+=1)g[d]=this.matrix.props[d]}p+=1,o-=1,n+=f}}},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(Array.apply(null,{length:this._maxLength})),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shape_pool.release(this.shapes[t]);this._length=0};var ImagePreloader=function(){function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&s&&s(null)}function e(t){var e="";if(this.assetsPath){var i=t.p;i.indexOf("images/")!==-1&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e}function i(e){var i=document.createElement("img");i.addEventListener("load",t.bind(this),!1),i.addEventListener("error",t.bind(this),!1),i.src=e}function n(t,n){s=n,this.totalAssets=t.length;var r;for(r=0;r<this.totalAssets;r+=1)t[r].layers||(i.bind(this)(e.bind(this)(t[r])),this.totalImages+=1)}function r(t){this.path=t||""}function o(t){this.assetsPath=t||""}var s;return function(){this.loadAssets=n,this.setAssetsPath=o,this.setPath=r,this.assetsPath="",this.path="",this.totalAssets=0,this.totalImages=0,this.loadedAssets=0}}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){function t(t){var e=document.createElementNS(svgNS,"filter");return e.setAttribute("id",t),e.setAttribute("filterUnits","objectBoundingBox"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e}function e(){var t=document.createElementNS(svgNS,"feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}var i={};return i.createFilter=t,i.createAlphaToLuminanceFilter=e,i}();TextAnimatorProperty.prototype.searchProperties=function(t){var e,i,n,r=this._textData.a.length,o=PropertyFactory.getProp;for(e=0;e<r;e+=1)n=this._textData.a[e],i={a:{},s:{}},"r"in n.a&&(i.a.r=o(this._elem,n.a.r,0,degToRads,this._dynamicProperties)),"rx"in n.a&&(i.a.rx=o(this._elem,n.a.rx,0,degToRads,this._dynamicProperties)),"ry"in n.a&&(i.a.ry=o(this._elem,n.a.ry,0,degToRads,this._dynamicProperties)),"sk"in n.a&&(i.a.sk=o(this._elem,n.a.sk,0,degToRads,this._dynamicProperties)),"sa"in n.a&&(i.a.sa=o(this._elem,n.a.sa,0,degToRads,this._dynamicProperties)),"s"in n.a&&(i.a.s=o(this._elem,n.a.s,1,.01,this._dynamicProperties)),"a"in n.a&&(i.a.a=o(this._elem,n.a.a,1,0,this._dynamicProperties)),"o"in n.a&&(i.a.o=o(this._elem,n.a.o,0,.01,this._dynamicProperties)),"p"in n.a&&(i.a.p=o(this._elem,n.a.p,1,0,this._dynamicProperties)),"sw"in n.a&&(i.a.sw=o(this._elem,n.a.sw,0,0,this._dynamicProperties)),"sc"in n.a&&(i.a.sc=o(this._elem,n.a.sc,1,0,this._dynamicProperties)),"fc"in n.a&&(i.a.fc=o(this._elem,n.a.fc,1,0,this._dynamicProperties)),"fh"in n.a&&(i.a.fh=o(this._elem,n.a.fh,0,0,this._dynamicProperties)),"fs"in n.a&&(i.a.fs=o(this._elem,n.a.fs,0,.01,this._dynamicProperties)),"fb"in n.a&&(i.a.fb=o(this._elem,n.a.fb,0,.01,this._dynamicProperties)),"t"in n.a&&(i.a.t=o(this._elem,n.a.t,0,0,this._dynamicProperties)),i.s=PropertyFactory.getTextSelectorProp(this._elem,n.s,this._dynamicProperties),i.s.t=n.s.t,this._animatorsData[e]=i;this._textData.p&&"m"in this._textData.p?(this._pathData={f:o(this._elem,this._textData.p.f,0,0,this._dynamicProperties),l:o(this._elem,this._textData.p.l,0,0,this._dynamicProperties),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=o(this._elem,this._textData.m.a,1,0,this._dynamicProperties),this._dynamicProperties.length&&t.push(this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this.mdf||this._firstFrame||e||this._hasMaskedPath&&this._pathData.m.mdf){this._firstFrame=!1;var i,n,r,o,s=this._moreOptions.alignment.v,a=this._animatorsData,l=this._textData,h=this.mHelper,c=this._renderType,u=this.renderedLetters.length,p=(this.data,t.l);if(this._hasMaskedPath){var f=this._pathData.m;if(!this._pathData.n||this._pathData.mdf){var d=f.v;this._pathData.r&&(d=reversePath(d));var m={tLength:0,segments:[]};o=d._length-1;var g,y=0;for(r=0;r<o;r+=1)g={s:d.v[r],e:d.v[r+1],to:[d.o[r][0]-d.v[r][0],d.o[r][1]-d.v[r][1]],ti:[d.i[r+1][0]-d.v[r+1][0],d.i[r+1][1]-d.v[r+1][1]]},bez.buildBezierData(g),m.tLength+=g.bezierData.segmentLength,m.segments.push(g),y+=g.bezierData.segmentLength;r=o,f.v.c&&(g={s:d.v[r],e:d.v[0],to:[d.o[r][0]-d.v[r][0],d.o[r][1]-d.v[r][1]],ti:[d.i[0][0]-d.v[0][0],d.i[0][1]-d.v[0][1]]},bez.buildBezierData(g),m.tLength+=g.bezierData.segmentLength,m.segments.push(g),y+=g.bezierData.segmentLength),this._pathData.pi=m}var v,_,b,m=this._pathData.pi,T=this._pathData.f.v,E=0,x=1,S=0,w=!0,A=m.segments;if(T<0&&f.v.c)for(m.tLength<Math.abs(T)&&(T=-Math.abs(T)%m.tLength),E=A.length-1,b=A[E].bezierData.points,x=b.length-1;T<0;)T+=b[x].partialLength,x-=1,x<0&&(E-=1,b=A[E].bezierData.points,x=b.length-1);b=A[E].bezierData.points,_=b[x-1],v=b[x];var M,P,C=v.partialLength}o=p.length,i=0,n=0;var R,I,O,N,L,D=1.2*t.s*.714,k=!0;if(N=a.length,e)for(O=0;O<N;O+=1)I=a[O].s,I.getValue(!0);var B,G,F,V,U,H,j,z,W,X,Y,q,Z,K=-1,$=T,Q=E,J=x,tt=-1,et=0,it="",nt=this.defaultPropsArray;for(r=0;r<o;r+=1){if(h.reset(),U=1,p[r].n)i=0,n+=t.yOffset,n+=k?1:0,T=$,k=!1,et=0,this._hasMaskedPath&&(E=Q,x=J,b=A[E].bezierData.points,_=b[x-1],v=b[x],C=v.partialLength,S=0),Z=X=q=it="",nt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(tt!==p[r].line){switch(t.j){case 1:T+=y-t.lineWidths[p[r].line];break;case 2:T+=(y-t.lineWidths[p[r].line])/2}tt=p[r].line}K!==p[r].ind&&(p[K]&&(T+=p[K].extra),T+=p[r].an/2,K=p[r].ind),T+=s[0]*p[r].an/200;var rt=0;for(O=0;O<N;O+=1)R=a[O].a,"p"in R&&(I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),rt+=B.length?R.p.v[0]*B[0]:R.p.v[0]*B),"a"in R&&(I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),rt+=B.length?R.a.v[0]*B[0]:R.a.v[0]*B);for(w=!0;w;)S+C>=T+rt||!b?(M=(T+rt-S)/v.partialLength,F=_.point[0]+(v.point[0]-_.point[0])*M,V=_.point[1]+(v.point[1]-_.point[1])*M,h.translate(-s[0]*p[r].an/200,-(s[1]*D/100)),w=!1):b&&(S+=v.partialLength,x+=1,x>=b.length&&(x=0,E+=1,A[E]?b=A[E].bezierData.points:f.v.c?(x=0,E=0,b=A[E].bezierData.points):(S-=v.partialLength,b=null)),b&&(_=v,v=b[x],C=v.partialLength));G=p[r].an/2-p[r].add,h.translate(-G,0,0)}else G=p[r].an/2-p[r].add,h.translate(-G,0,0),h.translate(-s[0]*p[r].an/200,-s[1]*D/100,0);for(et+=p[r].l/2,O=0;O<N;O+=1)R=a[O].a,"t"in R&&(I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),this._hasMaskedPath?T+=B.length?R.t*B[0]:R.t*B:i+=B.length?R.t.v*B[0]:R.t.v*B);for(et+=p[r].l/2,t.strokeWidthAnim&&(j=t.sw||0),t.strokeColorAnim&&(H=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(z=[t.fc[0],t.fc[1],t.fc[2]]),O=0;O<N;O+=1)R=a[O].a,"a"in R&&(I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),B.length?h.translate(-R.a.v[0]*B[0],-R.a.v[1]*B[1],R.a.v[2]*B[2]):h.translate(-R.a.v[0]*B,-R.a.v[1]*B,R.a.v[2]*B));for(O=0;O<N;O+=1)R=a[O].a,"s"in R&&(I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),B.length?h.scale(1+(R.s.v[0]-1)*B[0],1+(R.s.v[1]-1)*B[1],1):h.scale(1+(R.s.v[0]-1)*B,1+(R.s.v[1]-1)*B,1));for(O=0;O<N;O+=1){if(R=a[O].a,I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),"sk"in R&&(B.length?h.skewFromAxis(-R.sk.v*B[0],R.sa.v*B[1]):h.skewFromAxis(-R.sk.v*B,R.sa.v*B)),"r"in R&&(B.length?h.rotateZ(-R.r.v*B[2]):h.rotateZ(-R.r.v*B)),"ry"in R&&(B.length?h.rotateY(R.ry.v*B[1]):h.rotateY(R.ry.v*B)),"rx"in R&&(B.length?h.rotateX(R.rx.v*B[0]):h.rotateX(R.rx.v*B)),"o"in R&&(U+=B.length?(R.o.v*B[0]-U)*B[0]:(R.o.v*B-U)*B),t.strokeWidthAnim&&"sw"in R&&(j+=B.length?R.sw.v*B[0]:R.sw.v*B),t.strokeColorAnim&&"sc"in R)for(W=0;W<3;W+=1)B.length?H[W]=H[W]+(R.sc.v[W]-H[W])*B[0]:H[W]=H[W]+(R.sc.v[W]-H[W])*B;if(t.fillColorAnim&&t.fc){if("fc"in R)for(W=0;W<3;W+=1)B.length?z[W]=z[W]+(R.fc.v[W]-z[W])*B[0]:z[W]=z[W]+(R.fc.v[W]-z[W])*B;"fh"in R&&(z=B.length?addHueToRGB(z,R.fh.v*B[0]):addHueToRGB(z,R.fh.v*B)),"fs"in R&&(z=B.length?addSaturationToRGB(z,R.fs.v*B[0]):addSaturationToRGB(z,R.fs.v*B)),"fb"in R&&(z=B.length?addBrightnessToRGB(z,R.fb.v*B[0]):addBrightnessToRGB(z,R.fb.v*B))}}for(O=0;O<N;O+=1)R=a[O].a,"p"in R&&(I=a[O].s,B=I.getMult(p[r].anIndexes[O],l.a[O].s.totalChars),this._hasMaskedPath?B.length?h.translate(0,R.p.v[1]*B[0],-R.p.v[2]*B[1]):h.translate(0,R.p.v[1]*B,-R.p.v[2]*B):B.length?h.translate(R.p.v[0]*B[0],R.p.v[1]*B[1],-R.p.v[2]*B[2]):h.translate(R.p.v[0]*B,R.p.v[1]*B,-R.p.v[2]*B));if(t.strokeWidthAnim&&(X=j<0?0:j),t.strokeColorAnim&&(Y="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),t.fillColorAnim&&t.fc&&(q="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),this._hasMaskedPath){if(h.translate(0,-t.ls),h.translate(0,s[1]*D/100+n,0),l.p.p){P=(v.point[1]-_.point[1])/(v.point[0]-_.point[0]);var ot=180*Math.atan(P)/Math.PI;v.point[0]<_.point[0]&&(ot+=180),h.rotate(-ot*Math.PI/180)}h.translate(F,V,0),T-=s[0]*p[r].an/200,p[r+1]&&K!==p[r+1].ind&&(T+=p[r].an/2,T+=t.tr/1e3*t.s)}else{switch(h.translate(i,n,0),t.ps&&h.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:h.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[p[r].line]),0,0);break;case 2:h.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[p[r].line])/2,0,0)}h.translate(0,-t.ls),h.translate(G,0,0),h.translate(s[0]*p[r].an/200,s[1]*D/100,0),i+=p[r].l+t.tr/1e3*t.s}"html"===c?it=h.toCSS():"svg"===c?it=h.to2dCSS():nt=[h.props[0],h.props[1],h.props[2],h.props[3],h.props[4],h.props[5],h.props[6],h.props[7],h.props[8],h.props[9],h.props[10],h.props[11],h.props[12],h.props[13],h.props[14],h.props[15]],Z=U}u<=r?(L=new LetterProps(Z,X,Y,q,it,nt),this.renderedLetters.push(L),u+=1,this.lettersChangedFlag=!0):(L=this.renderedLetters[r],this.lettersChangedFlag=L.update(Z,X,Y,q,it,nt)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){if(this._elem.globalData.frameId!==this._frameId){this._frameId=this._elem.globalData.frameId;var t,e=this._dynamicProperties.length;for(this.mdf=!1,t=0;t<e;t+=1)this._dynamicProperties[t].getValue(),this.mdf=this._dynamicProperties[t].mdf||this.mdf}},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],LetterProps.prototype.update=function(t,e,i,n,r,o){this.mdf.o=!1,this.mdf.sw=!1,this.mdf.sc=!1,this.mdf.fc=!1,this.mdf.m=!1,this.mdf.p=!1;var s=!1;return this.o!==t&&(this.o=t,this.mdf.o=!0,s=!0),this.sw!==e&&(this.sw=e,this.mdf.sw=!0,s=!0),this.sc!==i&&(this.sc=i,this.mdf.sc=!0,s=!0),this.fc!==n&&(this.fc=n,this.mdf.fc=!0,s=!0),this.m!==r&&(this.m=r,this.mdf.m=!0,s=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,this.mdf.p=!0,s=!0),s},TextProperty.prototype.setCurrentData=function(t){var e=this.currentData;e.ascent=t.ascent,e.boxWidth=t.boxWidth?t.boxWidth:e.boxWidth,e.f=t.f,e.fStyle=t.fStyle,e.fWeight=t.fWeight,e.fc=t.fc,e.j=t.j,e.justifyOffset=t.justifyOffset,e.l=t.l,e.lh=t.lh,e.lineWidths=t.lineWidths,e.ls=t.ls,e.of=t.of,e.s=t.s,e.sc=t.sc,e.sw=t.sw,e.t=t.t,e.tr=t.tr,e.fillColorAnim=t.fillColorAnim||e.fillColorAnim,e.strokeColorAnim=t.strokeColorAnim||e.strokeColorAnim,e.strokeWidthAnim=t.strokeWidthAnim||e.strokeWidthAnim,e.yOffset=t.yOffset,e.__complete=!1},TextProperty.prototype.searchProperty=function(){return this.kf=this.data.d.k.length>1,this.kf},TextProperty.prototype.getValue=function(){this.mdf=!1;var t=this.elem.globalData.frameId;if(t!==this._frameId&&this.kf||this.firstFrame){for(var e,i=this.data.d.k,n=0,r=i.length;n<=r-1&&(e=i[n].s,!(n===r-1||i[n+1].t>t));)n+=1;this.keysIndex!==n&&(e.__complete||this.completeTextData(e),this.setCurrentData(e),this.mdf=!this.firstFrame,this.pv=this.v=this.currentData.t,this.keysIndex=n),this._frameId=t}},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,i,n,r,o,s,a,l=this.elem.globalData.fontManager,h=this.data,c=[],u=0,p=h.m.g,f=0,d=0,m=0,g=[],y=0,v=0,_=l.getFontByName(t.f),b=0,T=_.fStyle.split(" "),E="normal",x="normal";i=T.length;var S;for(e=0;e<i;e+=1)switch(S=T[e].toLowerCase()){case"italic":x="italic";break;case"bold":E="700";break;case"black":E="900";break;case"medium":E="500";break;case"regular":case"normal":E="400";case"light":case"thin":E="200"}t.fWeight=E,t.fStyle=x,i=t.t.length;var w=t.tr/1e3*t.s;if(t.sz){var A=t.sz[0],M=-1;for(e=0;e<i;e+=1)n=!1," "===t.t.charAt(e)?M=e:13===t.t.charCodeAt(e)&&(y=0,n=!0),l.chars?(a=l.getCharData(t.t.charAt(e),_.fStyle,_.fFamily),b=n?0:a.w*t.s/100):b=l.measureText(t.t.charAt(e),t.f,t.s),y+b>A&&" "!==t.t.charAt(e)?(M===-1?i+=1:e=M,t.t=t.t.substr(0,e)+"\r"+t.t.substr(e===M?e+1:e),M=-1,y=0):(y+=b,y+=w);i=t.t.length}y=-w,b=0;var P,C=0;for(e=0;e<i;e+=1)if(n=!1,P=t.t.charAt(e)," "===P?r="":13===P.charCodeAt(0)?(C=0,g.push(y),v=y>v?y:v,y=-2*w,r="",n=!0,m+=1):r=t.t.charAt(e),l.chars?(a=l.getCharData(P,_.fStyle,l.getFontByName(t.f).fFamily),b=n?0:a.w*t.s/100):b=l.measureText(r,t.f,t.s)," "===P?C+=b+w:(y+=b+w+C,C=0),c.push({l:b,an:b,add:f,n:n,anIndexes:[],val:r,line:m}),2==p){if(f+=b,""==r||""==r||e==i-1){for(""!=r&&""!=r||(f-=b);d<=e;)c[d].an=f,c[d].ind=u,c[d].extra=b,d+=1;u+=1,f=0}}else if(3==p){if(f+=b,""==r||e==i-1){for(""==r&&(f-=b);d<=e;)c[d].an=f,c[d].ind=u,c[d].extra=b,d+=1;f=0,u+=1}}else c[u].ind=u,c[u].extra=0,u+=1;if(t.l=c,v=y>v?y:v,g.push(y),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=v,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var R,I,O=h.a;s=O.length;var N,L,D=[];for(o=0;o<s;o+=1){for(R=O[o],R.a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),L=0,N=R.s.b,e=0;e<i;e+=1)I=c[e],I.anIndexes[o]=L,(1==N&&""!=I.val||2==N&&""!=I.val&&""!=I.val||3==N&&(I.n||""==I.val||e==i-1)||4==N&&(I.n||e==i-1))&&(1===R.s.rn&&D.push(L),L+=1);h.a[o].s.totalChars=L;var k,B=-1;if(1===R.s.rn)for(e=0;e<i;e+=1)I=c[e],B!=I.anIndexes[o]&&(B=I.anIndexes[o],k=D.splice(Math.floor(Math.random()*D.length),1)[0]),I.anIndexes[o]=k}t.yOffset=t.lh||1.2*t.s,t.ls=t.ls||0,t.ascent=_.ascent*t.s/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var i=this.data.d.k[e].s;i.__complete=!1,i.t=t.t,this.keysIndex=-1,this.firstFrame=!0,this.getValue()};var pooling=function(){function t(t){return t.concat(Array.apply(null,{length:t.length}))}return{"double":t}}(),point_pool=function(){function t(){var t;return n?(n-=1,t=o[n]):t=[.1,.1],t}function e(t){n===r&&(o=pooling["double"](o),r=2*r),o[n]=t,n+=1}var i={newPoint:t,release:e},n=0,r=8,o=Array.apply(null,{length:r});return i}(),shape_pool=function(){function t(){var t;return o?(o-=1,t=a[o]):t=new ShapePath,t}function e(t){o===s&&(a=pooling["double"](a),s=2*s);var e,i=t._length;for(e=0;e<i;e+=1)point_pool.release(t.v[e]),point_pool.release(t.i[e]),point_pool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1,a[o]=t,o+=1}function i(t,i){for(;i--;)e(t[i])}function n(e,i){var n,r=void 0===e._length?e.v.length:e._length,o=t();o.setLength(r),o.c=e.c;var s;for(n=0;n<r;n+=1)i?(s=i.applyToPointArray(e.v[n][0],e.v[n][1],0,2),o.setXYAt(s[0],s[1],"v",n),point_pool.release(s),s=i.applyToPointArray(e.o[n][0],e.o[n][1],0,2),o.setXYAt(s[0],s[1],"o",n),point_pool.release(s),s=i.applyToPointArray(e.i[n][0],e.i[n][1],0,2),o.setXYAt(s[0],s[1],"i",n),point_pool.release(s)):o.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],n);return o}var r={clone:n,newShape:t,release:e,releaseArray:i},o=0,s=4,a=Array.apply(null,{length:s});return r}(),shapeCollection_pool=function(){function t(){var t;return r?(r-=1,t=s[r]):t=new ShapeCollection,t}function e(t){var e,i=t._length;for(e=0;e<i;e+=1)shape_pool.release(t.shapes[e]);t._length=0,r===o&&(s=pooling["double"](s),o=2*o),s[r]=t,r+=1}function i(t,i){e(t),r===o&&(s=pooling["double"](s),o=2*o),s[r]=t,r+=1}var n={newShapeCollection:t,release:e,clone:i},r=0,o=4,s=Array.apply(null,{length:o});return n}();BaseRenderer.prototype.checkLayers=function(t){var e,i,n=this.layers.length;for(this.completeLayers=!0,e=n-1;e>=0;e--)this.elements[e]||(i=this.layers[e],i.ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 13:return this.createCamera(t);case 99:return null}return this.createBase(t)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,i,n=t.length,r=this.layers.length;for(e=0;e<n;e+=1)for(i=0;i<r;){if(this.layers[i].id==t[e].id){this.layers[i]=t[e];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,i){i=i||[];for(var n=this.elements,r=this.layers,o=0,s=r.length;o<s;)r[o].ind==e&&(n[o]&&n[o]!==!0?void 0!==r[o].parent?(i.push(n[o]),n[o]._isParent=!0,this.buildElementParenting(t,r[o].parent,i)):(i.push(n[o]),n[o]._isParent=!0,t.setHierarchy(i)):(this.buildItem(o),this.addPendingElement(t))),o+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},extendPrototype(BaseRenderer,SVGRenderer),SVGRenderer.prototype.createBase=function(t){return new SVGBaseElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new IShapeElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new ICompElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.layerElement=document.createElementNS(svgNS,"svg"),this.layerElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.layerElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.layerElement.setAttribute("width",t.w),this.layerElement.setAttribute("height",t.h),this.layerElement.style.width="100%",this.layerElement.style.height="100%"),this.renderConfig.className&&this.layerElement.setAttribute("class",this.renderConfig.className),this.layerElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.layerElement);var e=document.createElementNS(svgNS,"defs");this.globalData.defs=e,this.layerElement.appendChild(e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.frameId=0,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h},this.data=t,this.globalData.frameRate=t.fr;var i=document.createElementNS(svgNS,"clipPath"),n=document.createElementNS(svgNS,"rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var r="animationMask_"+randomString(10);i.setAttribute("id",r),i.appendChild(n);var o=document.createElementNS(svgNS,"g");o.setAttribute("clip-path","url("+locationHref+"#"+r+")"),this.layerElement.appendChild(o),e.appendChild(i),this.layerElement=o,this.layers=t.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.elements=Array.apply(null,{length:t.layers.length})},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);e[t]=i,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt&&(this.elements[t-1]&&this.elements[t-1]!==!0?i.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(i)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!=t&&!this.destroyed){null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t;var e,i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=i-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var n,r=0;r<e;)this.elements[r]&&this.elements[r]!==!0&&this.elements[r].getBaseElement()&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(i,n):this.layerElement.appendChild(i)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},SVGRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length,n=document.createElementNS(svgNS,"g");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.prepareFrame=function(){var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue()},MaskElement.prototype.renderFrame=function(t){var e,i=this.masksProperties.length;for(e=0;e<i;e++)if((this.viewData[e].prop.mdf||this.firstFrame)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op.mdf||this.firstFrame)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp.mdf||this.firstFrame)&&(this.viewData[e].invRect.setAttribute("x",-t.props[12]),this.viewData[e].invRect.setAttribute("y",-t.props[13])),this.storedData[e].x&&(this.storedData[e].x.mdf||this.firstFrame))){var n=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")),n.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}this.firstFrame=!1},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,i){var n,r,o=" M"+e.v[0][0]+","+e.v[0][1];for(r=e._length,n=1;n<r;n+=1)o+=" C"+bm_rnd(e.o[n-1][0])+","+bm_rnd(e.o[n-1][1])+" "+bm_rnd(e.i[n][0])+","+bm_rnd(e.i[n][1])+" "+bm_rnd(e.v[n][0])+","+bm_rnd(e.v[n][1]);e.c&&r>1&&(o+=" C"+bm_rnd(e.o[n-1][0])+","+bm_rnd(e.o[n-1][1])+" "+bm_rnd(e.i[0][0])+","+bm_rnd(e.i[0][1])+" "+bm_rnd(e.v[0][0])+","+bm_rnd(e.v[0][1])),i.lastPath!==o&&(i.elem&&(e.c?t.inv?i.elem.setAttribute("d",this.solidPath+o):i.elem.setAttribute("d",o):i.elem.setAttribute("d","")),i.lastPath=o)},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},BaseElement.prototype.checkMasks=function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&this.data.masksProperties[t].cl!==!1)return!0;t+=1}return!1},BaseElement.prototype.checkParenting=function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent)},BaseElement.prototype.prepareFrame=function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?this.isVisible!==!0&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!0,this.firstFrame=!0,this.data.hasMask&&(this.maskManager.firstFrame=!0)):this.isVisible!==!1&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!1);var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)(this.isVisible||this._isParent&&"transform"===this.dynamicProperties[e].type)&&(this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.elemMdf=!0,this.globalData.mdf=!0));return this.data.hasMask&&this.isVisible&&this.maskManager.prepareFrame(t*this.data.sr),this.currentFrameNum=t*this.data.sr,this.isVisible},BaseElement.prototype.globalToLocal=function(t){var e=[];e.push(this.finalTransform);for(var i=!0,n=this.comp;i;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):i=!1;var r,o,s=e.length;for(r=0;r<s;r+=1)o=e[r].mat.applyToPointArray(0,0,0),t=[t[0]-o[0],t[1]-o[1],0];return t},BaseElement.prototype.initExpressions=function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?this.layerInterface.shapeInterface=ShapeExpressionInterface.createShapeInterface(this.shapesData,this.itemsData,this.layerInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this))},BaseElement.prototype.setBlendMode=function(){var t="";switch(this.data.bm){case 1:t="multiply";break;case 2:t="screen";break;case 3:t="overlay";break;case 4:t="darken";break;case 5:t="lighten";break;case 6:t="color-dodge";break;case 7:t="color-burn";break;case 8:t="hard-light";break;case 9:t="soft-light";break;case 10:t="difference";break;case 11:t="exclusion";break;case 12:t="hue";break;case 13:t="saturation";break;case 14:t="color";break;case 15:t="luminosity"}var e=this.baseElement||this.layerElement;e.style["mix-blend-mode"]=t},BaseElement.prototype.init=function(){this.data.sr||(this.data.sr=1),this.dynamicProperties=this.dynamicProperties||[],this.data.ef&&(this.effects=new EffectsManager(this.data,this,this.dynamicProperties)),this.hidden=!1,this.firstFrame=!0,this.isVisible=!1,this._isParent=!1,this.currentFrameNum=-99999,this.lastNum=-99999,this.data.ks&&(this.finalTransform={mProp:PropertyFactory.getProp(this,this.data.ks,2,null,this.dynamicProperties),matMdf:!1,opMdf:!1,mat:new Matrix,opacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.finalTransform.op=this.finalTransform.mProp.o,this.transform=this.finalTransform.mProp,11!==this.data.ty&&this.createElements(),this.data.hasMask&&this.addMasks(this.data)),this.elemMdf=!1},BaseElement.prototype.getType=function(){return this.type},BaseElement.prototype.resetHierarchy=function(){this.hierarchy?this.hierarchy.length=0:this.hierarchy=[]},BaseElement.prototype.getHierarchy=function(){return this.hierarchy||(this.hierarchy=[]),this.hierarchy},BaseElement.prototype.setHierarchy=function(t){this.hierarchy=t},BaseElement.prototype.getLayerSize=function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}},BaseElement.prototype.hide=function(){},BaseElement.prototype.sourceRectAtTime=function(){return{top:0,left:0,width:100,height:100}},BaseElement.prototype.mHelper=new Matrix,createElement(BaseElement,SVGBaseElement),SVGBaseElement.prototype.createElements=function(){this.layerElement=document.createElementNS(svgNS,"g"),this.transformedElement=this.layerElement,this.data.hasMask&&(this.maskedElement=this.layerElement);var t=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var e=document.createElementNS(svgNS,"mask");if(e.setAttribute("id",this.layerId),e.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e),!featureSupport.maskType&&1==this.data.td){e.setAttribute("mask-type","luminance");var i=randomString(10),n=filtersFactory.createFilter(i);this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter());var r=document.createElementNS(svgNS,"g");r.appendChild(this.layerElement),t=r,e.appendChild(r),r.setAttribute("filter","url("+locationHref+"#"+i+")")}}else if(2==this.data.td){var o=document.createElementNS(svgNS,"mask");o.setAttribute("id",this.layerId),o.setAttribute("mask-type","alpha");var s=document.createElementNS(svgNS,"g");o.appendChild(s);var i=randomString(10),n=filtersFactory.createFilter(i),a=document.createElementNS(svgNS,"feColorMatrix");
a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1"),n.appendChild(a),this.globalData.defs.appendChild(n);var l=document.createElementNS(svgNS,"rect");if(l.setAttribute("width",this.comp.data.w),l.setAttribute("height",this.comp.data.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),s.setAttribute("filter","url("+locationHref+"#"+i+")"),s.appendChild(l),s.appendChild(this.layerElement),t=s,!featureSupport.maskType){o.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter());var r=document.createElementNS(svgNS,"g");s.appendChild(l),r.appendChild(this.layerElement),t=r,s.appendChild(r)}this.globalData.defs.appendChild(o)}}else(this.data.hasMask||this.data.tt)&&this.data.tt?(this.matteElement=document.createElementNS(svgNS,"g"),this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(!this.data.ln&&!this.data.cl||4!==this.data.ty&&0!==this.data.ty||(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)),0===this.data.ty){var h=document.createElementNS(svgNS,"clipPath"),c=document.createElementNS(svgNS,"path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var u="cp_"+randomString(8);if(h.setAttribute("id",u),h.appendChild(c),this.globalData.defs.appendChild(h),this.checkMasks()){var p=document.createElementNS(svgNS,"g");p.setAttribute("clip-path","url("+locationHref+"#"+u+")"),p.appendChild(this.layerElement),this.transformedElement=p,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+u+")")}0!==this.data.bm&&this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.data.ef&&(this.effectsManager=new SVGEffects(this)),this.checkParenting()},SVGBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,SVGBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty||this.data.hd||!this.isVisible)return!1;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.firstFrame||this.finalTransform.op.mdf,this.finalTransform.matMdf=this.firstFrame||this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var e,i=this.finalTransform.mat;if(this.hierarchy){var n=0,r=this.hierarchy.length;if(!this.finalTransform.matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp.mdf){this.finalTransform.matMdf=!0;break}n+=1}if(this.finalTransform.matMdf)for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else this.isVisible&&(i=this.finalTransform.mProp.v);return this.finalTransform.matMdf&&this.layerElement&&this.transformedElement.setAttribute("transform",i.to2dCSS()),this.finalTransform.opMdf&&this.layerElement&&(this.finalTransform.op.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.hidden&&this.isTransparent&&(this.isTransparent=!1,this.show()),this.transformedElement.setAttribute("opacity",this.finalTransform.op.v)),this.data.hasMask&&this.maskManager.renderFrame(i),this.effectsManager&&this.effectsManager.renderFrame(this.firstFrame),this.isVisible},SVGBaseElement.prototype.destroy=function(){this.layerElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&this.maskManager.destroy()},SVGBaseElement.prototype.getBaseElement=function(){return this.baseElement},SVGBaseElement.prototype.addMasks=function(t){this.maskManager=new MaskElement(t,this,this.globalData)},SVGBaseElement.prototype.setMatte=function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")},SVGBaseElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},SVGBaseElement.prototype.show=function(){this.isVisible&&!this.isTransparent&&(this.hidden=!1,this.layerElement.style.display="block")},createElement(SVGBaseElement,IShapeElement),IShapeElement.prototype.identityMatrix=new Matrix,IShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"square"},IShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},IShapeElement.prototype.searchProcessedElement=function(t){for(var e=this.processedElements.length;e;)if(e-=1,this.processedElements[e].elem===t)return this.processedElements[e].pos;return 0},IShapeElement.prototype.addProcessedElement=function(t,e){for(var i=this.processedElements.length;i;)if(i-=1,this.processedElements[i].elem===t){this.processedElements[i].pos=e;break}0===i&&this.processedElements.push({elem:t,pos:e})},IShapeElement.prototype.buildExpressionInterface=function(){},IShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0),this.data.hd&&!this.data.td||styleUnselectableDiv(this.layerElement)},IShapeElement.prototype.setGradientData=function(t,e,i){var n,r="gr_"+randomString(10);n=1===e.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var o,s,a,l=[];for(a=4*e.g.p,s=0;s<a;s+=4)o=document.createElementNS(svgNS,"stop"),n.appendChild(o),l.push(o);t.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+r+")"),this.globalData.defs.appendChild(n),i.gf=n,i.cst=l},IShapeElement.prototype.setGradientOpacity=function(t,e,i){if(t.g.k.k[0].s&&t.g.k.k[0].s.length>4*t.g.p||t.g.k.k.length>4*t.g.p){var n,r,o,s,a=document.createElementNS(svgNS,"mask"),l=document.createElementNS(svgNS,"path");a.appendChild(l);var h="op_"+randomString(10),c="mk_"+randomString(10);a.setAttribute("id",c),n=1===t.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),n.setAttribute("id",h),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse"),s=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var u=[];for(o=4*t.g.p;o<s;o+=2)r=document.createElementNS(svgNS,"stop"),r.setAttribute("stop-color","rgb(255,255,255)"),n.appendChild(r),u.push(r);return l.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+h+")"),this.globalData.defs.appendChild(n),this.globalData.defs.appendChild(a),e.of=n,e.ost=u,i.msElem=l,c}},IShapeElement.prototype.createStyleElement=function(t,e,i){var n={},r={data:t,type:t.ty,d:"",ld:"",lvl:e,mdf:!1,closed:!1},o=document.createElementNS(svgNS,"path");if(n.o=PropertyFactory.getProp(this,t.o,0,.01,i),("st"==t.ty||"gs"==t.ty)&&(o.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round"),o.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round"),o.setAttribute("fill-opacity","0"),1==t.lj&&o.setAttribute("stroke-miterlimit",t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,i),t.d)){var s=PropertyFactory.getDashProp(this,t.d,"svg",i);s.k||(o.setAttribute("stroke-dasharray",s.dasharray),o.setAttribute("stroke-dashoffset",s.dashoffset)),n.d=s}if("fl"==t.ty||"st"==t.ty)n.c=PropertyFactory.getProp(this,t.c,1,255,i);else{n.g=PropertyFactory.getGradientProp(this,t.g,i),2==t.t&&(n.h=PropertyFactory.getProp(this,t.h,0,.01,i),n.a=PropertyFactory.getProp(this,t.a,0,degToRads,i)),n.s=PropertyFactory.getProp(this,t.s,1,null,i),n.e=PropertyFactory.getProp(this,t.e,1,null,i),this.setGradientData(o,t,n,r);var a=this.setGradientOpacity(t,n,r);a&&o.setAttribute("mask","url(#"+a+")")}return n.elem=o,2===t.r&&o.setAttribute("fill-rule","evenodd"),t.ln&&o.setAttribute("id",t.ln),t.cl&&o.setAttribute("class",t.cl),r.pElem=o,this.stylesList.push(r),n.style=r,n},IShapeElement.prototype.createGroupElement=function(t){var e={it:[],prevViewData:[]},i=document.createElementNS(svgNS,"g");return e.gr=i,t.ln&&e.gr.setAttribute("id",t.ln),e},IShapeElement.prototype.createTransformElement=function(t,e){var i={transform:{op:PropertyFactory.getProp(this,t.o,0,.01,e),mProps:PropertyFactory.getProp(this,t,2,null,e)},elements:[]};return i},IShapeElement.prototype.createShapeElement=function(t,e,i,n){var r={elements:[],caches:[],styles:[],transformers:e,lStr:""},o=4;return"rc"==t.ty?o=5:"el"==t.ty?o=6:"sr"==t.ty&&(o=7),r.sh=ShapePropertyFactory.getShapeProp(this,t,o,n),r.lvl=i,this.shapes.push(r.sh),this.addShapeToModifiers(r),r};var cont=0;IShapeElement.prototype.setElementStyles=function(){var t,e=this.stylesList.length,i=[];for(t=0;t<e;t+=1)this.stylesList[t].closed||i.push(this.stylesList[t]);return i},IShapeElement.prototype.reloadShapes=function(){this.firstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0);var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},IShapeElement.prototype.searchShapes=function(t,e,i,n,r,o,s,a){var l,h,c,u,p,f,d=[].concat(s),m=t.length-1,g=[],y=[];for(l=m;l>=0;l-=1){if(f=this.searchProcessedElement(t[l]),f?e[l]=i[f-1]:t[l]._render=a,"fl"==t[l].ty||"st"==t[l].ty||"gf"==t[l].ty||"gs"==t[l].ty)f?e[l].style.closed=!1:e[l]=this.createStyleElement(t[l],o,r),t[l]._render&&n.appendChild(e[l].elem),g.push(e[l].style);else if("gr"==t[l].ty){if(f)for(c=e[l].it.length,h=0;h<c;h+=1)e[l].prevViewData[h]=e[l].it[h];else e[l]=this.createGroupElement(t[l]);this.searchShapes(t[l].it,e[l].it,e[l].prevViewData,e[l].gr,r,o+1,d,a),t[l]._render&&n.appendChild(e[l].gr)}else"tr"==t[l].ty?(f||(e[l]=this.createTransformElement(t[l],r)),u=e[l].transform,d.push(u)):"sh"==t[l].ty||"rc"==t[l].ty||"el"==t[l].ty||"sr"==t[l].ty?(f||(e[l]=this.createShapeElement(t[l],d,o,r)),e[l].elements=this.setElementStyles()):"tm"==t[l].ty||"rd"==t[l].ty||"ms"==t[l].ty?(f?(p=e[l],p.closed=!1):(p=ShapeModifiers.getModifier(t[l].ty),p.init(this,t[l],r),e[l]=p,this.shapeModifiers.push(p)),y.push(p)):"rp"==t[l].ty&&(f?(p=e[l],p.closed=!0):(p=ShapeModifiers.getModifier(t[l].ty),e[l]=p,p.init(this,t,l,e,r),this.shapeModifiers.push(p),a=!1),y.push(p));this.addProcessedElement(t[l],l+1)}for(m=g.length,l=0;l<m;l+=1)g[l].closed=!0;for(m=y.length,l=0;l<m;l+=1)y[l].closed=!0},IShapeElement.prototype.addShapeToModifiers=function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},IShapeElement.prototype.renderModifiers=function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].reset();for(e=this.shapeModifiers.length,t=e-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this.firstFrame)}},IShapeElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(e===!1)return void this.hide();this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers();var i,n=this.stylesList.length;for(i=0;i<n;i+=1)this.stylesList[i].d="",this.stylesList[i].mdf=!1;for(this.renderShape(this.shapesData,this.itemsData,null),i=0;i<n;i+=1)"0"===this.stylesList[i].ld&&(this.stylesList[i].ld="1",this.stylesList[i].pElem.style.display="block"),(this.stylesList[i].mdf||this.firstFrame)&&(this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].msElem&&this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d));this.firstFrame&&(this.firstFrame=!1)},IShapeElement.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";var t,e=this.stylesList.length;for(t=e-1;t>=0;t-=1)"0"!==this.stylesList[t].ld&&(this.stylesList[t].ld="0",this.stylesList[t].pElem.style.display="none",this.stylesList[t].pElem.parentNode&&(this.stylesList[t].parent=this.stylesList[t].pElem.parentNode));this.hidden=!0}},IShapeElement.prototype.renderShape=function(t,e,i){var n,r,o=t.length-1;for(n=o;n>=0;n-=1)r=t[n].ty,"tr"==r?((this.firstFrame||e[n].transform.op.mdf&&i)&&i.setAttribute("opacity",e[n].transform.op.v),(this.firstFrame||e[n].transform.mProps.mdf&&i)&&i.setAttribute("transform",e[n].transform.mProps.v.to2dCSS())):"sh"==r||"el"==r||"rc"==r||"sr"==r?this.renderPath(t[n],e[n]):"fl"==r?this.renderFill(t[n],e[n]):"gf"==r?this.renderGradient(t[n],e[n]):"gs"==r?(this.renderGradient(t[n],e[n]),this.renderStroke(t[n],e[n])):"st"==r?this.renderStroke(t[n],e[n]):"gr"==r&&this.renderShape(t[n].it,e[n].it,e[n].gr)},IShapeElement.prototype.buildShapeString=function(t,e,i,n){var r,o="";for(r=1;r<e;r+=1)1===r&&(o+=" M"+n.applyToPointStringified(t.v[0][0],t.v[0][1])),o+=" C"+n.applyToPointStringified(t.o[r-1][0],t.o[r-1][1])+" "+n.applyToPointStringified(t.i[r][0],t.i[r][1])+" "+n.applyToPointStringified(t.v[r][0],t.v[r][1]);return 1===e&&(o+=" M"+n.applyToPointStringified(t.v[0][0],t.v[0][1])),i&&e&&(o+=" C"+n.applyToPointStringified(t.o[r-1][0],t.o[r-1][1])+" "+n.applyToPointStringified(t.i[0][0],t.i[0][1])+" "+n.applyToPointStringified(t.v[0][0],t.v[0][1]),o+="z"),o},IShapeElement.prototype.renderPath=function(t,e){var i,n,r,o,s,a,l=e.elements.length,h=e.lvl;if(t._render)for(a=0;a<l;a+=1)if(e.elements[a].data._render){o=e.sh.mdf||this.firstFrame,r="M0 0";var c=e.sh.paths;if(n=c._length,e.elements[a].lvl<h){for(var u,p=this.mHelper.reset(),f=h-e.elements[a].lvl,d=e.transformers.length-1;f>0;)o=e.transformers[d].mProps.mdf||o,u=e.transformers[d].mProps.v.props,p.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),f--,d--;if(o){for(i=0;i<n;i+=1)s=c.shapes[i],s&&s._length&&(r+=this.buildShapeString(s,s._length,s.c,p));e.caches[a]=r}else r=e.caches[a]}else if(o){for(i=0;i<n;i+=1)s=c.shapes[i],s&&s._length&&(r+=this.buildShapeString(s,s._length,s.c,this.identityMatrix));e.caches[a]=r}else r=e.caches[a];e.elements[a].d+=r,e.elements[a].mdf=o||e.elements[a].mdf}else e.elements[a].mdf=!0},IShapeElement.prototype.renderFill=function(t,e){var i=e.style;(e.c.mdf||this.firstFrame)&&i.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&i.pElem.setAttribute("fill-opacity",e.o.v)},IShapeElement.prototype.renderGradient=function(t,e){var i=e.gf,n=e.of,r=e.s.v,o=e.e.v;if(e.o.mdf||this.firstFrame){var s="gf"===t.ty?"fill-opacity":"stroke-opacity";e.elem.setAttribute(s,e.o.v)}if(e.s.mdf||this.firstFrame){var a=1===t.t?"x1":"cx",l="x1"===a?"y1":"cy";i.setAttribute(a,r[0]),i.setAttribute(l,r[1]),n&&(n.setAttribute(a,r[0]),n.setAttribute(l,r[1]))}var h,c,u,p;if(e.g.cmdf||this.firstFrame){h=e.cst;var f=e.g.c;for(u=h.length,c=0;c<u;c+=1)p=h[c],p.setAttribute("offset",f[4*c]+"%"),p.setAttribute("stop-color","rgb("+f[4*c+1]+","+f[4*c+2]+","+f[4*c+3]+")")}if(n&&(e.g.omdf||this.firstFrame)){h=e.ost;var d=e.g.o;for(u=h.length,c=0;c<u;c+=1)p=h[c],p.setAttribute("offset",d[2*c]+"%"),p.setAttribute("stop-opacity",d[2*c+1])}if(1===t.t)(e.e.mdf||this.firstFrame)&&(i.setAttribute("x2",o[0]),i.setAttribute("y2",o[1]),n&&(n.setAttribute("x2",o[0]),n.setAttribute("y2",o[1])));else{var m;if((e.s.mdf||e.e.mdf||this.firstFrame)&&(m=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)),i.setAttribute("r",m),n&&n.setAttribute("r",m)),e.e.mdf||e.h.mdf||e.a.mdf||this.firstFrame){m||(m=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)));var g=Math.atan2(o[1]-r[1],o[0]-r[0]),y=e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v,v=m*y,_=Math.cos(g+e.a.v)*v+r[0],b=Math.sin(g+e.a.v)*v+r[1];i.setAttribute("fx",_),i.setAttribute("fy",b),n&&(n.setAttribute("fx",_),n.setAttribute("fy",b))}}},IShapeElement.prototype.renderStroke=function(t,e){var i=e.style,n=e.d;n&&n.k&&(n.mdf||this.firstFrame)&&(i.pElem.setAttribute("stroke-dasharray",n.dasharray),i.pElem.setAttribute("stroke-dashoffset",n.dashoffset)),e.c&&(e.c.mdf||this.firstFrame)&&i.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&i.pElem.setAttribute("stroke-opacity",e.o.v),(e.w.mdf||this.firstFrame)&&(i.pElem.setAttribute("stroke-width",e.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",e.w.v))},IShapeElement.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.shapeData=null,this.itemsData=null,this.parentContainer=null,this.placeholder=null},ITextElement.prototype.init=function(){this.lettersChangedFlag=!0,this.dynamicProperties=this.dynamicProperties||[],this.textAnimator=new TextAnimatorProperty(this.data.t,this.renderType,this),this.textProperty=new TextProperty(this,this.data.t,this.dynamicProperties),this._parent.init.call(this),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._parent.prepareFrame.call(this,t),(this.textProperty.mdf||this.textProperty.firstFrame)&&(this.buildNewText(),this.textProperty.firstFrame=!1)},ITextElement.prototype.createPathShape=function(t,e){var i,n,r=e.length,o="";for(i=0;i<r;i+=1)n=e[i].ks.k,o+=this.buildShapeString(n,n.i.length,!0,t);return o},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,i,n,r){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i])/2,0,0)}e.translate(n,r,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.buildShapeString=IShapeElement.prototype.buildShapeString,ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){this._parent.destroy.call(this._parent)},createElement(SVGBaseElement,SVGTextElement),extendPrototype(ITextElement,SVGTextElement),SVGTextElement.prototype.createElements=function(){this._parent.createElements.call(this),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=document.createElementNS(svgNS,"text"))},SVGTextElement.prototype.buildNewText=function(){var t,e,i=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:i?i.l.length:0}),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.s);var n=this.globalData.fontManager.getFontByName(i.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var r=i.fWeight,o=i.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",r)}var s=i.l||[],a=this.globalData.fontManager.chars;if(e=s.length){var l,h,c=this.mHelper,u="",p=this.data.singleShape,f=0,d=0,m=!0,g=i.tr/1e3*i.s;if(p&&!a){var y=this.textContainer,v="";switch(i.j){case 1:v="end";break;case 2:v="middle";break;case 2:v="start"}y.setAttribute("text-anchor",v),y.setAttribute("letter-spacing",g);var _=i.t.split(String.fromCharCode(13));e=_.length;var d=i.ps?i.ps[1]+i.ascent:0;for(t=0;t<e;t+=1)l=this.textSpans[t]||document.createElementNS(svgNS,"tspan"),l.textContent=_[t],l.setAttribute("x",0),l.setAttribute("y",d),l.style.display="inherit",y.appendChild(l),this.textSpans[t]=l,d+=i.lh;this.layerElement.appendChild(y)}else{var b,T,E=this.textSpans.length;for(t=0;t<e;t+=1)a&&p&&0!==t||(l=E>t?this.textSpans[t]:document.createElementNS(svgNS,a?"path":"text"),E<=t&&(l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=l,this.layerElement.appendChild(l)),l.style.display="inherit"),c.reset(),a?(c.scale(i.s/100,i.s/100),p&&(s[t].n&&(f=-g,d+=i.yOffset,d+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(i,c,s[t].line,f,d),f+=s[t].l||0,f+=g),T=this.globalData.fontManager.getCharData(i.t.charAt(t),n.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily),b=T&&T.data||{},h=b.shapes?b.shapes[0].it:[],p?u+=this.createPathShape(c,h):l.setAttribute("d",this.createPathShape(c,h))):(l.textContent=s[t].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));p&&l.setAttribute("d",u)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0}},SVGTextElement.prototype.sourceRectAtTime=function(t){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderLetters(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextElement.prototype.renderLetters=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,i=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;e=n.length;var r,o;for(t=0;t<e;t+=1)n[t].n||(r=i[t],o=this.textSpans[t],r.mdf.m&&o.setAttribute("transform",r.m),r.mdf.o&&o.setAttribute("opacity",r.o),r.mdf.sw&&o.setAttribute("stroke-width",r.sw),r.mdf.sc&&o.setAttribute("stroke",r.sc),r.mdf.fc&&o.setAttribute("fill",r.fc))}},SVGTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);return e===!1?void this.hide():(this.hidden&&this.show(),this.firstFrame&&(this.firstFrame=!1),void this.renderLetters())},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,i,n,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(n=this.elem.maskManager.masksProperties.length,i=0):(i=this.filterManager.effectElements[0].p.v-1,n=i+1),e=document.createElementNS(svgNS,"g"),e.setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1),i;i<n;i+=1)t=document.createElementNS(svgNS,"path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var o=document.createElementNS(svgNS,"mask"),s="stms_"+randomString(10);o.setAttribute("id",s),o.setAttribute("mask-type","alpha"),o.appendChild(e),this.elem.globalData.defs.appendChild(o);var a=document.createElementNS(svgNS,"g");a.setAttribute("mask","url("+locationHref+"#"+s+")"),r[0]&&a.appendChild(r[0]),this.elem.layerElement.appendChild(a),this.masker=o,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(var r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,i,n,r=this.paths.length;for(e=0;e<r;e+=1)if(i=this.elem.maskManager.viewData[this.paths[e].m],n=this.paths[e].p,(t||this.filterManager.mdf||i.prop.mdf)&&n.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p.mdf||this.filterManager.effectElements[4].p.mdf||this.filterManager.effectElements[7].p.mdf||this.filterManager.effectElements[8].p.mdf||i.prop.mdf){var o;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var s=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,a=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=n.getTotalLength();o="0 0 0 "+l*s+" ";var h,c=l*(a-s),u=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,p=Math.floor(c/u);for(h=0;h<p;h+=1)o+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";o+="0 "+10*l+" 0 0"}else o="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;n.setAttribute("stroke-dasharray",o)}if((t||this.filterManager.effectElements[4].p.mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p.mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p.mdf)){var f=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*f[0])+","+bm_floor(255*f[1])+","+bm_floor(255*f[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,r=n[0]+" "+i[0]+" "+e[0],o=n[1]+" "+i[1]+" "+e[1],s=n[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",s)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var i=document.createElementNS(svgNS,t);return i.setAttribute("type","table"),e.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(t,e,i,n,r){for(var o,s,a=0,l=256,h=Math.min(t,e),c=Math.max(t,e),u=Array.call(null,{length:l}),p=0,f=r-n,d=e-t;a<=256;)o=a/256,s=o<=h?d<0?r:n:o>=c?d<0?n:r:n+f*Math.pow((o-t)/d,1/i),u[p++]=s,a+=256/(l-1);return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[2].p.mdf||i[3].p.mdf||i[4].p.mdf||i[5].p.mdf||i[6].p.mdf)&&(e=this.getTableValue(i[2].p.v,i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[9].p.mdf||i[10].p.mdf||i[11].p.mdf||i[12].p.mdf||i[13].p.mdf)&&(e=this.getTableValue(i[9].p.v,i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[16].p.mdf||i[17].p.mdf||i[18].p.mdf||i[19].p.mdf||i[20].p.mdf)&&(e=this.getTableValue(i[16].p.v,i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[23].p.mdf||i[24].p.mdf||i[25].p.mdf||i[26].p.mdf||i[27].p.mdf)&&(e=this.getTableValue(i[23].p.v,i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[30].p.mdf||i[31].p.mdf||i[32].p.mdf||i[33].p.mdf||i[34].p.mdf)&&(e=this.getTableValue(i[30].p.v,i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){if((t||this.filterManager.effectElements[4].p.mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p.mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p.mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p.mdf||this.filterManager.effectElements[3].p.mdf){var i=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=i*Math.cos(n),o=i*Math.sin(n);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",o)}}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){var i=document.createElementNS(svgNS,"mask");i.setAttribute("id",e.layerId),i.setAttribute("mask-type","alpha"),i.appendChild(e.layerElement),t.setMatte(e.layerId),e.data.hd=!1;var n=t.globalData.defs;n.appendChild(i)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=0,i=this.elem.comp.elements.length;e<i;)this.elem.comp.elements[e].data.ind===t&&this.setElementAsMask(this.elem,this.elem.comp.elements[e]),e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},createElement(SVGBaseElement,ICompElement),ICompElement.prototype.hide=function(){if(!this.hidden){this._parent.hide.call(this);var t,e=this.elements.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].hide()}},ICompElement.prototype.prepareFrame=function(t){if(this._parent.prepareFrame.call(this,t),this.isVisible!==!1||this.data.xt){if(this.tm){var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}else this.renderedFrame=t/this.data.sr;var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=0;i<n;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st)}},ICompElement.prototype.renderFrame=function(t){var e,i=this._parent.renderFrame.call(this,t),n=this.layers.length;if(i===!1)return void this.hide();for(this.hidden&&this.show(),e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.firstFrame&&(this.firstFrame=!1)},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroy=function(){this._parent.destroy.call(this._parent);var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.checkLayers=SVGRenderer.prototype.checkLayers,ICompElement.prototype.buildItem=SVGRenderer.prototype.buildItem,ICompElement.prototype.buildAllItems=SVGRenderer.prototype.buildAllItems,ICompElement.prototype.buildElementParenting=SVGRenderer.prototype.buildElementParenting,ICompElement.prototype.createItem=SVGRenderer.prototype.createItem,ICompElement.prototype.createImage=SVGRenderer.prototype.createImage,ICompElement.prototype.createComp=SVGRenderer.prototype.createComp,ICompElement.prototype.createSolid=SVGRenderer.prototype.createSolid,ICompElement.prototype.createShape=SVGRenderer.prototype.createShape,ICompElement.prototype.createText=SVGRenderer.prototype.createText,ICompElement.prototype.createBase=SVGRenderer.prototype.createBase,ICompElement.prototype.appendElementInPos=SVGRenderer.prototype.appendElementInPos,ICompElement.prototype.checkPendingElements=SVGRenderer.prototype.checkPendingElements,ICompElement.prototype.addPendingElement=SVGRenderer.prototype.addPendingElement,createElement(SVGBaseElement,IImageElement),IImageElement.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData);this._parent.createElements.call(this),this.innerElem=document.createElementNS(svgNS,"image"),
this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio","xMidYMid slice"),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.maskedElement=this.innerElem,this.layerElement.appendChild(this.innerElem),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},IImageElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);return e===!1?void this.hide():(this.hidden&&this.show(),void(this.firstFrame&&(this.firstFrame=!1)))},IImageElement.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.innerElem=null},createElement(SVGBaseElement,ISolidElement),ISolidElement.prototype.createElements=function(){this._parent.createElements.call(this);var t=document.createElementNS(svgNS,"rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t),this.innerElem=t,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},ISolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,ISolidElement.prototype.destroy=IImageElement.prototype.destroy;var animationManager=function(){function t(t){for(var e=0,i=t.target;e<S;)E[e].animation===i&&(E.splice(e,1),e-=1,S-=1,i.isPaused||n()),e+=1}function e(t,e){if(!t)return null;for(var i=0;i<S;){if(E[i].elem==t&&null!==E[i].elem)return E[i].animation;i+=1}var n=new AnimationItem;return r(n,t),n.setData(t,e),n}function i(){A+=1,b()}function n(){A-=1,0===A&&(w=!0)}function r(e,r){e.addEventListener("destroy",t),e.addEventListener("_active",i),e.addEventListener("_idle",n),E.push({elem:r,animation:e}),S+=1}function o(t){var e=new AnimationItem;return r(e,null),e.setParams(t),e}function s(t,e){var i;for(i=0;i<S;i+=1)E[i].animation.setSpeed(t,e)}function a(t,e){var i;for(i=0;i<S;i+=1)E[i].animation.setDirection(t,e)}function l(t){var e;for(e=0;e<S;e+=1)E[e].animation.play(t)}function h(t,e){x=Date.now();var i;for(i=0;i<S;i+=1)E[i].animation.moveFrame(t,e)}function c(t){var e,i=t-x;for(e=0;e<S;e+=1)E[e].animation.advanceTime(i);x=t,w||window.requestAnimationFrame(c)}function u(t){x=t,window.requestAnimationFrame(c)}function p(t){var e;for(e=0;e<S;e+=1)E[e].animation.pause(t)}function f(t,e,i){var n;for(n=0;n<S;n+=1)E[n].animation.goToAndStop(t,e,i)}function d(t){var e;for(e=0;e<S;e+=1)E[e].animation.stop(t)}function m(t){var e;for(e=0;e<S;e+=1)E[e].animation.togglePause(t)}function g(t){var e;for(e=S-1;e>=0;e-=1)E[e].animation.destroy(t)}function y(t,i,n){var r,o=document.getElementsByClassName("bodymovin"),s=o.length;for(r=0;r<s;r+=1)n&&o[r].setAttribute("data-bm-type",n),e(o[r],t);if(i&&0===s){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerHTML="";var l=document.createElement("div");l.style.width="100%",l.style.height="100%",l.setAttribute("data-bm-type",n),a.appendChild(l),e(l,t)}}function v(){var t;for(t=0;t<S;t+=1)E[t].animation.resize()}function _(){window.requestAnimationFrame(u)}function b(){w&&(w=!1,window.requestAnimationFrame(u))}var T={},E=[],x=0,S=0,w=!0,A=0;return setTimeout(_,0),T.registerAnimation=e,T.loadAnimation=o,T.setSpeed=s,T.setDirection=a,T.play=l,T.moveFrame=h,T.pause=p,T.stop=d,T.togglePause=m,T.searchAnimations=y,T.resize=v,T.start=_,T.goToAndStop=f,T.destroy=g,T}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.pendingElements=0,this.playCount=0,this.prerenderFramesFlag=!0,this.animationData={},this.layers=[],this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=randomString(10),this.scaleMode="fit",this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this.pendingSegment=!1,this._idle=!0,this.projectInterface=ProjectInterface()};AnimationItem.prototype.setParams=function(t){var e=this;t.context&&(this.context=t.context),(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var i=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(i){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;case"hybrid":case"html":default:this.renderer=new HybridRenderer(this,t.rendererSettings)}if(this.renderer.setProjectInterface(this.projectInterface),this.animType=i,""===t.loop||null===t.loop||(t.loop===!1?this.loop=!1:t.loop===!0?this.loop=!0:this.loop=parseInt(t.loop)),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.prerenderFramesFlag=!("prerender"in t)||t.prerender,this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments,t.animationData)e.configAnimation(t.animationData);else if(t.path){"json"!=t.path.substr(-4)&&("/"!=t.path.substr(-1,1)&&(t.path+="/"),t.path+="data.json");var n=new XMLHttpRequest;t.path.lastIndexOf("\\")!=-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.assetsPath=t.assetsPath,this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),n.open("GET",t.path,!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status)e.configAnimation(JSON.parse(n.responseText));else try{var t=JSON.parse(n.responseText);e.configAnimation(t)}catch(i){}}}},AnimationItem.prototype.setData=function(t,e){var i={wrapper:t,animationData:e?"object"==typeof e?e:JSON.parse(e):null},n=t.attributes;i.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",i.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var r=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";""===r||("false"===r?i.loop=!1:"true"===r?i.loop=!0:i.loop=parseInt(r));var o=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;i.autoplay="false"!==o,i.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var s=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";"false"===s&&(i.prerender=!1),this.setParams(i)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip),this.animationData.tf=this.totalFrames);var e,i,n=this.animationData.layers,r=n.length,o=t.layers,s=o.length;for(i=0;i<s;i+=1)for(e=0;e<r;){if(n[e].id==o[i].id){n[e]=o[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,e=0;e<r;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.renderFrame(null),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.animationData.tf);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=new XMLHttpRequest,n=this,r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,i.open("GET",r,!0),i.send(),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)n.includeLayers(JSON.parse(i.responseText));else try{var t=JSON.parse(i.responseText);n.includeLayers(t)}catch(e){}}},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.animationData.tf),this.loadNextSegment()},AnimationItem.prototype.configAnimation=function(t){var e=this;this.renderer&&this.renderer.destroyed||(this.animationData=t,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.animationData.tf=this.totalFrames,this.renderer.configAnimation(t),t.assets||(t.assets=[]),t.comps&&(t.assets=t.assets.concat(t.comps),t.comps=null),this.renderer.searchExtraCompositions(t.assets),this.layers=this.animationData.layers,this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.imagePreloader=new ImagePreloader,this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(t.assets,function(t){t||e.trigger("loaded_images")}),this.loadSegments(),this.updaFrameModifier(),this.renderer.globalData.fontManager?this.waitForFontsLoaded():(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()))},AnimationItem.prototype.waitForFontsLoaded=function(){function t(){this.renderer.globalData.fontManager.loaded?(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()):setTimeout(t.bind(this),20)}return function(){t.bind(this)()}}(),AnimationItem.prototype.addPendingElement=function(){this.pendingElements+=1},AnimationItem.prototype.elementLoaded=function(){this.pendingElements--,this.checkLoaded()},AnimationItem.prototype.checkLoaded=function(){0===this.pendingElements&&(expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.isLoaded=!0,this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.subframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.subframeEnabled?this.currentFrame=this.currentRawFrame:this.currentFrame=Math.floor(this.currentRawFrame),this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){this.isLoaded!==!1&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(t){t&&this.name!=t||this.isPaused===!0&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!=t||this.isPaused===!1&&(this.isPaused=!0,this.pendingSegment||(this._idle=!0,this.trigger("_idle")))},AnimationItem.prototype.togglePause=function(t){t&&this.name!=t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.currentFrame=this.currentRawFrame=0,this.playCount=0,this.gotoFrame())},AnimationItem.prototype.goToAndStop=function(t,e,i){i&&this.name!=i||(e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,i){this.goToAndStop(t,e,i),this.play()},AnimationItem.prototype.advanceTime=function(t){return this.pendingSegment?(this.pendingSegment=!1,this.adjustSegment(this.segments.shift()),void(this.isPaused&&this.play())):void(this.isPaused!==!0&&this.isLoaded!==!1&&this.setCurrentRawFrameValue(this.currentRawFrame+t*this.frameModifier))},AnimationItem.prototype.updateAnimation=function(t){this.setCurrentRawFrameValue(this.totalFrames*t)},AnimationItem.prototype.moveFrame=function(t,e){e&&this.name!=e||this.setCurrentRawFrameValue(this.currentRawFrame+t)},AnimationItem.prototype.adjustSegment=function(t){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.01)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(0)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t-.01)),this.firstFrame=t,this.totalFrames=e-t,i!==-1&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(t,e){if("object"==typeof t[0]){var i,n=t.length;for(i=0;i<n;i+=1)this.segments.push(t[i])}else this.segments.push(t);e&&this.adjustSegment(this.segments.shift()),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op-this.animationData.ip+this.animationData.ip*this.frameRate)]),t&&this.adjustSegment(this.segments.shift())},AnimationItem.prototype.checkSegments=function(){this.segments.length&&(this.pendingSegment=!0)},AnimationItem.prototype.remove=function(t){t&&this.name!=t||this.renderer.destroy()},AnimationItem.prototype.destroy=function(t){t&&this.name!=t||this.renderer&&this.renderer.destroyed||(this.renderer.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){if(this.currentRawFrame=t,this.currentRawFrame>=this.totalFrames){if(this.checkSegments(),this.loop===!1)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");if(this.trigger("loopComplete"),this.playCount+=1,this.loop!==!0&&this.playCount==this.loop||this.pendingSegment)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");this.currentRawFrame=this.currentRawFrame%this.totalFrames}else if(this.currentRawFrame<0)return this.checkSegments(),this.playCount-=1,this.playCount<0&&(this.playCount=0),this.loop===!1||this.pendingSegment?(this.currentRawFrame=0,this.gotoFrame(),this.pause(),void this.trigger("complete")):(this.trigger("loopComplete"),this.currentRawFrame=(this.totalFrames+this.currentRawFrame)%this.totalFrames,void this.gotoFrame());this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(this.assetsPath){var i=t.p;i.indexOf("images/")!==-1&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t==this.assets[e].id)return this.assets[e];e+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getAssets=function(){return this.assets},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.addEventListener=_addEventListener,AnimationItem.prototype.removeEventListener=_removeEventListener,AnimationItem.prototype.triggerEvent=_triggerEvent,extendPrototype(BaseRenderer,CanvasRenderer),CanvasRenderer.prototype.createBase=function(t){return new CVBaseElement(t,this,this.globalData)},CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this,this.globalData)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this,this.globalData)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this,this.globalData)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this,this.globalData)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this,this.globalData)},CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13]){if(!this.renderConfig.clearCanvas)return void this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13]);this.transformMat.cloneFromProps(t),this.transformMat.transform(this.contextData.cTr.props[0],this.contextData.cTr.props[1],this.contextData.cTr.props[2],this.contextData.cTr.props[3],this.contextData.cTr.props[4],this.contextData.cTr.props[5],this.contextData.cTr.props[6],this.contextData.cTr.props[7],this.contextData.cTr.props[8],this.contextData.cTr.props[9],this.contextData.cTr.props[10],this.contextData.cTr.props[11],this.contextData.cTr.props[12],this.contextData.cTr.props[13],this.contextData.cTr.props[14],this.contextData.cTr.props[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var e=this.contextData.cTr.props;this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}},CanvasRenderer.prototype.ctxOpacity=function(t){if(1!==t){if(!this.renderConfig.clearCanvas)return void(this.canvasContext.globalAlpha*=t<0?0:t);this.contextData.cO*=t<0?0:t,this.canvasContext.globalAlpha=this.contextData.cO}},CanvasRenderer.prototype.reset=function(){return this.renderConfig.clearCanvas?(this.contextData.cArrPos=0,this.contextData.cTr.reset(),void(this.contextData.cO=1)):void this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(!this.renderConfig.clearCanvas)return void this.canvasContext.save();t&&this.canvasContext.save();var e=this.contextData.cTr.props;null!==this.contextData.saved[this.contextData.cArrPos]&&void 0!==this.contextData.saved[this.contextData.cArrPos]||(this.contextData.saved[this.contextData.cArrPos]=new Array(16));var i,n=this.contextData.saved[this.contextData.cArrPos];for(i=0;i<16;i+=1)n[i]=e[i];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRenderer.prototype.restore=function(t){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();t&&this.canvasContext.restore(),this.contextData.cArrPos-=1;var e,i=this.contextData.saved[this.contextData.cArrPos],n=this.contextData.cTr.props;for(e=0;e<16;e+=1)n[e]=i[e];this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),i=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=i,this.canvasContext.globalAlpha=i},CanvasRenderer.prototype.configAnimation=function(t){this.animationItem.wrapper?(this.animationItem.container=document.createElement("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className)):this.canvasContext=this.renderConfig.context,this.data=t,this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.totalFrames=Math.floor(t.tf),this.globalData.compWidth=t.w,this.globalData.compHeight=t.h,this.globalData.frameRate=t.fr,this.globalData.frameId=0,this.globalData.compSize={w:t.w,h:t.h},this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.layers=t.layers,this.transformCanvas={},this.transformCanvas.w=t.w,this.transformCanvas.h=t.h,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,document.body),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.addPendingElement=this.animationItem.addPendingElement.bind(this.animationItem),this.globalData.transformCanvas=this.transformCanvas,this.elements=Array.apply(null,{length:t.layers.length}),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e;this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr);var i,n;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var r=this.renderConfig.preserveAspectRatio.split(" "),o=r[1]||"meet",s=r[0]||"xMidYMid",a=s.substr(0,4),l=s.substr(4);i=t/e,n=this.transformCanvas.w/this.transformCanvas.h,n>i&&"meet"===o||n<i&&"slice"===o?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),"xMid"===a&&(n<i&&"meet"===o||n>i&&"slice"===o)?this.transformCanvas.tx=(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===a&&(n<i&&"meet"===o||n>i&&"slice"===o)?this.transformCanvas.tx=(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,"YMid"===l&&(n>i&&"meet"===o||n<i&&"slice"===o)?this.transformCanvas.ty=(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(n>i&&"meet"===o||n<i&&"slice"===o)?this.transformCanvas.ty=(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];var h,c=this.elements.length;for(h=0;h<c;h+=1)this.elements[h]&&0===this.elements[h].data.ty&&this.elements[h].resize(this.globalData.transformCanvas)},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t){if(!(this.renderedFrame==t&&this.renderConfig.clearCanvas===!0||this.destroyed||null===t)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem.firstFrame,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.renderConfig.clearCanvas===!0?(this.reset(),this.canvasContext.save(),this.canvasContext.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)):this.save(),this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip();var e,i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=0;e<i;e++)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.renderConfig.clearCanvas!==!0?this.restore():this.canvasContext.restore()}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){var i=this.createItem(this.layers[t],this,this.globalData);e[t]=i,i.initExpressions(),0===this.layers[t].ty&&i.resize(this.globalData.transformCanvas)}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},CanvasRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length;document.createElementNS(svgNS,"g");for(e=0;e<i;e+=1)if(t[e].xt){var n=this.createComp(t[e],this.globalData.comp,this.globalData);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},extendPrototype(BaseRenderer,HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){var n=this.layers[e];if(n.ddd&&this.supports3d)this.addTo3dContainer(i,e);else{for(var r,o,s=0;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement&&(o=this.elements[s],r=this.layers[s].ddd?this.getThreeDContainerByPos(s):o.getBaseElement()),s+=1;r?n.ddd&&this.supports3d||this.layerElement.insertBefore(i,r):n.ddd&&this.supports3d||this.layerElement.appendChild(i)}}},HybridRenderer.prototype.createBase=function(t){return new SVGBaseElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.layerElement,this.globalData,this):new IShapeElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.layerElement,this.globalData,this):new SVGTextElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.layerElement,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.layerElement,this.globalData,this):new IImageElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.layerElement,this.globalData,this):new ICompElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.layerElement,this.globalData,this):new ISolidElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,i=this.threeDElements.length;e<i;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}},HybridRenderer.prototype.createThreeDContainer=function(t){var e=document.createElement("div");styleDiv(e),e.style.width=this.globalData.compSize.w+"px",e.style.height=this.globalData.compSize.h+"px",e.style.transformOrigin=e.style.mozTransformOrigin=e.style.webkitTransformOrigin="50% 50%";var i=document.createElement("div");styleDiv(i),i.style.transform=i.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",e.appendChild(i),this.resizerElem.appendChild(e);var n={container:i,perspectiveElem:e,startPos:t,endPos:t};return this.threeDElements.push(n),n},HybridRenderer.prototype.build3dContainers=function(){var t,e,i=this.layers.length;for(t=0;t<i;t+=1)this.layers[t].ddd?(e||(e=this.createThreeDContainer(t)),e.endPos=Math.max(e.endPos,t)):e=null},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var i=0,n=this.threeDElements.length;i<n;){if(e<=this.threeDElements[i].endPos){for(var r,o=this.threeDElements[i].startPos;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(r=this.elements[o].getBaseElement()),o+=1;r?this.threeDElements[i].container.insertBefore(t,r):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=document.createElement("div"),i=this.animationItem.wrapper;e.style.width=t.w+"px",e.style.height=t.h+"px",this.resizerElem=e,styleDiv(e),e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat",this.renderConfig.className&&i.setAttribute("class",this.renderConfig.className),i.appendChild(e),e.style.overflow="hidden";var n=document.createElementNS(svgNS,"svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var r=document.createElementNS(svgNS,"defs");n.appendChild(r),this.globalData.defs=r,this.data=t,this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.frameId=0,this.globalData.compSize={w:t.w,h:t.h},this.globalData.frameRate=t.fr,this.layers=t.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,n),this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",
this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,i,n,r=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,s=r/o,a=this.globalData.compSize.w/this.globalData.compSize.h;a>s?(t=r/this.globalData.compSize.w,e=r/this.globalData.compSize.w,i=0,n=(o-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(t=o/this.globalData.compSize.h,e=o/this.globalData.compSize.h,i=(r-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,n=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+i+","+n+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,i=this.globalData.compSize.h,n=this.threeDElements.length;for(t=0;t<n;t+=1)this.threeDElements[t].perspectiveElem.style.perspective=this.threeDElements[t].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length,n=document.createElement("div");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},createElement(BaseElement,CVBaseElement),CVBaseElement.prototype.createElements=function(){this.checkParenting()},CVBaseElement.prototype.checkBlendMode=function(t){if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e="";switch(this.data.bm){case 0:e="normal";break;case 1:e="multiply";break;case 2:e="screen";break;case 3:e="overlay";break;case 4:e="darken";break;case 5:e="lighten";break;case 6:e="color-dodge";break;case 7:e="color-burn";break;case 8:e="hard-light";break;case 9:e="soft-light";break;case 10:e="difference";break;case 11:e="exclusion";break;case 12:e="hue";break;case 13:e="saturation";break;case 14:e="color";break;case 15:e="luminosity"}t.canvasContext.globalCompositeOperation=e}},CVBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty)return!1;if(this.checkBlendMode(0===this.data.ty?this.parentGlobalData:this.globalData),!this.isVisible)return this.isVisible;this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var e,i=this.finalTransform.mat;if(this.hierarchy){var n,r=this.hierarchy.length;for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)this.finalTransform.matMdf=!!this.hierarchy[n].finalTransform.mProp.mdf||this.finalTransform.matMdf,e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else t?(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e)):i.cloneFromProps(this.finalTransform.mProp.v.props);return t&&(e=t.mat.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.finalTransform.opacity*=t.opacity,this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf),this.data.hasMask&&(this.globalData.renderer.save(!0),this.maskManager.renderFrame(0===this.data.ty?null:i)),this.data.hd&&(this.isVisible=!1),this.isVisible},CVBaseElement.prototype.addMasks=function(t){this.maskManager=new CVMaskElement(t,this,this.globalData)},CVBaseElement.prototype.destroy=function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager&&this.maskManager.destroy()},CVBaseElement.prototype.mHelper=new Matrix,createElement(CVBaseElement,CVCompElement),CVCompElement.prototype.ctxTransform=CanvasRenderer.prototype.ctxTransform,CVCompElement.prototype.ctxOpacity=CanvasRenderer.prototype.ctxOpacity,CVCompElement.prototype.save=CanvasRenderer.prototype.save,CVCompElement.prototype.restore=CanvasRenderer.prototype.restore,CVCompElement.prototype.reset=function(){this.contextData.cArrPos=0,this.contextData.cTr.reset(),this.contextData.cO=1},CVCompElement.prototype.resize=function(t){var e=Math.max(t.sx,t.sy);this.canvas.width=this.data.w*e,this.canvas.height=this.data.h*e,this.transformCanvas={sc:e,w:this.data.w*e,h:this.data.h*e,props:[e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]};var i,n=this.elements.length;for(i=0;i<n;i+=1)this.elements[i]&&0===this.elements[i].data.ty&&this.elements[i].resize(t)},CVCompElement.prototype.prepareFrame=function(t){if(this.globalData.frameId=this.parentGlobalData.frameId,this.globalData.mdf=!1,this._parent.prepareFrame.call(this,t),this.isVisible!==!1||this.data.xt){var e=t;this.tm&&(e=this.tm.v,e===this.data.op&&(e=this.data.op-1)),this.renderedFrame=e/this.data.sr;var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(t),i=0;i<n;i+=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(e/this.data.sr-this.layers[i].st),0===this.elements[i].data.ty&&this.elements[i].globalData.mdf&&(this.globalData.mdf=!0));this.globalData.mdf&&!this.data.xt&&(this.canvasContext.clearRect(0,0,this.data.w,this.data.h),this.ctxTransform(this.transformCanvas.props))}},CVCompElement.prototype.renderFrame=function(t){if(this._parent.renderFrame.call(this,t)!==!1){if(this.globalData.mdf){var e,i=this.layers.length;for(e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}this.data.hasMask&&this.globalData.renderer.restore(!0),this.firstFrame&&(this.firstFrame=!1),this.parentGlobalData.renderer.save(),this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props),this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity),this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas,0,0,this.data.w,this.data.h),this.parentGlobalData.renderer.restore(),this.globalData.mdf&&this.reset()}},CVCompElement.prototype.setElements=function(t){this.elements=t},CVCompElement.prototype.getElements=function(){return this.elements},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t].destroy();this.layers=null,this.elements=null,this._parent.destroy.call(this._parent)},CVCompElement.prototype.checkLayers=CanvasRenderer.prototype.checkLayers,CVCompElement.prototype.buildItem=CanvasRenderer.prototype.buildItem,CVCompElement.prototype.checkPendingElements=CanvasRenderer.prototype.checkPendingElements,CVCompElement.prototype.addPendingElement=CanvasRenderer.prototype.addPendingElement,CVCompElement.prototype.buildAllItems=CanvasRenderer.prototype.buildAllItems,CVCompElement.prototype.createItem=CanvasRenderer.prototype.createItem,CVCompElement.prototype.createImage=CanvasRenderer.prototype.createImage,CVCompElement.prototype.createComp=CanvasRenderer.prototype.createComp,CVCompElement.prototype.createSolid=CanvasRenderer.prototype.createSolid,CVCompElement.prototype.createShape=CanvasRenderer.prototype.createShape,CVCompElement.prototype.createText=CanvasRenderer.prototype.createText,CVCompElement.prototype.createBase=CanvasRenderer.prototype.createBase,CVCompElement.prototype.buildElementParenting=CanvasRenderer.prototype.buildElementParenting,createElement(CVBaseElement,CVImageElement),CVImageElement.prototype.createElements=function(){var t=function(){if(this.globalData.elementLoaded(),this.assetData.w!==this.img.width||this.assetData.h!==this.img.height){var t=document.createElement("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,i,n=t.getContext("2d"),r=this.img.width,o=this.img.height,s=r/o,a=this.assetData.w/this.assetData.h;s>a?(i=o,e=i*a):(e=r,i=e/a),n.drawImage(this.img,(r-e)/2,(o-i)/2,e,i,0,0,this.assetData.w,this.assetData.h),this.img=t}}.bind(this),e=function(){this.failed=!0,this.globalData.elementLoaded()}.bind(this);this.img=new Image,this.img.addEventListener("load",t,!1),this.img.addEventListener("error",e,!1);var i=this.globalData.getAssetsPath(this.assetData);this.img.src=i,this._parent.createElements.call(this)},CVImageElement.prototype.renderFrame=function(t){if(!this.failed&&this._parent.renderFrame.call(this,t)!==!1){var e=this.canvasContext;this.globalData.renderer.save();var i=this.finalTransform.mat.props;this.globalData.renderer.ctxTransform(i),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),e.drawImage(this.img,0,0),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},CVImageElement.prototype.destroy=function(){this.img=null,this._parent.destroy.call(this._parent)},CVMaskElement.prototype.prepareFrame=function(t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.element.globalData.mdf=!0)},CVMaskElement.prototype.renderFrame=function(t){var e,i,n,r,o,s=this.element.canvasContext,a=this.data.masksProperties.length,l=!1;for(e=0;e<a;e++)if("n"!==this.masksProperties[e].mode){l===!1&&(s.beginPath(),l=!0),this.masksProperties[e].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compWidth,0),s.lineTo(this.element.globalData.compWidth,this.element.globalData.compHeight),s.lineTo(0,this.element.globalData.compHeight),s.lineTo(0,0)),o=this.viewData[e].v,i=t?t.applyToPointArray(o.v[0][0],o.v[0][1],0):o.v[0],s.moveTo(i[0],i[1]);var h,c=o._length;for(h=1;h<c;h++)i=t?t.applyToPointArray(o.o[h-1][0],o.o[h-1][1],0):o.o[h-1],n=t?t.applyToPointArray(o.i[h][0],o.i[h][1],0):o.i[h],r=t?t.applyToPointArray(o.v[h][0],o.v[h][1],0):o.v[h],s.bezierCurveTo(i[0],i[1],n[0],n[1],r[0],r[1]);i=t?t.applyToPointArray(o.o[h-1][0],o.o[h-1][1],0):o.o[h-1],n=t?t.applyToPointArray(o.i[0][0],o.i[0][1],0):o.i[0],r=t?t.applyToPointArray(o.v[0][0],o.v[0][1],0):o.v[0],s.bezierCurveTo(i[0],i[1],n[0],n[1],r[0],r[1])}l&&s.clip()},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},createElement(CVBaseElement,CVShapeElement),CVShapeElement.prototype.transformHelper={opacity:1,mat:new Matrix,matMdf:!1,opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,!0)},CVShapeElement.prototype.createStyleElement=function(t,e){var i={data:t,type:t.ty,elements:[]},n={};if("fl"!=t.ty&&"st"!=t.ty||(n.c=PropertyFactory.getProp(this,t.c,1,255,e),n.c.k||(i.co="rgb("+bm_floor(n.c.v[0])+","+bm_floor(n.c.v[1])+","+bm_floor(n.c.v[2])+")")),n.o=PropertyFactory.getProp(this,t.o,0,.01,e),"st"==t.ty){if(i.lc=this.lcEnum[t.lc]||"round",i.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(i.ml=t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,e),n.w.k||(i.wi=n.w.v),t.d){var r=PropertyFactory.getDashProp(this,t.d,"canvas",e);n.d=r,n.d.k||(i.da=n.d.dasharray,i["do"]=n.d.dashoffset)}}else i.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(i),n.style=i,n},CVShapeElement.prototype.createGroupElement=function(t){var e={it:[],prevViewData:[]};return e},CVShapeElement.prototype.createTransformElement=function(t,e){var i={transform:{mat:new Matrix,opacity:1,matMdf:!1,opMdf:!1,op:PropertyFactory.getProp(this,t.o,0,.01,e),mProps:PropertyFactory.getProp(this,t,2,null,e)},elements:[]};return i},CVShapeElement.prototype.createShapeElement=function(t,e){var i={nodes:[],trNodes:[],tr:[0,0,0,0,0,0]},n=4;"rc"==t.ty?n=5:"el"==t.ty?n=6:"sr"==t.ty&&(n=7),i.sh=ShapePropertyFactory.getShapeProp(this,t,n,e),this.shapes.push(i.sh),this.addShapeToModifiers(i),jLen=this.stylesList.length;var r=!1,o=!1;for(j=0;j<jLen;j+=1)this.stylesList[j].closed||(this.stylesList[j].elements.push(i),"st"===this.stylesList[j].type?r=!0:o=!0);return i.st=r,i.fl=o,i},CVShapeElement.prototype.reloadShapes=function(){this.firstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,!0);var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},CVShapeElement.prototype.searchShapes=function(t,e,i,n,r){var o,s,a,l,h=t.length-1,c=[],u=[];for(o=h;o>=0;o-=1){if(l=this.searchProcessedElement(t[o]),l?e[o]=i[l-1]:t[o]._render=r,"fl"==t[o].ty||"st"==t[o].ty)l?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],n),c.push(e[o].style);else if("gr"==t[o].ty){if(l)for(a=e[o].it.length,s=0;s<a;s+=1)e[o].prevViewData[s]=e[o].it[s];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,n,r)}else if("tr"==t[o].ty)l||(e[o]=this.createTransformElement(t[o],n));else if("sh"==t[o].ty||"rc"==t[o].ty||"el"==t[o].ty||"sr"==t[o].ty)l||(e[o]=this.createShapeElement(t[o],n));else if("tm"==t[o].ty||"rd"==t[o].ty){if(l)p=e[o],p.closed=!1;else{var p=ShapeModifiers.getModifier(t[o].ty);p.init(this,t[o],n),e[o]=p,this.shapeModifiers.push(p)}u.push(p)}else"rp"==t[o].ty&&(l?(p=e[o],p.closed=!0):(p=ShapeModifiers.getModifier(t[o].ty),e[o]=p,p.init(this,t,o,e,n),this.shapeModifiers.push(p),r=!1),u.push(p));this.addProcessedElement(t[o],o+1)}for(h=c.length,o=0;o<h;o+=1)c[o].closed=!0;for(h=u.length,o=0;o<h;o+=1)u[o].closed=!0},CVShapeElement.prototype.addShapeToModifiers=IShapeElement.prototype.addShapeToModifiers,CVShapeElement.prototype.renderModifiers=IShapeElement.prototype.renderModifiers,CVShapeElement.prototype.lcEnum=IShapeElement.prototype.lcEnum,CVShapeElement.prototype.ljEnum=IShapeElement.prototype.ljEnum,CVShapeElement.prototype.searchProcessedElement=IShapeElement.prototype.searchProcessedElement,CVShapeElement.prototype.addProcessedElement=IShapeElement.prototype.addProcessedElement,CVShapeElement.prototype.renderFrame=function(t){this._parent.renderFrame.call(this,t)!==!1&&(this.transformHelper.mat.reset(),this.transformHelper.opacity=this.finalTransform.opacity,this.transformHelper.matMdf=!1,this.transformHelper.opMdf=this.finalTransform.opMdf,this.renderModifiers(),this.renderShape(this.transformHelper,null,null,!0),this.data.hasMask&&this.globalData.renderer.restore(!0))},CVShapeElement.prototype.renderShape=function(t,e,i,n){var r,o;if(!e)for(e=this.shapesData,o=this.stylesList.length,r=0;r<o;r+=1)this.stylesList[r].d="",this.stylesList[r].mdf=!1;i||(i=this.itemsData),o=e.length-1;var s,a;for(s=t,r=o;r>=0;r-=1)if("tr"==e[r].ty){s=i[r].transform;var l=i[r].transform.mProps.v.props;if(s.matMdf=s.mProps.mdf,s.opMdf=s.op.mdf,a=s.mat,a.cloneFromProps(l),t){var h=t.mat.props;s.opacity=t.opacity,s.opacity*=i[r].transform.op.v,s.matMdf=!!t.matMdf||s.matMdf,s.opMdf=!!t.opMdf||s.opMdf,a.transform(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}else s.opacity=s.op.o}else"sh"==e[r].ty||"el"==e[r].ty||"rc"==e[r].ty||"sr"==e[r].ty?this.renderPath(e[r],i[r],s):"fl"==e[r].ty?this.renderFill(e[r],i[r],s):"st"==e[r].ty?this.renderStroke(e[r],i[r],s):"gr"==e[r].ty?this.renderShape(s,e[r].it,i[r].it):"tm"==e[r].ty;if(n){o=this.stylesList.length;var c,u,p,f,d,m,g,y=this.globalData.renderer,v=this.globalData.canvasContext;for(y.save(),y.ctxTransform(this.finalTransform.mat.props),r=0;r<o;r+=1)if(g=this.stylesList[r].type,("st"!==g||0!==this.stylesList[r].wi)&&this.stylesList[r].data._render){for(y.save(),d=this.stylesList[r].elements,"st"===g?(v.strokeStyle=this.stylesList[r].co,v.lineWidth=this.stylesList[r].wi,v.lineCap=this.stylesList[r].lc,v.lineJoin=this.stylesList[r].lj,v.miterLimit=this.stylesList[r].ml||0):v.fillStyle=this.stylesList[r].co,y.ctxOpacity(this.stylesList[r].coOp),"st"!==g&&v.beginPath(),u=d.length,c=0;c<u;c+=1){for("st"===g&&(v.beginPath(),this.stylesList[r].da?(v.setLineDash(this.stylesList[r].da),v.lineDashOffset=this.stylesList[r]["do"],this.globalData.isDashed=!0):this.globalData.isDashed&&(v.setLineDash(this.dashResetter),this.globalData.isDashed=!1)),m=d[c].trNodes,f=m.length,p=0;p<f;p+=1)"m"==m[p].t?v.moveTo(m[p].p[0],m[p].p[1]):"c"==m[p].t?v.bezierCurveTo(m[p].p1[0],m[p].p1[1],m[p].p2[0],m[p].p2[1],m[p].p3[0],m[p].p3[1]):v.closePath();"st"===g&&v.stroke()}"st"!==g&&v.fill(this.stylesList[r].r),y.restore()}y.restore(),this.firstFrame&&(this.firstFrame=!1)}},CVShapeElement.prototype.renderPath=function(t,e,i){var n,r,o,s,a=i.matMdf||e.sh.mdf||this.firstFrame;if(a){var l=e.sh.paths,h=i.mat;s=l._length;var c=e.trNodes;for(c.length=0,o=0;o<s;o+=1){var u=l.shapes[o];if(u&&u.v){for(n=u._length,r=1;r<n;r+=1)1==r&&c.push({t:"m",p:h.applyToPointArray(u.v[0][0],u.v[0][1],0)}),c.push({t:"c",p1:h.applyToPointArray(u.o[r-1][0],u.o[r-1][1],0),p2:h.applyToPointArray(u.i[r][0],u.i[r][1],0),p3:h.applyToPointArray(u.v[r][0],u.v[r][1],0)});1==n&&c.push({t:"m",p:h.applyToPointArray(u.v[0][0],u.v[0][1],0)}),u.c&&n&&(c.push({t:"c",p1:h.applyToPointArray(u.o[r-1][0],u.o[r-1][1],0),p2:h.applyToPointArray(u.i[0][0],u.i[0][1],0),p3:h.applyToPointArray(u.v[0][0],u.v[0][1],0)}),c.push({t:"z"})),e.lStr=c}}if(e.st)for(r=0;r<16;r+=1)e.tr[r]=i.mat.props[r];e.trNodes=c}},CVShapeElement.prototype.renderFill=function(t,e,i){var n=e.style;(e.c.mdf||this.firstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||i.opMdf||this.firstFrame)&&(n.coOp=e.o.v*i.opacity)},CVShapeElement.prototype.renderStroke=function(t,e,i){var n=e.style,r=e.d;r&&(r.mdf||this.firstFrame)&&(n.da=r.dasharray,n["do"]=r.dashoffset),(e.c.mdf||this.firstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||i.opMdf||this.firstFrame)&&(n.coOp=e.o.v*i.opacity),(e.w.mdf||this.firstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemData.length=0,this._parent.destroy.call(this._parent)},createElement(CVBaseElement,CVSolidElement),CVSolidElement.prototype.renderFrame=function(t){if(this._parent.renderFrame.call(this,t)!==!1){var e=this.canvasContext;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(CVBaseElement,CVTextElement),extendPrototype(ITextElement,CVTextElement),CVTextElement.prototype.tHelper=document.createElement("canvas").getContext("2d"),CVTextElement.prototype.createElements=function(){this._parent.createElements.call(this)},CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:t.l?t.l.length:0});var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var i=!1;t.sc&&(i=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var n,r,o=this.globalData.fontManager.getFontByName(t.f),s=t.l,a=this.mHelper;this.stroke=i,this.values.fValue=t.s+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,r=t.t.length;var l,h,c,u,p,f,d,m,g,y,v=this.data.singleShape,_=t.tr/1e3*t.s,b=0,T=0,E=!0,x=0;for(n=0;n<r;n+=1){for(l=this.globalData.fontManager.getCharData(t.t.charAt(n),o.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),h=l&&l.data||{},a.reset(),v&&s[n].n&&(b=-_,T+=t.yOffset,T+=E?1:0,E=!1),p=h.shapes?h.shapes[0].it:[],d=p.length,a.scale(t.s/100,t.s/100),v&&this.applyTextPropertiesToMatrix(t,a,s[n].line,b,T),g=Array.apply(null,{length:d}),f=0;f<d;f+=1){for(u=p[f].ks.k.i.length,m=p[f].ks.k,y=[],c=1;c<u;c+=1)1==c&&y.push(a.applyToX(m.v[0][0],m.v[0][1],0),a.applyToY(m.v[0][0],m.v[0][1],0)),y.push(a.applyToX(m.o[c-1][0],m.o[c-1][1],0),a.applyToY(m.o[c-1][0],m.o[c-1][1],0),a.applyToX(m.i[c][0],m.i[c][1],0),a.applyToY(m.i[c][0],m.i[c][1],0),a.applyToX(m.v[c][0],m.v[c][1],0),a.applyToY(m.v[c][0],m.v[c][1],0));y.push(a.applyToX(m.o[c-1][0],m.o[c-1][1],0),a.applyToY(m.o[c-1][0],m.o[c-1][1],0),a.applyToX(m.i[0][0],m.i[0][1],0),a.applyToY(m.i[0][0],m.i[0][1],0),a.applyToX(m.v[0][0],m.v[0][1],0),a.applyToY(m.v[0][0],m.v[0][1],0)),g[f]=y}v&&(b+=s[n].l,b+=_),this.textSpans[x]?this.textSpans[x].elem=g:this.textSpans[x]={elem:g},x+=1}},CVTextElement.prototype.renderFrame=function(t){if(this._parent.renderFrame.call(this,t)!==!1){var e=this.canvasContext,i=this.finalTransform.mat.props;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(i),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),e.font=this.values.fValue,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var n,r,o,s,a,l,h=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;r=c.length;var u,p,f,d=null,m=null,g=null;for(n=0;n<r;n+=1)if(!c[n].n){if(u=h[n],u&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(u.p),this.globalData.renderer.ctxOpacity(u.o)),this.fill){for(u&&u.fc?d!==u.fc&&(d=u.fc,e.fillStyle=u.fc):d!==this.values.fill&&(d=this.values.fill,e.fillStyle=this.values.fill),p=this.textSpans[n].elem,s=p.length,this.globalData.canvasContext.beginPath(),o=0;o<s;o+=1)for(f=p[o],l=f.length,this.globalData.canvasContext.moveTo(f[0],f[1]),a=2;a<l;a+=6)this.globalData.canvasContext.bezierCurveTo(f[a],f[a+1],f[a+2],f[a+3],f[a+4],f[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(u&&u.sw?g!==u.sw&&(g=u.sw,e.lineWidth=u.sw):g!==this.values.sWidth&&(g=this.values.sWidth,e.lineWidth=this.values.sWidth),u&&u.sc?m!==u.sc&&(m=u.sc,e.strokeStyle=u.sc):m!==this.values.stroke&&(m=this.values.stroke,e.strokeStyle=this.values.stroke),p=this.textSpans[n].elem,s=p.length,this.globalData.canvasContext.beginPath(),o=0;o<s;o+=1)for(f=p[o],l=f.length,this.globalData.canvasContext.moveTo(f[0],f[1]),a=2;a<l;a+=6)this.globalData.canvasContext.bezierCurveTo(f[a],f[a+1],f[a+2],f[a+3],f[a+4],f[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}u&&this.globalData.renderer.restore()}this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(BaseElement,HBaseElement),HBaseElement.prototype.checkBlendMode=function(){},HBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,HBaseElement.prototype.getBaseElement=function(){return this.baseElement},HBaseElement.prototype.createElements=function(){this.data.hasMask?(this.layerElement=document.createElementNS(svgNS,"svg"),styleDiv(this.layerElement),this.baseElement=this.layerElement,this.maskedElement=this.layerElement):this.layerElement=this.parentContainer,this.transformedElement=this.layerElement,!this.data.ln||4!==this.data.ty&&0!==this.data.ty||(this.layerElement===this.parentContainer&&(this.layerElement=document.createElementNS(svgNS,"g"),this.baseElement=this.layerElement),this.layerElement.setAttribute("id",this.data.ln)),this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.checkParenting()},HBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty)return!1;if(this.currentFrameNum===this.lastNum||!this.isVisible)return this.isVisible;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v,this.firstFrame&&(this.finalTransform.opMdf=!0,this.finalTransform.matMdf=!0);var e,i=this.finalTransform.mat;if(this.hierarchy){var n,r=this.hierarchy.length;for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)this.finalTransform.matMdf=!!this.hierarchy[n].finalTransform.mProp.mdf||this.finalTransform.matMdf,e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else this.isVisible&&this.finalTransform.matMdf&&(t?(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e)):i.cloneFromProps(this.finalTransform.mProp.v.props));return this.data.hasMask&&this.maskManager.renderFrame(i),t&&(e=t.mat.props,i.cloneFromProps(e),this.finalTransform.opacity*=t.opacity,this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf),this.finalTransform.matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=i.toCSS(),this.finalMat=i),this.finalTransform.opMdf&&(this.transformedElement.style.opacity=this.finalTransform.opacity),this.isVisible},HBaseElement.prototype.destroy=function(){this.layerElement=null,this.transformedElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},HBaseElement.prototype.getDomElement=function(){return this.layerElement},HBaseElement.prototype.addMasks=function(t){this.maskManager=new MaskElement(t,this,this.globalData)},HBaseElement.prototype.hide=function(){},HBaseElement.prototype.setMatte=function(){},HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,createElement(HBaseElement,HSolidElement),HSolidElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);var e=document.createElementNS(svgNS,"svg");styleDiv(e),e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),t.appendChild(e),this.layerElement=t,this.transformedElement=t,this.baseElement=t,this.innerElem=t,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),0!==this.data.bm&&this.setBlendMode();var i=document.createElementNS(svgNS,"rect");i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),e.appendChild(i),this.data.hasMask&&(this.maskedElement=i),this.checkParenting()},HSolidElement.prototype.hide=SVGBaseElement.prototype.hide,HSolidElement.prototype.show=SVGBaseElement.prototype.show,HSolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,HSolidElement.prototype.destroy=IImageElement.prototype.destroy,createElement(HBaseElement,HCompElement),HCompElement.prototype.createElements=function(){var t=document.createElement("div");if(styleDiv(t),this.data.ln&&t.setAttribute("id",this.data.ln),t.style.clip="rect(0px, "+this.data.w+"px, "+this.data.h+"px, 0px)",this.data.hasMask){var e=document.createElementNS(svgNS,"svg");styleDiv(e),e.setAttribute("width",this.data.w),e.setAttribute("height",this.data.h);var i=document.createElementNS(svgNS,"g");e.appendChild(i),t.appendChild(e),this.maskedElement=i,this.baseElement=t,this.layerElement=i,this.transformedElement=t}else this.layerElement=t,this.baseElement=this.layerElement,this.transformedElement=t;this.checkParenting()},HCompElement.prototype.hide=ICompElement.prototype.hide,HCompElement.prototype.prepareFrame=ICompElement.prototype.prepareFrame,HCompElement.prototype.setElements=ICompElement.prototype.setElements,HCompElement.prototype.getElements=ICompElement.prototype.getElements,HCompElement.prototype.destroy=ICompElement.prototype.destroy,HCompElement.prototype.renderFrame=function(t){var e,i=this._parent.renderFrame.call(this,t),n=this.layers.length;if(i===!1)return void this.hide();for(this.hidden=!1,e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.firstFrame&&(this.firstFrame=!1)},HCompElement.prototype.checkLayers=BaseRenderer.prototype.checkLayers,HCompElement.prototype.buildItem=HybridRenderer.prototype.buildItem,HCompElement.prototype.checkPendingElements=HybridRenderer.prototype.checkPendingElements,HCompElement.prototype.addPendingElement=HybridRenderer.prototype.addPendingElement,HCompElement.prototype.buildAllItems=BaseRenderer.prototype.buildAllItems,HCompElement.prototype.createItem=HybridRenderer.prototype.createItem,HCompElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,HCompElement.prototype.createImage=HybridRenderer.prototype.createImage,HCompElement.prototype.createComp=HybridRenderer.prototype.createComp,HCompElement.prototype.createSolid=HybridRenderer.prototype.createSolid,HCompElement.prototype.createShape=HybridRenderer.prototype.createShape,HCompElement.prototype.createText=HybridRenderer.prototype.createText,HCompElement.prototype.createBase=HybridRenderer.prototype.createBase,HCompElement.prototype.appendElementInPos=HybridRenderer.prototype.appendElementInPos,createElement(HBaseElement,HShapeElement);var parent=HShapeElement.prototype._parent;extendPrototype(IShapeElement,HShapeElement),HShapeElement.prototype._parent=parent,HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderFrame,HShapeElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);var e=document.createElementNS(svgNS,"svg");styleDiv(e);var i=this.comp.data?this.comp.data:this.globalData.compSize;if(e.setAttribute("width",i.w),e.setAttribute("height",i.h),this.data.hasMask){var n=document.createElementNS(svgNS,"g");t.appendChild(e),e.appendChild(n),this.maskedElement=n,this.layerElement=n,this.shapesContainer=n}else t.appendChild(e),this.layerElement=e,this.shapesContainer=document.createElementNS(svgNS,"g"),this.layerElement.appendChild(this.shapesContainer);this.data.hd||(this.baseElement=t),this.innerElem=t,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0),this.buildExpressionInterface(),this.layerElement=t,this.transformedElement=t,this.shapeCont=e,0!==this.data.bm&&this.setBlendMode(),this.checkParenting()},HShapeElement.prototype.renderFrame=function(t){var e=this.firstFrame;if(this._renderShapeFrame(),this.isVisible&&(this.elemMdf||e)){var i=this.shapeCont.getBBox(),n=!1;this.currentBBox.w!==i.width&&(this.currentBBox.w=i.width,this.shapeCont.setAttribute("width",i.width),n=!0),this.currentBBox.h!==i.height&&(this.currentBBox.h=i.height,this.shapeCont.setAttribute("height",i.height),n=!0),(n||this.currentBBox.x!==i.x||this.currentBBox.y!==i.y)&&(this.currentBBox.w=i.width,this.currentBBox.h=i.height,this.currentBBox.x=i.x,this.currentBBox.y=i.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},createElement(HBaseElement,HTextElement),extendPrototype(ITextElement,HTextElement),HTextElement.prototype.createElements=function(){this.isMasked=this.checkMasks();var t=document.createElement("div");if(styleDiv(t),this.layerElement=t,this.transformedElement=t,this.isMasked){this.renderType="svg";var e=document.createElementNS(svgNS,"svg");styleDiv(e),this.cont=e,this.compW=this.comp.data.w,this.compH=this.comp.data.h,e.setAttribute("width",this.compW),e.setAttribute("height",this.compH);var i=document.createElementNS(svgNS,"g");e.appendChild(i),t.appendChild(e),this.maskedElement=i,this.innerElem=i}else this.renderType="html",this.innerElem=t;this.baseElement=t,this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:this.textProperty.currentData.l?this.textProperty.currentData.l.length:0});var e=this.innerElem.style;e.color=e.fill=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)",t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var i=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.s+"px",
e.lineHeight=t.s+"px",i.fClass)this.innerElem.className=i.fClass;else{e.fontFamily=i.fFamily;var n=t.fWeight,r=t.fStyle;e.fontStyle=r,e.fontWeight=n}var o,s,a=t.l;s=a.length;var l,h,c,u,p=this.mHelper,f="",d=0;for(o=0;o<s;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[d]?l=this.textPaths[d]:(l=document.createElementNS(svgNS,"path"),l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[d]?(h=this.textSpans[d],c=h.children[0]):(h=document.createElement("div"),c=document.createElementNS(svgNS,"svg"),c.appendChild(l),styleDiv(h)))):this.isMasked?l=this.textPaths[d]?this.textPaths[d]:document.createElementNS(svgNS,"text"):this.textSpans[d]?(h=this.textSpans[d],l=this.textPaths[d]):(h=document.createElement("span"),styleDiv(h),l=document.createElement("span"),styleDiv(l),h.appendChild(l)),this.globalData.fontManager.chars){var m,g=this.globalData.fontManager.getCharData(t.t.charAt(o),i.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(m=g?g.data:null,p.reset(),m&&m.shapes&&(u=m.shapes[0].it,p.scale(t.s/100,t.s/100),f=this.createPathShape(p,u),l.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(l);else if(this.innerElem.appendChild(h),m&&m.shapes){document.body.appendChild(c);var y=c.getBBox();c.setAttribute("width",y.width+2),c.setAttribute("height",y.height+2),c.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2)),c.style.transform=c.style.webkitTransform="translate("+(y.x-1)+"px,"+(y.y-1)+"px)",a[o].yOffset=y.y-1,h.appendChild(c)}else c.setAttribute("width",1),c.setAttribute("height",1)}else l.textContent=a[o].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(l):(this.innerElem.appendChild(h),l.style.transform=l.style.webkitTransform="translate3d(0,"+-t.s/1.2+"px,0)");this.isMasked?this.textSpans[d]=l:this.textSpans[d]=h,this.textSpans[d].style.display="block",this.textPaths[d]=l,d+=1}for(;d<this.textSpans.length;)this.textSpans[d].style.display="none",d+=1},HTextElement.prototype.hide=SVGTextElement.prototype.hide,HTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(e===!1)return void this.hide();if(this.hidden&&(this.hidden=!1,this.innerElem.style.display="block",this.layerElement.style.display="block"),this.data.singleShape){if(!this.firstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform.matMdf&&(this.cont.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.cont.style.transform=this.cont.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,n,r=0,o=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;n=s.length;var a,l,h;for(i=0;i<n;i+=1)s[i].n?r+=1:(l=this.textSpans[i],h=this.textPaths[i],a=o[r],r+=1,this.isMasked?l.setAttribute("transform",a.m):l.style.transform=l.style.webkitTransform=a.m,l.style.opacity=a.o,a.sw&&h.setAttribute("stroke-width",a.sw),a.sc&&h.setAttribute("stroke",a.sc),a.fc&&(h.setAttribute("fill",a.fc),h.style.color=a.fc));if(this.isVisible&&(this.elemMdf||this.firstFrame)&&this.innerElem.getBBox){var c=this.innerElem.getBBox();this.currentBBox.w!==c.width&&(this.currentBBox.w=c.width,this.cont.setAttribute("width",c.width)),this.currentBBox.h!==c.height&&(this.currentBBox.h=c.height,this.cont.setAttribute("height",c.height));var u=1;this.currentBBox.w===c.width+2*u&&this.currentBBox.h===c.height+2*u&&this.currentBBox.x===c.x-u&&this.currentBBox.y===c.y-u||(this.currentBBox.w=c.width+2*u,this.currentBBox.h=c.height+2*u,this.currentBBox.x=c.x-u,this.currentBBox.y=c.y-u,this.cont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.cont.style.transform=this.cont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}this.firstFrame&&(this.firstFrame=!1)}},createElement(HBaseElement,HImageElement),HImageElement.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;if(this.data.hasMask){var i=document.createElement("div");styleDiv(i);var n=document.createElementNS(svgNS,"svg");styleDiv(n),n.setAttribute("width",this.assetData.w),n.setAttribute("height",this.assetData.h),i.appendChild(n),this.imageElem=document.createElementNS(svgNS,"image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),n.appendChild(this.imageElem),this.layerElement=i,this.transformedElement=i,this.baseElement=i,this.innerElem=i,this.maskedElement=this.imageElem}else styleDiv(e),this.layerElement=e,this.baseElement=e,this.innerElem=e,this.transformedElement=e;e.src=t,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.checkParenting()},HImageElement.prototype.show=HSolidElement.prototype.show,HImageElement.prototype.hide=HSolidElement.prototype.hide,HImageElement.prototype.renderFrame=HSolidElement.prototype.renderFrame,HImageElement.prototype.destroy=HSolidElement.prototype.destroy,createElement(HBaseElement,HCameraElement),HCameraElement.prototype.setup=function(){var t,e,i=this.comp.threeDElements.length;for(t=0;t<i;t+=1)e=this.comp.threeDElements[t],e.perspectiveElem.style.perspective=e.perspectiveElem.style.webkitPerspective=this.pe.v+"px",e.container.style.transformOrigin=e.container.style.mozTransformOrigin=e.container.style.webkitTransformOrigin="0px 0px 0px",e.perspectiveElem.style.transform=e.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,i=this.firstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)i=!!this.hierarchy[t].finalTransform.mProp.mdf||i;if(i||this.p&&this.p.mdf||this.px&&(this.px.mdf||this.py.mdf||this.pz.mdf)||this.rx.mdf||this.ry.mdf||this.rz.mdf||this.or.mdf||this.a&&this.a.mdf){if(this.mat.reset(),this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var n=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],r=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),o=[n[0]/r,n[1]/r,n[2]/r],s=Math.sqrt(o[2]*o[2]+o[0]*o[0]),a=Math.atan2(o[1],s),l=Math.atan2(o[0],-o[2]);this.mat.rotateY(l).rotateX(-a)}if(this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v),this.hierarchy){var h;for(e=this.hierarchy.length,t=0;t<e;t+=1)h=this.hierarchy[t].finalTransform.mProp.iv.props,this.mat.transform(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],-h[12],-h[13],h[14],h[15])}e=this.comp.threeDElements.length;var c;for(t=0;t<e;t+=1)c=this.comp.threeDElements[t],c.container.style.transform=c.container.style.webkitTransform=this.mat.toCSS()}this.firstFrame=!1},HCameraElement.prototype.destroy=function(){};var Expressions=function(){function t(t){t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer)}var e={};return e.initExpressions=t,e}();expressionsPlugin=Expressions,function(){function t(){return this.pv}function e(t,e,i){if(!this.k||!this.keyframes)return this.pv;var n=this.comp.renderedFrame,r=this.keyframes,o=r[r.length-1].t;if(n<=o)return this.pv;var s,a;i?(s=e?Math.abs(o-elem.comp.globalData.frameRate*e):Math.max(0,o-this.elem.data.ip),a=o-s):((!e||e>r.length-1)&&(e=r.length-1),a=r[r.length-1-e].t,s=o-a);var l,h,c,u=this.offsetTime||0;if("pingpong"===t.toLowerCase()){var p=Math.floor((n-a)/s);if(p%2!==0)return this.getValueAtTime((s-(n-a)%s+a-u)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var f=this.getValueAtTime(a/this.comp.globalData.frameRate,0),d=this.getValueAtTime(o/this.comp.globalData.frameRate,0),m=this.getValueAtTime(((n-a)%s+a)/this.comp.globalData.frameRate,0),g=Math.floor((n-a)/s);if(this.pv.length){for(c=new Array(f.length),h=c.length,l=0;l<h;l+=1)c[l]=(d[l]-f[l])*g+m[l];return c}return(d-f)*g+m}if("continue"===t){var y=this.getValueAtTime(o/this.comp.globalData.frameRate,0),v=this.getValueAtTime((o-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(c=new Array(y.length),h=c.length,l=0;l<h;l+=1)c[l]=y[l]+(y[l]-v[l])*((n-o)/this.comp.globalData.frameRate)/5e-4;return c}return y+(y-v)*((n-o)/.001)}}return this.getValueAtTime(((n-a)%s+a-u)/this.comp.globalData.frameRate,0)}function i(t,e,i){if(!this.k)return this.pv;var n=time*elem.comp.globalData.frameRate,r=this.keyframes,o=r[0].t,s=this.offsetTime||0;if(n>=o)return this.pv;var a,l;i?(a=e?Math.abs(elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-o),l=o+a):((!e||e>r.length-1)&&(e=r.length-1),l=r[e].t,a=l-o);var h,c,u;if("pingpong"===t){var p=Math.floor((o-n)/a);if(p%2===0)return this.getValueAtTime(((o-n)%a+o-s)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var f=this.getValueAtTime(o/this.comp.globalData.frameRate,0),d=this.getValueAtTime(l/this.comp.globalData.frameRate,0),m=this.getValueAtTime((a-(o-n)%a+o)/this.comp.globalData.frameRate,0),g=Math.floor((o-n)/a)+1;if(this.pv.length){for(u=new Array(f.length),c=u.length,h=0;h<c;h+=1)u[h]=m[h]-(d[h]-f[h])*g;return u}return m-(d-f)*g}if("continue"===t){var y=this.getValueAtTime(o/this.comp.globalData.frameRate,0),v=this.getValueAtTime((o+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(u=new Array(y.length),c=u.length,h=0;h<c;h+=1)u[h]=y[h]+(y[h]-v[h])*(o-n)/.001;return u}return y+(y-v)*(o-n)/.001}}return this.getValueAtTime((a-(o-n)%a+o-s)/this.comp.globalData.frameRate,0)}function n(t){if(this._cachingAtTime||(this._cachingAtTime={lastValue:-99999,lastIndex:0}),t!==this._cachingAtTime.lastFrame){t*=this.elem.globalData.frameRate,t-=this.offsetTime;var e=this._caching.lastFrame<t?this._caching.lastIndex:0,i=this.interpolateValue(t,e,this.pv,this._cachingAtTime);this._cachingAtTime.lastIndex=i.iterationIndex,this._cachingAtTime.value=i.value,this._cachingAtTime.lastFrame=t}return this._cachingAtTime.value}function r(t){if(void 0!==this.vel)return this.vel;var e,i=-.01,n=this.getValueAtTime(t),r=this.getValueAtTime(t+i);if(n.length){e=Array.apply(null,{length:n.length});var o;for(o=0;o<n.length;o+=1)e[o]=(r[o]-n[o])/i}else e=(r-n)/i;return e}function o(t){this.propertyGroup=t}function s(t,e,i){e.x&&(i.k=!0,i.x=!0,i.getValue&&(i.getPreValue=i.getValue),i.getValue=ExpressionManager.initiateExpression.bind(i)(t,e,i))}function a(t){console.log("time:",t)}function l(t){}function h(t){if(this._shapeValueAtTime||(this._lastIndexAtTime=0,this._lastTimeAtTime=-999999,this._shapeValueAtTime=shape_pool.clone(this.pv)),t!==this._lastTimeAtTime){this._lastTimeAtTime=t,t*=this.elem.globalData.frameRate;var e=this.interpolateShape(t,this._lastIndexAtTime,this._shapeValueAtTime,!1);this._lastIndexAtTime=e.iterationIndex}return this._shapeValueAtTime}var c=function(){function e(t,e){return this.textIndex=t+1,this.textTotal=e,this.getValue(),this.v}return function(i,a){this.pv=1,this.comp=i.comp,this.elem=i,this.mult=.01,this.type="textSelector",this.textTotal=a.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],s.bind(this)(i,a,this),this.getMult=e,this.getVelocityAtTime=r,this.kf?this.getValueAtTime=n.bind(this):this.getValueAtTime=t.bind(this),this.setGroupProperty=o}}(),u=PropertyFactory.getProp;PropertyFactory.getProp=function(h,c,p,f,d){var m=u(h,c,p,f,d);2===p?m.dynamicProperties.length?m.getValueAtTime=a.bind(m):m.getValueAtTime=l.bind(m):m.kf?m.getValueAtTime=n.bind(m):m.getValueAtTime=t.bind(m),m.setGroupProperty=o,m.loopOut=e,m.loopIn=i,m.getVelocityAtTime=r,m.numKeys=1===c.a?c.k.length:0;var g=m.k;return void 0!==c.ix&&Object.defineProperty(m,"propertyIndex",{get:function(){return c.ix}}),s(h,c,m),!g&&m.x&&d.push(m),m};var p=ShapePropertyFactory.getConstructorFunction(),f=ShapePropertyFactory.getKeyframedConstructorFunction();p.prototype.vertices=function(t,e){var i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0));var n,r=i._length,o=i[t],s=i.v,a=Array.apply(null,{length:r});for(n=0;n<r;n+=1)"i"===t||"o"===t?a[n]=[o[n][0]-s[n][0],o[n][1]-s[n][1]]:a[n]=[o[n][0],o[n][1]];return a},p.prototype.points=function(t){return this.vertices("v",t)},p.prototype.inTangents=function(t){return this.vertices("i",t)},p.prototype.outTangents=function(t){return this.vertices("o",t)},p.prototype.isClosed=function(){return this.v.c},p.prototype.pointOnPath=function(t,e){var i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(i));for(var n,r=this._segmentsLength,o=r.lengths,s=r.totalLength*t,a=0,l=o.length,h=0;a<l;){if(h+o[a].addedLength>s){n=o[a].segments;var c=a,u=i.c&&a===l-1?0:a+1,p=(s-h)/o[a].addedLength,f=bez.getPointInSegment(i.v[c],i.v[u],i.o[c],i.i[u],p,o[a]);break}h+=o[a].addedLength,a+=1}return f||(f=i.c?[i.v[0][0],i.v[0][1]]:[i.v[i._length-1][0],i.v[i._length-1][1]]),f},p.prototype.vectorOnPath=function(t,e,i){t=1==t?this.v.c?0:.999:t;var n=this.pointOnPath(t,e),r=this.pointOnPath(t+.001,e),o=r[0]-n[0],s=r[1]-n[1],a=Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),l="tangent"===i?[o/a,s/a]:[-s/a,o/a];return l},p.prototype.tangentOnPath=function(t,e){return this.vectorOnPath(t,e,"tangent")},p.prototype.normalOnPath=function(t,e){return this.vectorOnPath(t,e,"normal")},p.prototype.setGroupProperty=o,p.prototype.getValueAtTime=t,f.prototype.vertices=p.prototype.vertices,f.prototype.points=p.prototype.points,f.prototype.inTangents=p.prototype.inTangents,f.prototype.outTangents=p.prototype.outTangents,f.prototype.isClosed=p.prototype.isClosed,f.prototype.pointOnPath=p.prototype.pointOnPath,f.prototype.vectorOnPath=p.prototype.vectorOnPath,f.prototype.tangentOnPath=p.prototype.tangentOnPath,f.prototype.normalOnPath=p.prototype.normalOnPath,f.prototype.setGroupProperty=p.prototype.setGroupProperty,f.prototype.getValueAtTime=h;var d=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,i,n,r){var o=d(t,e,i,n,r),a=o.k;return void 0!==e.ix&&Object.defineProperty(o,"propertyIndex",{get:function(){return e.ix}}),3===i?s(t,e.pt,o):4===i&&s(t,e.ks,o),!a&&o.x&&n.push(o),o};var m=PropertyFactory.getTextSelectorProp;PropertyFactory.getTextSelectorProp=function(t,e,i){return 1===e.t?new c(t,e,i):m(t,e,i)}}(),function(){function t(){return!!this.data.d.x&&(this.comp=this.elem.comp,this.getValue&&(this.getPreValue=this.getValue),this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.getValue=this.getExpressionValue,!0)}TextProperty.prototype.searchProperty=function(){return this.kf=this.searchExpressions()||this.data.d.k.length>1,this.kf},TextProperty.prototype.getExpressionValue=function(t){this.calculateExpression(),this.mdf&&(this.currentData.t=this.v.toString(),this.completeTextData(this.currentData))},TextProperty.prototype.searchExpressions=t}();var ExpressionManager=function(){function duplicatePropertyValue(t,e){if(e=e||1,"number"==typeof t||t instanceof Number)return t*e;if(t.i)return JSON.parse(JSON.stringify(t));var i,n=Array.apply(null,{length:t.length}),r=t.length;for(i=0;i<r;i+=1)n[i]=t[i]*e;return n}function shapesEqual(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var i,n=t._length;for(i=0;i<n;i+=1)if(t.v[i][0]!==e.v[i][0]||t.v[i][1]!==e.v[i][1]||t.o[i][0]!==e.o[i][0]||t.o[i][1]!==e.o[i][1]||t.i[i][0]!==e.i[i][0]||t.i[i][1]!==e.i[i][1])return!1;return!0}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e||t instanceof Number)return-t;if(t.constructor===Array){var i,n=t.length,r=[];for(i=0;i<n;i+=1)r[i]=-t[i];return r}}function sum(t,e){var i=typeof t,n=typeof e;if("string"===i||"string"===n)return t+e;if(("number"===i||"boolean"===i||"string"===i||t instanceof Number)&&("number"===n||"boolean"===n||"string"===n||e instanceof Number))return t+e;if(t.constructor===Array&&("number"===n||"boolean"===n||"string"===n||e instanceof Number))return t[0]=t[0]+e,t;if(("number"===i||"boolean"===i||"string"===i||t instanceof Number)&&e.constructor===Array)return e[0]=t+e[0],e;if(t.constructor===Array&&e.constructor===Array){for(var r=0,o=t.length,s=e.length,a=[];r<o||r<s;)("number"==typeof t[r]||t[r]instanceof Number)&&("number"==typeof e[r]||e[r]instanceof Number)?a[r]=t[r]+e[r]:a[r]=void 0==e[r]?t[r]:t[r]||e[r],r+=1;return a}return 0}function sub(t,e){var i=typeof t,n=typeof e;if(("number"===i||"boolean"===i||"string"===i||t instanceof Number)&&("number"===n||"boolean"===n||"string"===n||e instanceof Number))return"string"===i&&(t=parseInt(t)),"string"===n&&(e=parseInt(e)),t-e;if(t.constructor===Array&&("number"===n||"boolean"===n||"string"===n||e instanceof Number))return t[0]=t[0]-e,t;if(("number"===i||"boolean"===i||"string"===i||t instanceof Number)&&e.constructor===Array)return e[0]=t-e[0],e;if(t.constructor===Array&&e.constructor===Array){for(var r=0,o=t.length,s=e.length,a=[];r<o||r<s;)"number"==typeof t[r]||t[r]instanceof Number?a[r]=t[r]-e[r]:a[r]=void 0==e[r]?t[r]:t[r]||e[r],r+=1;return a}return 0}function mul(t,e){var i,n=typeof t,r=typeof e;if(("number"===n||"boolean"===n||"string"===n||t instanceof Number)&&("number"===r||"boolean"===r||"string"===r||e instanceof Number))return t*e;var o,s;if(t.constructor===Array&&("number"===r||"boolean"===r||"string"===r||e instanceof Number)){for(s=t.length,i=Array.apply(null,{length:s}),o=0;o<s;o+=1)i[o]=t[o]*e;return i}if(("number"===n||"boolean"===n||"string"===n||t instanceof Number)&&e.constructor===Array){for(s=e.length,i=Array.apply(null,{length:s}),o=0;o<s;o+=1)i[o]=t*e[o];return i}return 0}function div(t,e){var i,n=typeof t,r=typeof e;if(("number"===n||"boolean"===n||"string"===n||t instanceof Number)&&("number"===r||"boolean"===r||"string"===r||e instanceof Number))return t/e;var o,s;if(t.constructor===Array&&("number"===r||"boolean"===r||"string"===r||e instanceof Number)){for(s=t.length,i=Array.apply(null,{length:s}),o=0;o<s;o+=1)i[o]=t[o]/e;return i}if(("number"===n||"boolean"===n||"string"===n||t instanceof Number)&&e.constructor===Array){for(s=e.length,i=Array.apply(null,{length:s}),o=0;o<s;o+=1)i[o]=t/e[o];return i}return 0}function mod(t,e){return"string"==typeof t&&(t=parseInt(t)),"string"==typeof e&&(e=parseInt(e)),t%e}function clamp(t,e,i){if(e>i){var n=i;i=e,e=n}return Math.min(Math.max(t,e),i)}function radiansToDegrees(t){return t/degToRads}function degreesToRadians(t){return t*degToRads}function length(t,e){if("number"==typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var i,n=Math.min(t.length,e.length),r=0;for(i=0;i<n;i+=1)r+=Math.pow(e[i]-t[i],2);return Math.sqrt(r)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,i,n=t[0],r=t[1],o=t[2],s=Math.max(n,r,o),a=Math.min(n,r,o),l=(s+a)/2;if(s==a)e=i=0;else{var h=s-a;switch(i=l>.5?h/(2-s-a):h/(s+a),s){case n:e=(r-o)/h+(r<o?6:0);break;case r:e=(o-n)/h+2;break;case o:e=(n-r)/h+4}e/=6}return[e,i,l,t[3]]}function hslToRgb(t){function e(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var i,n,r,o=t[0],s=t[1],a=t[2];if(0==s)i=n=r=a;else{var l=a<.5?a*(1+s):a+s-a*s,h=2*a-l;i=e(h,l,o+1/3),n=e(h,l,o),r=e(h,l,o-1/3)}return[i,n,r,t[3]]}function linear(t,e,i,n,r){if(void 0===n||void 0===r)return linear(t,0,1,e,i);if(t<=e)return n;if(t>=i)return r;var o=i===e?0:(t-e)/(i-e);if(!n.length)return n+(r-n)*o;var s,a=n.length,l=Array.apply(null,{length:a});for(s=0;s<a;s+=1)l[s]=n[s]+(r[s]-n[s])*o;return l}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,n=e.length;t||(t=Array.apply(null,{length:n}));var r=Array.apply(null,{length:n}),o=BMMath.random();for(i=0;i<n;i+=1)r[i]=t[i]+o*(e[i]-t[i]);return r}void 0===t&&(t=0);var s=BMMath.random();return t+s*(e-t)}function createPath(t,e,n,r){e=e&&e.length?e:t,n=n&&n.length?n:t;var o=shape_pool.newShape(),s=t.length;for(o.setPathData(r,s),i=0;i<s;i+=1)o.setTripleAt(t[i][0],t[i][1],n[i][0]+t[i][0],n[i][1]+t[i][1],e[i][0]+t[i][0],e[i][1]+t[i][1],i,!0);return o}function initiateExpression(elem,data,property){function lookAt(t,e){var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],n=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads,r=-Math.atan2(i[1],i[2])/degToRads;return[r,n,0]}function easeOut(t,e,i){return-(i-e)*t*(t-2)+e}function nearestKey(t){var e,i,n,r=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(i=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)i=1,n=data.k[0].t;else{for(e=0;e<r-1;e+=1){if(t===data.k[e].t){i=e+1,n=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(i=e+2,n=data.k[e+1].t):(i=e+1,n=data.k[e].t);break}}i===-1&&(i=e+1,n=data.k[e].t)}else i=0,n=0;var o={};return o.index=i,o.time=n/elem.comp.globalData.frameRate,o}function key(t){var e,i,n;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate};var r;for(r=t!==data.k.length-1||data.k[t].h?data.k[t].s:data.k[t-1].e,n=r.length,i=0;i<n;i+=1)e[i]=r[i];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function executeExpression(){if(_needsRandom&&seedRandom(randSeed),this.frameExpressionId!==elem.globalData.frameId||"textSelector"===this.type){if(this.lock)return this.v=duplicatePropertyValue(this.pv,this.mult),!0;"textSelector"===this.type&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),anchorPoint=transform.anchorPoint),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!(!elem.hierarchy||!elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),this.lock=!0,this.getPreValue&&this.getPreValue(),value=this.pv,time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),bindedFn(),this.frameExpressionId=elem.globalData.frameId;var t,e;if(this.mult)if("number"==typeof this.v||this.v instanceof Number||this.v instanceof String||"string"==typeof this.v)this.v*=this.mult;else if(1===this.v.length)this.v=this.v[0]*this.mult;else for(e=this.v.length,value===this.v&&(this.v=2===e?[value[0],value[1]]:[value[0],value[1],value[2]]),t=0;t<e;t+=1)this.v[t]*=this.mult;if(1===this.v.length&&(this.v=this.v[0]),"number"==typeof this.v||this.v instanceof Number||this.v instanceof String||"string"==typeof this.v)this.lastValue!==this.v&&(this.lastValue=this.v,this.mdf=!0);else if(this.v._length)shapesEqual(this.v,this.localShapeCollection.shapes[0])||(this.mdf=!0,this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(shape_pool.clone(this.v)));else for(e=this.v.length,t=0;t<e;t+=1)this.v[t]!==this.lastValue[t]&&(this.lastValue[t]=this.v[t],this.mdf=!0);this.lock=!1}}var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,content,effect,thisComp=elem.comp,thisProperty=property;elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,loopIn,loop_in,loopOut,loop_out,toWorld,fromWorld,fromComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,fn=new Function,fn=eval("[function(){"+val+";if($bm_rt.__shapeObject){this.v=shape_pool.clone($bm_rt.v);}else{this.v=$bm_rt;}}]")[0],bindedFn=fn.bind(this),numKeys=property.kf?data.k.length:0,wiggle=function(t,e){var i,n,r=this.pv.length?this.pv.length:1,o=Array.apply(null,{len:r});for(n=0;n<r;n+=1)o[n]=0;t=5;var s=Math.floor(time*t);for(i=0,n=0;i<s;){for(n=0;n<r;n+=1)o[n]+=-e+2*e*BMMath.random();i+=1}var a=time*t,l=a-Math.floor(a),h=Array.apply({length:r});if(r>1){for(n=0;n<r;n+=1)h[n]=this.pv[n]+o[n]+(-e+2*e*BMMath.random())*l;return h}return this.pv+o[0]+(-e+2*e*BMMath.random())*l}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut);var loopInDuration=function(t,e){return loopIn(t,e,!0)}.bind(this),loopOutDuration=function(t,e){return loopOut(t,e,!0)}.bind(this);this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random());return executeExpression}var ob={},Math=BMMath,window=null,document=null,add=sum,radians_to_degrees=radiansToDegrees,degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];return ob.initiateExpression=initiateExpression,ob}(),ShapeExpressionInterface=function(){function t(t,e,i){return d(t,e,i)}function e(t,e,i){return g(t,e,i)}function i(t,e,i){return y(t,e,i)}function n(t,e,i){return v(t,e,i)}function r(t,e,i){return _(t,e,i)}function o(t,e,i){return b(t,e,i)}function s(t,e,i){return T(t,e,i)}function a(t,e,i){return E(t,e,i)}function l(t,e,i){return x(t,e,i)}function h(t,e,i){return S(t,e,i)}function c(t,e,i){return w(t,e,i)}function u(t,e,i){return A(t,e,i)}function p(t,e,i){var n,r=[],o=t?t.length:0;for(n=0;n<o;n+=1)"gr"==t[n].ty?r.push(ShapeExpressionInterface.createGroupInterface(t[n],e[n],i)):"fl"==t[n].ty?r.push(ShapeExpressionInterface.createFillInterface(t[n],e[n],i)):"st"==t[n].ty?r.push(ShapeExpressionInterface.createStrokeInterface(t[n],e[n],i)):"tm"==t[n].ty?r.push(ShapeExpressionInterface.createTrimInterface(t[n],e[n],i)):"tr"==t[n].ty||("el"==t[n].ty?r.push(ShapeExpressionInterface.createEllipseInterface(t[n],e[n],i)):"sr"==t[n].ty?r.push(ShapeExpressionInterface.createStarInterface(t[n],e[n],i)):"sh"==t[n].ty?r.push(ShapeExpressionInterface.createPathInterface(t[n],e[n],i)):"rc"==t[n].ty?r.push(ShapeExpressionInterface.createRectInterface(t[n],e[n],i)):"rd"==t[n].ty?r.push(ShapeExpressionInterface.createRoundedInterface(t[n],e[n],i)):"rp"==t[n].ty&&r.push(ShapeExpressionInterface.createRepatearInterface(t[n],e[n],i)));return r}var f={createShapeInterface:t,createGroupInterface:e,createTrimInterface:r,createStrokeInterface:n,createTransformInterface:o,createEllipseInterface:s,createStarInterface:a,createRectInterface:l,createRoundedInterface:h,createRepatearInterface:c,createPathInterface:u,createFillInterface:i},d=function(){return function(t,e,i){function n(t){if("number"==typeof t)return r[t-1];for(var e=0,i=r.length;e<i;){if(r[e]._name===t)return r[e];e+=1}}var r;return n.propertyGroup=i,r=p(t,e,n),n}}(),m=function(){return function(t,e,i){var n,r=function(t){for(var e=0,i=n.length;e<i;){if(n[e]._name===t||n[e].mn===t||n[e].propertyIndex===t||n[e].ix===t||n[e].ind===t)return n[e];e+=1}if("number"==typeof t)return n[t-1]};return r.propertyGroup=function(t){return 1===t?r:i(t-1)},n=p(t.it,e.it,r.propertyGroup),r.numProperties=n.length,r.propertyIndex=t.cix,r}}(),g=function(){return function(t,e,i){var n=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return n.content;case"ADBE Vector Transform Group":case 3:default:return n.transform}};n.propertyGroup=function(t){return 1===t?n:i(t-1)};var r=m(t,e,n.propertyGroup),o=ShapeExpressionInterface.createTransformInterface(t.it[t.it.length-1],e.it[e.it.length-1],n.propertyGroup);return n.content=r,n.transform=o,Object.defineProperty(n,"_name",{get:function(){return t.nm}}),n.numProperties=t.np,n.propertyIndex=t.ix,n.nm=t.nm,n.mn=t.mn,n}}(),y=function(){return function(t,e,i){function n(t){return"Color"===t||"color"===t?n.color:"Opacity"===t||"opacity"===t?n.opacity:void 0}return Object.defineProperty(n,"color",{get:function(){return ExpressionValue(e.c,1/e.c.mult,"color")}}),Object.defineProperty(n,"opacity",{get:function(){return ExpressionValue(e.o,100)}}),Object.defineProperty(n,"_name",{value:t.nm}),Object.defineProperty(n,"mn",{value:t.mn}),e.c.setGroupProperty(i),e.o.setGroupProperty(i),n}}(),v=function(){return function(t,e,i){function n(t){return 1===t?f:i(t-1)}function r(t){return 1===t?h:n(t-1)}function o(i){Object.defineProperty(h,t.d[i].nm,{get:function(){return ExpressionValue(e.d.dataProps[i].p)}})}function s(t){return"Color"===t||"color"===t?s.color:"Opacity"===t||"opacity"===t?s.opacity:"Stroke Width"===t||"stroke width"===t?s.strokeWidth:void 0}var a,l=t.d?t.d.length:0,h={};for(a=0;a<l;a+=1)o(a),e.d.dataProps[a].p.setGroupProperty(r);return Object.defineProperty(s,"color",{get:function(){return ExpressionValue(e.c,1/e.c.mult,"color")}}),Object.defineProperty(s,"opacity",{get:function(){return ExpressionValue(e.o,100)}}),Object.defineProperty(s,"strokeWidth",{get:function(){return ExpressionValue(e.w)}}),Object.defineProperty(s,"dash",{get:function(){return h}}),Object.defineProperty(s,"_name",{value:t.nm}),Object.defineProperty(s,"mn",{value:t.mn}),e.c.setGroupProperty(n),e.o.setGroupProperty(n),e.w.setGroupProperty(n),s}}(),_=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return e===t.e.ix||"End"===e||"end"===e?r.end:e===t.s.ix?r.start:e===t.o.ix?r.offset:void 0}return r.propertyIndex=t.ix,e.s.setGroupProperty(n),e.e.setGroupProperty(n),e.o.setGroupProperty(n),r.propertyIndex=t.ix,Object.defineProperty(r,"start",{get:function(){return ExpressionValue(e.s,1/e.s.mult)}}),Object.defineProperty(r,"end",{get:function(){return ExpressionValue(e.e,1/e.e.mult)}}),Object.defineProperty(r,"offset",{get:function(){return ExpressionValue(e.o)}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),b=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.a.ix===e?r.anchorPoint:t.o.ix===e?r.opacity:t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.s.ix===e?r.scale:t.sk&&t.sk.ix===e?r.skew:t.sa&&t.sa.ix===e?r.skewAxis:"Opacity"===e?r.opacity:"Position"===e?r.position:"Anchor Point"===e?r.anchorPoint:"Scale"===e?r.scale:"Rotation"===e||"ADBE Vector Rotation"===e?r.rotation:"Skew"===e?r.skew:"Skew Axis"===e?r.skewAxis:void 0}e.transform.mProps.o.setGroupProperty(n),e.transform.mProps.p.setGroupProperty(n),e.transform.mProps.a.setGroupProperty(n),e.transform.mProps.s.setGroupProperty(n),e.transform.mProps.r.setGroupProperty(n),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(n),e.transform.mProps.sa.setGroupProperty(n)),e.transform.op.setGroupProperty(n),Object.defineProperty(r,"opacity",{get:function(){return ExpressionValue(e.transform.mProps.o,1/e.transform.mProps.o.mult)}}),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(e.transform.mProps.p)}}),Object.defineProperty(r,"anchorPoint",{get:function(){return ExpressionValue(e.transform.mProps.a);
}});return Object.defineProperty(r,"scale",{get:function(){return ExpressionValue(e.transform.mProps.s,1/e.transform.mProps.s.mult)}}),Object.defineProperty(r,"rotation",{get:function(){return ExpressionValue(e.transform.mProps.r,1/e.transform.mProps.r.mult)}}),Object.defineProperty(r,"skew",{get:function(){return ExpressionValue(e.transform.mProps.sk)}}),Object.defineProperty(r,"skewAxis",{get:function(){return ExpressionValue(e.transform.mProps.sa)}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.ty="tr",r.mn=t.mn,r}}(),T=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.p.ix===e?r.position:t.s.ix===e?r.size:void 0}r.propertyIndex=t.ix;var o="tm"===e.sh.ty?e.sh.prop:e.sh;return o.s.setGroupProperty(n),o.p.setGroupProperty(n),Object.defineProperty(r,"size",{get:function(){return ExpressionValue(o.s)}}),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(o.p)}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),E=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.pt.ix===e?r.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?r.outerRadius:t.os.ix===e?r.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?r.innerRoundness:void 0:r.innerRadius}var o="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,o.or.setGroupProperty(n),o.os.setGroupProperty(n),o.pt.setGroupProperty(n),o.p.setGroupProperty(n),o.r.setGroupProperty(n),t.ir&&(o.ir.setGroupProperty(n),o.is.setGroupProperty(n)),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(o.p)}}),Object.defineProperty(r,"rotation",{get:function(){return ExpressionValue(o.r,1/o.r.mult)}}),Object.defineProperty(r,"points",{get:function(){return ExpressionValue(o.pt)}}),Object.defineProperty(r,"outerRadius",{get:function(){return ExpressionValue(o.or)}}),Object.defineProperty(r,"outerRoundness",{get:function(){return ExpressionValue(o.os)}}),Object.defineProperty(r,"innerRadius",{get:function(){return o.ir?ExpressionValue(o.ir):0}}),Object.defineProperty(r,"innerRoundness",{get:function(){return o.is?ExpressionValue(o.is,1/o.is.mult):0}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),x=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.roundness:t.s.ix===e||"Size"===e?r.size:void 0}var o="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,o.p.setGroupProperty(n),o.s.setGroupProperty(n),o.r.setGroupProperty(n),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(o.p)}}),Object.defineProperty(r,"roundness",{get:function(){return ExpressionValue(o.r)}}),Object.defineProperty(r,"size",{get:function(){return ExpressionValue(o.s)}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),S=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){if(t.r.ix===e||"Round Corners 1"===e)return r.radius}var o=e;return r.propertyIndex=t.ix,o.rd.setGroupProperty(n),Object.defineProperty(r,"radius",{get:function(){return ExpressionValue(o.rd)}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),w=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.c.ix===e||"Copies"===e?r.copies:t.o.ix===e||"Offset"===e?r.offset:void 0}var o=e;return r.propertyIndex=t.ix,o.c.setGroupProperty(n),o.o.setGroupProperty(n),Object.defineProperty(r,"copies",{get:function(){return ExpressionValue(o.c)}}),Object.defineProperty(r,"offset",{get:function(){return ExpressionValue(o.o)}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),A=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(t){if("Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t)return r.path}var o=e.sh;return o.setGroupProperty(n),Object.defineProperty(r,"path",{get:function(){return o.k&&o.getValue(),o}}),Object.defineProperty(r,"shape",{get:function(){return o.k&&o.getValue(),o}}),Object.defineProperty(r,"_name",{value:t.nm}),Object.defineProperty(r,"ix",{value:t.ix}),Object.defineProperty(r,"mn",{value:t.mn}),r}}();return f}(),TextExpressionInterface=function(){return function(t){function e(){}var i,n;return Object.defineProperty(e,"sourceText",{get:function(){var e=t.textProperty.currentData.t;return t.textProperty.currentData.t!==i&&(t.textProperty.currentData.t=i,n=new String(e),n.value=e?e:new String(e)),n}}),e}}(),LayerExpressionInterface=function(){function t(t,e){var i=new Matrix;i.reset();var n;if(n=e?this._elem.finalTransform.mProp:this._elem.finalTransform.mProp,n.applyToMatrix(i),this._elem.hierarchy&&this._elem.hierarchy.length){var r,o=this._elem.hierarchy.length;for(r=0;r<o;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(i);return i.applyToPointArray(t[0],t[1],t[2]||0)}return i.applyToPointArray(t[0],t[1],t[2]||0)}function e(t,e){var i=new Matrix;i.reset();var n;if(n=e?this._elem.finalTransform.mProp:this._elem.finalTransform.mProp,n.applyToMatrix(i),this._elem.hierarchy&&this._elem.hierarchy.length){var r,o=this._elem.hierarchy.length;for(r=0;r<o;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(i);return i.inversePoint(t)}return i.inversePoint(t)}function i(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}return function(n){function r(t){s.mask=new MaskManagerInterface(t,n)}function o(t){s.effect=t}function s(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return s.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return a;case 4:case"ADBE Effect Parade":return s.effect}}var a=TransformExpressionInterface(n.transform);return s.toWorld=t,s.fromWorld=e,s.toComp=t,s.fromComp=i,s.sourceRectAtTime=n.sourceRectAtTime.bind(n),s._elem=n,Object.defineProperty(s,"hasParent",{get:function(){return!!n.hierarchy}}),Object.defineProperty(s,"parent",{get:function(){return n.hierarchy[0].layerInterface}}),Object.defineProperty(s,"rotation",{get:function(){return a.rotation}}),Object.defineProperty(s,"scale",{get:function(){return a.scale}}),Object.defineProperty(s,"position",{get:function(){return a.position}}),Object.defineProperty(s,"anchorPoint",{get:function(){return a.anchorPoint}}),Object.defineProperty(s,"transform",{get:function(){return a}}),Object.defineProperty(s,"width",{get:function(){return 0===n.data.ty?n.data.w:100}}),Object.defineProperty(s,"height",{get:function(){return 0===n.data.ty?n.data.h:100}}),Object.defineProperty(s,"source",{get:function(){return n.data.refId}}),Object.defineProperty(s,"index",{get:function(){return n.data.ind}}),Object.defineProperty(s,"_name",{value:n.data.nm}),Object.defineProperty(s,"content",{get:function(){return s.shapeInterface}}),Object.defineProperty(s,"active",{get:function(){return n.isVisible}}),Object.defineProperty(s,"text",{get:function(){return s.textInterface}}),s.registerMaskInterface=r,s.registerEffectsInterface=o,s}}(),CompExpressionInterface=function(){return function(t){function e(e){for(var i=0,n=t.layers.length;i<n;){if(t.layers[i].nm===e||t.layers[i].ind===e)return t.elements[i].layerInterface;i+=1}return{active:!1}}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.globalData.compSize.h,e.width=t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e}}(),TransformExpressionInterface=function(){return function(t){function e(i){switch(i){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity}}return Object.defineProperty(e,"rotation",{get:function(){return t.rotation}}),Object.defineProperty(e,"scale",{get:function(){return t.scale}}),Object.defineProperty(e,"position",{get:function(){return t.position}}),Object.defineProperty(e,"xPosition",{get:function(){return t.xPosition}}),Object.defineProperty(e,"yPosition",{get:function(){return t.yPosition}}),Object.defineProperty(e,"anchorPoint",{get:function(){return t.anchorPoint}}),Object.defineProperty(e,"opacity",{get:function(){return t.opacity}}),Object.defineProperty(e,"skew",{get:function(){return t.skew}}),Object.defineProperty(e,"skewAxis",{get:function(){return t.skewAxis}}),e}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,i=this.compositions.length;e<i;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(t,i){if(t.effects){var n,r=[],o=t.data.ef,s=t.effects.effectElements.length;for(n=0;n<s;n+=1)r.push(e(o[n],t.effects.effectElements[n],i,t));return function(e){for(var i=t.data.ef,n=0,o=i.length;n<o;){if(e===i[n].nm||e===i[n].mn||e===i[n].ix)return r[n];n+=1}}}}function e(t,n,r,o){function s(t){return 1===t?c:r(t-1)}var a,l=[],h=t.ef.length;for(a=0;a<h;a+=1)5===t.ef[a].ty?l.push(e(t.ef[a],n.effectElements[a],n.effectElements[a].propertyGroup,o)):l.push(i(n.effectElements[a],t.ef[a].ty,o,s));var c=function(e){for(var i=t.ef,n=0,r=i.length;n<r;){if(e===i[n].nm||e===i[n].mn||e===i[n].ix)return 5===i[n].ty?l[n]:l[n]();n+=1}return l[0]()};return c.propertyGroup=s,"ADBE Color Control"===t.mn&&Object.defineProperty(c,"color",{get:function(){return l[0]()}}),Object.defineProperty(c,"numProperties",{get:function(){return t.np}}),c.active=0!==t.en,c}function i(t,e,i,n){function r(){return 10===e?i.comp.compInterface(t.p.v):ExpressionValue(t.p)}return t.p.setGroupProperty&&t.p.setGroupProperty(n),r}var n={createEffectsInterface:t};return n}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}});var e=function(e,i){var n,r=Array.apply(null,{length:e.viewData.length}),o=e.viewData.length;for(n=0;n<o;n+=1)r[n]=new t(e.viewData[n],e.masksProperties[n]);var s=function(t){for(n=0;n<o;){if(e.masksProperties[n].nm===t)return r[n];n+=1}};return s};return e}(),ExpressionValue=function(){return function(t,e,i){var n;t.k&&t.getValue();var r,o,s;if(i){if("color"===i){for(o=4,n=Array.apply(null,{length:o}),s=Array.apply(null,{length:o}),r=0;r<o;r+=1)n[r]=s[r]=e&&r<3?t.v[r]*e:1;n.value=s}}else if("number"==typeof t.v||t.v instanceof Number)n=e?new Number(t.v*e):new Number(t.v),n.value=e?t.v*e:t.v;else{for(o=t.v.length,n=Array.apply(null,{length:o}),s=Array.apply(null,{length:o}),r=0;r<o;r+=1)n[r]=s[r]=e?t.v[r]*e:t.v[r];n.value=s}return n.numKeys=t.keyframes?t.keyframes.length:0,n.key=function(e){return n.numKeys?t.keyframes[e-1].t:0},n.valueAtTime=t.getValueAtTime,n.propertyGroup=t.propertyGroup,n}}();GroupEffect.prototype.getValue=function(){this.mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.mdf=!!this.dynamicProperties[t].mdf||this.mdf},GroupEffect.prototype.init=function(t,e,i){this.data=t,this.mdf=!1,this.effectElements=[];var n,r,o=this.data.ef.length,s=this.data.ef;for(n=0;n<o;n+=1)switch(s[n].ty){case 0:r=new SliderEffect(s[n],e,i),this.effectElements.push(r);break;case 1:r=new AngleEffect(s[n],e,i),this.effectElements.push(r);break;case 2:r=new ColorEffect(s[n],e,i),this.effectElements.push(r);break;case 3:r=new PointEffect(s[n],e,i),this.effectElements.push(r);break;case 4:case 7:r=new CheckboxEffect(s[n],e,i),this.effectElements.push(r);break;case 10:r=new LayerIndexEffect(s[n],e,i),this.effectElements.push(r);break;case 11:r=new MaskIndexEffect(s[n],e,i),this.effectElements.push(r);break;case 5:r=new EffectsManager(s[n],e,i),this.effectElements.push(r);break;case 6:r=new NoValueEffect(s[n],e,i),this.effectElements.push(r)}};var bodymovinjs={};bodymovinjs.play=play,bodymovinjs.pause=pause,bodymovinjs.setLocationHref=setLocationHref,bodymovinjs.togglePause=togglePause,bodymovinjs.setSpeed=setSpeed,bodymovinjs.setDirection=setDirection,bodymovinjs.stop=stop,bodymovinjs.moveFrame=moveFrame,bodymovinjs.searchAnimations=searchAnimations,bodymovinjs.registerAnimation=registerAnimation,bodymovinjs.loadAnimation=loadAnimation,bodymovinjs.setSubframeRendering=setSubframeRendering,bodymovinjs.resize=resize,bodymovinjs.start=start,bodymovinjs.goToAndStop=goToAndStop,bodymovinjs.destroy=destroy,bodymovinjs.setQuality=setQuality,bodymovinjs.inBrowser=inBrowser,bodymovinjs.installPlugin=installPlugin,bodymovinjs.__getFactory=getFactory,bodymovinjs.version="4.13.0";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return bodymovinjs})},function(t,e,i){"use strict";var n,r,o,s,a,l,h,c=i(25),u=i(40),p=Function.prototype.apply,f=Function.prototype.call,d=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var i;return u(e),y.call(this,"__ee__")?i=this.__ee__:(i=v.value=d(null),m(this,"__ee__",v),v.value=null),i[t]?"object"==typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},r=function(t,e){var i,r;return u(e),r=this,n.call(this,t,i=function(){o.call(r,t,i),p.call(e,this,arguments)}),i.__eeOnceListener__=e,this},o=function(t,e){var i,n,r,o;if(u(e),!y.call(this,"__ee__"))return this;if(i=this.__ee__,!i[t])return this;if(n=i[t],"object"==typeof n)for(o=0;r=n[o];++o)r!==e&&r.__eeOnceListener__!==e||(2===n.length?i[t]=n[o?0:1]:n.splice(o,1));else n!==e&&n.__eeOnceListener__!==e||delete i[t];return this},s=function(t){var e,i,n,r,o;if(y.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"==typeof r){for(i=arguments.length,o=new Array(i-1),e=1;e<i;++e)o[e-1]=arguments[e];for(r=r.slice(),e=0;n=r[e];++e)p.call(n,this,o)}else switch(arguments.length){case 1:f.call(r,this);break;case 2:f.call(r,this,arguments[1]);break;case 3:f.call(r,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=new Array(i-1),e=1;e<i;++e)o[e-1]=arguments[e];p.call(r,this,o)}},a={on:n,once:r,off:o,emit:s},l={on:c(n),once:c(r),off:c(o),emit:c(s)},h=g({},l),t.exports=e=function(t){return null==t?d(h):g(Object(t),l)},e.methods=a},function(t,e,i){"use strict";var n,r=i(26),o=i(35),s=i(36),a=i(37);n=t.exports=function(t,e){var i,n,s,l,h;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],null==t?(i=s=!0,n=!1):(i=a.call(t,"c"),n=a.call(t,"e"),s=a.call(t,"w")),h={value:e,configurable:i,enumerable:n,writable:s},l?r(o(l),h):h},n.gs=function(t,e,i){var n,l,h,c;return"string"!=typeof t?(h=i,i=e,e=t,t=null):h=arguments[3],null==e?e=void 0:s(e)?null==i?i=void 0:s(i)||(h=i,i=void 0):(h=e,e=i=void 0),null==t?(n=!0,l=!1):(n=a.call(t,"c"),l=a.call(t,"e")),c={get:e,set:i,configurable:n,enumerable:l},h?r(o(h),c):c}},function(t,e,i){"use strict";t.exports=i(27)()?Object.assign:i(28)},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,i){"use strict";var n=i(29),r=i(34),o=Math.max;t.exports=function(t,e){var i,s,a,l=o(arguments.length,2);for(t=Object(r(t)),a=function(n){try{t[n]=e[n]}catch(r){i||(i=r)}},s=1;s<l;++s)e=arguments[s],n(e).forEach(a);if(void 0!==i)throw i;return t}},function(t,e,i){"use strict";t.exports=i(30)()?Object.keys:i(31)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,i){"use strict";var n=i(32),r=Object.keys;t.exports=function(t){return r(n(t)?Object(t):t)}},function(t,e,i){"use strict";var n=i(33)();t.exports=function(t){return t!==n&&null!==t}},function(t,e){"use strict";t.exports=function(){}},function(t,e,i){"use strict";var n=i(32);t.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,i){"use strict";var n=i(32),r=Array.prototype.forEach,o=Object.create,s=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=o(null);return r.call(arguments,function(t){n(t)&&s(Object(t),e)}),e}},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,i){"use strict";t.exports=i(38)()?String.prototype.contains:i(39)},function(t,e){"use strict";var i="razdwatrzy";t.exports=function(){return"function"==typeof i.contains&&(i.contains("dwa")===!0&&i.contains("foo")===!1)}},function(t,e){"use strict";var i=String.prototype.indexOf;t.exports=function(t){return i.call(this,t,arguments[1])>-1}},function(t,e){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e){"use strict";var i={UNKNOWN:0,NORMAL:1,MAGIC_WINDOW:2,VR:3};t.exports=i},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WebVRManager=e.State=e.dom=e.EnterVRButton=void 0;var o=i(43),s=r(o),a=i(44),l=r(a),h=i(47),c=n(h),u=i(48),p=r(u);i(49),e.EnterVRButton=p["default"],e.dom=c,e.State=l["default"],e.WebVRManager=s["default"]},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(44),h=n(l),c=i(45),u=n(c),p=i(46),f=n(p),d=function(e){function i(){r(this,i);var t=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.state=h["default"].PREPARING,t.__onVRDisplayPresentChange=t.__onVRDisplayPresentChange.bind(t),window.addEventListener("vrdisplaypresentchange",t.__onVRDisplayPresentChange),t.__onChangeFullscreen=t.__onChangeFullscreen.bind(t),f["default"].enabled&&document.addEventListener(f["default"].raw.fullscreenchange,t.__onChangeFullscreen),t}return s(i,e),a(i,[{key:"checkDisplays",value:function(){var t=this;return i.getVRDisplay().then(function(e){return t.defaultDisplay=e,t.__setState(h["default"].READY_TO_PRESENT),e})["catch"](function(e){delete t.defaultDisplay,"NO_DISPLAYS"==e.name?t.__setState(h["default"].ERROR_NO_PRESENTABLE_DISPLAYS):"WEBVR_UNSUPPORTED"==e.name?t.__setState(h["default"].ERROR_BROWSER_NOT_SUPPORTED):t.__setState(h["default"].ERROR_UNKOWN)})}},{key:"remove",value:function(){window.removeEventListener("vrdisplaypresentchange",this.__onVRDisplayPresentChange),f["default"].enabled&&document.removeEventListener(f["default"].raw.fullscreenchanged,this.__onChangeFullscreen),this.removeAllListeners()}},{key:"enterVR",value:function(t,e){var i=this;return this.presentedSource=e,t.requestPresent([{source:e}]).then(function(){},function(){return i.__setState(h["default"].ERROR_REQUEST_TO_PRESENT_REJECTED)})}},{key:"exitVR",value:function(t){var e=this;return t.exitPresent().then(function(){e.presentedSource=void 0},function(){return e.__setState(h["default"].ERROR_EXIT_PRESENT_REJECTED)})}},{key:"enterFullscreen",value:function(t){return f["default"].enabled?f["default"].request(t):this.__setState(h["default"].PRESENTING_FULLSCREEN),!0}},{key:"exitFullscreen",value:function(){return f["default"].enabled&&f["default"].isFullscreen?f["default"].exit():this.state==h["default"].PRESENTING_FULLSCREEN&&this.checkDisplays(),!0}},{key:"__setState",value:function(t){t!=this.state&&(this.emit("change",t,this.state),this.state=t)}},{key:"__onChangeFullscreen",value:function(t){f["default"].isFullscreen?this.state!=h["default"].PRESENTING&&this.__setState(h["default"].PRESENTING_FULLSCREEN):this.checkDisplays()}},{key:"__onVRDisplayPresentChange",value:function(t){try{var e=void 0;if(t.display?e=t.display:t.detail&&t.detail.display&&(e=t.detail.display),e&&e.isPresenting&&e.getLayers()[0].source!==this.presentedSource)return;var i=this.defaultDisplay&&this.defaultDisplay.isPresenting;this.__setState(i?h["default"].PRESENTING:h["default"].READY_TO_PRESENT)}catch(n){}}}],[{key:"getVRDisplay",value:function(){return new t(function(t,e){if(!navigator||!navigator.getVRDisplays){var i=new Error("Browser not supporting WebVR");return i.name="WEBVR_UNSUPPORTED",void e(i)}var n=function(){var t=new Error("No displays found");t.name="NO_DISPLAYS",e(t)};navigator.getVRDisplays().then(function(e){for(var i=0;i<e.length;i++)if(e[i].capabilities.canPresent){t(e[i]);break}n()},n)})}}]),i}(u["default"]);e["default"]=d}).call(e,i(2))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="ready",n="presenting",r="presenting-fullscreen",o="preparing",s="error-no-presentable-displays",a="error-browser-not-supported",l="error-request-to-present-rejected",h="error-exit-present-rejected",c="error-request-state-change-rejected",u="error-unkown";e["default"]={READY_TO_PRESENT:i,PRESENTING:n,PRESENTING_FULLSCREEN:r,PREPARING:o,ERROR_NO_PRESENTABLE_DISPLAYS:s,ERROR_BROWSER_NOT_SUPPORTED:a,ERROR_REQUEST_TO_PRESENT_REJECTED:l,ERROR_EXIT_PRESENT_REJECTED:h,ERROR_REQUEST_STATE_CHANGE_REJECTED:c,ERROR_UNKOWN:u}},function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)s.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},o.prototype.emit=function(t,e,i,n,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var l,h,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,r),!0;case 6:return c.fn.call(c.context,e,i,n,r,o),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var p,f=c.length;for(h=0;h<f;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),u){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;case 4:c[h].fn.call(c[h].context,e,i,n);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];c[h].fn.apply(c[h].context,l)}}return!0},o.prototype.on=function(t,e,i){var n=new r(e,i||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,i){var n=new r(e,i||this,(!0)),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||(0===--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var l=0,h=[],c=s.length;l<c;l++)(s[l].fn!==e||r&&!s[l].once||i&&s[l].context!==i)&&h.push(s[l]);h.length?this._events[o]=1===h.length?h[0]:h:0===--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,t.exports=o},function(t,e){/*!
	* screenfull
	* v3.3.3 - 2018-09-04
	* (c) Sindre Sorhus; MIT License
	*/
!function(){"use strict";var e="undefined"!=typeof window&&"undefined"!=typeof window.document?window.document:{},i="undefined"!=typeof t&&t.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var t,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=i.length,o={};n<r;n++)if(t=i[n],t&&t[1]in e){for(n=0;n<t.length;n++)o[i[0][n]]=t[n];return o}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(t){var i=r.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[i]():t[i](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){e[r.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,i){var n=o[t];n&&e.addEventListener(n,i,!1)},off:function(t,i){var n=o[t];n&&e.removeEventListener(n,i,!1)},raw:r};return r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),void(i?t.exports=s:window.screenfull=s)):void(i?t.exports=!1:window.screenfull=!1)}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=.8,n={},r=function(t,e){var n=e*i,r=s(t,n)+a(t,n);return'<button class="'+t+'-button">\n          <div class="'+t+'-title"></div>\n          <div class="'+t+'-logo" >'+r+"</div>\n        </button>"},o=e.injectCSS=function(t){var e=document.createElement("style");e.innerHTML=t;var i=document.getElementsByTagName("head")[0];i.insertBefore(e,i.firstChild)},s=(e.createDefaultView=function(t){var e=t.height/3;t.injectCSS&&(n[t.cssprefix]||(o(l(t,e)),n[t.cssprefix]=!0));var i=document.createElement("div");return i.innerHTML=r(t.cssprefix,e),i.firstChild},e.createVRIcon=function(t,e){var i=document.createElement("div");return i.innerHTML=s(t,e),i.firstChild},e.createNoVRIcon=function(t,e){var i=document.createElement("div");return i.innerHTML=a(t,e),i.firstChild},function(t,e){var i=28/18;return'<svg class="'+t+'-svg" version="1.1" x="0px" y="0px" \n        width="'+i*e+'px" height="'+e+'px" viewBox="0 0 28 18" xml:space="preserve">\n        <path d="M26.8,1.1C26.1,0.4,25.1,0,24.2,0H3.4c-1,0-1.7,0.4-2.4,1.1C0.3,1.7,0,2.7,0,3.6v10.7\n        c0,1,0.3,1.9,0.9,2.6C1.6,17.6,2.4,18,3.4,18h5c0.7,0,1.3-0.2,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l\n        1.5-2.6C13.2,13.1,13,13,14,13v0h-0.2 h0c0.3,0,0.7,0.1,0.8,0.5l1.4,2.6c0.3,0.6,0.8,1.1,1.3,\n        1.4c0.6,0.3,1.2,0.5,1.8,0.5h5c1,0,2-0.4,2.7-1.1c0.7-0.7,1.2-1.6,1.2-2.6 V3.6C28,2.7,27.5,\n        1.7,26.8,1.1z M7.4,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8c1.6,0,2.8,1.3,2.8,2.8\n        C10.2,10.5,8.9,11.8,7.4,11.8z M20.1,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8C21.7\n        ,6.2,23,7.4,23,9 C23,10.5,21.7,11.8,20.1,11.8z"/>\n    </svg>'}),a=function(t,e){var i=28/18;return'<svg class="'+t+'-svg-error" x="0px" y="0px" \n        width="'+i*e+'px" height="'+i*e+'px" viewBox="0 0 28 28" xml:space="preserve">\n        <path d="M17.6,13.4c0-0.2-0.1-0.4-0.1-0.6c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8s-1.3,2.8-2.8,2.8\n        c-0.2,0-0.4,0-0.6-0.1l5.9,5.9c0.5-0.2,0.9-0.4,1.3-0.8\n        c0.7-0.7,1.1-1.6,1.1-2.5V7.4c0-1-0.4-1.9-1.1-2.5c-0.7-0.7-1.6-1-2.5-1\n        H8.1 L17.6,13.4z"/>\n        <path d="M10.1,14.2c-0.5,0.9-1.4,1.4-2.4,1.4c-1.6,0-2.8-1.3-2.8-2.8c0-1.1,0.6-2,1.4-2.5\n        L0.9,5.1 C0.3,5.7,0,6.6,0,7.5v10.7c0,1,0.4,1.8,1.1,2.5c0.7,0.7,1.6,1,2.5,1\n        h5c0.7,0,1.3-0.1,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l1.3-2.6 L10.1,14.2z"/>\n        <path d="M25.5,27.5l-25-25C-0.1,2-0.1,1,0.5,0.4l0,0C1-0.1,2-0.1,2.6,0.4l25,25c0.6,0.6,0.6,1.5\n        ,0,2.1l0,0 C27,28.1,26,28.1,25.5,27.5z"/>\n    </svg>'},l=e.generateCSS=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=t.height,r=2,o=t.background?t.background:t.color,s=t.cssprefix,a=void 0;return a="round"==t.corners?t.height/2:"square"==t.corners?2:t.corners,"\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/31P4mP32i98D9CEnGyeX9Q.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\n    }\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/Zi_e6rBgGqv33BWF8WTq8g.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, \n                       U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;\n    }\n\n    button."+s+"-button {\n        font-family: 'Karla', sans-serif;\n\n        border: "+o+" "+r+"px solid;\n        border-radius: "+a+"px;\n        box-sizing: border-box;\n        background: "+(t.background?t.background:"none")+";\n\n        height: "+n+"px;\n        min-width: "+9.6*e+"px;\n        display: inline-block;\n        position: relative;\n\n        cursor: pointer;\n    }\n    \n    button."+s+"-button:focus {\n      outline: none;\n    }\n\n    /*\n    * Logo\n    */\n\n    ."+s+"-logo {\n        width: "+n+"px;\n        height: "+n+"px;\n        position: absolute;\n        top:0px;\n        left:0px;\n        width: "+(n-4)+"px;\n        height: "+(n-4)+"px;\n    }\n    ."+s+"-svg {\n        fill: "+t.color+";\n        margin-top: "+((n-e*i)/2-2)+"px;\n        margin-left: "+n/3+"px;\n    }\n    ."+s+"-svg-error {\n        fill: "+t.color+";\n        display:none;\n        margin-top: "+((n-28/18*e*i)/2-2)+"px;\n        margin-left: "+n/3+"px;\n    }\n\n\n    /*\n    * Title\n    */\n\n    ."+s+"-title {\n        color: "+t.color+";\n        position: relative;\n        font-size: "+e+"px;\n        padding-left: "+1.05*n+"px;\n        padding-right: "+(a-10<5?n/3:a-10)+"px;\n    }\n\n    /*\n    * disabled\n    */\n\n    button."+s+"-button[disabled=true] {\n        opacity: "+t.disabledOpacity+";\n    }\n\n    button."+s+"-button[disabled=true] > ."+s+"-logo > ."+s+"-svg {\n        display:none;\n    }\n\n    button."+s+"-button[disabled=true] > ."+s+"-logo > ."+s+"-svg-error {\n        display:initial;\n    }\n  "}},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(43),h=n(l),c=i(47),u=i(44),p=n(u),f=i(45),d=n(f),m=function(e){function i(e,n){r(this,i);var s=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n=n||{},n.color=n.color||"rgb(80,168,252)",n.background=n.background||!1,n.disabledOpacity=n.disabledOpacity||.5,n.height=n.height||55,n.corners=n.corners||"square",n.cssprefix=n.cssprefix||"webvr-ui",n.textEnterVRTitle=n.textEnterVRTitle||"ENTER VR",n.textVRNotFoundTitle=n.textVRNotFoundTitle||"VR NOT FOUND",n.textExitVRTitle=n.textExitVRTitle||"EXIT VR",n.onRequestStateChange=n.onRequestStateChange||function(){return!0},n.beforeEnter=n.beforeEnter||function(){return new t(function(t){return t()})},n.beforeExit=n.beforeExit||function(){return new t(function(t){return t()})},n.injectCSS=n.injectCSS!==!1,s.options=n,s.sourceCanvas=e,s.domElement=n.domElement||(0,c.createDefaultView)(n),s.__defaultDisplayStyle=s.domElement.style.display||"initial",s.manager=new h["default"],s.manager.checkDisplays(),s.manager.addListener("change",function(t){return s.__onStateChange(t)}),s.domElement.addEventListener("click",function(){return s.__onEnterVRClick()}),s.__forceDisabled=!1,s.setTitle(s.options.textEnterVRTitle),s}return s(i,e),a(i,[{key:"setTitle",value:function(t){return this.domElement.title=t,g(this.domElement,this.options.cssprefix,"title",function(e){t?(e.innerText=t,e.style.display="initial"):e.style.display="none"}),this}},{key:"setTooltip",value:function(t){return this.domElement.title=t,this}},{key:"show",value:function(){return this.domElement.style.display=this.__defaultDisplayStyle,this.emit("show"),this}},{key:"hide",value:function(){return this.domElement.style.display="none",this.emit("hide"),this}},{key:"enable",value:function(){return this.__setDisabledAttribute(!1),this.__forceDisabled=!1,this}},{key:"disable",value:function(){return this.__setDisabledAttribute(!0),this.__forceDisabled=!0,this}},{key:"remove",value:function(){this.manager.remove(),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement)}},{key:"getVRDisplay",value:function(){return h["default"].getVRDisplay()}},{key:"isPresenting",value:function(){return this.state===p["default"].PRESENTING||this.state==p["default"].PRESENTING_FULLSCREEN}},{key:"requestEnterVR",value:function(){var e=this;return new t(function(t,i){return e.options.onRequestStateChange(p["default"].PRESENTING)?e.options.beforeEnter().then(function(){return e.manager.enterVR(e.manager.defaultDisplay,e.sourceCanvas)}).then(t):void i(new Error(p["default"].ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestExit",value:function(){var e=this,i=this.state;return new t(function(t,n){return e.options.onRequestStateChange(p["default"].READY_TO_PRESENT)?e.options.beforeExit().then(function(){return i===p["default"].PRESENTING?e.manager.exitVR(e.manager.defaultDisplay):e.manager.exitFullscreen()}).then(t):void n(new Error(p["default"].ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestEnterFullscreen",value:function(){var e=this;return new t(function(t,i){return e.options.onRequestStateChange(p["default"].PRESENTING_FULLSCREEN)?e.options.beforeEnter().then(function(){return e.manager.enterFullscreen(e.sourceCanvas)}).then(t):void i(new Error(p["default"].ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"__setDisabledAttribute",value:function(t){t||this.__forceDisabled?this.domElement.setAttribute("disabled","true"):this.domElement.removeAttribute("disabled")}},{key:"__onEnterVRClick",value:function(){this.state==p["default"].READY_TO_PRESENT?this.requestEnterVR():this.isPresenting()&&this.requestExit()}},{key:"__onStateChange",value:function(t){if(t!=this.state)switch(this.state!==p["default"].PRESENTING&&this.state!==p["default"].PRESENTING_FULLSCREEN||this.emit("exit"),this.state=t,t){case p["default"].READY_TO_PRESENT:this.show(),this.setTitle(this.options.textEnterVRTitle),this.manager.defaultDisplay&&this.setTooltip("Enter VR using "+this.manager.defaultDisplay.displayName),this.__setDisabledAttribute(!1),this.emit("ready");break;case p["default"].PRESENTING:case p["default"].PRESENTING_FULLSCREEN:this.manager.defaultDisplay&&this.manager.defaultDisplay.capabilities.hasExternalDisplay&&t!=p["default"].PRESENTING_FULLSCREEN||this.hide(),this.setTitle(this.options.textExitVRTitle),this.__setDisabledAttribute(!1),this.emit("enter");break;case p["default"].ERROR_BROWSER_NOT_SUPPORTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Browser not supported"),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p["default"].ERROR_NO_PRESENTABLE_DISPLAYS:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("No VR headset found."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p["default"].ERROR_REQUEST_TO_PRESENT_REJECTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Something went wrong trying to start presenting to your headset."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p["default"].ERROR_EXIT_PRESENT_REJECTED:default:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Unknown error."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t))}}}]),i}(d["default"]);e["default"]=m;var g=function(t,e,i,n){var r=t.querySelector("."+e+"-"+i);r&&n(r)}}).call(e,i(2))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=i(48),o=n(r),s=i(44),a=n(s);"undefined"!=typeof AFRAME&&AFRAME&&AFRAME.registerComponent("webvr-ui",{dependencies:["canvas"],schema:{enabled:{type:"boolean","default":!0},color:{type:"string","default":"white"},background:{type:"string","default":"black"},corners:{type:"string","default":"square"},disabledOpacity:{type:"number","default":.5},textEnterVRTitle:{type:"string"},textExitVRTitle:{type:"string"},textVRNotFoundTitle:{type:"string"}},init:function(){},update:function(){var t=document.querySelector("a-scene");if(t.setAttribute("vr-mode-ui",{enabled:!this.data.enabled}),this.data.enabled){if(this.enterVREl)return;var e={color:this.data.color,background:this.data.background,corners:this.data.corners,disabledOpacity:this.data.disabledOpacity,textEnterVRTitle:this.data.textEnterVRTitle,textExitVRTitle:this.data.textExitVRTitle,textVRNotFoundTitle:this.data.textVRNotFoundTitle,onRequestStateChange:function(e){return e==a["default"].PRESENTING?t.enterVR():t.exitVR(),!1}},i=this.enterVR=new o["default"](t.canvas,e);this.enterVREl=i.domElement,document.body.appendChild(i.domElement),i.domElement.style.position="absolute",i.domElement.style.bottom="10px",i.domElement.style.left="50%",i.domElement.style.transform="translate(-50%, -50%)",i.domElement.style.textAlign="center"}else this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())},remove:function(){this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.MODE={MULTIPLAYER:"MULTIPLAYER",SINGLEPLAYER:"SINGLEPLAYER"},n=(e.CONTROLMODE={MOUSE:"MOUSE",VR:"VR"},e.STATE={PRELOADER:"PRELOADER",MODE_SELECTION:"MODE_SELECTION",ROOM_URL_DISPLAY:"ROOM_URL_DISPLAY",PLAYING:"PLAYING",GAME_OVER:"GAME_OVER",COUNTDOWN:"COUNTDOWN",INSTRUCTIONS:"INSTRUCTIONS",PAUSED:"PAUSED",WAITING:"WAITING"});e.EVENT={OPPONENT_CONNECTED:"OPPONENT_CONNECTED",OPPONENT_DISCONNECTED:"OPPONENT_DISCONNECTED",OPPONENT_PAUSED:"OPPONENT_PAUSED",OPPONENT_UNPAUSED:"OPPONENT_UNPAUSED",GAME_OVER:"GAME_OVER",TOGGLE_RAINBOW_MODE:"TOGGLE_RAINBOW_MODE",RESTART_GAME:"RESTART_GAME",RESTART_BUTTON_PRESSED:"RESTART_BUTTON_PRESSED",EXIT_BUTTON_PRESSED:"EXIT_BUTTON_PRESSED",BALL_TABLE_COLLISION:"BALL_TABLE_COLLISION",BALL_PADDLE_COLLISION:"BALL_PADDLE_COLLISION",BALL_NET_COLLISION:"BALL_NET_COLLISION",INIT_BALL:"INIT_BALL",LOAD_PROGRESS:"LOAD_PROGRESS"},e.ACTION={MOVE:"M",HIT:"HIT",MISS:"MISS",PING:"PING",PONG:"PONG",CONNECT:"CONNECT",DISCONNECT:"DISCONNECT",RESTART_GAME:"RESTART_GAME",REQUEST_COUNTDOWN:"REQUEST_COUNTDOWN",PAUSE:"PAUSE",UNPAUSE:"UNPAUSE"},e.INITIAL_CONFIG={mode:i.SINGLEPLAYER,gravity:6,netThickness:.04,tableWidth:1.52,tableDepth:2.74,tableHeight:.76,netHeight:.15,tablePositionZ:-2,tableThickness:.1,paddleThickness:.01,paddleSize:.16/1.5,get paddlePositionZ(){return this.tablePositionZ+this.tableDepth/2+this.paddleThickness/2},ballRadius:.02,ballMass:.001,ballPaddleFriction:.8,ballPaddleBounciness:1,ballBoxBounciness:.95,ballInitVelocity:1,rainbowText:"rainbow mode!",cameraHeight:1.6,startLives:5,state:n.PRELOADER,POINTS_FOR_WIN:11,ROOM_CODE_LENGTH:4,colors:{PINK_TABLE:16496835,PINK_TABLE_UPWARDS:16496835,BLUE_TABLE:4403620,GREEN_TABLE:5426323,PINK_CLEARCOLOR:16753584,GREEN_CLEARCOLOR:4698507,BLUE_CLEARCOLOR:3089525,PADDLE_COLOR:16728122,PADDLE_SIDE_COLOR:14231848,PADDLE_WOOD_COLOR:15855335,PADDLE_WOOD_SIDE_COLOR:14210514,BALL:16383062}}},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(l){r=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),l=i(7),h=n(l),c=i(52),u=n(c),p=i(55),f=i(56),d=n(f),m=i(57),g=n(m),y=i(58),v=n(y),_=i(50),b=i(59),T=i(41),E=n(T),x=i(60),S=n(x),w=i(62),A=n(w),M=i(100),P=n(M),C=i(147),R=n(C),I=i(61),O=n(I),N=i(150),L=n(N),D=i(177),k=n(D),B=i(178),G=n(B),F=i(179),V=n(F),U=i(180),H=n(U),j=i(181),z=n(j),W=!1,X=function(){function e(t,i){r(this,e),this.emitter=t,this.communication=i,this.config=Object.assign({},_.INITIAL_CONFIG),this.time=new L["default"],this.sound=new P["default"](this.config),this.score={self:0,opponent:0,lives:this.config.startLives,highest:0},this.controlMode=_.CONTROLMODE.MOUSE,this.renderer=null,this.scene=null,this.camera=null,this.controls=null,this.effect=null,this.display=null,this.textureLoader=new p.TextureLoader,this.textureLoader.setPath("/textures/"),this.objLoader=new d["default"],this.objLoader.setPath("/models/"),this.table=null,this.tablePlane=null,this.net=null,this.ball=null,this.crossHair=null,this.manager=null,this.raycaster=null,this.physicsDebugRenderer=null,this.physicsTimeStep=1e3,this.physics=new S["default"](this.config,this.emitter),this.resetBallTimeout=null,this.ballHasHitEnemyTable=!1,this.resetTimeoutDuration=1500,this.playerRequestedRestart=!1,this.opponentRequestedRestart=!1,this.playerRequestedCountdown=!1,this.opponentRequestedCountdown=!1,this.ballInterpolationAlpha=0,this.lastHitPosition=null,this.paddleInterpolationAlpha=0,this.ghostPaddlePosition=new p.Vector3,this.hitAvailable=!0,this.hue=0,this.datShitCray=!1,this.pointerIsLocked=!1,this.mouseMoveSinceLastFrame={x:0,y:0},this.mousePosition={x:0,y:0},this.isMobile=O["default"].isMobile(),this.fps=(0,u["default"])({every:10,decay:.05}),this.quality=4,this.trailEnabled=!0,this.frameNumber=0,this.firstActiveFrame=0,this.lastRender=0,this.tabActive=!0}return s(e,[{key:"setup",value:function(){var e=this;return new t(function(i){e.setupThree(),e.setupVR(),e.net=(0,G["default"])(e.scene,e.config),e.renderer.domElement.requestPointerLock=e.renderer.domElement.requestPointerLock||e.renderer.domElement.mozRequestPointerLock,e.renderer.domElement.onclick=function(){e.config.state!==_.STATE.GAME_OVER&&e.renderer.domElement.requestPointerLock&&e.renderer.domElement.requestPointerLock()},e.physics.setupWorld(),W&&(e.physicsDebugRenderer=new CannonDebugRenderer(e.scene,e.physics.world)),e.setupEventListeners(),e.setupTablePlane(),e.setupLights(),e.setupEffects(),e.hud=new A["default"](e.scene,e.config,e.emitter,e.objLoader),e.crosshair=new H["default"](e.scene,e.config),e.crosshair.visible=!1,t.all([(0,z["default"])(e.objLoader,e.config,e.scene),e.hud.setup()]).then(function(t){var n=o(t,1),r=n[0],s=r.paddle,a=r.paddleOpponent;e.paddle=s,e.paddleOpponent=a,e.paddle.position.copy(e.computePaddlePosition()||new p.Vector3),e.ghostPaddlePosition.copy(e.paddle.position),i("loaded")})["catch"](function(t){console.warn("Loading error:"),console.warn(t)})})}},{key:"setupEventListeners",value:function(){var t=this;this.emitter.on(_.EVENT.GAME_OVER,this.onGameOver.bind(this)),this.emitter.on(_.EVENT.BALL_TABLE_COLLISION,this.onBallTableCollision.bind(this)),this.emitter.on(_.EVENT.RESTART_BUTTON_PRESSED,this.onRestartButtonPressed.bind(this)),this.emitter.on(_.EVENT.TOGGLE_RAINBOW_MODE,function(){t.datShitCray?(t.hud.message.buttons[t.config.rainbowText].setText(t.config.rainbowText),t.resetColors()):t.hud.message.buttons[t.config.rainbowText].setText("normal mode"),t.datShitCray=!t.datShitCray}),this.emitter.on(_.EVENT.EXIT_BUTTON_PRESSED,function(){t.manager.mode===E["default"].VR&&t.hud.message.setMessage("take off vr device")}),this.emitter.on(_.EVENT.BALL_NET_COLLISION,function(){t.sound.playUI("net")}),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("touchstart",function(e){if(t.config.state===_.STATE.GAME_OVER){var i={x:-2*(.5-e.touches[0].clientX/t.viewport.width),y:2*(.5-e.touches[0].clientY/t.viewport.height)};t.raycaster.setFromCamera(i,t.camera),t.hud.message.intersect(t.raycaster,!0),t.hud.message.click()}}),(0,h["default"])(this.renderer.domElement).click(function(){t.config.state===_.STATE.GAME_OVER&&t.hud.message.click()}),"onpointerlockchange"in document?document.addEventListener("pointerlockchange",this.onPointerLockChange.bind(this),!1):"onmozpointerlockchange"in document&&document.addEventListener("mozpointerlockchange",this.onPointerLockChange.bind(this),!1),(0,h["default"])(document).on("keydown",function(e){82!==e.keyCode||t.config.state!==_.STATE.PLAYING&&t.config.state!==_.STATE.WAITING&&t.config.state!==_.STATE.COUNTDOWN&&t.config.state!==_.STATE.PAUSED&&t.config.state!==_.STATE.INSTRUCTIONS&&t.config.state!==_.STATE.GAME_OVER||t.emitter.emit(_.EVENT.TOGGLE_RAINBOW_MODE)}),(0,h["default"])(window).on("resize",this.onResize.bind(this)),(0,h["default"])(window).on("vrdisplaypresentchange",this.onResize.bind(this)),this.fps.on("data",function(e){if(t.tabActive&&t.frameNumber-t.firstActiveFrame>300&&e<50){if(t.firstActiveFrame=t.frameNumber,console.warn("reducing quality to "+(t.quality-1)),4===t.quality)t.light.shadow.mapSize.width=512,t.light.shadow.mapSize.height=512;else if(3===t.quality)t.trailEnabled=!1,t.scene.remove(t.trail);else if(2===t.quality)t.light.castShadow=!1,t.time.setTimeout(function(){t.renderer.shadowMap.enabled=!1},100);else{if(1!==t.quality)return;O["default"].isMobile()&&t.manager.mode!==E["default"].VR&&t.renderer.setPixelRatio(window.devicePixelRatio/2)}t.quality-=1}})}},{key:"onBallPaddleCollision",value:function(t){this.hitTween&&this.hitTween.isActive()||(this.physics.onBallPaddleCollision({body:this.physics.ball,target:this.paddle}),this.ballHitAnimation(),this.haloAnimation(t),this.ballPositionDifference=null,this.restartPingpongTimeout(),this.ballHasHitEnemyTable=!1,this.sound.paddle(t),this.config.mode!==_.MODE.SINGLEPLAYER&&(this.slowdownBall(),this.communication.sendHit({x:t.x,y:t.y,z:t.z},{x:this.physics.ball.velocity.x,y:this.physics.ball.velocity.y,z:this.physics.ball.velocity.z})))}},{key:"onBallTableCollision",value:function(t,e){this.sound.table(t.position,this.physics.ball.velocity),"upwards-table"===e._name&&this.config.mode===_.MODE.SINGLEPLAYER&&(this.score.self+=1,this.hud.scoreDisplay.setSelfScore(this.score.self)),"table-2-player"===e._name&&t.position.z<this.config.tablePositionZ&&(this.ballHasHitEnemyTable=!0)}},{key:"onGameOver",value:function(){this.ballPath=null,this.sound.playLoop("bass-pad-synth"),this.ball.visible=!1,this.paddle.visible=!1,this.paddleOpponent.visible=!1,this.config.state=_.STATE.GAME_OVER,this.time.clearTimeout(this.resetBallTimeout),this.crosshair.visible=!0,this.config.mode===_.MODE.SINGLEPLAYER?(this.hud.message.gameOver(this.score),this.sound.playUI("win")):(this.hud.message.gameOver(this.score),this.score.self>this.score.opponent?this.sound.playUI("win"):this.sound.playUI("lose")),this.showOverlay(),this.hud.scoreDisplay.hide(),this.hud.message.showMessage()}},{key:"onRestartButtonPressed",value:function(){this.hud.message.hideMessage(),this.config.mode===_.MODE.MULTIPLAYER&&(this.playerRequestedRestart=!0,this.hud.message.setMessage("waiting"),this.hud.message.showMessage(),this.communication.sendRestartGame()),this.restartGame()}},{key:"onResize",value:function(){this.effect.setSize(window.innerWidth,window.innerHeight,!0),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.viewport={width:(0,h["default"])(this.renderer.domElement).width(),height:(0,h["default"])(this.renderer.domElement).height()}}},{key:"onMouseMove",value:function(t){this.paddle&&this.viewport&&(this.pointerIsLocked?(this.mouseMoveSinceLastFrame.x+=t.movementX,this.mouseMoveSinceLastFrame.y+=t.movementY):(this.mousePosition.x=t.offsetX/this.viewport.width-.5,this.mousePosition.y=-(t.offsetY/this.viewport.height-.5)))}},{key:"onPointerLockChange",value:function(){document.pointerLockElement===this.renderer.domElement||document.mozPointerLockElement===this.renderer.domElement?this.pointerIsLocked=!0:this.pointerIsLocked=!1}},{key:"setupVRControls",value:function(){this.controls=new v["default"](this.camera),this.controls.standing=!0,this.controls.userHeight=this.config.cameraHeight}},{key:"setupVR",value:function(){var t=this;this.effect=new g["default"](this.renderer),this.effect.setSize(window.innerWidth,window.innerHeight);var e={hideButton:!1,isUndistorted:!1};this.manager=new R["default"](this.renderer,this.effect,e),navigator.getVRDisplays().then(function(e){for(var i=0;i<e.length;i+=1)if(e[i].capabilities.canPresent){t.display=e[i],t.display.displayName.indexOf("Daydream")!==-1&&(t.daydream=!0);break}})["catch"](function(t){console.warn("error getting vr displays:"),console.warn(t)})}},{key:"setupThree",value:function(){this.renderer=new p.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=p.BasicShadowMap,document.body.appendChild(this.renderer.domElement),this.scene=new p.Scene,this.camera=new p.PerspectiveCamera(47,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.x=0,this.camera.position.y=1.6,this.camera.position.z=.6}},{key:"setupLights",value:function(){this.light=new p.DirectionalLight(16777215,.3,0),this.light.position.z=this.config.tablePositionZ,this.light.position.z=2,this.light.position.y=4,this.light.shadow.camera.near=3.5,this.light.shadow.camera.far=5.4,this.light.shadow.camera.left=-this.config.tableWidth/2,this.light.shadow.camera.right=this.config.tableWidth/2,this.light.shadow.camera.bottom=.8,this.light.shadow.camera.top=3.4,this.light.castShadow=!this.isMobile,this.light.shadow.mapSize.width=512*(this.isMobile?1:8),this.light.shadow.mapSize.height=512*(this.isMobile?1:8),this.scene.add(this.light),this.scene.add(new p.AmbientLight(16777215,.9))}},{key:"setupTablePlane",value:function(){this.raycaster=new p.Raycaster;var t=new p.PlaneGeometry(40,40,5,5),e=new p.MeshBasicMaterial({color:16776960,wireframe:!0});this.tablePlane=new p.Mesh(t,e),this.tablePlane.rotation.x=.45*-Math.PI,this.tablePlane.position.y=this.config.tableHeight+.2,this.tablePlane.position.z=this.config.tablePositionZ+this.config.tableDepth/2,this.tablePlane.material.visible=!1,this.scene.add(this.tablePlane)}},{key:"setupEffects",value:function(){var t=new p.SphereGeometry(.3,32,32),e=new p.MeshBasicMaterial({color:16777215,transparent:!0,depthTest:!1,depthWrite:!1});if(this.halo=new p.Mesh(t,e),this.halo.position.z=10,this.scene.add(this.halo),this.halo.scale.x=.001,this.halo.scale.y=.001,this.halo.scale.z=.001,this.ballPath=new p.CatmullRomCurve3([new p.Vector3(0,0,0),new p.Vector3(0,.1,0)]),t=new p.TubeGeometry(this.ballPath,30,.01,8,(!1)),this.trailEnabled){var i=document.createElement("canvas");i.width=256,i.height=128;var n=i.getContext("2d"),r=n.createLinearGradient(0,0,200,0);r.addColorStop(0,"rgba(249, 252, 86, 0)"),r.addColorStop(1,"rgba(249, 252, 86, 0.3)"),n.fillStyle=r,n.fillRect(0,0,512,512);var o=new p.Texture(i);o.needsUpdate=!0,e=new p.MeshBasicMaterial({map:o,transparent:!0}),this.trail=new p.Mesh(t,e),this.scene.add(this.trail),this.ballPath=null}}},{key:"startGame",value:function(){var t=this;this.hud.container.visible=!1;var e=this.scene.getObjectByName("table-self"),i=this.scene.getObjectByName("table-opponent");if(a.TweenMax.set("canvas",{visibility:"visible"}),this.config.mode===_.MODE.MULTIPLAYER)this.communication.isHost?(this.renderer.setClearColor(this.config.colors.BLUE_CLEARCOLOR,1),e.material.color.set(this.config.colors.BLUE_TABLE),i.material.color.set(this.config.colors.BLUE_TABLE)):(this.renderer.setClearColor(this.config.colors.GREEN_CLEARCOLOR,1),e.material.color.set(this.config.colors.GREEN_TABLE),i.material.color.set(this.config.colors.GREEN_TABLE)),this.net.getObjectByName("net").material.color.setHex(this.communication.isHost?1841748:1657425),this.showOverlay();else{var n=this.scene.getObjectByName("upwardsTableGroup");n.visible=!0,this.net.visible=!1,this.physics.net.collisionResponse=0,this.physics.upwardsTable.collisionResponse=1,this.renderer.setClearColor(this.config.colors.PINK_CLEARCOLOR,1),e.material.color.set(this.config.colors.PINK_TABLE)}this.introPanAnimation().then(function(){t.viewport={width:(0,h["default"])(t.renderer.domElement).width(),height:(0,h["default"])(t.renderer.domElement).height()},O["default"].isMobile()&&a.TweenMax.set(".reset-pose",{display:"block"}),t.manager.isVRCompatible&&a.TweenMax.set(".enter-vr",{display:"block"}),t.paddle.visible=!0,t.hud.container.visible=!0,t.setupVRControls(),t.config.mode===_.MODE.SINGLEPLAYER?t.countdown():(t.paddleOpponent.visible=!0,t.playerRequestedCountdown=!0,t.communication.sendRequestCountdown(),t.requestCountdown(),t.config.state=_.STATE.WAITING)})}},{key:"introPanAnimation",value:function(){var e=this;return this.display&&"requestAnimationFrame"in this.display&&this.controlMode===_.CONTROLMODE.VR?this.display.requestAnimationFrame(this.animate.bind(this)):requestAnimationFrame(this.animate.bind(this)),new t(function(t){var i=new a.TimelineMax;e.camera.lookAt((new p.Vector3).lerpVectors(e.ghostPaddlePosition,new p.Vector3(e.table.position.x,e.config.tableHeight+.3,e.table.position.z),.5)),i.set(e.renderer.domElement,{display:"block"}),i.to(".intro-wrapper",.3,{autoAlpha:0}),i.call(t,[],null,"+=1")})}},{key:"requestCountdown",value:function(){this.playerRequestedCountdown&&this.opponentRequestedCountdown&&this.countdown()}},{key:"showInstructions",value:function(){var e=this;return new t(function(t){return e.config.state=_.STATE.INSTRUCTIONS,e.config.state===_.STATE.GAME_OVER?void t():(e.config.mode===_.MODE.SINGLEPLAYER?(e.hud.message.setMessage("YOU HAVE\nFIVE LIVES","antique"),e.time.setTimeout(t,1500)):(e.hud.message.setMessage("FIRST WITH\n11PTS WINS","antique"),e.time.setTimeout(t,2500)),void e.hud.message.showMessage())})}},{key:"countdown",value:function(){var t=this;if(this.config.state!==_.STATE.COUNTDOWN&&this.config.state!==_.STATE.PLAYING){(0,h["default"])(".opponent-joined").css("display","none"),
this.paddle.visible=!0,this.paddleOpponent.visible=this.config.mode===_.MODE.MULTIPLAYER,this.sound.playLoop("bass"),this.hud.scoreDisplay.show(),this.hideOverlay();var e=4;this.showInstructions().then(function(){t.config.state=_.STATE.COUNTDOWN,t.hud.countdown.showCountdown(),t.hud.message.hideMessage();var i=t.time.setInterval(function(){t.hud.countdown.setCountdown(e),e-=1,e<0&&(t.time.clearInterval(i),t.hud.countdown.hideCountdown(),t.config.mode===_.MODE.SINGLEPLAYER?(t.addBall(),t.physics.initBallPosition()):t.config.mode!==_.MODE.MULTIPLAYER||t.communication.isHost||(t.addBall(),t.communication.sendMiss({x:t.physics.ball.position.x,y:t.physics.ball.position.y,z:t.physics.ball.position.z},{x:t.physics.ball.velocity.x,y:t.physics.ball.velocity.y,z:t.physics.ball.velocity.z},!0,!0)))},1e3)})}}},{key:"restartGame",value:function(){return this.crosshair.visible=!1,this.physics.speed=1,this.resetScore(),this.config.mode===_.MODE.SINGLEPLAYER?(this.countdown(),void this.emitter.emit(_.EVENT.RESTART_GAME,this.score)):void(this.opponentRequestedRestart&&this.playerRequestedRestart&&(this.emitter.emit(_.EVENT.RESTART_GAME,this.score),this.playerRequestedRestart=!1,this.opponentRequestedRestart=!1,this.countdown()))}},{key:"resetScore",value:function(){this.score.self=0,this.score.opponent=0,this.score.highest=0,this.score.lives=this.config.startLives,this.hud.scoreDisplay.setSelfScore(0),this.hud.scoreDisplay.setOpponentScore(0),this.hud.scoreDisplay.setLives(this.score.lives)}},{key:"setMultiplayer",value:function(){this.config.mode=_.MODE.MULTIPLAYER,this.scene.remove(this.table),this.table=(0,k["default"])(this.scene,this.config),this.hud.message.showMessage(),this.resetTimeoutDuration=2e3,this.hud.scoreDisplay.opponentScore.visible=!0,this.hud.scoreDisplay.lifeGroup.visible=!1,this.net.getObjectByName("net-collider").visible=!0,this.communication.setCallbacks({receivedMove:this.onReceivedMove.bind(this),receivedHit:this.onReceivedHit.bind(this),receivedMiss:this.onReceivedMiss.bind(this),receivedRestartGame:this.onReceivedRestartGame.bind(this),receivedRequestCountdown:this.onReceivedRequestCountdown.bind(this)})}},{key:"setSingleplayer",value:function(){this.config.mode=_.MODE.SINGLEPLAYER,this.scene.remove(this.table),this.table=(0,k["default"])(this.scene,this.config),this.resetTimeoutDuration=1500,this.hud.scoreDisplay.opponentScore.visible=!1,this.hud.scoreDisplay.lifeGroup.visible=!0,this.scene.getObjectByName("net-collider").visible=!1}},{key:"onReceivedMove",value:function(t){var e=this,i=(0,b.mirrorPosition)(t.position,this.config.tablePositionZ),n={x:this.paddleOpponent.position.x,y:this.paddleOpponent.position.y,z:this.paddleOpponent.position.z,rotationX:this.paddleOpponent.rotation.x,rotationY:this.paddleOpponent.rotation.y,rotationZ:this.paddleOpponent.rotation.z};a.TweenMax.to(n,.14,{x:i.x,y:i.y,z:i.z-.1,rotationX:-t.rotation._x,rotationY:t.rotation._y,rotationZ:-t.rotation._z,onUpdate:function(){e.paddleOpponent.position.x=n.x,e.paddleOpponent.position.y=n.y,e.paddleOpponent.position.z=n.z,e.paddleOpponent.rotation.x=n.rotationX,e.paddleOpponent.rotation.y=n.rotationY,e.paddleOpponent.rotation.z=n.rotationZ}})}},{key:"onReceivedRestartGame",value:function(){this.opponentRequestedRestart=!0,this.restartGame()}},{key:"onReceivedHit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.time.clearTimeout(this.resetBallTimeout),this.ball?this.sound.paddle(t.point):this.addBall(),e||(this.haloAnimation((0,b.mirrorPosition)(t.point,this.config.tablePositionZ)),this.ballPositionDifference=(new p.Vector3).subVectors(this.physics.ball.position,(0,b.mirrorPosition)(t.point,this.config.tablePositionZ)),this.ballInterpolationAlpha=1,a.TweenMax.to(this,.5,{ease:a.Power0.easeNone,ballInterpolationAlpha:0}),this.physics.increaseSpeed()),this.physicsTimeStep=1e3,this.physics.ball.position.copy((0,b.mirrorPosition)(t.point,this.config.tablePositionZ)),this.physics.ball.velocity.copy((0,b.mirrorVelocity)(t.velocity))}},{key:"onReceivedMiss",value:function(t){this.physics.speed=1,this.ballPositionDifference=null,this.time.clearTimeout(this.resetBallTimeout),t.isInit?this.addBall():t.ballHasHitEnemyTable?(this.score.opponent+=1,this.tableBlinkAnimation("table-opponent"),this.hud.scoreDisplay.setOpponentScore(this.score.opponent),this.sound.playUI("miss")):(this.score.self+=1,this.tableBlinkAnimation("table-self"),this.hud.scoreDisplay.setSelfScore(this.score.self),this.sound.playUI("point")),this.score.self>=this.config.POINTS_FOR_WIN||this.score.opponent>=this.config.POINTS_FOR_WIN?this.emitter.emit(_.EVENT.GAME_OVER,this.score,this.config.mode):(this.physics.ball.angularVelocity.x=0,this.physics.ball.angularVelocity.y=0,this.physics.ball.angularVelocity.z=0,this.onReceivedHit(t,!0),this.config.state=_.STATE.PLAYING)}},{key:"onReceivedRequestCountdown",value:function(){this.opponentRequestedCountdown||(this.opponentRequestedCountdown=!0,this.requestCountdown())}},{key:"slowdownBall",value:function(){if(!(this.physics.ball.velocity.z>0)){var t=this.physics.ball.velocity.length(),e=(new p.Vector3).subVectors(this.ball.position,this.paddleOpponent.position).length(),i=e/t,n=i+this.communication.latency/1e3;this.physicsTimeStep=1e3*(n/i)*1}}},{key:"restartPingpongTimeout",value:function(){this.time.clearTimeout(this.resetBallTimeout),this.config.state!==_.STATE.GAME_OVER&&(this.resetBallTimeout=this.time.setTimeout(this.resetTimeoutEnded.bind(this),this.resetTimeoutDuration))}},{key:"resetTimeoutEnded",value:function(){var t=this;this.ballPath=null,this.config.mode===_.MODE.MULTIPLAYER?(this.physicsTimeStep=1e3,this.ballHasHitEnemyTable?(this.score.self+=1,this.tableBlinkAnimation("table-self"),this.hud.scoreDisplay.setSelfScore(this.score.self),this.sound.playUI("point")):(this.score.opponent+=1,this.tableBlinkAnimation("table-opponent"),this.hud.scoreDisplay.setOpponentScore(this.score.opponent),this.sound.playUI("miss")),this.score.opponent>=this.config.POINTS_FOR_WIN||this.score.self>=this.config.POINTS_FOR_WIN?this.emitter.emit(_.EVENT.GAME_OVER,this.score,this.config.mode):this.physics.initBallPosition(),this.communication.sendMiss({x:this.physics.ball.position.x,y:this.physics.ball.position.y,z:this.physics.ball.position.z},{x:this.physics.ball.velocity.x,y:this.physics.ball.velocity.y,z:this.physics.ball.velocity.z},this.ballHasHitEnemyTable),this.ballHasHitEnemyTable=!1):(this.score.highest=Math.max(this.score.self,this.score.highest),this.score.self=0,this.hud.scoreDisplay.setSelfScore(this.score.self),this.physics.initBallPosition(),this.score.lives-=1,this.hud.scoreDisplay.setLives(this.score.lives),this.sound.playUI("miss"),1===this.score.lives&&(this.hud.message.setMessage("LAST LIFE!","antique"),this.hud.message.showMessage(),this.time.setTimeout(function(){t.hud.message.hideMessage()},1500)),this.score.lives<1&&this.emitter.emit(_.EVENT.GAME_OVER,this.score,this.config.mode)),this.restartPingpongTimeout()}},{key:"showOverlay",value:function(){(0,b.setTransparency)(this.table,.2),(0,b.setTransparency)(this.net.topNet,.2),this.net.collider.visible=!1}},{key:"hideOverlay",value:function(){(0,b.setTransparency)(this.table,1),(0,b.setTransparency)(this.net.topNet,1),this.net.collider.visible=!0}},{key:"resetPose",value:function(){this.display&&this.display.resetPose&&this.controls.resetPose()}},{key:"addBall",value:function(){return this.config.state=_.STATE.PLAYING,this.ball?(this.ball.visible=!0,this.physics.initBallPosition(),void this.restartPingpongTimeout()):(this.ball=new V["default"](this.scene,this.config),this.physics.addBall(),void this.restartPingpongTimeout())}},{key:"updateControls",value:function(){var t=this.computePaddlePosition();if(t&&this.ghostPaddlePosition.copy(t),this.controls&&this.controlMode===_.CONTROLMODE.VR&&(this.controls.update(),0===this.camera.position.x&&0===this.camera.position.z&&(this.camera.position.z=1),this.daydream&&(this.camera.position.z=1)),this.hitTween&&this.hitTween.isActive()){var e=(new p.Vector3).lerpVectors(t,this.lastHitPosition,this.paddleInterpolationAlpha);this.paddle.position.copy(e)}else t&&this.paddle.position.copy(t);var i=this.computePaddleRotation(this.paddle.position);this.paddle.rotation.x=i.x,this.paddle.rotation.z=i.z,this.updateCamera()}},{key:"updateCamera",value:function(){if(!this.display||this.controlMode===_.CONTROLMODE.MOUSE){var t=(new p.Euler).copy(this.camera.rotation);this.camera.lookAt((new p.Vector3).lerpVectors(this.ghostPaddlePosition,new p.Vector3(this.table.position.x,this.config.tableHeight+.3,this.table.position.z),.5));var e=(new p.Euler).copy(this.camera.rotation);this.camera.rotation.copy(t),this.cameraTween&&this.cameraTween.kill(),this.cameraTween=a.TweenMax.to(this.camera.rotation,.5,{x:e.x,y:e.y,z:e.z,ease:a.Power4.easeOut})}}},{key:"computePaddlePosition",value:function(){var t=null;if(this.display&&this.controlMode===_.CONTROLMODE.VR){var e=[],i=this.manager.mode===E["default"].VR?-.7:-.3;this.raycaster.setFromCamera(new p.Vector2(0,i),this.camera),this.raycaster.far=5,e=this.raycaster.intersectObject(this.tablePlane,!1),e.length>0&&(e[0].point.x*=1.5),e.length>0&&(t=e[0].point)}else t=this.pointerIsLocked?{x:this.ghostPaddlePosition.x+.0015*this.mouseMoveSinceLastFrame.x,y:this.config.tableHeight+.24,z:this.ghostPaddlePosition.z+.0015*this.mouseMoveSinceLastFrame.y}:{x:1.4*this.mousePosition.x*this.config.tableWidth,y:this.config.tableHeight+.24,z:.5*-this.config.tableDepth*(this.mousePosition.y+.5)};if(t){var n=(0,b.cap)(t.x,this.config.tableWidth,-this.config.tableWidth),r=(0,b.cap)(t.z,this.config.tablePositionZ+.5,0),o=t.y||this.config.tableHeight+.1-.2*r;return{x:n,y:o,z:r}}return this.paddle.position.clone()}},{key:"computePaddleRotation",value:function(t){return{x:-(this.config.tablePositionZ+this.config.tableDepth/2-1*t.z),y:0,z:(0,b.cap)(-t.x,-Math.PI/2,Math.PI/2)}}},{key:"updateBall",value:function(){if(this.ballPositionDifference){var t=(new p.Vector3).lerpVectors(this.physics.ball.position,(new p.Vector3).addVectors(this.physics.ball.position,this.ballPositionDifference),this.ballInterpolationAlpha);this.ball.position.copy(t),this.ball.quaternion.copy(this.physics.ball.quaternion)}else this.ball.position.copy(this.physics.ball.position),this.ball.quaternion.copy(this.physics.ball.quaternion)}},{key:"ballHitAnimation",value:function(){var t=this;this.hitTween&&this.hitTween.isActive()||!this.hitAvailable||(this.hitAvailable=!1,this.hitTween=new a.TimelineMax({onComplete:function(){t.hitAvailable=!0}}),this.lastHitPosition=this.ball.position.clone(),this.lastHitPosition.y=Math.max(this.lastHitPosition.y,this.config.tableHeight+.2),this.hitTween.to(this,.05,{paddleInterpolationAlpha:1,ease:a.Power2.easeIn}),this.hitTween.to(this,.4,{ease:a.Power2.easeOut,paddleInterpolationAlpha:0}))}},{key:"haloAnimation",value:function(t){this.halo.position.copy(t),a.TweenMax.fromTo(this.halo.material,1,{opacity:.2},{opacity:0}),a.TweenMax.fromTo(this.halo.scale,1,{x:.001,y:.001,z:.001},{x:1,y:1,z:1,ease:a.Expo.easeOut})}},{key:"tableBlinkAnimation",value:function(t){var e=this.scene.getObjectByName(t);if(e){var i="#"+e.material.color.clone().lerp(new p.Color(16777215),.5).getHexString(),n={color:"#"+e.material.color.getHexString()},r="#"+new p.Color(this.config.colors.BLUE_TABLE).getHexString(),o="#"+new p.Color(this.config.colors.GREEN_TABLE).getHexString(),s=this.communication.isHost?r:o;a.TweenMax.fromTo(n,.8,{color:i},{color:s,ease:a.Power4.easeOut,onUpdate:function(){e.material.color.set(n.color)}})}}},{key:"resetColors",value:function(){var t=this.table.getObjectByName("table-self-singleplayer"),e=this.table.getObjectByName("table-opponent");this.config.mode===_.MODE.SINGLEPLAYER?(this.table.getObjectByName("table-self").material.color.set(this.config.colors.PINK_TABLE),t.material.color.set(this.config.colors.PINK_TABLE_UPWARDS),this.renderer.setClearColor(this.config.colors.PINK_CLEARCOLOR)):this.communication.isHost?(this.table.getObjectByName("table-self").material.color.set(this.config.colors.BLUE_TABLE),e.material.color.set(this.config.colors.BLUE_TABLE),this.renderer.setClearColor(this.config.colors.BLUE_CLEARCOLOR)):(this.table.getObjectByName("table-self").material.color.set(this.config.colors.GREEN_TABLE),e.material.color.set(this.config.colors.GREEN_TABLE),this.renderer.setClearColor(this.config.colors.GREEN_CLEARCOLOR)),this.paddle.getObjectByName("Cap_1").material.color.set(this.config.colors.PADDLE_COLOR),this.paddle.getObjectByName("Cap_2").material.color.set(this.config.colors.PADDLE_COLOR),this.ball&&this.ball.material.color.set(this.config.colors.BALL)}},{key:"updateHudControls",value:function(){var t={};if(this.controlMode===_.CONTROLMODE.VR||this.isMobile){var e=new p.Vector3(0,0,(-1)),i=this.camera.localToWorld(e);this.crosshair.position.set(i.x,i.y,i.z),i.z>1?this.crosshair.visible=!0:this.crosshair.visible=this.config.state===_.STATE.GAME_OVER,t={x:0,y:0}}else t={x:2*this.mousePosition.x,y:2*this.mousePosition.y};this.raycaster.setFromCamera(t,this.camera),this.raycaster.far=400,this.hud.message.intersect(this.raycaster,this.controlMode===_.CONTROLMODE.MOUSE&&!this.isMobile)}},{key:"updateTrail",value:function(){this.trailEnabled&&(this.ballPath?this.ballPath.points.push(this.ball.position.clone()):this.ballPath=new p.CatmullRomCurve3([this.ball.position.clone(),new p.Vector3(this.ball.position.x,this.ball.position.y,this.ball.position.z+.001)]),this.ballPath.points.length>20&&this.ballPath.points.shift(),this.trail.geometry.dispose(),this.trail.geometry=new p.TubeGeometry(this.ballPath,8,.01,8,(!1)))}},{key:"animate",value:function(){var t=Date.now(),e=Math.min(t-this.lastRender,500);if(this.fps.tick(),this.ball){var i=new p.Vector3;i.subVectors(this.ball.position,this.paddle.position),(i.length()<.4&&Math.abs(i.x)<.2&&Math.abs(i.z)<.1||this.isMobile&&i.length()<.4&&Math.abs(i.x)<.3&&Math.abs(i.z)<.1)&&this.physics.ball.velocity.z>0&&this.onBallPaddleCollision(this.ball.position),this.updateTrail()}if(this.config.state!==_.STATE.PLAYING&&this.config.state!==_.STATE.WAITING&&this.config.state!==_.STATE.COUNTDOWN&&this.config.state!==_.STATE.PAUSED&&this.config.state!==_.STATE.INSTRUCTIONS&&this.config.state!==_.STATE.GAME_OVER||(this.updateControls(),this.config.mode===_.MODE.MULTIPLAYER&&this.config.state!==_.STATE.WAITING&&this.frameNumber%5===0&&this.communication.sendMove(this.paddle.position,this.paddle.rotation)),this.config.state===_.STATE.PLAYING&&this.tabActive&&(this.physics.step(e/this.physicsTimeStep),this.updateBall(),this.physics.predictCollisions(this.scene.getObjectByName("net-collider"),e)),this.updateHudControls(),W&&this.physicsDebugRenderer.update(),this.tabActive&&this.config.state!==_.STATE.PAUSED&&this.time.step(),this.datShitCray){this.table.getObjectByName("table-self").material.color.setHSL(this.hue,1,.5);var n=this.table.getObjectByName("table-self-singleplayer"),r=this.table.getObjectByName("table-opponent");n&&n.material.color.setHSL(this.hue,1,.5),r&&r.material.color.setHSL(this.hue,1,.5),this.paddle.getObjectByName("Cap_1").material.color.setHSL((this.hue+.25)%1,1,.5),this.paddle.getObjectByName("Cap_2").material.color.setHSL((this.hue+.25)%1,1,.5),this.ball&&this.ball.material.color.setHSL((this.hue+.5)%1,1,.5);var o=new p.Color;o.setHSL((this.hue+.8)%1,1,.5),this.renderer.setClearColor(o),this.hue=(this.hue+e/2e3)%1}this.lastRender=t,this.frameNumber+=1,this.mouseMoveSinceLastFrame.x=0,this.mouseMoveSinceLastFrame.y=0,this.manager.render(this.scene,this.camera,this.timestamp),this.display&&"requestAnimationFrame"in this.display&&this.controlMode===_.CONTROLMODE.VR?this.display.requestAnimationFrame(this.animate.bind(this)):requestAnimationFrame(this.animate.bind(this))}}]),e}();e["default"]=X}).call(e,i(2))},function(t,e,i){function n(t){return this instanceof n?(r.call(this),t=t||{},this.last=s(),this.rate=0,this.time=0,this.decay=t.decay||1,this.every=t.every||1,void(this.ticks=0)):new n(t)}var r=i(53).EventEmitter,o=i(54);t.exports=n;var s=function(){return this}().performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now||function(){return+new Date};o(n,r),n.prototype.tick=function(){var t=s(),e=t-this.last,i=e;this.ticks+=1,this.last=t,this.time+=(i-this.time)*this.decay,this.rate=1e3/this.time,this.ticks%this.every||this.emit("data",this.rate)}},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,a,l,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(i=this._events[t],s(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(o(i))for(a=Array.prototype.slice.call(arguments,1),h=i.slice(),r=h.length,l=0;l<r;l++)h[l].apply(this,a);return!0},i.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],s=i.length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(a=s;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){r=a;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){function i(t,e,i){i=i||{};var n={};[t.prototype,i].forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(e){n[e]=Object.getOwnPropertyDescriptor(t,e)})}),t.prototype=Object.create(e.prototype,n),t["super"]=e}t.exports=i},function(t,e,i){!function(t,i){i(e)}(this,function(t){"use strict";function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,r,o,s,a,l,h,c,u){Object.defineProperty(this,"id",{value:pa++}),this.uuid=ua.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:n.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:ss,this.wrapT=void 0!==o?o:ss,this.magFilter=void 0!==s?s:us,this.minFilter=void 0!==a?a:fs,this.anisotropy=void 0!==c?c:1,this.format=void 0!==l?l:Ps,this.type=void 0!==h?h:ds,this.offset=new i(0,0),this.repeat=new i(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:ea,this.version=0,this.onUpdate=null}function r(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function o(t,e,i){this.uuid=ua.generateUUID(),this.width=t,this.height=e,this.scissor=new r(0,0,t,e),this.scissorTest=!1,this.viewport=new r(0,0,t,e),i=i||{},void 0===i.minFilter&&(i.minFilter=us),this.texture=new n((void 0),(void 0),i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function s(t,e,i){o.call(this,t,e,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function a(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function l(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function h(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function c(t,e,i,r,o,s,a,l,h,c){t=void 0!==t?t:[],e=void 0!==e?e:Qo,n.call(this,t,e,i,r,o,s,a,l,h,c),this.flipY=!1}function u(){this.seq=[],this.map={}}function p(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,o=ma[r];if(void 0===o&&(o=new Float32Array(r),ma[r]=o),0!==e){n.toArray(o,0);for(var s=1,a=0;s!==e;++s)a+=i,t[s].toArray(o,a)}return o}function f(t,e){var i=ga[e];void 0===i&&(i=new Int32Array(e),ga[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function d(t,e){t.uniform1f(this.addr,e)}function m(t,e){t.uniform1i(this.addr,e)}function g(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function y(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function v(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function _(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function b(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function T(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function E(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||fa,n)}function x(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||da,n)}function S(t,e){t.uniform2iv(this.addr,e)}function w(t,e){t.uniform3iv(this.addr,e)}function A(t,e){t.uniform4iv(this.addr,e)}function M(t){switch(t){case 5126:return d;case 35664:return g;case 35665:return y;case 35666:return v;case 35674:return _;case 35675:return b;case 35676:return T;case 35678:return E;case 35680:return x;case 5124:case 35670:return m;case 35667:case 35671:return S;case 35668:case 35672:return w;case 35669:case 35673:return A}}function P(t,e){t.uniform1fv(this.addr,e)}function C(t,e){t.uniform1iv(this.addr,e)}function R(t,e){t.uniform2fv(this.addr,p(e,this.size,2))}function I(t,e){t.uniform3fv(this.addr,p(e,this.size,3))}function O(t,e){t.uniform4fv(this.addr,p(e,this.size,4))}function N(t,e){t.uniformMatrix2fv(this.addr,!1,p(e,this.size,4))}function L(t,e){t.uniformMatrix3fv(this.addr,!1,p(e,this.size,9))}function D(t,e){t.uniformMatrix4fv(this.addr,!1,p(e,this.size,16))}function k(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var o=0;o!==n;++o)i.setTexture2D(e[o]||fa,r[o])}function B(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var o=0;o!==n;++o)i.setTextureCube(e[o]||da,r[o])}function G(t){switch(t){case 5126:return P;case 35664:return R;case 35665:return I;case 35666:return O;case 35674:return N;case 35675:return L;case 35676:return D;case 35678:return k;case 35680:return B;case 5124:case 35670:return C;case 35667:case 35671:return S;case 35668:case 35672:return w;case 35669:case 35673:return A}}function F(t,e,i){this.id=t,this.addr=i,this.setValue=M(e.type)}function V(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=G(e.type)}function U(t){this.id=t,u.call(this)}function H(t,e){t.seq.push(e),t.map[e.id]=e}function j(t,e,i){var n=t.name,r=n.length;for(ya.lastIndex=0;;){var o=ya.exec(n),s=ya.lastIndex,a=o[1],l="]"===o[2],h=o[3];if(l&&(a=0|a),void 0===h||"["===h&&s+2===r){H(i,void 0===h?new F(a,t,e):new V(a,t,e));break}var c=i.map,u=c[a];void 0===u&&(u=new U(a),H(i,u)),i=u}}function z(t,e,i){u.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<n;++r){var o=t.getActiveUniform(e,r),s=o.name,a=t.getUniformLocation(e,s);j(o,a,this)}}function W(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function X(t,e,i,r,o,s,a,l,h,c,u,p){n.call(this,null,s,a,l,h,c,r,o,u,p),this.image={data:t,width:e,height:i},this.magFilter=void 0!==h?h:ls,this.minFilter=void 0!==c?c:ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Y(t,e){this.min=void 0!==t?t:new i((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new i((-(1/0)),(-(1/0)))}function q(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=d.createBuffer(),s=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),p=d.createTexture(),f=d.createTexture(),m.bindTexture(d.TEXTURE_2D,p),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),m.bindTexture(d.TEXTURE_2D,f),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),a={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},h=r(a),c={vertex:d.getAttribLocation(h,"position"),uv:d.getAttribLocation(h,"uv")},u={renderType:d.getUniformLocation(h,"renderType"),map:d.getUniformLocation(h,"map"),occlusionMap:d.getUniformLocation(h,"occlusionMap"),opacity:d.getUniformLocation(h,"opacity"),color:d.getUniformLocation(h,"color"),scale:d.getUniformLocation(h,"scale"),rotation:d.getUniformLocation(h,"rotation"),screenPosition:d.getUniformLocation(h,"screenPosition")}}function r(e){var i=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),r=d.createShader(d.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return d.shaderSource(n,o+e.fragmentShader),d.shaderSource(r,o+e.vertexShader),d.compileShader(n),d.compileShader(r),d.attachShader(i,n),d.attachShader(i,r),d.linkProgram(i),i}var o,s,a,h,c,u,p,f,d=t.context,m=t.state;this.render=function(r,a,g){if(0!==e.length){var y=new l,v=g.w/g.z,_=.5*g.z,b=.5*g.w,T=16/g.w,E=new i(T*v,T),x=new l(1,1,0),S=new i(1,1),w=new Y;w.min.set(g.x,g.y),w.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===h&&n(),d.useProgram(h),m.initAttributes(),m.enableAttribute(c.vertex),m.enableAttribute(c.uv),m.disableUnusedAttributes(),d.uniform1i(u.occlusionMap,0),d.uniform1i(u.map,1),d.bindBuffer(d.ARRAY_BUFFER,o),d.vertexAttribPointer(c.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(c.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),m.disable(d.CULL_FACE),m.setDepthWrite(!1);for(var A=0,M=e.length;A<M;A++){T=16/g.w,E.set(T*v,T);var P=e[A];if(y.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]),y.applyMatrix4(a.matrixWorldInverse),y.applyMatrix4(a.projectionMatrix),x.copy(y),S.x=g.x+x.x*_+_-8,S.y=g.y+x.y*b+b-8,w.containsPoint(S)===!0){m.activeTexture(d.TEXTURE0),m.bindTexture(d.TEXTURE_2D,null),m.activeTexture(d.TEXTURE1),m.bindTexture(d.TEXTURE_2D,p),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,S.x,S.y,16,16,0),d.uniform1i(u.renderType,0),d.uniform2f(u.scale,E.x,E.y),d.uniform3f(u.screenPosition,x.x,x.y,x.z),m.disable(d.BLEND),m.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),m.activeTexture(d.TEXTURE0),m.bindTexture(d.TEXTURE_2D,f),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,S.x,S.y,16,16,0),d.uniform1i(u.renderType,1),m.disable(d.DEPTH_TEST),m.activeTexture(d.TEXTURE1),m.bindTexture(d.TEXTURE_2D,p),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),P.positionScreen.copy(x),P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares(),d.uniform1i(u.renderType,2),m.enable(d.BLEND);for(var C=0,R=P.lensFlares.length;C<R;C++){var I=P.lensFlares[C];I.opacity>.001&&I.scale>.001&&(x.x=I.x,x.y=I.y,x.z=I.z,T=I.size*I.scale/g.w,E.x=T*v,E.y=T,d.uniform3f(u.screenPosition,x.x,x.y,x.z),d.uniform2f(u.scale,E.x,E.y),d.uniform1f(u.rotation,I.rotation),d.uniform1f(u.opacity,I.opacity),d.uniform3f(u.color,I.color.r,I.color.g,I.color.b),m.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),t.setTexture2D(I.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}m.enable(d.CULL_FACE),m.enable(d.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function Z(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);s=d.createBuffer(),h=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,s),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,h),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),
c=r(),u={position:d.getAttribLocation(c,"position"),uv:d.getAttribLocation(c,"uv")},p={uvOffset:d.getUniformLocation(c,"uvOffset"),uvScale:d.getUniformLocation(c,"uvScale"),rotation:d.getUniformLocation(c,"rotation"),scale:d.getUniformLocation(c,"scale"),color:d.getUniformLocation(c,"color"),map:d.getUniformLocation(c,"map"),opacity:d.getUniformLocation(c,"opacity"),modelViewMatrix:d.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:d.getUniformLocation(c,"projectionMatrix"),fogType:d.getUniformLocation(c,"fogType"),fogDensity:d.getUniformLocation(c,"fogDensity"),fogNear:d.getUniformLocation(c,"fogNear"),fogFar:d.getUniformLocation(c,"fogFar"),fogColor:d.getUniformLocation(c,"fogColor"),alphaTest:d.getUniformLocation(c,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var o=i.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),f=new n(i),f.needsUpdate=!0}function r(){var e=d.createProgram(),i=d.createShader(d.VERTEX_SHADER),n=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),d.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),d.compileShader(i),d.compileShader(n),d.attachShader(e,i),d.attachShader(e,n),d.linkProgram(e),e}function o(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var s,h,c,u,p,f,d=t.context,m=t.state,g=new l,y=new a,v=new l;this.render=function(n,r){if(0!==e.length){void 0===c&&i(),d.useProgram(c),m.initAttributes(),m.enableAttribute(u.position),m.enableAttribute(u.uv),m.disableUnusedAttributes(),m.disable(d.CULL_FACE),m.enable(d.BLEND),d.bindBuffer(d.ARRAY_BUFFER,s),d.vertexAttribPointer(u.position,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(u.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,h),d.uniformMatrix4fv(p.projectionMatrix,!1,r.projectionMatrix.elements),m.activeTexture(d.TEXTURE0),d.uniform1i(p.map,0);var a=0,l=0,_=n.fog;_?(d.uniform3f(p.fogColor,_.color.r,_.color.g,_.color.b),_.isFog?(d.uniform1f(p.fogNear,_.near),d.uniform1f(p.fogFar,_.far),d.uniform1i(p.fogType,1),a=1,l=1):_.isFogExp2&&(d.uniform1f(p.fogDensity,_.density),d.uniform1i(p.fogType,2),a=2,l=2)):(d.uniform1i(p.fogType,0),a=0,l=0);for(var b=0,T=e.length;b<T;b++){var E=e[b];E.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}e.sort(o);for(var x=[],b=0,T=e.length;b<T;b++){var E=e[b],S=E.material;if(S.visible!==!1){d.uniform1f(p.alphaTest,S.alphaTest),d.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(g,y,v),x[0]=v.x,x[1]=v.y;var w=0;n.fog&&S.fog&&(w=l),a!==w&&(d.uniform1i(p.fogType,w),a=w),null!==S.map?(d.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),d.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(d.uniform2f(p.uvOffset,0,0),d.uniform2f(p.uvScale,1,1)),d.uniform1f(p.opacity,S.opacity),d.uniform3f(p.color,S.color.r,S.color.g,S.color.b),d.uniform1f(p.rotation,S.rotation),d.uniform2fv(p.scale,x),m.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),m.setDepthTest(S.depthTest),m.setDepthWrite(S.depthWrite),S.map?t.setTexture2D(S.map,0):t.setTexture2D(f,0),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)}}m.enable(d.CULL_FACE),t.resetGLState()}}}function K(){Object.defineProperty(this,"id",{value:xh++}),this.uuid=ua.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=fo,this.side=ro,this.shading=lo,this.vertexColors=ho,this.opacity=1,this.transparent=!1,this.blendSrc=Po,this.blendDst=Co,this.blendEquation=_o,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Go,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function $(t){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Q(t){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=ha,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function J(t,e){this.min=void 0!==t?t:new l((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new l((-(1/0)),(-(1/0)),(-(1/0)))}function tt(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:0}function et(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function it(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}function nt(t,e,i,n,r,o){this.planes=[void 0!==t?t:new it,void 0!==e?e:new it,void 0!==i?i:new it,void 0!==n?n:new it,void 0!==r?r:new it,void 0!==o?o:new it]}function rt(t,e,n,s){function a(e,i,n,r){var o=e.geometry,s=null,a=S,l=e.customDepthMaterial;if(n&&(a=w,l=e.customDistanceMaterial),l)s=l;else{var h=!1;i.morphTargets&&(o&&o.isBufferGeometry?h=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(h=o.morphTargets&&o.morphTargets.length>0));var c=e.isSkinnedMesh&&i.skinning,u=0;h&&(u|=T),c&&(u|=E),s=a[u]}if(t.localClippingEnabled&&i.clipShadows===!0&&0!==i.clippingPlanes.length){var p=s.uuid,f=i.uuid,d=A[p];void 0===d&&(d={},A[p]=d);var m=d[f];void 0===m&&(m=s.clone(),d[f]=m),s=m}s.visible=i.visible,s.wireframe=i.wireframe;var g=i.side;return G.renderSingleSided&&g==so&&(g=ro),G.renderReverseSided&&(g===ro?g=oo:g===oo&&(g=ro)),s.side=g,s.clipShadows=i.clipShadows,s.clippingPlanes=i.clippingPlanes,s.wireframeLinewidth=i.wireframeLinewidth,s.linewidth=i.linewidth,n&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(r),s}function c(t,e,i){if(t.visible!==!1){var n=0!==(t.layers.mask&e.layers.mask);if(n&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(t.frustumCulled===!1||f.intersectsObject(t)===!0)){var r=t.material;r.visible===!0&&(t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),b.push(t))}for(var o=t.children,s=0,a=o.length;s<a;s++)c(o[s],e,i)}}var u=t.context,p=t.state,f=new nt,d=new h,m=e.shadows,g=new i,y=new i(s.maxTextureSize,s.maxTextureSize),v=new l,_=new l,b=[],T=1,E=2,x=(T|E)+1,S=new Array(x),w=new Array(x),A={},M=[new l(1,0,0),new l((-1),0,0),new l(0,0,1),new l(0,0,(-1)),new l(0,1,0),new l(0,(-1),0)],P=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,(-1))],C=[new r,new r,new r,new r,new r,new r],R=new Q;R.depthPacking=ca,R.clipping=!0;for(var I=Eh.distanceRGBA,O=va.clone(I.uniforms),N=0;N!==x;++N){var L=0!==(N&T),D=0!==(N&E),k=R.clone();k.morphTargets=L,k.skinning=D,S[N]=k;var B=new $({defines:{USE_SHADOWMAP:""},uniforms:O,vertexShader:I.vertexShader,fragmentShader:I.fragmentShader,morphTargets:L,skinning:D,clipping:!0});w[N]=B}var G=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=io,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,i){if(G.enabled!==!1&&(G.autoUpdate!==!1||G.needsUpdate!==!1)&&0!==m.length){p.buffers.color.setClear(1,1,1,1),p.disable(u.BLEND),p.setDepthTest(!0),p.setScissorTest(!1);for(var r,s,l=0,h=m.length;l<h;l++){var T=m[l],E=T.shadow;if(void 0!==E){var x=E.camera;if(g.copy(E.mapSize),g.min(y),T&&T.isPointLight){r=6,s=!0;var S=g.x,w=g.y;C[0].set(2*S,w,S,w),C[1].set(0,w,S,w),C[2].set(3*S,w,S,w),C[3].set(S,w,S,w),C[4].set(3*S,0,S,w),C[5].set(S,0,S,w),g.x*=4,g.y*=2}else r=1,s=!1;if(null===E.map){var A={minFilter:ls,magFilter:ls,format:Ps};E.map=new o(g.x,g.y,A),x.updateProjectionMatrix()}E.isSpotLightShadow&&E.update(T),E&&E.isRectAreaLightShadow&&E.update(T);var R=E.map,I=E.matrix;_.setFromMatrixPosition(T.matrixWorld),x.position.copy(_),t.setRenderTarget(R),t.clear();for(var O=0;O<r;O++){if(s){v.copy(x.position),v.add(M[O]),x.up.copy(P[O]),x.lookAt(v);var N=C[O];p.viewport(N)}else v.setFromMatrixPosition(T.target.matrixWorld),x.lookAt(v);x.updateMatrixWorld(),x.matrixWorldInverse.getInverse(x.matrixWorld),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(x.projectionMatrix),I.multiply(x.matrixWorldInverse),d.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),f.setFromMatrix(d),b.length=0,c(e,i,x);for(var L=0,D=b.length;L<D;L++){var k=b[L],B=n.update(k),F=k.material;if(F&&F.isMultiMaterial)for(var V=B.groups,U=F.materials,H=0,j=V.length;H<j;H++){var z=V[H],W=U[z.materialIndex];if(W.visible===!0){var X=a(k,W,s,_);t.renderBufferDirect(x,null,B,X,k,z)}}else{var X=a(k,F,s,_);t.renderBufferDirect(x,null,B,X,k,null)}}}}else console.warn("THREE.WebGLShadowMap:",T,"has no shadow.")}var Y=t.getClearColor(),q=t.getClearAlpha();t.setClearColor(Y,q),G.needsUpdate=!1}}}function ot(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l}function st(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||st.DefaultOrder}function at(){this.mask=1}function lt(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Sh++}),this.uuid=ua.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=lt.DefaultUp.clone();var i=new l,n=new st,r=new a,o=new l(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new h},normalMatrix:{value:new et}}),this.matrix=new h,this.matrixWorld=new h,this.matrixAutoUpdate=lt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ht(t,e){this.start=void 0!==t?t:new l,this.end=void 0!==e?e:new l}function ct(t,e,i){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==i?i:new l}function ut(t,e,i,n,r,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new l,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new W,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function pt(t){K.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ft(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=ua.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function dt(t,e){ft.call(this,new Int8Array(t),e)}function mt(t,e){ft.call(this,new Uint8Array(t),e)}function gt(t,e){ft.call(this,new Uint8ClampedArray(t),e)}function yt(t,e){ft.call(this,new Int16Array(t),e)}function vt(t,e){ft.call(this,new Uint16Array(t),e)}function _t(t,e){ft.call(this,new Int32Array(t),e)}function bt(t,e){ft.call(this,new Uint32Array(t),e)}function Tt(t,e){ft.call(this,new Float32Array(t),e)}function Et(t,e){ft.call(this,new Float64Array(t),e)}function xt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function St(t){for(var e=t.length,i=-(1/0);e--;)t[e]>i&&(i=t[e]);return i}function wt(){return wh++}function At(){Object.defineProperty(this,"id",{value:wt()}),this.uuid=ua.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Mt(){Object.defineProperty(this,"id",{value:wt()}),this.uuid=ua.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Pt(t,e){lt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Mt,this.material=void 0!==e?e:new pt({color:16777215*Math.random()}),this.drawMode=Qs,this.updateMorphTargets()}function Ct(t,e,i,n,r,o){At.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Rt(t,e,i,n,r,o)),this.mergeVertices()}function Rt(t,e,i,n,r,o){function s(t,e,i,n,r,o,s,m,g,y,v){var _,b,T=o/g,E=s/y,x=o/2,S=s/2,w=m/2,A=g+1,M=y+1,P=0,C=0,R=new l;for(b=0;b<M;b++){var I=b*E-S;for(_=0;_<A;_++){var O=_*T-x;R[t]=O*n,R[e]=I*r,R[i]=w,c.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[i]=m>0?1:-1,u.push(R.x,R.y,R.z),p.push(_/g),p.push(1-b/y),P+=1}}for(b=0;b<y;b++)for(_=0;_<g;_++){var N=f+_+A*b,L=f+_+A*(b+1),D=f+(_+1)+A*(b+1),k=f+(_+1)+A*b;h.push(N,L,k),h.push(L,D,k),C+=6}a.addGroup(d,C,v),d+=C,f+=P}Mt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};var a=this;n=Math.floor(n)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var h=[],c=[],u=[],p=[],f=0,d=0;s("z","y","x",-1,-1,i,e,t,o,r,0),s("z","y","x",1,-1,i,e,-t,o,r,1),s("x","z","y",1,1,t,i,e,n,o,2),s("x","z","y",1,-1,t,i,-e,n,o,3),s("x","y","z",1,-1,t,e,i,n,r,4),s("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(h),this.addAttribute("position",new Tt(c,3)),this.addAttribute("normal",new Tt(u,3)),this.addAttribute("uv",new Tt(p,2))}function It(t,e,i,n){At.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Ot(t,e,i,n))}function Ot(t,e,i,n){Mt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,o,s=t/2,a=e/2,l=Math.floor(i)||1,h=Math.floor(n)||1,c=l+1,u=h+1,p=t/l,f=e/h,d=[],m=[],g=[],y=[];for(o=0;o<u;o++){var v=o*f-a;for(r=0;r<c;r++){var _=r*p-s;m.push(_,-v,0),g.push(0,0,1),y.push(r/l),y.push(1-o/h)}}for(o=0;o<h;o++)for(r=0;r<l;r++){var b=r+c*o,T=r+c*(o+1),E=r+1+c*(o+1),x=r+1+c*o;d.push(b,T,x),d.push(T,E,x)}this.setIndex(d),this.addAttribute("position",new Tt(m,3)),this.addAttribute("normal",new Tt(g,3)),this.addAttribute("uv",new Tt(y,2))}function Nt(){lt.call(this),this.type="Camera",this.matrixWorldInverse=new h,this.projectionMatrix=new h}function Lt(t,e,i,n){Nt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Dt(t,e,i,n,r,o){Nt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function kt(t,e,i){function n(t){a=t}function r(i){i.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(l=t.UNSIGNED_INT,h=4):i.array instanceof Uint16Array?(l=t.UNSIGNED_SHORT,h=2):(l=t.UNSIGNED_BYTE,h=1)}function o(e,n){t.drawElements(a,n,l,e*h),i.calls++,i.vertices+=n,a===t.TRIANGLES&&(i.faces+=n/3)}function s(n,r,o){var s=e.get("ANGLE_instanced_arrays");return null===s?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(s.drawElementsInstancedANGLE(a,o,l,r*h,n.maxInstancedCount),i.calls++,i.vertices+=o*n.maxInstancedCount,void(a===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*o/3)))}var a,l,h;return{setMode:n,setIndex:r,render:o,renderInstances:s}}function Bt(t,e,i){function n(t){s=t}function r(e,n){t.drawArrays(s,e,n),i.calls++,i.vertices+=n,s===t.TRIANGLES&&(i.faces+=n/3)}function o(n){var r=e.get("ANGLE_instanced_arrays");if(null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=n.attributes.position,a=0;o.isInterleavedBufferAttribute?(a=o.data.count,r.drawArraysInstancedANGLE(s,0,a,n.maxInstancedCount)):(a=o.count,r.drawArraysInstancedANGLE(s,0,a,n.maxInstancedCount)),i.calls++,i.vertices+=a*n.maxInstancedCount,s===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*a/3)}var s;return{setMode:n,render:r,renderInstances:o}}function Gt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new l,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new l,direction:new l,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new l,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"HemisphereLight":n={direction:new l,skyColor:new W,groundColor:new W};break;case"RectAreaLight":n={color:new W,position:new l,halfWidth:new l,halfHeight:new l}}return t[e.id]=n,n}}}function Ft(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}function Vt(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),Ft(i)),n}function Ut(t){switch(t){case ea:return["Linear","( value )"];case ia:return["sRGB","( value )"];case ra:return["RGBE","( value )"];case sa:return["RGBM","( value, 7.0 )"];case aa:return["RGBM","( value, 16.0 )"];case la:return["RGBD","( value, 256.0 )"];case na:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Ht(t,e){var i=Ut(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function jt(t,e){var i=Ut(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function zt(t,e){var i;switch(e){case Yo:i="Linear";break;case qo:i="Reinhard";break;case Zo:i="Uncharted2";break;case Ko:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Wt(t,e,i){t=t||{};var n=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(qt).join("\n")}function Xt(t){var e=[];for(var i in t){var n=t[i];n!==!1&&e.push("#define "+i+" "+n)}return e.join("\n")}function Yt(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var s=t.getActiveAttrib(e,o),a=s.name;n[a]=t.getAttribLocation(e,a)}return n}function qt(t){return""!==t}function Zt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Kt(t){function e(t,e){var i=_h[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Kt(i)}var i=/#include +<([\w\d.]+)>/g;return t.replace(i,e)}function $t(t){function e(t,e,i,n){for(var r="",o=parseInt(e);o<parseInt(i);o++)r+=n.replace(/\[ i \]/g,"[ "+o+" ]");return r}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,e)}function Qt(t,e,i,n){var r=t.context,o=i.extensions,s=i.defines,a=i.__webglShader.vertexShader,l=i.__webglShader.fragmentShader,h="SHADOWMAP_TYPE_BASIC";n.shadowMapType===io?h="SHADOWMAP_TYPE_PCF":n.shadowMapType===no&&(h="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case Qo:case Jo:c="ENVMAP_TYPE_CUBE";break;case ns:case rs:c="ENVMAP_TYPE_CUBE_UV";break;case ts:case es:c="ENVMAP_TYPE_EQUIREC";break;case is:c="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Jo:case es:u="ENVMAP_MODE_REFRACTION"}switch(i.combine){case jo:p="ENVMAP_BLENDING_MULTIPLY";break;case zo:p="ENVMAP_BLENDING_MIX";break;case Wo:p="ENVMAP_BLENDING_ADD"}}var f,d,m=t.gammaFactor>0?t.gammaFactor:1,g=Wt(o,n,t.extensions),y=Xt(s),v=r.createProgram();i.isRawShaderMaterial?(f=[y,"\n"].filter(qt).join("\n"),d=[g,y,"\n"].filter(qt).join("\n")):(f=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,y,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qt).join("\n"),d=[g,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==Xo?"#define TONE_MAPPING":"",n.toneMapping!==Xo?_h.tonemapping_pars_fragment:"",n.toneMapping!==Xo?zt("toneMapping",n.toneMapping):"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?_h.encodings_pars_fragment:"",n.mapEncoding?Ht("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Ht("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Ht("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?jt("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(qt).join("\n")),a=Kt(a,n),a=Zt(a,n),l=Kt(l,n),l=Zt(l,n),i.isShaderMaterial||(a=$t(a),l=$t(l));var _=f+a,b=d+l,T=Vt(r,r.VERTEX_SHADER,_),E=Vt(r,r.FRAGMENT_SHADER,b);r.attachShader(v,T),r.attachShader(v,E),void 0!==i.index0AttributeName?r.bindAttribLocation(v,0,i.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);var x=r.getProgramInfoLog(v),S=r.getShaderInfoLog(T),w=r.getShaderInfoLog(E),A=!0,M=!0;r.getProgramParameter(v,r.LINK_STATUS)===!1?(A=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(v,r.VALIDATE_STATUS),"gl.getProgramInfoLog",x,S,w)):""!==x?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",x):""!==S&&""!==w||(M=!1),M&&(this.diagnostics={runnable:A,material:i,programLog:x,vertexShader:{log:S,prefix:f},fragmentShader:{log:w,prefix:d}}),r.deleteShader(T),r.deleteShader(E);var P;this.getUniforms=function(){return void 0===P&&(P=new z(r,v,t)),P};var C;return this.getAttributes=function(){return void 0===C&&(C=Yt(r,v)),C},this.destroy=function(){r.deleteProgram(v),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Ah++,this.code=e,this.usedTimes=1,this.program=v,this.vertexShader=T,this.fragmentShader=E,this}function Jt(t,e){function i(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var i=e.maxVertexUniforms,n=Math.floor((i-20)/4),r=n;return void 0!==t&&t&&t.isSkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),r<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function n(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding):i=ea,i===ea&&e&&(i=na),i}var r=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(r,s,a,l,h,c){var u=o[r.type],p=i(c),f=t.getPrecision();null!==r.precision&&(f=e.getMaxPrecision(r.precision),f!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",f,"instead."));var d=t.getCurrentRenderTarget(),m={
shaderID:u,precision:f,supportsVertexTextures:e.vertexTextures,outputEncoding:n(d?d.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:n(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:n(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===ns||r.envMap.mapping===rs),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:n(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!a,useFog:r.fog,fogExp:a&&a.isFogExp2,flatShading:r.shading===ao,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:p,useVertexTexture:e.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numClippingPlanes:l,numClipIntersection:h,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&s.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===so,flipSided:r.side===oo,depthPacking:void 0!==r.depthPacking&&r.depthPacking};return m},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<s.length;r++)i.push(e[s[r]]);return i.join()},this.acquireProgram=function(e,i,n){for(var o,s=0,a=r.length;s<a;s++){var l=r[s];if(l.code===n){o=l,++o.usedTimes;break}}return void 0===o&&(o=new Qt(t,n,e,i),r.push(o)),o},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function te(t,e,i){function n(t){var r=t.target,a=l[r.id];null!==a.index&&o(a.index),s(a.attributes),r.removeEventListener("dispose",n),delete l[r.id];var h=e.get(r);h.wireframe&&o(h.wireframe),e["delete"](r);var c=e.get(a);c.wireframe&&o(c.wireframe),e["delete"](a),i.memory.geometries--}function r(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function o(e){var i=r(e);void 0!==i&&(t.deleteBuffer(i),a(e))}function s(t){for(var e in t)o(t[e])}function a(t){t.isInterleavedBufferAttribute?e["delete"](t.data):e["delete"](t)}var l={};return{get:function(t){var e=t.geometry;if(void 0!==l[e.id])return l[e.id];e.addEventListener("dispose",n);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Mt).setFromObject(t)),r=e._bufferGeometry),l[e.id]=r,i.memory.geometries++,r}}}function ee(t,e,i){function n(e){var i=c.get(e);e.geometry.isGeometry&&i.updateFromObject(e);var n=i.index,o=i.attributes;null!==n&&r(n,t.ELEMENT_ARRAY_BUFFER);for(var s in o)r(o[s],t.ARRAY_BUFFER);var a=i.morphAttributes;for(var s in a)for(var l=a[s],h=0,u=l.length;h<u;h++)r(l[h],t.ARRAY_BUFFER);return i}function r(t,i){var n=t.isInterleavedBufferAttribute?t.data:t,r=e.get(n);void 0===r.__webglBuffer?o(r,n,i):r.version!==n.version&&s(r,n,i)}function o(e,i,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var r=i.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,i.array,r);var o=t.FLOAT,s=i.array;s instanceof Float32Array?o=t.FLOAT:s instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):s instanceof Uint16Array?o=t.UNSIGNED_SHORT:s instanceof Int16Array?o=t.SHORT:s instanceof Uint32Array?o=t.UNSIGNED_INT:s instanceof Int32Array?o=t.INT:s instanceof Int8Array?o=t.BYTE:s instanceof Uint8Array&&(o=t.UNSIGNED_BYTE),e.bytesPerElement=s.BYTES_PER_ELEMENT,e.type=o,e.version=i.version,i.onUploadCallback()}function s(e,i,n){t.bindBuffer(n,e.__webglBuffer),i.dynamic===!1?t.bufferData(n,i.array,t.STATIC_DRAW):i.updateRange.count===-1?t.bufferSubData(n,0,i.array):0===i.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),e.version=i.version}function a(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function l(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)}function h(i){var n=e.get(i);if(void 0!==n.wireframe)return n.wireframe;var o=[],s=i.index,a=i.attributes;if(null!==s)for(var l=s.array,h=0,c=l.length;h<c;h+=3){var u=l[h+0],p=l[h+1],f=l[h+2];o.push(u,p,p,f,f,u)}else for(var l=a.position.array,h=0,c=l.length/3-1;h<c;h+=3){var u=h+0,p=h+1,f=h+2;o.push(u,p,p,f,f,u)}var d=new(St(o)>65535?bt:vt)(o,1);return r(d,t.ELEMENT_ARRAY_BUFFER),n.wireframe=d,d}var c=new te(t,e,i);return{getAttributeBuffer:a,getAttributeProperties:l,getWireframeAttribute:h,update:n}}function ie(t,e,i,n,r,o,s){function a(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);var r=n.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function l(t){return ua.isPowerOfTwo(t.width)&&ua.isPowerOfTwo(t.height)}function h(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=ua.nearestPowerOfTwo(t.width),e.height=ua.nearestPowerOfTwo(t.height);var i=e.getContext("2d");return i.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function c(t){return t.wrapS!==ss||t.wrapT!==ss||t.minFilter!==ls&&t.minFilter!==us}function u(e){return e===ls||e===hs||e===cs?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),d(e),M.textures--}function f(t){var e=t.target;e.removeEventListener("dispose",f),m(e),M.textures--}function d(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n["delete"](e)}function m(e){var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[o]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n["delete"](e.texture),n["delete"](e)}}function g(e,r){var o=n.get(e);if(e.version>0&&o.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(s.complete!==!1)return void b(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function y(e,s){var h=n.get(e);if(6===e.image.length)if(e.version>0&&h.__version!==e.version){h.__image__webglTextureCube||(e.addEventListener("dispose",p),h.__image__webglTextureCube=t.createTexture(),M.textures++),i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,h.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var c=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,f=[],d=0;d<6;d++)c||u?f[d]=u?e.image[d].image:e.image[d]:f[d]=a(e.image[d],r.maxCubemapSize);var m=f[0],g=l(m),y=o(e.format),v=o(e.type);_(t.TEXTURE_CUBE_MAP,e,g);for(var d=0;d<6;d++)if(c)for(var b,T=f[d].mipmaps,E=0,x=T.length;E<x;E++)b=T[E],e.format!==Ps&&e.format!==Ms?i.getCompressedTextureFormats().indexOf(y)>-1?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,E,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,E,y,b.width,b.height,0,y,v,b.data);else u?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,y,f[d].width,f[d].height,0,y,v,f[d].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,y,y,v,f[d]);e.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP),h.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_CUBE_MAP,h.__image__webglTextureCube)}function v(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function _(i,s,a){var l;if(a?(t.texParameteri(i,t.TEXTURE_WRAP_S,o(s.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,o(s.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,o(s.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o(s.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),s.wrapS===ss&&s.wrapT===ss||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),t.texParameteri(i,t.TEXTURE_MAG_FILTER,u(s.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,u(s.minFilter)),s.minFilter!==ls&&s.minFilter!==us&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),l=e.get("EXT_texture_filter_anisotropic")){if(s.type===bs&&null===e.get("OES_texture_float_linear"))return;if(s.type===Ts&&null===e.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(t.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function b(e,n,s){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),M.textures++),i.activeTexture(t.TEXTURE0+s),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var u=a(n.image,r.maxTextureSize);c(n)&&l(u)===!1&&(u=h(u));var f=l(u),d=o(n.format),m=o(n.type);_(t.TEXTURE_2D,n,f);var g,y=n.mipmaps;if(n.isDepthTexture){var v=t.DEPTH_COMPONENT;if(n.type===bs){if(!P)throw new Error("Float Depth Texture only supported in WebGL2.0");v=t.DEPTH_COMPONENT32F}else P&&(v=t.DEPTH_COMPONENT16);n.format===Os&&v===t.DEPTH_COMPONENT&&n.type!==ys&&n.type!==_s&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=ys,m=o(n.type)),n.format===Ns&&(v=t.DEPTH_STENCIL,n.type!==ws&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=ws,m=o(n.type))),i.texImage2D(t.TEXTURE_2D,0,v,u.width,u.height,0,d,m,null)}else if(n.isDataTexture)if(y.length>0&&f){for(var b=0,T=y.length;b<T;b++)g=y[b],i.texImage2D(t.TEXTURE_2D,b,d,g.width,g.height,0,d,m,g.data);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,d,u.width,u.height,0,d,m,u.data);else if(n.isCompressedTexture)for(var b=0,T=y.length;b<T;b++)g=y[b],n.format!==Ps&&n.format!==Ms?i.getCompressedTextureFormats().indexOf(d)>-1?i.compressedTexImage2D(t.TEXTURE_2D,b,d,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,b,d,g.width,g.height,0,d,m,g.data);else if(y.length>0&&f){for(var b=0,T=y.length;b<T;b++)g=y[b],i.texImage2D(t.TEXTURE_2D,b,d,d,m,g);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,d,d,m,u);n.generateMipmaps&&f&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function T(e,r,s,a){var l=o(r.texture.format),h=o(r.texture.type);i.texImage2D(a,0,l,r.width,r.height,0,l,h,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,s,a,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function x(e,i){var r=i&&i.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var o=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Os)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==Ns)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}function S(e){var i=n.get(e),r=e.isWebGLRenderTargetCube===!0;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");x(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=t.createRenderbuffer(),E(i.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),E(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function w(e){var r=n.get(e),o=n.get(e.texture);e.addEventListener("dispose",f),o.__webglTexture=t.createTexture(),M.textures++;var s=e.isWebGLRenderTargetCube===!0,a=l(e);if(s){r.__webglFramebuffer=[];for(var h=0;h<6;h++)r.__webglFramebuffer[h]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(s){i.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,a);for(var h=0;h<6;h++)T(r.__webglFramebuffer[h],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+h);e.texture.generateMipmaps&&a&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,o.__webglTexture),_(t.TEXTURE_2D,e.texture,a),T(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&a&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function A(e){var r=e.texture;if(r.generateMipmaps&&l(e)&&r.minFilter!==ls&&r.minFilter!==us){var o=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=n.get(r).__webglTexture;i.bindTexture(o,s),t.generateMipmap(o),i.bindTexture(o,null)}}var M=s.memory,P="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=y,this.setTextureCubeDynamic=v,this.setupRenderTarget=w,this.updateRenderTargetMipmap=A}function ne(){var t={};return{get:function(e){var i=e.uuid,n=t[i];return void 0===n&&(n={},t[i]=n),n},"delete":function(e){delete t[e.uuid]},clear:function(){t={}}}}function re(t,e,i){function n(){var e=!1,i=new r,n=null,o=new r;return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,r,s,a){a===!0&&(e*=s,n*=s,r*=s),i.set(e,n,r,s),o.equals(i)===!1&&(t.clearColor(e,n,r,s),o.copy(i))},reset:function(){e=!1,n=null,o.set(0,0,0,1)}}}function o(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?f(t.DEPTH_TEST):d(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case Do:t.depthFunc(t.NEVER);break;case ko:t.depthFunc(t.ALWAYS);break;case Bo:t.depthFunc(t.LESS);break;case Go:t.depthFunc(t.LEQUAL);break;case Fo:t.depthFunc(t.EQUAL);break;case Vo:t.depthFunc(t.GEQUAL);break;case Uo:t.depthFunc(t.GREATER);break;case Ho:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function s(){var e=!1,i=null,n=null,r=null,o=null,s=null,a=null,l=null,h=null;return{setTest:function(e){e?f(t.STENCIL_TEST):d(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,s){n===e&&r===i&&o===s||(t.stencilFunc(e,i,s),n=e,r=i,o=s)},setOp:function(e,i,n){s===e&&a===i&&l===n||(t.stencilOp(e,i,n),s=e,a=i,l=n)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,i=null,n=null,r=null,o=null,s=null,a=null,l=null,h=null}}}function a(e,i,n){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var s=0;s<n;s++)t.texImage2D(i+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}function l(){G.setClear(0,0,0,1),F.setClear(1),V.setClear(0),f(t.DEPTH_TEST),b(Go),w(!1),A(Kr),f(t.CULL_FACE),f(t.BLEND),g(fo)}function h(){for(var t=0,e=H.length;t<e;t++)H[t]=0}function c(i){if(H[i]=1,0===j[i]&&(t.enableVertexAttribArray(i),j[i]=1),0!==z[i]){var n=e.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(i,0),z[i]=0}}function u(e,i,n){H[e]=1,0===j[e]&&(t.enableVertexAttribArray(e),j[e]=1),z[e]!==i&&(n.vertexAttribDivisorANGLE(e,i),z[e]=i)}function p(){for(var e=0,i=j.length;e!==i;++e)j[e]!==H[e]&&(t.disableVertexAttribArray(e),j[e]=0)}function f(e){W[e]!==!0&&(t.enable(e),W[e]=!0)}function d(e){W[e]!==!1&&(t.disable(e),W[e]=!1)}function m(){if(null===X&&(X=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)X.push(i[n]);return X}function g(e,n,r,o,s,a,l,h){e!==po?f(t.BLEND):d(t.BLEND),e===Y&&h===tt||(e===mo?h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===go?h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===yo?h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),Y=e,tt=h),e===vo?(s=s||n,a=a||r,l=l||o,n===q&&s===$||(t.blendEquationSeparate(i(n),i(s)),q=n,$=s),r===Z&&o===K&&a===Q&&l===J||(t.blendFuncSeparate(i(r),i(o),i(a),i(l)),Z=r,K=o,Q=a,J=l)):(q=null,Z=null,K=null,$=null,Q=null,J=null)}function y(t){G.setMask(t)}function v(t){F.setTest(t)}function _(t){F.setMask(t)}function b(t){F.setFunc(t)}function T(t){V.setTest(t)}function E(t){V.setMask(t)}function x(t,e,i){V.setFunc(t,e,i)}function S(t,e,i){V.setOp(t,e,i)}function w(e){et!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),et=e)}function A(e){e!==Zr?(f(t.CULL_FACE),e!==it&&(e===Kr?t.cullFace(t.BACK):e===$r?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):d(t.CULL_FACE),it=e}function M(e){e!==nt&&(ht&&t.lineWidth(e),nt=e)}function P(e,i,n){e?(f(t.POLYGON_OFFSET_FILL),rt===i&&ot===n||(t.polygonOffset(i,n),rt=i,ot=n)):d(t.POLYGON_OFFSET_FILL)}function C(){return st}function R(e){st=e,e?f(t.SCISSOR_TEST):d(t.SCISSOR_TEST)}function I(e){void 0===e&&(e=t.TEXTURE0+at-1),ct!==e&&(t.activeTexture(e),ct=e)}function O(e,i){null===ct&&I();var n=ut[ct];void 0===n&&(n={type:void 0,texture:void 0},ut[ct]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||dt[e]),n.type=e,n.texture=i)}function N(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}}function L(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}}function D(e){pt.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),pt.copy(e))}function k(e){ft.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),ft.copy(e))}function B(){for(var e=0;e<j.length;e++)1===j[e]&&(t.disableVertexAttribArray(e),j[e]=0);W={},X=null,ct=null,ut={},Y=null,et=null,it=null,G.reset(),F.reset(),V.reset()}var G=new n,F=new o,V=new s,U=t.getParameter(t.MAX_VERTEX_ATTRIBS),H=new Uint8Array(U),j=new Uint8Array(U),z=new Uint8Array(U),W={},X=null,Y=null,q=null,Z=null,K=null,$=null,Q=null,J=null,tt=!1,et=null,it=null,nt=null,rt=null,ot=null,st=null,at=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),lt=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),ht=parseFloat(lt)>=1,ct=null,ut={},pt=new r,ft=new r,dt={};return dt[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),dt[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:G,depth:F,stencil:V},init:l,initAttributes:h,enableAttribute:c,enableAttributeAndDivisor:u,disableUnusedAttributes:p,enable:f,disable:d,getCompressedTextureFormats:m,setBlending:g,setColorWrite:y,setDepthTest:v,setDepthWrite:_,setDepthFunc:b,setStencilTest:T,setStencilWrite:E,setStencilFunc:x,setStencilOp:S,setFlipSided:w,setCullFace:A,setLineWidth:M,setPolygonOffset:P,getScissorTest:C,setScissorTest:R,activeTexture:I,bindTexture:O,compressedTexImage2D:N,texImage2D:L,scissor:D,viewport:k,reset:B}}function oe(t,e,i){function n(){if(void 0!==o)return o;var i=e.get("EXT_texture_filter_anisotropic");return o=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==i.precision?i.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var l=i.logarithmicDepthBuffer===!0&&!!e.get("EXT_frag_depth"),h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),f=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=c>0,v=!!e.get("OES_texture_float"),_=y&&v;return{getMaxAnisotropy:n,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:h,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:_}}function se(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}}}function ae(){function t(){h.value!==n&&(h.value=n,h.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var o=null!==t?t.length:0,s=null;if(0!==o){if(s=h.value,r!==!0||null===s){var c=n+4*o,u=e.matrixWorldInverse;l.getNormalMatrix(u),(null===s||s.length<c)&&(s=new Float32Array(c));for(var p=0,f=n;p!==o;++p,f+=4)a.copy(t[p]).applyMatrix4(u,l),a.normal.toArray(s,f),s[f+3]=a.constant}h.value=s,h.needsUpdate=!0}return i.numPlanes=o,s}var i=this,n=null,r=0,o=!1,s=!1,a=new it,l=new et,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,s){var a=0!==t.length||i||0!==r||o;return o=i,n=e(t,s,0),r=t.length,a},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(i,a,l,c,u,p){if(!o||null===i||0===i.length||s&&!l)s?e(null):t();else{var f=s?0:r,d=4*f,m=u.clippingState||null;h.value=m,m=e(i,c,d,p);for(var g=0;g!==d;++g)m[g]=n[g];u.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function le(t){function e(){return null===ft?At:1}function i(){he.init(),he.scissor(vt.copy(Ct).multiplyScalar(At)),he.viewport(bt.copy(Nt).multiplyScalar(At)),he.buffers.color.setClear(Et.r,Et.g,Et.b,xt,K)}function n(){ut=null,yt=null,gt="",mt=-1,he.reset()}function o(t){t.preventDefault(),n(),i(),ce.clear()}function s(t){var e=t.target;e.removeEventListener("dispose",s),a(e)}function a(t){c(t),ce["delete"](t)}function c(t){var e=ce.get(t).program;t.program=void 0,void 0!==e&&fe.releaseProgram(e)}function u(t,e,i,n){var r;if(i&&i.isInstancedBufferGeometry&&(r=te.get("ANGLE_instanced_arrays"),null===r))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),he.initAttributes();var o=i.attributes,s=e.getAttributes(),a=t.defaultAttributeValues;for(var l in s){var h=s[l];if(h>=0){var c=o[l];if(void 0!==c){var u=c.normalized,p=c.itemSize,f=pe.getAttributeProperties(c),d=f.__webglBuffer,m=f.type,g=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var y=c.data,v=y.stride,_=c.offset;y&&y.isInstancedInterleavedBuffer?(he.enableAttributeAndDivisor(h,y.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=y.meshPerAttribute*y.count)):he.enableAttribute(h),Kt.bindBuffer(Kt.ARRAY_BUFFER,d),Kt.vertexAttribPointer(h,p,m,u,v*g,(n*v+_)*g)}else c.isInstancedBufferAttribute?(he.enableAttributeAndDivisor(h,c.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=c.meshPerAttribute*c.count)):he.enableAttribute(h),Kt.bindBuffer(Kt.ARRAY_BUFFER,d),Kt.vertexAttribPointer(h,p,m,u,0,n*p*g)}else if(void 0!==a){var b=a[l];if(void 0!==b)switch(b.length){case 2:Kt.vertexAttrib2fv(h,b);break;case 3:Kt.vertexAttrib3fv(h,b);break;case 4:Kt.vertexAttrib4fv(h,b);break;default:Kt.vertexAttrib1fv(h,b)}}}}he.disableUnusedAttributes()}function p(t,e){return Math.abs(e[0])-Math.abs(t[0])}function f(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function d(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function m(t,e,i,n,r){var o,s;i.transparent?(o=ot,s=++st):(o=et,s=++it);var a=o[s];void 0!==a?(a.id=t.id,a.object=t,a.geometry=e,a.material=i,a.z=Wt.z,a.group=r):(a={id:t.id,object:t,geometry:e,material:i,z:Wt.z,group:r},o.push(a))}function g(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),jt.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),v(jt)}function y(t){return jt.center.set(0,0,0),jt.radius=.7071067811865476,jt.applyMatrix4(t.matrixWorld),v(jt)}function v(t){if(!Ft.intersectsSphere(t))return!1;var e=Vt.numPlanes;if(0===e)return!0;var i=ct.clippingPlanes,n=t.center,r=-t.radius,o=0;do if(i[o].distanceToPoint(n)<r)return!1;while(++o!==e);return!0}function _(t,e){if(t.visible!==!1){var i=0!==(t.layers.mask&e.layers.mask);if(i)if(t.isLight)J.push(t);else if(t.isSprite)t.frustumCulled!==!1&&y(t)!==!0||lt.push(t);else if(t.isLensFlare)ht.push(t);else if(t.isImmediateRenderObject)ct.sortObjects===!0&&(Wt.setFromMatrixPosition(t.matrixWorld),Wt.applyMatrix4(zt)),m(t,null,t.material,Wt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||g(t)===!0)){var n=t.material;if(n.visible===!0){ct.sortObjects===!0&&(Wt.setFromMatrixPosition(t.matrixWorld),Wt.applyMatrix4(zt));var r=pe.update(t);if(n.isMultiMaterial)for(var o=r.groups,s=n.materials,a=0,l=o.length;a<l;a++){var h=o[a],c=s[h.materialIndex];c.visible===!0&&m(t,r,c,Wt.z,h)}else m(t,r,n,Wt.z,null)}}for(var u=t.children,a=0,l=u.length;a<l;a++)_(u[a],e)}}function b(t,e,i,n){for(var r=0,o=t.length;r<o;r++){var s=t[r],a=s.object,l=s.geometry,h=void 0===n?s.material:n,c=s.group;if(a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),a.onBeforeRender(ct,e,i,l,h,c),a.isImmediateRenderObject){E(h);var u=x(i,e.fog,h,a);gt="",a.render(function(t){ct.renderBufferImmediate(t,u,h)})}else ct.renderBufferDirect(i,e.fog,l,h,a,c);a.onAfterRender(ct,e,i,l,h,c)}}function T(t,e,i){var n=ce.get(t),r=fe.getParameters(t,qt,e,Vt.numPlanes,Vt.numIntersection,i),o=fe.getProgramCode(t,r),a=n.program,l=!0;if(void 0===a)t.addEventListener("dispose",s);else if(a.code!==o)c(t);else{if(void 0!==r.shaderID)return;l=!1}if(l){if(r.shaderID){var h=Eh[r.shaderID];n.__webglShader={name:t.type,uniforms:va.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,a=fe.acquireProgram(t,r,o),n.program=a,t.program=a}var u=a.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<ct.maxMorphTargets;p++)u["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<ct.maxMorphNormals;p++)u["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var f=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&t.clipping!==!0||(n.numClippingPlanes=Vt.numPlanes,n.numIntersection=Vt.numIntersection,f.clippingPlanes=Vt.uniform),n.fog=e,n.lightsHash=qt.hash,t.lights&&(f.ambientLightColor.value=qt.ambient,f.directionalLights.value=qt.directional,f.spotLights.value=qt.spot,f.rectAreaLights.value=qt.rectArea,f.pointLights.value=qt.point,f.hemisphereLights.value=qt.hemi,f.directionalShadowMap.value=qt.directionalShadowMap,f.directionalShadowMatrix.value=qt.directionalShadowMatrix,f.spotShadowMap.value=qt.spotShadowMap,f.spotShadowMatrix.value=qt.spotShadowMatrix,f.pointShadowMap.value=qt.pointShadowMap,f.pointShadowMatrix.value=qt.pointShadowMatrix);var d=n.program.getUniforms(),m=z.seqWithValue(d.seq,f);n.uniformsList=m}function E(t){t.side===so?he.disable(Kt.CULL_FACE):he.enable(Kt.CULL_FACE),
he.setFlipSided(t.side===oo),t.transparent===!0?he.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):he.setBlending(po),he.setDepthFunc(t.depthFunc),he.setDepthTest(t.depthTest),he.setDepthWrite(t.depthWrite),he.setColorWrite(t.colorWrite),he.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function x(t,e,i,n){Tt=0;var r=ce.get(i);if(Ut&&(Ht||t!==yt)){var o=t===yt&&i.id===mt;Vt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,o)}i.needsUpdate===!1&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==qt.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Vt.numPlanes&&r.numIntersection===Vt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(T(i,e,n),i.needsUpdate=!1);var s=!1,a=!1,l=!1,h=r.program,c=h.getUniforms(),u=r.__webglShader.uniforms;if(h.id!==ut&&(Kt.useProgram(h.program),ut=h.id,s=!0,a=!0,l=!0),i.id!==mt&&(mt=i.id,a=!0),s||t!==yt){if(c.set(Kt,t,"projectionMatrix"),le.logarithmicDepthBuffer&&c.setValue(Kt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==yt&&(yt=t,a=!0,l=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var p=c.map.cameraPosition;void 0!==p&&p.setValue(Kt,Wt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(Kt,"viewMatrix",t.matrixWorldInverse),c.set(Kt,ct,"toneMappingExposure"),c.set(Kt,ct,"toneMappingWhitePoint")}if(i.skinning){c.setOptional(Kt,n,"bindMatrix"),c.setOptional(Kt,n,"bindMatrixInverse");var f=n.skeleton;f&&(le.floatVertexTextures&&f.useVertexTexture?(c.set(Kt,f,"boneTexture"),c.set(Kt,f,"boneTextureWidth"),c.set(Kt,f,"boneTextureHeight")):c.setOptional(Kt,f,"boneMatrices"))}return a&&(i.lights&&D(u,l),e&&i.fog&&P(u,e),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&S(u,i),i.isLineBasicMaterial?w(u,i):i.isLineDashedMaterial?(w(u,i),A(u,i)):i.isPointsMaterial?M(u,i):i.isMeshLambertMaterial?C(u,i):i.isMeshToonMaterial?I(u,i):i.isMeshPhongMaterial?R(u,i):i.isMeshPhysicalMaterial?N(u,i):i.isMeshStandardMaterial?O(u,i):i.isMeshDepthMaterial?i.displacementMap&&(u.displacementMap.value=i.displacementMap,u.displacementScale.value=i.displacementScale,u.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&L(u,i),void 0!==u.ltcMat&&(u.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),z.upload(Kt,r.uniformsList,u,ct)),c.set(Kt,n,"modelViewMatrix"),c.set(Kt,n,"normalMatrix"),c.setValue(Kt,"modelMatrix",n.matrixWorld),h}function S(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function w(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function A(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function M(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*At,t.scale.value=.5*wt,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function P(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function C(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function R(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function I(t,e){R(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function O(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function N(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,O(t,e)}function L(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function D(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function k(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r.castShadow&&(qt.shadows[e++]=r)}qt.shadows.length=e}function B(t,e){var i,n,r,o,s,a,l,c=0,u=0,p=0,f=e.matrixWorldInverse,d=0,m=0,g=0,y=0,v=0;for(i=0,n=t.length;i<n;i++)if(r=t[i],o=r.color,s=r.intensity,a=r.distance,l=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)c+=o.r*s,u+=o.g*s,p+=o.b*s;else if(r.isDirectionalLight){var _=de.get(r);_.color.copy(r.color).multiplyScalar(r.intensity),_.direction.setFromMatrixPosition(r.matrixWorld),Wt.setFromMatrixPosition(r.target.matrixWorld),_.direction.sub(Wt),_.direction.transformDirection(f),_.shadow=r.castShadow,r.castShadow&&(_.shadowBias=r.shadow.bias,_.shadowRadius=r.shadow.radius,_.shadowMapSize=r.shadow.mapSize),qt.directionalShadowMap[d]=l,qt.directionalShadowMatrix[d]=r.shadow.matrix,qt.directional[d++]=_}else if(r.isSpotLight){var _=de.get(r);_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(f),_.color.copy(o).multiplyScalar(s),_.distance=a,_.direction.setFromMatrixPosition(r.matrixWorld),Wt.setFromMatrixPosition(r.target.matrixWorld),_.direction.sub(Wt),_.direction.transformDirection(f),_.coneCos=Math.cos(r.angle),_.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),_.decay=0===r.distance?0:r.decay,_.shadow=r.castShadow,r.castShadow&&(_.shadowBias=r.shadow.bias,_.shadowRadius=r.shadow.radius,_.shadowMapSize=r.shadow.mapSize),qt.spotShadowMap[g]=l,qt.spotShadowMatrix[g]=r.shadow.matrix,qt.spot[g++]=_}else if(r.isRectAreaLight){var _=de.get(r);_.color.copy(o).multiplyScalar(s/(r.width*r.height)),_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(f),Yt.identity(),Xt.copy(r.matrixWorld),Xt.premultiply(f),Yt.extractRotation(Xt),_.halfWidth.set(.5*r.width,0,0),_.halfHeight.set(0,.5*r.height,0),_.halfWidth.applyMatrix4(Yt),_.halfHeight.applyMatrix4(Yt),qt.rectArea[y++]=_}else if(r.isPointLight){var _=de.get(r);_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(f),_.color.copy(r.color).multiplyScalar(r.intensity),_.distance=r.distance,_.decay=0===r.distance?0:r.decay,_.shadow=r.castShadow,r.castShadow&&(_.shadowBias=r.shadow.bias,_.shadowRadius=r.shadow.radius,_.shadowMapSize=r.shadow.mapSize),qt.pointShadowMap[m]=l,void 0===qt.pointShadowMatrix[m]&&(qt.pointShadowMatrix[m]=new h),Wt.setFromMatrixPosition(r.matrixWorld).negate(),qt.pointShadowMatrix[m].identity().setPosition(Wt),qt.point[m++]=_}else if(r.isHemisphereLight){var _=de.get(r);_.direction.setFromMatrixPosition(r.matrixWorld),_.direction.transformDirection(f),_.direction.normalize(),_.skyColor.copy(r.color).multiplyScalar(s),_.groundColor.copy(r.groundColor).multiplyScalar(s),qt.hemi[v++]=_}qt.ambient[0]=c,qt.ambient[1]=u,qt.ambient[2]=p,qt.directional.length=d,qt.spot.length=g,qt.rectArea.length=y,qt.point.length=m,qt.hemi.length=v,qt.hash=d+","+m+","+g+","+y+","+v+","+qt.shadows.length}function G(){var t=Tt;return t>=le.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+le.maxTextures),Tt+=1,t}function F(t){var e;if(t===os)return Kt.REPEAT;if(t===ss)return Kt.CLAMP_TO_EDGE;if(t===as)return Kt.MIRRORED_REPEAT;if(t===ls)return Kt.NEAREST;if(t===hs)return Kt.NEAREST_MIPMAP_NEAREST;if(t===cs)return Kt.NEAREST_MIPMAP_LINEAR;if(t===us)return Kt.LINEAR;if(t===ps)return Kt.LINEAR_MIPMAP_NEAREST;if(t===fs)return Kt.LINEAR_MIPMAP_LINEAR;if(t===ds)return Kt.UNSIGNED_BYTE;if(t===Es)return Kt.UNSIGNED_SHORT_4_4_4_4;if(t===xs)return Kt.UNSIGNED_SHORT_5_5_5_1;if(t===Ss)return Kt.UNSIGNED_SHORT_5_6_5;if(t===ms)return Kt.BYTE;if(t===gs)return Kt.SHORT;if(t===ys)return Kt.UNSIGNED_SHORT;if(t===vs)return Kt.INT;if(t===_s)return Kt.UNSIGNED_INT;if(t===bs)return Kt.FLOAT;if(t===Ts&&(e=te.get("OES_texture_half_float"),null!==e))return e.HALF_FLOAT_OES;if(t===As)return Kt.ALPHA;if(t===Ms)return Kt.RGB;if(t===Ps)return Kt.RGBA;if(t===Cs)return Kt.LUMINANCE;if(t===Rs)return Kt.LUMINANCE_ALPHA;if(t===Os)return Kt.DEPTH_COMPONENT;if(t===Ns)return Kt.DEPTH_STENCIL;if(t===_o)return Kt.FUNC_ADD;if(t===bo)return Kt.FUNC_SUBTRACT;if(t===To)return Kt.FUNC_REVERSE_SUBTRACT;if(t===So)return Kt.ZERO;if(t===wo)return Kt.ONE;if(t===Ao)return Kt.SRC_COLOR;if(t===Mo)return Kt.ONE_MINUS_SRC_COLOR;if(t===Po)return Kt.SRC_ALPHA;if(t===Co)return Kt.ONE_MINUS_SRC_ALPHA;if(t===Ro)return Kt.DST_ALPHA;if(t===Io)return Kt.ONE_MINUS_DST_ALPHA;if(t===Oo)return Kt.DST_COLOR;if(t===No)return Kt.ONE_MINUS_DST_COLOR;if(t===Lo)return Kt.SRC_ALPHA_SATURATE;if((t===Ls||t===Ds||t===ks||t===Bs)&&(e=te.get("WEBGL_compressed_texture_s3tc"),null!==e)){if(t===Ls)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ds)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===ks)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Bs)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Gs||t===Fs||t===Vs||t===Us)&&(e=te.get("WEBGL_compressed_texture_pvrtc"),null!==e)){if(t===Gs)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Fs)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Vs)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Us)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Hs&&(e=te.get("WEBGL_compressed_texture_etc1"),null!==e))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===Eo||t===xo)&&(e=te.get("EXT_blend_minmax"),null!==e)){if(t===Eo)return e.MIN_EXT;if(t===xo)return e.MAX_EXT}return t===ws&&(e=te.get("WEBGL_depth_texture"),null!==e)?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",Yr),t=t||{};var V=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),U=void 0!==t.context?t.context:null,H=void 0!==t.alpha&&t.alpha,j=void 0===t.depth||t.depth,X=void 0===t.stencil||t.stencil,Y=void 0!==t.antialias&&t.antialias,K=void 0===t.premultipliedAlpha||t.premultipliedAlpha,Q=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,J=[],et=[],it=-1,ot=[],st=-1,at=new Float32Array(8),lt=[],ht=[];this.domElement=V,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Yo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ct=this,ut=null,ft=null,dt=null,mt=-1,gt="",yt=null,vt=new r,_t=null,bt=new r,Tt=0,Et=new W(0),xt=0,St=V.width,wt=V.height,At=1,Ct=new r(0,0,St,wt),It=!1,Nt=new r(0,0,St,wt),Ft=new nt,Vt=new ae,Ut=!1,Ht=!1,jt=new tt,zt=new h,Wt=new l,Xt=new h,Yt=new h,qt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Zt={calls:0,vertices:0,faces:0,points:0};this.info={render:Zt,memory:{geometries:0,textures:0},programs:null};var Kt;try{var $t={alpha:H,depth:j,stencil:X,antialias:Y,premultipliedAlpha:K,preserveDrawingBuffer:Q};if(Kt=U||V.getContext("webgl",$t)||V.getContext("experimental-webgl",$t),null===Kt)throw null!==V.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Kt.getShaderPrecisionFormat&&(Kt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),V.addEventListener("webglcontextlost",o,!1)}catch(Qt){console.error("THREE.WebGLRenderer: "+Qt)}var te=new se(Kt);te.get("WEBGL_depth_texture"),te.get("OES_texture_float"),te.get("OES_texture_float_linear"),te.get("OES_texture_half_float"),te.get("OES_texture_half_float_linear"),te.get("OES_standard_derivatives"),te.get("ANGLE_instanced_arrays"),te.get("OES_element_index_uint")&&(Mt.MaxIndex=4294967296);var le=new oe(Kt,te,t),he=new re(Kt,te,F),ce=new ne,ue=new ie(Kt,te,he,ce,le,F,this.info),pe=new ee(Kt,ce,this.info),fe=new Jt(this,le),de=new Gt;this.info.programs=fe.programs;var me,ge,ye,ve,_e=new Bt(Kt,te,Zt),be=new kt(Kt,te,Zt);i(),this.context=Kt,this.capabilities=le,this.extensions=te,this.properties=ce,this.state=he;var Te=new rt(this,qt,pe,le);this.shadowMap=Te;var Ee=new Z(this,lt),xe=new q(this,ht);this.getContext=function(){return Kt},this.getContextAttributes=function(){return Kt.getContextAttributes()},this.forceContextLoss=function(){te.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return le.getMaxAnisotropy()},this.getPrecision=function(){return le.precision},this.getPixelRatio=function(){return At},this.setPixelRatio=function(t){void 0!==t&&(At=t,this.setSize(Nt.z,Nt.w,!1))},this.getSize=function(){return{width:St,height:wt}},this.setSize=function(t,e,i){St=t,wt=e,V.width=t*At,V.height=e*At,i!==!1&&(V.style.width=t+"px",V.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){he.viewport(Nt.set(t,e,i,n))},this.setScissor=function(t,e,i,n){he.scissor(Ct.set(t,e,i,n))},this.setScissorTest=function(t){he.setScissorTest(It=t)},this.getClearColor=function(){return Et},this.setClearColor=function(t,e){Et.set(t),xt=void 0!==e?e:1,he.buffers.color.setClear(Et.r,Et.g,Et.b,xt,K)},this.getClearAlpha=function(){return xt},this.setClearAlpha=function(t){xt=t,he.buffers.color.setClear(Et.r,Et.g,Et.b,xt,K)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=Kt.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=Kt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=Kt.STENCIL_BUFFER_BIT),Kt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=n,this.dispose=function(){ot=[],st=-1,et=[],it=-1,V.removeEventListener("webglcontextlost",o,!1)},this.renderBufferImmediate=function(t,e,i){he.initAttributes();var n=ce.get(t);t.hasPositions&&!n.position&&(n.position=Kt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Kt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Kt.createBuffer()),t.hasColors&&!n.color&&(n.color=Kt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(Kt.bindBuffer(Kt.ARRAY_BUFFER,n.position),Kt.bufferData(Kt.ARRAY_BUFFER,t.positionArray,Kt.DYNAMIC_DRAW),he.enableAttribute(r.position),Kt.vertexAttribPointer(r.position,3,Kt.FLOAT,!1,0,0)),t.hasNormals){if(Kt.bindBuffer(Kt.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===ao)for(var o=0,s=3*t.count;o<s;o+=9){var a=t.normalArray,l=(a[o+0]+a[o+3]+a[o+6])/3,h=(a[o+1]+a[o+4]+a[o+7])/3,c=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=l,a[o+1]=h,a[o+2]=c,a[o+3]=l,a[o+4]=h,a[o+5]=c,a[o+6]=l,a[o+7]=h,a[o+8]=c}Kt.bufferData(Kt.ARRAY_BUFFER,t.normalArray,Kt.DYNAMIC_DRAW),he.enableAttribute(r.normal),Kt.vertexAttribPointer(r.normal,3,Kt.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(Kt.bindBuffer(Kt.ARRAY_BUFFER,n.uv),Kt.bufferData(Kt.ARRAY_BUFFER,t.uvArray,Kt.DYNAMIC_DRAW),he.enableAttribute(r.uv),Kt.vertexAttribPointer(r.uv,2,Kt.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==ho&&(Kt.bindBuffer(Kt.ARRAY_BUFFER,n.color),Kt.bufferData(Kt.ARRAY_BUFFER,t.colorArray,Kt.DYNAMIC_DRAW),he.enableAttribute(r.color),Kt.vertexAttribPointer(r.color,3,Kt.FLOAT,!1,0,0)),he.disableUnusedAttributes(),Kt.drawArrays(Kt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,o,s){E(r);var a=x(t,i,r,o),l=!1,h=n.id+"_"+a.id+"_"+r.wireframe;h!==gt&&(gt=h,l=!0);var c=o.morphTargetInfluences;if(void 0!==c){for(var f=[],d=0,m=c.length;d<m;d++){var g=c[d];f.push([g,d])}f.sort(p),f.length>8&&(f.length=8);for(var y=n.morphAttributes,d=0,m=f.length;d<m;d++){var g=f[d];if(at[d]=g[0],0!==g[0]){var v=g[1];r.morphTargets===!0&&y.position&&n.addAttribute("morphTarget"+d,y.position[v]),r.morphNormals===!0&&y.normal&&n.addAttribute("morphNormal"+d,y.normal[v])}else r.morphTargets===!0&&n.removeAttribute("morphTarget"+d),r.morphNormals===!0&&n.removeAttribute("morphNormal"+d)}for(var d=f.length,_=at.length;d<_;d++)at[d]=0;a.getUniforms().setValue(Kt,"morphTargetInfluences",at),l=!0}var v=n.index,b=n.attributes.position,T=1;r.wireframe===!0&&(v=pe.getWireframeAttribute(n),T=2);var S;null!==v?(S=be,S.setIndex(v)):S=_e,l&&(u(r,a,n),null!==v&&Kt.bindBuffer(Kt.ELEMENT_ARRAY_BUFFER,pe.getAttributeBuffer(v)));var w=0;null!==v?w=v.count:void 0!==b&&(w=b.count);var A=n.drawRange.start*T,M=n.drawRange.count*T,P=null!==s?s.start*T:0,C=null!==s?s.count*T:1/0,R=Math.max(A,P),I=Math.min(w,A+M,P+C)-1,O=Math.max(0,I-R+1);if(0!==O){if(o.isMesh)if(r.wireframe===!0)he.setLineWidth(r.wireframeLinewidth*e()),S.setMode(Kt.LINES);else switch(o.drawMode){case Qs:S.setMode(Kt.TRIANGLES);break;case Js:S.setMode(Kt.TRIANGLE_STRIP);break;case ta:S.setMode(Kt.TRIANGLE_FAN)}else if(o.isLine){var N=r.linewidth;void 0===N&&(N=1),he.setLineWidth(N*e()),o.isLineSegments?S.setMode(Kt.LINES):S.setMode(Kt.LINE_STRIP)}else o.isPoints&&S.setMode(Kt.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&S.renderInstances(n,R,O):S.render(R,O)}},this.render=function(t,e,i,n){if(void 0!==e&&e.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");gt="",mt=-1,yt=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),zt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Ft.setFromMatrix(zt),J.length=0,it=-1,st=-1,lt.length=0,ht.length=0,Ht=this.localClippingEnabled,Ut=Vt.init(this.clippingPlanes,Ht,e),_(t,e),et.length=it+1,ot.length=st+1,ct.sortObjects===!0&&(et.sort(f),ot.sort(d)),Ut&&Vt.beginShadows(),k(J),Te.render(t,e),B(J,e),Ut&&Vt.endShadows(),Zt.calls=0,Zt.vertices=0,Zt.faces=0,Zt.points=0,void 0===i&&(i=null),this.setRenderTarget(i);var r=t.background;if(null===r?he.buffers.color.setClear(Et.r,Et.g,Et.b,xt,K):r&&r.isColor&&(he.buffers.color.setClear(r.r,r.g,r.b,1,K),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r&&r.isCubeTexture?(void 0===ye&&(ye=new Lt,ve=new Pt(new Rt(5,5,5),new $({uniforms:Eh.cube.uniforms,vertexShader:Eh.cube.vertexShader,fragmentShader:Eh.cube.fragmentShader,side:oo,depthTest:!1,depthWrite:!1,fog:!1}))),ye.projectionMatrix.copy(e.projectionMatrix),ye.matrixWorld.extractRotation(e.matrixWorld),ye.matrixWorldInverse.getInverse(ye.matrixWorld),ve.material.uniforms.tCube.value=r,ve.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,ve.matrixWorld),pe.update(ve),ct.renderBufferDirect(ye,null,ve.geometry,ve.material,ve,null)):r&&r.isTexture&&(void 0===me&&(me=new Dt((-1),1,1,(-1),0,1),ge=new Pt(new Ot(2,2),new pt({depthTest:!1,depthWrite:!1,fog:!1}))),ge.material.map=r,pe.update(ge),ct.renderBufferDirect(me,null,ge.geometry,ge.material,ge,null)),t.overrideMaterial){var o=t.overrideMaterial;b(et,t,e,o),b(ot,t,e,o)}else he.setBlending(po),b(et,t,e),b(ot,t,e);Ee.render(t,e),xe.render(t,e,bt),i&&ue.updateRenderTargetMipmap(i),he.setDepthTest(!0),he.setDepthWrite(!0),he.setColorWrite(!0)},this.setFaceCulling=function(t,e){he.setCullFace(t),he.setFlipSided(e===Jr)},this.allocTextureUnit=G,this.setTexture2D=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),ue.setTexture2D(e,i)}}(),this.setTexture=function(){var t=!1;return function(e,i){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),ue.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?ue.setTextureCube(e,i):ue.setTextureCubeDynamic(e,i)}}(),this.getCurrentRenderTarget=function(){return ft},this.setRenderTarget=function(t){ft=t,t&&void 0===ce.get(t).__webglFramebuffer&&ue.setupRenderTarget(t);var e,i=t&&t.isWebGLRenderTargetCube;if(t){var n=ce.get(t);e=i?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,vt.copy(t.scissor),_t=t.scissorTest,bt.copy(t.viewport)}else e=null,vt.copy(Ct).multiplyScalar(At),_t=It,bt.copy(Nt).multiplyScalar(At);if(dt!==e&&(Kt.bindFramebuffer(Kt.FRAMEBUFFER,e),dt=e),he.scissor(vt),he.setScissorTest(_t),he.viewport(bt),i){var r=ce.get(t.texture);Kt.framebufferTexture2D(Kt.FRAMEBUFFER,Kt.COLOR_ATTACHMENT0,Kt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,o){if((t&&t.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=ce.get(t).__webglFramebuffer;if(s){var a=!1;s!==dt&&(Kt.bindFramebuffer(Kt.FRAMEBUFFER,s),a=!0);try{var l=t.texture,h=l.format,c=l.type;if(h!==Ps&&F(h)!==Kt.getParameter(Kt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===ds||F(c)===Kt.getParameter(Kt.IMPLEMENTATION_COLOR_READ_TYPE)||c===bs&&(te.get("OES_texture_float")||te.get("WEBGL_color_buffer_float"))||c===Ts&&te.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Kt.checkFramebufferStatus(Kt.FRAMEBUFFER)===Kt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&Kt.readPixels(e,i,n,r,F(h),F(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&Kt.bindFramebuffer(Kt.FRAMEBUFFER,dt)}}}}function he(t,e){this.name="",this.color=new W(t),this.density=void 0!==e?e:25e-5}function ce(t,e,i){this.name="",this.color=new W(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function ue(){lt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function pe(t,e,i,n,r){lt.call(this),this.lensFlares=[],this.positionScreen=new l,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,n,r)}function fe(t){K.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function de(t){lt.call(this),this.type="Sprite",this.material=void 0!==t?t:new fe}function me(){lt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ge(t,e,i){if(this.useVertexTexture=void 0===i||i,this.identityMatrix=new h,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=ua.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new X(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Ps,bs)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new h)}}function ye(){lt.call(this),this.type="Bone"}function ve(t,e,i){Pt.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new h,this.bindMatrixInverse=new h;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,o,s=0,a=this.geometry.bones.length;s<a;++s)o=this.geometry.bones[s],r=new ye,n.push(r),r.name=o.name,r.position.fromArray(o.pos),r.quaternion.fromArray(o.rotq),void 0!==o.scl&&r.scale.fromArray(o.scl);for(var s=0,a=this.geometry.bones.length;s<a;++s)o=this.geometry.bones[s],o.parent!==-1&&null!==o.parent&&void 0!==n[o.parent]?n[o.parent].add(n[s]):this.add(n[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ge(n,(void 0),i),this.matrixWorld)}function _e(t){K.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function be(t,e,i){return 1===i?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Te(t,e)):(lt.call(this),this.type="Line",this.geometry=void 0!==t?t:new Mt,void(this.material=void 0!==e?e:new _e({color:16777215*Math.random()})))}function Te(t,e){be.call(this,t,e),this.type="LineSegments"}function Ee(t){K.call(this),this.type="PointsMaterial",this.color=new W(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function xe(t,e){lt.call(this),this.type="Points",this.geometry=void 0!==t?t:new Mt,this.material=void 0!==e?e:new Ee({color:16777215*Math.random()})}function Se(){lt.call(this),this.type="Group"}function we(t,e,i,r,o,s,a,l,h){function c(){requestAnimationFrame(c),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}n.call(this,t,e,i,r,o,s,a,l,h),this.generateMipmaps=!1;var u=this;c()}function Ae(t,e,i,r,o,s,a,l,h,c,u,p){n.call(this,null,s,a,l,h,c,r,o,u,p),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Me(t,e,i,r,o,s,a,l,h){n.call(this,t,e,i,r,o,s,a,l,h),this.needsUpdate=!0}function Pe(t,e,i,r,o,s,a,l,h,c){if(c=void 0!==c?c:Os,c!==Os&&c!==Ns)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Os&&(i=ys),void 0===i&&c===Ns&&(i=ws),n.call(this,null,r,o,s,a,l,c,i,h),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ls,this.minFilter=void 0!==l?l:ls,this.flipY=!1,this.generateMipmaps=!1}function Ce(t){function e(t,e){return t-e}Mt.call(this),this.type="WireframeGeometry";var i,n,r,o,s,a,h,c,u=[],p=[0,0],f={},d=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(i=0,r=m.length;i<r;i++){var g=m[i];for(n=0;n<3;n++)p[0]=g[d[n]],p[1]=g[d[(n+1)%3]],p.sort(e),h=p.toString(),void 0===f[h]&&(f[h]={index1:p[0],index2:p[1]})}for(h in f)a=f[h],c=t.vertices[a.index1],u.push(c.x,c.y,c.z),c=t.vertices[a.index2],u.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var y,v,_,b,T,E,x,S;if(c=new l,null!==t.index){for(y=t.attributes.position,v=t.index,_=t.groups,0===_.length&&t.addGroup(0,v.count),o=0,s=_.length;o<s;++o)for(b=_[o],T=b.start,E=b.count,i=T,r=T+E;i<r;i+=3)for(n=0;n<3;n++)p[0]=v.getX(i+n),p[1]=v.getX(i+(n+1)%3),p.sort(e),h=p.toString(),void 0===f[h]&&(f[h]={index1:p[0],index2:p[1]});for(h in f)a=f[h],c.fromBufferAttribute(y,a.index1),u.push(c.x,c.y,c.z),c.fromBufferAttribute(y,a.index2),u.push(c.x,c.y,c.z)}else for(y=t.attributes.position,i=0,r=y.count/3;i<r;i++)for(n=0;n<3;n++)x=3*i+n,c.fromBufferAttribute(y,x),u.push(c.x,c.y,c.z),S=3*i+(n+1)%3,c.fromBufferAttribute(y,S),u.push(c.x,c.y,c.z)}this.addAttribute("position",new Tt(u,3))}function Re(t,e,i){At.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Ie(t,e,i)),this.mergeVertices()}function Ie(t,e,i){Mt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,o=[],s=[],a=[],l=e+1;for(n=0;n<=i;n++){var h=n/i;for(r=0;r<=e;r++){var c=r/e,u=t(c,h);s.push(u.x,u.y,u.z),a.push(c,h)}}for(n=0;n<i;n++)for(r=0;r<e;r++){var p=n*l+r,f=n*l+r+1,d=(n+1)*l+r+1,m=(n+1)*l+r;o.push(p,f,m),o.push(f,d,m)}this.setIndex(o),this.addAttribute("position",new Tt(s,3)),this.addAttribute("uv",new Tt(a,2)),this.computeVertexNormals()}function Oe(t,e,i,n){At.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new Ne(t,e,i,n)),this.mergeVertices()}function Ne(t,e,n,r){function o(t){for(var i=new l,n=new l,r=new l,o=0;o<e.length;o+=3)p(e[o+0],i),p(e[o+1],n),p(e[o+2],r),s(i,n,r,t)}function s(t,e,i,n){var r,o,s=Math.pow(2,n),a=[];for(r=0;r<=s;r++){a[r]=[];var l=t.clone().lerp(i,r/s),h=e.clone().lerp(i,r/s),c=s-r;for(o=0;o<=c;o++)0===o&&r===s?a[r][o]=l:a[r][o]=l.clone().lerp(h,o/c)}for(r=0;r<s;r++)for(o=0;o<2*(s-r)-1;o++){var p=Math.floor(o/2);o%2===0?(u(a[r][p+1]),u(a[r+1][p]),u(a[r][p])):(u(a[r][p+1]),u(a[r+1][p+1]),u(a[r+1][p]))}}function a(t){for(var e=new l,i=0;i<y.length;i+=3)e.x=y[i+0],e.y=y[i+1],e.z=y[i+2],e.normalize().multiplyScalar(t),y[i+0]=e.x,y[i+1]=e.y,y[i+2]=e.z}function h(){for(var t=new l,e=0;e<y.length;e+=3){t.x=y[e+0],t.y=y[e+1],t.z=y[e+2];var i=m(t)/2/Math.PI+.5,n=g(t)/Math.PI+.5;v.push(i,1-n)}f(),c()}function c(){for(var t=0;t<v.length;t+=6){var e=v[t+0],i=v[t+2],n=v[t+4],r=Math.max(e,i,n),o=Math.min(e,i,n);r>.9&&o<.1&&(e<.2&&(v[t+0]+=1),i<.2&&(v[t+2]+=1),n<.2&&(v[t+4]+=1))}}function u(t){y.push(t.x,t.y,t.z)}function p(e,i){var n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function f(){for(var t=new l,e=new l,n=new l,r=new l,o=new i,s=new i,a=new i,h=0,c=0;h<y.length;h+=9,c+=6){t.set(y[h+0],y[h+1],y[h+2]),e.set(y[h+3],y[h+4],y[h+5]),n.set(y[h+6],y[h+7],y[h+8]),o.set(v[c+0],v[c+1]),s.set(v[c+2],v[c+3]),a.set(v[c+4],v[c+5]),r.copy(t).add(e).add(n).divideScalar(3);var u=m(r);d(o,c+0,t,u),d(s,c+2,e,u),d(a,c+4,n,u)}}function d(t,e,i,n){n<0&&1===t.x&&(v[e]=t.x-1),0===i.x&&0===i.z&&(v[e]=n/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function g(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}Mt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;var y=[],v=[];o(r),a(n),h(),this.addAttribute("position",new Tt(y,3)),this.addAttribute("normal",new Tt(y.slice(),3)),this.addAttribute("uv",new Tt(v,2)),this.normalizeNormals()}function Le(t,e){At.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new De(t,e)),this.mergeVertices()}function De(t,e){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];Ne.call(this,i,n,t,e),this.type="TetrahedronBufferGeometry",this.parameters={
radius:t,detail:e}}function ke(t,e){At.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Be(t,e)),this.mergeVertices()}function Be(t,e){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ne.call(this,i,n,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ge(t,e){At.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Fe(t,e)),this.mergeVertices()}function Fe(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ne.call(this,n,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ve(t,e){At.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ue(t,e)),this.mergeVertices()}function Ue(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ne.call(this,r,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function He(t,e,i,n,r,o){At.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new je(t,e,i,n,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function je(t,e,n,r,o){function s(){for(p=0;p<e;p++)a(p);a(o===!1?e:0),c(),h()}function a(i){var o=t.getPointAt(i/e),s=u.normals[i],a=u.binormals[i];for(f=0;f<=r;f++){var l=f/r*Math.PI*2,h=Math.sin(l),c=-Math.cos(l);m.x=c*s.x+h*a.x,m.y=c*s.y+h*a.y,m.z=c*s.z+h*a.z,m.normalize(),v.push(m.x,m.y,m.z),d.x=o.x+n*m.x,d.y=o.y+n*m.y,d.z=o.z+n*m.z,y.push(d.x,d.y,d.z)}}function h(){for(f=1;f<=e;f++)for(p=1;p<=r;p++){var t=(r+1)*(f-1)+(p-1),i=(r+1)*f+(p-1),n=(r+1)*f+p,o=(r+1)*(f-1)+p;b.push(t,i,o),b.push(i,n,o)}}function c(){for(p=0;p<=e;p++)for(f=0;f<=r;f++)g.x=p/e,g.y=f/r,_.push(g.x,g.y)}Mt.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:o},e=e||64,n=n||1,r=r||8,o=o||!1;var u=t.computeFrenetFrames(e,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var p,f,d=new l,m=new l,g=new i,y=[],v=[],_=[],b=[];s(),this.setIndex(b),this.addAttribute("position",new Tt(y,3)),this.addAttribute("normal",new Tt(v,3)),this.addAttribute("uv",new Tt(_,2))}function ze(t,e,i,n,r,o,s){At.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new We(t,e,i,n,r,o)),this.mergeVertices()}function We(t,e,n,r,o,s){function a(t,e,i,n,r){var o=Math.cos(t),s=Math.sin(t),a=i/e*t,l=Math.cos(a);r.x=n*(2+l)*.5*o,r.y=n*(2+l)*s*.5,r.z=n*Math.sin(a)*.5}Mt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:o,q:s},t=t||100,e=e||40,n=Math.floor(n)||64,r=Math.floor(r)||8,o=o||2,s=s||3;var h,c,u=[],p=[],f=[],d=[],m=new l,g=new l,y=(new i,new l),v=new l,_=new l,b=new l,T=new l;for(h=0;h<=n;++h){var E=h/n*o*Math.PI*2;for(a(E,o,s,t,y),a(E+.01,o,s,t,v),b.subVectors(v,y),T.addVectors(v,y),_.crossVectors(b,T),T.crossVectors(_,b),_.normalize(),T.normalize(),c=0;c<=r;++c){var x=c/r*Math.PI*2,S=-e*Math.cos(x),w=e*Math.sin(x);m.x=y.x+(S*T.x+w*_.x),m.y=y.y+(S*T.y+w*_.y),m.z=y.z+(S*T.z+w*_.z),p.push(m.x,m.y,m.z),g.subVectors(m,y).normalize(),f.push(g.x,g.y,g.z),d.push(h/n),d.push(c/r)}}for(c=1;c<=n;c++)for(h=1;h<=r;h++){var A=(r+1)*(c-1)+(h-1),M=(r+1)*c+(h-1),P=(r+1)*c+h,C=(r+1)*(c-1)+h;u.push(A,M,C),u.push(M,P,C)}this.setIndex(u),this.addAttribute("position",new Tt(p,3)),this.addAttribute("normal",new Tt(f,3)),this.addAttribute("uv",new Tt(d,2))}function Xe(t,e,i,n,r){At.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new Ye(t,e,i,n,r))}function Ye(t,e,i,n,r){Mt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||100,e=e||40,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var o,s,a=[],h=[],c=[],u=[],p=new l,f=new l,d=new l;for(o=0;o<=i;o++)for(s=0;s<=n;s++){var m=s/n*r,g=o/i*Math.PI*2;f.x=(t+e*Math.cos(g))*Math.cos(m),f.y=(t+e*Math.cos(g))*Math.sin(m),f.z=e*Math.sin(g),h.push(f.x,f.y,f.z),p.x=t*Math.cos(m),p.y=t*Math.sin(m),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),u.push(s/n),u.push(o/i)}for(o=1;o<=i;o++)for(s=1;s<=n;s++){var y=(n+1)*o+s-1,v=(n+1)*(o-1)+s-1,_=(n+1)*(o-1)+s,b=(n+1)*o+s;a.push(y,v,b),a.push(v,_,b)}this.setIndex(a),this.addAttribute("position",new Tt(h,3)),this.addAttribute("normal",new Tt(c,3)),this.addAttribute("uv",new Tt(u,2))}function qe(t,e){return"undefined"==typeof t?void(t=[]):(At.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())}function Ze(t,e){e=e||{};var i=e.font;if((i&&i.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new At;var n=i.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),qe.call(this,n,e),this.type="TextGeometry"}function Ke(t,e,i,n,r,o,s){At.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new $e(t,e,i,n,r,o,s))}function $e(t,e,i,n,r,o,s){Mt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var a,h,c=o+s,u=0,p=[],f=new l,d=new l,m=[],g=[],y=[],v=[];for(h=0;h<=i;h++){var _=[],b=h/i;for(a=0;a<=e;a++){var T=a/e;f.x=-t*Math.cos(n+T*r)*Math.sin(o+b*s),f.y=t*Math.cos(o+b*s),f.z=t*Math.sin(n+T*r)*Math.sin(o+b*s),g.push(f.x,f.y,f.z),d.set(f.x,f.y,f.z).normalize(),y.push(d.x,d.y,d.z),v.push(T,1-b),_.push(u++)}p.push(_)}for(h=0;h<i;h++)for(a=0;a<e;a++){var E=p[h][a+1],x=p[h][a],S=p[h+1][a],w=p[h+1][a+1];(0!==h||o>0)&&m.push(E,x,w),(h!==i-1||c<Math.PI)&&m.push(x,S,w)}this.setIndex(m),this.addAttribute("position",new Tt(g,3)),this.addAttribute("normal",new Tt(y,3)),this.addAttribute("uv",new Tt(v,2))}function Qe(t,e,i,n,r,o){At.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Je(t,e,i,n,r,o))}function Je(t,e,n,r,o,s){Mt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:s},t=t||20,e=e||50,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var a,h,c,u=[],p=[],f=[],d=[],m=t,g=(e-t)/r,y=new l,v=new i;for(h=0;h<=r;h++){for(c=0;c<=n;c++)a=o+c/n*s,y.x=m*Math.cos(a),y.y=m*Math.sin(a),p.push(y.x,y.y,y.z),f.push(0,0,1),v.x=(y.x/e+1)/2,v.y=(y.y/e+1)/2,d.push(v.x,v.y);m+=g}for(h=0;h<r;h++){var _=h*(n+1);for(c=0;c<n;c++){a=c+_;var b=a,T=a+n+1,E=a+n+2,x=a+1;u.push(b,T,x),u.push(T,E,x)}}this.setIndex(u),this.addAttribute("position",new Tt(p,3)),this.addAttribute("normal",new Tt(f,3)),this.addAttribute("uv",new Tt(d,2))}function ti(t,e,i,n){At.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new ei(t,e,i,n)),this.mergeVertices()}function ei(t,e,n,r){Mt.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=ua.clamp(r,0,2*Math.PI);var o,s,a,h=[],c=[],u=[],p=1/e,f=new l,d=new i;for(s=0;s<=e;s++){var m=n+s*p*r,g=Math.sin(m),y=Math.cos(m);for(a=0;a<=t.length-1;a++)f.x=t[a].x*g,f.y=t[a].y,f.z=t[a].x*y,c.push(f.x,f.y,f.z),d.x=s/e,d.y=a/(t.length-1),u.push(d.x,d.y)}for(s=0;s<e;s++)for(a=0;a<t.length-1;a++){o=a+s*t.length;var v=o,_=o+t.length,b=o+t.length+1,T=o+1;h.push(v,_,T),h.push(_,b,T)}if(this.setIndex(h),this.addAttribute("position",new Tt(c,3)),this.addAttribute("uv",new Tt(u,2)),this.computeVertexNormals(),r===2*Math.PI){var E=this.attributes.normal.array,x=new l,S=new l,w=new l;for(o=e*t.length*3,s=0,a=0;s<t.length;s++,a+=3)x.x=E[a+0],x.y=E[a+1],x.z=E[a+2],S.x=E[o+a+0],S.y=E[o+a+1],S.z=E[o+a+2],w.addVectors(x,S).normalize(),E[a+0]=E[o+a+0]=w.x,E[a+1]=E[o+a+1]=w.y,E[a+2]=E[o+a+2]=w.z}}function ii(t,e){At.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ni(t,e)),this.mergeVertices()}function ni(t,e){function i(t){var i,a,h,c=r.length/3,u=t.extractPoints(e),p=u.shape,f=u.holes;if(Mh.isClockWise(p)===!1)for(p=p.reverse(),i=0,a=f.length;i<a;i++)h=f[i],Mh.isClockWise(h)===!0&&(f[i]=h.reverse());var d=Mh.triangulateShape(p,f);for(i=0,a=f.length;i<a;i++)h=f[i],p=p.concat(h);for(i=0,a=p.length;i<a;i++){var m=p[i];r.push(m.x,m.y,0),o.push(0,0,1),s.push(m.x,m.y)}for(i=0,a=d.length;i<a;i++){var g=d[i],y=g[0]+c,v=g[1]+c,_=g[2]+c;n.push(y,v,_),l+=3}}Mt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(t)===!1)i(t);else for(var h=0;h<t.length;h++)i(t[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(n),this.addAttribute("position",new Tt(r,3)),this.addAttribute("normal",new Tt(o,3)),this.addAttribute("uv",new Tt(s,2))}function ri(t,e){function i(t,e){return t-e}Mt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,o=[],s=Math.cos(ua.DEG2RAD*e),a=[0,0],l={},h=["a","b","c"];t.isBufferGeometry?(r=new At,r.fromBufferGeometry(t)):r=t.clone(),r.mergeVertices(),r.computeFaceNormals();for(var c=r.vertices,u=r.faces,p=0,f=u.length;p<f;p++)for(var d=u[p],m=0;m<3;m++)a[0]=d[h[m]],a[1]=d[h[(m+1)%3]],a.sort(i),n=a.toString(),void 0===l[n]?l[n]={index1:a[0],index2:a[1],face1:p,face2:void 0}:l[n].face2=p;for(n in l){var g=l[n];if(void 0===g.face2||u[g.face1].normal.dot(u[g.face2].normal)<=s){var y=c[g.index1];o.push(y.x,y.y,y.z),y=c[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Tt(o,3))}function oi(t,e,i,n,r,o,s,a){At.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new si(t,e,i,n,r,o,s,a)),this.mergeVertices()}function si(t,e,n,r,o,s,a,h){function c(){var i,s,c=new l,u=new l,T=0,E=(e-t)/n;for(s=0;s<=o;s++){var x=[],S=s/o,w=S*(e-t)+t;for(i=0;i<=r;i++){var A=i/r,M=A*h+a,P=Math.sin(M),C=Math.cos(M);u.x=w*P,u.y=-S*n+_,u.z=w*C,d.push(u.x,u.y,u.z),c.set(P,E,C).normalize(),m.push(c.x,c.y,c.z),g.push(A,1-S),x.push(y++)}v.push(x)}for(i=0;i<r;i++)for(s=0;s<o;s++){var R=v[s][i],I=v[s+1][i],O=v[s+1][i+1],N=v[s][i+1];f.push(R,I,N),f.push(I,O,N),T+=6}p.addGroup(b,T,0),b+=T}function u(n){var o,s,c,u=new i,v=new l,T=0,E=n===!0?t:e,x=n===!0?1:-1;for(s=y,o=1;o<=r;o++)d.push(0,_*x,0),m.push(0,x,0),g.push(.5,.5),y++;for(c=y,o=0;o<=r;o++){var S=o/r,w=S*h+a,A=Math.cos(w),M=Math.sin(w);v.x=E*M,v.y=_*x,v.z=E*A,d.push(v.x,v.y,v.z),m.push(0,x,0),u.x=.5*A+.5,u.y=.5*M*x+.5,g.push(u.x,u.y),y++}for(o=0;o<r;o++){var P=s+o,C=c+o;n===!0?f.push(C,C+1,P):f.push(C+1,C,P),T+=3}p.addGroup(b,T,n===!0?1:2),b+=T}Mt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:h};var p=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,o=Math.floor(o)||1,s=void 0!==s&&s,a=void 0!==a?a:0,h=void 0!==h?h:2*Math.PI;var f=[],d=[],m=[],g=[],y=0,v=[],_=n/2,b=0;c(),s===!1&&(t>0&&u(!0),e>0&&u(!1)),this.setIndex(f),this.addAttribute("position",new Tt(d,3)),this.addAttribute("normal",new Tt(m,3)),this.addAttribute("uv",new Tt(g,2))}function ai(t,e,i,n,r,o,s){oi.call(this,0,t,e,i,n,r,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:s}}function li(t,e,i,n,r,o,s){si.call(this,0,t,e,i,n,r,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:s}}function hi(t,e,i,n){At.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new ci(t,e,i,n))}function ci(t,e,n,r){Mt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,s,a=[],h=[],c=[],u=[],p=new l,f=new i;for(h.push(0,0,0),c.push(0,0,1),u.push(.5,.5),s=0,o=3;s<=e;s++,o+=3){var d=n+s/e*r;p.x=t*Math.cos(d),p.y=t*Math.sin(d),h.push(p.x,p.y,p.z),c.push(0,0,1),f.x=(h[o]/t+1)/2,f.y=(h[o+1]/t+1)/2,u.push(f.x,f.y)}for(o=1;o<=e;o++)a.push(o,o+1,0);this.setIndex(a),this.addAttribute("position",new Tt(h,3)),this.addAttribute("normal",new Tt(c,3)),this.addAttribute("uv",new Tt(u,2))}function ui(){$.call(this,{uniforms:va.merge([Th.lights,{opacity:{value:1}}]),vertexShader:_h.shadow_vert,fragmentShader:_h.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function pi(t){$.call(this,t),this.type="RawShaderMaterial"}function fi(t){this.uuid=ua.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function di(t){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new W(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function mi(t){di.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function gi(t){K.call(this),this.type="MeshPhongMaterial",this.color=new W(16777215),this.specular=new W(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function yi(t){gi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function vi(t){K.call(this,t),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _i(t){K.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bi(t){K.call(this),this.type="LineDashedMaterial",this.color=new W(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function Ti(t,e,i){var n=this,r=!1,o=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,r===!1&&void 0!==n.onStart&&n.onStart(t,o,s),r=!0},this.itemEnd=function(t){o++,void 0!==n.onProgress&&n.onProgress(t,o,s),o===s&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function Ei(t){this.manager=void 0!==t?t:Ih}function xi(t){this.manager=void 0!==t?t:Ih,this._parser=null}function Si(t){this.manager=void 0!==t?t:Ih,this._parser=null}function wi(t){this.manager=void 0!==t?t:Ih}function Ai(t){this.manager=void 0!==t?t:Ih}function Mi(t){this.manager=void 0!==t?t:Ih}function Pi(t,e){lt.call(this),this.type="Light",this.color=new W(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ci(t,e,i){Pi.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(lt.DefaultUp),this.updateMatrix(),this.groundColor=new W(e)}function Ri(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new h}function Ii(){Ri.call(this,new Lt(50,1,.5,500))}function Oi(t,e,i,n,r,o){Pi.call(this,t,e),this.type="SpotLight",this.position.copy(lt.DefaultUp),this.updateMatrix(),this.target=new lt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Ii}function Ni(t,e,i,n){Pi.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Ri(new Lt(90,1,.5,500))}function Li(){Ri.call(this,new Dt((-5),5,5,(-5),.5,500))}function Di(t,e){Pi.call(this,t,e),this.type="DirectionalLight",this.position.copy(lt.DefaultUp),this.updateMatrix(),this.target=new lt,this.shadow=new Li}function ki(t,e){Pi.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Bi(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Gi(t,e,i,n){Bi.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Fi(t,e,i,n){Bi.call(this,t,e,i,n)}function Vi(t,e,i,n){Bi.call(this,t,e,i,n)}function Ui(t,e,i,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Oh.convertArray(e,this.TimeBufferType),this.values=Oh.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Hi(t,e,i,n){Ui.call(this,t,e,i,n)}function ji(t,e,i,n){Bi.call(this,t,e,i,n)}function zi(t,e,i,n){Ui.call(this,t,e,i,n)}function Wi(t,e,i,n){Ui.call(this,t,e,i,n)}function Xi(t,e,i,n){Ui.call(this,t,e,i,n)}function Yi(t,e,i){Ui.call(this,t,e,i)}function qi(t,e,i,n){Ui.call(this,t,e,i,n)}function Zi(t,e,i,n){Ui.apply(this,arguments)}function Ki(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=ua.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function $i(t){this.manager=void 0!==t?t:Ih,this.textures={}}function Qi(t){this.manager=void 0!==t?t:Ih}function Ji(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function tn(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Ih,this.withCredentials=!1}function en(t){this.manager=void 0!==t?t:Ih,this.texturePath=""}function nn(t,e,i,n,r){var o=.5*(n-e),s=.5*(r-i),a=t*t,l=t*a;return(2*i-2*n+o+s)*l+(-3*i+3*n-2*o-s)*a+o*t+i}function rn(t,e){var i=1-t;return i*i*e}function on(t,e){return 2*(1-t)*t*e}function sn(t,e){return t*t*e}function an(t,e,i,n){return rn(t,e)+on(t,i)+sn(t,n)}function ln(t,e){var i=1-t;return i*i*i*e}function hn(t,e){var i=1-t;return 3*i*i*t*e}function cn(t,e){return 3*(1-t)*t*t*e}function un(t,e){return t*t*t*e}function pn(t,e,i,n,r){return ln(t,e)+hn(t,i)+cn(t,n)+un(t,r)}function fn(){}function dn(t,e){this.v1=t,this.v2=e}function mn(){this.curves=[],this.autoClose=!1}function gn(t,e,i,n,r,o,s,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a||0}function yn(t){this.points=void 0===t?[]:t}function vn(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function _n(t,e,i){this.v0=t,this.v1=e,this.v2=i}function bn(t){mn.call(this),this.currentPoint=new i,t&&this.fromPoints(t)}function Tn(){bn.apply(this,arguments),this.holes=[]}function En(){this.subPaths=[],this.currentPath=null}function xn(t){this.data=t}function Sn(t){this.manager=void 0!==t?t:Ih}function wn(t){this.manager=void 0!==t?t:Ih}function An(t,e,i,n){Pi.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Mn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Lt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Lt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Pn(t,e,i){lt.call(this),this.type="CubeCamera";var n=90,r=1,o=new Lt(n,r,t,e);o.up.set(0,-1,0),o.lookAt(new l(1,0,0)),this.add(o);var a=new Lt(n,r,t,e);a.up.set(0,-1,0),a.lookAt(new l((-1),0,0)),this.add(a);var h=new Lt(n,r,t,e);h.up.set(0,0,1),h.lookAt(new l(0,1,0)),this.add(h);var c=new Lt(n,r,t,e);c.up.set(0,0,-1),c.lookAt(new l(0,(-1),0)),this.add(c);var u=new Lt(n,r,t,e);u.up.set(0,-1,0),u.lookAt(new l(0,0,1)),this.add(u);var p=new Lt(n,r,t,e);p.up.set(0,-1,0),p.lookAt(new l(0,0,(-1))),this.add(p);var f={format:Ms,magFilter:us,minFilter:us};this.renderTarget=new s(i,i,f),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,n=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,o,i),i.activeCubeFace=1,t.render(e,a,i),i.activeCubeFace=2,t.render(e,h,i),i.activeCubeFace=3,t.render(e,c,i),i.activeCubeFace=4,t.render(e,u,i),i.texture.generateMipmaps=n,i.activeCubeFace=5,t.render(e,p,i),t.setRenderTarget(null)}}function Cn(){lt.call(this),this.type="AudioListener",this.context=kh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Rn(t){lt.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function In(t){Rn.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function On(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Nn(t,e,i){this.binding=t,this.valueSize=i;var n,r=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Ln(t,e,i){this.path=e,this.parsedPath=i||Ln.parseTrackName(e),this.node=Ln.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Dn(t){this.uuid=ua.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function kn(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null;for(var n=e.tracks,r=n.length,o=new Array(r),s={endingStart:Zs,endingEnd:Zs},a=0;a!==r;++a){var l=n[a].createInterpolant(null);o[a]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zs,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Bn(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Gn(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Fn(){Mt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Vn(t,e,i,n){this.uuid=ua.generateUUID(),this.data=t,this.itemSize=e,this.offset=i,this.normalized=n===!0}function Un(t,e){this.uuid=ua.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Hn(t,e,i){Un.call(this,t,e),this.meshPerAttribute=i||1}function jn(t,e,i){ft.call(this,t,e),this.meshPerAttribute=i||1}function zn(t,e,i,n){this.ray=new ot(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Wn(t,e){return t.distance-e.distance}function Xn(t,e,i,n){if(t.visible!==!1&&(t.raycast(e,i),n===!0))for(var r=t.children,o=0,s=r.length;o<s;o++)Xn(r[o],e,i,!0)}function Yn(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function qn(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Zn(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function Kn(t,e){Pt.call(this,t,e),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,n="__default",r=0,o=i-1,s=i/1;this.createAnimation(n,r,o,s),this.setAnimationWeight(n,1)}function $n(t){lt.call(this),this.material=t,this.render=function(t){}}function Qn(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,o=void 0!==n?n:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var l=new Mt,h=new Tt(2*s*3,3);l.addAttribute("position",h),Te.call(this,l,new _e({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Jn(t){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new Mt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,r=1,o=32;n<o;n++,r++){var s=n/o*Math.PI*2,a=r/o*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new Tt(i,3));var l=new _e({fog:!1});this.cone=new Te(e,l),this.add(this.cone),this.update()}function tr(t){this.bones=this.getBoneList(t);for(var e=new Mt,i=[],n=[],r=new W(0,0,1),o=new W(0,1,0),s=0;s<this.bones.length;s++){var a=this.bones[s];a.parent&&a.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(r.r,r.g,r.b),n.push(o.r,o.g,o.b))}e.addAttribute("position",new Tt(i,3)),e.addAttribute("color",new Tt(n,3));var l=new _e({vertexColors:uo,depthTest:!1,depthWrite:!1,transparent:!0});Te.call(this,e,l),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function er(t,e){this.light=t,this.light.updateMatrixWorld();var i=new $e(e,4,2),n=new pt({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),Pt.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function ir(t){lt.call(this),this.light=t,this.light.updateMatrixWorld();var e=new pt({color:t.color,fog:!1}),i=new pt({color:t.color,fog:!1,wireframe:!0}),n=new Mt;n.addAttribute("position",new ft(new Float32Array(18),3)),this.add(new Pt(n,e)),this.add(new Pt(n,i)),this.update()}function nr(t,e){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var i=new Be(e);i.rotateY(.5*Math.PI);var n=new pt({vertexColors:uo,wireframe:!0}),r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new ft(o,3)),this.add(new Pt(i,n)),this.update()}function rr(t,e,i,n){t=t||10,e=e||10,i=new W(void 0!==i?i:4473924),n=new W(void 0!==n?n:8947848);for(var r=e/2,o=t/e,s=t/2,a=[],l=[],h=0,c=0,u=-s;h<=e;h++,u+=o){a.push(-s,0,u,s,0,u),a.push(u,0,-s,u,0,s);var p=h===r?i:n;p.toArray(l,c),c+=3,p.toArray(l,c),c+=3,p.toArray(l,c),c+=3,p.toArray(l,c),c+=3}var f=new Mt;f.addAttribute("position",new Tt(a,3)),f.addAttribute("color",new Tt(l,3));var d=new _e({vertexColors:uo});Te.call(this,f,d)}function or(t,e,i,n,r,o){t=t||10,e=e||16,i=i||8,n=n||64,r=new W(void 0!==r?r:4473924),o=new W(void 0!==o?o:8947848);var s,a,l,h,c,u,p,f=[],d=[];for(h=0;h<=e;h++)l=h/e*(2*Math.PI),s=Math.sin(l)*t,a=Math.cos(l)*t,f.push(0,0,0),f.push(s,0,a),p=1&h?r:o,d.push(p.r,p.g,p.b),d.push(p.r,p.g,p.b);for(h=0;h<=i;h++)for(p=1&h?r:o,u=t-t/i*h,c=0;c<n;c++)l=c/n*(2*Math.PI),s=Math.sin(l)*u,a=Math.cos(l)*u,f.push(s,0,a),d.push(p.r,p.g,p.b),l=(c+1)/n*(2*Math.PI),s=Math.sin(l)*u,a=Math.cos(l)*u,f.push(s,0,a),d.push(p.r,p.g,p.b);var m=new Mt;m.addAttribute("position",new Tt(f,3)),m.addAttribute("color",new Tt(d,3));var g=new _e({vertexColors:uo});Te.call(this,m,g)}function sr(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,o=void 0!==n?n:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Mt,h=new Tt(2*s*3,3);l.addAttribute("position",h),Te.call(this,l,new _e({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ar(t,e){lt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);
var i=new Mt;i.addAttribute("position",new Tt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var n=new _e({fog:!1});this.add(new be(i,n)),i=new Mt,i.addAttribute("position",new Tt([0,0,0,0,0,1],3)),this.add(new be(i,n)),this.update()}function lr(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(o.length/3-1)}var n=new Mt,r=new _e({color:16777215,vertexColors:co}),o=[],s=[],a={},l=new W(16755200),h=new W(16711680),c=new W(43775),u=new W(16777215),p=new W(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",h),e("p","n2",h),e("p","n3",h),e("p","n4",h),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",u),e("p","c",p),e("cn1","cn2",p),e("cn3","cn4",p),e("cf1","cf2",p),e("cf3","cf4",p),n.addAttribute("position",new Tt(o,3)),n.addAttribute("color",new Tt(s,3)),Te.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function hr(t,e){void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Mt;r.setIndex(new ft(i,1)),r.addAttribute("position",new ft(n,3)),Te.call(this,r,new _e({color:e})),void 0!==t&&this.update(t)}function cr(t,e,i,n,r,o){lt.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===o&&(o=.2*r),void 0===Bh&&(Bh=new Mt,Bh.addAttribute("position",new Tt([0,0,0,0,1,0],3)),Gh=new si(0,.5,1,5,1),Gh.translate(0,-.5,0)),this.position.copy(e),this.line=new be(Bh,new _e({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pt(Gh,new pt({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,o)}function ur(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Mt;n.addAttribute("position",new Tt(e,3)),n.addAttribute("color",new Tt(i,3));var r=new _e({vertexColors:uo});Te.call(this,n,r)}function pr(){function t(t,o,s,a){e=t,i=s,n=-3*t+3*o-2*s-a,r=2*t-2*o+s+a}var e=0,i=0,n=0,r=0;return{initCatmullRom:function(e,i,n,r,o){t(i,n,o*(n-e),o*(r-i))},initNonuniformCatmullRom:function(e,i,n,r,o,s,a){var l=(i-e)/o-(n-e)/(o+s)+(n-i)/s,h=(n-i)/s-(r-i)/(s+a)+(r-n)/a;l*=s,h*=s,t(i,n,l,h)},calc:function(t){var o=t*t,s=o*t;return e+i*t+n*o+r*s}}}function fr(t){this.points=t||[],this.closed=!1}function dr(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function mr(t,e,i){this.v0=t,this.v1=e,this.v2=i}function gr(t,e){this.v1=t,this.v2=e}function yr(t,e,i,n,r,o){gn.call(this,t,e,i,i,n,r,o)}function vr(t,e,i,n,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ut(t,e,i,r,o,s)}function _r(t){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new fi(t)}function br(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new xe(t,e)}function Tr(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new de(t)}function Er(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new xe(t,e)}function xr(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function Sr(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function wr(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function Ar(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(t,e,i)}function Mr(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ft(t,e).setDynamic(!0)}function Pr(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new dt(t,e)}function Cr(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new mt(t,e)}function Rr(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new gt(t,e)}function Ir(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new yt(t,e)}function Or(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new vt(t,e)}function Nr(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new _t(t,e)}function Lr(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new bt(t,e)}function Dr(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Tt(t,e)}function kr(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Et(t,e)}function Br(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fr.call(this,t),this.type="catmullrom",this.closed=!0}function Gr(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fr.call(this,t),this.type="catmullrom"}function Fr(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),fr.call(this,t),this.type="catmullrom"}function Vr(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new hr(t,e)}function Ur(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Te(new ri(t.geometry),new _e({color:void 0!==e?e:16777215}))}function Hr(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Te(new Ce(t.geometry),new _e({color:void 0!==e?e:16777215}))}function jr(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ei(t)}function zr(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Si(t)}function Wr(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Xr(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}(),e.prototype={addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&i[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);r!==-1&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;var n=[],r=0,o=i.length;for(r=0;r<o;r++)n[r]=i[r];for(r=0;r<o;r++)n[r].call(this,t)}}}};var Yr="84",qr={LEFT:0,MIDDLE:1,RIGHT:2},Zr=0,Kr=1,$r=2,Qr=3,Jr=0,to=1,eo=0,io=1,no=2,ro=0,oo=1,so=2,ao=1,lo=2,ho=0,co=1,uo=2,po=0,fo=1,mo=2,go=3,yo=4,vo=5,_o=100,bo=101,To=102,Eo=103,xo=104,So=200,wo=201,Ao=202,Mo=203,Po=204,Co=205,Ro=206,Io=207,Oo=208,No=209,Lo=210,Do=0,ko=1,Bo=2,Go=3,Fo=4,Vo=5,Uo=6,Ho=7,jo=0,zo=1,Wo=2,Xo=0,Yo=1,qo=2,Zo=3,Ko=4,$o=300,Qo=301,Jo=302,ts=303,es=304,is=305,ns=306,rs=307,os=1e3,ss=1001,as=1002,ls=1003,hs=1004,cs=1005,us=1006,ps=1007,fs=1008,ds=1009,ms=1010,gs=1011,ys=1012,vs=1013,_s=1014,bs=1015,Ts=1016,Es=1017,xs=1018,Ss=1019,ws=1020,As=1021,Ms=1022,Ps=1023,Cs=1024,Rs=1025,Is=Ps,Os=1026,Ns=1027,Ls=2001,Ds=2002,ks=2003,Bs=2004,Gs=2100,Fs=2101,Vs=2102,Us=2103,Hs=2151,js=2200,zs=2201,Ws=2202,Xs=2300,Ys=2301,qs=2302,Zs=2400,Ks=2401,$s=2402,Qs=0,Js=1,ta=2,ea=3e3,ia=3001,na=3007,ra=3002,oa=3003,sa=3004,aa=3005,la=3006,ha=3200,ca=3201,ua={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ua.DEG2RAD},radToDeg:function(t){return t*ua.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}};i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}};var pa=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=$o,n.prototype={constructor:n,isTexture:!0,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=ua.generateUUID()),void 0===t.images[n.uuid]&&(t.images[n.uuid]={uuid:n.uuid,url:e(n)}),i.image=n.uuid}return t.textures[this.uuid]=i,i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===$o){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case os:t.x=t.x-Math.floor(t.x);break;case ss:t.x=t.x<0?0:1;break;case as:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case os:t.y=t.y-Math.floor(t.y);break;case ss:t.y=t.y<0?0:1;break;case as:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(n.prototype,e.prototype),r.prototype={constructor:r,isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,o=.01,s=.1,a=t.elements,l=a[0],h=a[4],c=a[8],u=a[1],p=a[5],f=a[9],d=a[2],m=a[6],g=a[10];if(Math.abs(h-u)<o&&Math.abs(c-d)<o&&Math.abs(f-m)<o){if(Math.abs(h+u)<s&&Math.abs(c+d)<s&&Math.abs(f+m)<s&&Math.abs(l+p+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;var y=(l+1)/2,v=(p+1)/2,_=(g+1)/2,b=(h+u)/4,T=(c+d)/4,E=(f+m)/4;return y>v&&y>_?y<o?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(y),n=b/i,r=T/i):v>_?v<o?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(v),i=b/n,r=E/n):_<o?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(_),i=T/r,n=E/r),this.set(i,n,r,e),this}var x=Math.sqrt((m-f)*(m-f)+(c-d)*(c-d)+(u-h)*(u-h));return Math.abs(x)<.001&&(x=1),this.x=(m-f)/x,this.y=(c-d)/x,this.z=(u-h)/x,this.w=Math.acos((l+p+g-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new r,e=new r),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},o.prototype={constructor:o,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(o.prototype,e.prototype),s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.isWebGLRenderTargetCube=!0,a.prototype={constructor:a,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if((t&&t.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),o=Math.sin(t._x/2),s=Math.sin(t._y/2),a=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=o*n*r+i*s*a,this._y=i*s*r-o*n*a,this._z=i*n*a+o*s*r,this._w=i*n*r-o*s*a):"YXZ"===l?(this._x=o*n*r+i*s*a,this._y=i*s*r-o*n*a,this._z=i*n*a-o*s*r,this._w=i*n*r+o*s*a):"ZXY"===l?(this._x=o*n*r-i*s*a,this._y=i*s*r+o*n*a,this._z=i*n*a+o*s*r,this._w=i*n*r-o*s*a):"ZYX"===l?(this._x=o*n*r-i*s*a,this._y=i*s*r+o*n*a,this._z=i*n*a-o*s*r,this._w=i*n*r+o*s*a):"YZX"===l?(this._x=o*n*r+i*s*a,this._y=i*s*r+o*n*a,this._z=i*n*a-o*s*r,this._w=i*n*r-o*s*a):"XZY"===l&&(this._x=o*n*r-i*s*a,this._y=i*s*r-o*n*a,this._z=i*n*a+o*s*r,this._w=i*n*r+o*s*a),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],o=i[8],s=i[1],a=i[5],l=i[9],h=i[2],c=i[6],u=i[10],p=n+a+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(c-l)*e,this._y=(o-h)*e,this._z=(s-r)*e):n>a&&n>u?(e=2*Math.sqrt(1+n-a-u),this._w=(c-l)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+h)/e):a>u?(e=2*Math.sqrt(1+a-n-u),this._w=(o-h)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+u-n-a),this._w=(s-r)/e,this._x=(o+h)/e,this._y=(l+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(n,r){return void 0===t&&(t=new l),e=n.dot(r)+1,e<i?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,o=t._w,s=e._x,a=e._y,l=e._z,h=e._w;return this._x=i*h+o*s+n*l-r*a,this._y=n*h+o*a+r*s-i*l,this._z=r*h+o*l+i*a-n*s,this._w=o*h-i*s-n*a-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,o=this._w,s=o*t._w+i*t._x+n*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(a,s),h=Math.sin((1-e)*l)/a,c=Math.sin(e*l)/a;return this._w=o*h+this._w*c,this._x=i*h+this._x*c,this._y=n*h+this._y*c,this._z=r*h+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(a,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,o,s){var a=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3],u=r[o+0],p=r[o+1],f=r[o+2],d=r[o+3];if(c!==d||a!==u||l!==p||h!==f){var m=1-s,g=a*u+l*p+h*f+c*d,y=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var _=Math.sqrt(v),b=Math.atan2(_,g*y);m=Math.sin(m*b)/_,s=Math.sin(s*b)/_}var T=s*y;if(a=a*m+u*T,l=l*m+p*T,h=h*m+f*T,c=c*m+d*T,m===1-s){var E=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=E,l*=E,h*=E,c*=E}}t[e]=a,t[e+1]=l,t[e+2]=h,t[e+3]=c}}),l.prototype={constructor:l,isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return(e&&e.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new a),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new a),this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14];var o=r[3]*e+r[7]*i+r[11]*n+r[15];return this.divideScalar(o)},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*n-s*i,h=a*i+s*e-r*n,c=a*n+r*i-o*e,u=-r*e-o*i-s*n;return this.x=l*a+u*-r+h*-s-c*-o,this.y=h*a+u*-o+c*-r-l*-s,this.z=c*a+u*-s+l*-o-h*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new h),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new h),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),
this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new l,e=new l),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new l),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new l),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(ua.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var i=t;t=e,e=i}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},h.prototype={constructor:h,isMatrix4:!0,set:function(t,e,i,n,r,o,s,a,l,h,c,u,p,f,d,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=p,g[7]=f,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new h).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new l);var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,this}}(),makeRotationFromEuler:function(t){(t&&t.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),l=Math.sin(n),h=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var u=o*h,p=o*c,f=s*h,d=s*c;e[0]=a*h,e[4]=-a*c,e[8]=l,e[1]=p+f*l,e[5]=u-d*l,e[9]=-s*a,e[2]=d-u*l,e[6]=f+p*l,e[10]=o*a}else if("YXZ"===t.order){var m=a*h,g=a*c,y=l*h,v=l*c;e[0]=m+v*s,e[4]=y*s-g,e[8]=o*l,e[1]=o*c,e[5]=o*h,e[9]=-s,e[2]=g*s-y,e[6]=v+m*s,e[10]=o*a}else if("ZXY"===t.order){var m=a*h,g=a*c,y=l*h,v=l*c;e[0]=m-v*s,e[4]=-o*c,e[8]=y+g*s,e[1]=g+y*s,e[5]=o*h,e[9]=v-m*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var u=o*h,p=o*c,f=s*h,d=s*c;e[0]=a*h,e[4]=f*l-p,e[8]=u*l+d,e[1]=a*c,e[5]=d*l+u,e[9]=p*l-f,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var _=o*a,b=o*l,T=s*a,E=s*l;e[0]=a*h,e[4]=E-_*c,e[8]=T*c+b,e[1]=c,e[5]=o*h,e[9]=-s*h,e[2]=-l*h,e[6]=b*c+T,e[10]=_-E*c}else if("XZY"===t.order){var _=o*a,b=o*l,T=s*a,E=s*l;e[0]=a*h,e[4]=-c,e[8]=l*h,e[1]=_*c+E,e[5]=o*h,e[9]=b*c-T,e[2]=T*c-b,e[6]=s*h,e[10]=E*c+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,o=t.w,s=i+i,a=n+n,l=r+r,h=i*s,c=i*a,u=i*l,p=n*a,f=n*l,d=r*l,m=o*s,g=o*a,y=o*l;return e[0]=1-(p+d),e[4]=c-y,e[8]=u+g,e[1]=c+y,e[5]=1-(h+d),e[9]=f-m,e[2]=u-g,e[6]=f+m,e[10]=1-(h+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,i;return function(n,r,o){void 0===t&&(t=new l,e=new l,i=new l);var s=this.elements;return i.subVectors(n,r).normalize(),0===i.lengthSq()&&(i.z=1),t.crossVectors(o,i).normalize(),0===t.lengthSq()&&(i.z+=1e-4,t.crossVectors(o,i).normalize()),e.crossVectors(i,t),s[0]=t.x,s[4]=e.x,s[8]=i.x,s[1]=t.y,s[5]=e.y,s[9]=i.y,s[2]=t.z,s[6]=e.z,s[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[4],a=i[8],l=i[12],h=i[1],c=i[5],u=i[9],p=i[13],f=i[2],d=i[6],m=i[10],g=i[14],y=i[3],v=i[7],_=i[11],b=i[15],T=n[0],E=n[4],x=n[8],S=n[12],w=n[1],A=n[5],M=n[9],P=n[13],C=n[2],R=n[6],I=n[10],O=n[14],N=n[3],L=n[7],D=n[11],k=n[15];return r[0]=o*T+s*w+a*C+l*N,r[4]=o*E+s*A+a*R+l*L,r[8]=o*x+s*M+a*I+l*D,r[12]=o*S+s*P+a*O+l*k,r[1]=h*T+c*w+u*C+p*N,r[5]=h*E+c*A+u*R+p*L,r[9]=h*x+c*M+u*I+p*D,r[13]=h*S+c*P+u*O+p*k,r[2]=f*T+d*w+m*C+g*N,r[6]=f*E+d*A+m*R+g*L,r[10]=f*x+d*M+m*I+g*D,r[14]=f*S+d*P+m*O+g*k,r[3]=y*T+v*w+_*C+b*N,r[7]=y*E+v*A+_*R+b*L,r[11]=y*x+v*M+_*I+b*D,r[15]=y*S+v*P+_*O+b*k,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new l);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],s=t[5],a=t[9],l=t[13],h=t[2],c=t[6],u=t[10],p=t[14],f=t[3],d=t[7],m=t[11],g=t[15];return f*(+r*a*c-n*l*c-r*s*u+i*l*u+n*s*p-i*a*p)+d*(+e*a*p-e*l*u+r*o*u-n*o*p+n*l*h-r*a*h)+m*(+e*l*c-e*s*p-r*o*c+i*o*p+r*s*h-i*l*h)+g*(-n*s*h-e*a*c+e*s*u+n*o*c-i*o*u+i*a*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],h=n[5],c=n[6],u=n[7],p=n[8],f=n[9],d=n[10],m=n[11],g=n[12],y=n[13],v=n[14],_=n[15],b=f*v*u-y*d*u+y*c*m-h*v*m-f*c*_+h*d*_,T=g*d*u-p*v*u-g*c*m+l*v*m+p*c*_-l*d*_,E=p*y*u-g*f*u+g*h*m-l*y*m-p*h*_+l*f*_,x=g*f*c-p*y*c-g*h*d+l*y*d+p*h*v-l*f*v,S=r*b+o*T+s*E+a*x;if(0===S){var w="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(w);return console.warn(w),this.identity()}var A=1/S;return i[0]=b*A,i[1]=(y*d*a-f*v*a-y*s*m+o*v*m+f*s*_-o*d*_)*A,i[2]=(h*v*a-y*c*a+y*s*u-o*v*u-h*s*_+o*c*_)*A,i[3]=(f*c*a-h*d*a-f*s*u+o*d*u+h*s*m-o*c*m)*A,i[4]=T*A,i[5]=(p*v*a-g*d*a+g*s*m-r*v*m-p*s*_+r*d*_)*A,i[6]=(g*c*a-l*v*a-g*s*u+r*v*u+l*s*_-r*c*_)*A,i[7]=(l*d*a-p*c*a+p*s*u-r*d*u-l*s*m+r*c*m)*A,i[8]=E*A,i[9]=(g*f*a-p*y*a-g*o*m+r*y*m+p*o*_-r*f*_)*A,i[10]=(l*y*a-g*h*a+g*o*u-r*y*u-l*o*_+r*h*_)*A,i[11]=(p*h*a-l*f*a-p*o*u+r*f*u+l*o*m-r*h*m)*A,i[12]=x*A,i[13]=(p*y*s-g*f*s+g*o*d-r*y*d-p*o*v+r*f*v)*A,i[14]=(g*h*s-l*y*s-g*o*c+r*y*c+l*o*v-r*h*v)*A,i[15]=(l*f*s-p*h*s+p*o*c-r*f*c-l*o*d+r*h*d)*A,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,s=t.y,a=t.z,l=r*o,h=r*s;return this.set(l*o+i,l*s-n*a,l*a+n*s,0,l*s+n*a,h*s+i,h*a-n*o,0,l*a-n*s,h*a+n*o,r*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t,e;return function(i,n,r){void 0===t&&(t=new l,e=new h);var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),c=t.set(o[8],o[9],o[10]).length(),u=this.determinant();u<0&&(s=-s),i.x=o[12],i.y=o[13],i.z=o[14],e.elements.set(this.elements);var p=1/s,f=1/a,d=1/c;return e.elements[0]*=p,e.elements[1]*=p,e.elements[2]*=p,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),r.x=s,r.y=a,r.z=c,this}}(),makePerspective:function(t,e,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(e-t),l=2*r/(i-n),h=(e+t)/(e-t),c=(i+n)/(i-n),u=-(o+r)/(o-r),p=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,i,n,r,o){var s=this.elements,a=1/(e-t),l=1/(i-n),h=1/(o-r),c=(e+t)*a,u=(i+n)*l,p=(o+r)*h;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var fa=new n,da=new c,ma=[],ga=[];U.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var o=i[n];o.setValue(t,e[o.id])}};var ya=/([\w\d_]+)(\])?(\[|\.)?/g;z.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},z.prototype.set=function(t,e,i){var n=this.map[i];void 0!==n&&n.setValue(t,e[i],this.renderer)},z.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},z.upload=function(t,e,i,n){for(var r=0,o=e.length;r!==o;++r){var s=e[r],a=i[s.id];a.needsUpdate!==!1&&s.setValue(t,a.value,n)}},z.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var o=t[n];o.id in e&&i.push(o)}return i};var va={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},_a="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",ba="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",Ta="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ea="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",xa="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Sa="\nvec3 transformed = vec3( position );\n",wa="\nvec3 objectNormal = vec3( normal );\n",Aa="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Ma="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",Pa="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",Ca="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",Ra="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Ia="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",Oa="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Na="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",La="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Da="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",ka="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",Ba="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",Ga="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",Fa="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",Va="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",Ua="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",Ha="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",ja="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",za="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",Wa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",Xa="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",Ya="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",qa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",Za="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",Ka="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",$a="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",Qa="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",Ja="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",tl="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",el="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",il="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",nl="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",rl="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",ol="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",sl="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",al="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",ll="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",hl="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",cl="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",ul="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",pl="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",fl="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",dl="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",ml="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",gl="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",yl="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",vl="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",_l="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",bl="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Tl="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",El="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",xl="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",Sl="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",wl="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Al="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Ml="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",Pl="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",Cl="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Rl="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",Il="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",Ol="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",Nl="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",Ll="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Dl="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",kl="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",Bl="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",Gl="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Fl="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Vl="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",Ul="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",Hl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",jl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",zl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",Wl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Xl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",Yl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",ql="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",Zl="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",Kl="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",$l="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",Ql="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Jl="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",th="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",eh="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",ih="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",nh="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",rh="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",oh="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sh="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",ah="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",lh="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",hh="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",ch="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",uh="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",ph="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",fh="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",dh="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",mh="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",gh="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",yh="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",vh="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",_h={
alphamap_fragment:_a,alphamap_pars_fragment:ba,alphatest_fragment:Ta,aomap_fragment:Ea,aomap_pars_fragment:xa,begin_vertex:Sa,beginnormal_vertex:wa,bsdfs:Aa,bumpmap_pars_fragment:Ma,clipping_planes_fragment:Pa,clipping_planes_pars_fragment:Ca,clipping_planes_pars_vertex:Ra,clipping_planes_vertex:Ia,color_fragment:Oa,color_pars_fragment:Na,color_pars_vertex:La,color_vertex:Da,common:ka,cube_uv_reflection_fragment:Ba,defaultnormal_vertex:Ga,displacementmap_pars_vertex:Fa,displacementmap_vertex:Va,emissivemap_fragment:Ua,emissivemap_pars_fragment:Ha,encodings_fragment:ja,encodings_pars_fragment:za,envmap_fragment:Wa,envmap_pars_fragment:Xa,envmap_pars_vertex:Ya,envmap_vertex:qa,fog_vertex:Za,fog_pars_vertex:Ka,fog_fragment:$a,fog_pars_fragment:Qa,gradientmap_pars_fragment:Ja,lightmap_fragment:tl,lightmap_pars_fragment:el,lights_lambert_vertex:il,lights_pars:nl,lights_phong_fragment:rl,lights_phong_pars_fragment:ol,lights_physical_fragment:sl,lights_physical_pars_fragment:al,lights_template:ll,logdepthbuf_fragment:hl,logdepthbuf_pars_fragment:cl,logdepthbuf_pars_vertex:ul,logdepthbuf_vertex:pl,map_fragment:fl,map_pars_fragment:dl,map_particle_fragment:ml,map_particle_pars_fragment:gl,metalnessmap_fragment:yl,metalnessmap_pars_fragment:vl,morphnormal_vertex:_l,morphtarget_pars_vertex:bl,morphtarget_vertex:Tl,normal_flip:El,normal_fragment:xl,normalmap_pars_fragment:Sl,packing:wl,premultiplied_alpha_fragment:Al,project_vertex:Ml,roughnessmap_fragment:Pl,roughnessmap_pars_fragment:Cl,shadowmap_pars_fragment:Rl,shadowmap_pars_vertex:Il,shadowmap_vertex:Ol,shadowmask_pars_fragment:Nl,skinbase_vertex:Ll,skinning_pars_vertex:Dl,skinning_vertex:kl,skinnormal_vertex:Bl,specularmap_fragment:Gl,specularmap_pars_fragment:Fl,tonemapping_fragment:Vl,tonemapping_pars_fragment:Ul,uv_pars_fragment:Hl,uv_pars_vertex:jl,uv_vertex:zl,uv2_pars_fragment:Wl,uv2_pars_vertex:Xl,uv2_vertex:Yl,worldpos_vertex:ql,cube_frag:Zl,cube_vert:Kl,depth_frag:$l,depth_vert:Ql,distanceRGBA_frag:Jl,distanceRGBA_vert:th,equirect_frag:eh,equirect_vert:ih,linedashed_frag:nh,linedashed_vert:rh,meshbasic_frag:oh,meshbasic_vert:sh,meshlambert_frag:ah,meshlambert_vert:lh,meshphong_frag:hh,meshphong_vert:ch,meshphysical_frag:uh,meshphysical_vert:ph,normal_frag:fh,normal_vert:dh,points_frag:mh,points_vert:gh,shadow_frag:yh,shadow_vert:vh};W.prototype={constructor:W,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=ua.euclideanModulo(e,1),i=ua.clamp(i,0,1),n=ua.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,o=2*n-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(n[1])/360,a=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(s,a,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var h=i[1],c=h.length;if(3===c)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}if(t&&t.length>0){var h=bh[t];void 0!==h?this.setHex(h):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,o=this.g,s=this.b,a=Math.max(r,o,s),l=Math.min(r,o,s),h=(l+a)/2;if(l===a)e=0,i=0;else{var c=a-l;switch(i=h<=.5?c/(a+l):c/(2-a-l),a){case r:e=(o-s)/c+(o<s?6:0);break;case o:e=(s-r)/c+2;break;case s:e=(r-o)/c+4}e/=6}return n.h=e,n.s=i,n.l=h,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var bh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X.prototype=Object.create(n.prototype),X.prototype.constructor=X,X.prototype.isDataTexture=!0;var Th={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},Eh={basic:{uniforms:va.merge([Th.common,Th.aomap,Th.lightmap,Th.fog]),vertexShader:_h.meshbasic_vert,fragmentShader:_h.meshbasic_frag},lambert:{uniforms:va.merge([Th.common,Th.aomap,Th.lightmap,Th.emissivemap,Th.fog,Th.lights,{emissive:{value:new W(0)}}]),vertexShader:_h.meshlambert_vert,fragmentShader:_h.meshlambert_frag},phong:{uniforms:va.merge([Th.common,Th.aomap,Th.lightmap,Th.emissivemap,Th.bumpmap,Th.normalmap,Th.displacementmap,Th.gradientmap,Th.fog,Th.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:_h.meshphong_vert,fragmentShader:_h.meshphong_frag},standard:{uniforms:va.merge([Th.common,Th.aomap,Th.lightmap,Th.emissivemap,Th.bumpmap,Th.normalmap,Th.displacementmap,Th.roughnessmap,Th.metalnessmap,Th.fog,Th.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_h.meshphysical_vert,fragmentShader:_h.meshphysical_frag},points:{uniforms:va.merge([Th.points,Th.fog]),vertexShader:_h.points_vert,fragmentShader:_h.points_frag},dashed:{uniforms:va.merge([Th.common,Th.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_h.linedashed_vert,fragmentShader:_h.linedashed_frag},depth:{uniforms:va.merge([Th.common,Th.displacementmap]),vertexShader:_h.depth_vert,fragmentShader:_h.depth_frag},normal:{uniforms:va.merge([Th.common,Th.bumpmap,Th.normalmap,Th.displacementmap,{opacity:{value:1}}]),vertexShader:_h.normal_vert,fragmentShader:_h.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_h.cube_vert,fragmentShader:_h.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:_h.equirect_vert,fragmentShader:_h.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new l}},vertexShader:_h.distanceRGBA_vert,fragmentShader:_h.distanceRGBA_frag}};Eh.physical={uniforms:va.merge([Eh.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:_h.meshphysical_vert,fragmentShader:_h.meshphysical_frag},Y.prototype={constructor:Y,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var n=e||new i;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var n=e||new i;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var xh=0;K.prototype={constructor:K,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):"overdraw"===e?this[e]=Number(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==fo&&(n.blending=this.blending),this.shading!==lo&&(n.shading=this.shading),this.side!==ro&&(n.side=this.side),this.vertexColors!==ho&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,i){var r=e(t.textures),o=e(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(K.prototype,e.prototype),$.prototype=Object.create(K.prototype),$.prototype.constructor=$,$.prototype.isShaderMaterial=!0,$.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=va.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},$.prototype.toJSON=function(t){var e=K.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Q.prototype=Object.create(K.prototype),Q.prototype.constructor=Q,Q.prototype.isMeshDepthMaterial=!0,Q.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},J.prototype={constructor:J,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),i=+(1/0),n=+(1/0),r=-(1/0),o=-(1/0),s=-(1/0),a=0,l=t.length;a<l;a+=3){var h=t[a],c=t[a+1],u=t[a+2];h<e&&(e=h),c<i&&(i=c),u<n&&(n=u),h>r&&(r=h),c>o&&(o=c),u>s&&(s=u)}return this.min.set(e,i,n),this.max.set(r,o,s),this},setFromBufferAttribute:function(t){for(var e=+(1/0),i=+(1/0),n=+(1/0),r=-(1/0),o=-(1/0),s=-(1/0),a=0,l=t.count;a<l;a++){var h=t.getX(a),c=t.getY(a),u=t.getZ(a);h<e&&(e=h),c<i&&(i=c),u<n&&(n=u),h>r&&(r=h),c>o&&(o=c),u>s&&(s=u)}return this.min.set(e,i,n),this.max.set(r,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new l;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new l;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new l;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new l;return function(e){var i=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var n,r,o=e.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,r=s.length;n<r;n++)t.copy(s[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}else if(o.isBufferGeometry){var a=o.attributes.position;if(void 0!==a)for(n=0,r=a.count;n<r;n++)t.fromBufferAttribute(a,n).applyMatrix4(e.matrixWorld),i.expandByPoint(t)}}),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var i=e||new l;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new l),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},clampPoint:function(t,e){var i=e||new l;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new l;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),getBoundingSphere:function(){var t=new l;return function(e){var i=e||new tt;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new l,new l,new l,new l,new l,new l,new l,new l];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},tt.prototype={constructor:tt,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t;return function(e,i){void 0===t&&(t=new J);var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=0,o=0,s=e.length;o<s;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new l;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new J;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},et.prototype={constructor:et,isMatrix3:!0,set:function(t,e,i,n,r,o,s,a,l){var h=this.elements;return h[0]=t,h[1]=n,h[2]=s,h[3]=e,h[4]=r,h[5]=a,h[6]=i,h[7]=o,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new l);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],h=t[8];return e*o*h-e*s*l-i*r*h+i*s*a+n*r*l-n*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var i=t.elements,n=this.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],h=i[5],c=i[6],u=i[7],p=i[8],f=p*l-h*u,d=h*c-p*a,m=u*a-l*c,g=r*f+o*d+s*m;if(0===g){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(y);return console.warn(y),this.identity()}var v=1/g;return n[0]=f*v,n[1]=(s*u-p*o)*v,n[2]=(h*o-s*l)*v,n[3]=d*v,n[4]=(p*r-s*c)*v,n[5]=(s*a-h*r)*v,n[6]=m*v,n[7]=(o*c-u*r)*v,n[8]=(l*r-o*a)*v,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}},it.prototype={constructor:it,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new l,e=new l;return function(i,n,r){var o=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t),n=e||new l;return n.copy(this.normal).multiplyScalar(i)},intersectLine:function(){var t=new l;return function(e,i){var n=i||new l,r=e.delta(t),o=this.normal.dot(r);if(0!==o){var s=-(e.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return n.copy(r).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new l;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new l,e=new et;return function(i,n){var r=this.coplanarPoint(t).applyMatrix4(i),o=n||e.getNormalMatrix(i),s=this.normal.applyMatrix3(o).normalize();return this.constant=-r.dot(s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),
this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},nt.prototype={constructor:nt,set:function(t,e,i,n,r,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],l=i[5],h=i[6],c=i[7],u=i[8],p=i[9],f=i[10],d=i[11],m=i[12],g=i[13],y=i[14],v=i[15];return e[0].setComponents(s-n,c-a,d-u,v-m).normalize(),e[1].setComponents(s+n,c+a,d+u,v+m).normalize(),e[2].setComponents(s+r,c+l,d+p,v+g).normalize(),e[3].setComponents(s-r,c-l,d-p,v-g).normalize(),e[4].setComponents(s-o,c-h,d-f,v-y).normalize(),e[5].setComponents(s+o,c+h,d+f,v+y).normalize(),this},intersectsObject:function(){var t=new tt;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new tt;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){var o=e[r].distanceToPoint(i);if(o<n)return!1}return!0},intersectsBox:function(){var t=new l,e=new l;return function(i){for(var n=this.planes,r=0;r<6;r++){var o=n[r];t.x=o.normal.x>0?i.min.x:i.max.x,e.x=o.normal.x>0?i.max.x:i.min.x,t.y=o.normal.y>0?i.min.y:i.max.y,e.y=o.normal.y>0?i.max.y:i.min.y,t.z=o.normal.z>0?i.min.z:i.max.z,e.z=o.normal.z>0?i.max.z:i.min.z;var s=o.distanceToPoint(t),a=o.distanceToPoint(e);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},ot.prototype={constructor:ot,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var i=e||new l;return i.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new l;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new l;i.subVectors(t,this.origin);var n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new l;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new l,e=new l,i=new l;return function(n,r,o,s){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var a,l,h,c,u=.5*n.distanceTo(r),p=-this.direction.dot(e),f=i.dot(this.direction),d=-i.dot(e),m=i.lengthSq(),g=Math.abs(1-p*p);if(g>0)if(a=p*d-f,l=p*f-d,c=u*g,a>=0)if(l>=-c)if(l<=c){var y=1/g;a*=y,l*=y,h=a*(a+p*l+2*f)+l*(p*a+l+2*d)+m}else l=u,a=Math.max(0,-(p*l+f)),h=-a*a+l*(l+2*d)+m;else l=-u,a=Math.max(0,-(p*l+f)),h=-a*a+l*(l+2*d)+m;else l<=-c?(a=Math.max(0,-(-p*u+f)),l=a>0?-u:Math.min(Math.max(-u,-d),u),h=-a*a+l*(l+2*d)+m):l<=c?(a=0,l=Math.min(Math.max(-u,-d),u),h=l*(l+2*d)+m):(a=Math.max(0,-(p*u+f)),l=a>0?u:Math.min(Math.max(-u,-d),u),h=-a*a+l*(l+2*d)+m);else l=p>0?-u:u,a=Math.max(0,-(p*l+f)),h=-a*a+l*(l+2*d)+m;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(e).multiplyScalar(l).add(t),h}}(),intersectSphere:function(){var t=new l;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,o=e.radius*e.radius;if(r>o)return null;var s=Math.sqrt(o-r),a=n-s,l=n+s;return a<0&&l<0?null:a<0?this.at(l,i):this.at(a,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var i=t.normal.dot(this.direction);return i*e<0},intersectBox:function(t,e){var i,n,r,o,s,a,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),h>=0?(r=(t.min.y-u.y)*h,o=(t.max.y-u.y)*h):(r=(t.max.y-u.y)*h,o=(t.min.y-u.y)*h),i>o||r>n?null:((r>i||i!==i)&&(i=r),(o<n||n!==n)&&(n=o),c>=0?(s=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(s=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),i>a||s>n?null:((s>i||i!==i)&&(i=s),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:function(){var t=new l;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new l,e=new l,i=new l,n=new l;return function(r,o,s,a,l){e.subVectors(o,r),i.subVectors(s,r),n.crossVectors(e,i);var h,c=this.direction.dot(n);if(c>0){if(a)return null;h=1}else{if(!(c<0))return null;h=-1,c=-c}t.subVectors(this.origin,r);var u=h*this.direction.dot(i.crossVectors(t,i));if(u<0)return null;var p=h*this.direction.dot(e.cross(t));if(p<0)return null;if(u+p>c)return null;var f=-h*t.dot(n);return f<0?null:this.at(f/c,l)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},st.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],st.DefaultOrder="XYZ",st.prototype={constructor:st,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=ua.clamp,r=t.elements,o=r[0],s=r[4],a=r[8],l=r[1],h=r[5],c=r[9],u=r[2],p=r[6],f=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-u,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,h))):"YZX"===e?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===e?(this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,h),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,n){return void 0===t&&(t=new h),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new a;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},at.prototype={constructor:at,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}};var Sh=0;lt.DefaultUp=new l(0,1,0),lt.DefaultMatrixAutoUpdate=!0,lt.prototype={constructor:lt,isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new a;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new l(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new l(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new l(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new l;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new l(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new l(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new l(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new h;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new h;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);i!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i],o=r.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new l;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new l,e=new l;return function(i){var n=i||new a;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new a;return function(e){var i=e||new st;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new l,e=new a;return function(i){var n=i||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new a;return function(e){var i=e||new l;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t||""===t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(t).object)}if(i){var s=e(t.geometries),a=e(t.materials),l=e(t.textures),h=e(t.images);s.length>0&&(n.geometries=s),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),h.length>0&&(n.images=h)}return n.object=r,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}},Object.assign(lt.prototype,e.prototype),ht.prototype={constructor:ht,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){var e=t||new l;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new l;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new l;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new l,e=new l;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),s=o/r;return n&&(s=ua.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new l;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ct.normal=function(){var t=new l;return function(e,i,n,r){var o=r||new l;o.subVectors(n,i),t.subVectors(e,i),o.cross(t);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),ct.barycoordFromPoint=function(){var t=new l,e=new l,i=new l;return function(n,r,o,s,a){t.subVectors(s,r),e.subVectors(o,r),i.subVectors(n,r);var h=t.dot(t),c=t.dot(e),u=t.dot(i),p=e.dot(e),f=e.dot(i),d=h*p-c*c,m=a||new l;if(0===d)return m.set(-2,-1,-1);var g=1/d,y=(p*u-c*f)*g,v=(h*f-c*u)*g;return m.set(1-y-v,v,y)}}(),ct.containsPoint=function(){var t=new l;return function(e,i,n,r){var o=ct.barycoordFromPoint(e,i,n,r,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),ct.prototype={constructor:ct,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new l,e=new l;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new l;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ct.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new it;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ct.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ct.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,i,n;return function(r,o){void 0===t&&(t=new it,e=[new ht,new ht,new ht],i=new l,n=new l);var s=o||new l,a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,i),this.containsPoint(i)===!0)s.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var h=0;h<e.length;h++){e[h].closestPointToPoint(i,!0,n);var c=i.distanceToSquared(n);c<a&&(a=c,s.copy(n))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ut.prototype={constructor:ut,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},pt.prototype=Object.create(K.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshBasicMaterial=!0,pt.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},ft.prototype={constructor:ft,isBufferAttribute:!0,set needsUpdate(t){t===!0&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new W),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];e[i++]=o.a,e[i++]=o.b,e[i++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new i),e[n++]=s.x,e[n++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new l),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,o=t.length;n<o;n++){var s=t[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),s=new r),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z,e[i++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},dt.prototype=Object.create(ft.prototype),dt.prototype.constructor=dt,mt.prototype=Object.create(ft.prototype),mt.prototype.constructor=mt,gt.prototype=Object.create(ft.prototype),gt.prototype.constructor=gt,yt.prototype=Object.create(ft.prototype),yt.prototype.constructor=yt,vt.prototype=Object.create(ft.prototype),vt.prototype.constructor=vt,_t.prototype=Object.create(ft.prototype),_t.prototype.constructor=_t,bt.prototype=Object.create(ft.prototype),bt.prototype.constructor=bt,Tt.prototype=Object.create(ft.prototype),Tt.prototype.constructor=Tt,Et.prototype=Object.create(ft.prototype),Et.prototype.constructor=Et,Object.assign(xt.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,o=0;o<r.length;o++){var s=r[o];s.materialIndex!==n&&(n=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,o=t.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,l=t.morphTargets,h=l.length;if(h>0){e=[];for(var c=0;c<h;c++)e[c]=[];this.morphTargets.position=e}var u,p=t.morphNormals,f=p.length;if(f>0){u=[];for(var c=0;c<f;c++)u[c]=[];this.morphTargets.normal=u}for(var d=t.skinIndices,m=t.skinWeights,g=d.length===r.length,y=m.length===r.length,c=0;c<n.length;c++){var v=n[c];this.vertices.push(r[v.a],r[v.b],r[v.c]);var _=v.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=v.normal;this.normals.push(b,b,b)}var T=v.vertexColors;if(3===T.length)this.colors.push(T[0],T[1],T[2]);else{var E=v.color;this.colors.push(E,E,E)}if(s===!0){var x=o[0][c];void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new i,new i,new i))}if(a===!0){var x=o[1][c];void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new i,new i,new i))}for(var S=0;S<h;S++){var w=l[S].vertices;e[S].push(w[v.a],w[v.b],w[v.c])}for(var S=0;S<f;S++){var A=p[S].vertexNormals[c];u[S].push(A.a,A.b,A.c)}g&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),y&&this.skinWeights.push(m[v.a],m[v.b],m[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wh=0;At.prototype={constructor:At,isGeometry:!0,applyMatrix:function(t){for(var e=(new et).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){var r=this.vertices[i];r.applyMatrix4(t)}for(var i=0,n=this.faces.length;i<n;i++){var o=this.faces[i];o.normal.applyMatrix3(e).normalize();for(var s=0,a=o.vertexNormals.length;s<a;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new h),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new h),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new h),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new h),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new h),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new lt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,r){var o=void 0!==a?[p[t].clone(),p[e].clone(),p[i].clone()]:[],s=void 0!==h?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],l=new ut(t,e,i,o,s,r);n.faces.push(l),void 0!==c&&n.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[i].clone()]),void 0!==u&&n.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[i].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,a=void 0!==o.normal?o.normal.array:void 0,h=void 0!==o.color?o.color.array:void 0,c=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var p=[],f=[],d=[],m=0,g=0;m<s.length;m+=3,g+=2)n.vertices.push(new l(s[m],s[m+1],s[m+2])),void 0!==a&&p.push(new l(a[m],a[m+1],a[m+2])),void 0!==h&&n.colors.push(new W(h[m],h[m+1],h[m+2])),void 0!==c&&f.push(new i(c[g],c[g+1])),void 0!==u&&d.push(new i(u[g],u[g+1]));if(void 0!==r){var y=t.groups;if(y.length>0)for(var m=0;m<y.length;m++)for(var v=y[m],_=v.start,b=v.count,g=_,T=_+b;g<T;g+=3)e(r[g],r[g+1],r[g+2],v.materialIndex);else for(var m=0;m<r.length;m+=3)e(r[m],r[m+1],r[m+2])}else for(var m=0;m<s.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new h;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new l,e=new l,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],o=this.vertices[r.a],s=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,s),e.subVectors(o,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,i,n,r,o,s;for(s=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)s[e]=new l;if(t){var a,h,c,u=new l,p=new l;for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],a=this.vertices[o.a],h=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,h),p.subVectors(a,h),u.cross(p),s[o.a].add(u),s[o.b].add(u),s[o.c].add(u)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)o=this.faces[n],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,i=this.vertices.length;e<i;e++)s[e].normalize();for(n=0,r=this.faces.length;n<r;n++){o=this.faces[n];var f=o.vertexNormals;3===f.length?(f[0].copy(s[o.a]),f[1].copy(s[o.b]),f[2].copy(s[o.c])):(f[0]=s[o.a].clone(),f[1]=s[o.b].clone(),f[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){i=this.faces[t];var n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new At;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,a,h=this.morphNormals[t].faceNormals,c=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)s=new l,a={a:new l,b:new l,c:new l},h.push(s),c.push(a)}var u=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,a;for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],s=u.faceNormals[i],a=u.vertexNormals[i],s.copy(r.normal),a.a.copy(r.vertexNormals[0]),a.b.copy(r.vertexNormals[1]),a.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;i<n;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new J),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new tt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if((t&&t.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var n,r=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,l=t.faces,h=this.faceVertexUvs[0],c=t.faceVertexUvs[0],u=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new et).getNormalMatrix(e));for(var f=0,d=s.length;f<d;f++){var m=s[f],g=m.clone();void 0!==e&&g.applyMatrix4(e),o.push(g)}for(var f=0,d=p.length;f<d;f++)u.push(p[f].clone());for(f=0,d=l.length;f<d;f++){var y,v,_,b=l[f],T=b.vertexNormals,E=b.vertexColors;y=new ut(b.a+r,b.b+r,b.c+r),y.normal.copy(b.normal),void 0!==n&&y.normal.applyMatrix3(n).normalize();for(var x=0,S=T.length;x<S;x++)v=T[x].clone(),void 0!==n&&v.applyMatrix3(n).normalize(),y.vertexNormals.push(v);y.color.copy(b.color);for(var x=0,S=E.length;x<S;x++)_=E[x],y.vertexColors.push(_.clone());y.materialIndex=b.materialIndex+i,a.push(y)}for(f=0,d=c.length;f<d;f++){var w=c[f],A=[];if(void 0!==w){for(var x=0,S=w.length;x<S;x++)A.push(w[x].clone());h.push(A)}}},mergeMesh:function(t){return(t&&t.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),
void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,n,r,o,s,a,l={},h=[],c=[],u=4,p=Math.pow(10,u);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===l[e]?(l[e]=i,h.push(this.vertices[i]),c[i]=h.length-1):c[i]=c[l[e]];var f=[];for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var m=f[i];for(this.faces.splice(m,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(m,1)}var g=this.vertices.length-h.length;return this.vertices=h,g},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;n<i;n++)e[n]._id=n;e.sort(t);var r,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===i&&(r=[]),a&&a.length===i&&(o=[]);for(var n=0;n<i;n++){var l=e[n]._id;r&&r.push(s[l]),o&&o.push(a[l])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=u.length/3,u.push(t.x,t.y,t.z),p[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=f.length,f.push(t.getHex()),d[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(r[s]=o[s]);return r}for(var a=[],l=0;l<this.vertices.length;l++){var h=this.vertices[l];a.push(h.x,h.y,h.z)}for(var c=[],u=[],p={},f=[],d={},m=[],g={},l=0;l<this.faces.length;l++){var y=this.faces[l],v=!0,_=!1,b=void 0!==this.faceVertexUvs[0][l],T=y.normal.length()>0,E=y.vertexNormals.length>0,x=1!==y.color.r||1!==y.color.g||1!==y.color.b,S=y.vertexColors.length>0,w=0;if(w=t(w,0,0),w=t(w,1,v),w=t(w,2,_),w=t(w,3,b),w=t(w,4,T),w=t(w,5,E),w=t(w,6,x),w=t(w,7,S),c.push(w),c.push(y.a,y.b,y.c),c.push(y.materialIndex),b){var A=this.faceVertexUvs[0][l];c.push(n(A[0]),n(A[1]),n(A[2]))}if(T&&c.push(e(y.normal)),E){var M=y.vertexNormals;c.push(e(M[0]),e(M[1]),e(M[2]))}if(x&&c.push(i(y.color)),S){var P=y.vertexColors;c.push(i(P[0]),i(P[1]),i(P[2]))}}return r.data={},r.data.vertices=a,r.data.normals=u,f.length>0&&(r.data.colors=f),m.length>0&&(r.data.uvs=[m]),r.data.faces=c,r},clone:function(){return(new At).copy(this)},copy:function(t){var e,i,n,r,o,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var a=t.vertices;for(e=0,i=a.length;e<i;e++)this.vertices.push(a[e].clone());var l=t.colors;for(e=0,i=l.length;e<i;e++)this.colors.push(l[e].clone());var h=t.faces;for(e=0,i=h.length;e<i;e++)this.faces.push(h[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,r=c.length;n<r;n++){var u=c[n],p=[];for(o=0,s=u.length;o<s;o++){var f=u[o];p.push(f.clone())}this.faceVertexUvs[e].push(p)}}var d=t.morphTargets;for(e=0,i=d.length;e<i;e++){var m={};if(m.name=d[e].name,void 0!==d[e].vertices)for(m.vertices=[],n=0,r=d[e].vertices.length;n<r;n++)m.vertices.push(d[e].vertices[n].clone());if(void 0!==d[e].normals)for(m.normals=[],n=0,r=d[e].normals.length;n<r;n++)m.normals.push(d[e].normals[n].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,i=g.length;e<i;e++){var y={};if(void 0!==g[e].vertexNormals)for(y.vertexNormals=[],n=0,r=g[e].vertexNormals.length;n<r;n++){var v=g[e].vertexNormals[n],_={};_.a=v.a.clone(),_.b=v.b.clone(),_.c=v.c.clone(),y.vertexNormals.push(_)}if(void 0!==g[e].faceNormals)for(y.faceNormals=[],n=0,r=g[e].faceNormals.length;n<r;n++)y.faceNormals.push(g[e].faceNormals[n].clone());this.morphNormals.push(y)}var b=t.skinWeights;for(e=0,i=b.length;e<i;e++)this.skinWeights.push(b[e].clone());var T=t.skinIndices;for(e=0,i=T.length;e<i;e++)this.skinIndices.push(T[e].clone());var E=t.lineDistances;for(e=0,i=E.length;e<i;e++)this.lineDistances.push(E[e]);var x=t.boundingBox;null!==x&&(this.boundingBox=x.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(At.prototype,e.prototype),Mt.prototype={constructor:Mt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(St(t)>65535?bt:vt)(t,1):this.index=t},addAttribute:function(t,e){return(e&&e.isBufferAttribute)===!1&&(e&&e.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new ft(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var n=(new et).getNormalMatrix(t);n.applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new h),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new h),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new h),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new h),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new h),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new lt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new Tt(3*e.vertices.length,3),n=new Tt(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Tt(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}var n;return e.verticesNeedUpdate===!0&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new xt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new ft(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new ft(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new ft(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new ft(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new ft(o,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=St(t.indices)>65535?Uint32Array:Uint16Array,a=new s(3*t.indices.length);this.setIndex(new ft(a,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var l in t.morphTargets){for(var h=[],c=t.morphTargets[l],u=0,p=c.length;u<p;u++){var f=c[u],d=new Tt(3*f.length,3);h.push(d.copyVector3sArray(f))}this.morphAttributes[l]=h}if(t.skinIndices.length>0){var m=new Tt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new Tt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new J);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new J,e=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new tt);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(n);for(var r=0,o=0,s=i.count;o<s;o++)e.x=i.getX(o),e.y=i.getY(o),e.z=i.getZ(o),r=Math.max(r,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new ft(new Float32Array(n.length),3));else for(var r=e.normal.array,o=0,s=r.length;o<s;o++)r[o]=0;var a,h,c,u=e.normal.array,p=new l,f=new l,d=new l,m=new l,g=new l;if(t){var y=t.array;0===i.length&&this.addGroup(0,y.length);for(var v=0,_=i.length;v<_;++v)for(var b=i[v],T=b.start,E=b.count,o=T,s=T+E;o<s;o+=3)a=3*y[o+0],h=3*y[o+1],c=3*y[o+2],p.fromArray(n,a),f.fromArray(n,h),d.fromArray(n,c),m.subVectors(d,f),g.subVectors(p,f),m.cross(g),u[a]+=m.x,u[a+1]+=m.y,u[a+2]+=m.z,u[h]+=m.x,u[h+1]+=m.y,u[h+2]+=m.z,u[c]+=m.x,u[c+1]+=m.y,u[c+2]+=m.z}else for(var o=0,s=n.length;o<s;o+=9)p.fromArray(n,o),f.fromArray(n,o+3),d.fromArray(n,o+6),m.subVectors(d,f),g.subVectors(p,f),m.cross(g),u[o]=m.x,u[o+1]=m.y,u[o+2]=m.z,u[o+3]=m.x,u[o+4]=m.y,u[o+5]=m.z,u[o+6]=m.x,u[o+7]=m.y,u[o+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if((t&&t.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],o=r.array,s=t.attributes[n],a=s.array,l=s.itemSize,h=0,c=l*e;h<a.length;h++,c++)o[c]=a[h];return this},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,o=0,s=r.length;o<s;o+=3)t=r[o],e=r[o+1],i=r[o+2],n=1/Math.sqrt(t*t+e*e+i*i),r[o]*=n,r[o+1]*=n,r[o+2]*=n},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Mt,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],o=r.array,s=r.itemSize,a=new o.constructor(e.length*s),l=0,h=0,c=0,u=e.length;c<u;c++){l=e[c]*s;for(var p=0;p<s;p++)a[h++]=o[l++]}t.addAttribute(n,new ft(a,s))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var o=this.attributes;for(var i in o){var s=o[i],r=Array.prototype.slice.call(s.array);t.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:r,normalized:s.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return(new Mt).copy(this)},copy:function(t){var e,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var s=o[e];this.addAttribute(e,s.clone())}var a=t.morphAttributes;for(e in a){var l=[],h=a[e];for(i=0,n=h.length;i<n;i++)l.push(h[i].clone());this.morphAttributes[e]=l}var c=t.groups;for(i=0,n=c.length;i<n;i++){var u=c[i];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var f=t.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Mt.MaxIndex=65535,Object.assign(Mt.prototype,e.prototype),Pt.prototype=Object.assign(Object.create(lt.prototype),{constructor:Pt,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return lt.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,i,n,r,o,s){return ct.barycoordFromPoint(t,e,i,n,v),r.multiplyScalar(v.x),o.multiplyScalar(v.y),s.multiplyScalar(v.z),r.add(o).add(s),r.clone()}function e(t,e,i,n,r,o,s){var a,l=t.material;if(a=l.side===oo?i.intersectTriangle(o,r,n,!0,s):i.intersectTriangle(n,r,o,l.side!==so,s),null===a)return null;b.copy(s),b.applyMatrix4(t.matrixWorld);var h=e.ray.origin.distanceTo(b);return h<e.near||h>e.far?null:{distance:h,point:b.clone(),object:t}}function n(i,n,r,o,s,l,h,p){a.fromBufferAttribute(o,l),c.fromBufferAttribute(o,h),u.fromBufferAttribute(o,p);var f=e(i,n,r,a,c,u,_);return f&&(s&&(m.fromBufferAttribute(s,l),g.fromBufferAttribute(s,h),y.fromBufferAttribute(s,p),f.uv=t(_,a,c,u,m,g,y)),f.face=new ut(l,h,p,ct.normal(a,c,u)),f.faceIndex=l),f}var r=new h,o=new ot,s=new tt,a=new l,c=new l,u=new l,p=new l,f=new l,d=new l,m=new i,g=new i,y=new i,v=new l,_=new l,b=new l;return function(i,l){var h=this.geometry,v=this.material,b=this.matrixWorld;if(void 0!==v&&(null===h.boundingSphere&&h.computeBoundingSphere(),s.copy(h.boundingSphere),s.applyMatrix4(b),i.ray.intersectsSphere(s)!==!1&&(r.getInverse(b),o.copy(i.ray).applyMatrix4(r),null===h.boundingBox||o.intersectsBox(h.boundingBox)!==!1))){var T;if(h.isBufferGeometry){var E,x,S,w,A,M=h.index,P=h.attributes.position,C=h.attributes.uv;if(null!==M)for(w=0,A=M.count;w<A;w+=3)E=M.getX(w),x=M.getX(w+1),S=M.getX(w+2),T=n(this,i,o,P,C,E,x,S),T&&(T.faceIndex=Math.floor(w/3),l.push(T));else for(w=0,A=P.count;w<A;w+=3)E=w,x=w+1,S=w+2,T=n(this,i,o,P,C,E,x,S),T&&(T.index=E,l.push(T))}else if(h.isGeometry){var R,I,O,N,L=v&&v.isMultiMaterial,D=L===!0?v.materials:null,k=h.vertices,B=h.faces,G=h.faceVertexUvs[0];G.length>0&&(N=G);for(var F=0,V=B.length;F<V;F++){var U=B[F],H=L===!0?D[U.materialIndex]:v;if(void 0!==H){if(R=k[U.a],I=k[U.b],O=k[U.c],H.morphTargets===!0){var j=h.morphTargets,z=this.morphTargetInfluences;a.set(0,0,0),c.set(0,0,0),u.set(0,0,0);for(var W=0,X=j.length;W<X;W++){var Y=z[W];if(0!==Y){var q=j[W].vertices;a.addScaledVector(p.subVectors(q[U.a],R),Y),c.addScaledVector(f.subVectors(q[U.b],I),Y),u.addScaledVector(d.subVectors(q[U.c],O),Y)}}a.add(R),c.add(I),u.add(O),R=a,I=c,O=u}if(T=e(this,i,o,R,I,O,_)){if(N){var Z=N[F];m.copy(Z[0]),g.copy(Z[1]),y.copy(Z[2]),T.uv=t(_,R,I,O,m,g,y)}T.face=U,T.faceIndex=F,l.push(T)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ct.prototype=Object.create(At.prototype),Ct.prototype.constructor=Ct,Rt.prototype=Object.create(Mt.prototype),Rt.prototype.constructor=Rt,It.prototype=Object.create(At.prototype),It.prototype.constructor=It,Ot.prototype=Object.create(Mt.prototype),Ot.prototype.constructor=Ot,Nt.prototype=Object.create(lt.prototype),Nt.prototype.constructor=Nt,Nt.prototype.isCamera=!0,Nt.prototype.getWorldDirection=function(){var t=new a;return function(e){var i=e||new l;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),Nt.prototype.lookAt=function(){var t=new h;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Nt.prototype.clone=function(){return(new this.constructor).copy(this)},Nt.prototype.copy=function(t){return lt.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Lt.prototype=Object.assign(Object.create(Nt.prototype),{constructor:Lt,isPerspectiveCamera:!0,copy:function(t){return Nt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*ua.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ua.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ua.RAD2DEG*Math.atan(Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,o){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==o){var s=o.fullWidth,a=o.fullHeight;r+=o.offsetX*n/s,e-=o.offsetY*i/a,n*=o.width/s,i*=o.height/a}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far)},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Dt.prototype=Object.assign(Object.create(Nt.prototype),{constructor:Dt,isOrthographicCamera:!0,copy:function(t){return Nt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,o){this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,o=i+t,s=n+e,a=n-e;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/l),o=r+c*(this.view.width/l),s-=u*(this.view.offsetY/h),a=s-u*(this.view.height/h)}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far)},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var Ah=0;he.prototype.isFogExp2=!0,he.prototype.clone=function(){return new he(this.color.getHex(),this.density)},he.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ce.prototype.isFog=!0,ce.prototype.clone=function(){return new ce(this.color.getHex(),this.near,this.far)},ce.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ue.prototype=Object.create(lt.prototype),ue.prototype.constructor=ue,ue.prototype.copy=function(t,e){return lt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},ue.prototype.toJSON=function(t){var e=lt.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},pe.prototype=Object.assign(Object.create(lt.prototype),{constructor:pe,isLensFlare:!0,copy:function(t){lt.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,i=t.lensFlares.length;e<i;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,i,n,r,o){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===r&&(r=new W(16777215)),void 0===n&&(n=fo),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:r,blending:n})},updateLensFlares:function(){var t,e,i=this.lensFlares.length,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<i;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),fe.prototype=Object.create(K.prototype),fe.prototype.constructor=fe,fe.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},de.prototype=Object.assign(Object.create(lt.prototype),{constructor:de,isSprite:!0,raycast:function(){var t=new l;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t),r=this.scale.x*this.scale.y/4;n>r||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),me.prototype=Object.assign(Object.create(lt.prototype),{constructor:me,copy:function(t){lt.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;i<n;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(){var t=new l;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),update:function(){var t=new l,e=new l;return function(i){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);n[0].object.visible=!0;for(var o=1,s=n.length;o<s&&r>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<s;o++)n[o].object.visible=!1}}}(),toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var o=i[n];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(ge.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new h;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){for(var t,e=0,i=this.bones.length;e<i;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,i=this.bones.length;e<i;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new h;return function(){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(n,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ge(this.bones,this.boneInverses,this.useVertexTexture)}}),ye.prototype=Object.assign(Object.create(lt.prototype),{constructor:ye,isBone:!0}),ve.prototype=Object.assign(Object.create(Pt.prototype),{constructor:ve,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],i=1/e.lengthManhattan();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var n=new r,o=this.geometry.attributes.skinWeight,t=0;t<o.count;t++){n.x=o.getX(t),n.y=o.getY(t),n.z=o.getZ(t),n.w=o.getW(t);var i=1/n.lengthManhattan();i!==1/0?n.multiplyScalar(i):n.set(1,0,0,0),o.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){Pt.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_e.prototype=Object.create(K.prototype),_e.prototype.constructor=_e,_e.prototype.isLineBasicMaterial=!0,_e.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},be.prototype=Object.assign(Object.create(lt.prototype),{constructor:be,isLine:!0,raycast:function(){var t=new h,e=new ot,i=new tt;return function(n,r){var o=n.linePrecision,s=o*o,a=this.geometry,h=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(h),n.ray.intersectsSphere(i)!==!1){t.getInverse(h),e.copy(n.ray).applyMatrix4(t);var c=new l,u=new l,p=new l,f=new l,d=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,g=a.attributes,y=g.position.array;if(null!==m)for(var v=m.array,_=0,b=v.length-1;_<b;_+=d){var T=v[_],E=v[_+1];c.fromArray(y,3*T),u.fromArray(y,3*E);var x=e.distanceSqToSegment(c,u,f,p);if(!(x>s)){f.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(f);S<n.near||S>n.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=y.length/3-1;_<b;_+=d){c.fromArray(y,3*_),u.fromArray(y,3*_+3);var x=e.distanceSqToSegment(c,u,f,p);if(!(x>s)){f.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(f);S<n.near||S>n.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(a.isGeometry)for(var w=a.vertices,A=w.length,_=0;_<A-1;_+=d){var x=e.distanceSqToSegment(w[_],w[_+1],f,p);if(!(x>s)){f.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(f);S<n.near||S>n.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Te.prototype=Object.assign(Object.create(be.prototype),{constructor:Te,isLineSegments:!0}),Ee.prototype=Object.create(K.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isPointsMaterial=!0,Ee.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},xe.prototype=Object.assign(Object.create(lt.prototype),{constructor:xe,isPoints:!0,raycast:function(){var t=new h,e=new ot,i=new tt;return function(n,r){function o(t,i){var o=e.distanceSqToPoint(t);if(o<p){var a=e.closestPointToPoint(t);a.applyMatrix4(h);var l=n.ray.origin.distanceTo(a);if(l<n.near||l>n.far)return;r.push({distance:l,distanceToRay:Math.sqrt(o),point:a.clone(),index:i,face:null,object:s})}}var s=this,a=this.geometry,h=this.matrixWorld,c=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(h),n.ray.intersectsSphere(i)!==!1){t.getInverse(h),e.copy(n.ray).applyMatrix4(t);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3),p=u*u,f=new l;if(a.isBufferGeometry){var d=a.index,m=a.attributes,g=m.position.array;if(null!==d)for(var y=d.array,v=0,_=y.length;v<_;v++){var b=y[v];f.fromArray(g,3*b),o(f,b)}else for(var v=0,T=g.length/3;v<T;v++)f.fromArray(g,3*v),o(f,v)}else for(var E=a.vertices,v=0,T=E.length;v<T;v++)o(E[v],v)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Se.prototype=Object.assign(Object.create(lt.prototype),{constructor:Se}),we.prototype=Object.create(n.prototype),we.prototype.constructor=we,Ae.prototype=Object.create(n.prototype),Ae.prototype.constructor=Ae,Ae.prototype.isCompressedTexture=!0,Me.prototype=Object.create(n.prototype),Me.prototype.constructor=Me,
Pe.prototype=Object.create(n.prototype),Pe.prototype.constructor=Pe,Pe.prototype.isDepthTexture=!0,Ce.prototype=Object.create(Mt.prototype),Ce.prototype.constructor=Ce,Re.prototype=Object.create(At.prototype),Re.prototype.constructor=Re,Ie.prototype=Object.create(Mt.prototype),Ie.prototype.constructor=Ie,Oe.prototype=Object.create(At.prototype),Oe.prototype.constructor=Oe,Ne.prototype=Object.create(Mt.prototype),Ne.prototype.constructor=Ne,Le.prototype=Object.create(At.prototype),Le.prototype.constructor=Le,De.prototype=Object.create(Ne.prototype),De.prototype.constructor=De,ke.prototype=Object.create(At.prototype),ke.prototype.constructor=ke,Be.prototype=Object.create(Ne.prototype),Be.prototype.constructor=Be,Ge.prototype=Object.create(At.prototype),Ge.prototype.constructor=Ge,Fe.prototype=Object.create(Ne.prototype),Fe.prototype.constructor=Fe,Ve.prototype=Object.create(At.prototype),Ve.prototype.constructor=Ve,Ue.prototype=Object.create(Ne.prototype),Ue.prototype.constructor=Ue,He.prototype=Object.create(At.prototype),He.prototype.constructor=He,je.prototype=Object.create(Mt.prototype),je.prototype.constructor=je,ze.prototype=Object.create(At.prototype),ze.prototype.constructor=ze,We.prototype=Object.create(Mt.prototype),We.prototype.constructor=We,Xe.prototype=Object.create(At.prototype),Xe.prototype.constructor=Xe,Ye.prototype=Object.create(Mt.prototype),Ye.prototype.constructor=Ye;var Mh={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,o){var s,a,l,h,c,u,p,f,d;if(a=t[o[e]].x,l=t[o[e]].y,h=t[o[i]].x,c=t[o[i]].y,u=t[o[n]].x,p=t[o[n]].y,(h-a)*(p-l)-(c-l)*(u-a)<=0)return!1;var m,g,y,v,_,b,T,E,x,S,w,A,M,P,C;for(m=u-h,g=p-c,y=a-u,v=l-p,_=h-a,b=c-l,s=0;s<r;s++)if(f=t[o[s]].x,d=t[o[s]].y,!(f===a&&d===l||f===h&&d===c||f===u&&d===p)&&(T=f-a,E=d-l,x=f-h,S=d-c,w=f-u,A=d-p,C=m*S-g*x,M=_*E-b*T,P=y*A-v*w,C>=-Number.EPSILON&&P>=-Number.EPSILON&&M>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(n<3)return null;var r,o,s,a=[],l=[],h=[];if(Mh.area(e)>0)for(o=0;o<n;o++)l[o]=o;else for(o=0;o<n;o++)l[o]=n-1-o;var c=n,u=2*c;for(o=c-1;c>2;){if(u--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?h:a;if(r=o,c<=r&&(r=0),o=r+1,c<=o&&(o=0),s=o+1,c<=s&&(s=0),t(e,r,o,s,c,l)){var p,f,d,m,g;for(p=l[r],f=l[o],d=l[s],a.push([e[p],e[f],e[d]]),h.push([l[r],l[o],l[s]]),m=o,g=o+1;g<c;m++,g++)l[m]=l[g];c--,u=2*c}}return i?h:a}}(),triangulateShape:function(t,e){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,o){var s=e.x-t.x,a=e.y-t.y,l=r.x-i.x,h=r.y-i.y,c=t.x-i.x,u=t.y-i.y,p=a*l-s*h,f=a*c-s*u;if(Math.abs(p)>Number.EPSILON){var d;if(p>0){if(f<0||f>p)return[];if(d=h*c-l*u,d<0||d>p)return[]}else{if(f>0||f<p)return[];if(d=h*c-l*u,d>0||d<p)return[]}if(0===d)return!o||0!==f&&f!==p?[t]:[];if(d===p)return!o||0!==f&&f!==p?[e]:[];if(0===f)return[i];if(f===p)return[r];var m=d/p;return[{x:t.x+m*s,y:t.y+m*a}]}if(0!==f||h*c!==l*u)return[];var g=0===s&&0===a,y=0===l&&0===h;if(g&&y)return t.x!==i.x||t.y!==i.y?[]:[t];if(g)return n(i,r,t)?[t]:[];if(y)return n(t,e,i)?[i]:[];var v,_,b,T,E,x,S,w;return 0!==s?(t.x<e.x?(v=t,b=t.x,_=e,T=e.x):(v=e,b=e.x,_=t,T=t.x),i.x<r.x?(E=i,S=i.x,x=r,w=r.x):(E=r,S=r.x,x=i,w=i.x)):(t.y<e.y?(v=t,b=t.y,_=e,T=e.y):(v=e,b=e.y,_=t,T=t.y),i.y<r.y?(E=i,S=i.y,x=r,w=r.y):(E=r,S=r.y,x=i,w=i.y)),b<=S?T<S?[]:T===S?o?[]:[E]:T<=w?[E,_]:[E,x]:b>w?[]:b===w?o?[]:[v]:T<=w?[v,_]:[v,x]}function o(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,s=i.x-t.x,a=i.y-t.y,l=n.x-t.x,h=n.y-t.y,c=r*a-o*s,u=r*h-o*l;if(Math.abs(c)>Number.EPSILON){var p=l*a-h*s;return c>0?u>=0&&p>=0:u>=0||p>=0}return u>0}function s(t,e){function i(t,e){var i=v.length-1,n=t-1;n<0&&(n=i);var r=t+1;r>i&&(r=0);var s=o(v[t],v[n],v[r],a[e]);if(!s)return!1;var l=a.length-1,h=e-1;h<0&&(h=l);var c=e+1;return c>l&&(c=0),s=o(a[e],a[h],a[c],v[t]),!!s}function n(t,e){var i,n,o;for(i=0;i<v.length;i++)if(n=i+1,n%=v.length,o=r(t,e,v[i],v[n],!0),o.length>0)return!0;return!1}function s(t,i){var n,o,s,a,l;for(n=0;n<_.length;n++)for(o=e[_[n]],s=0;s<o.length;s++)if(a=s+1,a%=o.length,l=r(t,i,o[s],o[a],!0),l.length>0)return!0;return!1}for(var a,l,h,c,u,p,f,d,m,g,y,v=t.concat(),_=[],b=[],T=0,E=e.length;T<E;T++)_.push(T);for(var x=0,S=2*_.length;_.length>0;){if(S--,S<0){console.log("Infinite Loop! Holes left:"+_.length+", Probably Hole outside Shape!");break}for(h=x;h<v.length;h++){c=v[h],l=-1;for(var T=0;T<_.length;T++)if(p=_[T],f=c.x+":"+c.y+":"+p,void 0===b[f]){a=e[p];for(var w=0;w<a.length;w++)if(u=a[w],i(h,w)&&!n(c,u)&&!s(c,u)){l=w,_.splice(T,1),d=v.slice(0,h+1),m=v.slice(h),g=a.slice(l),y=a.slice(0,l+1),v=d.concat(g).concat(y).concat(m),x=h;break}if(l>=0)break;b[f]=!0}if(l>=0)break}}return v}i(t),e.forEach(i);for(var a,l,h,c,u,p,f={},d=t.concat(),m=0,g=e.length;m<g;m++)Array.prototype.push.apply(d,e[m]);for(a=0,l=d.length;a<l;a++)u=d[a].x+":"+d[a].y,void 0!==f[u]&&console.warn("THREE.ShapeUtils: Duplicate point",u,a),f[u]=a;var y=s(t,e),v=Mh.triangulate(y,!1);for(a=0,l=v.length;a<l;a++)for(c=v[a],h=0;h<3;h++)u=c[h].x+":"+c[h].y,p=f[u],void 0!==p&&(c[h]=p);return v.concat()},isClockWise:function(t){return Mh.area(t)<0}};qe.prototype=Object.create(At.prototype),qe.prototype.constructor=qe,qe.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];this.addShape(r,e)}},qe.prototype.addShape=function(t,e){function n(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function r(t,e,n){var r,o,s=1,a=t.x-e.x,l=t.y-e.y,h=n.x-t.x,c=n.y-t.y,u=a*a+l*l,p=a*c-l*h;if(Math.abs(p)>Number.EPSILON){var f=Math.sqrt(u),d=Math.sqrt(h*h+c*c),m=e.x-l/f,g=e.y+a/f,y=n.x-c/d,v=n.y+h/d,_=((y-m)*c-(v-g)*h)/(a*c-l*h);r=m+a*_-t.x,o=g+l*_-t.y;var b=r*r+o*o;if(b<=2)return new i(r,o);s=Math.sqrt(b/2)}else{var T=!1;a>Number.EPSILON?h>Number.EPSILON&&(T=!0):a<-Number.EPSILON?h<-Number.EPSILON&&(T=!0):Math.sign(l)===Math.sign(c)&&(T=!0),T?(r=-l,o=a,s=Math.sqrt(u)):(r=a,o=l,s=Math.sqrt(u/2))}return new i(r/s,o/s)}function o(){if(T){var t=0,e=z*t;for(Y=0;Y<W;Y++)j=k[Y],c(j[2]+e,j[1]+e,j[0]+e);for(t=x+2*b,e=z*t,Y=0;Y<W;Y++)j=k[Y],c(j[0]+e,j[1]+e,j[2]+e)}else{for(Y=0;Y<W;Y++)j=k[Y],c(j[2],j[1],j[0]);for(Y=0;Y<W;Y++)j=k[Y],c(j[0]+z*x,j[1]+z*x,j[2]+z*x)}}function s(){var t=0;for(a(B,t),t+=B.length,P=0,C=L.length;P<C;P++)M=L[P],a(M,t),t+=M.length}function a(t,e){var i,n;for(Y=t.length;--Y>=0;){i=Y,n=Y-1,n<0&&(n=t.length-1);var r=0,o=x+2*b;for(r=0;r<o;r++){var s=z*r,a=z*(r+1),l=e+i+s,h=e+n+s,c=e+n+a,p=e+i+a;u(l,h,c,p,t,r,o,i,n)}}}function h(t,e,i){R.vertices.push(new l(t,e,i))}function c(t,e,i){t+=I,e+=I,i+=I,R.faces.push(new ut(t,e,i,null,null,0));var n=A.generateTopUV(R,t,e,i);R.faceVertexUvs[0].push(n)}function u(t,e,i,n,r,o,s,a,l){t+=I,e+=I,i+=I,n+=I,R.faces.push(new ut(t,e,n,null,null,1)),R.faces.push(new ut(e,i,n,null,null,1));var h=A.generateSideWallUV(R,t,e,i,n);R.faceVertexUvs[0].push([h[0],h[1],h[3]]),R.faceVertexUvs[0].push([h[1],h[2],h[3]])}var p,f,d,m,g,y=void 0!==e.amount?e.amount:100,v=void 0!==e.bevelThickness?e.bevelThickness:6,_=void 0!==e.bevelSize?e.bevelSize:v-2,b=void 0!==e.bevelSegments?e.bevelSegments:3,T=void 0===e.bevelEnabled||e.bevelEnabled,E=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,S=e.extrudePath,w=!1,A=void 0!==e.UVGenerator?e.UVGenerator:qe.WorldUVGenerator;S&&(p=S.getSpacedPoints(x),w=!0,T=!1,f=void 0!==e.frames?e.frames:S.computeFrenetFrames(x,!1),d=new l,m=new l,g=new l),T||(b=0,v=0,_=0);var M,P,C,R=this,I=this.vertices.length,O=t.extractPoints(E),N=O.shape,L=O.holes,D=!Mh.isClockWise(N);if(D){for(N=N.reverse(),P=0,C=L.length;P<C;P++)M=L[P],Mh.isClockWise(M)&&(L[P]=M.reverse());D=!1}var k=Mh.triangulateShape(N,L),B=N;for(P=0,C=L.length;P<C;P++)M=L[P],N=N.concat(M);for(var G,F,V,U,H,j,z=N.length,W=k.length,X=[],Y=0,q=B.length,Z=q-1,K=Y+1;Y<q;Y++,Z++,K++)Z===q&&(Z=0),K===q&&(K=0),X[Y]=r(B[Y],B[Z],B[K]);var $,Q=[],J=X.concat();for(P=0,C=L.length;P<C;P++){for(M=L[P],$=[],Y=0,q=M.length,Z=q-1,K=Y+1;Y<q;Y++,Z++,K++)Z===q&&(Z=0),K===q&&(K=0),$[Y]=r(M[Y],M[Z],M[K]);Q.push($),J=J.concat($)}for(G=0;G<b;G++){for(V=G/b,U=v*Math.cos(V*Math.PI/2),F=_*Math.sin(V*Math.PI/2),Y=0,q=B.length;Y<q;Y++)H=n(B[Y],X[Y],F),h(H.x,H.y,-U);for(P=0,C=L.length;P<C;P++)for(M=L[P],$=Q[P],Y=0,q=M.length;Y<q;Y++)H=n(M[Y],$[Y],F),h(H.x,H.y,-U)}for(F=_,Y=0;Y<z;Y++)H=T?n(N[Y],J[Y],F):N[Y],w?(m.copy(f.normals[0]).multiplyScalar(H.x),d.copy(f.binormals[0]).multiplyScalar(H.y),g.copy(p[0]).add(m).add(d),h(g.x,g.y,g.z)):h(H.x,H.y,0);var tt;for(tt=1;tt<=x;tt++)for(Y=0;Y<z;Y++)H=T?n(N[Y],J[Y],F):N[Y],w?(m.copy(f.normals[tt]).multiplyScalar(H.x),d.copy(f.binormals[tt]).multiplyScalar(H.y),g.copy(p[tt]).add(m).add(d),h(g.x,g.y,g.z)):h(H.x,H.y,y/x*tt);for(G=b-1;G>=0;G--){for(V=G/b,U=v*Math.cos(V*Math.PI/2),F=_*Math.sin(V*Math.PI/2),Y=0,q=B.length;Y<q;Y++)H=n(B[Y],X[Y],F),h(H.x,H.y,y+U);for(P=0,C=L.length;P<C;P++)for(M=L[P],$=Q[P],Y=0,q=M.length;Y<q;Y++)H=n(M[Y],$[Y],F),w?h(H.x,H.y+p[x-1].y,p[x-1].x+U):h(H.x,H.y,y+U)}o(),s()},qe.WorldUVGenerator={generateTopUV:function(t,e,n,r){var o=t.vertices,s=o[e],a=o[n],l=o[r];return[new i(s.x,s.y),new i(a.x,a.y),new i(l.x,l.y)]},generateSideWallUV:function(t,e,n,r,o){var s=t.vertices,a=s[e],l=s[n],h=s[r],c=s[o];return Math.abs(a.y-l.y)<.01?[new i(a.x,1-a.z),new i(l.x,1-l.z),new i(h.x,1-h.z),new i(c.x,1-c.z)]:[new i(a.y,1-a.z),new i(l.y,1-l.z),new i(h.y,1-h.z),new i(c.y,1-c.z)]}},Ze.prototype=Object.create(qe.prototype),Ze.prototype.constructor=Ze,Ke.prototype=Object.create(At.prototype),Ke.prototype.constructor=Ke,$e.prototype=Object.create(Mt.prototype),$e.prototype.constructor=$e,Qe.prototype=Object.create(At.prototype),Qe.prototype.constructor=Qe,Je.prototype=Object.create(Mt.prototype),Je.prototype.constructor=Je,ti.prototype=Object.create(At.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Mt.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(At.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Mt.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(Mt.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(At.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(Mt.prototype),si.prototype.constructor=si,ai.prototype=Object.create(oi.prototype),ai.prototype.constructor=ai,li.prototype=Object.create(si.prototype),li.prototype.constructor=li,hi.prototype=Object.create(At.prototype),hi.prototype.constructor=hi,ci.prototype=Object.create(Mt.prototype),ci.prototype.constructor=ci;var Ph=Object.freeze({WireframeGeometry:Ce,ParametricGeometry:Re,ParametricBufferGeometry:Ie,TetrahedronGeometry:Le,TetrahedronBufferGeometry:De,OctahedronGeometry:ke,OctahedronBufferGeometry:Be,IcosahedronGeometry:Ge,IcosahedronBufferGeometry:Fe,DodecahedronGeometry:Ve,DodecahedronBufferGeometry:Ue,PolyhedronGeometry:Oe,PolyhedronBufferGeometry:Ne,TubeGeometry:He,TubeBufferGeometry:je,TorusKnotGeometry:ze,TorusKnotBufferGeometry:We,TorusGeometry:Xe,TorusBufferGeometry:Ye,TextGeometry:Ze,SphereGeometry:Ke,SphereBufferGeometry:$e,RingGeometry:Qe,RingBufferGeometry:Je,PlaneGeometry:It,PlaneBufferGeometry:Ot,LatheGeometry:ti,LatheBufferGeometry:ei,ShapeGeometry:ii,ShapeBufferGeometry:ni,ExtrudeGeometry:qe,EdgesGeometry:ri,ConeGeometry:ai,ConeBufferGeometry:li,CylinderGeometry:oi,CylinderBufferGeometry:si,CircleGeometry:hi,CircleBufferGeometry:ci,BoxGeometry:Ct,BoxBufferGeometry:Rt});ui.prototype=Object.create($.prototype),ui.prototype.constructor=ui,ui.prototype.isShadowMaterial=!0,pi.prototype=Object.create($.prototype),pi.prototype.constructor=pi,pi.prototype.isRawShaderMaterial=!0,fi.prototype={constructor:fi,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,n=0,r=i.length;n<r;n++){var o=i[n].toJSON(t);delete o.metadata,e.materials.push(o)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},di.prototype=Object.create(K.prototype),di.prototype.constructor=di,di.prototype.isMeshStandardMaterial=!0,di.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},mi.prototype=Object.create(di.prototype),mi.prototype.constructor=mi,mi.prototype.isMeshPhysicalMaterial=!0,mi.prototype.copy=function(t){return di.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},gi.prototype=Object.create(K.prototype),gi.prototype.constructor=gi,gi.prototype.isMeshPhongMaterial=!0,gi.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},yi.prototype=Object.create(gi.prototype),yi.prototype.constructor=yi,yi.prototype.isMeshToonMaterial=!0,yi.prototype.copy=function(t){return gi.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},vi.prototype=Object.create(K.prototype),vi.prototype.constructor=vi,vi.prototype.isMeshNormalMaterial=!0,vi.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_i.prototype=Object.create(K.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshLambertMaterial=!0,_i.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bi.prototype=Object.create(K.prototype),bi.prototype.constructor=bi,bi.prototype.isLineDashedMaterial=!0,bi.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ch=Object.freeze({ShadowMaterial:ui,SpriteMaterial:fe,RawShaderMaterial:pi,ShaderMaterial:$,PointsMaterial:Ee,MultiMaterial:fi,MeshPhysicalMaterial:mi,MeshStandardMaterial:di,MeshPhongMaterial:gi,MeshToonMaterial:yi,MeshNormalMaterial:vi,MeshLambertMaterial:_i,MeshDepthMaterial:Q,MeshBasicMaterial:pt,LineDashedMaterial:bi,LineBasicMaterial:_e,Material:K}),Rh={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Ih=new Ti;Object.assign(Ei.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=Rh.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var s=/^data:(.*?)(;base64)?,(.*)$/,a=t.match(s);if(a){var l=a[1],h=!!a[2],c=a[3];c=window.decodeURIComponent(c),h&&(c=window.atob(c));try{var u,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":u=new ArrayBuffer(c.length);for(var f=new Uint8Array(u),d=0;d<c.length;d++)f[d]=c.charCodeAt(d);"blob"===p&&(u=new Blob([u],{type:l}));break;case"document":var m=new DOMParser;u=m.parseFromString(c,l);break;case"json":u=JSON.parse(c);break;default:u=c}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(g){window.setTimeout(function(){n&&n(g),r.manager.itemError(t)},0)}}else{var y=new XMLHttpRequest;y.open("GET",t,!0),y.addEventListener("load",function(i){var o=i.target.response;Rh.add(t,o),200===this.status?(e&&e(o),r.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(o),r.manager.itemEnd(t)):(n&&n(i),r.manager.itemError(t))},!1),void 0!==i&&y.addEventListener("progress",function(t){i(t)},!1),y.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.responseType&&(y.responseType=this.responseType),void 0!==this.withCredentials&&(y.withCredentials=this.withCredentials),y.overrideMimeType&&y.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),y.send(null)}return r.manager.itemStart(t),y},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(xi.prototype,{load:function(t,e,i,n){function r(r){l.load(t[r],function(t){var i=o._parser(t,!0);s[r]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},h+=1,6===h&&(1===i.mipmapCount&&(a.minFilter=us),a.format=i.format,a.needsUpdate=!0,e&&e(a))},i,n)}var o=this,s=[],a=new Ae;a.image=s;var l=new Ei(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var h=0,c=0,u=t.length;c<u;++c)r(c);else l.load(t,function(t){var i=o._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,r=0;r<n;r++){s[r]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)s[r].mipmaps.push(i.mipmaps[r*i.mipmapCount+l]),s[r].format=i.format,s[r].width=i.width,s[r].height=i.height}else a.image.width=i.width,a.image.height=i.height,a.mipmaps=i.mipmaps;1===i.mipmapCount&&(a.minFilter=us),a.format=i.format,a.needsUpdate=!0,e&&e(a)},i,n);return a},setPath:function(t){return this.path=t,this}}),Object.assign(Si.prototype,{load:function(t,e,i,n){var r=this,o=new X,s=new Ei(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?o.image=i.image:void 0!==i.data&&(o.image.width=i.width,o.image.height=i.height,o.image.data=i.data),o.wrapS=void 0!==i.wrapS?i.wrapS:ss,o.wrapT=void 0!==i.wrapT?i.wrapT:ss,o.magFilter=void 0!==i.magFilter?i.magFilter:us,o.minFilter=void 0!==i.minFilter?i.minFilter:fs,o.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(o.format=i.format),void 0!==i.type&&(o.type=i.type),void 0!==i.mipmaps&&(o.mipmaps=i.mipmaps),1===i.mipmapCount&&(o.minFilter=us),o.needsUpdate=!0,e&&e(o,i))},i,n),o}}),Object.assign(wi.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=Rh.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Rh.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),s.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ai.prototype,{load:function(t,e,i,n){function r(i){s.load(t[i],function(t){o.images[i]=t,a++,6===a&&(o.needsUpdate=!0,e&&e(o))},void 0,n)}var o=new c,s=new wi(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var a=0,l=0;l<t.length;++l)r(l);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Mi.prototype,{load:function(t,e,i,r){var o=new n,s=new wi(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(i){var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);o.format=n?Ms:Ps,o.image=i,o.needsUpdate=!0,void 0!==e&&e(o)},i,r),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Pi.prototype=Object.assign(Object.create(lt.prototype),{constructor:Pi,isLight:!0,copy:function(t){return lt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=lt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Ci.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ci,isHemisphereLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ri.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ii.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Ii,isSpotLightShadow:!0,update:function(t){var e=2*ua.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,n=t.distance||500,r=this.camera;e===r.fov&&i===r.aspect&&n===r.far||(r.fov=e,r.aspect=i,r.far=n,r.updateProjectionMatrix())}}),Oi.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Oi,isSpotLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ni.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ni,isPointLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Li.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Li}),Di.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Di,isDirectionalLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ki.prototype=Object.assign(Object.create(Pi.prototype),{constructor:ki,isAmbientLight:!0});var Oh={arraySlice:function(t,e,i){return Oh.isTypedArray(t)?new t.constructor(t.subarray(e,i)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=r;return n.sort(e),n},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),o=0,s=0;s!==n;++o)for(var a=i[o]*e,l=0;l!==e;++l)r[s++]=t[a+l];return r},flattenJSON:function(t,e,i,n){for(var r=1,o=t[0];void 0!==o&&void 0===o[n];)o=t[r++];if(void 0!==o){var s=o[n];if(void 0!==s)if(Array.isArray(s)){do s=o[n],void 0!==s&&(e.push(o.time),i.push.apply(i,s)),o=t[r++];while(void 0!==o)}else if(void 0!==s.toArray){do s=o[n],void 0!==s&&(e.push(o.time),s.toArray(i,i.length)),o=t[r++];while(void 0!==o)}else do s=o[n],void 0!==s&&(e.push(o.time),i.push(s)),o=t[r++];while(void 0!==o)}}};Bi.prototype={constructor:Bi,evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var o;i:{n:if(!(t<n)){for(var s=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===s)break;if(r=n,n=e[++i],t<n)break e}o=e.length;break i}{if(t>=r)break t;var a=e[1];t<a&&(i=2,r=a);for(var s=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===s)break;if(n=r,r=e[--i-1],t>=r)break e}o=i,i=0}}for(;i<o;){var l=i+o>>>1;t<e[l]?o=l:i=l+1}if(n=e[i],r=e[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,o=0;o!==n;++o)e[o]=i[r+o];return e},interpolate_:function(t,e,i,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,i){}},Object.assign(Bi.prototype,{beforeStart_:Bi.prototype.copySampleValue_,afterEnd_:Bi.prototype.copySampleValue_}),Gi.prototype=Object.assign(Object.create(Bi.prototype),{constructor:Gi,DefaultSettings_:{endingStart:Zs,endingEnd:Zs},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,o=t+1,s=n[r],a=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case Ks:r=t,s=2*e-i;break;case $s:r=n.length-2,s=e+n[r]-n[r+1];break;default:r=t,s=i}if(void 0===a)switch(this.getSettings_().endingEnd){case Ks:o=t,a=2*i-e;break;case $s:o=1,a=i+n[1]-n[0];break;default:o=t-1,a=e}var l=.5*(i-e),h=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-i),this._offsetPrev=r*h,this._offsetNext=o*h},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,p=this._weightNext,f=(i-e)/(n-e),d=f*f,m=d*f,g=-u*m+2*u*d-u*f,y=(1+u)*m+(-1.5-2*u)*d+(-.5+u)*f+1,v=(-1-p)*m+(1.5+p)*d+.5*f,_=p*m-p*d,b=0;b!==s;++b)r[b]=g*o[h+b]+y*o[l+b]+v*o[a+b]+_*o[c+b];return r}}),Fi.prototype=Object.assign(Object.create(Bi.prototype),{constructor:Fi,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,h=(i-e)/(n-e),c=1-h,u=0;u!==s;++u)r[u]=o[l+u]*c+o[a+u]*h;return r}}),Vi.prototype=Object.assign(Object.create(Bi.prototype),{constructor:Vi,interpolate_:function(t,e,i,n){return this.copySampleValue_(t-1)}});var Nh;Nh={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ys,InterpolantFactoryMethodDiscrete:function(t){return new Vi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Fi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Gi(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Xs:e=this.InterpolantFactoryMethodDiscrete;break;case Ys:e=this.InterpolantFactoryMethodLinear;break;case qs:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(i)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xs;case this.InterpolantFactoryMethodLinear:return Ys;case this.InterpolantFactoryMethodSmooth:return qs}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<t;)++r;for(;o!==-1&&i[o]>e;)--o;if(++o,0!==r||o!==n){r>=o&&(o=Math.max(o,1),r=o-1);var s=this.getValueSize();this.times=Oh.arraySlice(i,r,o),this.values=Oh.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(console.error("track is empty",this),t=!1);for(var o=null,s=0;s!==r;s++){var a=i[s];if("number"==typeof a&&isNaN(a)){console.error("time is not a valid number",this,s,a),t=!1;break}if(null!==o&&o>a){console.error("out of order keys",this,s,a,o),t=!1;break}o=a}if(void 0!==n&&Oh.isTypedArray(n))for(var s=0,l=n.length;s!==l;++s){var h=n[s];if(isNaN(h)){console.error("value is not a valid number",this,s,h),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=this.getInterpolation()===qs,r=1,o=t.length-1,s=1;s<o;++s){var a=!1,l=t[s],h=t[s+1];if(l!==h&&(1!==s||l!==l[0]))if(n)a=!0;else for(var c=s*i,u=c-i,p=c+i,f=0;f!==i;++f){var d=e[c+f];if(d!==e[u+f]||d!==e[p+f]){a=!0;break}}if(a){if(s!==r){t[r]=t[s];for(var m=s*i,g=r*i,f=0;f!==i;++f)e[g+f]=e[m+f]}++r}}if(o>0){t[r]=t[o];for(var m=o*i,g=r*i,f=0;f!==i;++f)e[g+f]=e[m+f];++r}return r!==t.length&&(this.times=Oh.arraySlice(t,0,r),this.values=Oh.arraySlice(e,0,r*i)),this}},Hi.prototype=Object.assign(Object.create(Nh),{constructor:Hi,ValueTypeName:"vector"}),ji.prototype=Object.assign(Object.create(Bi.prototype),{constructor:ji,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=t*s,h=(i-e)/(n-e),c=l+s;l!==c;l+=4)a.slerpFlat(r,0,o,l-s,o,l,h);return r}}),zi.prototype=Object.assign(Object.create(Nh),{constructor:zi,ValueTypeName:"quaternion",DefaultInterpolation:Ys,InterpolantFactoryMethodLinear:function(t){return new ji(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Wi.prototype=Object.assign(Object.create(Nh),{
constructor:Wi,ValueTypeName:"number"}),Xi.prototype=Object.assign(Object.create(Nh),{constructor:Xi,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Xs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yi.prototype=Object.assign(Object.create(Nh),{constructor:Yi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Xs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),qi.prototype=Object.assign(Object.create(Nh),{constructor:qi,ValueTypeName:"color"}),Zi.prototype=Nh,Nh.constructor=Zi,Object.assign(Zi,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=Zi._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];Oh.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Oh.convertArray(t.times,Array),values:Oh.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wi;case"vector":case"vector2":case"vector3":case"vector4":return Hi;case"color":return qi;case"quaternion":return zi;case"bool":case"boolean":return Yi;case"string":return Xi}throw new Error("Unsupported typeName: "+t)}}),Ki.prototype={constructor:Ki,resetDuration:function(){for(var t=this.tracks,e=0,i=0,n=t.length;i!==n;++i){var r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Ki,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,o=i.length;r!==o;++r)e.push(Zi.parse(i[r]).scale(n));return new Ki(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,o=i.length;r!==o;++r)e.push(Zi.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,o=[],s=0;s<r;s++){var a=[],l=[];a.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var h=Oh.getKeyframeOrder(a);a=Oh.sortedArray(a,1,h),l=Oh.sortedArray(l,1,h),n||0!==a[0]||(a.push(r),l.push(l[0])),o.push(new Wi(".morphTargetInfluences["+e[s].name+"]",a,l).scale(1/i))}return new Ki(t,(-1),o)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],l=a.name.match(r);if(l&&l.length>1){var h=l[1],c=n[h];c||(n[h]=c=[]),c.push(a)}}var u=[];for(var h in n)u.push(Ki.CreateFromMorphTargetSequence(h,n[h],e,i));return u},parseAnimation:function(t,e){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var i=function(t,e,i,n,r){if(0!==i.length){var o=[],s=[];Oh.flattenJSON(i,o,s,n),0!==o.length&&r.push(new t(e,o,s))}},n=[],r=t.name||"default",o=t.length||-1,s=t.fps||30,a=t.hierarchy||[],l=0;l<a.length;l++){var h=a[l].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var c={},u=0;u<h.length;u++)if(h[u].morphTargets)for(var p=0;p<h[u].morphTargets.length;p++)c[h[u].morphTargets[p]]=-1;for(var f in c){for(var d=[],m=[],p=0;p!==h[u].morphTargets.length;++p){var g=h[u];d.push(g.time),m.push(g.morphTarget===f?1:0)}n.push(new Wi(".morphTargetInfluence["+f+"]",d,m))}o=c.length*(s||1)}else{var y=".bones["+e[l].name+"]";i(Hi,y+".position",h,"pos",n),i(zi,y+".quaternion",h,"rot",n),i(Hi,y+".scale",h,"scl",n)}}if(0===n.length)return null;var v=new Ki(r,o,n);return v}}),Object.assign($i.prototype,{load:function(t,e,i,n){var r=this,o=new Ei(r.manager);o.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,r=new Ch[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=(new i).fromArray(o)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var s=0,a=t.materials.length;s<a;s++)r.materials.push(this.parse(t.materials[s]));return r}}),Object.assign(Qi.prototype,{load:function(t,e,i,n){var r=this,o=new Ei(r.manager);o.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new Mt,i=t.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==i){var r=new n[i.type](i.array);e.setIndex(new ft(r,1))}var o=t.data.attributes;for(var s in o){var a=o[s],r=new n[a.type](a.array);e.addAttribute(s,new ft(r,a.itemSize,a.normalized))}var h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(var c=0,u=h.length;c!==u;++c){var p=h[c];e.addGroup(p.start,p.count,p.materialIndex)}var f=t.data.boundingSphere;if(void 0!==f){var d=new l;void 0!==f.center&&d.fromArray(f.center),e.boundingSphere=new tt(d,f.radius)}return e}}),Ji.prototype={constructor:Ji,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t,e,i,n={NoBlending:po,NormalBlending:fo,AdditiveBlending:mo,SubtractiveBlending:go,MultiplyBlending:yo,CustomBlending:vo};return function(r,o,s){function a(t,i,n,r,a){var h,c=o+t,u=Ji.Handlers.get(c);null!==u?h=u.load(c):(e.setCrossOrigin(s),h=e.load(c)),void 0!==i&&(h.repeat.fromArray(i),1!==i[0]&&(h.wrapS=os),1!==i[1]&&(h.wrapT=os)),void 0!==n&&h.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(h.wrapS=os),"mirror"===r[0]&&(h.wrapS=as),"repeat"===r[1]&&(h.wrapT=os),"mirror"===r[1]&&(h.wrapT=as)),void 0!==a&&(h.anisotropy=a);var p=ua.generateUUID();return l[p]=h,p}void 0===t&&(t=new W),void 0===e&&(e=new Mi),void 0===i&&(i=new $i);var l={},h={uuid:ua.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var u=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=u;break;case"blending":h.blending=n[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":h.color=t.fromArray(u).getHex();break;case"colorSpecular":h.specular=t.fromArray(u).getHex();break;case"colorEmissive":h.emissive=t.fromArray(u).getHex();break;case"specularCoef":h.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(h.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=a(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=a(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=a(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=a(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=a(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=a(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=a(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=a(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=a(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=a(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=oo;break;case"doubleSided":h.side=so;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),h.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[c]=u;break;case"vertexColors":u===!0&&(h.vertexColors=uo),"face"===u&&(h.vertexColors=co);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,u)}}return"MeshBasicMaterial"===h.type&&delete h.emissive,"MeshPhongMaterial"!==h.type&&delete h.specular,h.opacity<1&&(h.transparent=!0),i.setTextures(l),i.parse(h)}}()},Ji.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],o=e[i+1];if(r.test(t))return o}return null}},Object.assign(tn.prototype,{load:function(t,e,i,n){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Ji.prototype.extractUrlBase(t),s=new Ei(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(i){var n=JSON.parse(i),s=n.metadata;if(void 0!==s){var a=s.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var l=r.parse(n,o);e(l.geometry,l.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function n(e){function n(t,e){return t&1<<e}var r,o,s,a,c,u,p,f,d,m,g,y,v,_,b,T,E,x,S,w,A,M,P,C,R,I,O,N=t.faces,L=t.vertices,D=t.normals,k=t.colors,B=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&B++;for(r=0;r<B;r++)h.faceVertexUvs[r]=[]}for(a=0,c=L.length;a<c;)x=new l,x.x=L[a++]*e,x.y=L[a++]*e,x.z=L[a++]*e,h.vertices.push(x);for(a=0,c=N.length;a<c;)if(m=N[a++],g=n(m,0),y=n(m,1),v=n(m,3),_=n(m,4),b=n(m,5),T=n(m,6),E=n(m,7),g){if(w=new ut,w.a=N[a],w.b=N[a+1],w.c=N[a+3],A=new ut,A.a=N[a+1],A.b=N[a+2],A.c=N[a+3],a+=4,y&&(d=N[a++],w.materialIndex=d,A.materialIndex=d),s=h.faces.length,v)for(r=0;r<B;r++)for(C=t.uvs[r],h.faceVertexUvs[r][s]=[],h.faceVertexUvs[r][s+1]=[],o=0;o<4;o++)f=N[a++],I=C[2*f],O=C[2*f+1],R=new i(I,O),2!==o&&h.faceVertexUvs[r][s].push(R),0!==o&&h.faceVertexUvs[r][s+1].push(R);if(_&&(p=3*N[a++],w.normal.set(D[p++],D[p++],D[p]),A.normal.copy(w.normal)),b)for(r=0;r<4;r++)p=3*N[a++],P=new l(D[p++],D[p++],D[p]),2!==r&&w.vertexNormals.push(P),0!==r&&A.vertexNormals.push(P);if(T&&(u=N[a++],M=k[u],w.color.setHex(M),A.color.setHex(M)),E)for(r=0;r<4;r++)u=N[a++],M=k[u],2!==r&&w.vertexColors.push(new W(M)),0!==r&&A.vertexColors.push(new W(M));h.faces.push(w),h.faces.push(A)}else{if(S=new ut,S.a=N[a++],S.b=N[a++],S.c=N[a++],y&&(d=N[a++],S.materialIndex=d),s=h.faces.length,v)for(r=0;r<B;r++)for(C=t.uvs[r],h.faceVertexUvs[r][s]=[],o=0;o<3;o++)f=N[a++],I=C[2*f],O=C[2*f+1],R=new i(I,O),h.faceVertexUvs[r][s].push(R);if(_&&(p=3*N[a++],S.normal.set(D[p++],D[p++],D[p])),b)for(r=0;r<3;r++)p=3*N[a++],P=new l(D[p++],D[p++],D[p]),S.vertexNormals.push(P);if(T&&(u=N[a++],S.color.setHex(k[u])),E)for(r=0;r<3;r++)u=N[a++],S.vertexColors.push(new W(k[u]));h.faces.push(S)}}function o(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,n=t.skinWeights.length;i<n;i+=e){var o=t.skinWeights[i],s=e>1?t.skinWeights[i+1]:0,a=e>2?t.skinWeights[i+2]:0,l=e>3?t.skinWeights[i+3]:0;h.skinWeights.push(new r(o,s,a,l))}if(t.skinIndices)for(var i=0,n=t.skinIndices.length;i<n;i+=e){var c=t.skinIndices[i],u=e>1?t.skinIndices[i+1]:0,p=e>2?t.skinIndices[i+2]:0,f=e>3?t.skinIndices[i+3]:0;h.skinIndices.push(new r(c,u,p,f))}h.bones=t.bones,h.bones&&h.bones.length>0&&(h.skinWeights.length!==h.skinIndices.length||h.skinIndices.length!==h.vertices.length)&&console.warn("When skinning, number of vertices ("+h.vertices.length+"), skinIndices ("+h.skinIndices.length+"), and skinWeights ("+h.skinWeights.length+") should match.")}function s(e){if(void 0!==t.morphTargets)for(var i=0,n=t.morphTargets.length;i<n;i++){h.morphTargets[i]={},h.morphTargets[i].name=t.morphTargets[i].name,h.morphTargets[i].vertices=[];for(var r=h.morphTargets[i].vertices,o=t.morphTargets[i].vertices,s=0,a=o.length;s<a;s+=3){var c=new l;c.x=o[s]*e,c.y=o[s+1]*e,c.z=o[s+2]*e,r.push(c)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var u=h.faces,p=t.morphColors[0].colors,i=0,n=u.length;i<n;i++)u[i].color.fromArray(p,3*i)}}function a(){var e=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var n=0;n<i.length;n++){var r=Ki.parseAnimation(i[n],h.bones);r&&e.push(r)}if(h.morphTargets){var o=Ki.CreateClipsFromMorphTargetSequences(h.morphTargets,10);e=e.concat(o)}e.length>0&&(h.animations=e)}var h=new At,c=void 0!==t.scale?1/t.scale:1;if(n(c),o(),s(c),a(),h.computeFaceNormals(),h.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:h};var u=Ji.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:h,materials:u}}}),Object.assign(en.prototype,{load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this,o=new Ei(r.manager);o.load(t,function(i){var o=null;try{o=JSON.parse(i)}catch(s){return void 0!==n&&n(s),void console.error("THREE:ObjectLoader: Can't parse "+t+".",s.message)}var a=o.metadata;return void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):void r.parse(o,e)},i,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseGeometries(t.geometries),n=this.parseImages(t.images,function(){void 0!==e&&e(s)}),r=this.parseTextures(t.textures,n),o=this.parseMaterials(t.materials,r),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseGeometries:function(t){var e={};if(void 0!==t)for(var i=new tn,n=new Qi,r=0,o=t.length;r<o;r++){var s,a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ph[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ph[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ph[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ph[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ph[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ph[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new Ph[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ph[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ph[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ph[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ph[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"BufferGeometry":s=n.parse(a);break;case"Geometry":s=i.parse(a.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),e[a.uuid]=s}return e},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new $i;n.setTextures(e);for(var r=0,o=t.length;r<o;r++){var s=n.parse(t[r]);i[s.uuid]=s}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=Ki.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),s.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t)})}var n=this,r={};if(void 0!==t&&t.length>0){var o=new Ti(e),s=new wi(o);s.setCrossOrigin(this.crossOrigin);for(var a=0,l=t.length;a<l;a++){var h=t[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:n.texturePath+h.url;r[h.uuid]=i(c)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={UVMapping:$o,CubeReflectionMapping:Qo,CubeRefractionMapping:Jo,EquirectangularReflectionMapping:ts,EquirectangularRefractionMapping:es,SphericalReflectionMapping:is,CubeUVReflectionMapping:ns,CubeUVRefractionMapping:rs},o={RepeatWrapping:os,ClampToEdgeWrapping:ss,MirroredRepeatWrapping:as},s={NearestFilter:ls,NearestMipMapNearestFilter:hs,NearestMipMapLinearFilter:cs,LinearFilter:us,LinearMipMapNearestFilter:ps,LinearMipMapLinearFilter:fs},a={};if(void 0!==t)for(var l=0,h=t.length;l<h;l++){var c=t[l];void 0===c.image&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),void 0===e[c.image]&&console.warn("THREE.ObjectLoader: Undefined image",c.image);var u=new n(e[c.image]);u.needsUpdate=!0,u.uuid=c.uuid,void 0!==c.name&&(u.name=c.name),void 0!==c.mapping&&(u.mapping=i(c.mapping,r)),void 0!==c.offset&&u.offset.fromArray(c.offset),void 0!==c.repeat&&u.repeat.fromArray(c.repeat),void 0!==c.wrap&&(u.wrapS=i(c.wrap[0],o),u.wrapT=i(c.wrap[1],o)),void 0!==c.minFilter&&(u.minFilter=i(c.minFilter,s)),void 0!==c.magFilter&&(u.magFilter=i(c.magFilter,s)),void 0!==c.anisotropy&&(u.anisotropy=c.anisotropy),void 0!==c.flipY&&(u.flipY=c.flipY),a[c.uuid]=u}return a},parseObject:function(){var t=new h;return function(e,i,n){function r(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),i[t]}function o(t){if(void 0!==t)return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}var s;switch(e.type){case"Scene":s=new ue,void 0!==e.background&&Number.isInteger(e.background)&&(s.background=new W(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new ce(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new he(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new Lt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Dt(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new ki(e.color,e.intensity);break;case"DirectionalLight":s=new Di(e.color,e.intensity);break;case"PointLight":s=new Ni(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new Oi(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Ci(e.color,e.groundColor,e.intensity);break;case"Mesh":var a=r(e.geometry),l=o(e.material);s=a.bones&&a.bones.length>0?new ve(a,l):new Pt(a,l);break;case"LOD":s=new me;break;case"Line":s=new be(r(e.geometry),o(e.material),e.mode);break;case"LineSegments":s=new Te(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":s=new xe(r(e.geometry),o(e.material));break;case"Sprite":s=new de(o(e.material));break;case"Group":s=new Se;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:s=new lt}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var h in e.children)s.add(this.parseObject(e.children[h],i,n));if("LOD"===e.type)for(var c=e.levels,u=0;u<c.length;u++){var p=c[u],h=s.getObjectByProperty("uuid",p.object);void 0!==h&&s.addLevel(h,p.distance)}return s}}()}),fn.prototype={constructor:fn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(isNaN(t)&&(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),o=0;for(n.push(0),i=1;i<=t;i++)e=this.getPoint(i/t),o+=e.distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,o=n.length;i=e?e:t*n[o-1];for(var s,a=0,l=o-1;a<=l;)if(r=Math.floor(a+(l-a)/2),s=n[r]-i,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===i){var h=r/(o-1);return h}var c=n[r],u=n[r+1],p=u-c,f=(i-c)/p,h=(r+f)/(o-1);return h},getTangent:function(t){var e=1e-4,i=t-e,n=t+e;i<0&&(i=0),n>1&&(n=1);var r=this.getPoint(i),o=this.getPoint(n),s=o.clone().sub(r);return s.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,o=new l,s=[],a=[],c=[],u=new l,p=new h;for(i=0;i<=t;i++)n=i/t,s[i]=this.getTangentAt(n),s[i].normalize();a[0]=new l,c[0]=new l;var f=Number.MAX_VALUE,d=Math.abs(s[0].x),m=Math.abs(s[0].y),g=Math.abs(s[0].z);for(d<=f&&(f=d,o.set(1,0,0)),m<=f&&(f=m,o.set(0,1,0)),g<=f&&o.set(0,0,1),u.crossVectors(s[0],o).normalize(),a[0].crossVectors(s[0],u),c[0].crossVectors(s[0],a[0]),i=1;i<=t;i++)a[i]=a[i-1].clone(),c[i]=c[i-1].clone(),u.crossVectors(s[i-1],s[i]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(ua.clamp(s[i-1].dot(s[i]),-1,1)),a[i].applyMatrix4(p.makeRotationAxis(u,r))),c[i].crossVectors(s[i],a[i]);if(e===!0)for(r=Math.acos(ua.clamp(a[0].dot(a[t]),-1,1)),r/=t,s[0].dot(u.crossVectors(a[0],a[t]))>0&&(r=-r),i=1;i<=t;i++)a[i].applyMatrix4(p.makeRotationAxis(s[i],r*i)),c[i].crossVectors(s[i],a[i]);return{tangents:s,normals:a,binormals:c}}},dn.prototype=Object.create(fn.prototype),dn.prototype.constructor=dn,dn.prototype.isLineCurve=!0,dn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},dn.prototype.getPointAt=function(t){return this.getPoint(t)},dn.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},mn.prototype=Object.assign(Object.create(fn.prototype),{constructor:mn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new dn(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,o=this.curves[n],s=o.getLength(),a=0===s?0:1-r/s;return o.getPointAt(a)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){isNaN(t)&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var o=r[n],s=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s),l=0;l<a.length;l++){var h=a[l];e&&e.equals(h)||(i.push(h),e=h)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new At,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new l(r.x,r.y,r.z||0))}return e}}),gn.prototype=Object.create(fn.prototype),gn.prototype.constructor=gn,gn.prototype.isEllipseCurve=!0,gn.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=r?0:e),this.aClockwise!==!0||r||(n===e?n=-e:n-=e);var o=this.aStartAngle+t*n,s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),c=s-this.aX,u=a-this.aY;s=c*l-u*h+this.aX,a=c*h+u*l+this.aY}return new i(s,a)},yn.prototype=Object.create(fn.prototype),yn.prototype.constructor=yn,yn.prototype.isSplineCurve=!0,yn.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),o=n-r,s=e[0===r?r:r-1],a=e[r],l=e[r>e.length-2?e.length-1:r+1],h=e[r>e.length-3?e.length-1:r+2];return new i(nn(o,s.x,a.x,l.x,h.x),nn(o,s.y,a.y,l.y,h.y))},vn.prototype=Object.create(fn.prototype),vn.prototype.constructor=vn,vn.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2,o=this.v3;return new i(pn(t,e.x,n.x,r.x,o.x),pn(t,e.y,n.y,r.y,o.y))},_n.prototype=Object.create(fn.prototype),_n.prototype.constructor=_n,_n.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2;return new i(an(t,e.x,n.x,r.x),an(t,e.y,n.y,r.y))};var Lh=Object.assign(Object.create(mn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new dn(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var o=new _n(this.currentPoint.clone(),new i(t,e),new i(n,r));this.curves.push(o),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,o,s){var a=new vn(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(o,s));this.curves.push(a),this.currentPoint.set(o,s)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),i=new yn(e);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+s,e+a,i,n,r,o)},absarc:function(t,e,i,n,r,o){this.absellipse(t,e,i,i,n,r,o)},ellipse:function(t,e,i,n,r,o,s,a){var l=this.currentPoint.x,h=this.currentPoint.y;this.absellipse(t+l,e+h,i,n,r,o,s,a)},absellipse:function(t,e,i,n,r,o,s,a){var l=new gn(t,e,i,n,r,o,s,a);if(this.curves.length>0){
var h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});bn.prototype=Lh,Lh.constructor=bn,Tn.prototype=Object.assign(Object.create(Lh),{constructor:Tn,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),En.prototype={moveTo:function(t,e){this.currentPath=new bn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,o){this.currentPath.bezierCurveTo(t,e,i,n,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],o=new Tn;o.curves=r.curves,e.push(o)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,o=0;o<i;r=o++){var s=e[r],a=e[o],l=a.x-s.x,h=a.y-s.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(s=e[o],l=-l,a=e[r],h=-h),t.y<s.y||t.y>a.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{var c=h*(t.x-s.x)-l*(t.y-s.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(t.y!==s.y)continue;if(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x)return!0}}return n}var r=Mh.isClockWise,o=this.subPaths;if(0===o.length)return[];if(e===!0)return i(o);var s,a,l,h=[];if(1===o.length)return a=o[0],l=new Tn,l.curves=a.curves,h.push(l),h;var c=!r(o[0].getPoints());c=t?!c:c;var u,p=[],f=[],d=[],m=0;f[m]=void 0,d[m]=[];for(var g=0,y=o.length;g<y;g++)a=o[g],u=a.getPoints(),s=r(u),s=t?!s:s,s?(!c&&f[m]&&m++,f[m]={s:new Tn,p:u},f[m].s.curves=a.curves,c&&m++,d[m]=[]):d[m].push({h:a,p:u[0]});if(!f[0])return i(o);if(f.length>1){for(var v=!1,_=[],b=0,T=f.length;b<T;b++)p[b]=[];for(var b=0,T=f.length;b<T;b++)for(var E=d[b],x=0;x<E.length;x++){for(var S=E[x],w=!0,A=0;A<f.length;A++)n(S.p,f[A].p)&&(b!==A&&_.push({froms:b,tos:A,hole:x}),w?(w=!1,p[A].push(S)):v=!0);w&&p[b].push(S)}_.length>0&&(v||(d=p))}for(var M,g=0,P=f.length;g<P;g++){l=f[g].s,h.push(l),M=d[g];for(var C=0,R=M.length;C<R;C++)l.holes.push(M[C].h)}return h}},Object.assign(xn.prototype,{isFont:!0,generateShapes:function(t,e,i){function n(t){for(var i=String(t).split(""),n=e/o.resolution,s=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*n,a=0,l=0,h=[],c=0;c<i.length;c++){var u=i[c];if("\n"===u)a=0,l-=s;else{var p=r(u,n,a,l);a+=p.offsetX,h.push(p.path)}}return h}function r(t,e,n,r){var s=o.glyphs[t]||o.glyphs["?"];if(s){var a,l,h,c,u,p,f,d,m,g,y,v=new En,_=[];if(s.o)for(var b=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),T=0,E=b.length;T<E;){var x=b[T++];switch(x){case"m":a=b[T++]*e+n,l=b[T++]*e+r,v.moveTo(a,l);break;case"l":a=b[T++]*e+n,l=b[T++]*e+r,v.lineTo(a,l);break;case"q":if(h=b[T++]*e+n,c=b[T++]*e+r,f=b[T++]*e+n,d=b[T++]*e+r,v.quadraticCurveTo(f,d,h,c),y=_[_.length-1]){u=y.x,p=y.y;for(var S=1;S<=i;S++){var w=S/i;an(w,u,f,h),an(w,p,d,c)}}break;case"b":if(h=b[T++]*e+n,c=b[T++]*e+r,f=b[T++]*e+n,d=b[T++]*e+r,m=b[T++]*e+n,g=b[T++]*e+r,v.bezierCurveTo(f,d,m,g,h,c),y=_[_.length-1]){u=y.x,p=y.y;for(var S=1;S<=i;S++){var w=S/i;pn(w,u,f,m,h),pn(w,p,d,g,c)}}}}return{offsetX:s.ha*e,path:v}}}void 0===e&&(e=100),void 0===i&&(i=4);for(var o=this.data,s=n(t),a=[],l=0,h=s.length;l<h;l++)Array.prototype.push.apply(a,s[l].toShapes());return a}}),Object.assign(Sn.prototype,{load:function(t,e,i,n){var r=this,o=new Ei(this.manager);o.load(t,function(t){var i;try{i=JSON.parse(t)}catch(n){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var o=r.parse(i);e&&e(o)},i,n)},parse:function(t){return new xn(t)}});var Dh,kh={getContext:function(){return void 0===Dh&&(Dh=new(window.AudioContext||window.webkitAudioContext)),Dh},setContext:function(t){Dh=t}};Object.assign(wn.prototype,{load:function(t,e,i,n){var r=new Ei(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){var i=kh.getContext();i.decodeAudioData(t,function(t){e(t)})},i,n)}}),An.prototype=Object.assign(Object.create(Pi.prototype),{constructor:An,isRectAreaLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this}}),Object.assign(Mn.prototype,{update:function(){var t,e,i,n,r,o,s,a=new h,l=new h;return function(h){var c=t!==this||e!==h.focus||i!==h.fov||n!==h.aspect*this.aspect||r!==h.near||o!==h.far||s!==h.zoom;if(c){t=this,e=h.focus,i=h.fov,n=h.aspect*this.aspect,r=h.near,o=h.far,s=h.zoom;var u,p,f=h.projectionMatrix.clone(),d=this.eyeSep/2,m=d*r/e,g=r*Math.tan(ua.DEG2RAD*i*.5)/s;l.elements[12]=-d,a.elements[12]=d,u=-g*n+m,p=g*n+m,f.elements[0]=2*r/(p-u),f.elements[8]=(p+u)/(p-u),this.cameraL.projectionMatrix.copy(f),u=-g*n-m,p=g*n-m,f.elements[0]=2*r/(p-u),f.elements[8]=(p+u)/(p-u),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(a)}}()}),Pn.prototype=Object.create(lt.prototype),Pn.prototype.constructor=Pn,Cn.prototype=Object.assign(Object.create(lt.prototype),{constructor:Cn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new l,e=new a,i=new l,n=new l;return function(r){lt.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(n.x,this.context.currentTime),o.forwardY.setValueAtTime(n.y,this.context.currentTime),o.forwardZ.setValueAtTime(n.z,this.context.currentTime),o.upX.setValueAtTime(s.x,this.context.currentTime),o.upY.setValueAtTime(s.y,this.context.currentTime),o.upZ.setValueAtTime(s.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z))}}()}),Rn.prototype=Object.assign(Object.create(lt.prototype),{constructor:Rn,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),In.prototype=Object.assign(Object.create(Rn.prototype),{constructor:In,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new l;return function(e){lt.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(On.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Nn.prototype={constructor:Nn,accumulate:function(t,e){var i=this.buffer,n=this.valueSize,r=t*n+n,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==n;++s)i[r+s]=i[s];o=e}else{o+=e;var a=e/o;this._mixBufferRegion(i,r,0,a,n)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*e;this._mixBufferRegion(i,n,s,1-r,e)}for(var a=e,l=e+e;a!==l;++a)if(i[a]!==i[a+e]){o.setValue(i,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,n=3*i;t.getValue(e,n);for(var r=i,o=n;r!==o;++r)e[r]=e[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,i,n,r){if(n>=.5)for(var o=0;o!==r;++o)t[e+o]=t[i+o]},_slerp:function(t,e,i,n,r){a.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,r){for(var o=1-n,s=0;s!==r;++s){var a=e+s;t[a]=t[a]*o+t[i+s]*n}}},Ln.prototype={constructor:Ln,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(t=Ln.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(i){var o=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[i])return void console.error("  can not bind to objectName of node, undefined",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[o]}}var a=t[n];if(void 0===a){var l=e.nodeName;return void console.error("  trying to update property for track: "+l+"."+n+" but it wasn't found.",t)}var h=this.Versioning.None;void 0!==t.needsUpdate?(h=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(h=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===r){r=s;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):void 0!==a.length?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][h]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Ln.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Ln.prototype.getValue,_setValue_unbound:Ln.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Ln.Composite=function(t,e,i){var n=i||Ln.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)},Ln.Composite.prototype={constructor:Ln.Composite,getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ln.create=function(t,e,i){return t&&t.isAnimationObjectGroup?new Ln.Composite(t,e,i):new Ln(t,e,i)},Ln.parseTrackName=function(t){var e=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/,i=e.exec(t);if(!i)throw new Error("cannot parse trackName at all: "+t);var n={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return n},Ln.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=function(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];if(n.name===e)return n}return null},n=i(t.skeleton);if(n)return n}if(t.children){var r=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n.name===e||n.uuid===e)return n;var o=r(n.children);if(o)return o}return null},o=r(t.children);if(o)return o}return null},Dn.prototype={constructor:Dn,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,i=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,o=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length,h=0,c=arguments.length;h!==c;++h){var u=arguments[h],p=u.uuid,f=r[p],d=void 0;if(void 0===f){f=i++,r[p]=f,e.push(u);for(var m=0,g=l;m!==g;++m)a[m].push(new Ln(u,o[m],s[m]))}else if(f<n){d=e[f];var y=--n,v=e[y];r[v.uuid]=f,e[f]=v,r[p]=y,e[y]=u;for(var m=0,g=l;m!==g;++m){var _=a[m],b=_[y],T=_[f];_[f]=b,void 0===T&&(T=new Ln(u,o[m],s[m])),_[y]=T}}else e[f]!==d&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(t){for(var e=this._objects,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,o=r.length,s=0,a=arguments.length;s!==a;++s){var l=arguments[s],h=l.uuid,c=n[h];if(void 0!==c&&c>=i){var u=i++,p=e[u];n[p.uuid]=c,e[c]=p,n[h]=u,e[u]=l;for(var f=0,d=o;f!==d;++f){var m=r[f],g=m[u],y=m[c];m[c]=g,m[u]=y}}}this.nCachedObjects_=i},uncache:function(t){for(var e=this._objects,i=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,o=this._bindings,s=o.length,a=0,l=arguments.length;a!==l;++a){var h=arguments[a],c=h.uuid,u=r[c];if(void 0!==u)if(delete r[c],u<n){var p=--n,f=e[p],d=--i,m=e[d];r[f.uuid]=u,e[u]=f,r[m.uuid]=p,e[p]=m,e.pop();for(var g=0,y=s;g!==y;++g){var v=o[g],_=v[p],b=v[d];v[u]=_,v[p]=b,v.pop()}}else{var d=--i,m=e[d];r[m.uuid]=u,e[u]=m,e.pop();for(var g=0,y=s;g!==y;++g){var v=o[g];v[u]=v[d],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,h=this.nCachedObjects_,c=new Array(l);n=r.length,i[t]=n,o.push(t),s.push(e),r.push(c);for(var u=h,p=a.length;u!==p;++u){var f=a[u];c[u]=new Ln(f,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s],l=t[s];e[l]=i,o[i]=a,o.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}},kn.prototype={constructor:kn,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){var n=this._clip.duration,r=t._clip.duration,o=r/n,s=n/r;t.warp(1,o,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+i,l[0]=t/s,l[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){var r=this._startTime;if(null!==r){var o=(t-r)*i;if(o<0||0===i)return;this._startTime=null,e=i*o}e*=this._updateTimeScale(t);var s=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var l=this._interpolants,h=this._propertyBindings,c=0,u=l.length;c!==u;++c)l[c].evaluate(s),h[c].accumulate(n,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(n===js){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=i)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=n===Ws;if(r===-1&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=i||e<0){var s=Math.floor(e/i);e-=i*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===a){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&r))return this.time=e,i-e}return this.time=e,e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=Ks,n.endingEnd=Ks):(t?n.endingStart=this.zeroSlopeAtStart?Ks:Zs:n.endingStart=$s,e?n.endingEnd=this.zeroSlopeAtEnd?Ks:Zs:n.endingEnd=$s)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=e,s[1]=r+t,a[1]=i,this}},Bn.prototype={constructor:Bn,clipAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Ki.findByName(i,t):t,o=null!==r?r.uuid:t,s=this._actionsByClip[o],a=null;if(void 0!==s){var l=s.actionByRoot[n];if(void 0!==l)return l;a=s.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var h=new kn(this,r,e);return this._bindAction(h,a),this._addInactiveAction(h,o,n),h},existingAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Ki.findByName(i,t):t,o=r?r.uuid:t,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[n]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,s=0;s!==i;++s){var a=e[s];a.enabled&&a._update(n,t,r,o)}for(var l=this._bindings,h=this._nActiveBindings,s=0;s!==h;++s)l[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var o=r.knownActions,s=0,a=o.length;s!==a;++s){var l=o[s];this._deactivateAction(l);var h=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=h,e[h]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete n[i]}},uncacheRoot:function(t){var e=t.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot,o=r[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var s=this._bindingsByRootAndName,a=s[e];if(void 0!==a)for(var l in a){var h=a[l];h.restoreOriginalState(),this._removeInactiveBinding(h)}},uncacheAction:function(t,e){var i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}},Object.assign(Bn.prototype,{_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,o=t._propertyBindings,s=t._interpolants,a=i.uuid,l=this._bindingsByRootAndName,h=l[a];void 0===h&&(h={},l[a]=h);for(var c=0;c!==r;++c){var u=n[c],p=u.name,f=h[p];if(void 0!==f)o[c]=f;else{if(f=o[c],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,a,p));continue}var d=e&&e._propertyBindings[c].binding.parsedPath;f=new Nn(Ln.create(i,p,d),u.ValueTypeName,u.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,p),o[c]=f}s[c].resultBuffer=f.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(var r=t._propertyBindings,o=0,s=r.length;o!==s;++o){var a=r[o];0===a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=n.length,n.push(t),o.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],h=t._byClipCacheIndex;l._byClipCacheIndex=h,a[h]=l,a.pop(),t._byClipCacheIndex=null;var c=s.actionByRoot,u=(e._localRoot||this._root).uuid;delete c[u],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],o=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,s=o[n],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete s[r];t:{for(var h in s)break t;delete o[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(i=new Fi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(Bn.prototype,e.prototype),Gn.prototype.clone=function(){return new Gn(void 0===this.value.clone?this.value:this.value.clone())},Fn.prototype=Object.create(Mt.prototype),Fn.prototype.constructor=Fn,Fn.prototype.isInstancedBufferGeometry=!0,Fn.prototype.addGroup=function(t,e,i){this.groups.push({start:t,count:e,materialIndex:i})},Fn.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var i=t.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}for(var o=t.groups,s=0,a=o.length;s<a;s++){var l=o[s];this.addGroup(l.start,l.count,l.materialIndex)}return this},Vn.prototype={constructor:Vn,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}},Un.prototype={constructor:Un,
isInterleavedBuffer:!0,set needsUpdate(t){t===!0&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}},Hn.prototype=Object.create(Un.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isInstancedInterleavedBuffer=!0,Hn.prototype.copy=function(t){return Un.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},jn.prototype=Object.create(ft.prototype),jn.prototype.constructor=jn,jn.prototype.isInstancedBufferAttribute=!0,jn.prototype.copy=function(t){return ft.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},zn.prototype={constructor:zn,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var i=[];return Xn(t,this,i,e),i.sort(Wn),i},intersectObjects:function(t,e){var i=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)Xn(t[n],this,i,e);return i.sort(Wn),i}},Yn.prototype={constructor:Yn,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},qn.prototype={constructor:qn,set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(ua.clamp(t.y/this.radius,-1,1))),this}},Zn.prototype={constructor:Zn,set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}},Kn.prototype=Object.create(Pt.prototype),Kn.prototype.constructor=Kn,Kn.prototype.createAnimation=function(t,e,i,n){var r={start:e,end:i,length:i-e+1,fps:n,duration:(i-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},Kn.prototype.autoCreateAnimations=function(t){for(var e,i=/([a-z]+)_?(\d+)/i,n={},r=this.geometry,o=0,s=r.morphTargets.length;o<s;o++){var a=r.morphTargets[o],l=a.name.match(i);if(l&&l.length>1){var h=l[1];n[h]||(n[h]={start:1/0,end:-(1/0)});var c=n[h];o<c.start&&(c.start=o),o>c.end&&(c.end=o),e||(e=h)}}for(var h in n){var c=n[h];this.createAnimation(h,c.start,c.end,t)}this.firstAnimation=e},Kn.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},Kn.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},Kn.prototype.setAnimationFPS=function(t,e){var i=this.animationsMap[t];i&&(i.fps=e,i.duration=(i.end-i.start)/i.fps)},Kn.prototype.setAnimationDuration=function(t,e){var i=this.animationsMap[t];i&&(i.duration=e,i.fps=(i.end-i.start)/i.duration)},Kn.prototype.setAnimationWeight=function(t,e){var i=this.animationsMap[t];i&&(i.weight=e)},Kn.prototype.setAnimationTime=function(t,e){var i=this.animationsMap[t];i&&(i.time=e)},Kn.prototype.getAnimationTime=function(t){var e=0,i=this.animationsMap[t];return i&&(e=i.time),e},Kn.prototype.getAnimationDuration=function(t){var e=-1,i=this.animationsMap[t];return i&&(e=i.duration),e},Kn.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},Kn.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},Kn.prototype.update=function(t){for(var e=0,i=this.animationsList.length;e<i;e++){var n=this.animationsList[e];if(n.active){var r=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var o=n.start+ua.clamp(Math.floor(n.time/r),0,n.length-1),s=n.weight;o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*s,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o);var a=n.time%r/r;n.directionBackwards&&(a=1-a),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=a*s,this.morphTargetInfluences[n.lastFrame]=(1-a)*s):this.morphTargetInfluences[n.currentFrame]=s}}},$n.prototype=Object.create(lt.prototype),$n.prototype.constructor=$n,$n.prototype.isImmediateRenderObject=!0,Qn.prototype=Object.create(Te.prototype),Qn.prototype.constructor=Qn,Qn.prototype.update=function(){var t=new l,e=new l,i=new et;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,l=s.faces,h=0,c=0,u=l.length;c<u;c++)for(var p=l[c],f=0,d=p.vertexNormals.length;f<d;f++){var m=a[p[n[f]]],g=p.vertexNormals[f];t.copy(m).applyMatrix4(r),e.copy(g).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),o.setXYZ(h,t.x,t.y,t.z),h+=1,o.setXYZ(h,e.x,e.y,e.z),h+=1}else if(s&&s.isBufferGeometry)for(var y=s.attributes.position,v=s.attributes.normal,h=0,f=0,d=y.count;f<d;f++)t.set(y.getX(f),y.getY(f),y.getZ(f)).applyMatrix4(r),e.set(v.getX(f),v.getY(f),v.getZ(f)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),o.setXYZ(h,t.x,t.y,t.z),h+=1,o.setXYZ(h,e.x,e.y,e.z),h+=1;return o.needsUpdate=!0,this}}(),Jn.prototype=Object.create(lt.prototype),Jn.prototype.constructor=Jn,Jn.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Jn.prototype.update=function(){var t=new l,e=new l;return function(){var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),tr.prototype=Object.create(Te.prototype),tr.prototype.constructor=tr,tr.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,this.getBoneList(t.children[i]));return e},tr.prototype.update=function(){var t=new l,e=new h,i=new h;return function(){var n=this.geometry,r=n.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var o=0,s=0;o<this.bones.length;o++){var a=this.bones[o];a.parent&&a.parent.isBone&&(e.multiplyMatrices(i,a.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(s,t.x,t.y,t.z),e.multiplyMatrices(i,a.parent.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(s+1,t.x,t.y,t.z),s+=2)}n.getAttribute("position").needsUpdate=!0}}(),er.prototype=Object.create(Pt.prototype),er.prototype.constructor=er,er.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},er.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},ir.prototype=Object.create(lt.prototype),ir.prototype.constructor=ir,ir.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},ir.prototype.update=function(){var t=new l,e=new l;return function(){var i=this.children[0],n=this.children[1];if(this.light.target){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld);var r=e.clone().sub(t);i.lookAt(r),n.lookAt(r)}i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var o=.5*this.light.width,s=.5*this.light.height,a=i.geometry.getAttribute("position"),l=a.array;l[0]=o,l[1]=-s,l[2]=0,l[3]=o,l[4]=s,l[5]=0,l[6]=-o,l[7]=s,l[8]=0,l[9]=-o,l[10]=s,l[11]=0,l[12]=-o,l[13]=-s,l[14]=0,l[15]=o,l[16]=-s,l[17]=0,a.needsUpdate=!0}}(),nr.prototype=Object.create(lt.prototype),nr.prototype.constructor=nr,nr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},nr.prototype.update=function(){var t=new l,e=new W,i=new W;return function(){var n=this.children[0],r=n.geometry.getAttribute("color");e.copy(this.light.color).multiplyScalar(this.light.intensity),i.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var o=0,s=r.count;o<s;o++){var a=o<s/2?e:i;r.setXYZ(o,a.r,a.g,a.b)}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),r.needsUpdate=!0}}(),rr.prototype=Object.create(Te.prototype),rr.prototype.constructor=rr,or.prototype=Object.create(Te.prototype),or.prototype.constructor=or,sr.prototype=Object.create(Te.prototype),sr.prototype.constructor=sr,sr.prototype.update=function(){var t=new l,e=new l,i=new et;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=o.faces,l=0,h=0,c=a.length;h<c;h++){var u=a[h],p=u.normal;t.copy(s[u.a]).add(s[u.b]).add(s[u.c]).divideScalar(3).applyMatrix4(n),e.copy(p).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(l,t.x,t.y,t.z),l+=1,r.setXYZ(l,e.x,e.y,e.z),l+=1}return r.needsUpdate=!0,this}}(),ar.prototype=Object.create(lt.prototype),ar.prototype.constructor=ar,ar.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},ar.prototype.update=function(){var t=new l,e=new l,i=new l;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t);var n=this.children[0],r=this.children[1];n.lookAt(i),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.lookAt(i),r.scale.z=i.length()}}(),lr.prototype=Object.create(Te.prototype),lr.prototype.constructor=lr,lr.prototype.update=function(){function t(t,o,s,a){n.set(o,s,a).unproject(r);var l=i[t];if(void 0!==l)for(var h=e.getAttribute("position"),c=0,u=l.length;c<u;c++)h.setXYZ(l[c],n.x,n.y,n.z)}var e,i,n=new l,r=new Nt;return function(){e=this.geometry,i=this.pointMap;var n=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-n,-o,-1),t("n2",n,-o,-1),t("n3",-n,o,-1),t("n4",n,o,-1),t("f1",-n,-o,1),t("f2",n,-o,1),t("f3",-n,o,1),t("f4",n,o,1),t("u1",.7*n,1.1*o,-1),t("u2",.7*-n,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-n,0,1),t("cf2",n,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-n,0,-1),t("cn2",n,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.getAttribute("position").needsUpdate=!0}}(),hr.prototype=Object.create(Te.prototype),hr.prototype.constructor=hr,hr.prototype.update=function(){var t=new J;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var i=t.min,n=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=i.x,o[4]=n.y,o[5]=n.z,o[6]=i.x,o[7]=i.y,o[8]=n.z,o[9]=n.x,o[10]=i.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=i.z,o[15]=i.x,o[16]=n.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=n.x,o[22]=i.y,o[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Bh,Gh;cr.prototype=Object.create(lt.prototype),cr.prototype.constructor=cr,cr.prototype.setDirection=function(){var t,e=new l;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),cr.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},cr.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},ur.prototype=Object.create(Te.prototype),ur.prototype.constructor=ur;var Fh=new l,Vh=new pr,Uh=new pr,Hh=new pr;fr.prototype=Object.create(fn.prototype),fr.prototype.constructor=fr,fr.prototype.getPoint=function(t){var e=this.points,i=e.length;i<2&&console.log("duh, you need at least 2 points");var n=(i-(this.closed?0:1))*t,r=Math.floor(n),o=n-r;this.closed?r+=r>0?0:(Math.floor(Math.abs(r)/e.length)+1)*e.length:0===o&&r===i-1&&(r=i-2,o=1);var s,a,h,c;if(this.closed||r>0?s=e[(r-1)%i]:(Fh.subVectors(e[0],e[1]).add(e[0]),s=Fh),a=e[r%i],h=e[(r+1)%i],this.closed||r+2<i?c=e[(r+2)%i]:(Fh.subVectors(e[i-1],e[i-2]).add(e[i-1]),c=Fh),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var u="chordal"===this.type?.5:.25,p=Math.pow(s.distanceToSquared(a),u),f=Math.pow(a.distanceToSquared(h),u),d=Math.pow(h.distanceToSquared(c),u);f<1e-4&&(f=1),p<1e-4&&(p=f),d<1e-4&&(d=f),Vh.initNonuniformCatmullRom(s.x,a.x,h.x,c.x,p,f,d),Uh.initNonuniformCatmullRom(s.y,a.y,h.y,c.y,p,f,d),Hh.initNonuniformCatmullRom(s.z,a.z,h.z,c.z,p,f,d)}else if("catmullrom"===this.type){var m=void 0!==this.tension?this.tension:.5;Vh.initCatmullRom(s.x,a.x,h.x,c.x,m),Uh.initCatmullRom(s.y,a.y,h.y,c.y,m),Hh.initCatmullRom(s.z,a.z,h.z,c.z,m)}return new l(Vh.calc(o),Uh.calc(o),Hh.calc(o))},dr.prototype=Object.create(fn.prototype),dr.prototype.constructor=dr,dr.prototype.getPoint=function(t){var e=this.v0,i=this.v1,n=this.v2,r=this.v3;return new l(pn(t,e.x,i.x,n.x,r.x),pn(t,e.y,i.y,n.y,r.y),pn(t,e.z,i.z,n.z,r.z))},mr.prototype=Object.create(fn.prototype),mr.prototype.constructor=mr,mr.prototype.getPoint=function(t){var e=this.v0,i=this.v1,n=this.v2;return new l(an(t,e.x,i.x,n.x),an(t,e.y,i.y,n.y),an(t,e.z,i.z,n.z))},gr.prototype=Object.create(fn.prototype),gr.prototype.constructor=gr,gr.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=new l;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e},yr.prototype=Object.create(gn.prototype),yr.prototype.constructor=yr;var jh={createMultiMaterialObject:function(t,e){for(var i=new Se,n=0,r=e.length;n<r;n++)i.add(new Pt(t,e[n]));return i},detach:function(t,e,i){t.applyMatrix(e.matrixWorld),e.remove(t),i.add(t)},attach:function(t,e,i){var n=new h;n.getInverse(i.matrixWorld),t.applyMatrix(n),e.remove(t),i.add(t)}},zh=0,Wh=1;fn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(fn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Br.prototype=Object.create(fr.prototype),Gr.prototype=Object.create(fr.prototype),Fr.prototype=Object.create(fr.prototype),Object.assign(Fr.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),rr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(Y.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(J.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),ht.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},ua.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(et.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToBuffer:function(t,e,i){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(h.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new l),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,i){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,o)}}),it.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},a.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(ot.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Tn.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new qe(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ii(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),Object.assign(l.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,i){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),At.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(lt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(lt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(me.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Lt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Pi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ft.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Mt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Gn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(K.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new W}}}),Object.defineProperties(gi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties($.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(le.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){
console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(le.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(rt.prototype,{cullFace:{get:function(){return this.renderReverseSided?$r:Kr},set:function(t){var e=t!==Kr;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(o.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Rn.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,i=new wn;return i.load(t,function(t){e.setBuffer(t)}),this},On.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Xh={merge:function(t,e,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},Yh={crossOrigin:void 0,loadTexture:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Mi;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,i,void 0,n);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ai;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,i,void 0,n);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};t.WebGLRenderTargetCube=s,t.WebGLRenderTarget=o,t.WebGLRenderer=le,t.ShaderLib=Eh,t.UniformsLib=Th,t.UniformsUtils=va,t.ShaderChunk=_h,t.FogExp2=he,t.Fog=ce,t.Scene=ue,t.LensFlare=pe,t.Sprite=de,t.LOD=me,t.SkinnedMesh=ve,t.Skeleton=ge,t.Bone=ye,t.Mesh=Pt,t.LineSegments=Te,t.Line=be,t.Points=xe,t.Group=Se,t.VideoTexture=we,t.DataTexture=X,t.CompressedTexture=Ae,t.CubeTexture=c,t.CanvasTexture=Me,t.DepthTexture=Pe,t.Texture=n,t.CompressedTextureLoader=xi,t.DataTextureLoader=Si,t.CubeTextureLoader=Ai,t.TextureLoader=Mi,t.ObjectLoader=en,t.MaterialLoader=$i,t.BufferGeometryLoader=Qi,t.DefaultLoadingManager=Ih,t.LoadingManager=Ti,t.JSONLoader=tn,t.ImageLoader=wi,t.FontLoader=Sn,t.FileLoader=Ei,t.Loader=Ji,t.Cache=Rh,t.AudioLoader=wn,t.SpotLightShadow=Ii,t.SpotLight=Oi,t.PointLight=Ni,t.RectAreaLight=An,t.HemisphereLight=Ci,t.DirectionalLightShadow=Li,t.DirectionalLight=Di,t.AmbientLight=ki,t.LightShadow=Ri,t.Light=Pi,t.StereoCamera=Mn,t.PerspectiveCamera=Lt,t.OrthographicCamera=Dt,t.CubeCamera=Pn,t.Camera=Nt,t.AudioListener=Cn,t.PositionalAudio=In,t.AudioContext=kh,t.AudioAnalyser=On,t.Audio=Rn,t.VectorKeyframeTrack=Hi,t.StringKeyframeTrack=Xi,t.QuaternionKeyframeTrack=zi,t.NumberKeyframeTrack=Wi,t.ColorKeyframeTrack=qi,t.BooleanKeyframeTrack=Yi,t.PropertyMixer=Nn,t.PropertyBinding=Ln,t.KeyframeTrack=Zi,t.AnimationUtils=Oh,t.AnimationObjectGroup=Dn,t.AnimationMixer=Bn,t.AnimationClip=Ki,t.Uniform=Gn,t.InstancedBufferGeometry=Fn,t.BufferGeometry=Mt,t.GeometryIdCount=wt,t.Geometry=At,t.InterleavedBufferAttribute=Vn,t.InstancedInterleavedBuffer=Hn,t.InterleavedBuffer=Un,t.InstancedBufferAttribute=jn,t.Face3=ut,t.Object3D=lt,t.Raycaster=zn,t.Layers=at,t.EventDispatcher=e,t.Clock=Yn,t.QuaternionLinearInterpolant=ji,t.LinearInterpolant=Fi,t.DiscreteInterpolant=Vi,t.CubicInterpolant=Gi,t.Interpolant=Bi,t.Triangle=ct,t.Math=ua,t.Spherical=qn,t.Cylindrical=Zn,t.Plane=it,t.Frustum=nt,t.Sphere=tt,t.Ray=ot,t.Matrix4=h,t.Matrix3=et,t.Box3=J,t.Box2=Y,t.Line3=ht,t.Euler=st,t.Vector4=r,t.Vector3=l,t.Vector2=i,t.Quaternion=a,t.Color=W,t.MorphBlendMesh=Kn,t.ImmediateRenderObject=$n,t.VertexNormalsHelper=Qn,t.SpotLightHelper=Jn,t.SkeletonHelper=tr,t.PointLightHelper=er,t.RectAreaLightHelper=ir,t.HemisphereLightHelper=nr,t.GridHelper=rr,t.PolarGridHelper=or,t.FaceNormalsHelper=sr,t.DirectionalLightHelper=ar,t.CameraHelper=lr,t.BoxHelper=hr,t.ArrowHelper=cr,t.AxisHelper=ur,t.CatmullRomCurve3=fr,t.CubicBezierCurve3=dr,t.QuadraticBezierCurve3=mr,t.LineCurve3=gr,t.ArcCurve=yr,t.EllipseCurve=gn,t.SplineCurve=yn,t.CubicBezierCurve=vn,t.QuadraticBezierCurve=_n,t.LineCurve=dn,t.Shape=Tn,t.Path=bn,t.ShapePath=En,t.Font=xn,t.CurvePath=mn,t.Curve=fn,t.ShapeUtils=Mh,t.SceneUtils=jh,t.WireframeGeometry=Ce,t.ParametricGeometry=Re,t.ParametricBufferGeometry=Ie,t.TetrahedronGeometry=Le,t.TetrahedronBufferGeometry=De,t.OctahedronGeometry=ke,t.OctahedronBufferGeometry=Be,t.IcosahedronGeometry=Ge,t.IcosahedronBufferGeometry=Fe,t.DodecahedronGeometry=Ve,t.DodecahedronBufferGeometry=Ue,t.PolyhedronGeometry=Oe,t.PolyhedronBufferGeometry=Ne,t.TubeGeometry=He,t.TubeBufferGeometry=je,t.TorusKnotGeometry=ze,t.TorusKnotBufferGeometry=We,t.TorusGeometry=Xe,t.TorusBufferGeometry=Ye,t.TextGeometry=Ze,t.SphereGeometry=Ke,t.SphereBufferGeometry=$e,t.RingGeometry=Qe,t.RingBufferGeometry=Je,t.PlaneGeometry=It,t.PlaneBufferGeometry=Ot,t.LatheGeometry=ti,t.LatheBufferGeometry=ei,t.ShapeGeometry=ii,t.ShapeBufferGeometry=ni,t.ExtrudeGeometry=qe,t.EdgesGeometry=ri,t.ConeGeometry=ai,t.ConeBufferGeometry=li,t.CylinderGeometry=oi,t.CylinderBufferGeometry=si,t.CircleGeometry=hi,t.CircleBufferGeometry=ci,t.BoxGeometry=Ct,t.BoxBufferGeometry=Rt,t.ShadowMaterial=ui,t.SpriteMaterial=fe,t.RawShaderMaterial=pi,t.ShaderMaterial=$,t.PointsMaterial=Ee,t.MultiMaterial=fi,t.MeshPhysicalMaterial=mi,t.MeshStandardMaterial=di,t.MeshPhongMaterial=gi,t.MeshToonMaterial=yi,t.MeshNormalMaterial=vi,t.MeshLambertMaterial=_i,t.MeshDepthMaterial=Q,t.MeshBasicMaterial=pt,t.LineDashedMaterial=bi,t.LineBasicMaterial=_e,t.Material=K,t.Float64BufferAttribute=Et,t.Float32BufferAttribute=Tt,t.Uint32BufferAttribute=bt,t.Int32BufferAttribute=_t,t.Uint16BufferAttribute=vt,t.Int16BufferAttribute=yt,t.Uint8ClampedBufferAttribute=gt,t.Uint8BufferAttribute=mt,t.Int8BufferAttribute=dt,t.BufferAttribute=ft,t.REVISION=Yr,t.MOUSE=qr,t.CullFaceNone=Zr,t.CullFaceBack=Kr,t.CullFaceFront=$r,t.CullFaceFrontBack=Qr,t.FrontFaceDirectionCW=Jr,t.FrontFaceDirectionCCW=to,t.BasicShadowMap=eo,t.PCFShadowMap=io,t.PCFSoftShadowMap=no,t.FrontSide=ro,t.BackSide=oo,t.DoubleSide=so,t.FlatShading=ao,t.SmoothShading=lo,t.NoColors=ho,t.FaceColors=co,t.VertexColors=uo,t.NoBlending=po,t.NormalBlending=fo,t.AdditiveBlending=mo,t.SubtractiveBlending=go,t.MultiplyBlending=yo,t.CustomBlending=vo,t.AddEquation=_o,t.SubtractEquation=bo,t.ReverseSubtractEquation=To,t.MinEquation=Eo,t.MaxEquation=xo,t.ZeroFactor=So,t.OneFactor=wo,t.SrcColorFactor=Ao,t.OneMinusSrcColorFactor=Mo,t.SrcAlphaFactor=Po,t.OneMinusSrcAlphaFactor=Co,t.DstAlphaFactor=Ro,t.OneMinusDstAlphaFactor=Io,t.DstColorFactor=Oo,t.OneMinusDstColorFactor=No,t.SrcAlphaSaturateFactor=Lo,t.NeverDepth=Do,t.AlwaysDepth=ko,t.LessDepth=Bo,t.LessEqualDepth=Go,t.EqualDepth=Fo,t.GreaterEqualDepth=Vo,t.GreaterDepth=Uo,t.NotEqualDepth=Ho,t.MultiplyOperation=jo,t.MixOperation=zo,t.AddOperation=Wo,t.NoToneMapping=Xo,t.LinearToneMapping=Yo,t.ReinhardToneMapping=qo,t.Uncharted2ToneMapping=Zo,t.CineonToneMapping=Ko,t.UVMapping=$o,t.CubeReflectionMapping=Qo,t.CubeRefractionMapping=Jo,t.EquirectangularReflectionMapping=ts,t.EquirectangularRefractionMapping=es,t.SphericalReflectionMapping=is,t.CubeUVReflectionMapping=ns,t.CubeUVRefractionMapping=rs,t.RepeatWrapping=os,t.ClampToEdgeWrapping=ss,t.MirroredRepeatWrapping=as,t.NearestFilter=ls,t.NearestMipMapNearestFilter=hs,t.NearestMipMapLinearFilter=cs,t.LinearFilter=us,t.LinearMipMapNearestFilter=ps,t.LinearMipMapLinearFilter=fs,t.UnsignedByteType=ds,t.ByteType=ms,t.ShortType=gs,t.UnsignedShortType=ys,t.IntType=vs,t.UnsignedIntType=_s,t.FloatType=bs,t.HalfFloatType=Ts,t.UnsignedShort4444Type=Es,t.UnsignedShort5551Type=xs,t.UnsignedShort565Type=Ss,t.UnsignedInt248Type=ws,t.AlphaFormat=As,t.RGBFormat=Ms,t.RGBAFormat=Ps,t.LuminanceFormat=Cs,t.LuminanceAlphaFormat=Rs,t.RGBEFormat=Is,t.DepthFormat=Os,t.DepthStencilFormat=Ns,t.RGB_S3TC_DXT1_Format=Ls,t.RGBA_S3TC_DXT1_Format=Ds,t.RGBA_S3TC_DXT3_Format=ks,t.RGBA_S3TC_DXT5_Format=Bs,t.RGB_PVRTC_4BPPV1_Format=Gs,t.RGB_PVRTC_2BPPV1_Format=Fs,t.RGBA_PVRTC_4BPPV1_Format=Vs,t.RGBA_PVRTC_2BPPV1_Format=Us,t.RGB_ETC1_Format=Hs,t.LoopOnce=js,t.LoopRepeat=zs,t.LoopPingPong=Ws,t.InterpolateDiscrete=Xs,t.InterpolateLinear=Ys,t.InterpolateSmooth=qs,t.ZeroCurvatureEnding=Zs,t.ZeroSlopeEnding=Ks,t.WrapAroundEnding=$s,t.TrianglesDrawMode=Qs,t.TriangleStripDrawMode=Js,t.TriangleFanDrawMode=ta,t.LinearEncoding=ea,t.sRGBEncoding=ia,t.GammaEncoding=na,t.RGBEEncoding=ra,t.LogLuvEncoding=oa,t.RGBM7Encoding=sa,t.RGBM16Encoding=aa,t.RGBDEncoding=la,t.BasicDepthPacking=ha,t.RGBADepthPacking=ca,t.CubeGeometry=Ct,t.Face4=vr,t.LineStrip=zh,t.LinePieces=Wh,t.MeshFaceMaterial=_r,t.PointCloud=br,t.Particle=Tr,t.ParticleSystem=Er,t.PointCloudMaterial=xr,t.ParticleBasicMaterial=Sr,t.ParticleSystemMaterial=wr,t.Vertex=Ar,t.DynamicBufferAttribute=Mr,t.Int8Attribute=Pr,t.Uint8Attribute=Cr,t.Uint8ClampedAttribute=Rr,t.Int16Attribute=Ir,t.Uint16Attribute=Or,t.Int32Attribute=Nr,t.Uint32Attribute=Lr,t.Float32Attribute=Dr,t.Float64Attribute=kr,t.ClosedSplineCurve3=Br,t.SplineCurve3=Gr,t.Spline=Fr,t.BoundingBoxHelper=Vr,t.EdgesHelper=Ur,t.WireframeHelper=Hr,t.XHRLoader=jr,t.BinaryTextureLoader=zr,t.GeometryUtils=Xh,t.ImageUtils=Yh,t.Projector=Wr,t.CanvasRenderer=Xr,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,i){"use strict";var n=i(55),r=function(t){this.manager=void 0!==t?t:n.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}};r.prototype={constructor:r,load:function(t,e,i,r){var o=this,s=new n.FileLoader(o.manager);s.setPath(this.path),s.load(t,function(t){e(o.parse(t))},i,r)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},_createParserState:function(){var t={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=e!==!1);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&e.groupEnd===-1&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseNormalIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseUVIndex:function(t,e){var i=parseInt(t,10);return 2*(i>=0?i-1:i+e/2)},addVertex:function(t,e,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[e+2]),r.push(n[i+0]),r.push(n[i+1]),r.push(n[i+2])},addVertexLine:function(t){var e=this.vertices,i=this.object.geometry.vertices;i.push(e[t+0]),i.push(e[t+1]),i.push(e[t+2])},addNormal:function(t,e,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[e+2]),r.push(n[i+0]),r.push(n[i+1]),r.push(n[i+2])},addUV:function(t,e,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[t+0]),r.push(n[t+1]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[i+0]),r.push(n[i+1])},addUVLine:function(t){var e=this.uvs,i=this.object.geometry.uvs;i.push(e[t+0]),i.push(e[t+1])},addFace:function(t,e,i,n,r,o,s,a,l,h,c,u){var p,f=this.vertices.length,d=this.parseVertexIndex(t,f),m=this.parseVertexIndex(e,f),g=this.parseVertexIndex(i,f);if(void 0===n?this.addVertex(d,m,g):(p=this.parseVertexIndex(n,f),this.addVertex(d,m,p),this.addVertex(m,g,p)),void 0!==r){var y=this.uvs.length;d=this.parseUVIndex(r,y),m=this.parseUVIndex(o,y),g=this.parseUVIndex(s,y),void 0===n?this.addUV(d,m,g):(p=this.parseUVIndex(a,y),this.addUV(d,m,p),this.addUV(m,g,p))}if(void 0!==l){var v=this.normals.length;d=this.parseNormalIndex(l,v),m=l===h?d:this.parseNormalIndex(h,v),g=l===c?d:this.parseNormalIndex(c,v),void 0===n?this.addNormal(d,m,g):(p=this.parseNormalIndex(u,v),this.addNormal(d,m,p),this.addNormal(m,g,p))}},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,o=t.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(t[r],i));for(var s=0,o=e.length;s<o;s++)this.addUVLine(this.parseUVIndex(e[s],n))}};return t.startObject("",!1),t},parse:function(t){console.time("OBJLoader");var e=this._createParserState();t.indexOf("\r\n")!==-1&&(t=t.replace(/\r\n/g,"\n")),t.indexOf("\\\n")!==-1&&(t=t.replace(/\\\n/g,""));for(var i=t.split("\n"),r="",o="",s="",a=0,l=[],h="function"==typeof"".trimLeft,c=0,u=i.length;c<u;c++)if(r=i[c],r=h?r.trimLeft():r.trim(),a=r.length,0!==a&&(o=r.charAt(0),"#"!==o))if("v"===o)if(s=r.charAt(1)," "===s&&null!==(l=this.regexp.vertex_pattern.exec(r)))e.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if("n"===s&&null!==(l=this.regexp.normal_pattern.exec(r)))e.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else{if("t"!==s||null===(l=this.regexp.uv_pattern.exec(r)))throw new Error("Unexpected vertex/normal/uv line: '"+r+"'");e.uvs.push(parseFloat(l[1]),parseFloat(l[2]))}else if("f"===o)if(null!==(l=this.regexp.face_vertex_uv_normal.exec(r)))e.addFace(l[1],l[4],l[7],l[10],l[2],l[5],l[8],l[11],l[3],l[6],l[9],l[12]);else if(null!==(l=this.regexp.face_vertex_uv.exec(r)))e.addFace(l[1],l[3],l[5],l[7],l[2],l[4],l[6],l[8]);else if(null!==(l=this.regexp.face_vertex_normal.exec(r)))e.addFace(l[1],l[3],l[5],l[7],void 0,void 0,void 0,void 0,l[2],l[4],l[6],l[8]);else{if(null===(l=this.regexp.face_vertex.exec(r)))throw new Error("Unexpected face line: '"+r+"'");e.addFace(l[1],l[2],l[3],l[4])}else if("l"===o){var p=r.substring(1).trim().split(" "),f=[],d=[];if(r.indexOf("/")===-1)f=p;else for(var m=0,g=p.length;m<g;m++){var y=p[m].split("/");""!==y[0]&&f.push(y[0]),""!==y[1]&&d.push(y[1])}e.addLineGeometry(f,d)}else if(null!==(l=this.regexp.object_pattern.exec(r))){var v=(" "+l[0].substr(1).trim()).substr(1);e.startObject(v)}else if(this.regexp.material_use_pattern.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(this.regexp.material_library_pattern.test(r))e.materialLibraries.push(r.substring(7).trim());else{if(null===(l=this.regexp.smoothing_pattern.exec(r))){if("\0"===r)continue;throw new Error("Unexpected line: '"+r+"'")}var _=l[1].trim().toLowerCase();e.object.smooth="1"===_||"on"===_;var b=e.object.currentMaterial();b&&(b.smooth=e.object.smooth)}e.finalize();var T=new n.Group;T.materialLibraries=[].concat(e.materialLibraries);for(var c=0,u=e.objects.length;c<u;c++){var E=e.objects[c],x=E.geometry,S=E.materials,w="Line"===x.type;if(0!==x.vertices.length){var A=new n.BufferGeometry;A.addAttribute("position",new n.BufferAttribute(new Float32Array(x.vertices),3)),x.normals.length>0?A.addAttribute("normal",new n.BufferAttribute(new Float32Array(x.normals),3)):A.computeVertexNormals(),x.uvs.length>0&&A.addAttribute("uv",new n.BufferAttribute(new Float32Array(x.uvs),2));for(var M=[],P=0,C=S.length;P<C;P++){var R=S[P],b=void 0;if(null!==this.materials&&(b=this.materials.create(R.name),w&&b&&!(b instanceof LineBasicMaterial))){var I=new LineBasicMaterial;I.copy(b),b=I}b||(b=w?new LineBasicMaterial:new n.MeshPhongMaterial,b.name=R.name),b.shading=R.smooth?n.SmoothShading:FlatShading,M.push(b)}var O;if(M.length>1){for(var P=0,C=S.length;P<C;P++){var R=S[P];A.addGroup(R.groupStart,R.groupCount,P)}var N=new MultiMaterial(M);O=w?new LineSegments(A,N):new n.Mesh(A,N)}else O=w?new LineSegments(A,M[0]):new n.Mesh(A,M[0]);O.name=E.name,T.add(O)}}return console.timeEnd("OBJLoader"),T}},t.exports=r},function(t,e,i){(function(e){"use strict";var n=i(55),r=function(t,i){function r(t){c=t,t.length>0?h=t[0]:i&&i("HMD not available")}function o(){var e=g.isPresenting;if(g.isPresenting=void 0!==h&&h.isPresenting,g.isPresenting){var i=h.getEyeParameters("left"),n=i.renderWidth,r=i.renderHeight;e||(_=t.getPixelRatio(),y=t.getSize(),t.setPixelRatio(1),t.setSize(2*n,r,!1))}else e&&(t.setPixelRatio(_),t.setSize(y.width,y.height,v))}function s(t){var e=2/(t.leftTan+t.rightTan),i=(t.leftTan-t.rightTan)*e*.5,n=2/(t.upTan+t.downTan),r=(t.upTan-t.downTan)*n*.5;return{scale:[e,n],offset:[i,r]}}function a(t,e,i,n){e=void 0===e||e,i=void 0===i?.01:i,n=void 0===n?1e4:n;var r=e?-1:1,o=new Matrix4,a=o.elements,l=s(t);return a[0]=l.scale[0],a[1]=0,a[2]=l.offset[0]*r,a[3]=0,a[4]=0,a[5]=l.scale[1],a[6]=-l.offset[1]*r,a[7]=0,a[8]=0,a[9]=0,a[10]=n/(i-n)*-r,a[11]=n*i/(i-n),a[12]=0,a[13]=0,a[14]=r,a[15]=0,o.transpose(),o}function l(t,e,i,n){var r=Math.PI/180,o={upTan:Math.tan(t.upDegrees*r),downTan:Math.tan(t.downDegrees*r),leftTan:Math.tan(t.leftDegrees*r),rightTan:Math.tan(t.rightDegrees*r)};return a(o,e,i,n)}var h,c,u,p,f=new n.Vector3,d=new n.Vector3,m=null;"VRFrameData"in window&&(m=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(r)["catch"](function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var g=this,y=t.getSize(),v=!1,_=t.getPixelRatio();this.getVRDisplay=function(){return h},this.setVRDisplay=function(t){h=t},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),c},this.setSize=function(e,i,n){if(y={width:e,height:i},v=n,g.isPresenting){var r=h.getEyeParameters("left");t.setPixelRatio(1),t.setSize(2*r.renderWidth,r.renderHeight,!1)}else t.setPixelRatio(_),t.setSize(e,i,n)};var b=t.domElement,T=[0,0,.5,1],E=[.5,0,.5,1];window.addEventListener("vrdisplaypresentchange",o,!1),this.setFullScreen=function(t){return new e(function(e,i){return void 0===h?void i(new Error("No VR hardware found.")):g.isPresenting===t?void e():void e(t?h.requestPresent([{source:b}]):h.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(t){return void 0!==h?h.requestAnimationFrame(t):window.requestAnimationFrame(t)},this.cancelAnimationFrame=function(t){void 0!==h?h.cancelAnimationFrame(t):window.cancelAnimationFrame(t)},this.submitFrame=function(){void 0!==h&&g.isPresenting&&h.submitFrame()},this.autoSubmitFrame=!0;var x=new n.PerspectiveCamera;x.layers.enable(1);var S=new n.PerspectiveCamera;S.layers.enable(2),this.render=function(e,i,n,r){if(h&&g.isPresenting){var o=e.autoUpdate;o&&(e.updateMatrixWorld(),e.autoUpdate=!1);var s=h.getEyeParameters("left"),a=h.getEyeParameters("right");f.fromArray(s.offset),d.fromArray(a.offset),Array.isArray(e)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var c,y,v=t.getSize(),_=h.getLayers();if(_.length){var b=_[0];c=null!==b.leftBounds&&4===b.leftBounds.length?b.leftBounds:T,y=null!==b.rightBounds&&4===b.rightBounds.length?b.rightBounds:E}else c=T,y=E;u={x:Math.round(v.width*c[0]),y:Math.round(v.height*c[1]),width:Math.round(v.width*c[2]),height:Math.round(v.height*c[3])},p={x:Math.round(v.width*y[0]),y:Math.round(v.height*y[1]),width:Math.round(v.width*y[2]),height:Math.round(v.height*y[3])},n?(t.setRenderTarget(n),n.scissorTest=!0):(t.setRenderTarget(null),t.setScissorTest(!0)),(t.autoClear||r)&&t.clear(),null===i.parent&&i.updateMatrixWorld(),i.matrixWorld.decompose(x.position,x.quaternion,x.scale),i.matrixWorld.decompose(S.position,S.quaternion,S.scale);var w=this.scale;return x.translateOnAxis(f,w),S.translateOnAxis(d,w),h.getFrameData?(h.depthNear=i.near,h.depthFar=i.far,h.getFrameData(m),x.projectionMatrix.elements=m.leftProjectionMatrix,S.projectionMatrix.elements=m.rightProjectionMatrix):(x.projectionMatrix=l(s.fieldOfView,!0,i.near,i.far),S.projectionMatrix=l(a.fieldOfView,!0,i.near,i.far)),n?(n.viewport.set(u.x,u.y,u.width,u.height),n.scissor.set(u.x,u.y,u.width,u.height)):(t.setViewport(u.x,u.y,u.width,u.height),t.setScissor(u.x,u.y,u.width,u.height)),t.render(e,x,n,r),n?(n.viewport.set(p.x,p.y,p.width,p.height),n.scissor.set(p.x,p.y,p.width,p.height)):(t.setViewport(p.x,p.y,p.width,p.height),t.setScissor(p.x,p.y,p.width,p.height)),t.render(e,S,n,r),n?(n.viewport.set(0,0,v.width,v.height),n.scissor.set(0,0,v.width,v.height),n.scissorTest=!1,t.setRenderTarget(null)):(t.setViewport(0,0,v.width,v.height),t.setScissorTest(!1)),o&&(e.autoUpdate=!0),void(g.autoSubmitFrame&&g.submitFrame())}t.render(e,i,n,r)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",o,!1)}};t.exports=r}).call(e,i(2))},function(t,e,i){"use strict";var n=i(55),r=function(t,e){function i(t){o=t,t.length>0?r=t[0]:e&&e("VR input not available.")}var r,o,s=this,a=new n.Matrix4,l=null;"VRFrameData"in window&&(l=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(i)["catch"](function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return r},this.setVRDisplay=function(t){r=t},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),o},this.getStandingMatrix=function(){return a},this.update=function(){if(r){var e;r.getFrameData&&(r.getFrameData(l),e=l.pose),!e.orientation&&r.getPose&&(e=r.getPose()),null!==e.orientation&&t.quaternion.fromArray(e.orientation),null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),this.standing&&(r.stageParameters?(t.updateMatrix(),a.fromArray(r.stageParameters.sittingToStandingTransform),t.applyMatrix(a)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(s.scale)}},this.resetPose=function(){r&&r.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){r=null}};t.exports=r},function(t,e,i){"use strict";var n=i(55);t.exports={cap:function(t,e,i){return e>i?Math.max(i,Math.min(e,t)):Math.max(e,Math.min(i,t))},rand:function(t,e){return t+Math.floor(Math.random()*(e-t))},mirrorPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.z;return i-=2*(i-e),{x:-t.x,y:t.y,z:i}},mirrorVelocity:function(t){return{x:-t.x,y:t.y,z:-t.z}},setTransparency:function(t,e){t.traverse(function(t){t instanceof n.Mesh&&(t.material.transparent=1!==e,t.material.opacity=e),t instanceof n.Line&&(t.material.transparent=1!==e,t.material.opacity=e)})}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(55),a=i(50),l=i(59),h=i(61),c=n(h),u=function(){function t(e,i){r(this,t),this.config=e,this.emitter=i,this.world=null,this.ball=null,this.net=null,this.paddle=null,this.ballNetContact=null,this.ballPaddleContact=null,this.raycaster=new s.Raycaster,this.isMobile=c["default"].isMobile(),this.speed=1}return o(t,[{key:"setupWorld",value:function(){this.world=new CANNON.World,this.world.gravity.set(0,-this.config.gravity,0),this.world.broadphase=new CANNON.NaiveBroadphase,this.world.solver.iterations=20,this.setupTable(),this.setupNet()}},{key:"setupNet",value:function(){this.net=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(this.config.tableWidth/2,this.config.netHeight/2,this.config.netThickness/2)),material:new CANNON.Material}),this.net._name="NET",this.net.position.set(0,this.config.tableHeight+this.config.netHeight/2,this.config.tablePositionZ),this.world.add(this.net)}},{key:"setupTable",value:function(){this.table=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(this.config.tableWidth/2,this.config.tableHeight/2,this.config.tableDepth/2)),material:new CANNON.Material}),this.table.position.y=this.config.tableHeight/2,this.table.position.z=this.config.tablePositionZ,this.table._name="table-2-player",this.table.addEventListener("collide",this.onBallTableCollision.bind(this)),this.world.add(this.table),this.upwardsTable=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(this.config.tableWidth/2,this.config.tableHeight/2,this.config.tableDepth/4)),material:new CANNON.Material}),this.upwardsTable.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),Math.PI/2),this.upwardsTable.position.z=this.config.tablePositionZ-this.config.tableHeight/2,this.upwardsTable.position.y=this.config.tableHeight+this.config.tableDepth/4,this.upwardsTable.collisionResponse=0,this.upwardsTable._name="upwards-table",this.upwardsTable.addEventListener("collide",this.onBallTableCollision.bind(this)),this.world.add(this.upwardsTable)}},{key:"addContactMaterial",value:function(t,e,i,n){var r=new CANNON.ContactMaterial(t,e,{friction:n,restitution:i});return this.world.addContactMaterial(r),r}},{key:"addBall",value:function(){if(!this.ball){var t=new CANNON.Body({mass:this.config.ballMass,shape:new CANNON.Sphere(this.config.ballRadius),material:new CANNON.Material});t.linearDamping=.1,this.addContactMaterial(t.material,this.table.material,.7,.3),this.addContactMaterial(t.material,this.upwardsTable.material,.7,.3),t.position.y=this.config.tableHeight/2,t.position.z=this.config.tablePositionZ,this.ball=t,this.world.add(t),this.initBallPosition()}}},{key:"increaseSpeed",value:function(){this.speed=Math.min(1.01*this.speed,1.5)}},{key:"onBallPaddleCollision",value:function(t){this.increaseSpeed(),this.emitter.emit(a.EVENT.BALL_PADDLE_COLLISION,t.body);var e=t.body.position.x-t.target.position.x;e=(0,l.cap)(e/this.config.paddleSize,-1,1);var i=t.body.position.z-(this.config.tablePositionZ+this.config.tableDepth/2);if(this.config.mode===a.MODE.MULTIPLAYER)t.body.velocity.z=-3.5*this.speed+1.2*i,this.isMobile?t.body.velocity.x=-e*t.body.velocity.z*.1:t.body.velocity.x=-e*t.body.velocity.z*.4,t.body.velocity.y=2*(1/this.speed)+1.2*i;else{var n=t.target.position.x/this.config.tableWidth*.5;t.body.velocity.z=-3.5*this.speed+.8*i,this.isMobile?t.body.velocity.x=1.2*-n-e*t.body.velocity.z*.2:t.body.velocity.x=1.2*-n-e*t.body.velocity.z*.3,t.body.velocity.y=2*(1/this.speed)+.8*i}}},{key:"onBallTableCollision",value:function(t){this.emitter.emit(a.EVENT.BALL_TABLE_COLLISION,t.body,t.target)}},{key:"setPaddlePosition",value:function(t,e,i){this.paddle.position.set(t,e,i)}},{key:"initBallPosition",
value:function(){this.speed=1,this.config.mode===a.MODE.SINGLEPLAYER?(this.ball.position.set(0,1.4,this.config.tablePositionZ+.1),this.ball.velocity.x=.5*(.5-Math.random()),this.ball.velocity.y=0,this.ball.velocity.z=2,this.ball.angularVelocity.x=0,this.ball.angularVelocity.y=0,this.ball.angularVelocity.z=0):(this.ball.position.set(0,this.config.tableHeight+.2,this.config.tablePositionZ-.4*this.config.tableDepth),this.ball.velocity.z=3,this.ball.velocity.x=.5*(Math.random()-.5),this.ball.velocity.y=2,this.ball.angularVelocity.x=0,this.ball.angularVelocity.y=0,this.ball.angularVelocity.z=0)}},{key:"predictCollisions",value:function(t,e){this.raycaster.set(this.ball.position.clone(),this.ball.velocity.clone().unit()),this.raycaster.far=this.ball.velocity.clone().length()*(e/1e3)*1.1;var i=this.raycaster.intersectObjects([t],!0);i.length&&(this.emitter.emit(a.EVENT.BALL_NET_COLLISION),this.ball.position.copy(i[0].point),this.ball.velocity.x*=.2,this.ball.velocity.y*=.2,this.ball.velocity.z*=.2)}},{key:"setMode",value:function(t){this.config.mode=t}},{key:"step",value:function(t){this.world.step(1/60,t,2)}}]),t}();e["default"]=u},function(t,e){"use strict";var i={};i.base64=function(t,e){return"data:"+t+";base64,"+e},i.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},i.isFirefox=function(){return/firefox/i.test(navigator.userAgent)},i.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},i.isIFrame=function(){try{return window.self!==window.top}catch(t){return!0}},i.appendQueryParameter=function(t,e,i){var n=t.indexOf("?")<0?"?":"&";return t+=n+e+"="+i},i.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},i.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},i.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},i.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},t.exports=i},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(55),a=i(63),l=n(a),h=i(64),c=n(h),u=i(65),p=n(u),f=i(99),d=n(f),m=function(){function e(t,i,n,o){r(this,e),this.config=i,this.emitter=n,this.scene=t,this.gravity=0,this.ballRadius=.03,this.ballPaddleBounciness=1,this.ballBoxBounciness=1,this.ballInitVelocity=1,this.paddleModel="box",this.activateTween=null,this.loader=o,this.font=null,this.container=null,this.initialized=!1,this.modeWasSelected=!1}return o(e,[{key:"setup",value:function(){var e=this,i=new s.FontLoader;return new t(function(n){t.all([new t(function(t){i.load("fonts/AntiqueOlive.json",function(i){e.antique=i,t()})}),new t(function(t){i.load("fonts/Futura.json",function(i){e.font=i,t()})})]).then(function(){e.container=new s.Group,e.container.position.z=1,e.container.position.y=1.6,e.container.rotation.y=Math.PI,e.scene.add(e.container),e.initialized=!0,e.message=new p["default"](e.scene,e.config,e.font,e.antique,e.emitter),e.message.hideMessage(),e.scoreDisplay=new l["default"](e.scene,e.config,e.font),e.countdown=new c["default"](e.scene,e.config,e.antique),e.countdown.hideCountdown(),(0,d["default"])(e.font,e.loader).then(function(t){e.arrows=t,e.scene.add(t),n()})["catch"](function(t){console.warn(t)})})["catch"](function(t){console.warn(t)})})["catch"](function(t){console.warn(t)})}}]),e}();e["default"]=m}).call(e,i(2))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(55),s=i(50),a=function(){function t(e,i,r){n(this,t),this.parent=e,this.font=r,this.config=i,this.lives=[],this.setupText()}return r(t,[{key:"setupText",value:function(){var t=new o.MeshBasicMaterial({color:16777215,transparent:!0}),e=new o.TextGeometry("0",{font:this.font,size:.35,height:.001,curveSegments:3});e.computeBoundingBox(),this.opponentScore=new o.Mesh(e,t),this.selfScore=new o.Mesh(e.clone(),t.clone()),this.selfScore.rotation.y=Math.PI/2,this.opponentScore.rotation.y=-Math.PI/2,this.parent.add(this.selfScore),this.parent.add(this.opponentScore),this.setSelfScore(0),this.setOpponentScore(0),this.opponentScore.visible=this.config.mode===s.MODE.MULTIPLAYER,this.lifeGroup=new o.Group;for(var i=0;i<this.config.startLives;i+=1){e=new o.CircleGeometry(.025,32),t=new o.MeshBasicMaterial({color:16777215,transparent:!0,side:o.DoubleSide,opacity:1});var n=new o.Mesh(e,t);n.position.x=.12*i,this.lives.push(n),this.lifeGroup.add(n)}this.lifeGroup.position.z=-1.4,this.lifeGroup.position.y=this.config.tableHeight+.24,this.lifeGroup.position.x=this.config.tableWidth/2,this.lifeGroup.rotation.y=Math.PI/2,this.lifeGroup.rotation.x=Math.PI,this.lifeGroup.visible=this.config.mode===s.MODE.SINGLEPLAYER,this.parent.add(this.lifeGroup)}},{key:"setSelfScore",value:function(t){this.selfScore.geometry.dynamic=!0,this.selfScore.geometry=new o.TextGeometry(""+t,{font:this.font,size:.35,height:.001,curveSegments:3}),this.selfScore.geometry.computeBoundingBox(),this.selfScore.geometry.verticesNeedUpdate=!0,this.selfScore.position.x=-this.config.tableWidth/2,this.selfScore.position.y=this.config.tableHeight+.2,this.selfScore.position.z=this.config.tablePositionZ+this.config.tableDepth/2.8+this.selfScore.geometry.boundingBox.max.x/2}},{key:"setOpponentScore",value:function(t){this.opponentScore.geometry=new o.TextGeometry(""+t,{font:this.font,size:.35,height:.001,curveSegments:3}),this.opponentScore.geometry.computeBoundingBox(),this.opponentScore.position.x=this.config.tableWidth/2,this.opponentScore.position.y=this.config.tableHeight+.2,this.opponentScore.position.z=this.config.tablePositionZ-this.config.tableDepth/4-this.opponentScore.geometry.boundingBox.max.x/2+.2}},{key:"setLives",value:function(t){this.lives.forEach(function(e,i){e.material.opacity=t>i?1:.3})}},{key:"hide",value:function(){this.opponentScore.visible=!1,this.selfScore.visible=!1,this.lives.forEach(function(t){t.visible=!1})}},{key:"show",value:function(t){this.opponentScore.visible=t,this.selfScore.visible=!0,this.lives.forEach(function(e){e.visible=!t})}}]),t}();e["default"]=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(55),s=.4,a=function(){function t(e,i,r){n(this,t),this.scene=e,this.font=r,this.config=i;var a=new o.MeshBasicMaterial({color:16777215,transparent:!0}),l=new o.TextGeometry("5",{font:this.font,size:s,height:.001,curveSegments:3});l.computeBoundingBox(),this.countdown=new o.Mesh(l,a),this.countdown.position.x=-l.boundingBox.max.x/2,this.countdown.position.y=this.config.tableHeight+.2,this.countdown.position.z=this.config.tablePositionZ+.5,this.scene.add(this.countdown)}return r(t,[{key:"setCountdown",value:function(t){var e=new o.TextGeometry(t,{font:this.font,size:s,height:.001,curveSegments:3});e.computeBoundingBox(),this.countdown.geometry=e,this.countdown.position.x=-e.boundingBox.max.x/2,this.countdown.position.y=this.config.tableHeight+.4}},{key:"showCountdown",value:function(){this.setCountdown(5),this.countdown.visible=!0}},{key:"hideCountdown",value:function(){this.countdown.visible=!1}}]),t}();e["default"]=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(66),l=n(a),h=i(67),c=n(h),u=i(55),p=i(7),f=n(p),d=i(98),m=n(d),g=16,y=.07,v=.06,_=function(){function t(e,i,n,r,s){o(this,t),this.emitter=s,this.scene=e,this.font=n,this.config=i,this.wrap=(0,l["default"])(g),this.buttons={},this.antique=r,this.messageGroup=new u.Group,this.intersectedButton=null,this.scene.add(this.messageGroup),this.setMessage("waiting"),this.showMessage(),this.crazyGroup=new u.Group,this.scene.add(this.crazyGroup),this.buttons[i.rainbowText]=new m["default"](this.crazyGroup,this.font,i.rainbowText,0,2,this.emitter,70,20,1,4),this.buttons[i.rainbowText].buttonGroup.position.z=200,this.buttons[i.rainbowText].buttonGroup.rotation.y=Math.PI}return s(t,[{key:"setMessage",value:function(t){var e,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"futura";(e=this.messageGroup).remove.apply(e,r(this.messageGroup.children));var o=[];o=f["default"].isArray(t)?t.reverse():this.wrap(t).split("\n").reverse();var s=new u.MeshBasicMaterial({color:16777215,transparent:!0}),a=0;o.forEach(function(t,e){var r=new u.TextGeometry(t,{font:"futura"===n?i.font:i.antique,size:"futura"===n?y:.15,height:.001,curveSegments:3});r.computeBoundingBox();var o=new u.Mesh(r,s);o.geometry=r,o.position.x=-r.boundingBox.max.x/2,o.position.y=e*(r.boundingBox.max.y+v),i.messageGroup.add(o),a=r.boundingBox.max.y});var l=o.length*(v+a);this.messageGroup.position.y=this.config.tableHeight+.6-l/2,this.messageGroup.position.z=this.config.tablePositionZ+.5}},{key:"gameOver",value:function(t){var e,i=t.self||t.opponent;(e=this.messageGroup).remove.apply(e,r(this.messageGroup.children));var n=new u.MeshBasicMaterial({color:16777215,transparent:!0}),o="";o=i?t.self>t.opponent?"YOU WON":"YOU LOST":t.highest+" "+(1===t.highest?"PT":"PTS");var s=new u.TextGeometry(o,{font:this.antique,size:y*(i?2.5:3.5),height:.001,curveSegments:3});s.computeBoundingBox();var a=new u.Mesh(s,n);a.position.x=-s.boundingBox.max.x/2,a.position.y=i?.25:.1,this.messageGroup.add(a);var l=i?-.15:-.1;if(this.buttons.exit=new m["default"](this.messageGroup,this.font,"exit",.25,l,this.emitter),this.buttons.restart=new m["default"](this.messageGroup,this.font,"restart",(-.25),l,this.emitter),i){s=new u.TextGeometry("You: "+t.self+" Opponent: "+t.opponent,{font:this.font,size:y,height:.001,curveSegments:3}),s.computeBoundingBox();var h=new u.Mesh(s,n);h.position.x=-s.boundingBox.max.x/2,h.position.y=.07,this.messageGroup.add(h)}this.messageGroup.position.y=this.config.tableHeight+.3}},{key:"showMessage",value:function(){this.messageGroup.visible=!0}},{key:"hideMessage",value:function(){this.messageGroup.visible=!1,this.buttons.exit&&(this.messageGroup.remove(this.buttons.exit.buttonGroup),this.messageGroup.remove(this.buttons.restart.buttonGroup))}},{key:"intersect",value:function(t,e){var i=t.intersectObjects((0,c["default"])(this.buttons).map(function(t){return t.hitbox}),!1);i.length>0&&!this.intersectedButton?(this.intersectedButton=i[0].object._name,e?this.buttons[this.intersectedButton].mouseEnter():this.buttons[this.intersectedButton].enter()):0===i.length&&this.intersectedButton&&(e?this.buttons[this.intersectedButton].mouseLeave():this.buttons[this.intersectedButton].leave(),this.intersectedButton=null)}},{key:"click",value:function(){this.intersectedButton&&(this.buttons[this.intersectedButton].emit(),this.intersectedButton=null)}}]),t}();e["default"]=_},function(t,e){var i=t.exports=function(t,e,i){"object"==typeof t&&(i=t,t=i.start,e=i.stop),"object"==typeof e&&(i=e,t=t||i.start,e=void 0),e||(e=t,t=0),i||(i={});var n=i.mode||"soft",r="hard"===n?/\b/:/(\S+\s+)/;return function(i){var o=i.toString().split(r).reduce(function(i,r){if("hard"===n)for(var o=0;o<r.length;o+=e-t)i.push(r.slice(o,o+e-t));else i.push(r);return i},[]);return o.reduce(function(i,n){if(""===n)return i;var r=n.replace(/\t/g,"    "),o=i.length-1;if(i[o].length+r.length>e)i[o]=i[o].replace(/\s+$/,""),r.split(/\n/).forEach(function(e){i.push(new Array(t+1).join(" ")+e.replace(/^\s+/,""))});else if(r.match(/\n/)){var s=r.split(/\n/);i[o]+=s.shift(),s.forEach(function(e){i.push(new Array(t+1).join(" ")+e.replace(/^\s+/,""))})}else i[o]+=r;return i},[new Array(t+1).join(" ")]).join("\n")}};i.soft=i,i.hard=function(t,e){return i(t,e,{mode:"hard"})}},function(t,e,i){"use strict";var n=i(68),r=i(71),o=i(96),s=i(97),a=o();n(a,{getPolyfill:o,implementation:r,shim:s}),t.exports=a},function(t,e,i){"use strict";var n=i(69),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,l=function(t){return"function"==typeof t&&"[object Function]"===o.call(t)},h=function(){var t={};try{a(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(i){return!1}},c=a&&h(),u=function(t,e,i,n){(!(e in t)||l(n)&&n())&&(c?a(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},p=function(t,e){var i=arguments.length>2?arguments[2]:{},o=n(e);r&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)u(t,o[a],e[o[a]],i[o[a]])};p.supportsDescriptors=!!c,t.exports=p},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=Array.prototype.slice,s=i(70),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),h=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),d=function(t){if("undefined"==typeof window||!f)return u(t);try{return u(t)}catch(e){return!1}},m=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===r.call(t),o=s(t),a=e&&"[object String]"===r.call(t),u=[];if(!e&&!i&&!o)throw new TypeError("Object.keys called on a non-object");var p=h&&i;if(a&&t.length>0&&!n.call(t,0))for(var f=0;f<t.length;++f)u.push(String(f));if(o&&t.length>0)for(var m=0;m<t.length;++m)u.push(String(m));else for(var g in t)p&&"prototype"===g||!n.call(t,g)||u.push(String(g));if(l)for(var y=d(t),v=0;v<c.length;++v)y&&"constructor"===c[v]||!n.call(t,c[v])||u.push(c[v]);return u};m.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return e(s(t)?o.call(t):t)}}}else Object.keys=m;return Object.keys||m},t.exports=m},function(t,e){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},function(t,e,i){"use strict";var n=i(72),r=i(75),o=i(76),s=o.call(Function.call,Object.prototype.propertyIsEnumerable);t.exports=function(t){var e=n.RequireObjectCoercible(t),i=[];for(var o in e)r(e,o)&&s(e,o)&&i.push(e[o]);return i}},function(t,e,i){"use strict";t.exports=i(73)},function(t,e,i){"use strict";var n=i(74),r=i(89),o=r(r({},n),{SameValueNonNumber:function(t,e){if("number"==typeof t||typeof t!=typeof e)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(t,e)}});t.exports=o},function(t,e,i){"use strict";var n=i(75),r=i(78),o=i(86),s=o("%TypeError%"),a=o("%SyntaxError%"),l=o("%Array%"),h=o("%String%"),c=o("%Object%"),u=o("%Number%"),p=o("%Symbol%",!0),f=o("%RegExp%"),d=!!p,m=i(87),g=i(88),y=u.MAX_SAFE_INTEGER||Math.pow(2,53)-1,v=i(89),_=i(90),b=i(91),T=i(92),E=parseInt,x=i(76),S=x.call(Function.call,l.prototype.slice),w=x.call(Function.call,h.prototype.slice),A=x.call(Function.call,f.prototype.test,/^0b[01]+$/i),M=x.call(Function.call,f.prototype.test,/^0o[0-7]+$/i),P=x.call(Function.call,f.prototype.exec),C=["","",""].join(""),R=new f("["+C+"]","g"),I=x.call(Function.call,f.prototype.test,R),O=/^[-+]0x[0-9a-f]+$/i,N=x.call(Function.call,f.prototype.test,O),L=x.call(Function.call,h.prototype.charCodeAt),D=x.call(Function.call,Object.prototype.toString),k=Math.floor,B=Math.abs,G=Object.create,F=c.getOwnPropertyDescriptor,V=c.isExtensible,U=["\t\n\x0B\f\r ","\u2028","\u2029\ufeff"].join(""),H=new RegExp("(^["+U+"]+)|(["+U+"]+$)","g"),j=x.call(Function.call,h.prototype.replace),z=function(t){return j(t,H,"")},W=i(93),X=i(95),Y=v(v({},W),{Call:function(t,e){var i=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new s(t+" is not a function");return t.apply(e,i)},ToPrimitive:r,ToNumber:function(t){var e=T(t)?t:r(t,u);if("symbol"==typeof e)throw new s("Cannot convert a Symbol value to a number");if("string"==typeof e){if(A(e))return this.ToNumber(E(w(e,2),2));if(M(e))return this.ToNumber(E(w(e,2),8));if(I(e)||N(e))return NaN;var i=z(e);if(i!==e)return this.ToNumber(i)}return u(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(m(e)||0===e||!g(e))return 0;var i=_(e)*k(B(e));return b(i,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(m(e)||e<=0)return 0;if(e>=255)return 255;var i=k(t);return i+.5<e?i+1:e<i+.5?i:i%2!==0?i+1:i},ToString:function(t){if("symbol"==typeof t)throw new s("Cannot convert a Symbol value to a string");return h(t)},ToObject:function(t){return this.RequireObjectCoercible(t),c(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,h);return"symbol"==typeof e?e:this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>y?y:e},CanonicalNumericIndexString:function(t){if("[object String]"!==D(t))throw new s("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:W.CheckObjectCoercible,IsArray:l.isArray||function(t){return"[object Array]"===D(t)},IsConstructor:function(t){return"function"==typeof t&&!!t.prototype},IsExtensible:Object.preventExtensions?function(t){return!T(t)&&V(t)}:function(t){return!0},IsInteger:function(t){if("number"!=typeof t||m(t)||!g(t))return!1;var e=B(t);return k(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(d){var e=t[p.match];if("undefined"!=typeof e)return W.ToBoolean(e)}return X(t)},SameValueZero:function(t,e){return t===e||m(t)&&m(e)},GetV:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var i=this.ToObject(t);return i[e]},GetMethod:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var i=this.GetV(t,e);if(null!=i){if(!this.IsCallable(i))throw new s(e+"is not a function");return i}},Get:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return t[e]},Type:function(t){return"symbol"==typeof t?"Symbol":W.Type(t)},SpeciesConstructor:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");var i=t.constructor;if("undefined"==typeof i)return e;if("Object"!==this.Type(i))throw new s("O.constructor is not an Object");var n=d&&p.species?i[p.species]:void 0;if(null==n)return e;if(this.IsConstructor(n))return n;throw new s("no constructor found")},CompletePropertyDescriptor:function(t){if(!this.IsPropertyDescriptor(t))throw new s("Desc must be a Property Descriptor");return this.IsGenericDescriptor(t)||this.IsDataDescriptor(t)?(n(t,"[[Value]]")||(t["[[Value]]"]=void 0),n(t,"[[Writable]]")||(t["[[Writable]]"]=!1)):(n(t,"[[Get]]")||(t["[[Get]]"]=void 0),n(t,"[[Set]]")||(t["[[Set]]"]=void 0)),n(t,"[[Enumerable]]")||(t["[[Enumerable]]"]=!1),n(t,"[[Configurable]]")||(t["[[Configurable]]"]=!1),t},Set:function(t,e,i,n){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");if("Boolean"!==this.Type(n))throw new s("Throw must be a Boolean");if(n)return t[e]=i,!0;try{t[e]=i}catch(r){return!1}},HasOwnProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return n(t,e)},HasProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return e in t},IsConcatSpreadable:function(t){if("Object"!==this.Type(t))return!1;if(d&&"symbol"==typeof p.isConcatSpreadable){var e=this.Get(t,Symbol.isConcatSpreadable);if("undefined"!=typeof e)return this.ToBoolean(e)}return this.IsArray(t)},Invoke:function(t,e){if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");var i=S(arguments,2),n=this.GetV(t,e);return this.Call(n,t,i)},GetIterator:function(t,e){if(!d)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var i=e;arguments.length<2&&(i=this.GetMethod(t,p.iterator));var n=this.Call(i,t);if("Object"!==this.Type(n))throw new s("iterator must return an object");return n},IteratorNext:function(t,e){var i=this.Invoke(t,"next",arguments.length<2?[]:[e]);if("Object"!==this.Type(i))throw new s("iterator next must return an object");return i},IteratorComplete:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(t,"done"))},IteratorValue:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.Get(t,"value")},IteratorStep:function(t){var e=this.IteratorNext(t),i=this.IteratorComplete(e);return i!==!0&&e},IteratorClose:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(e))throw new s("Assertion failed: completion is not a thunk for a Completion Record");var i=e,n=this.GetMethod(t,"return");if("undefined"==typeof n)return i();var r;try{var o=this.Call(n,t,[])}catch(a){throw r=i(),i=null,a}if(r=i(),i=null,"Object"!==this.Type(o))throw new s("iterator .return must return an object");return r},CreateIterResultObject:function(t,e){if("Boolean"!==this.Type(e))throw new s("Assertion failed: Type(done) is not Boolean");return{value:t,done:e}},RegExpExec:function(t,e){if("Object"!==this.Type(t))throw new s("R must be an Object");if("String"!==this.Type(e))throw new s("S must be a String");var i=this.Get(t,"exec");if(this.IsCallable(i)){var n=this.Call(i,t,[e]);if(null===n||"Object"===this.Type(n))return n;throw new s('"exec" method must return `null` or an Object')}return P(t,e)},ArraySpeciesCreate:function(t,e){if(!this.IsInteger(e)||e<0)throw new s("Assertion failed: length must be an integer >= 0");var i,n=0===e?0:e,r=this.IsArray(t);if(r&&(i=this.Get(t,"constructor"),"Object"===this.Type(i)&&d&&p.species&&(i=this.Get(i,p.species),null===i&&(i=void 0))),"undefined"==typeof i)return l(n);if(!this.IsConstructor(i))throw new s("C must be a constructor");return new i(n)},CreateDataProperty:function(t,e,i){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=F(t,e),r=n||"function"!=typeof V||V(t),o=n&&(!n.writable||!n.configurable);if(o||!r)return!1;var a={configurable:!0,enumerable:!0,value:i,writable:!0};return Object.defineProperty(t,e,a),!0},CreateDataPropertyOrThrow:function(t,e,i){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=this.CreateDataProperty(t,e,i);if(!n)throw new s("unable to create data property");return n},ObjectCreate:function(t,e){if(null!==t&&"Object"!==this.Type(t))throw new s("Assertion failed: proto must be null or an object");var i=arguments.length<2?[]:e;if(i.length>0)throw new a("es-abstract does not yet support internal slots");if(null===t&&!G)throw new a("native Object.create support is required to create null objects");return G(t)},AdvanceStringIndex:function(t,e,i){if("String"!==this.Type(t))throw new s("S must be a String");if(!this.IsInteger(e)||e<0||e>y)throw new s("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(i))throw new s("Assertion failed: unicode must be a Boolean");if(!i)return e+1;var n=t.length;if(e+1>=n)return e+1;var r=L(t,e);if(r<55296||r>56319)return e+1;var o=L(t,e+1);return o<56320||o>57343?e+1:e+2}});delete Y.CheckObjectCoercible,t.exports=Y},function(t,e,i){"use strict";var n=i(76);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,i){"use strict";var n=i(77);t.exports=Function.prototype.bind||n},function(t,e){"use strict";var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,o="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||r.call(e)!==o)throw new TypeError(i+e);for(var s,a=n.call(arguments,1),l=function(){if(this instanceof s){var i=e.apply(this,a.concat(n.call(arguments)));return Object(i)===i?i:this}return e.apply(t,a.concat(n.call(arguments)))},h=Math.max(0,e.length-a.length),c=[],u=0;u<h;u++)c.push("$"+u);if(s=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),e.prototype){var p=function(){};p.prototype=e.prototype,s.prototype=new p,p.prototype=null}return s}},function(t,e,i){"use strict";t.exports=i(79)},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,r=i(80),o=i(81),s=i(82),a=i(83),l=function(t,e){if("undefined"==typeof t||null===t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var i,n,s,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(i=t[a[s]],o(i)&&(n=i.call(t),r(n)))return n;throw new TypeError("No default value")},h=function(t,e){var i=t[e];if(null!==i&&"undefined"!=typeof i){if(!o(i))throw new TypeError(i+" returned for property "+e+" of object "+t+" is not a function");return i}};t.exports=function(t){if(r(t))return t;var e="default";arguments.length>1&&(arguments[1]===String?e="string":arguments[1]===Number&&(e="number"));var i;if(n&&(Symbol.toPrimitive?i=h(t,Symbol.toPrimitive):a(t)&&(i=Symbol.prototype.valueOf)),"undefined"!=typeof i){var o=i.call(t,e);if(r(o))return o;throw new TypeError("unable to convert exotic object to primitive")}return"default"===e&&(s(t)||a(t))&&(e="string"),l(t,"default"===e?"number":e)}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e){"use strict";var i=Function.prototype.toString,n=/^\s*class\b/,r=function(t){try{var e=i.call(t);return n.test(e)}catch(r){return!1}},o=function(t){try{return!r(t)&&(i.call(t),!0)}catch(e){return!1}},s=Object.prototype.toString,a="[object Function]",l="[object GeneratorFunction]",h="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(h)return o(t);if(r(t))return!1;var e=s.call(t);return e===a||e===l}},function(t,e){"use strict";var i=Date.prototype.getDay,n=function(t){try{return i.call(t),!0}catch(e){return!1}},r=Object.prototype.toString,o="[object Date]",s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(s?n(t):r.call(t)===o)}},function(t,e,i){"use strict";var n=Object.prototype.toString,r=i(84)();if(r){var o=Symbol.prototype.toString,s=/^Symbol\(.*\)$/,a=function(t){return"symbol"==typeof t.valueOf()&&s.test(o.call(t))};t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==n.call(t))return!1;try{return a(t)}catch(e){return!1}}}else t.exports=function(t){return!1}},function(t,e,i){(function(e){"use strict";var n=e.Symbol,r=i(85);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&r())))}}).call(e,function(){return this}())},function(t,e){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;var n=42;t[e]=n;for(e in t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;
if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==n||o.enumerable!==!0)return!1}return!0}},function(t,e,i){(function(e){"use strict";var i,n,r,o,s=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,l=Object.getPrototypeOf||function(t){return t.__proto__},h=n?l(n):i,c=r?r.constructor:i,u=o?l(o):i,p=o?o():i,f="undefined"==typeof Uint8Array?i:l(Uint8Array),d={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":a?l([][Symbol.iterator]()):i,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":i,"$ %AsyncFunction%":c,"$ %AsyncFunctionPrototype%":c?c.prototype:i,"$ %AsyncGenerator%":o?l(p):i,"$ %AsyncGeneratorFunction%":u,"$ %AsyncGeneratorPrototype%":u?u.prototype:i,"$ %AsyncIteratorPrototype%":p&&a&&Symbol.asyncIterator?p[Symbol.asyncIterator]():i,"$ %Atomics%":"undefined"==typeof Atomics?i:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?i:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?i:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?i:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?i:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":n?l(n()):i,"$ %GeneratorFunction%":h,"$ %GeneratorPrototype%":h?h.prototype:i,"$ %Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?i:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?i:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?i:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":a?l(l([][Symbol.iterator]())):i,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?i:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&a?l((new Map)[Symbol.iterator]()):i,"$ %MapPrototype%":"undefined"==typeof Map?i:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof e?i:e,"$ %PromisePrototype%":"undefined"==typeof e?i:e.prototype,"$ %PromiseProto_then%":"undefined"==typeof e?i:e.prototype.then,"$ %Promise_all%":"undefined"==typeof e?i:e.all,"$ %Promise_reject%":"undefined"==typeof e?i:e.reject,"$ %Promise_resolve%":"undefined"==typeof e?i:e.resolve,"$ %Proxy%":"undefined"==typeof Proxy?i:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?i:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?i:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&a?l((new Set)[Symbol.iterator]()):i,"$ %SetPrototype%":"undefined"==typeof Set?i:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":a?l(""[Symbol.iterator]()):i,"$ %StringPrototype%":String.prototype,"$ %Symbol%":a?Symbol:i,"$ %SymbolPrototype%":a?Symbol.prototype:i,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":s,"$ %TypedArray%":f,"$ %TypedArrayPrototype%":f?f.prototype:i,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?i:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?i:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?i:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?i:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?i:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?i:WeakSet.prototype};t.exports=function(t,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var i="$ "+t;if(!(i in d))throw new SyntaxError("intrinsic "+t+" does not exist!");if("undefined"==typeof d[i]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return d[i]}}).call(e,i(2))},function(t,e){t.exports=Number.isNaN||function(t){return t!==t}},function(t,e){var i=Number.isNaN||function(t){return t!==t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!i(t)&&t!==1/0&&t!==-(1/0)}},function(t,e,i){var n=i(76),r=n.call(Function.call,Object.prototype.hasOwnProperty),o=Object.assign;t.exports=function(t,e){if(o)return o(t,e);for(var i in e)r(e,i)&&(t[i]=e[i]);return t}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e){t.exports=function(t,e){var i=t%e;return Math.floor(i>=0?i:i+e)}},80,function(t,e,i){"use strict";var n=i(86),r=n("%Object%"),o=n("%TypeError%"),s=n("%String%"),a=i(87),l=i(88),h=i(90),c=i(91),u=i(81),p=i(94),f=i(75),d={ToPrimitive:p,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return a(e)?0:0!==e&&l(e)?h(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!l(e))return 0;var i=h(e)*Math.floor(Math.abs(e));return c(i,65536)},ToString:function(t){return s(t)},ToObject:function(t){return this.CheckObjectCoercible(t),r(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new o(e||"Cannot call method on "+t);return t},IsCallable:u,SameValue:function(t,e){return t===e?0!==t||1/t===1/e:a(t)&&a(e)},Type:function(t){return null===t?"Null":"undefined"==typeof t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in t)if(f(t,i)&&!e[i])return!1;var n=f(t,"[[Value]]"),r=f(t,"[[Get]]")||f(t,"[[Set]]");if(n&&r)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if("undefined"==typeof t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!f(t,"[[Get]]")&&!f(t,"[[Set]]"))},IsDataDescriptor:function(t){if("undefined"==typeof t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!f(t,"[[Value]]")&&!f(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if("undefined"==typeof t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if("undefined"==typeof t)return t;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(f(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),f(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),f(t,"value")&&(e["[[Value]]"]=t.value),f(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),f(t,"get")){var i=t.get;if("undefined"!=typeof i&&!this.IsCallable(i))throw new TypeError("getter must be a function");e["[[Get]]"]=i}if(f(t,"set")){var n=t.set;if("undefined"!=typeof n&&!this.IsCallable(n))throw new o("setter must be a function");e["[[Set]]"]=n}if((f(e,"[[Get]]")||f(e,"[[Set]]"))&&(f(e,"[[Value]]")||f(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=d},function(t,e,i){"use strict";var n=Object.prototype.toString,r=i(80),o=i(81),s={"[[DefaultValue]]":function(t){var e;if(e=arguments.length>1?arguments[1]:"[object Date]"===n.call(t)?String:Number,e===String||e===Number){var i,s,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(o(t[a[s]])&&(i=t[a[s]](),r(i)))return i;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};t.exports=function(t){return r(t)?t:arguments.length>1?s["[[DefaultValue]]"](t,arguments[1]):s["[[DefaultValue]]"](t)}},function(t,e,i){"use strict";var n=i(75),r=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,s=function(t){try{var e=t.lastIndex;return t.lastIndex=0,r.call(t),!0}catch(i){return!1}finally{t.lastIndex=e}},a=Object.prototype.toString,l="[object RegExp]",h="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!h)return a.call(t)===l;var e=o(t,"lastIndex"),i=e&&n(e,"value");return!!i&&s(t)}},function(t,e,i){"use strict";var n=i(71);t.exports=function(){return"function"==typeof Object.values?Object.values:n}},function(t,e,i){"use strict";var n=i(96),r=i(68);t.exports=function(){var t=n();return r(Object,{values:t},{values:function(){return Object.values!==t}}),t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(55),s=i(6),a=i(50),l=function(){function t(e,i,r,s,a,l){var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.4,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.2,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:.01,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:.04;n(this,t),this.font=i,this.emitter=l,this.parent=e,this.name=r,this.button=null,this.text=null,this.fontSize=p,this.buttonGroup=new o.Group,this.buttonGroup.name=r,this.buttonWidth=h,this.buttonHeight=c,this.borderWidth=u,this.makeButton(s,a),this.borderAnimation()}return r(t,[{key:"makeButton",value:function(t,e){var i=new o.MeshBasicMaterial({color:16777215,side:o.DoubleSide,transparent:!0,opacity:.5}),n=new o.PlaneGeometry(this.buttonWidth,this.borderWidth),r=new o.Mesh(n,i);r.position.y=this.buttonHeight/2-this.borderWidth/2,this.buttonGroup.add(r),n=new o.PlaneGeometry(this.buttonWidth,this.borderWidth),r=new o.Mesh(n,i),r.position.y=-this.buttonHeight/2+this.borderWidth/2,this.buttonGroup.add(r),n=new o.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),r=new o.Mesh(n,i),r.position.x=-this.buttonWidth/2+this.borderWidth/2,this.buttonGroup.add(r),n=new o.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),r=new o.Mesh(n,i),r.position.x=this.buttonWidth/2-this.borderWidth/2,this.buttonGroup.add(r);var s=new o.Group;i=new o.MeshBasicMaterial({color:16777215,side:o.DoubleSide}),n=new o.PlaneGeometry(this.buttonWidth,this.borderWidth),this.topAnimationBorder=new o.Mesh(n,i),n.translate(this.buttonWidth/2,0,0),this.topAnimationBorder.position.x=-this.buttonWidth/2,this.topAnimationBorder.position.y=this.buttonHeight/2-this.borderWidth/2,this.topAnimationBorder.scale.x=.001,s.add(this.topAnimationBorder),n=new o.PlaneGeometry(this.buttonWidth,this.borderWidth),this.bottomAnimationBorder=new o.Mesh(n,i),n.translate(-this.buttonWidth/2,0,0),this.bottomAnimationBorder.position.x=this.buttonWidth/2,this.bottomAnimationBorder.position.y=-this.buttonHeight/2+this.borderWidth/2,this.bottomAnimationBorder.scale.x=.001,s.add(this.bottomAnimationBorder),n=new o.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),this.leftAnimationBorder=new o.Mesh(n,i),n.translate(0,this.buttonHeight/2-this.borderWidth,0),this.leftAnimationBorder.position.y=-(this.buttonHeight/2-this.borderWidth),this.leftAnimationBorder.position.x=-this.buttonWidth/2+this.borderWidth/2,this.leftAnimationBorder.scale.y=.001,s.add(this.leftAnimationBorder),n=new o.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),this.rightAnimationBorder=new o.Mesh(n,i),n.translate(0,-(this.buttonHeight/2-this.borderWidth),0),this.rightAnimationBorder.position.y=this.buttonHeight/2-this.borderWidth,this.rightAnimationBorder.position.x=this.buttonWidth/2-this.borderWidth/2,this.rightAnimationBorder.scale.y=.001,s.add(this.rightAnimationBorder),s.position.z=.002,this.buttonGroup.add(s),n=new o.PlaneGeometry(this.buttonWidth,this.buttonHeight),i=new o.MeshBasicMaterial({transparent:!0,opacity:0}),this.hitbox=new o.Mesh(n,i),this.hitbox.position.z=-.001,this.hitbox._name=this.name,this.buttonGroup.add(this.hitbox),this.buttonGroup.position.x=t,this.buttonGroup.position.y=e,this.setupText(),this.parent.add(this.buttonGroup)}},{key:"setupText",value:function(){var t=new o.MeshBasicMaterial({color:16777215}),e=new o.TextGeometry(this.name.toUpperCase(),{font:this.font,size:this.fontSize,height:.001,curveSegments:3});e.computeBoundingBox(),this.text=new o.Mesh(e,t),this.text.position.x=-e.boundingBox.max.x/2,this.text.position.y=-e.boundingBox.max.y/2,this.text.position.z=.01,this.buttonGroup.add(this.text)}},{key:"borderAnimation",value:function(){this.timeline=new s.TimelineMax({paused:!0});var t=s.Power0.easeNone,e=2,i=2*this.buttonWidth+2*this.buttonHeight;this.timeline.to(this.topAnimationBorder.scale,e*(this.buttonWidth/i),{ease:t,x:1}),this.timeline.to(this.rightAnimationBorder.scale,e*(this.buttonHeight/i),{ease:t,y:1}),this.timeline.to(this.bottomAnimationBorder.scale,e*(this.buttonWidth/i),{ease:t,x:1}),this.timeline.to(this.leftAnimationBorder.scale,e*(this.buttonHeight/i),{ease:t,y:1}),this.timeline.call(this.emit.bind(this))}},{key:"setText",value:function(t){var e=new o.TextGeometry(t.toUpperCase(),{font:this.font,size:this.fontSize,height:.001,curveSegments:3});e.computeBoundingBox(),this.text.geometry=e,this.text.position.x=-e.boundingBox.max.x/2,this.text.position.y=-e.boundingBox.max.y/2,this.text.position.z=.01}},{key:"emit",value:function(){switch(this.timeline.pause(),this.timeline.seek(0),document.body.style.cursor="initial",this.name){case"restart":this.emitter.emit(a.EVENT.RESTART_BUTTON_PRESSED);break;case"exit":this.emitter.emit(a.EVENT.EXIT_BUTTON_PRESSED);break;case a.INITIAL_CONFIG.rainbowText:this.emitter.emit(a.EVENT.TOGGLE_RAINBOW_MODE);break;default:console.warn("unknown button")}}},{key:"mouseEnter",value:function(){document.body.style.cursor="pointer",this.rightAnimationBorder.scale.y=1,this.leftAnimationBorder.scale.y=1,this.topAnimationBorder.scale.x=1,this.bottomAnimationBorder.scale.x=1}},{key:"mouseLeave",value:function(){document.body.style.cursor="initial",this.rightAnimationBorder.scale.y=.001,this.leftAnimationBorder.scale.y=.001,this.topAnimationBorder.scale.x=.001,this.bottomAnimationBorder.scale.x=.001}},{key:"enter",value:function(){this.timeline.play(0)}},{key:"leave",value:function(){this.timeline.pause(),this.timeline.seek(0)}}]),t}();e["default"]=l},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(55);e["default"]=function(e,i){return new t(function(t){i.load("arrows.obj",function(e){var i=.9;e.scale.set(i,i,i);var r=new n.MeshLambertMaterial({color:16777215,side:n.DoubleSide});e.traverse(function(t){t instanceof n.Mesh&&(t.material=r)}),e.position.z=280,e.position.y=0;var o=new n.Group;o.add(e),t(o)})})}}).call(e,i(2))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(101),a=i(102),l=n(a),h=i(7),c=n(h),u=i(59),p=i(50),f={urls:["/audio/output.ogg","/audio/output.m4a","/audio/output.mp3","/audio/output.ac3"],sprite:{button:[0,1008.9795918367348],joined:[3e3,1019.8412698412698],lose:[6e3,1202.698412698412],miss:[9e3,500],net:[11e3,500],point:[13e3,792.0181405895689],racket01:[15e3,504.9659863945575],racket02:[17e3,504.96598639455925],racket03:[19e3,504.96598639455925],table01:[21e3,523.5147392290252],table02:[23e3,523.5147392290252],table03:[25e3,523.5147392290252],touch:[27e3,523.5147392290252],transition:[29e3,1019.8412698412689],type:[32e3,27.188208616777843],win:[34e3,1202.6984126984103]}},d=function(){function t(e){var i=this;r(this,t),this.config=e,this.muted=!1,this.error=!0,this.uiSprite=new s.Howl({src:f.urls,sprite:f.sprite,onload:function(){console.log("loaded"),i.error=!1}});var n="/audio/loops/";this.loopSounds=new l["default"],this.loopSounds.set("bass",new s.Howl({loop:!0,src:[n+"loop1-bass.mp3",n+"loop1-bass.ogg"],onload:function(){i.loopSounds.get("bass").play()}})),this.loopSounds.set("bass-pad",new s.Howl({loop:!0,src:[n+"loop1-bass-pad.mp3",n+"loop1-bass-pad.ogg"]})),this.loopSounds.set("bass-pad-synth",new s.Howl({loop:!0,src:[n+"loop1-bass-pad-synth.mp3",n+"loop1-bass-pad-synth.ogg"]})),this.loopSounds.set("waiting",new s.Howl({loop:!0,src:[n+"waiting.mp3",n+"waiting.ogg"]})),"true"===localStorage.muted&&this.mute()}return o(t,[{key:"playLoop",value:function(t){var e=this;if(!this.error){var i=0,n=!1;this.loopSounds.forEach(function(r,o){if(!n&&e.loopSounds.get(o).playing()){if(t===o)return void(n=!0);i=e.loopSounds.get(o).seek(),e.loopSounds.get(o).fade(1,0,1500),e.loopSounds.get(o).once("fade",function(){e.loopSounds.get(o).stop()})}}),n||(this.loopSounds.get(t).seek(i),this.loopSounds.get(t).fade(0,1,1500),this.loopSounds.get(t).play())}}},{key:"playUI",value:function(t){this.error||this.uiSprite.play(t)}},{key:"paddle",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0};if(!this.error){var t="racket0"+(0,u.rand)(1,4);this.uiSprite.play(t)}}},{key:"table",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:-1,z:-1};if(!(this.error||t.y>this.config.tableHeight+.1&&this.config.mode===p.MODE.MULTIPLAYER)){var i="table0"+(0,u.rand)(1,4);this.uiSprite.pos(t.x,t.y,t.z),t.y>this.config.tableHeight+.1?this.uiSprite.volume((0,u.cap)(e.z*-.5,0,1)):this.uiSprite.volume((0,u.cap)(e.y*-.5,0,1)),this.uiSprite.play(i)}}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"blur",value:function(){s.Howler.mute(!0)}},{key:"focus",value:function(){this.muted||s.Howler.mute(!1)}},{key:"mute",value:function(){(0,c["default"])(".mute img").attr("src","images/icon-mute-596bf2fb7a.svg"),localStorage.muted="true",s.Howler.mute(!0),this.muted=!0}},{key:"unmute",value:function(){(0,c["default"])(".mute img").attr("src","images/icon-unmute-cbfe8e0389.svg"),localStorage.muted="false",s.Howler.mute(!1),this.muted=!1}}]),t}();e["default"]=d},function(t,e,i){var n,r;(function(i,o){/*!
	 *  howler.js v2.0.15
	 *  howlerjs.com
	 *
	 *  (c) 2013-2018, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){"use strict";var s=function(){this.init()};s.prototype={init:function(){var t=this||a;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||a;if(t=parseFloat(t),e.ctx||m(),"undefined"!=typeof t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,a.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||a;e.ctx||m(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,a.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},unload:function(){for(var t=this||a,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&"undefined"!=typeof t.ctx.close&&(t.ctx.close(),t.ctx=null,m()),t},codecs:function(t){return(this||a)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||a;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;"undefined"==typeof e.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(i){t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch(i){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||a,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(i){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||a,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome/i.test(t._navigator&&t._navigator.userAgent);if(!t._mobileEnabled&&t.ctx&&e){t._mobileEnabled=!1,t.mobileAutoEnable=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var i=function(e){a._autoResume();var n=t.ctx.createBufferSource();n.buffer=t._scratchBuffer,n.connect(t.ctx.destination),"undefined"==typeof n.start?n.noteOn(0):n.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),n.onended=function(){n.disconnect(0),t._mobileEnabled=!0,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("click",i,!0);for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("unlock")}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&"undefined"!=typeof t.ctx.suspend&&a.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&"undefined"!=typeof t.ctx.resume&&a.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var a=new s,l=function(t){var e=this;return t.src&&0!==t.src.length?void e.init(t):void console.error("An array of source files must be passed with any new Howl.")};l.prototype={init:function(t){var e=this;return a.ctx||m(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=a.usingWebAudio&&!e._html5,"undefined"!=typeof a.ctx&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(a.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if(r=t._src[i],"string"!=typeof r){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=/^data:audio\/([^;,]+);/i.exec(r),n||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&a.codecs(n)){e=t._src[i];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new h(t),t._webAudio&&u(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if("undefined"==typeof t){t="__default";for(var o=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(o++,r=n._sounds[s]._id);1===o?t=null:r=null}}var l=r?n._soundById(r):n._inactiveSound();if(!l)return null;if(r&&!t&&(t=l._sprite||"__default"),"loaded"!==n._state){l._sprite=t,l._ended=!1;var h=l._id;return n._queue.push({event:"play",action:function(){n.play(h)}}),h}if(r&&!l._paused)return e||n._loadQueue("play"),l._id;n._webAudio&&a._autoResume();var c=Math.max(0,l._seek>0?l._seek:n._sprite[t][0]/1e3),u=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-c),p=1e3*u/Math.abs(l._rate);if(l._paused=!1,l._ended=!1,l._sprite=t,l._seek=c,l._start=n._sprite[t][0]/1e3,l._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,l._loop=!(!l._loop&&!n._sprite[t][2]),l._seek>=l._stop)return void n._ended(l);var f=l._node;if(n._webAudio){var d=function(){n._refreshBuffer(l);var t=l._muted||n._muted?0:l._volume;f.gain.setValueAtTime(t,a.ctx.currentTime),l._playStart=a.ctx.currentTime,"undefined"==typeof f.bufferSource.start?l._loop?f.bufferSource.noteGrainOn(0,c,86400):f.bufferSource.noteGrainOn(0,c,u):l._loop?f.bufferSource.start(0,c,86400):f.bufferSource.start(0,c,u),p!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),p)),e||setTimeout(function(){n._emit("play",l._id)},0)};"running"===a.state?d():(n.once("resume",d),n._clearTimer(l._id))}else{var m=function(){f.currentTime=c,f.muted=l._muted||n._muted||a._muted||f.muted,f.volume=l._volume*a.volume(),f.playbackRate=l._rate;try{var r=f.play();if(r&&"undefined"!=typeof i&&(r instanceof i||"function"==typeof r.then)?(n._playLock=!0,r.then(function(){n._playLock=!1,e||n._emit("play",l._id)})["catch"](function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.")})):e||n._emit("play",l._id),f.playbackRate=l._rate,f.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),p):(n._endTimers[l._id]=function(){n._ended(l),f.removeEventListener("ended",n._endTimers[l._id],!1)},f.addEventListener("ended",n._endTimers[l._id],!1))}catch(o){n._emit("playerror",l._id,o)}},g=window&&window.ejecta||!f.readyState&&a._navigator.isCocoonJS;if(f.readyState>=3||g)m();else{var y=function(){m(),f.removeEventListener(a._canPlayEvent,y,!1)};f.addEventListener(a._canPlayEvent,y,!1),n._clearTimer(l._id)}}return l._id},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;"undefined"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var o=i._soundById(n[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,i._stopFade(n[r]),o._node&&(i._webAudio?o._node.bufferSource&&("undefined"==typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),i._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),e||i._emit("stop",o._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if("undefined"==typeof e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var o=i._soundById(n[r]);o&&(o._muted=t,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,a.ctx.currentTime):o._node&&(o._node.muted=!!a._muted||t),i._emit("mute",o._id))}return i},volume:function(){var t,e,i=this,n=arguments;if(0===n.length)return i._volume;if(1===n.length||2===n.length&&"undefined"==typeof n[1]){var r=i._getSoundIds(),o=r.indexOf(n[0]);o>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else n.length>=2&&(t=parseFloat(n[0]),e=parseInt(n[1],10));var s;if(!("undefined"!=typeof t&&t>=0&&t<=1))return s=e?i._soundById(e):i._sounds[0],s?s._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,n)}}),i;"undefined"==typeof e&&(i._volume=t),e=i._getSoundIds(e);for(var l=0;l<e.length;l++)s=i._soundById(e[l]),s&&(s._volume=t,n[2]||i._stopFade(e[l]),i._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(t,a.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=t*a.volume()),i._emit("volume",s._id));return i},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;r.volume(t,n);for(var o=r._getSoundIds(n),s=0;s<o.length;s++){var l=r._soundById(o[s]);if(l){if(n||r._stopFade(o[s]),r._webAudio&&!l._muted){var h=a.ctx.currentTime,c=h+i/1e3;l._volume=t,l._node.gain.setValueAtTime(t,h),l._node.gain.linearRampToValueAtTime(e,c)}r._startFadeInterval(l,t,e,i,o[s],"undefined"==typeof n)}}return r},_startFadeInterval:function(t,e,i,n,r,o){var s=this,a=e,l=i-e,h=Math.abs(l/.01),c=Math.max(4,h>0?n/h:n),u=Date.now();t._fadeTo=i,t._interval=setInterval(function(){var r=(Date.now()-u)/n;u=Date.now(),a+=l*r,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,s._webAudio?t._volume=a:s.volume(a,t._id,!0),o&&(s._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(i,t._id),s._emit("fade",t._id))},c)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return i=n._soundById(parseInt(r[0],10)),!!i&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var o=n._getSoundIds(e),s=0;s<o.length;s++)i=n._soundById(o[s]),i&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),o=r.indexOf(n[0]);o>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));var s;if("number"!=typeof t)return s=i._soundById(e),s?s._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,n)}}),i;"undefined"==typeof e&&(i._rate=t),e=i._getSoundIds(e);for(var l=0;l<e.length;l++)if(s=i._soundById(e[l])){s._rateSeek=i.seek(e[l]),s._playStart=i._webAudio?a.ctx.currentTime:s._playStart,s._rate=t,i._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(t,a.ctx.currentTime):s._node&&(s._node.playbackRate=t);var h=i.seek(e[l]),c=(i._sprite[s._sprite][0]+i._sprite[s._sprite][1])/1e3-h,u=1e3*c/Math.abs(s._rate);!i._endTimers[e[l]]&&s._paused||(i._clearTimer(e[l]),i._endTimers[e[l]]=setTimeout(i._ended.bind(i,s),u)),i._emit("rate",s._id)}return i},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),o=r.indexOf(n[0]);o>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("undefined"==typeof e)return i;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var s=i._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var l=i.playing(e)?a.ctx.currentTime-s._playStart:0,h=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(h+l*Math.abs(s._rate))}return s._node.currentTime}var c=i.playing(e);c&&i.pause(e,!0),s._seek=t,s._ended=!1,i._clearTimer(e),!i._webAudio&&s._node&&(s._node.currentTime=t);var u=function(){i._emit("seek",e),c&&i.play(e,!0)};if(c&&!i._webAudio){var p=function(){i._playLock?setTimeout(p,0):u()};setTimeout(p,0)}else u()}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++){if(e[i]._paused||t.stop(e[i]._id),!t._webAudio){var n=/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent);n||(e[i]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(a._canPlayEvent,e[i]._loadFn,!1)}delete e[i]._node,t._clearTimer(e[i]._id)}var r=a._howls.indexOf(t);r>=0&&a._howls.splice(r,1);var o=!0;for(i=0;i<a._howls.length;i++)if(a._howls[i]._src===t._src){o=!1;break}return c&&o&&delete c[t._src],a.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this,o=r["_on"+t];return"function"==typeof e&&o.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),r},off:function(t,e,i){var n=this,r=n["_on"+t],o=0;if("number"==typeof e&&(i=e,e=null),e||i)for(o=0;o<r.length;o++){var s=i===r[o].id;if(e===r[o].fn&&s||!e&&s){r.splice(o,1);break}}else if(t)n["_on"+t]=[];else{var a=Object.keys(n);for(o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(n[a[o]])&&(n[a[o]]=[])}return n},once:function(t,e,i){var n=this;return n.on(t,e,i,1),n},_emit:function(t,e,i){for(var n=this,r=n["_on"+t],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,r[o].fn),0),r[o].once&&n.off(t,r[o].fn,r[o].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=a.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),a._autoSuspend()),e._webAudio||n||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new h(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){var e=this;if("undefined"==typeof t){for(var i=[],n=0;n<e._sounds.length;n++)i.push(e._sounds[n]._id);return i}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=a.ctx.createBufferSource(),t._node.bufferSource.buffer=c[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,a.ctx.currentTime),e},_cleanBuffer:function(t){var e=this;if(a._scratchBuffer&&t.bufferSource){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=a._scratchBuffer}catch(i){}}return t.bufferSource=null,e}};var h=function(t){this._parent=t,this.init()};h.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++a._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=a._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),t._node.gain.setValueAtTime(i,a.ctx.currentTime),t._node.paused=!0,t._node.connect(a.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(a._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=i*a.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++a._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(a._canPlayEvent,t._loadFn,!1)}};var c={},u=function(t){var e=t._src;if(c[e])return t._duration=c[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);f(n.buffer,t)}else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.withCredentials=t._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var e=(o.status+"")[0];return"0"!==e&&"2"!==e&&"3"!==e?void t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+"."):void f(o.response,t)},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete c[e],t.load())},p(o)}},p=function(t){try{t.send()}catch(e){t.onerror()}},f=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(c[e._src]=t,d(e,t)):n()};"undefined"!=typeof i&&1===a.ctx.decodeAudioData.length?a.ctx.decodeAudioData(t).then(r)["catch"](n):a.ctx.decodeAudioData(t,r,n)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},m=function(){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(t){a.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),i=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=i?parseInt(i[1],10):null;if(e&&n&&n<9){var r=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());(a._navigator&&a._navigator.standalone&&!r||a._navigator&&!a._navigator.standalone&&!r)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:1,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()};n=[],r=function(){return{Howler:a,Howl:l}}.apply(e,n),!(void 0!==r&&(t.exports=r)),e.Howler=a,e.Howl=l,"undefined"!=typeof window?(window.HowlerGlobal=s,window.Howler=a,window.Howl=l,window.Sound=h):"undefined"!=typeof o&&(o.HowlerGlobal=s,o.Howler=a,o.Howl=l,o.Sound=h)}(),/*!
	 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
	 *  
	 *  howler.js v2.0.15
	 *  howlerjs.com
	 *
	 *  (c) 2013-2018, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],"undefined"!=typeof n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,r="number"!=typeof r?a[4]:r,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(s._orientation=[t,e,i,n,r,o],"undefined"!=typeof s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(t,e,i,n,r,o),s)},Howl.prototype.init=function(t){return function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var r="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var o=n._getSoundIds(i),s=0;s<o.length;s++){var a=n._soundById(o[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,r),"spatial"===r?"undefined"!=typeof a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,i,n,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,i,n,r)}}),o;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,"undefined"==typeof r){if("number"!=typeof e)return o._pos;o._pos=[e,i,n]}for(var s=o._getSoundIds(r),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,i,n],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),"undefined"!=typeof l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(e,i,n)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(e,i,n,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,i,n,r)}}),o;if(i="number"!=typeof i?o._orientation[1]:i,n="number"!=typeof n?o._orientation[2]:n,"undefined"==typeof r){if("number"!=typeof e)return o._orientation;o._orientation=[e,i,n]}for(var s=o._getSoundIds(r),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,i,n],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),t(l,"spatial")),"undefined"!=typeof l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(e,i,n)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var e,i,n,r=this,o=arguments;if(!r._webAudio)return r;if(0===o.length)return r._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return n=r._soundById(parseInt(o[0],10)),n?n._pannerAttr:r._pannerAttr;e=o[0],"undefined"==typeof i&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:"undefined"!=typeof e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!=typeof e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!=typeof e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:"undefined"!=typeof e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:"undefined"!=typeof e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:"undefined"!=typeof e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:"undefined"!=typeof e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===o.length&&(e=o[0],i=parseInt(o[1],10));for(var s=r._getSoundIds(i),a=0;a<s.length;a++)if(n=r._soundById(s[a])){var l=n._pannerAttr;l={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:l.maxDistance,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:l.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:l.panningModel};var h=n._panner;h?(h.coneInnerAngle=l.coneInnerAngle,h.coneOuterAngle=l.coneOuterAngle,h.coneOuterGain=l.coneOuterGain,h.distanceModel=l.distanceModel,h.maxDistance=l.maxDistance,h.refDistance=l.refDistance,h.rolloffFactor=l.rolloffFactor,h.panningModel=l.panningModel):(n._pos||(n._pos=r._pos||[0,0,-.5]),t(n,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,"undefined"!=typeof t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),"undefined"!=typeof t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(e,i(2),function(){return this}())},function(t,e,i){"use strict";t.exports=i(103)()?Map:i(104)},function(t,e){"use strict";t.exports=function(){var t,e,i;if("function"!=typeof Map)return!1;try{t=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(n){return!1}return"[object Map]"===String(t)&&(3===t.size&&("function"==typeof t.clear&&("function"==typeof t["delete"]&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.get&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.set&&("function"==typeof t.values&&(e=t.entries(),i=e.next(),i.done===!1&&(!!i.value&&("raz"===i.value[0]&&"one"===i.value[1])))))))))))))}},function(t,e,i){"use strict";var n,r=i(105),o=i(106),s=i(115),a=i(40),l=i(34),h=i(25),c=i(24),u=i(120),p=i(125),f=i(129),d=i(143),m=i(146),g=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;t.exports=n=function(){var t,e,i,r=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return i=m&&s&&Map!==n?s(new Map,v(this)):this,null!=r&&p(r),y(i,{__mapKeysData__:h("c",t=[]),__mapValuesData__:h("c",e=[])}),r?(f(r,function(i){var n=l(i)[0];i=i[1],o.call(t,n)===-1&&(t.push(n),e.push(i))},i),i):i},m&&(s&&s(n,Map),n.prototype=Object.create(Map.prototype,{constructor:h(n)})),c(y(n.prototype,{clear:h(function(){this.__mapKeysData__.length&&(r.call(this.__mapKeysData__),r.call(this.__mapValuesData__),this.emit("_clear"))}),"delete":h(function(t){var e=o.call(this.__mapKeysData__,t);return e!==-1&&(this.__mapKeysData__.splice(e,1),this.__mapValuesData__.splice(e,1),this.emit("_delete",e,t),!0)}),entries:h(function(){return new d(this,"key+value")}),forEach:h(function(t){var e,i,n=arguments[1];for(a(t),e=this.entries(),i=e._next();void 0!==i;)g.call(t,n,this.__mapValuesData__[i],this.__mapKeysData__[i],this),i=e._next()}),get:h(function(t){var e=o.call(this.__mapKeysData__,t);if(e!==-1)return this.__mapValuesData__[e]}),has:h(function(t){return o.call(this.__mapKeysData__,t)!==-1}),keys:h(function(){return new d(this,"key")}),set:h(function(t,e){var i,n=o.call(this.__mapKeysData__,t);return n===-1&&(n=this.__mapKeysData__.push(t)-1,i=!0),this.__mapValuesData__[n]=e,i&&this.emit("_add",n,t),this}),size:h.gs(function(){return this.__mapKeysData__.length}),values:h(function(){return new d(this,"value")}),toString:h(function(){return"[object Map]"})})),Object.defineProperty(n.prototype,u.iterator,h(function(){return this.entries()})),Object.defineProperty(n.prototype,u.toStringTag,h("c","Map"))},function(t,e,i){"use strict";var n=i(34);t.exports=function(){return n(this).length=0,this}},function(t,e,i){"use strict";var n=i(107),r=i(110),o=i(34),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,l=Math.abs,h=Math.floor;t.exports=function(t){var e,i,c,u;if(!n(t))return s.apply(this,arguments);for(i=r(o(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?h(c):r(this.length)-h(l(c)),e=c;e<i;++e)if(a.call(this,e)&&(u=this[e],n(u)))return e;return-1}},function(t,e,i){"use strict";t.exports=i(108)()?Number.isNaN:i(109)},function(t,e){"use strict";t.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},function(t,e){"use strict";t.exports=function(t){return t!==t}},function(t,e,i){"use strict";var n=i(111),r=Math.max;t.exports=function(t){return r(0,n(t))}},function(t,e,i){"use strict";var n=i(112),r=Math.abs,o=Math.floor;t.exports=function(t){return isNaN(t)?0:(t=Number(t),0!==t&&isFinite(t)?n(t)*o(r(t)):t)}},function(t,e,i){"use strict";t.exports=i(113)()?Math.sign:i(114)},function(t,e){"use strict";t.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&t(-20)===-1)}},function(t,e){"use strict";t.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},function(t,e,i){"use strict";t.exports=i(116)()?Object.setPrototypeOf:i(117)},function(t,e){"use strict";var i=Object.create,n=Object.getPrototypeOf,r={};t.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||i;return"function"==typeof t&&n(t(e(null),r))===r}},function(t,e,i){"use strict";var n,r=i(118),o=i(34),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(t,e){if(o(t),null===e||r(e))return t;throw new TypeError("Prototype must be null or an object")},t.exports=function(t){var e,i;return t?(2===t.level?t.set?(i=t.set,e=function(t,e){return i.call(n(t,e),e),t}):e=function(t,e){return n(t,e).__proto__=e,t}:e=function r(t,e){var i;return n(t,e),i=s.call(r.nullPolyfill,t),i&&delete r.nullPolyfill.__proto__,null===e&&(e=r.nullPolyfill),t.__proto__=e,i&&a(r.nullPolyfill,"__proto__",l),t},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),i={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{t=n.set,t.call(e,i)}catch(r){}if(Object.getPrototypeOf(e)===i)return{set:t,level:2}}return e.__proto__=i,Object.getPrototypeOf(e)===i?{level:2}:(e={},e.__proto__=i,Object.getPrototypeOf(e)===i&&{level:1})}()),i(119)},function(t,e,i){"use strict";var n=i(32),r={"function":!0,object:!0};t.exports=function(t){return n(t)&&r[typeof t]||!1}},function(t,e,i){"use strict";var n,r=Object.create;i(116)()||(n=i(117)),t.exports=function(){var t,e,i;return n?1!==n.level?r:(t={},e={},i={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){return"__proto__"===t?void(e[t]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(e[t]=i)}),Object.defineProperties(t,e),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:t}),function(e,i){return r(null===e?t:e,i)}):r}()},function(t,e,i){"use strict";t.exports=i(121)()?Symbol:i(122)},function(t,e){"use strict";var i={object:!0,symbol:!0};t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(e){return!1}return!!i[typeof Symbol.iterator]&&(!!i[typeof Symbol.toPrimitive]&&!!i[typeof Symbol.toStringTag])}},function(t,e,i){"use strict";var n,r,o,s,a=i(25),l=i(123),h=Object.create,c=Object.defineProperties,u=Object.defineProperty,p=Object.prototype,f=h(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),s=!0}catch(d){}}var m=function(){var t=h(null);return function(e){for(var i,n,r=0;t[e+(r||"")];)++r;return e+=r||"",t[e]=!0,i="@@"+e,u(p,i,a.gs(null,function(t){n||(n=!0,u(this,i,a(t)),n=!1)})),i}}();o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return r(t)},t.exports=r=function g(t){var e;if(this instanceof g)throw new TypeError("Symbol is not a constructor");return s?n(t):(e=h(o.prototype),t=void 0===t?"":String(t),c(e,{__description__:a("",t),__name__:a("",m(t))}))},c(r,{"for":a(function(t){return f[t]?f[t]:f[t]=r(String(t))}),keyFor:a(function(t){var e;l(t);for(e in f)if(f[e]===t)return e}),hasInstance:a("",n&&n.hasInstance||r("hasInstance")),isConcatSpreadable:a("",n&&n.isConcatSpreadable||r("isConcatSpreadable")),iterator:a("",n&&n.iterator||r("iterator")),match:a("",n&&n.match||r("match")),replace:a("",n&&n.replace||r("replace")),search:a("",n&&n.search||r("search")),species:a("",n&&n.species||r("species")),split:a("",n&&n.split||r("split")),toPrimitive:a("",n&&n.toPrimitive||r("toPrimitive")),toStringTag:a("",n&&n.toStringTag||r("toStringTag")),unscopables:a("",n&&n.unscopables||r("unscopables"))}),c(o.prototype,{constructor:a(r),toString:a("",function(){return this.__name__})}),c(r.prototype,{toString:a(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:a(function(){return l(this)})}),u(r.prototype,r.toPrimitive,a("",function(){var t=l(this);return"symbol"==typeof t?t:t.toString()})),u(r.prototype,r.toStringTag,a("c","Symbol")),u(o.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),u(o.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},function(t,e,i){"use strict";var n=i(124);t.exports=function(t){if(!n(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},function(t,e,i){"use strict";var n=i(126);t.exports=function(t){if(!n(t))throw new TypeError(t+" is not iterable");return t}},function(t,e,i){"use strict";var n=i(127),r=i(32),o=i(128),s=i(120).iterator,a=Array.isArray;t.exports=function(t){return!!r(t)&&(!!a(t)||(!!o(t)||(!!n(t)||"function"==typeof t[s])))}},function(t,e){"use strict";var i=Object.prototype.toString,n=i.call(function(){return arguments}());t.exports=function(t){return i.call(t)===n}},function(t,e){"use strict";var i=Object.prototype.toString,n=i.call("");t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||i.call(t)===n)||!1}},function(t,e,i){"use strict";var n=i(127),r=i(40),o=i(128),s=i(130),a=Array.isArray,l=Function.prototype.call,h=Array.prototype.some;t.exports=function(t,e){var i,c,u,p,f,d,m,g,y=arguments[2];if(a(t)||n(t)?i="array":o(t)?i="string":t=s(t),r(e),u=function(){p=!0},"array"===i)return void h.call(t,function(t){return l.call(e,y,t,u),p});if("string"!==i)for(c=t.next();!c.done;){if(l.call(e,y,c.value,u),p)return;c=t.next()}else for(d=t.length,f=0;f<d&&(m=t[f],f+1<d&&(g=m.charCodeAt(0),g>=55296&&g<=56319&&(m+=t[++f])),l.call(e,y,m,u),!p);++f);}},function(t,e,i){"use strict";var n=i(127),r=i(128),o=i(131),s=i(142),a=i(125),l=i(120).iterator;t.exports=function(t){return"function"==typeof a(t)[l]?t[l]():n(t)?new o(t):r(t)?new s(t):new o(t)}},function(t,e,i){"use strict";var n,r=i(115),o=i(37),s=i(25),a=i(120),l=i(132),h=Object.defineProperty;n=t.exports=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");l.call(this,t),e=e?o.call(e,"key+value")?"key+value":o.call(e,"key")?"key":"value":"value",h(this,"__kind__",s("",e))},r&&r(n,l),delete n.prototype.constructor,n.prototype=Object.create(l.prototype,{_resolve:s(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),h(n.prototype,a.toStringTag,s("c","Array Iterator"))},function(t,e,i){"use strict";var n,r=i(105),o=i(26),s=i(40),a=i(34),l=i(25),h=i(133),c=i(120),u=Object.defineProperty,p=Object.defineProperties;t.exports=n=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:l("w",a(t)),__context__:l("w",e),__nextIndex__:l("w",0)}),e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,o({_next:l(function(){var t;if(this.__list__)return this.__redo__&&(t=this.__redo__.shift(),void 0!==t)?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:l(function(t){return this.__list__[t]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},h({_onAdd:l(function(t){if(!(t>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void u(this,"__redo__",l("c",[t]));this.__redo__.forEach(function(e,i){e>=t&&(this.__redo__[i]=++e)},this),this.__redo__.push(t)}}),_onDelete:l(function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(e=this.__redo__.indexOf(t),e!==-1&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,i){e>t&&(this.__redo__[i]=--e)},this)))}),_onClear:l(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),u(n.prototype,c.iterator,l(function(){return this}))},function(t,e,i){"use strict";var n,r=i(134),o=i(35),s=i(40),a=i(139),l=i(40),h=i(34),c=Function.prototype.bind,u=Object.defineProperty,p=Object.prototype.hasOwnProperty;n=function(t,e,i){var n,o=h(e)&&l(e.value);return n=r(e),delete n.writable,delete n.value,n.get=function(){return!i.overwriteDefinition&&p.call(this,t)?o:(e.value=c.call(o,i.resolveContext?i.resolveContext(this):this),u(this,t,e),this[t])},n},t.exports=function(t){var e=o(arguments[1]);return null!=e.resolveContext&&s(e.resolveContext),a(t,function(t,i){return n(i,t,e)})}},function(t,e,i){"use strict";var n=i(135),r=i(26),o=i(34);t.exports=function(t){var e=Object(o(t)),i=arguments[1],s=Object(arguments[2]);if(e!==t&&!i)return e;var a={};return i?n(i,function(e){(s.ensure||e in t)&&(a[e]=t[e])}):r(a,t),a}},function(t,e,i){"use strict";t.exports=i(136)()?Array.from:i(137)},function(t,e){"use strict";t.exports=function(){var t,e,i=Array.from;return"function"==typeof i&&(t=["raz","dwa"],e=i(t),Boolean(e&&e!==t&&"dwa"===e[1]))}},function(t,e,i){"use strict";var n=i(120).iterator,r=i(127),o=i(138),s=i(110),a=i(40),l=i(34),h=i(32),c=i(128),u=Array.isArray,p=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;t.exports=function(t){var e,i,m,g,y,v,_,b,T,E,x=arguments[1],S=arguments[2];if(t=Object(l(t)),h(x)&&a(x),this&&this!==Array&&o(this))e=this;else{if(!x){if(r(t))return y=t.length,1!==y?Array.apply(null,t):(g=new Array(1),g[0]=t[0],g);if(u(t)){for(g=new Array(y=t.length),i=0;i<y;++i)g[i]=t[i];return g}}g=[]}if(!u(t))if(void 0!==(T=t[n])){for(_=a(T).call(t),e&&(g=new e),b=_.next(),i=0;!b.done;)E=x?p.call(x,S,b.value,i):b.value,e?(f.value=E,d(g,i,f)):g[i]=E,b=_.next(),++i;y=i}else if(c(t)){for(y=t.length,e&&(g=new e),i=0,m=0;i<y;++i)E=t[i],i+1<y&&(v=E.charCodeAt(0),v>=55296&&v<=56319&&(E+=t[++i])),E=x?p.call(x,S,E,m):E,e?(f.value=E,d(g,m,f)):g[m]=E,++m;y=m}if(void 0===y)for(y=s(t.length),e&&(g=new e(y)),i=0;i<y;++i)E=x?p.call(x,S,t[i],i):t[i],e?(f.value=E,d(g,i,f)):g[i]=E;return e&&(f.value=null,g.length=y),g}},function(t,e,i){"use strict";var n=Object.prototype.toString,r=n.call(i(33));t.exports=function(t){return"function"==typeof t&&n.call(t)===r}},function(t,e,i){"use strict";var n=i(40),r=i(140),o=Function.prototype.call;t.exports=function(t,e){var i={},s=arguments[2];return n(e),r(t,function(t,n,r,a){i[n]=o.call(e,s,t,n,r,a)}),i}},function(t,e,i){"use strict";t.exports=i(141)("forEach")},function(t,e,i){"use strict";var n=i(40),r=i(34),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;t.exports=function(t,e){return function(i,h){var c,u=arguments[2],p=arguments[3];return i=Object(r(i)),n(h),c=a(i),p&&c.sort("function"==typeof p?o.call(p,i):void 0),"function"!=typeof t&&(t=c[t]),s.call(t,c,function(t,n){return l.call(i,t)?s.call(h,u,i[t],t,i,n):e})}}},function(t,e,i){"use strict";var n,r=i(115),o=i(25),s=i(120),a=i(132),l=Object.defineProperty;n=t.exports=function(t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t=String(t),a.call(this,t),l(this,"__length__",o("",t.length))},r&&r(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(t){var e,i=this.__list__[t];return this.__nextIndex__===this.__length__?i:(e=i.charCodeAt(0),e>=55296&&e<=56319?i+this.__list__[this.__nextIndex__++]:i)})}),l(n.prototype,s.toStringTag,o("c","String Iterator"))},function(t,e,i){"use strict";var n,r=i(115),o=i(25),s=i(132),a=i(120).toStringTag,l=i(144),h=Object.defineProperties,c=s.prototype._unBind;n=t.exports=function(t,e){return this instanceof n?(s.call(this,t.__mapKeysData__,t),e&&l[e]||(e="key+value"),void h(this,{__kind__:o("",e),__values__:o("w",t.__mapValuesData__)})):new n(t,e)},r&&r(n,s),n.prototype=Object.create(s.prototype,{constructor:o(n),_resolve:o(function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]}),_unBind:o(function(){this.__values__=null,c.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(n.prototype,a,o("c","Map Iterator"))},function(t,e,i){"use strict";t.exports=i(145)("key","value","key+value")},function(t,e){"use strict";var i=Array.prototype.forEach,n=Object.create;t.exports=function(t){var e=n(null);return i.call(arguments,function(t){e[t]=!0}),e}},function(t,e){"use strict";t.exports=function(){return"undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)}()},function(t,e,i){(function(e){"use strict";function n(t,e,i){this.params=i||{},this.mode=s.UNKNOWN,this.hideButton=this.params.hideButton||!1,this.predistorted=!!this.params.predistorted,this.renderer=t,this.effect=e;var n=document.querySelector(".webvr-polyfill-fullscreen-wrapper");this.button=new r(n),this.isFullscreenDisabled=!!a.getQueryParameter("no_fullscreen"),this.startMode=s.NORMAL;var o=parseInt(a.getQueryParameter("start_mode"));isNaN(o)||(this.startMode=o),this.hideButton&&this.button.setVisibility(!1),this.getDeviceByType_(VRDisplay).then(function(t){switch(this.hmd=t,this.isVRCompatibleOverride||(this.isVRCompatible=!t.isPolyfilled||a.isMobile()),this.startMode){case s.MAGIC_WINDOW:this.setMode_(s.MAGIC_WINDOW);break;case s.VR:this.enterVRMode_(),this.setMode_(s.VR);break;default:this.setMode_(s.NORMAL)}this.emit("initialized")}.bind(this)),this.button.on("fs",this.onFSClick_.bind(this)),this.button.on("vr",this.onVRClick_.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("msfullscreenchange",this.onFullscreenChange_.bind(this)),window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange_.bind(this)),window.addEventListener("vrdisplaydeviceparamschange",this.onVRDisplayDeviceParamsChange_.bind(this))}var r=i(148),o=i(149),s=i(41),a=i(61);n.prototype=new o,n.Modes=s,n.prototype.render=function(t,e,i){t instanceof Array?this.effect.render(t[0],e):this.effect.render(t,e)},n.prototype.setVRCompatibleOverride=function(t){this.isVRCompatible=t,this.isVRCompatibleOverride=!0,this.button.setMode(this.mode,this.isVRCompatible)},n.prototype.setFullscreenCallback=function(t){this.fullscreenCallback=t},n.prototype.setVRCallback=function(t){this.vrCallback=t},n.prototype.setExitFullscreenCallback=function(t){this.exitFullscreenCallback=t},n.prototype.getDeviceByType_=function(t){return new e(function(e,i){navigator.getVRDisplays().then(function(i){for(var n=0;n<i.length;n++)if(i[n]instanceof t||i[n].displayName.includes("HTC")||i[n].displayName.includes("Oculus")||i[n].capabilities.canPresent){e(i[n]);break}e(null)},function(){e(null)})})},n.prototype.enterVRMode_=function(){return this.hmd.requestPresent([{source:this.renderer.domElement,predistorted:this.predistorted}])},n.prototype.setMode_=function(t){var e=this.mode;return t==this.mode?void console.warn("Not changing modes, already in %s",t):(this.mode=t,this.button.setMode(t,this.isVRCompatible),void this.emit("modechange",t,e))},n.prototype.onFSClick_=function(){switch(this.mode){case s.NORMAL:case s.UNKNOWN:this.setMode_(s.MAGIC_WINDOW),this.requestFullscreen_();break;case s.MAGIC_WINDOW:if(this.isFullscreenDisabled)return void window.history.back();this.exitFullscreenCallback&&this.exitFullscreenCallback(),this.setMode_(s.NORMAL),this.exitFullscreen_()}},n.prototype.onVRClick_=function(){if(this.mode==s.NORMAL&&a.isIOS()&&a.isIFrame()){if(!this.vrCallback){var t=window.location.href;return t=a.appendQueryParameter(t,"no_fullscreen","true"),t=a.appendQueryParameter(t,"start_mode",s.VR),void(top.location.href=t)}this.vrCallback()}this.enterVRMode_()},n.prototype.requestFullscreen_=function(){var t=document.body;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():a.isIOS()&&window.scrollTo(0,80)},n.prototype.exitFullscreen_=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},n.prototype.onVRDisplayPresentChange_=function(t){console.log("onVRDisplayPresentChange_",t),this.hmd.isPresenting?this.setMode_(s.VR):this.setMode_(s.NORMAL)},n.prototype.onVRDisplayDeviceParamsChange_=function(t){console.log("onVRDisplayDeviceParamsChange_",t)},n.prototype.onFullscreenChange_=function(t){null!==document.webkitFullscreenElement&&null!==document.mozFullScreenElement||this.setMode_(s.NORMAL)},t.exports=n}).call(e,i(2))},function(t,e,i){"use strict";function n(t){var e=t||document.body;this.loadIcons_();var i=this.createButton();i.src=this.ICONS.fullscreen,i.title="Fullscreen mode",i.className+=" fullscreen-button";var n=i.style;n.display="block",i.addEventListener("click",this.createClickHandler_("fs")),e.appendChild(i),this.fsButton=i;var r=this.createButton();r.src=this.ICONS.cardboard,r.title="Virtual reality mode",r.className+=" vr-button";var n=r.style;r.addEventListener("click",this.createClickHandler_("vr")),e.appendChild(r),this.vrButton=r,this.isVisible=!0}var r=i(149),o=i(41),s=i(61);n.prototype=new r,n.prototype.createButton=function(){var t=document.createElement("img");t.className="webvr-button";t.style;return t.draggable=!1,t.addEventListener("dragstart",function(t){t.preventDefault()}),t},n.prototype.setMode=function(t,e){if(e=e||WebVRConfig.FORCE_ENABLE_VR,this.isVisible){switch(t){case o.NORMAL:this.fsButton.style.display="block",this.fsButton.src=this.ICONS.fullscreen,this.vrButton.style.display="none";break;case o.MAGIC_WINDOW:this.fsButton.style.display="block",console.log("setting exit fs"),this.fsButton.src=this.ICONS.exitFullscreen,this.vrButton.style.display="none";break;case o.VR:this.fsButton.style.display="none",this.vrButton.style.display="none"}var i=this.fsButton.style.display;this.fsButton.style.display="inline-block",this.fsButton.offsetHeight,this.fsButton.style.display=i}},n.prototype.setVisibility=function(t){this.isVisible=t,this.fsButton.style.display=t?"block":"none",
this.vrButton.style.display=t?"block":"none"},n.prototype.createClickHandler_=function(t){return function(e){e.stopPropagation(),e.preventDefault(),this.emit(t)}.bind(this)},n.prototype.loadIcons_=function(){this.ICONS={},this.ICONS.cardboard=s.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo="),this.ICONS.fullscreen=s.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA1My4yIDUzLjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzLjIgNTMuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnIGlkPSJMYXllcl8xIj48Zz48Zz4gPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSJ3aGl0ZSIgcG9pbnRzPSIxNy44LDIuNSAyLjUsMi41IDIuNSwxNi45Ii8+IDwvZz48Zz4gPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSJ3aGl0ZSIgcG9pbnRzPSIyLjUsMzYuMiAyLjUsNTAuNyAxNy44LDUwLjciLz4gPC9nPjxnPiA8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IndoaXRlIiBwb2ludHM9IjM1LjMsNTAuNyA1MC43LDUwLjcgNTAuNywzNi4yIi8+IDwvZz48Zz4gPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSJ3aGl0ZSIgcG9pbnRzPSI1MC43LDE2LjkgNTAuNywyLjUgMzUuMywyLjUiLz4gPC9nPjwvZz48L2c+PC9zdmc+"),this.ICONS.exitFullscreen=s.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA1MC4yIDUyLjgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUwLjIgNTIuODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnIGlkPSJMYXllcl8xIj4gIDxnPiAgICA8Zz4gPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSJ3aGl0ZSIgcG9pbnRzPSIxNS4zLDUyLjggMTUuMywzOC4zIDAsMzguMyIvPiA8L2c+ICAgIDxnPiA8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IndoaXRlIiBwb2ludHM9IjUwLjIsMzguMyAzNC44LDM4LjMgMzQuOCw1Mi44Ii8+IDwvZz4gICAgPGc+IDxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZT0id2hpdGUiIHBvaW50cz0iMzQuOCwwIDM0LjgsMTQuNCA1MC4yLDE0LjQiLz4gPC9nPiAgICA8Zz4gPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlPSJ3aGl0ZSIgcG9pbnRzPSIwLDE0LjQgMTUuMywxNC40IDE1LjMsMCIvPiA8L2c+ICA8L2c+PC9nPjwvc3ZnPg=="),this.ICONS.settings=s.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVDMTQuNDYgMi4xOCAxNC4yNSAyIDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==")},t.exports=n},function(t,e){"use strict";function i(){this.callbacks={}}i.prototype.emit=function(t){var e=this.callbacks[t];if(e){var i=[].slice.call(arguments);i.shift();for(var n=0;n<e.length;n++)e[n].apply(this,i)}},i.prototype.on=function(t,e){t in this.callbacks?this.callbacks[t].push(e):this.callbacks[t]=[e]},t.exports=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(151),a=n(s),l=function(){function t(){r(this,t),this.timeouts={},this.intervals={}}return o(t,[{key:"setTimeout",value:function(t,e){for(var i=a["default"].generate({length:32});i in this.timeouts;)i=a["default"].generate({length:32});return this.timeouts[i]={callback:t,delay:Date.now()+e},i}},{key:"setInterval",value:function(t,e){for(var i=a["default"].generate({length:32});i in this.intervals;)i=a["default"].generate({length:32});return this.intervals[i]={callback:t,interval:e,next:Date.now()+e},i}},{key:"clearTimeout",value:function(t){delete this.timeouts[t]}},{key:"clearInterval",value:function(t){delete this.intervals[t]}},{key:"step",value:function(){var t=this,e=Date.now();Object.keys(this.timeouts).forEach(function(i){e>=t.timeouts[i].delay&&(t.timeouts[i].callback(),delete t.timeouts[i])}),Object.keys(this.intervals).forEach(function(i){if(e>=t.intervals[i].next)for(t.intervals[i].callback();t.intervals[i]&&e>=t.intervals[i].next;)t.intervals[i].next+=t.intervals[i].interval})}}]),t}();e["default"]=l},function(t,e,i){t.exports=i(152)},function(t,e,i){"use strict";function n(t){for(;;)try{return r.randomBytes(t)}catch(e){continue}}var r=i(153),o=i(175);e.generate=function(t){var e,i=new o,r="";"object"==typeof t?(e=t.length||32,t.charset?i.setType(t.charset):i.setType("alphanumeric"),t.capitalization&&i.setcapitalization(t.capitalization),t.readable&&i.removeUnreadable(),i.removeDuplicates()):"number"==typeof t?(e=t,i.setType("alphanumeric")):(e=32,i.setType("alphanumeric"));for(var s=i.chars.length,a=256-256%s;e>0;)for(var l=n(Math.ceil(256*e/a)),h=0;h<l.length&&e>0;h++){var c=l.readUInt8(h);c<a&&(r+=i.chars.charAt(c%s),e--)}return r}},function(t,e,i){(function(t){function n(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function r(t,e){for(var i in t)e(t[i],i)}var o=i(158);e.createHash=i(160),e.createHmac=i(172),e.randomBytes=function(e,i){if(!i||!i.call)return new t(o(e));try{i.call(this,void 0,new t(o(e)))}catch(n){i(n)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=i(173)(e);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync,r(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){n("sorry,",t,"is not implemented yet")}})}).call(e,i(154).Buffer)},function(t,e,i){(function(t,n){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,i){if(o()<i)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(i),e.__proto__=t.prototype):(null===e&&(e=new t(i)),e.length=i),e}function t(e,i,n){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,i,n);if("number"==typeof e){if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,i,n)}function a(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,i,n):"string"==typeof e?u(t,e,i):d(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e,i,n){return l(e),e<=0?s(t,e):void 0!==i?"string"==typeof n?s(t,e).fill(i,n):s(t,e).fill(i):s(t,e)}function c(e,i){if(l(i),e=s(e,i<0?0:0|m(i)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;n<i;++n)e[n]=0;return e}function u(e,i,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(i,n);e=s(e,r);var o=e.write(i,n);return o!==r&&(e=e.slice(0,o)),e}function p(t,e){var i=e.length<0?0:0|m(e.length);t=s(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(e,i,n,r){if(i.byteLength,n<0||i.byteLength<n)throw new RangeError("'offset' is out of bounds");if(i.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return i=void 0===n&&void 0===r?new Uint8Array(i):void 0===r?new Uint8Array(i,n):new Uint8Array(i,n,r),t.TYPED_ARRAY_SUPPORT?(e=i,e.__proto__=t.prototype):e=p(e,i),e}function d(e,i){if(t.isBuffer(i)){var n=0|m(i.length);return e=s(e,n),0===e.length?e:(i.copy(e,0,0,n),e)}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||K(i.length)?s(e,0):p(e,i);if("Buffer"===i.type&&J(i.data))return p(e,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(e){return+e!=e&&(e=0),t.alloc(+e)}function y(e,i){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return W(e).length;i=(""+i).toLowerCase(),r=!0}}function v(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return O(this,e,i);case"base64":return P(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function b(e,i,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof i&&(i=t.from(i,r)),t.isBuffer(i))return 0===i.length?-1:T(e,i,n,r,o);if("number"==typeof i)return i=255&i,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,i,n):Uint8Array.prototype.lastIndexOf.call(e,i,n):T(e,[i],n,r,o);throw new TypeError("val must be string, number or Buffer")}function T(t,e,i,n,r){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,l=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,i/=2}var h;if(r){var c=-1;for(h=i;h<a;h++)if(o(t,h)===o(e,c===-1?0:h-c)){if(c===-1&&(c=h),h-c+1===l)return c*s}else c!==-1&&(h-=h-c),c=-1}else for(i+l>a&&(i=a-l),h=i;h>=0;h--){for(var u=!0,p=0;p<l;p++)if(o(t,h+p)!==o(e,p)){u=!1;break}if(u)return h}return-1}function E(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[i+s]=a}return s}function x(t,e,i,n){return Z(W(e,t.length-i),t,i,n)}function S(t,e,i,n){return Z(X(e),t,i,n)}function w(t,e,i,n){return S(t,e,i,n)}function A(t,e,i,n){return Z(q(e),t,i,n)}function M(t,e,i,n){return Z(Y(e,t.length-i),t,i,n)}function P(t,e,i){return 0===e&&i===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,i))}function C(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=i){var l,h,c,u;switch(a){case 1:o<128&&(s=o);break;case 2:l=t[r+1],128===(192&l)&&(u=(31&o)<<6|63&l,u>127&&(s=u));break;case 3:l=t[r+1],h=t[r+2],128===(192&l)&&128===(192&h)&&(u=(15&o)<<12|(63&l)<<6|63&h,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:l=t[r+1],h=t[r+2],c=t[r+3],128===(192&l)&&128===(192&h)&&128===(192&c)&&(u=(15&o)<<18|(63&l)<<12|(63&h)<<6|63&c,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),r+=a}return R(n)}function R(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var i="",n=0;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return i}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function O(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function N(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=z(t[o]);return r}function L(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function D(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function k(e,i,n,r,o,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>o||i<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function G(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function F(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function V(t,e,i,n,r){return r||F(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,i,n,23,4),i+4}function U(t,e,i,n,r){return r||F(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,i,n,52,8),i+8}function H(t){if(t=j(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var i,n=t.length,r=null,o=[],s=0;s<n;++s){if(i=t.charCodeAt(s),i>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function X(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function Y(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}function q(t){return $.toByteArray(H(t))}function Z(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function K(t){return t!==t}var $=i(155),Q=i(156),J=i(157);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,i){return a(null,t,e,i)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,i){return h(null,t,e,i)},t.allocUnsafe=function(t){return c(null,t)},t.allocUnsafeSlow=function(t){return c(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,i){if(!t.isBuffer(e)||!t.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(e===i)return 0;for(var n=e.length,r=i.length,o=0,s=Math.min(n,r);o<s;++o)if(e[o]!==i[o]){n=e[o],r=i[o];break}return n<r?-1:r<n?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,i){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===i)for(i=0,n=0;n<e.length;++n)i+=e[n].length;var r=t.allocUnsafe(i),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},t.byteLength=y,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):v.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,i,n,r,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),i<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&i>=n)return 0;if(r>=o)return-1;if(i>=n)return 1;if(i>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var s=o-r,a=n-i,l=Math.min(s,a),h=this.slice(r,o),c=e.slice(i,n),u=0;u<l;++u)if(h[u]!==c[u]){s=h[u],a=c[u];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1},t.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},t.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},t.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":return S(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return A(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,i){var n=this.length;e=~~e,i=void 0===i?n:~~i,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),i<0?(i+=n,i<0&&(i=0)):i>n&&(i=n),i<e&&(i=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=this.subarray(e,i),r.__proto__=t.prototype;else{var o=i-e;r=new t(o,(void 0));for(var s=0;s<o;++s)r[s]=this[s+e]}return r},t.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},t.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},t.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||D(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),Q.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),Q.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),Q.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),Q.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e=0|e,i=0|i,!n){var r=Math.pow(2,8*i)-1;k(this,t,e,i,r,0)}var o=1,s=0;for(this[e]=255&t;++s<i&&(o*=256);)this[e+s]=t/o&255;return e+i},t.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e=0|e,i=0|i,!n){var r=Math.pow(2,8*i)-1;k(this,t,e,i,r,0)}var o=i-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+i},t.prototype.writeUInt8=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[i]=255&e,i+1},t.prototype.writeUInt16LE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8):B(this,e,i,!0),i+2},t.prototype.writeUInt16BE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>8,this[i+1]=255&e):B(this,e,i,!1),i+2},t.prototype.writeUInt32LE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[i+3]=e>>>24,this[i+2]=e>>>16,this[i+1]=e>>>8,this[i]=255&e):G(this,e,i,!0),i+4},t.prototype.writeUInt32BE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e):G(this,e,i,!1),i+4},t.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);k(this,t,e,i,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},t.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);k(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},t.prototype.writeInt8=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[i]=255&e,i+1},t.prototype.writeInt16LE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8):B(this,e,i,!0),i+2},t.prototype.writeInt16BE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>8,this[i+1]=255&e):B(this,e,i,!1),i+2},t.prototype.writeInt32LE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8,this[i+2]=e>>>16,this[i+3]=e>>>24):G(this,e,i,!0),i+4},t.prototype.writeInt32BE=function(e,i,n){return e=+e,i=0|i,n||k(this,e,i,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e):G(this,e,i,!1),i+4},t.prototype.writeFloatLE=function(t,e,i){return V(this,t,e,!0,i)},t.prototype.writeFloatBE=function(t,e,i){return V(this,t,e,!1,i)},t.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},t.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},t.prototype.copy=function(e,i,n,r){if(n||(n=0),r||0===r||(r=this.length),i>=e.length&&(i=e.length),i||(i=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-i<r-n&&(r=e.length-i+n);var o,s=r-n;if(this===e&&n<i&&i<r)for(o=s-1;o>=0;--o)e[o+i]=this[o+n];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+i]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),i);return s},t.prototype.fill=function(e,i,n,r){if("string"==typeof e){if("string"==typeof i?(r=i,i=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e=255&e);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;i>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=i;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:W(new t(e,r).toString()),l=a.length;for(s=0;s<n-i;++s)this[s+i]=a[s%l]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,i(154).Buffer,function(){return this}())},function(t,e){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function n(t){var e=i(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function r(t,e,i){return 3*(e+i)/4-i}function o(t){for(var e,n=i(t),o=n[0],s=n[1],a=new u(r(t,o,s)),l=0,h=s>0?o-4:o,p=0;p<h;p+=4)e=c[t.charCodeAt(p)]<<18|c[t.charCodeAt(p+1)]<<12|c[t.charCodeAt(p+2)]<<6|c[t.charCodeAt(p+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=255&e;return 2===s&&(e=c[t.charCodeAt(p)]<<2|c[t.charCodeAt(p+1)]>>4,a[l++]=255&e),1===s&&(e=c[t.charCodeAt(p)]<<10|c[t.charCodeAt(p+1)]<<4|c[t.charCodeAt(p+2)]>>2,a[l++]=e>>8&255,a[l++]=255&e),a}function s(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function a(t,e,i){for(var n,r=[],o=e;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(s(n));return r.join("")}function l(t){for(var e,i=t.length,n=i%3,r=[],o=16383,s=0,l=i-n;s<l;s+=o)r.push(a(t,s,s+o>l?l:s+o));return 1===n?(e=t[i-1],r.push(h[e>>2]+h[e<<4&63]+"==")):2===n&&(e=(t[i-2]<<8)+t[i-1],r.push(h[e>>10]+h[e>>4&63]+h[e<<2&63]+"=")),r.join("")}e.byteLength=n,e.toByteArray=o,e.fromByteArray=l;for(var h=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=p.length;f<d;++f)h[f]=p[f],c[p.charCodeAt(f)]=f;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?r-1:0,p=i?-1:1,f=t[e+u];for(u+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+u],u+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+u],u+=p,c-=8);if(0===o)o=1-h;else{if(o===l)return s?NaN:(f?-1:1)*(1/0);s+=Math.pow(2,n),o-=h}return(f?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,l,h=8*o-r-1,c=(1<<h)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+u>=1?p/l:p*Math.pow(2,1-u),e*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(e*l-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&a,f+=d,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[i+f]=255&s,f+=d,s/=256,h-=8);t[i+f-d]|=128*m}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){(function(e,n){!function(){var r=("undefined"==typeof window?e:window)||{};_crypto=r.crypto||r.msCrypto||i(159),t.exports=function(t){if(_crypto.getRandomValues){var e=new n(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),i(154).Buffer)},4,function(t,e,i){(function(e){function n(t){return function(){var i=[],n={update:function(t,n){return e.isBuffer(t)||(t=new e(t,n)),i.push(t),this},digest:function(n){var r=e.concat(i),o=t(r);return i=null,n?o.toString(n):o}};return n}}var r=i(161),o=n(i(169)),s=n(i(171));t.exports=function(t){return"md5"===t?new o:"rmd160"===t?new s:r(t)}}).call(e,i(154).Buffer)},function(t,e,i){var e=t.exports=function(t){var i=e[t];if(!i)throw new Error(t+" is not supported (we accept pull requests)");return new i},n=i(154).Buffer,r=i(162)(n);e.sha1=i(163)(n,r),e.sha256=i(167)(n,r),e.sha512=i(168)(n,r)},function(t,e){t.exports=function(t){function e(e,i){this._block=new t(e),this._finalSize=i,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,i){"string"==typeof e&&(i=i||"utf8",e=new t(e,i));for(var n=this._len+=e.length,r=this._s=this._s||0,o=0,s=this._block;r<n;){for(var a=Math.min(e.length,o+this._blockSize-r%this._blockSize),l=a-o,h=0;h<l;h++)s[r%this._blockSize+h]=e[h+o];r+=l,o+=l,r%this._blockSize===0&&this._update(s)}return this._s=r,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var i=this._update(this._block)||this._hash();return t?i.toString(t):i},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,i){var n=i(164).inherits;t.exports=function(t,e){function i(){return d.length?d.pop().init():this instanceof i?(this._w=f,e.call(this,64,56),this._h=null,void this.init()):new i}function r(t,e,i,n){return t<20?e&i|~e&n:t<40?e^i^n:t<60?e&i|e&n|i&n:e^i^n}function o(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function s(t,e){return t+e|0}function a(t,e){return t<<e|t>>>32-e}var l=0,h=4,c=8,u=12,p=16,f=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return n(i,e),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},i.prototype._POOL=d,i.prototype._update=function(t){var e,i,n,l,h,c,u,p,f,d;e=c=this._a,i=u=this._b,n=p=this._c,l=f=this._d,h=d=this._e;for(var m=this._w,g=0;g<80;g++){var y=m[g]=g<16?t.readInt32BE(4*g):a(m[g-3]^m[g-8]^m[g-14]^m[g-16],1),v=s(s(a(e,5),r(g,i,n,l)),s(s(h,y),o(g)));h=l,l=n,n=a(i,30),i=e,e=v}this._a=s(e,c),this._b=s(i,u),this._c=s(n,p),this._d=s(l,f),this._e=s(h,d)},i.prototype._hash=function(){d.length<100&&d.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,l),e.writeInt32BE(0|this._b,h),e.writeInt32BE(0|this._c,c),e.writeInt32BE(0|this._d,u),e.writeInt32BE(0|this._e,p),e},i}},function(t,e,i){(function(t,n,r){function o(t,i){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(i)?n.showHidden=i:i&&e._extend(n,i),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),h(n,t,n.depth)}function s(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function a(t,e){return t}function l(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function h(t,i,n){if(t.customInspect&&i&&M(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return b(r)||(r=h(t,r,n)),r}var o=c(t,i);if(o)return o;var s=Object.keys(i),a=l(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),A(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(i);if(0===s.length){if(M(i)){var g=i.name?": "+i.name:"";return t.stylize("[Function"+g+"]","special")}if(x(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(w(i))return t.stylize(Date.prototype.toString.call(i),"date");if(A(i))return u(i)}var y="",v=!1,_=["{","}"];if(m(i)&&(v=!0,_=["[","]"]),M(i)){var T=i.name?": "+i.name:"";y=" [Function"+T+"]"}if(x(i)&&(y=" "+RegExp.prototype.toString.call(i)),w(i)&&(y=" "+Date.prototype.toUTCString.call(i)),A(i)&&(y=" "+u(i)),0===s.length&&(!v||0==i.length))return _[0]+y+_[1];if(n<0)return x(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special");t.seen.push(i);var E;return E=v?p(t,i,n,a,s):s.map(function(e){return f(t,i,n,a,e,v)}),t.seen.pop(),d(E,y,_)}function c(t,e){if(E(e))return t.stylize("undefined","undefined");if(b(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return _(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,n,r){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(f(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,i,n,r,!0))}),o}function f(t,e,i,n,r,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),O(n,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=y(i)?h(t,l.value,null):h(t,l.value,i-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),E(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t,e,i){var n=0,r=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function m(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function _(t){return"number"==typeof t}function b(t){return"string"==typeof t}function T(t){return"symbol"==typeof t}function E(t){return void 0===t}function x(t){return S(t)&&"[object RegExp]"===C(t)}function S(t){return"object"==typeof t&&null!==t}function w(t){return S(t)&&"[object Date]"===C(t)}function A(t){return S(t)&&("[object Error]"===C(t)||t instanceof Error)}function M(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function C(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}function I(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}function L(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);var r=e.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};t.apply(this,e).then(function(t){n.nextTick(s,null,t)},function(t){n.nextTick(N,t,s)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,D(t)),e}var D=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},n=0;n<e.length;n++)i[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return i},k=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}for(var i=1,n=arguments,r=n.length,s=String(t).replace(k,function(t){if("%%"===t)return"%";if(i>=r)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return t}}),a=n[i];i<r;a=n[++i])s+=y(a)||!S(a)?" "+a:" "+o(a);return s},e.deprecate=function(i,r){function o(){if(!s){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),s=!0}return i.apply(this,arguments)}if(E(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(n.noDeprecation===!0)return i;var s=!1;return o};var B,G={};e.debuglog=function(t){if(E(B)&&(B={NODE_ENV:"production"}.NODE_DEBUG||""),t=t.toUpperCase(),!G[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var i=n.pid;G[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else G[t]=function(){};return G[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",
undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=m,e.isBoolean=g,e.isNull=y,e.isNullOrUndefined=v,e.isNumber=_,e.isString=b,e.isSymbol=T,e.isUndefined=E,e.isRegExp=x,e.isObject=S,e.isDate=w,e.isError=A,e.isFunction=M,e.isPrimitive=P,e.isBuffer=i(165);var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",I(),e.format.apply(e,arguments))},e.inherits=i(166),e._extend=function(t,e){if(!e||!S(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t};var V="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,i,n=new r(function(t,n){e=t,i=n}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(t,n){t?i(t):e(n)});try{t.apply(this,o)}catch(a){i(a)}return n}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(V&&t[V]){var e=t[V];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,V,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),V&&Object.defineProperty(e,V,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,D(t))},e.promisify.custom=V,e.callbackify=L}).call(e,function(){return this}(),i(3),i(2))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){var n=i(164).inherits;t.exports=function(t,e){function i(){this.init(),this._w=f,e.call(this,64,56)}function r(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function s(t,e,i){return t&e^~t&i}function a(t,e,i){return t&e^t&i^e&i}function l(t){return r(t,2)^r(t,13)^r(t,22)}function h(t){return r(t,6)^r(t,11)^r(t,25)}function c(t){return r(t,7)^r(t,18)^o(t,3)}function u(t){return r(t,17)^r(t,19)^o(t,10)}var p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=new Array(64);return n(i,e),i.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},i.prototype._update=function(t){var e,i,n,r,o,f,d,m,g,y,v=this._w;e=0|this._a,i=0|this._b,n=0|this._c,r=0|this._d,o=0|this._e,f=0|this._f,d=0|this._g,m=0|this._h;for(var _=0;_<64;_++){var b=v[_]=_<16?t.readInt32BE(4*_):u(v[_-2])+v[_-7]+c(v[_-15])+v[_-16];g=m+h(o)+s(o,f,d)+p[_]+b,y=l(e)+a(e,i,n),m=d,d=f,f=o,o=r+g,r=n,n=i,i=e,e=g+y}this._a=e+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=r+this._d|0,this._e=o+this._e|0,this._f=f+this._f|0,this._g=d+this._g|0,this._h=m+this._h|0},i.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},i}},function(t,e,i){var n=i(164).inherits;t.exports=function(t,e){function i(){this.init(),this._w=l,e.call(this,128,112)}function r(t,e,i){return t>>>i|e<<32-i}function o(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}var a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],l=new Array(160);return n(i,e),i.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},i.prototype._update=function(t){var e,i,n,l,h,c,u,p,f,d,m,g,y,v,_,b,T=this._w;e=0|this._a,i=0|this._b,n=0|this._c,l=0|this._d,h=0|this._e,c=0|this._f,u=0|this._g,p=0|this._h,f=0|this._al,d=0|this._bl,m=0|this._cl,g=0|this._dl,y=0|this._el,v=0|this._fl,_=0|this._gl,b=0|this._hl;for(var E=0;E<80;E++){var x,S,w=2*E;if(E<16)x=T[w]=t.readInt32BE(4*w),S=T[w+1]=t.readInt32BE(4*w+4);else{var A=T[w-30],M=T[w-30+1],P=r(A,M,1)^r(A,M,8)^A>>>7,C=r(M,A,1)^r(M,A,8)^r(M,A,7);A=T[w-4],M=T[w-4+1];var R=r(A,M,19)^r(M,A,29)^A>>>6,I=r(M,A,19)^r(A,M,29)^r(M,A,6),O=T[w-14],N=T[w-14+1],L=T[w-32],D=T[w-32+1];S=C+N,x=P+O+(S>>>0<C>>>0?1:0),S+=I,x=x+R+(S>>>0<I>>>0?1:0),S+=D,x=x+L+(S>>>0<D>>>0?1:0),T[w]=x,T[w+1]=S}var k=s(e,i,n),B=s(f,d,m),G=r(e,f,28)^r(f,e,2)^r(f,e,7),F=r(f,e,28)^r(e,f,2)^r(e,f,7),V=r(h,y,14)^r(h,y,18)^r(y,h,9),U=r(y,h,14)^r(y,h,18)^r(h,y,9),H=a[w],j=a[w+1],z=o(h,c,u),W=o(y,v,_),X=b+U,Y=p+V+(X>>>0<b>>>0?1:0);X+=W,Y=Y+z+(X>>>0<W>>>0?1:0),X+=j,Y=Y+H+(X>>>0<j>>>0?1:0),X+=S,Y=Y+x+(X>>>0<S>>>0?1:0);var q=F+B,Z=G+k+(q>>>0<F>>>0?1:0);p=u,b=_,u=c,_=v,c=h,v=y,y=g+X|0,h=l+Y+(y>>>0<g>>>0?1:0)|0,l=n,g=m,n=i,m=d,i=e,d=f,f=X+q|0,e=Y+Z+(f>>>0<X>>>0?1:0)|0}this._al=this._al+f|0,this._bl=this._bl+d|0,this._cl=this._cl+m|0,this._dl=this._dl+g|0,this._el=this._el+y|0,this._fl=this._fl+v|0,this._gl=this._gl+_|0,this._hl=this._hl+b|0,this._a=this._a+e+(this._al>>>0<f>>>0?1:0)|0,this._b=this._b+i+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+n+(this._cl>>>0<m>>>0?1:0)|0,this._d=this._d+l+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+h+(this._el>>>0<y>>>0?1:0)|0,this._f=this._f+c+(this._fl>>>0<v>>>0?1:0)|0,this._g=this._g+u+(this._gl>>>0<_>>>0?1:0)|0,this._h=this._h+p+(this._hl>>>0<b>>>0?1:0)|0},i.prototype._hash=function(){function e(t,e,n){i.writeInt32BE(t,n),i.writeInt32BE(e,n+4)}var i=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),i},i}},function(t,e,i){function n(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,r=-1732584194,c=271733878,u=0;u<t.length;u+=16){var p=i,f=n,d=r,m=c;i=o(i,n,r,c,t[u+0],7,-680876936),c=o(c,i,n,r,t[u+1],12,-389564586),r=o(r,c,i,n,t[u+2],17,606105819),n=o(n,r,c,i,t[u+3],22,-1044525330),i=o(i,n,r,c,t[u+4],7,-176418897),c=o(c,i,n,r,t[u+5],12,1200080426),r=o(r,c,i,n,t[u+6],17,-1473231341),n=o(n,r,c,i,t[u+7],22,-45705983),i=o(i,n,r,c,t[u+8],7,1770035416),c=o(c,i,n,r,t[u+9],12,-1958414417),r=o(r,c,i,n,t[u+10],17,-42063),n=o(n,r,c,i,t[u+11],22,-1990404162),i=o(i,n,r,c,t[u+12],7,1804603682),c=o(c,i,n,r,t[u+13],12,-40341101),r=o(r,c,i,n,t[u+14],17,-1502002290),n=o(n,r,c,i,t[u+15],22,1236535329),i=s(i,n,r,c,t[u+1],5,-165796510),c=s(c,i,n,r,t[u+6],9,-1069501632),r=s(r,c,i,n,t[u+11],14,643717713),n=s(n,r,c,i,t[u+0],20,-373897302),i=s(i,n,r,c,t[u+5],5,-701558691),c=s(c,i,n,r,t[u+10],9,38016083),r=s(r,c,i,n,t[u+15],14,-660478335),n=s(n,r,c,i,t[u+4],20,-405537848),i=s(i,n,r,c,t[u+9],5,568446438),c=s(c,i,n,r,t[u+14],9,-1019803690),r=s(r,c,i,n,t[u+3],14,-187363961),n=s(n,r,c,i,t[u+8],20,1163531501),i=s(i,n,r,c,t[u+13],5,-1444681467),c=s(c,i,n,r,t[u+2],9,-51403784),r=s(r,c,i,n,t[u+7],14,1735328473),n=s(n,r,c,i,t[u+12],20,-1926607734),i=a(i,n,r,c,t[u+5],4,-378558),c=a(c,i,n,r,t[u+8],11,-2022574463),r=a(r,c,i,n,t[u+11],16,1839030562),n=a(n,r,c,i,t[u+14],23,-35309556),i=a(i,n,r,c,t[u+1],4,-1530992060),c=a(c,i,n,r,t[u+4],11,1272893353),r=a(r,c,i,n,t[u+7],16,-155497632),n=a(n,r,c,i,t[u+10],23,-1094730640),i=a(i,n,r,c,t[u+13],4,681279174),c=a(c,i,n,r,t[u+0],11,-358537222),r=a(r,c,i,n,t[u+3],16,-722521979),n=a(n,r,c,i,t[u+6],23,76029189),i=a(i,n,r,c,t[u+9],4,-640364487),c=a(c,i,n,r,t[u+12],11,-421815835),r=a(r,c,i,n,t[u+15],16,530742520),n=a(n,r,c,i,t[u+2],23,-995338651),i=l(i,n,r,c,t[u+0],6,-198630844),c=l(c,i,n,r,t[u+7],10,1126891415),r=l(r,c,i,n,t[u+14],15,-1416354905),n=l(n,r,c,i,t[u+5],21,-57434055),i=l(i,n,r,c,t[u+12],6,1700485571),c=l(c,i,n,r,t[u+3],10,-1894986606),r=l(r,c,i,n,t[u+10],15,-1051523),n=l(n,r,c,i,t[u+1],21,-2054922799),i=l(i,n,r,c,t[u+8],6,1873313359),c=l(c,i,n,r,t[u+15],10,-30611744),r=l(r,c,i,n,t[u+6],15,-1560198380),n=l(n,r,c,i,t[u+13],21,1309151649),i=l(i,n,r,c,t[u+4],6,-145523070),c=l(c,i,n,r,t[u+11],10,-1120210379),r=l(r,c,i,n,t[u+2],15,718787259),n=l(n,r,c,i,t[u+9],21,-343485551),i=h(i,p),n=h(n,f),r=h(r,d),c=h(c,m)}return Array(i,n,r,c)}function r(t,e,i,n,r,o){return h(c(h(h(e,t),h(n,o)),r),i)}function o(t,e,i,n,o,s,a){return r(e&i|~e&n,t,e,o,s,a)}function s(t,e,i,n,o,s,a){return r(e&n|i&~n,t,e,o,s,a)}function a(t,e,i,n,o,s,a){return r(e^i^n,t,e,o,s,a)}function l(t,e,i,n,o,s,a){return r(i^(e|~n),t,e,o,s,a)}function h(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function c(t,e){return t<<e|t>>>32-e}var u=i(170);t.exports=function(t){return u.hash(t,n,16)}},function(t,e,i){(function(e){function i(t,i){if(t.length%o!==0){var n=t.length+(o-t.length%o);t=e.concat([t,s],n)}for(var r=[],a=i?t.readInt32BE:t.readInt32LE,l=0;l<t.length;l+=o)r.push(a.call(t,l));return r}function n(t,i,n){for(var r=new e(i),o=n?r.writeInt32BE:r.writeInt32LE,s=0;s<t.length;s++)o.call(r,t[s],4*s,!0);return r}function r(t,r,o,s){e.isBuffer(t)||(t=new e(t));var l=r(i(t,s),t.length*a);return n(l,o,s)}var o=4,s=new e(o);s.fill(0);var a=8;t.exports={hash:r}}).call(e,i(154).Buffer)},function(t,e,i){(function(e){function i(t,e,i){return t^e^i}function n(t,e,i){return t&e|~t&i}function r(t,e,i){return(t|~e)^i}function o(t,e,i){return t&i|e&~i}function s(t,e,i){return t^(e|~i)}function a(t,e){return t<<e|t>>>32-e}function l(t){var i=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var n=m(t),r=8*t.length,o=8*t.length;n[r>>>5]|=128<<24-r%32,n[(r+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<n.length;s+=16)y(i,n,s);for(var s=0;s<5;s++){var a=i[s];i[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var l=g(i);return new e(l)}t.exports=l;/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.
	
	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
	
	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
	
	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],m=function(t){for(var e=[],i=0,n=0;i<t.length;i++,n+=8)e[n>>>5]|=t[i]<<24-n%32;return e},g=function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},y=function(t,e,l){for(var m=0;m<16;m++){var g=l+m,y=e[g];e[g]=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)}var v,_,b,T,E,x,S,w,A,M;x=v=t[0],S=_=t[1],w=b=t[2],A=T=t[3],M=E=t[4];for(var P,m=0;m<80;m+=1)P=v+e[l+h[m]]|0,P+=m<16?i(_,b,T)+f[0]:m<32?n(_,b,T)+f[1]:m<48?r(_,b,T)+f[2]:m<64?o(_,b,T)+f[3]:s(_,b,T)+f[4],P=0|P,P=a(P,u[m]),P=P+E|0,v=E,E=T,T=a(b,10),b=_,_=P,P=x+e[l+c[m]]|0,P+=m<16?s(S,w,A)+d[0]:m<32?o(S,w,A)+d[1]:m<48?r(S,w,A)+d[2]:m<64?n(S,w,A)+d[3]:i(S,w,A)+d[4],P=0|P,P=a(P,p[m]),P=P+M|0,x=M,M=A,A=a(w,10),w=S,S=P;P=t[1]+b+A|0,t[1]=t[2]+T+M|0,t[2]=t[3]+E+x|0,t[3]=t[4]+v+S|0,t[4]=t[0]+_+w|0,t[0]=P}}).call(e,i(154).Buffer)},function(t,e,i){(function(e){function n(t,i){if(!(this instanceof n))return new n(t,i);this._opad=l,this._alg=t;var s="sha512"===t?128:64;i=this._key=e.isBuffer(i)?i:new e(i),i.length>s?i=r(t).update(i).digest():i.length<s&&(i=e.concat([i,o],s));for(var a=this._ipad=new e(s),l=this._opad=new e(s),h=0;h<s;h++)a[h]=54^i[h],l[h]=92^i[h];this._hash=r(t).update(a)}var r=i(160),o=new e(128);o.fill(0),t.exports=n,n.prototype.update=function(t,e){return this._hash.update(t,e),this},n.prototype.digest=function(t){var e=this._hash.digest();return r(this._alg).update(this._opad).update(e).digest(t)}}).call(e,i(154).Buffer)},function(t,e,i){var n=i(174);t.exports=function(t,e){e=e||{};var i=n(t);return e.pbkdf2=i.pbkdf2,e.pbkdf2Sync=i.pbkdf2Sync,e}},function(t,e,i){(function(e){t.exports=function(t){function i(t,e,i,r,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(t,e,i,r,o)}catch(l){return s(l)}s(void 0,a)})}function n(i,n,r,o,s){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");s=s||"sha1",e.isBuffer(i)||(i=new e(i)),e.isBuffer(n)||(n=new e(n));var a,l,h,c=1,u=new e(o),p=new e(n.length+4);n.copy(p,0,0,n.length);for(var f=1;f<=c;f++){p.writeUInt32BE(f,n.length);var d=t.createHmac(s,i).update(p).digest();if(!a&&(a=d.length,h=new e(a),c=Math.ceil(o/a),l=o-(c-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");d.copy(h,0,0,a);for(var m=1;m<r;m++){d=t.createHmac(s,i).update(d).digest();for(var g=0;g<a;g++)h[g]^=d[g]}var y=(f-1)*a,v=f==c?l:a;h.copy(u,y,0,v)}return u}return{pbkdf2:i,pbkdf2Sync:n}}}).call(e,i(154).Buffer)},function(t,e,i){function n(){this.chars=""}var r=i(176);n.prototype.setType=function(t){var e,i="0123456789",n="abcdefghijklmnopqrstuvwxyz",r=n.toUpperCase(),o="abcdef";e="alphanumeric"===t?i+n+r:"numeric"===t?i:"alphabetic"===t?n+r:"hex"===t?i+o:t,this.chars=e},n.prototype.removeUnreadable=function(){var t=/[0OIl]/g;this.chars=this.chars.replace(t,"")},n.prototype.setcapitalization=function(t){"uppercase"===t?this.chars=this.chars.toUpperCase():"lowercase"===t&&(this.chars=this.chars.toLowerCase())},n.prototype.removeDuplicates=function(){var t=this.chars.split("");t=r(t),this.chars=t.join("")},t.exports=e=n},function(t,e){(function(e){"use strict";function i(t){for(var e=[],i=0;i<t.length;i++)e.indexOf(t[i])===-1&&e.push(t[i]);return e}function n(t){var e=new Set;return t.filter(function(t){if(!e.has(t))return e.add(t),!0})}function r(t){var e=[];return new Set(t).forEach(function(t){e.push(t)}),e}function o(){var t=!1;return new Set([!0]).forEach(function(e){t=e}),t===!0}"Set"in e?"function"==typeof Set.prototype.forEach&&o()?t.exports=r:t.exports=n:t.exports=i}).call(e,function(){return this}())},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(55),r=i(50);e["default"]=function(t,e){var i=null,o=null,s=null,a=new n.Group;a.position.y=e.tableHeight/2,a.position.z=e.tablePositionZ,s=new n.MeshLambertMaterial({color:e.colors.BLUE_TABLE});var l=e.tableDepth/2;i=new n.BoxGeometry(e.tableWidth,e.tableThickness,l),delete i.faces[10],delete i.faces[11],i.faces=i.faces.filter(function(t){return void 0!==t}),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2-e.tableThickness/2,o.position.z=e.tableDepth/4,o.name="table-self",o.receiveShadow=!0,a.add(o),s=new n.MeshLambertMaterial({color:e.colors.BLUE_TABLE}),e.mode===r.MODE.MULTIPLAYER&&(i=new n.BoxGeometry(e.tableWidth,e.tableThickness,l),delete i.faces[8],delete i.faces[9],i.faces=i.faces.filter(function(t){return void 0!==t}),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2-e.tableThickness/2,o.position.z=-e.tableDepth/4,o.name="table-opponent",o.receiveShadow=!0,a.add(o));var h=new n.Group,c=.37*e.tableDepth;h.name="upwardsTableGroup",h.visible=!1,h.rotation.x=Math.PI/2,h.position.y=e.tableHeight/2+c/2,h.position.z=-e.tableThickness/2,i=new n.BoxGeometry(e.tableWidth,e.tableThickness,c),s=new n.MeshLambertMaterial({color:e.colors.PINK_TABLE_UPWARDS}),o=new n.Mesh(i,s),o.name="table-self-singleplayer",o.castShadow=!0,o.receiveShadow=!0,h.add(o),a.add(h),l=e.mode===r.MODE.MULTIPLAYER?e.tableDepth:e.tableDepth/2;var u=.001,p=.03,f=new n.Group;return s=new n.MeshLambertMaterial({color:16777215,depthWrite:!1}),i=new n.BoxGeometry(p,u,l),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2+u,o.position.x=-e.tableWidth/2+p/2,o.receiveShadow=!0,f.add(o),i=new n.BoxGeometry(p,u,l),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2+u,o.position.x=e.tableWidth/2-p/2,o.receiveShadow=!0,f.add(o),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2+u,o.position.z=l/2-p/2,o.receiveShadow=!0,f.add(o),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2+u,o.position.z=-l/2+p/2,o.receiveShadow=!0,f.add(o),i=new n.BoxGeometry(p,.001,l-2*p),o=new n.Mesh(i,s),o.position.y=e.tableHeight/2+u,o.receiveShadow=!0,f.add(o),e.mode===r.MODE.SINGLEPLAYER&&(f.position.z=e.tableDepth/4),a.add(f),s=new n.MeshLambertMaterial({color:14540253,depthWrite:!1}),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),o=new n.Mesh(i,s),o.position.y=e.tableThickness/2+u,o.position.z=-c/2+p/2,o.receiveShadow=!0,h.add(o),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),o=new n.Mesh(i,s),o.position.y=e.tableThickness/2+u,o.position.z=c/2-p/2,o.receiveShadow=!0,h.add(o),i=new n.BoxGeometry(p,u,c),o=new n.Mesh(i,s),o.position.y=e.tableThickness/2+u,o.position.x=-e.tableWidth/2+p/2,o.receiveShadow=!0,h.add(o),i=new n.BoxGeometry(p,u,c),o=new n.Mesh(i,s),o.position.y=e.tableThickness/2+u,o.position.x=e.tableWidth/2-p/2,o.receiveShadow=!0,h.add(o),i=new n.BoxGeometry(p,.001,c-p),o=new n.Mesh(i,s),o.position.y=e.tableThickness/2+u,o.position.z=p/2,o.receiveShadow=!0,h.add(o),t.add(a),a}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(55);e["default"]=function(t,e){var i=new n.Group,r=new n.Group;r.name="net-collider";var o=new n.BoxGeometry(e.tableWidth,e.netHeight,e.netThickness),s=new n.MeshBasicMaterial({color:1841748,transparent:!0,opacity:.2}),a=new n.Mesh(o,s);a.name="net",r.add(a),o=new n.BoxGeometry(e.tableWidth,.01,2*e.netHeight);var l=s.clone();l.visible=!1;var h=new n.Mesh(o,l);h.position.y=-e.netHeight/2,r.add(h),i.add(r),o=new n.PlaneGeometry(e.tableWidth,e.netThickness),s=new n.MeshBasicMaterial({color:16777215});var c=new n.Mesh(o,s);return c.position.y=e.netHeight/2+.001,c.rotation.x=-Math.PI/2,i.add(c),i.position.z=e.tablePositionZ,i.position.y=e.tableHeight+e.netHeight/2+.01,t.add(i),i.topNet=c,i.collider=a,i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(55);e["default"]=function(t,e){var i=new n.SphereGeometry(e.ballRadius,16,16),r=new n.MeshBasicMaterial({color:e.colors.BALL}),o=new n.Mesh(i,r);return t.add(o),o.castShadow=!0,o}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(55);e["default"]=function(t,e){var i=new n.SphereGeometry(.01,16,16),r=new n.MeshBasicMaterial({color:e.colors.BALL}),o=new n.Mesh(i,r);return t.add(o),o}},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(55);e["default"]=function(e,i,r){return new t(function(t){e.load("paddle.obj",function(e){var o=.024;e.scale.set(o,o,o);var s=new n.MeshBasicMaterial({color:i.colors.PADDLE_COLOR,side:n.DoubleSide}),a=new n.MeshBasicMaterial({color:i.colors.PADDLE_SIDE_COLOR,side:n.DoubleSide}),l=new n.MeshBasicMaterial({color:i.colors.PADDLE_WOOD_COLOR,side:n.DoubleSide}),h=new n.MeshBasicMaterial({color:i.colors.PADDLE_WOOD_SIDE_COLOR,side:n.DoubleSide});e.traverse(function(t){t.isMesh&&("Extrude"===t.name?t.material=a:"Cap_1"===t.name||"Cap_2"===t.name?t.material=s:"Extrude.1"===t.name?t.material=h:t.material=l),t.castShadow=!0});var c=e.clone();c.name="paddle",c.visible=!0,c.castShadow=!0,r.add(c);var u=e.clone();u.name="paddleOpponent",u.position.z=i.tablePositionZ-i.tableDepth/2,u.position.y=1,u.visible=!1,r.add(u),t({paddle:c,paddleOpponent:u})})})}}).call(e,i(2))},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(183),a=n(s),l=i(7),h=n(l),c=i(184),u=n(c),p=i(151),f=n(p),d=i(50),m=i(59),g="23456789QWERTZUPASDFGHJKLYXCVBNM",y=function(){function e(t){var i=this;r(this,e),this.emitter=t,this.callbacks={},this.latency=100,this.isHost=void 0,this.pingNumber=0,this.pingInterval=null,this.isOpponentConnected=!1,this.availableServers=["wss://konter-eu-1.madebywild.com:6020"],this.availablePrefixes=(0,u["default"])(g,Math.floor(g.length/this.availableServers.length)),this.pings={},this.roundTripTimes=[],(0,h["default"])(window).on("beforeunload",function(){i.isOpponentConnected&&i.statusRecord.set("player-"+(i.isHost?1:2),{action:d.ACTION.DISCONNECT}),i.statusRecord&&(i.statusRecord.discard(),i.statusRecord["delete"](),i.paddle1Record.discard(),i.paddle1Record["delete"](),i.paddle2Record.discard(),i.paddle2Record["delete"](),i.hitRecord.discard(),i.hitRecord["delete"](),i.missRecord.discard(),i.missRecord["delete"](),i.pingRecord.discard(),i.pingRecord["delete"]())})}return o(e,[{key:"setCallbacks",value:function(t){this.callbacks=t}},{key:"pingServer",value:function(e){var i=this;return new t(function(t){var n=(0,a["default"])(i.availableServers[e]),r=setTimeout(function(){n.close(),t("timeout")},3e3);n.on("error",function(){}),n.on("connectionStateChanged",function(i){i!==a["default"].CONSTANTS.CONNECTION_STATE.ERROR&&i!==a["default"].CONSTANTS.CONNECTION_STATE.CLOSED&&i!==a["default"].CONSTANTS.CONNECTION_STATE.RECONNECTING&&(clearTimeout(r),n.close(),t(e))})})}},{key:"chooseClosestServer",value:function(){var e=this;return new t(function(i,n){t.race(e.availableServers.map(function(t,i){return e.pingServer(i)})).then(function(t){return"timeout"===t?void n(t):(e.chosenServer=t,e.connectToServer(e.availableServers[t]))}).then(function(){i()})["catch"](function(t){console.warn("error:  "+t),n(t)})})}},{key:"connectToServer",value:function(e){var i=this;return new t(function(t,n){setTimeout(function(){n("timeout")},2e3),i.client=(0,a["default"])(e,{mergeStrategy:a["default"].MERGE_STRATEGIES.REMOTE_WINS}),i.client.login(),i.client.on("error",function(t){n(t)}),i.client.on("connectionStateChanged",function(e){e===a["default"].CONSTANTS.CONNECTION_STATE.OPEN&&t(),e===a["default"].CONSTANTS.CONNECTION_STATE.ERROR&&n("error")})})}},{key:"tryConnecting",value:function(e){var i=this;return this.isHost=!1,new t(function(t,n){var r=-1;i.availablePrefixes.forEach(function(t,i){t.indexOf(e[0])!==-1&&(r=i)}),r===-1&&n("no room found"),i.connectToServer(i.availableServers[r]).then(function(){i.GAME_ID=e,i.isHost=!1,i.setRecords(),i.statusRecord.subscribe("room-is-open",function(e){e?(i.startListening(),i.statusRecord.set("player-2",{action:d.ACTION.CONNECT}),i.isOpponentConnected=!0,setTimeout(i.sendPings.bind(i),1e3),t()):n("room already full")}),setTimeout(function(){n("no room found")},2e3)})["catch"](function(t){n(t)})})}},{key:"openRoom",value:function(){this.isHost=!0;var t=this.availablePrefixes[this.chosenServer][(0,m.rand)(0,this.availablePrefixes[this.chosenServer].length)];return this.GAME_ID=t+f["default"].generate({length:3,charset:g}),this.setRecords(),this.statusRecord.set("room-is-open",!0),this.startListening(),this.GAME_ID}},{key:"setRecords",value:function(){this.statusRecord=this.client.record.getRecord(this.GAME_ID+"-status"),this.paddle1Record=this.client.record.getRecord(this.GAME_ID+"-paddle1"),this.paddle2Record=this.client.record.getRecord(this.GAME_ID+"-paddle2"),this.hitRecord=this.client.record.getRecord(this.GAME_ID+"-hit"),this.missRecord=this.client.record.getRecord(this.GAME_ID+"-miss"),this.pingRecord=this.client.record.getRecord(this.GAME_ID+"-ping")}},{key:"sendPings",value:function(){var t=this;this.pingInterval=setInterval(function(){t.pings[t.pingNumber]=Date.now(),t.pingRecord.set("player-"+(t.isHost?1:2)+"-ping-"+t.pingNumber,{index:t.pingNumber,ping:!0}),t.pingNumber+=1,t.pingNumber>=20&&clearInterval(t.pingInterval)},1e3)}},{key:"receivedPong",value:function(t){var e=Date.now()-this.pings[t.index];this.roundTripTimes.push(e),this.roundTripTimes.sort(function(t,e){return t-e}),this.latency=this.roundTripTimes[Math.floor(this.roundTripTimes.length/2)]/2}},{key:"startListening",value:function(){var t=this;this.statusRecord.subscribe("player-"+(this.isHost?2:1),function(e){switch(e.action){case d.ACTION.CONNECT:setTimeout(t.sendPings.bind(t),1e3),t.statusRecord.set("room-is-open",!1),t.isOpponentConnected=!0,t.emitter.emit(d.EVENT.OPPONENT_CONNECTED);break;case d.ACTION.DISCONNECT:t.isOpponentConnected=!1,t.emitter.emit(d.EVENT.OPPONENT_DISCONNECTED);break;case d.ACTION.PAUSE:t.isOpponentConnected&&t.emitter.emit(d.EVENT.OPPONENT_PAUSED);break;case d.ACTION.UNPAUSE:t.isOpponentConnected&&t.emitter.emit(d.EVENT.OPPONENT_UNPAUSED);break;case d.ACTION.REQUEST_COUNTDOWN:t.callbacks.receivedRequestCountdown();break;case d.ACTION.RESTART_GAME:t.callbacks.receivedRestartGame();break;default:console.warn("unknown action")}}),this.isHost?this.paddle2Record.subscribe("position",function(e){t.callbacks.receivedMove(e)}):this.paddle1Record.subscribe("position",function(e){t.callbacks.receivedMove(e)}),this.hitRecord.subscribe("player-"+(this.isHost?2:1),function(e){t.callbacks.receivedHit(e)}),this.missRecord.subscribe("player-"+(this.isHost?2:1),function(e){t.callbacks.receivedMiss(e)});for(var e=0;e<20;e+=1)this.pingRecord.subscribe("player-"+(this.isHost?2:1)+"-ping-"+e,function(e){e.ping?t.pingRecord.set("player-"+(t.isHost?1:2)+"-ping-"+e.index,{index:e.index,pong:!0}):t.receivedPong(e)})}},{key:"sendMove",value:function(t,e){this.isHost?this.paddle1Record.set("position",{position:t,rotation:e}):this.paddle2Record.set("position",{position:t,rotation:e})}},{key:"sendHit",value:function(t,e){this.hitRecord.set("player-"+(this.isHost?1:2),{point:t,velocity:e,t:Date.now()})}},{key:"sendMiss",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.missRecord.set("player-"+(this.isHost?1:2),{point:t,velocity:e,ballHasHitEnemyTable:i,isInit:n,t:Date.now()})}},{key:"sendRestartGame",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.RESTART_GAME,t:Date.now()})}},{key:"sendRequestCountdown",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.REQUEST_COUNTDOWN,t:Date.now()})}},{key:"sendPause",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.PAUSE,t:Date.now()})}},{key:"sendUnpause",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.UNPAUSE,t:Date.now()})}}]),e}();e["default"]=y}).call(e,i(2))},function(t,e,i){var n,n;(function(e){!function(e){t.exports=e()}(function(){var t;return function i(t,e,r){function o(a,l){if(!e[a]){if(!t[a]){var h="function"==typeof n&&n;if(!l&&h)return n(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=e[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i?i:e)},u,u.exports,i,t,e,r)}return e[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){},{}],2:[function(t,e,i){function n(t){if(t)return r(t)}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}"undefined"!=typeof e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||Object.create(null),(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||Object.create(null),0==arguments.length)return this._callbacks=Object.create(null),this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks[t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||Object.create(null);for(var e=new Array(arguments.length-1),i=this._callbacks[t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||Object.create(null),this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length},n.prototype.eventNames=function(){return this._callbacks?Object.keys(this._callbacks):[]}},{}],3:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function s(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){g&&d&&(g=!1,d.length?m=d.concat(m):y=-1,m.length&&l())}function l(){if(!g){var t=o(a);g=!0;for(var e=m.length;e;){for(d=m,m=[];++y<e;)d&&d[y].run();y=-1,e=m.length}d=null,g=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function c(){}var u,p,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var d,m=[],g=!1,y=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];m.push(new h(t,e)),1!==m.length||g||o(l)},h.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],4:[function(i,n,r){(function(e){!function(i){function o(t){throw new RangeError(L[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function a(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(N,".");var r=t.split("."),o=s(r,e).join(".");return n+o}function l(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=B(t>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,i){var n=0;for(t=i?k(t/M):t>>1,t+=k(t/e);t>D*w>>1;n+=x)t=k(t/D);return k(n+(D+1)*t/(t+A))}function f(t){var e,i,n,r,s,a,l,u,f,d,m=[],g=t.length,y=0,v=C,_=P;for(i=t.lastIndexOf(R),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&o("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(s=y,a=1,l=x;r>=g&&o("invalid-input"),u=c(t.charCodeAt(r++)),(u>=x||u>k((E-y)/a))&&o("overflow"),y+=u*a,f=l<=_?S:l>=_+w?w:l-_,!(u<f);l+=x)d=x-f,a>k(E/d)&&o("overflow"),a*=d;e=m.length+1,_=p(y-s,e,0==s),k(y/e)>E-v&&o("overflow"),v+=k(y/e),y%=e,m.splice(y++,0,v)}return h(m)}function d(t){var e,i,n,r,s,a,h,c,f,d,m,g,y,v,_,b=[];for(t=l(t),g=t.length,e=C,i=0,s=P,a=0;a<g;++a)m=t[a],m<128&&b.push(B(m));for(n=r=b.length,r&&b.push(R);n<g;){for(h=E,a=0;a<g;++a)m=t[a],m>=e&&m<h&&(h=m);for(y=n+1,h-e>k((E-i)/y)&&o("overflow"),i+=(h-e)*y,e=h,a=0;a<g;++a)if(m=t[a],m<e&&++i>E&&o("overflow"),m==e){for(c=i,f=x;d=f<=s?S:f>=s+w?w:f-s,!(c<d);f+=x)_=c-d,v=x-d,b.push(B(u(d+_%v,0))),c=k(_/v);b.push(B(u(c,0))),s=p(i,y,n==r),i=0,++n}++i,++e}return b.join("")}function m(t){return a(t,function(t){return I.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return O.test(t)?"xn--"+d(t):t})}var y="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof n&&n&&!n.nodeType&&n,_="object"==typeof e&&e;_.global!==_&&_.window!==_&&_.self!==_||(i=_);var b,T,E=2147483647,x=36,S=1,w=26,A=38,M=700,P=72,C=128,R="-",I=/^xn--/,O=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=x-S,k=Math.floor,B=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:l,encode:h},decode:f,encode:d,toASCII:g,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return b});else if(y&&v)if(n.exports==y)v.exports=b;else for(T in b)b.hasOwnProperty(T)&&(y[T]=b[T]);else i.punycode=b}(this)}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var c=0;c<h;++c){var u,p,f,d,m=t[c].replace(a,"%20"),g=m.indexOf(i);g>=0?(u=m.substr(0,g),p=m.substr(g+1)):(u=m,p=""),f=decodeURIComponent(u),d=decodeURIComponent(p),n(s,f)?r(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(r(s))+i;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],7:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":5,"./encode":6}],8:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&h.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function o(t){return h.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var l=t("punycode"),h=t("./util");i.parse=r,i.resolve=s,i.resolveObject=a,i.format=o,i.Url=n;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(d),g=["%","/","?",";","#"].concat(m),y=["/","?","#"],v=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=t("querystring");n.prototype.parse=function(t,e,i){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=n!==-1&&n<t.indexOf("#")?"?":"#",o=t.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var u=p.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=c.exec(a);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,a=a.substr(f.length)}if(i||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===a.substr(0,2);!w||f&&E[f]||(a=a.substr(2),this.slashes=!0)}if(!E[f]&&(w||f&&!x[f])){for(var A=-1,M=0;M<y.length;M++){var P=a.indexOf(y[M]);P!==-1&&(A===-1||P<A)&&(A=P)}var C,R;R=A===-1?a.lastIndexOf("@"):a.lastIndexOf("@",A),R!==-1&&(C=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(C)),A=-1;for(var M=0;M<g.length;M++){var P=a.indexOf(g[M]);P!==-1&&(A===-1||P<A)&&(A=P)}A===-1&&(A=a.length),this.host=a.slice(0,A),a=a.slice(A),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),M=0,N=O.length;M<N;M++){var L=O[M];if(L&&!L.match(_)){for(var D="",k=0,B=L.length;k<B;k++)D+=L.charCodeAt(k)>127?"x":L[k];if(!D.match(_)){var G=O.slice(0,M),F=O.slice(M+1),V=L.match(b);V&&(G.push(V[1]),F.unshift(V[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=G.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=l.toASCII(this.hostname));var U=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!T[d])for(var M=0,N=m.length;M<N;M++){var j=m[M];if(a.indexOf(j)!==-1){var z=encodeURIComponent(j);z===j&&(z=escape(j)),a=a.split(j).join(z)}}var W=a.indexOf("#");W!==-1&&(this.hash=a.substr(W),a=a.slice(0,W));var X=a.indexOf("?");if(X!==-1?(this.search=a.substr(X),this.query=a.substr(X+1),e&&(this.query=S.parse(this.query)),a=a.slice(0,X)):e&&(this.search="",this.query={}),a&&(this.pathname=a),x[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",Y=this.search||"";this.path=U+Y}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||x[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+i+s+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var c=a[l];"protocol"!==c&&(i[c]=t[c])}return x[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!x[t.protocol]){for(var u=Object.keys(t),p=0;p<u.length;p++){var f=u[p];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||E[t.protocol])i.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",g=i.search||"";i.path=m+g}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=v||y||i.host&&t.pathname,b=_,T=i.pathname&&i.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],S=i.protocol&&!x[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===T[0])),v)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),i.search=t.search,i.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(S){i.hostname=i.host=T.shift();var w=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");w&&(i.auth=w.shift(),i.host=i.hostname=w.shift())}return i.search=t.search,i.query=t.query,h.isNull(i.pathname)&&h.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=T.slice(-1)[0],M=(i.host||t.host||T.length>1)&&("."===A||".."===A)||""===A,P=0,C=T.length;C>=0;C--)A=T[C],"."===A?T.splice(C,1):".."===A?(T.splice(C,1),P++):P&&(T.splice(C,1),P--);if(!_&&!b)for(;P--;P)T.unshift("..");!_||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),M&&"/"!==T.join("/").substr(-1)&&T.push("");
var R=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(S){i.hostname=i.host=R?"":T.length?T.shift():"";var w=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");w&&(i.auth=w.shift(),i.host=i.hostname=w.shift())}return _=_||i.host&&T.length,_&&!R&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),h.isNull(i.pathname)&&h.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":9,punycode:4,querystring:7}],9:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],10:[function(t,e,i){"use strict";function n(t,e){return new d(t,e)}var r=t("./constants/constants"),o=t("./constants/merge-strategies"),s=t("component-emitter2"),a=t("./message/connection"),l=t("./event/event-handler"),h=t("./rpc/rpc-handler"),c=t("./record/record-handler"),u=t("./presence/presence-handler"),p=t("./default-options"),f=t("./utils/ack-timeout-registry"),d=function(t,e){this._url=t,this._options=this._getOptions(e||{}),this._connection=new a(this,this._url,this._options),this._ackTimeoutRegistry=new f(this,this._options),this.event=new l(this._options,this._connection,this),this.rpc=new h(this._options,this._connection,this),this.record=new c(this._options,this._connection,this),this.presence=new u(this._options,this._connection,this),this._messageCallbacks={},this._messageCallbacks[r.TOPIC.EVENT]=this.event._$handle.bind(this.event),this._messageCallbacks[r.TOPIC.RPC]=this.rpc._$handle.bind(this.rpc),this._messageCallbacks[r.TOPIC.RECORD]=this.record._$handle.bind(this.record),this._messageCallbacks[r.TOPIC.PRESENCE]=this.presence._$handle.bind(this.presence),this._messageCallbacks[r.TOPIC.ERROR]=this._onErrorMessage.bind(this)};s(d.prototype),d.prototype.login=function(t,e){return"function"==typeof t?this._connection.authenticate({},t):this._connection.authenticate(t||{},e),this},d.prototype.close=function(){this._connection.close()},d.prototype.getConnectionState=function(){return this._connection.getState()},d.prototype.getUid=function(){var t=(new Date).getTime().toString(36),e=(1e16*Math.random()).toString(36).replace(".","");return t+"-"+e},d.prototype._$getAckTimeoutRegistry=function(){return this._ackTimeoutRegistry},d.prototype._$onMessage=function(t){this._messageCallbacks[t.topic]?this._messageCallbacks[t.topic](t):(t.processedError=!0,this._$onError(t.topic,r.EVENT.MESSAGE_PARSE_ERROR,"Received message for unknown topic "+t.topic)),t.action!==r.ACTIONS.ERROR||t.processedError||this._$onError(t.topic,t.data[0],t.data.slice(0))},d.prototype._$onError=function(t,e,i){var n=void 0;if(e!==r.EVENT.ACK_TIMEOUT&&e!==r.EVENT.RESPONSE_TIMEOUT||this.getConnectionState()===r.CONNECTION_STATE.AWAITING_AUTHENTICATION&&(n="Your message timed out because you're not authenticated. Have you called login()?",setTimeout(this._$onError.bind(this,r.EVENT.NOT_AUTHENTICATED,r.TOPIC.ERROR,n),1)),!this.hasListeners("error"))throw console.log("--- You can catch all deepstream errors by subscribing to the error event ---"),n=e+": "+i,t&&(n+=" ("+t+")"),new Error(n);this.emit("error",i,e,t),this.emit(e,t,i)},d.prototype._onErrorMessage=function(t){this._$onError(t.topic,t.data[0],t.data[1])},d.prototype._getOptions=function(t){var e={};for(var i in p)"undefined"==typeof t[i]?e[i]=p[i]:e[i]=t[i];return e},d.prototype.CONSTANTS=r,n.CONSTANTS=r,d.prototype.MERGE_STRATEGIES=o,n.MERGE_STRATEGIES=o,e.exports=n},{"./constants/constants":11,"./constants/merge-strategies":12,"./default-options":13,"./event/event-handler":14,"./message/connection":15,"./presence/presence-handler":18,"./record/record-handler":22,"./rpc/rpc-handler":24,"./utils/ack-timeout-registry":27,"component-emitter2":2}],11:[function(t,e,i){"use strict";i.CONNECTION_STATE={},i.CONNECTION_STATE.CLOSED="CLOSED",i.CONNECTION_STATE.AWAITING_CONNECTION="AWAITING_CONNECTION",i.CONNECTION_STATE.CHALLENGING="CHALLENGING",i.CONNECTION_STATE.AWAITING_AUTHENTICATION="AWAITING_AUTHENTICATION",i.CONNECTION_STATE.AUTHENTICATING="AUTHENTICATING",i.CONNECTION_STATE.OPEN="OPEN",i.CONNECTION_STATE.ERROR="ERROR",i.CONNECTION_STATE.RECONNECTING="RECONNECTING",i.MESSAGE_SEPERATOR=String.fromCharCode(30),i.MESSAGE_PART_SEPERATOR=String.fromCharCode(31),i.TYPES={},i.TYPES.STRING="S",i.TYPES.OBJECT="O",i.TYPES.NUMBER="N",i.TYPES.NULL="L",i.TYPES.TRUE="T",i.TYPES.FALSE="F",i.TYPES.UNDEFINED="U",i.TOPIC={},i.TOPIC.CONNECTION="C",i.TOPIC.AUTH="A",i.TOPIC.ERROR="X",i.TOPIC.EVENT="E",i.TOPIC.RECORD="R",i.TOPIC.RPC="P",i.TOPIC.PRESENCE="U",i.TOPIC.PRIVATE="PRIVATE/",i.EVENT={},i.EVENT.CONNECTION_ERROR="connectionError",i.EVENT.CONNECTION_STATE_CHANGED="connectionStateChanged",i.EVENT.MAX_RECONNECTION_ATTEMPTS_REACHED="MAX_RECONNECTION_ATTEMPTS_REACHED",i.EVENT.CONNECTION_AUTHENTICATION_TIMEOUT="CONNECTION_AUTHENTICATION_TIMEOUT",i.EVENT.ACK_TIMEOUT="ACK_TIMEOUT",i.EVENT.NO_RPC_PROVIDER="NO_RPC_PROVIDER",i.EVENT.RESPONSE_TIMEOUT="RESPONSE_TIMEOUT",i.EVENT.DELETE_TIMEOUT="DELETE_TIMEOUT",i.EVENT.UNSOLICITED_MESSAGE="UNSOLICITED_MESSAGE",i.EVENT.MESSAGE_DENIED="MESSAGE_DENIED",i.EVENT.MESSAGE_PARSE_ERROR="MESSAGE_PARSE_ERROR",i.EVENT.VERSION_EXISTS="VERSION_EXISTS",i.EVENT.NOT_AUTHENTICATED="NOT_AUTHENTICATED",i.EVENT.MESSAGE_PERMISSION_ERROR="MESSAGE_PERMISSION_ERROR",i.EVENT.LISTENER_EXISTS="LISTENER_EXISTS",i.EVENT.NOT_LISTENING="NOT_LISTENING",i.EVENT.TOO_MANY_AUTH_ATTEMPTS="TOO_MANY_AUTH_ATTEMPTS",i.EVENT.INVALID_AUTH_MSG="INVALID_AUTH_MSG",i.EVENT.IS_CLOSED="IS_CLOSED",i.EVENT.RECORD_NOT_FOUND="RECORD_NOT_FOUND",i.EVENT.NOT_SUBSCRIBED="NOT_SUBSCRIBED",i.ACTIONS={},i.ACTIONS.PING="PI",i.ACTIONS.PONG="PO",i.ACTIONS.ACK="A",i.ACTIONS.REDIRECT="RED",i.ACTIONS.CHALLENGE="CH",i.ACTIONS.CHALLENGE_RESPONSE="CHR",i.ACTIONS.READ="R",i.ACTIONS.CREATE="C",i.ACTIONS.UPDATE="U",i.ACTIONS.PATCH="P",i.ACTIONS.DELETE="D",i.ACTIONS.SUBSCRIBE="S",i.ACTIONS.UNSUBSCRIBE="US",i.ACTIONS.HAS="H",i.ACTIONS.SNAPSHOT="SN",i.ACTIONS.INVOKE="I",i.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND="SP",i.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED="SR",i.ACTIONS.SUBSCRIPTION_HAS_PROVIDER="SH",i.ACTIONS.LISTEN="L",i.ACTIONS.UNLISTEN="UL",i.ACTIONS.LISTEN_ACCEPT="LA",i.ACTIONS.LISTEN_REJECT="LR",i.ACTIONS.PROVIDER_UPDATE="PU",i.ACTIONS.QUERY="Q",i.ACTIONS.CREATEORREAD="CR",i.ACTIONS.CREATEANDUPDATE="CU",i.ACTIONS.EVENT="EVT",i.ACTIONS.ERROR="E",i.ACTIONS.REQUEST="REQ",i.ACTIONS.RESPONSE="RES",i.ACTIONS.REJECTION="REJ",i.ACTIONS.PRESENCE_JOIN="PNJ",i.ACTIONS.PRESENCE_LEAVE="PNL",i.ACTIONS.WRITE_ACKNOWLEDGEMENT="WA",i.CALL_STATE={},i.CALL_STATE.INITIAL="INITIAL",i.CALL_STATE.CONNECTING="CONNECTING",i.CALL_STATE.ESTABLISHED="ESTABLISHED",i.CALL_STATE.ACCEPTED="ACCEPTED",i.CALL_STATE.DECLINED="DECLINED",i.CALL_STATE.ENDED="ENDED",i.CALL_STATE.ERROR="ERROR"},{}],12:[function(t,e,i){"use strict";e.exports={REMOTE_WINS:function(t,e,i,n){n(null,e)},LOCAL_WINS:function(t,e,i,n){n(null,t.get())}}},{}],13:[function(t,e,i){"use strict";var n=t("./constants/merge-strategies");e.exports={heartbeatInterval:3e4,reconnectIntervalIncrement:4e3,maxReconnectInterval:18e4,maxReconnectAttempts:5,rpcAckTimeout:6e3,rpcResponseTimeout:1e4,subscriptionTimeout:2e3,maxMessagesPerPacket:100,timeBetweenSendingQueuedPackages:16,recordReadAckTimeout:15e3,recordReadTimeout:15e3,recordDeleteTimeout:15e3,path:"/deepstream",mergeStrategy:n.REMOTE_WINS,recordDeepCopy:!0,nodeSocketOptions:null}},{"./constants/merge-strategies":12}],14:[function(t,e,i){"use strict";var n=t("../message/message-builder"),r=t("../message/message-parser"),o=t("../utils/resubscribe-notifier"),s=t("../constants/constants"),a=t("../utils/listener"),l=t("component-emitter2"),h=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._emitter=new l,this._listener={},this._ackTimeoutRegistry=i._$getAckTimeoutRegistry(),this._resubscribeNotifier=new o(this._client,this._resubscribe.bind(this))};h.prototype.subscribe=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if("function"!=typeof e)throw new Error("invalid argument callback");this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add({topic:s.TOPIC.EVENT,action:s.ACTIONS.SUBSCRIBE,name:t}),this._connection.sendMsg(s.TOPIC.EVENT,s.ACTIONS.SUBSCRIBE,[t])),this._emitter.on(t,e)},h.prototype.unsubscribe=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if(void 0!==e&&"function"!=typeof e)throw new Error("invalid argument callback");this._emitter.off(t,e),this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add({topic:s.TOPIC.EVENT,action:s.ACTIONS.UNSUBSCRIBE,name:t}),this._connection.sendMsg(s.TOPIC.EVENT,s.ACTIONS.UNSUBSCRIBE,[t]))},h.prototype.emit=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._connection.sendMsg(s.TOPIC.EVENT,s.ACTIONS.EVENT,[t,n.typed(e)]),this._emitter.emit(t,e)},h.prototype.listen=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");if("function"!=typeof e)throw new Error("invalid argument callback");return this._listener[t]&&!this._listener[t].destroyPending?void this._client._$onError(s.TOPIC.EVENT,s.EVENT.LISTENER_EXISTS,t):(this._listener[t]&&this._listener[t].destroy(),void(this._listener[t]=new a(s.TOPIC.EVENT,t,e,this._options,this._client,this._connection)))},h.prototype.unlisten=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");var e=this._listener[t];e&&!e.destroyPending?e.sendDestroy():this._listener[t]?(this._ackTimeoutRegistry.add({topic:s.TOPIC.EVENT,action:s.EVENT.UNLISTEN,name:t}),this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(s.TOPIC.RECORD,s.EVENT.NOT_LISTENING,t)},h.prototype._$handle=function(t){var e=t.data[t.action===s.ACTIONS.ACK?1:0];if(t.action===s.ACTIONS.EVENT)return void(t.data&&2===t.data.length?this._emitter.emit(e,r.convertTyped(t.data[1],this._client)):this._emitter.emit(e));if(t.action===s.ACTIONS.ACK&&t.data[0]===s.ACTIONS.UNLISTEN&&this._listener[e]&&this._listener[e].destroyPending)return this._listener[e].destroy(),void delete this._listener[e];if(this._listener[e])return void this._listener[e]._$onMessage(t);if(t.action!==s.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED&&t.action!==s.ACTIONS.SUBSCRIPTION_HAS_PROVIDER)return t.action===s.ACTIONS.ACK?void this._ackTimeoutRegistry.clear(t):t.action===s.ACTIONS.ERROR?(t.data[0]===s.EVENT.MESSAGE_DENIED?this._ackTimeoutRegistry.remove({topic:s.TOPIC.EVENT,name:t.data[1],action:t.data[2]}):t.data[0]===s.EVENT.NOT_SUBSCRIBED&&this._ackTimeoutRegistry.remove({topic:s.TOPIC.EVENT,name:t.data[1],action:s.ACTIONS.UNSUBSCRIBE}),t.processedError=!0,void this._client._$onError(s.TOPIC.EVENT,t.data[0],t.data[1])):void this._client._$onError(s.TOPIC.EVENT,s.EVENT.UNSOLICITED_MESSAGE,e)},h.prototype._resubscribe=function(){var t=this._emitter._callbacks;for(var e in t)this._connection.sendMsg(s.TOPIC.EVENT,s.ACTIONS.SUBSCRIBE,[e])},e.exports=h},{"../constants/constants":11,"../message/message-builder":16,"../message/message-parser":17,"../utils/listener":28,"../utils/resubscribe-notifier":29,"component-emitter2":2}],15:[function(t,i,n){(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=e.WebSocket||e.MozWebSocket,o=t("ws"),s=t("./message-parser"),a=t("./message-builder"),l=t("../utils/utils"),h=t("../constants/constants"),c=function(t,e,i){this._client=t,this._options=i,this._authParams=null,this._authCallback=null,this._deliberateClose=!1,this._redirecting=!1,this._tooManyAuthAttempts=!1,this._connectionAuthenticationTimeout=!1,this._challengeDenied=!1,this._queuedMessages=[],this._reconnectTimeout=null,this._reconnectionAttempt=0,this._currentPacketMessageCount=0,this._sendNextPacketTimeout=null,this._currentMessageResetTimeout=null,this._endpoint=null,this._lastHeartBeat=null,this._heartbeatInterval=null,this._originalUrl=l.parseUrl(e,this._options.path),this._url=this._originalUrl,this._state=h.CONNECTION_STATE.CLOSED,this._createEndpoint()};c.prototype.getState=function(){return this._state},c.prototype.authenticate=function(t,e){return"object"!==("undefined"==typeof t?"undefined":n(t))?void this._client._$onError(h.TOPIC.ERROR,h.EVENT.INVALID_AUTH_MSG,"authParams is not an object"):(this._authParams=t,this._authCallback=e,this._tooManyAuthAttempts||this._challengeDenied||this._connectionAuthenticationTimeout?void this._client._$onError(h.TOPIC.ERROR,h.EVENT.IS_CLOSED,"this client's connection was closed"):this._deliberateClose===!0&&this._state===h.CONNECTION_STATE.CLOSED?(this._createEndpoint(),void(this._deliberateClose=!1)):void(this._state===h.CONNECTION_STATE.AWAITING_AUTHENTICATION&&this._sendAuthParams()))},c.prototype.sendMsg=function(t,e,i){this.send(a.getMsg(t,e,i))},c.prototype.send=function(t){this._queuedMessages.push(t),this._currentPacketMessageCount++,null===this._currentMessageResetTimeout&&(this._currentMessageResetTimeout=l.nextTick(this._resetCurrentMessageCount.bind(this))),this._state===h.CONNECTION_STATE.OPEN&&this._queuedMessages.length<this._options.maxMessagesPerPacket&&this._currentPacketMessageCount<this._options.maxMessagesPerPacket?this._sendQueuedMessages():null===this._sendNextPacketTimeout&&this._queueNextPacket()},c.prototype.close=function(){clearInterval(this._heartbeatInterval),this._deliberateClose=!0,this._endpoint.close()},c.prototype._createEndpoint=function(){this._endpoint=r?new r(this._url):new o(this._url,this._options.nodeSocketOptions),this._endpoint.onopen=this._onOpen.bind(this),this._endpoint.onerror=this._onError.bind(this),this._endpoint.onclose=this._onClose.bind(this),this._endpoint.onmessage=this._onMessage.bind(this)},c.prototype._resetCurrentMessageCount=function(){this._currentPacketMessageCount=0,this._currentMessageResetTimeout=null},c.prototype._sendQueuedMessages=function(){if(this._state===h.CONNECTION_STATE.OPEN&&this._endpoint.readyState===this._endpoint.OPEN){if(0===this._queuedMessages.length)return void(this._sendNextPacketTimeout=null);var t=this._queuedMessages.splice(0,this._options.maxMessagesPerPacket).join("");0!==this._queuedMessages.length?this._queueNextPacket():this._sendNextPacketTimeout=null,this._submit(t)}},c.prototype._submit=function(t){this._endpoint.readyState===this._endpoint.OPEN?this._endpoint.send(t):this._onError("Tried to send message on a closed websocket connection")},c.prototype._queueNextPacket=function(){var t=this._sendQueuedMessages.bind(this),e=this._options.timeBetweenSendingQueuedPackages;this._sendNextPacketTimeout=setTimeout(t,e)},c.prototype._sendAuthParams=function(){this._setState(h.CONNECTION_STATE.AUTHENTICATING);var t=a.getMsg(h.TOPIC.AUTH,h.ACTIONS.REQUEST,[this._authParams]);this._submit(t)},c.prototype._checkHeartBeat=function(){var t=2*this._options.heartbeatInterval;Date.now()-this._lastHeartBeat>t&&(clearInterval(this._heartbeatInterval),this._endpoint.close(),this._client._$onError(h.TOPIC.CONNECTION,h.EVENT.CONNECTION_ERROR,"heartbeat not received in the last "+t+" milliseconds"))},c.prototype._onOpen=function(){this._clearReconnect(),this._lastHeartBeat=Date.now(),this._heartbeatInterval=l.setInterval(this._checkHeartBeat.bind(this),this._options.heartbeatInterval),this._setState(h.CONNECTION_STATE.AWAITING_CONNECTION)},c.prototype._onError=function(t){var e=this;clearInterval(this._heartbeatInterval),this._setState(h.CONNECTION_STATE.ERROR),setTimeout(function(){var i=void 0;if("ECONNRESET"===t.code||"ECONNREFUSED"===t.code)i="Can't connect! Deepstream server unreachable on "+e._originalUrl;else try{i=JSON.stringify(t)}catch(n){i=t.toString()}e._client._$onError(h.TOPIC.CONNECTION,h.EVENT.CONNECTION_ERROR,i)},1)},c.prototype._onClose=function(){clearInterval(this._heartbeatInterval),this._redirecting===!0?(this._redirecting=!1,this._createEndpoint()):this._deliberateClose===!0?this._setState(h.CONNECTION_STATE.CLOSED):this._tryReconnect()},c.prototype._onMessage=function(t){for(var e=s.parse(t.data,this._client),i=0;i<e.length;i++)null!==e[i]&&(e[i].topic===h.TOPIC.CONNECTION?this._handleConnectionResponse(e[i]):e[i].topic===h.TOPIC.AUTH?this._handleAuthResponse(e[i]):this._client._$onMessage(e[i]))},c.prototype._handleConnectionResponse=function(t){t.action===h.ACTIONS.PING?(this._lastHeartBeat=Date.now(),this._submit(a.getMsg(h.TOPIC.CONNECTION,h.ACTIONS.PONG))):t.action===h.ACTIONS.ACK?(this._setState(h.CONNECTION_STATE.AWAITING_AUTHENTICATION),this._authParams&&this._sendAuthParams()):t.action===h.ACTIONS.CHALLENGE?(this._setState(h.CONNECTION_STATE.CHALLENGING),this._submit(a.getMsg(h.TOPIC.CONNECTION,h.ACTIONS.CHALLENGE_RESPONSE,[this._originalUrl]))):t.action===h.ACTIONS.REJECTION?(this._challengeDenied=!0,this.close()):t.action===h.ACTIONS.REDIRECT?(this._url=t.data[0],this._redirecting=!0,this._endpoint.close()):t.action===h.ACTIONS.ERROR&&t.data[0]===h.EVENT.CONNECTION_AUTHENTICATION_TIMEOUT&&(this._deliberateClose=!0,this._connectionAuthenticationTimeout=!0,this._client._$onError(h.TOPIC.CONNECTION,t.data[0],t.data[1]))},c.prototype._handleAuthResponse=function(t){if(t.action===h.ACTIONS.ERROR){if(t.data[0]===h.EVENT.TOO_MANY_AUTH_ATTEMPTS)this._deliberateClose=!0,this._tooManyAuthAttempts=!0;else{if(t.data[0]===h.EVENT.INVALID_AUTH_MSG)return this._deliberateClose=!0,void(this._authCallback&&this._authCallback(!1,"invalid authentication message"));this._setState(h.CONNECTION_STATE.AWAITING_AUTHENTICATION)}this._authCallback&&this._authCallback(!1,this._getAuthData(t.data[1]))}else t.action===h.ACTIONS.ACK&&(this._setState(h.CONNECTION_STATE.OPEN),this._authCallback&&this._authCallback(!0,this._getAuthData(t.data[0])),this._sendQueuedMessages())},c.prototype._getAuthData=function(t){return void 0===t?null:s.convertTyped(t,this._client)},c.prototype._setState=function(t){this._state=t,this._client.emit(h.EVENT.CONNECTION_STATE_CHANGED,t)},c.prototype._tryReconnect=function(){null===this._reconnectTimeout&&(this._reconnectionAttempt<this._options.maxReconnectAttempts?(this._setState(h.CONNECTION_STATE.RECONNECTING),this._reconnectTimeout=setTimeout(this._tryOpen.bind(this),Math.min(this._options.maxReconnectInterval,this._options.reconnectIntervalIncrement*this._reconnectionAttempt)),this._reconnectionAttempt++):(this._clearReconnect(),this.close(),this._client.emit(h.EVENT.MAX_RECONNECTION_ATTEMPTS_REACHED,this._reconnectionAttempt)))},c.prototype._tryOpen=function(){this._originalUrl!==this._url&&(this._url=this._originalUrl),this._createEndpoint(),this._reconnectTimeout=null},c.prototype._clearReconnect=function(){clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null,this._reconnectionAttempt=0},i.exports=c}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants/constants":11,"../utils/utils":31,"./message-builder":16,"./message-parser":17,ws:1}],16:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("../constants/constants"),o=r.MESSAGE_PART_SEPERATOR;i.getMsg=function(t,e,i){if(i&&!(i instanceof Array))throw new Error("data must be an array");var s=[t,e];if(i)for(var a=0;a<i.length;a++)"object"===n(i[a])?s.push(JSON.stringify(i[a])):s.push(i[a]);return s.join(o)+r.MESSAGE_SEPERATOR},i.typed=function(t){var e="undefined"==typeof t?"undefined":n(t);if("string"===e)return r.TYPES.STRING+t;if(null===t)return r.TYPES.NULL;if("object"===e)return r.TYPES.OBJECT+JSON.stringify(t);if("number"===e)return r.TYPES.NUMBER+t.toString();if(t===!0)return r.TYPES.TRUE;if(t===!1)return r.TYPES.FALSE;if(void 0===t)return r.TYPES.UNDEFINED;throw new Error("Can't serialize type "+t)}},{"../constants/constants":11}],17:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=function(){this._actions=this._getActions()};r.prototype.parse=function(t,e){for(var i=[],r=t.split(n.MESSAGE_SEPERATOR),o=0;o<r.length;o++)r[o].length>2&&i.push(this._parseMessage(r[o],e));return i},r.prototype.convertTyped=function(t,e){var i=t.charAt(0);if(i===n.TYPES.STRING)return t.substr(1);if(i===n.TYPES.OBJECT)try{return JSON.parse(t.substr(1))}catch(r){return void e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,r.toString()+"("+t+")")}return i===n.TYPES.NUMBER?parseFloat(t.substr(1)):i===n.TYPES.NULL?null:i===n.TYPES.TRUE||i!==n.TYPES.FALSE&&void(i!==n.TYPES.UNDEFINED&&e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"UNKNOWN_TYPE ("+t+")"))},r.prototype._getActions=function(){var t={};for(var e in n.ACTIONS)t[n.ACTIONS[e]]=e;return t},r.prototype._parseMessage=function(t,e){var i=t.split(n.MESSAGE_PART_SEPERATOR),r={};return i.length<2?(e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"Insufficiant message parts"),null):void 0===this._actions[i[1]]?(e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"Unknown action "+i[1]),null):(r.raw=t,r.topic=i[0],r.action=i[1],r.data=i.splice(2),r)},e.exports=new r},{"../constants/constants":11}],18:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i){if("function"==typeof t&&void 0===e?(e=t,t=i):t=[t],void 0!==e&&"function"!=typeof e)throw new Error("invalid argument callback");return{userId:t,callback:e}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("component-emitter2"),l=t("../constants/constants"),h=t("../utils/resubscribe-notifier");e.exports=function(){function t(e,i,r){n(this,t),this._options=e,this._connection=i,this._client=r,this._queryEmitter=new a,this._subscribeEmitter=new a,this._ackTimeoutRegistry=r._$getAckTimeoutRegistry(),this._resubscribeNotifier=new h(this._client,this._resubscribe.bind(this)),this._counter=1,this._flush=this._flush.bind(this),this._flushTimeout=null,this._pendingSubscribes={},this._pendingUnsubscribes={}}return s(t,[{key:"getAll",value:function(t,e){if("function"==typeof t)this._connection.sendMsg(l.TOPIC.PRESENCE,l.ACTIONS.QUERY,[l.ACTIONS.QUERY]),this._queryEmitter.once(l.ACTIONS.QUERY,t);else{var i=this._counter++;this._connection.sendMsg(l.TOPIC.PRESENCE,l.ACTIONS.QUERY,[i,t]),this._queryEmitter.once(i,e)}}},{key:"subscribe",value:function(t,e){var i=r(t,e,l.ACTIONS.SUBSCRIBE);this._subscribeEmitter.hasListeners(i.userId)||(i.userId===l.ACTIONS.SUBSCRIBE?(this._sendGlobalSubscription(l.ACTIONS.SUBSCRIBE),this._subscribeEmitter.on(l.ACTIONS.SUBSCRIBE,i.callback)):(delete this._pendingUnsubscribes[i.userId],this._pendingSubscribes[i.userId]=!0,this._flushTimeout||(this._flushTimeout=setTimeout(this._flush,0)),this._subscribeEmitter.on(i.userId,i.callback)))}},{key:"unsubscribe",value:function(t,e){var i=r(t,e,l.ACTIONS.UNSUBSCRIBE);i.userId===l.ACTIONS.UNSUBSCRIBE?this._subscribeEmitter.off(l.ACTIONS.SUBSCRIBE,i.callback):this._subscribeEmitter.off(i.userId,i.callback),this._subscribeEmitter.hasListeners(i.userId)||(i.userId===l.ACTIONS.UNSUBSCRIBE?this._sendGlobalSubscription(l.ACTIONS.UNSUBSCRIBE):(delete this._pendingSubscribes[i.userId],this._pendingUnsubscribes[i.userId]=!0,this._flushTimeout||(this._flushTimeout=setTimeout(this._flush,0))))}},{key:"_$handle",value:function(t){if(t.action===l.ACTIONS.ERROR&&t.data[0]===l.EVENT.MESSAGE_DENIED)this._ackTimeoutRegistry.remove(l.TOPIC.PRESENCE,t.data[1]),t.processedError=!0,this._client._$onError(l.TOPIC.PRESENCE,l.EVENT.MESSAGE_DENIED,t.data[1]);else if(t.action===l.ACTIONS.ACK)this._ackTimeoutRegistry.clear(t);else if(t.action===l.ACTIONS.PRESENCE_JOIN)this._subscribeEmitter.emit(l.ACTIONS.SUBSCRIBE,t.data[0],!0),this._subscribeEmitter.emit(t.data[0],!0,t.data[0]);else if(t.action===l.ACTIONS.PRESENCE_LEAVE)this._subscribeEmitter.emit(l.ACTIONS.SUBSCRIBE,t.data[0],!1),this._subscribeEmitter.emit(t.data[0],!1,t.data[0]);else if(t.action===l.ACTIONS.QUERY){try{var e=JSON.parse(t.data[1]);if("object"===("undefined"==typeof e?"undefined":o(e)))return void this._queryEmitter.emit(t.data[0],e)}catch(i){}this._queryEmitter.emit(l.ACTIONS.QUERY,t.data)}else this._client._$onError(l.TOPIC.PRESENCE,l.EVENT.UNSOLICITED_MESSAGE,t.action)}},{key:"_resubscribe",value:function(){var t=Object.keys(this._subscribeEmitter._callbacks||{});t.indexOf(l.ACTIONS.SUBSCRIBE)>-1&&(t.splice(t.indexOf(l.ACTIONS.SUBSCRIBE),1),this._sendGlobalSubscription(l.ACTIONS.SUBSCRIBE)),t.length>0&&this._sendSubscriptionBulk(l.ACTIONS.SUBSCRIBE,t)}},{key:"_flush",value:function(){var t=Object.keys(this._pendingSubscribes);t.length>0&&(this._sendSubscriptionBulk(l.ACTIONS.SUBSCRIBE,t),this._pendingSubscribes={});var e=Object.keys(this._pendingUnsubscribes);e.length>0&&(this._sendSubscriptionBulk(l.ACTIONS.UNSUBSCRIBE,e),this._pendingUnsubscribes={}),this._flushTimeout=null}},{key:"_sendSubscriptionBulk",value:function(t,e){var i=this._counter++;this._ackTimeoutRegistry.add({topic:l.TOPIC.PRESENCE,action:t,name:i}),this._connection.sendMsg(l.TOPIC.PRESENCE,t,[i,e])}},{key:"_sendGlobalSubscription",value:function(t){this._ackTimeoutRegistry.add({topic:l.TOPIC.PRESENCE,action:t,name:t}),this._connection.sendMsg(l.TOPIC.PRESENCE,t,[t])}}]),t}()},{"../constants/constants":11,"../utils/resubscribe-notifier":29,"component-emitter2":2}],19:[function(t,e,i){"use strict";var n=t("./record"),r=t("component-emitter2"),o=function(t){this.name=null,this._recordHandler=t,this._record=null,this._subscriptions=[],this._proxyMethod("delete"),this._proxyMethod("set"),this._proxyMethod("discard")};r(o.prototype),o.prototype.get=function(t){if(null!==this._record)return this._record.get(t)},o.prototype.subscribe=function(){var t=n.prototype._normalizeArguments(arguments);t.triggerNow=!0,this._subscriptions.push(t),null!==this._record&&this._record.subscribe(t)},o.prototype.unsubscribe=function(){var t=n.prototype._normalizeArguments(arguments),e=[],i=void 0;for(i=0;i<this._subscriptions.length;i++)this._subscriptions[i].path===t.path&&this._subscriptions[i].callback===t.callback||e.push(this._subscriptions[i]);this._subscriptions=e,null!==this._record&&this._record.unsubscribe(t)},o.prototype.setName=function(t){if(this.name!==t){this.name=t;var e=void 0;if(null!==this._record&&!this._record.isDestroyed){for(e=0;e<this._subscriptions.length;e++)this._record.unsubscribe(this._subscriptions[e]);this._record.discard()}for(this._record=this._recordHandler.getRecord(t),e=0;e<this._subscriptions.length;e++)this._record.subscribe(this._subscriptions[e]);this._record.whenReady(this.emit.bind(this,"ready")),this.emit("nameChanged",t)}},o.prototype._proxyMethod=function(t){this[t]=this._callMethodOnRecord.bind(this,t)},o.prototype._callMethodOnRecord=function(t){if(null===this._record)throw new Error("Can`t invoke "+t+". AnonymousRecord not initialised. Call setName first");if("function"!=typeof this._record[t])throw new Error(t+" is not a method on the record");var e=Array.prototype.slice.call(arguments,1);return this._record[t].apply(this._record,e)},e.exports=o},{"./record":23,"component-emitter2":2}],20:[function(t,e,i){"use strict";function n(t,e,i){var r=void 0,a=void 0;if(null===t||null===e)return e;if(Array.isArray(t)&&Array.isArray(e)){var l=void 0;for(r=0;r<e.length;r++){var h=n(t[r],e[r],!1);if(!l){if(h===t[r])continue;for(l=[],a=0;a<r;++a)l[a]=t[a]}l[r]=h}return l=l&&i!==!1?s.deepCopy(l):l,l=l||(t.length===e.length?t:e)}if(!Array.isArray(e)&&"object"===("undefined"==typeof t?"undefined":o(t))&&"object"===("undefined"==typeof e?"undefined":o(e))){var c=void 0,u=Object.keys(e);for(r=0;r<u.length;r++){var p=n(t[u[r]],e[u[r]],!1);if(!c){if(p===t[u[r]])continue;for(c=Object.create(null),a=0;a<r;++a)c[u[a]]=t[u[a]]}c[u[r]]=e[u[r]]}return c=c&&i!==!1?s.deepCopy(c):c,c=c||(Object.keys(t).length===u.length?t:e)}return e!==t?i!==!1?s.deepCopy(e):e:t}function r(t){if(l[t])return l[t];var e="undefined"!==String(t)?String(t).match(a):[];if(!e)throw new Error("invalid path "+t);return l[t]=e,l[t]}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t("../utils/utils"),a=/([^.[\]\s]+)/g,l=Object.create(null);e.exports.get=function(t,e,i){for(var n=r(e),a=t,l=0;l<n.length;l++){if(void 0===a)return;if("object"!==("undefined"==typeof a?"undefined":o(a)))throw new Error("invalid data or path");a=a[n[l]]}return i!==!1?s.deepCopy(a):a},e.exports.set=function(t,i,o,a){var l=r(i);if(0===l.length)return n(t,o,a);var h=e.exports.get(t,i,!1),c=n(h,o,a);if(c===h)return t;for(var u=s.shallowCopy(t),p=u,f=0;f<l.length;f++)f===l.length-1?p[l[f]]=c:p=void 0!==p[l[f]]?p[l[f]]=s.shallowCopy(p[l[f]]):l[f+1]&&!isNaN(l[f+1])?p[l[f]]=[]:p[l[f]]=Object.create(null);return u}},{"../utils/utils":31}],21:[function(t,e,i){"use strict";var n=t("component-emitter2"),r=t("./record"),o=t("../constants/constants"),s="entry-added",a="entry-removed",l="entry-moved",h=function(t,e,i){if("string"!=typeof e||0===e.length)throw new Error("invalid argument name");this._recordHandler=t,this._record=this._recordHandler.getRecord(e,i),this._record._applyUpdate=this._applyUpdate.bind(this),this._record.on("delete",this.emit.bind(this,"delete")),this._record.on("discard",this._onDiscard.bind(this)),this._record.on("ready",this._onReady.bind(this)),this.isDestroyed=this._record.isDestroyed,this.isReady=this._record.isReady,this.name=e,this._queuedMethods=[],this._beforeStructure=null,this._hasAddListener=null,this._hasRemoveListener=null,this._hasMoveListener=null,this["delete"]=this._record["delete"].bind(this._record),this.discard=this._record.discard.bind(this._record),this.whenReady=this._record.whenReady.bind(this)};n(h.prototype),h.prototype.getEntries=function(){var t=this._record.get();return t instanceof Array?t:[]},h.prototype.isEmpty=function(){return 0===this.getEntries().length},h.prototype.setEntries=function(t){var e="entries must be an array of record names",i=void 0;if(!(t instanceof Array))throw new Error(e);for(i=0;i<t.length;i++)if("string"!=typeof t[i])throw new Error(e);this._record.isReady===!1?this._queuedMethods.push(this.setEntries.bind(this,t)):(this._beforeChange(),this._record.set(t),this._afterChange())},h.prototype.removeEntry=function(t,e){if(this._record.isReady===!1)return void this._queuedMethods.push(this.removeEntry.bind(this,t,e));var i=this._record.get(),n=this._hasIndex(e),r=[],o=void 0;for(o=0;o<i.length;o++)(i[o]!==t||n&&e!==o)&&r.push(i[o]);this._beforeChange(),this._record.set(r),this._afterChange()},h.prototype.addEntry=function(t,e){if("string"!=typeof t)throw new Error("Entry must be a recordName");if(this._record.isReady===!1)return void this._queuedMethods.push(this.addEntry.bind(this,t,e));var i=this._hasIndex(e),n=this.getEntries();i?n.splice(e,0,t):n.push(t),this._beforeChange(),this._record.set(n),this._afterChange()},h.prototype.subscribe=function(){var t=r.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.subscribe");var e=function(t){t(this.getEntries())}.bind(this,t.callback);t.callback.wrappedCallback=e,t.callback=e,this._record.subscribe(t);
},h.prototype.unsubscribe=function(){var t=r.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.unsubscribe");t.callback=t.callback.wrappedCallback,this._record.unsubscribe(t)},h.prototype._onReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethods.length;t++)this._queuedMethods[t]();this._queuedMethods=[],this.emit("ready")},h.prototype._onDiscard=function(){this.isDestroyed=!0,this.emit("discard")},h.prototype._applyUpdate=function(t){if(t.action===o.ACTIONS.PATCH)throw new Error("PATCH is not supported for Lists");"["!==t.data[2].charAt(0)&&(t.data[2]="[]"),this._beforeChange(),r.prototype._applyUpdate.call(this._record,t),this._afterChange()},h.prototype._hasIndex=function(t){var e=!1,i=this.getEntries();if(void 0!==t){if(isNaN(t))throw new Error("Index must be a number");if(t!==i.length&&(t>=i.length||t<0))throw new Error("Index must be within current entries");e=!0}return e},h.prototype._beforeChange=function(){this._hasAddListener=this.listeners(s).length>0,this._hasRemoveListener=this.listeners(a).length>0,this._hasMoveListener=this.listeners(l).length>0,this._hasAddListener||this._hasRemoveListener||this._hasMoveListener?this._beforeStructure=this._getStructure():this._beforeStructure=null},h.prototype._afterChange=function(){if(null!==this._beforeStructure){var t=this._getStructure(),e=this._beforeStructure,i=void 0,n=void 0;if(this._hasRemoveListener)for(i in e)for(n=0;n<e[i].length;n++)void 0!==t[i]&&void 0!==t[i][n]||this.emit(a,i,e[i][n]);if(this._hasAddListener||this._hasMoveListener)for(i in t)if(void 0===e[i])for(n=0;n<t[i].length;n++)this.emit(s,i,t[i][n]);else for(n=0;n<t[i].length;n++)e[i][n]!==t[i][n]&&(void 0===e[i][n]?this.emit(s,i,t[i][n]):this.emit(l,i,t[i][n]))}},h.prototype._getStructure=function(){var t={},e=void 0,i=this._record.get();for(e=0;e<i.length;e++)void 0===t[i[e]]?t[i[e]]=[e]:t[i[e]].push(e);return t},e.exports=h},{"../constants/constants":11,"./record":23,"component-emitter2":2}],22:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./record"),o=t("./anonymous-record"),s=t("./list"),a=t("../utils/listener"),l=t("../utils/single-notifier"),h=t("../constants/constants"),c=t("../message/message-parser"),u=t("../message/message-builder"),p=t("component-emitter2"),f=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._records={},this._lists={},this._listener={},this._writeCallbacks={},this._destroyEventEmitter=new p,this._hasRegistry=new l(i,e,h.TOPIC.RECORD,h.ACTIONS.HAS,this._options.recordReadTimeout),this._snapshotRegistry=new l(i,e,h.TOPIC.RECORD,h.ACTIONS.SNAPSHOT,this._options.recordReadTimeout)};f.prototype.getRecord=function(t,e){return this._records[t]||(this._records[t]=new r(t,e||{},this._connection,this._options,this._client),this._records[t].on("error",this._onRecordError.bind(this,t)),this._records[t].on("destroyPending",this._onDestroyPending.bind(this,t)),this._records[t].on("delete",this._removeRecord.bind(this,t)),this._records[t].on("discard",this._removeRecord.bind(this,t))),this._records[t].usages++,this._records[t]},f.prototype.getList=function(t,e){return this._lists[t]?this._records[t].usages++:this._lists[t]=new s(this,t,e),this._lists[t]},f.prototype.getAnonymousRecord=function(){return new o(this)},f.prototype.listen=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");if("function"!=typeof e)throw new Error("invalid argument callback");return this._listener[t]&&!this._listener[t].destroyPending?void this._client._$onError(h.TOPIC.RECORD,h.EVENT.LISTENER_EXISTS,t):(this._listener[t]&&this._listener[t].destroy(),void(this._listener[t]=new a(h.TOPIC.RECORD,t,e,this._options,this._client,this._connection)))},f.prototype.unlisten=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");var e=this._listener[t];e&&!e.destroyPending?e.sendDestroy():this._listener[t]?(this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(h.TOPIC.RECORD,h.EVENT.NOT_LISTENING,t)},f.prototype.snapshot=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument: name");if("function"!=typeof e)throw new Error("invalid argument: callback");this._records[t]&&this._records[t].isReady?e(null,this._records[t].get()):this._snapshotRegistry.request(t,e)},f.prototype.has=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument: name");if("function"!=typeof e)throw new Error("invalid argument: callback");this._records[t]?e(null,!0):this._hasRegistry.request(t,e)},f.prototype.setData=function(t,e,i,r){var o=void 0,s=void 0,a=void 0;if(4===arguments.length?(o=e,s=i,a=r):3===arguments.length?"function"!=typeof i?(o=e,s=i):(o=null,s=e,a=i):2===arguments.length&&(s=e),"string"!=typeof t||0===t.length)throw new Error("invalid argument: recordName");if(r&&"function"!=typeof r)throw new Error("invalid argument: callback");if(o&&("string"!=typeof o||0===o.length))throw new Error("invalid argument: path");if(!o&&(null===s||"object"!==("undefined"==typeof s?"undefined":n(s))))throw new Error("invalid argument: data must be an object when no path is provided");var l=this._records[t];if(l)o&&a?l.set(o,s,a):o?l.set(o,s):a?l.set(s,a):l.set(s);else{var c=o?[t,-1,o,u.typed(s)]:[t,-1,s],p={};a&&(p.writeSuccess=!0,this._writeCallbacks[t]={},this._writeCallbacks[t][-1]=a),c.push(p),this._connection.sendMsg(h.TOPIC.RECORD,h.ACTIONS.CREATEANDUPDATE,c)}},f.prototype._$handle=function(t){var e=void 0;if(t.action===h.ACTIONS.ERROR&&t.data[0]!==h.EVENT.VERSION_EXISTS&&t.data[0]!==h.ACTIONS.SNAPSHOT&&t.data[0]!==h.ACTIONS.HAS&&t.data[0]!==h.EVENT.MESSAGE_DENIED)return t.processedError=!0,void this._client._$onError(h.TOPIC.RECORD,t.data[0],t.data[1]);if(t.action===h.ACTIONS.ACK||t.action===h.ACTIONS.ERROR){if(e=t.data[1],t.data[0]===h.ACTIONS.DELETE||t.data[0]===h.ACTIONS.UNSUBSCRIBE||t.data[0]===h.EVENT.MESSAGE_DENIED&&t.data[2]===h.ACTIONS.DELETE)return this._destroyEventEmitter.emit("destroy_ack_"+e,t),void(t.data[0]===h.ACTIONS.DELETE&&this._records[e]&&this._records[e]._$onMessage(t));if(t.data[0]===h.ACTIONS.SNAPSHOT)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2]);if(t.data[0]===h.ACTIONS.HAS)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2])}else e=t.data[0];var i=!1,n=this._records[e];n&&(i=!0,n._$onMessage(t)),t.action===h.ACTIONS.READ&&this._snapshotRegistry.hasRequest(e)?(i=!0,this._snapshotRegistry.recieve(e,null,JSON.parse(t.data[2]))):t.action===h.ACTIONS.HAS&&this._hasRegistry.hasRequest(e)?(i=!0,this._hasRegistry.recieve(e,null,c.convertTyped(t.data[1]))):t.action!==h.ACTIONS.WRITE_ACKNOWLEDGEMENT||n?t.action===h.ACTIONS.ACK&&t.data[0]===h.ACTIONS.UNLISTEN&&this._listener[e]&&this._listener[e].destroyPending?(i=!0,this._listener[e].destroy(),delete this._listener[e]):this._listener[e]?(i=!0,this._listener[e]._$onMessage(t)):t.action===h.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED?i=!0:t.action===h.ACTIONS.SUBSCRIPTION_HAS_PROVIDER&&(i=!0):(i=!0,r._handleWriteAcknowledgements(t,this._writeCallbacks[e],this._client)),i||(t.processedError=!0,this._client._$onError(h.TOPIC.RECORD,h.EVENT.UNSOLICITED_MESSAGE,e))},f.prototype._onRecordError=function(t,e){this._client._$onError(h.TOPIC.RECORD,e,t)},f.prototype._onDestroyPending=function(t){if(!this._records[t])return void this._client._$onError(h.TOPIC.RECORD,"Record attempted to be destroyed but does not exists",t);var e=this._records[t]._$onMessage.bind(this._records[t]);this._destroyEventEmitter.once("destroy_ack_"+t,e),this._removeRecord(t)},f.prototype._removeRecord=function(t){delete this._records[t],delete this._lists[t]},e.exports=f},{"../constants/constants":11,"../message/message-builder":16,"../message/message-parser":17,"../utils/listener":28,"../utils/single-notifier":30,"./anonymous-record":19,"./list":21,"./record":23,"component-emitter2":2}],23:[function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./json-path"),o=t("../utils/resubscribe-notifier"),s=t("component-emitter2"),a=t("../constants/constants"),l=t("../message/message-builder"),h=t("../message/message-parser"),c=t("../utils/utils"),u=function(t,e,i,n,r){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this.name=t,this.usages=0,this._recordOptions=e,this._connection=i,this._client=r,this._options=n,this.isReady=!1,this.isDestroyed=!1,this.hasProvider=!1,this._$data=Object.create(null),this.version=null,this._eventEmitter=new s,this._queuedMethodCalls=[],this._writeCallbacks={},this._mergeStrategy=null,n.mergeStrategy&&this.setMergeStrategy(n.mergeStrategy),this._ackTimeoutRegistry=r._$getAckTimeoutRegistry(),this._resubscribeNotifier=new o(this._client,this._sendRead.bind(this)),this._readAckTimeout=this._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t,action:a.ACTIONS.SUBSCRIBE,timeout:this._options.recordReadAckTimeout}),this._responseTimeout=this._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t,action:a.ACTIONS.READ,event:a.EVENT.RESPONSE_TIMEOUT,timeout:this._options.recordReadTimeout}),this._sendRead()};s(u.prototype),u.prototype.setMergeStrategy=function(t){if("function"!=typeof t)throw new Error("Invalid merge strategy: Must be a Function");this._mergeStrategy=t},u.prototype.get=function(t){return r.get(this._$data,t,this._options.recordDeepCopy)},u.prototype.set=function(t,e,i){var o=void 0,s=void 0;if(1===arguments.length){if("object"!==("undefined"==typeof t?"undefined":n(t)))throw new Error("invalid argument data");s=t}else if(2===arguments.length)if("string"==typeof t&&0!==t.length&&"function"!=typeof e)o=t,s=e;else{if("object"!==("undefined"==typeof t?"undefined":n(t))||"function"!=typeof e)throw new Error("invalid argument path");s=t,i=e}else if(3===arguments.length){if("string"!=typeof t||0===t.length||"function"!=typeof i)throw new Error("invalid arguments, must pass in a string, a value and a function");o=t,s=e}if(!o&&(null===s||"object"!==("undefined"==typeof s?"undefined":n(s))))throw new Error("invalid arguments, scalar values cannot be set without path");if(this._checkDestroyed("set"))return this;if(!this.isReady)return this._queuedMethodCalls.push({method:"set",args:arguments}),this;var a=this._$data,l=r.set(a,o,s,this._options.recordDeepCopy);if(a===l){if("function"==typeof i){var h=null;c.isConnected(this._client)||(h="Connection error: error updating record as connection was closed"),c.requestIdleCallback(function(){return i(h)})}return this}var u=void 0;return"function"==typeof i&&(u={},u.writeSuccess=!0,c.isConnected(this._client)?this._setUpCallback(this.version,i):c.requestIdleCallback(function(){return i("Connection error: error updating record as connection was closed")})),this._sendUpdate(o,s,u),this._applyChange(l),this},u.prototype.subscribe=function(t,e,i){var n=this,r=this._normalizeArguments(arguments);if(void 0!==r.path&&("string"!=typeof r.path||0===r.path.length))throw new Error("invalid argument path");if("function"!=typeof r.callback)throw new Error("invalid argument callback");this._checkDestroyed("subscribe")||(r.triggerNow?this.whenReady(function(){n._eventEmitter.on(r.path,r.callback),r.callback(n.get(r.path))}):this._eventEmitter.on(r.path,r.callback))},u.prototype.unsubscribe=function(t,e){var i=this._normalizeArguments(arguments);if(void 0!==i.path&&("string"!=typeof i.path||0===i.path.length))throw new Error("invalid argument path");if(void 0!==i.callback&&"function"!=typeof i.callback)throw new Error("invalid argument callback");this._checkDestroyed("unsubscribe")||this._eventEmitter.off(i.path,i.callback)},u.prototype.discard=function(){var t=this;this._checkDestroyed("discard")||this.whenReady(function(){t.usages--,t.usages<=0&&(t.emit("destroyPending"),t._discardTimeout=t._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t.name,action:a.ACTIONS.UNSUBSCRIBE}),t._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.UNSUBSCRIBE,[t.name]))})},u.prototype["delete"]=function(){var t=this;this._checkDestroyed("delete")||this.whenReady(function(){t.emit("destroyPending"),t._deleteAckTimeout=t._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t.name,action:a.ACTIONS.DELETE,event:a.EVENT.DELETE_TIMEOUT,timeout:t._options.recordDeleteTimeout}),t._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.DELETE,[t.name])})},u.prototype.whenReady=function(t){this.isReady===!0?t(this):this.once("ready",t.bind(this,this))},u.prototype._$onMessage=function(t){if(t.action===a.ACTIONS.READ)null===this.version?(this._ackTimeoutRegistry.clear(t),this._onRead(t)):this._applyUpdate(t,this._client);else if(t.action===a.ACTIONS.ACK)this._processAckMessage(t);else if(t.action===a.ACTIONS.UPDATE||t.action===a.ACTIONS.PATCH)this._applyUpdate(t,this._client);else if(t.action===a.ACTIONS.WRITE_ACKNOWLEDGEMENT)u._handleWriteAcknowledgements(t,this._writeCallbacks,this._client);else if(t.data[0]===a.EVENT.VERSION_EXISTS)this._recoverRecord(t.data[2],JSON.parse(t.data[3]),t);else if(t.data[0]===a.EVENT.MESSAGE_DENIED)this._clearTimeouts();else if(t.action===a.ACTIONS.SUBSCRIPTION_HAS_PROVIDER){var e=h.convertTyped(t.data[1],this._client);this.hasProvider=e,this.emit("hasProviderChanged",e)}},u._handleWriteAcknowledgements=function(t,e,i){for(var n=JSON.parse(t.data[1]),r=0;r<n.length;r++){var o=e[n[r]];void 0!==o&&(o(h.convertTyped(t.data[2],i)),delete e[n[r]])}},u.prototype._recoverRecord=function(t,e,i){i.processedError=!0,this._mergeStrategy?this._mergeStrategy(this,e,t,this._onRecordRecovered.bind(this,t,e,i)):this.emit("error",a.EVENT.VERSION_EXISTS,"received update for "+t+" but version is "+this.version)},u.prototype._sendUpdate=function(t,e,i){this.version++;var n=void 0;t?(n=void 0===i?[this.name,this.version,t,l.typed(e)]:[this.name,this.version,t,l.typed(e),i],this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.PATCH,n)):(n=void 0===i?[this.name,this.version,e]:[this.name,this.version,e,i],this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.UPDATE,n))},u.prototype._onRecordRecovered=function(t,e,i,n,o){if(n)this.emit("error",a.EVENT.VERSION_EXISTS,"received update for "+t+" but version is "+this.version);else{var s=this.version;this.version=t;var l=this._$data;if(c.deepEquals(l,e))return;var h=r.set(l,void 0,o,!1);if(c.deepEquals(o,e)){this._applyChange(o);var u=this._writeCallbacks[t];return void(void 0!==u&&(u(null),delete this._writeCallbacks[t]))}var p=i.data[4];if(p&&JSON.parse(p).writeSuccess){var f=this._writeCallbacks[s];delete this._writeCallbacks[s],this._setUpCallback(this.version,f)}this._sendUpdate(void 0,o,p),this._applyChange(h)}},u.prototype._processAckMessage=function(t){var e=t.data[0];e===a.ACTIONS.SUBSCRIBE?this._ackTimeoutRegistry.clear(t):e===a.ACTIONS.DELETE?(this.emit("delete"),this._destroy()):e===a.ACTIONS.UNSUBSCRIBE&&(this.emit("discard"),this._destroy())},u.prototype._applyUpdate=function(t){var e=parseInt(t.data[1],10),i=void 0;if(i=t.action===a.ACTIONS.PATCH?h.convertTyped(t.data[3],this._client):JSON.parse(t.data[2]),null===this.version)this.version=e;else if(this.version+1!==e)return void(t.action===a.ACTIONS.PATCH?this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.SNAPSHOT,[this.name]):this._recoverRecord(e,i,t));this.version=e,this._applyChange(r.set(this._$data,t.action===a.ACTIONS.PATCH?t.data[2]:void 0,i))},u.prototype._onRead=function(t){this.version=parseInt(t.data[1],10),this._applyChange(r.set(this._$data,void 0,JSON.parse(t.data[2]))),this._setReady()},u.prototype._setReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethodCalls.length;t++)this[this._queuedMethodCalls[t].method].apply(this,this._queuedMethodCalls[t].args);this._queuedMethodCalls=[],this.emit("ready")},u.prototype._setUpCallback=function(t,e){var i=Number(this.version)+1;this._writeCallbacks[i]=e},u.prototype._sendRead=function(){this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.CREATEORREAD,[this.name])},u.prototype._applyChange=function(t){if(!this.isDestroyed){var e=this._$data;this._$data=t;for(var i=this._eventEmitter.eventNames(),n=0;n<i.length;n++){var o=r.get(t,i[n],!1),s=r.get(e,i[n],!1);o!==s&&this._eventEmitter.emit(i[n],this.get(i[n]))}}},u.prototype._normalizeArguments=function(t){if(1===t.length&&"object"===n(t[0]))return t[0];for(var e=Object.create(null),i=0;i<t.length;i++)"string"==typeof t[i]?e.path=t[i]:"function"==typeof t[i]?e.callback=t[i]:"boolean"==typeof t[i]&&(e.triggerNow=t[i]);return e},u.prototype._clearTimeouts=function(){this._ackTimeoutRegistry.remove({ackId:this._readAckTimeout,silent:!0}),this._ackTimeoutRegistry.remove({ackId:this._responseTimeout,silent:!0}),this._ackTimeoutRegistry.remove({ackId:this._deleteAckTimeout,silent:!0}),this._ackTimeoutRegistry.remove({ackId:this._discardTimeout,silent:!0})},u.prototype._checkDestroyed=function(t){return!!this.isDestroyed&&(this.emit("error","Can't invoke '"+t+"'. Record '"+this.name+"' is already destroyed"),!0)},u.prototype._destroy=function(){this._clearTimeouts(),this._eventEmitter.off(),this._resubscribeNotifier.destroy(),this.isDestroyed=!0,this.isReady=!1,this._client=null,this._eventEmitter=null,this._connection=null},e.exports=u},{"../constants/constants":11,"../message/message-builder":16,"../message/message-parser":17,"../utils/resubscribe-notifier":29,"../utils/utils":31,"./json-path":20,"component-emitter2":2}],24:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=t("../utils/resubscribe-notifier"),o=t("./rpc-response"),s=t("./rpc"),a=t("../message/message-parser"),l=t("../message/message-builder"),h=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._rpcs={},this._providers={},this._ackTimeoutRegistry=i._$getAckTimeoutRegistry(),this._resubscribeNotifier=new r(this._client,this._reprovide.bind(this))};h.prototype.provide=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if(this._providers[t])throw new Error("RPC "+t+" already registered");if("function"!=typeof e)throw new Error("invalid argument callback");this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,name:t,action:n.ACTIONS.SUBSCRIBE}),this._providers[t]=e,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.SUBSCRIBE,[t])},h.prototype.unprovide=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._providers[t]&&(delete this._providers[t],this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,name:t,action:n.ACTIONS.UNSUBSCRIBE}),this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.UNSUBSCRIBE,[t]))},h.prototype.make=function(t,e,i){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if("function"!=typeof i)throw new Error("invalid argument callback");var r=this._client.getUid(),o=l.typed(e);this._rpcs[r]=new s(t,i,this._options,this._client),this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REQUEST,[t,r,o])},h.prototype._getRpc=function(t,e,i){var r=this._rpcs[t];return r?r:(this._client._$onError(n.TOPIC.RPC,n.EVENT.UNSOLICITED_MESSAGE,i),null)},h.prototype._respondToRpc=function(t){var e=t.data[0],i=t.data[1],r=null,s=void 0;t.data[2]&&(r=a.convertTyped(t.data[2],this._client)),this._providers[e]?(s=new o(this._connection,e,i),this._providers[e](r,s)):this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REJECTION,[e,i])},h.prototype._$handle=function(t){var e=void 0,i=void 0;if(t.action===n.ACTIONS.REQUEST)return void this._respondToRpc(t);if(t.action===n.ACTIONS.ACK&&(t.data[0]===n.ACTIONS.SUBSCRIBE||t.data[0]===n.ACTIONS.UNSUBSCRIBE))return void this._ackTimeoutRegistry.clear(t);if(t.action===n.ACTIONS.ERROR){if(t.data[0]===n.EVENT.MESSAGE_PERMISSION_ERROR)return;if(t.data[0]===n.EVENT.MESSAGE_DENIED&&t.data[2]===n.ACTIONS.SUBSCRIBE)return void this._ackTimeoutRegistry.remove({topic:n.TOPIC.RPC,action:n.ACTIONS.SUBSCRIBE,name:t.data[1]})}t.action===n.ACTIONS.ERROR||t.action===n.ACTIONS.ACK?(i=t.data[0]===n.EVENT.MESSAGE_DENIED&&t.data[2]===n.ACTIONS.REQUEST?t.data[3]:t.data[2],e=t.data[1]):(e=t.data[0],i=t.data[1]);var r=this._getRpc(i,e,t.raw);null!==r&&(t.action===n.ACTIONS.ACK?r.ack():t.action===n.ACTIONS.RESPONSE?(r.respond(t.data[2]),delete this._rpcs[i]):t.action===n.ACTIONS.ERROR&&(t.processedError=!0,r.error(t.data[0]),delete this._rpcs[i]))},h.prototype._reprovide=function(){for(var t in this._providers)this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.SUBSCRIBE,[t])},e.exports=h},{"../constants/constants":11,"../message/message-builder":16,"../message/message-parser":17,"../utils/resubscribe-notifier":29,"./rpc":26,"./rpc-response":25}],25:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=t("../utils/utils"),o=t("../message/message-builder"),s=function(t,e,i){this._connection=t,this._name=e,this._correlationId=i,this._isAcknowledged=!1,this._isComplete=!1,this.autoAck=!0,r.nextTick(this._performAutoAck.bind(this))};s.prototype.ack=function(){this._isAcknowledged===!1&&(this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.ACK,[n.ACTIONS.REQUEST,this._name,this._correlationId]),this._isAcknowledged=!0)},s.prototype.reject=function(){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REJECTION,[this._name,this._correlationId])},s.prototype.error=function(t){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.ERROR,[t,this._name,this._correlationId])},s.prototype.send=function(t){if(this._isComplete===!0)throw new Error("Rpc "+this._name+" already completed");this.ack();var e=o.typed(t);this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.RESPONSE,[this._name,this._correlationId,e]),this._isComplete=!0},s.prototype._performAutoAck=function(){this.autoAck===!0&&this.ack()},e.exports=s},{"../constants/constants":11,"../message/message-builder":16,"../utils/utils":31}],26:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=t("../message/message-parser"),o=function(t,e,i,r){this._options=i,this._callback=e,this._client=r,this._ackTimeoutRegistry=r._$getAckTimeoutRegistry(),this._ackTimeout=this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,action:n.ACTIONS.ACK,name:t,timeout:this._options.rpcAckTimeout,callback:this.error.bind(this)}),this._responseTimeout=this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,action:n.ACTIONS.REQUEST,name:t,event:n.EVENT.RESPONSE_TIMEOUT,timeout:this._options.rpcResponseTimeout,callback:this.error.bind(this)})};o.prototype.ack=function(){this._ackTimeoutRegistry.remove({ackId:this._ackTimeout})},o.prototype.respond=function(t){var e=r.convertTyped(t,this._client);this._callback(null,e),this._complete()},o.prototype.error=function(t){this._callback(t.event||t),this._complete()},o.prototype._complete=function(){this._ackTimeoutRegistry.remove({ackId:this._ackTimeout}),this._ackTimeoutRegistry.remove({ackId:this._responseTimeout})},e.exports=o},{"../constants/constants":11,"../message/message-parser":17}],27:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=t("component-emitter2"),o=function(t,e){this._options=e,this._client=t,this._register={},this._counter=1,t.on("connectionStateChanged",this._onConnectionStateChanged.bind(this))};r(o.prototype),o.prototype.add=function(t){var e=t.timeout||this._options.subscriptionTimeout;return this._client.getConnectionState()!==n.CONNECTION_STATE.OPEN||e<1?-1:(this.remove(t),t.ackId=this._counter++,t.event=t.event||n.EVENT.ACK_TIMEOUT,t.__timeout=setTimeout(this._onTimeout.bind(this,t),e),this._register[this._getUniqueName(t)]=t,t.ackId)},o.prototype.remove=function(t){if(t.ackId)for(var e in this._register)t.ackId===this._register[e].ackId&&this.clear({topic:this._register[e].topic,action:this._register[e].action,data:[this._register[e].name]});this._register[this._getUniqueName(t)]&&this.clear({topic:t.topic,action:t.action,data:[t.name]})},o.prototype.clear=function(t){var e=void 0;e=t.action===n.ACTIONS.ACK&&t.data.length>1?t.topic+t.data[0]+(t.data[1]?t.data[1]:""):t.topic+t.action+t.data[0],this._register[e]&&clearTimeout(this._register[e].__timeout),delete this._register[e]},o.prototype._onTimeout=function(t){if(delete this._register[this._getUniqueName(t)],t.callback)delete t.__timeout,delete t.timeout,t.callback(t);else{var e="No ACK message received in time"+(t.name?" for "+t.name:"");this._client._$onError(t.topic,t.event,e)}},o.prototype._getUniqueName=function(t){return t.topic+t.action+(t.name?t.name:"")},o.prototype._onConnectionStateChanged=function(t){if(t!==n.CONNECTION_STATE.OPEN)for(var e in this._register)clearTimeout(this._register[e].__timeout)},e.exports=o},{"../constants/constants":11,"component-emitter2":2}],28:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=t("./resubscribe-notifier"),o=function(t,e,i,o,s,a){this._topic=t,this._callback=i,this._pattern=e,this._options=o,this._client=s,this._connection=a,this._ackTimeoutRegistry=s._$getAckTimeoutRegistry(),this._ackTimeoutRegistry.add({topic:this._topic,name:e,action:n.ACTIONS.LISTEN}),this._resubscribeNotifier=new r(s,this._sendListen.bind(this)),this._sendListen(),this.destroyPending=!1};o.prototype.sendDestroy=function(){this.destroyPending=!0,this._connection.sendMsg(this._topic,n.ACTIONS.UNLISTEN,[this._pattern]),this._resubscribeNotifier.destroy()},o.prototype.destroy=function(){this._callback=null,this._pattern=null,this._client=null,this._connection=null},o.prototype.accept=function(t){this._connection.sendMsg(this._topic,n.ACTIONS.LISTEN_ACCEPT,[this._pattern,t])},o.prototype.reject=function(t){this._connection.sendMsg(this._topic,n.ACTIONS.LISTEN_REJECT,[this._pattern,t])},o.prototype._createCallbackResponse=function(t){return{accept:this.accept.bind(this,t.data[1]),reject:this.reject.bind(this,t.data[1])}},o.prototype._$onMessage=function(t){t.action===n.ACTIONS.ACK?this._ackTimeoutRegistry.clear(t):t.action===n.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND?this._callback(t.data[1],!0,this._createCallbackResponse(t)):t.action===n.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED?this._callback(t.data[1],!1):this._client._$onError(this._topic,n.EVENT.UNSOLICITED_MESSAGE,t.data[0]+"|"+t.data[1])},o.prototype._sendListen=function(){this._connection.sendMsg(this._topic,n.ACTIONS.LISTEN,[this._pattern])},e.exports=o},{"../constants/constants":11,"./resubscribe-notifier":29}],29:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=function(t,e){this._client=t,this._resubscribe=e,this._isReconnecting=!1,this._connectionStateChangeHandler=this._handleConnectionStateChanges.bind(this),this._client.on("connectionStateChanged",this._connectionStateChangeHandler)};r.prototype.destroy=function(){this._client.removeListener("connectionStateChanged",this._connectionStateChangeHandler),this._connectionStateChangeHandler=null,this._client=null},r.prototype._handleConnectionStateChanges=function(){var t=this._client.getConnectionState();t===n.CONNECTION_STATE.RECONNECTING&&this._isReconnecting===!1&&(this._isReconnecting=!0),t===n.CONNECTION_STATE.OPEN&&this._isReconnecting===!0&&(this._isReconnecting=!1,this._resubscribe())},e.exports=r},{"../constants/constants":11}],30:[function(t,e,i){"use strict";var n=t("../constants/constants"),r=t("./resubscribe-notifier"),o=function(t,e,i,n,o){this._client=t,this._connection=e,this._topic=i,this._action=n,this._timeoutDuration=o,this._requests={},this._ackTimeoutRegistry=t._$getAckTimeoutRegistry(),this._resubscribeNotifier=new r(this._client,this._resendRequests.bind(this)),this._onResponseTimeout=this._onResponseTimeout.bind(this)};o.prototype.hasRequest=function(t){return!!this._requests[t]},o.prototype.request=function(t,e){this._requests[t]||(this._requests[t]=[],this._connection.sendMsg(this._topic,this._action,[t]));var i=this._ackTimeoutRegistry.add({topic:this._topic,event:n.EVENT.RESPONSE_TIMEOUT,name:t,action:this._action,timeout:this._timeoutDuration,callback:this._onResponseTimeout});this._requests[t].push({callback:e,ackId:i})},o.prototype.recieve=function(t,e,i){var r=this._requests[t];if(!r)return void this._client._$onError(this._topic,n.EVENT.UNSOLICITED_MESSAGE,"no entry for "+t);for(var o=0;o<r.length;o++){var s=r[o];this._ackTimeoutRegistry.remove({ackId:s.ackId}),s.callback(e,i)}delete this._requests[t]},o.prototype._onResponseTimeout=function(t){var e="No response received in time for "+this._topic+"|"+this._action+"|"+t.name;this._client._$onError(this._topic,n.EVENT.RESPONSE_TIMEOUT,e)},o.prototype._resendRequests=function(){for(var t in this._requests)this._connection.sendMsg(this._topic,this._action,[t])},e.exports=o},{"../constants/constants":11,"./resubscribe-notifier":29}],31:[function(t,e,i){(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("../constants/constants"),o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s="object";i.isNode="undefined"!=typeof e&&"[object process]"===e.toString(),i.nextTick=function(t){i.isNode?e.nextTick(t):setTimeout(t,0)},i.trim=function(t){return t.trim?t.trim():t.replace(o,"")},i.deepEquals=function(t,e){return t===e||("undefined"==typeof t?"undefined":n(t))===s&&("undefined"==typeof e?"undefined":n(e))===s&&JSON.stringify(t)===JSON.stringify(e)},i.deepCopy=function(t){return("undefined"==typeof t?"undefined":n(t))===s?JSON.parse(JSON.stringify(t)):t},i.shallowCopy=function(t){if(Array.isArray(t))return t.slice(0);if(("undefined"==typeof t?"undefined":n(t))===s){for(var e=Object.create(null),i=Object.keys(t),r=0;r<i.length;r++)e[i[r]]=t[i[r]];return e}return t},i.setTimeout=function(t,e){return null!==e?setTimeout(t,e):-1},i.setInterval=function(t,e){return null!==e?setInterval(t,e):-1},i.requestIdleCallback=!i.isNode&&window.requestIdleCallback&&window.requestIdleCallback.bind(window)||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},i.cancelIdleCallback=!i.isNode&&window.cancelIdleCallback&&window.cancelIdleCallback.bind(window)||function(t){clearTimeout(t)};var a=/^wss:|^ws:|^\/\//,l=/^http:|^https:/,h=t("url");i.parseUrl=function(t,e){var i=t;if(l.test(i))throw new Error("Only ws and wss are supported");a.test(i)?0===i.indexOf("//")&&(i="ws:"+i):i="ws://"+i;var n=h.parse(i);if(!n.host)throw new Error("invalid url, missing host");return n.protocol=n.protocol?n.protocol:"ws:",n.pathname=n.pathname?n.pathname:e,h.format(n)},i.isConnected=function(t){var e=t.getConnectionState();return e===r.CONNECTION_STATE.OPEN}}).call(this,t("_process"))},{"../constants/constants":11,_process:3,url:8}]},{},[10])(10)})}).call(e,function(){return this}())},function(t,e){function i(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),i=i>r?r:i,i<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o}function n(t,e){return e=null==e?y:e,!!e&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function r(t,e,i){if(!c(i))return!1;var r=typeof e;return!!("number"==r?a(i)&&n(e,i.length):"string"==r&&e in i)&&s(i[e],t)}function o(t,e,n){e=(n?r(t,e,n):void 0===e)?1:O(d(e),0);var o=t?t.length:0;if(!o||e<1)return[];for(var s=0,a=0,l=Array(I(o/e));s<o;)l[a++]=i(t,s,s+=e);return l}function s(t,e){return t===e||t!==t&&e!==e}function a(t){return null!=t&&h(t.length)&&!l(t)}function l(t){var e=c(t)?R.call(t):"";return e==b||e==T}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return!!t&&"object"==typeof t}function p(t){return"symbol"==typeof t||u(t)&&R.call(t)==E}function f(t){if(!t)return 0===t?t:0;if(t=m(t),t===g||t===-g){var e=t<0?-1:1;return e*v;
}return t===t?t:0}function d(t){var e=f(t),i=e%1;return e===e?i?e-i:e:0}function m(t){if("number"==typeof t)return t;if(p(t))return _;if(c(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=c(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(x,"");var i=w.test(t);return i||A.test(t)?P(t.slice(2),i?2:8):S.test(t)?_:+t}var g=1/0,y=9007199254740991,v=1.7976931348623157e308,_=NaN,b="[object Function]",T="[object GeneratorFunction]",E="[object Symbol]",x=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,A=/^0o[0-7]+$/i,M=/^(?:0|[1-9]\d*)$/,P=parseInt,C=Object.prototype,R=C.toString,I=Math.ceil,O=Math.max;t.exports=o}]));