!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="javascripts/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var i=e.slice(1),n=t[e[0]];return function(t,e,r){n.apply(this,[t,e,r].concat(i))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,i){t.exports=i(1)},function(t,e,i){(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(5),a=n(o),h=i(6),l=i(8),c=n(l),u=i(14),p=n(u),f=i(22),d=n(f),m=i(23),g=n(m),v=i(38),y=n(v),_=i(39),b=e(_),x=i(47),E=i(48),w=n(E),T=i(58),A=n(T),S=i(130),M=n(S);document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock;var P=1,C=.1,R=h.Power4.easeInOut,I=function(){function e(){r(this,e),this.emitter=(0,g["default"])({}),this.communication=new M["default"](this.emitter),this.scene=new w["default"](this.emitter,this.communication),this.setupHandlers(),this.setupListeners(),this.introBallTween=null,this.activeScreen=".intro-screen",A["default"].isMobile()&&"orientation"in window?this.checkPhoneOrientation():this.startLoading();var t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;t&&(h.TweenMax.set(".fullscreen-button",{display:"none",opacity:0,visibility:"hidden",right:"-999px",top:"-9999px"}),h.TweenMax.set(".enter-vr",{right:"0",bottom:"-10px"}),h.TweenMax.set(".reset-pose",{right:"60px"}))}return s(e,[{key:"checkPhoneOrientation",value:function(){var t=this;h.TweenMax.set(".phone",{rotation:90}),h.TweenMax.set(".checkmark",{visibility:"hidden"},.3);var e=new h.TimelineMax({repeat:-1,repeatDelay:1,paused:!0});e.to(".phone",.5,{ease:h.Back.easeInOut.config(1),rotation:180}),e.set(".x",{visibility:"hidden"},.3),e.set(".checkmark",{visibility:"visible"},.3),e.to(".phone",.5,{ease:h.Back.easeInOut.config(1),rotation:90},"+=1"),e.set(".x",{visibility:"visible"},"-=0.2"),e.set(".checkmark",{visibility:"hidden"},"-=0.2"),(0,c["default"])(window).width()<(0,c["default"])(window).height()?(h.TweenMax.set(".rotate-phone-screen",{visibility:"visible"}),e.play()):this.startedLoading||this.startLoading(),(0,c["default"])(window).on("orientationchange",function(){setTimeout(function(){(0,c["default"])(window).width()>(0,c["default"])(window).height()?(h.TweenMax.to(".rotate-phone-screen",.3,{autoAlpha:0}),t.startedLoading||t.startLoading(),e.pause()):(h.TweenMax.to(".rotate-phone-screen",.3,{autoAlpha:1}),e.play())},400)})}},{key:"startLoading",value:function(){var e=this;this.startedLoading=!0,t.all([this.scene.setup(),this.loadModeChooserAnimation(),this.loadingAnimation()]).then(function(){e.setupVRButton(),e.introAnimation()})["catch"](function(t){console.warn(t)})}},{key:"setupVRButton",value:function(){var t=this,e={color:"#fff",corners:"square"};this.scene.display?ga("send","event","VR Display","custom",this.scene.display.displayName):ga("send","event","VR Display","custom","No VR Display"),this.enterVRButton=new b.EnterVRButton(this.scene.renderer.domElement,e),document.getElementById("cardboard").appendChild(this.enterVRButton.domElement),this.enterVRButton.on("enter",function(){ga("send","event","VR Mode","click","Enter VR Button"),h.TweenMax.set(".enter-vr, .mute, .reset-pose",{display:"none"}),t.scene.config.state!==x.STATE.PLAYING&&t.scene.config.state!==x.STATE.GAME_OVER&&t.scene.config.state!==x.STATE.COUNTDOWN&&t.scene.config.state!==x.STATE.PAUSED&&((0,c["default"])(".choose-vr-mode-screen .inner").html("Put on your VR device now<br>Game is starting..."),(0,c["default"])(".choose-vr-mode-screen").css("z-index","1000001"),(0,c["default"])(".choose-vr-mode-screen").appendTo(".webvr-polyfill-fullscreen-wrapper"),h.TweenMax.delayedCall(5,function(){h.TweenMax.to(".choose-vr-mode-screen",.4,{autoAlpha:0}),t.scene.setupVRControls(),t.scene.controlMode=x.CONTROLMODE.VR,t.scene.startGame()}))}),this.enterVRButton.on("exit",function(){h.TweenMax.set([t.scene.renderer,".mute","canvas"],{display:"block",visibility:"visible"}),t.scene.display&&h.TweenMax.set(".enter-vr",{display:"block"}),A["default"].isMobile()&&h.TweenMax.set(".reset-pose",{display:"block"})})}},{key:"loadingAnimation",value:function(){return new t(function(t){h.TweenMax.to("header span",.5,{ease:h.SlowMo.ease.config(.3,.7,!1),width:"100%",onComplete:function(){h.TweenMax.set("header h1",{opacity:1,color:"#fff"}),(0,c["default"])("header span").remove(),t()}})})}},{key:"introAnimation",value:function(){h.TweenMax.to([".intro-screen > div > *"],.5,{y:10}),h.TweenMax.to([".intro-screen > div > *"],.2,{opacity:1,delay:.3}),h.TweenMax.to([".ui"],.8,{opacity:1}),this.startBallTween()}},{key:"startBallTween",value:function(){var t=this,e=parseInt((0,c["default"])("#ball").attr("r"),10),i={x:Math.random()>.5?-e:1920+e,y:800*Math.random()-400};this.introBallTween=new h.TimelineMax({onComplete:function(){setTimeout(function(){t.introOver||t.startBallTween()},2e3*Math.random())}});var n=(0,c["default"])("#ball"),r=(0,c["default"])("#ball-shadow"),s=i.y,o=840,a=1.8;this.introBallTween.to(i,1/a,{x:i.x>0?-e:1920+e,ease:h.Power0.easeNone,onUpdate:function(){n.attr("cx",i.x),r.attr("cx",i.x),r.attr("cy",o);var t=40+15*(1-(o-i.y)/o),e=t/2;r.attr("rx",t),r.attr("ry",e)}},0),this.introBallTween.to(i,.6/a,{y:800,ease:h.Power1.easeIn,onUpdate:function(){n.attr("cy",i.y)},onComplete:function(){}},0),this.introBallTween.call(function(){t.scene.sound.table()},null,null,"-=0.216"),this.introBallTween.to(i,.8/a,{y:s+150,ease:h.Power1.easeOut,onUpdate:function(){n.attr("cy",i.y)}},.6/a)}},{key:"setupListeners",value:function(){var t=this;this.emitter.on(x.EVENT.GAME_OVER,function(){document.exitPointerLock&&document.exitPointerLock()}),this.emitter.on(x.EVENT.EXIT_BUTTON_PRESSED,function(){t.scene.manager.mode===y["default"].VR?setTimeout(function(){location.reload()},3e3):location.reload()}),this.emitter.on(x.EVENT.OPPONENT_DISCONNECTED,function(){t.scene.showOverlay(),t.scene.hud.message.setMessage("opponent disconnected"),t.scene.hud.message.showMessage(),t.scene.paddleOpponent.visible=!1,t.scene.config.state=x.STATE.PAUSED}),this.emitter.on(x.EVENT.OPPONENT_PAUSED,function(){t.scene.config.state===x.STATE.PLAYING&&(t.scene.hud.message.setMessage("opponent paused"),t.scene.hud.message.showMessage(),t.scene.config.state=x.STATE.PAUSED,t.scene.showOverlay())}),this.emitter.on(x.EVENT.OPPONENT_UNPAUSED,function(){t.scene.hud.message.hideMessage(),t.scene.config.state=x.STATE.PLAYING,t.scene.hideOverlay()})}},{key:"loadModeChooserAnimation",value:function(){var e=this;return t.all([new t(function(t){c["default"].getJSON("/animations/1player-v3.json",function(i){e.singleplayerAnimation=d["default"].loadAnimation({container:document.getElementById("singleplayer-animation"),renderer:"svg",loop:!0,animationData:i}),t()})}),new t(function(t){c["default"].getJSON("/animations/2player-v3.json",function(i){e.multiplayerAnimation=d["default"].loadAnimation({container:document.getElementById("multiplayer-animation"),renderer:"svg",loop:!0,animationData:i}),t()})})])}},{key:"setupHandlers",value:function(){var t=this;(0,c["default"])(document).on("visibilitychange",this.onVisibilityChange.bind(this)),(0,c["default"])("#start-singleplayer").on("click",this.onStartSingleplayerClick.bind(this)),(0,c["default"])("#open-room").on("click",this.onOpenRoomClick.bind(this)),(0,c["default"])("#join-room").on("click",this.onJoinRoomClick.bind(this)),(0,c["default"])("#play-again").on("click",this.onPlayAgainClick.bind(this)),(0,c["default"])(".enter-vr").on("click",this.onEnterVRClick.bind(this)),(0,c["default"])(".about-button").on("click",this.onAboutButtonClick.bind(this)),(0,c["default"])("#start").on("click",this.onStartClick.bind(this)),(0,c["default"])("#tilt").on("click",this.onTiltClick.bind(this)),(0,c["default"])(".reset-pose").on("click",this.scene.resetPose.bind(this.scene)),(0,c["default"])("button.btn").on("click",function(){t.scene.sound.playUI("button")}),(0,c["default"])("#reload").on("click",window.location.reload),(0,c["default"])(".join-room-screen .back-arrow").on("click",function(){t.backAnimation(".choose-mode-screen")}),(0,c["default"])(".open-room-screen .back-arrow").on("click",function(){t.backAnimation(".choose-mode-screen")}),(0,c["default"])(".about-screen .back-arrow").on("click",function(){t.backAnimation(t.activeScreen,!0)}),(0,c["default"])(".mute").on("click",this.scene.sound.toggleMute.bind(this.scene.sound)),(0,c["default"])("button.btn").on("click",function(){var t=.1;h.TweenMax.to((0,c["default"])(this),t,{backgroundColor:"#fff"}),h.TweenMax.to((0,c["default"])(this),t,{backgroundColor:"transparent",delay:t})})}},{key:"onVisibilityChange",value:function(){document.hidden?(this.scene.tabActive=!1,this.scene.sound.blur(),this.scene.communication.isOpponentConnected&&this.scene.config.state===x.STATE.PLAYING&&this.scene.communication.sendPause()):(this.scene.tabActive=!0,this.scene.firstActiveFrame=this.scene.frameNumber,this.scene.sound.focus(),this.scene.communication.isOpponentConnected&&this.scene.config.state===x.STATE.PLAYING&&this.scene.communication.sendUnpause())}},{key:"onEnterVRClick",value:function(){this.enterVRButton.requestEnterVR()}},{key:"onStartSingleplayerClick",value:function(){(0,c["default"])(".choose-vr-mode-screen").removeClass("blue green"),(0,c["default"])(".choose-vr-mode-screen").addClass("pink"),(0,c["default"])(".choose-vr-mode-screen a, .choose-vr-mode-screen #tilt").addClass("pink"),this.scene.setSingleplayer(),this.viewVRChooserScreen()}},{key:"onOpenRoomClick",value:function(){(0,c["default"])(".choose-vr-mode-screen").removeClass("pink green"),(0,c["default"])(".choose-vr-mode-screen").addClass("blue"),this.scene.setMultiplayer(),this.viewOpenRoomScreenAnimation()}},{key:"onJoinRoomClick",value:function(){(0,c["default"])(".choose-vr-mode-screen").removeClass("pink blue"),(0,c["default"])(".choose-vr-mode-screen").addClass("green"),this.scene.setMultiplayer(),this.viewJoinRoomScreenAnimation()}},{key:"onPlayAgainClick",value:function(){this.scene.config.mode===x.MODE.MULTIPLAYER&&((0,c["default"])("#play-again").text("waiting for opponent to restart"),this.scene.playerRequestedRestart=!0,this.communication.sendRestartGame()),this.scene.restartGame()}},{key:"onAboutButtonClick",value:function(){var t=new h.TimelineMax;t.set(this.activeScreen,{zIndex:10}),t.set(".transition-color-screen.green",{zIndex:11,left:"-100%"}),t.set(".transition-color-screen.blue",{zIndex:12,left:"-100%"}),t.set(".transition-color-screen.pink",{zIndex:13,left:"-100%"}),t.set(".about-screen",{zIndex:14}),t.to(this.activeScreen,P,{left:"100%",ease:R}),t.staggerTo([".transition-color-screen.green",".transition-color-screen.blue",".transition-color-screen.pink",".about-screen"],P,{left:"0%",ease:R},C,"-="+(P-C))}},{key:"onStartClick",value:function(){var t=this;if(A["default"].isMobile()){var e=new a["default"];e.enable()}this.activeScreen=".choose-mode-screen",this.scene.sound.playLoop("bass-pad"),this.scene.sound.playUI("transition");var i=new h.TimelineMax;i.set(".choose-mode-screen h3, .choose-mode-screen svg, .buttons",{opacity:0,y:10}),i.set(".intro-screen",{zIndex:10}),i.set(".transition-color-screen",{zIndex:11,left:"-100%"}),i.set(".choose-mode-screen",{zIndex:12});var n=(0,c["default"])(window).width();i.staggerTo([".intro-screen h1",".intro-screen p",".intro-screen button",".intro-screen"],P,{x:n,ease:R},C),i.set(".intro-screen",{display:"none"}),i.call(function(){t.introBallTween.kill(),t.introOver=!0}),i.staggerTo([".transition-color-screen.pink",".transition-color-screen.green",".choose-mode-screen"],P,{left:"0%",ease:R},C,"-="+(P+C)),i.set([".transition-color-screen.pink",".transition-color-screen.blue",".transition-color-screen.green"],{left:"-100%"}),i.staggerTo(["#singleplayer-animation svg","#multiplayer-animation svg",".one-player-col h3",".two-player-col h3"],.3,{y:0,opacity:1},.1),i.staggerTo([".one-player-col .buttons",".two-player-col .buttons"],.3,{y:0,opacity:1},.1,"+=0.2")}},{key:"onTiltClick",value:function(){ga("send","event","VR Mode","click","Enter 360 Button"),A["default"].isMobile()?(this.scene.manager.onFSClick_(),this.scene.setupVRControls(),this.scene.controlMode=x.CONTROLMODE.VR):this.scene.controlMode=x.CONTROLMODE.MOUSE,this.scene.startGame()}},{key:"viewVRChooserScreen",value:function(){var e=this;return new t(function(t){e.scene.sound.playUI("transition");var i=new h.TimelineMax;i.set(".choose-vr-mode-screen, .transition-color-screen",{left:"-100%"}),i.set([".open-room-screen",".join-room-screen",".choose-mode-screen"],{zIndex:10}),i.set(".transition-color-screen",{zIndex:11}),i.set(".choose-vr-mode-screen",{zIndex:12,display:"block"}),i.to([".open-room-screen",".join-room-screen",".choose-mode-screen"],P,{left:"100%",ease:R}),i.staggerTo([".transition-color-screen.pink",".transition-color-screen.blue",".transition-color-screen.green",".choose-vr-mode-screen"],P,{left:"0%",ease:R},C,"-="+(P+C)),i.call(function(){d["default"].stop(),d["default"].destroy(),d["default"].stop(),d["default"].destroy()}),i.call(t)})}},{key:"viewJoinRoomScreenAnimation",value:function(){var e=this;return new t(function(t){e.activeScreen=".join-room-screen",(0,c["default"])("#room-code").focus(),(0,c["default"])("#room-code").bind("input",function(){e.scene.sound.playUI("type"),0!==(0,c["default"])("#room-code").val().length?(0,c["default"])(".input-wrapper .placeholder").hide():(0,c["default"])(".input-wrapper .placeholder").show(),4===(0,c["default"])("#room-code").val().length?((0,c["default"])("#join-room-button").removeClass("inactive"),(0,c["default"])("#join-room-button").css("pointer-events","auto")):((0,c["default"])("#join-room-button").addClass("inactive"),(0,c["default"])("#join-room-button").css("pointer-events","none"))}),(0,c["default"])("#room-form").on("submit",function(){(0,c["default"])("#room-code").attr("readonly","readonly"),setTimeout(function(){(0,c["default"])("#room-code").blur(),(0,c["default"])("#room-code").removeAttr("readonly")},100),(0,c["default"])("#room-form .grey-text").css("color","#fff"),(0,c["default"])("#room-form .grey-text").text("connecting to server...");var t=new h.TimelineMax({repeat:-1,repeatDelay:.5});t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server&nbsp;&nbsp;&nbsp;")},null,null,.5),t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server.&nbsp;&nbsp;")},null,null,1),t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server..&nbsp;")},null,null,1.5),t.call(function(){(0,c["default"])("#room-form .grey-text").html("connecting to server...")},null,null,2),e.communication.tryConnecting((0,c["default"])("#room-code").val().toUpperCase()).then(function(){(0,c["default"])("#room-form .grey-text").text("game starts"),(0,c["default"])("#room-form #join-room-button").css("visibility","hidden"),h.TweenMax.set(".opponent-icon > *",{fill:"#fff"}),t.kill(),setTimeout(function(){e.viewVRChooserScreen()},1e3)})["catch"](function(e){t.kill(),(0,c["default"])("#room-form .grey-text").text(e)})}),e.scene.sound.playUI("transition");var i=new h.TimelineMax;i.set(".join-room-screen form > *",{opacity:0,y:10}),(0,c["default"])(".intro-wrapper").removeClass("green blue pink"),(0,c["default"])(".intro-wrapper").addClass("pink"),i.set(".choose-mode-screen",{zIndex:10}),i.set(".transition-color-screen.green",{zIndex:11}),i.set(".transition-color-screen.blue",{zIndex:12}),i.set(".join-room-screen",{zIndex:13}),i.to(".choose-mode-screen",P,{left:"100%",ease:R}),i.staggerTo([".transition-color-screen.green",".transition-color-screen.blue",".join-room-screen"],P,{left:"0%",ease:R},C,"-="+(P-C)),i.staggerTo([".join-room-screen .input-wrapper",".join-room-screen .grey-text",".join-room-screen #join-room-button"],.3,{y:0,opacity:1},.1),i.call(t)})}},{key:"backAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.scene.sound.playUI("transition");var i=new h.TimelineMax;i.set(".choose-mode-screen",{zIndex:10}),i.set(".transition-color-screen."+(".join-room-screen"===this.activeScreen?"blue":"green"),{zIndex:11,left:"0"}),i.set(".transition-color-screen."+(".join-room-screen"===this.activeScreen?"green":"blue"),{zIndex:11,left:"-100%"}),i.set(".transition-color-screen.pink",{zIndex:12,left:"0"}),e||i.set(".join-room-screen, .open-room-screen",{zIndex:13}),i.staggerTo([e?".about-screen":this.activeScreen,".transition-color-screen.pink",".transition-color-screen."+(".join-room-screen"===this.activeScreen?"blue":"green")],P,{left:"-100%",ease:R},C),i.to([e?this.activeScreen:t],P,{left:"0%",ease:R},"-="+(P-C)),e||this.scene.sound.playLoop("bass-pad"),this.activeScreen=t}},{key:"viewOpenRoomScreenAnimation",value:function(){var e=this;return new t(function(t){e.activeScreen=".open-room-screen",e.communication.chooseClosestServer().then(function(){var t=e.communication.openRoom();(0,c["default"])("#generated-room-code").val(t),(0,c["default"])(".opponent-joined").text("waiting for opponent")})["catch"](function(t){console.warn(t),(0,c["default"])(".opponent-joined").text("cannot connect to server"),h.TweenMax.killTweensOf(".opponent-joined"),h.TweenMax.set(".opponent-joined",{visibility:"visible",opacity:1})}),e.emitter.on(x.EVENT.OPPONENT_CONNECTED,function(){e.scene.sound.playUI("joined"),(0,c["default"])(".opponent-joined").text("Opponent joined"),h.TweenMax.set(".opponent-icon > *",{fill:"#fff"}),(0,c["default"])("#join-waiting-room").hide(),h.TweenMax.killTweensOf(".opponent-joined"),h.TweenMax.set(".opponent-joined",{visibility:"visible",opacity:1}),setTimeout(function(){e.viewVRChooserScreen()},1e3)}),e.scene.sound.playUI("transition"),e.scene.sound.playLoop("waiting"),(0,c["default"])(".intro-wrapper").removeClass("green blue pink"),(0,c["default"])(".intro-wrapper").addClass("pink");var i=(new p["default"]("#generated-room-code"),new h.TimelineMax);i.set(".open-room-screen > .inner > *",{opacity:0,y:10}),i.set(["#generated-room-code",".open-room-screen .grey-text"],{opacity:0,y:10}),i.set([".open-room-screen .opponent-joined"],{opacity:0}),i.set(".choose-mode-screen",{zIndex:10}),i.set(".transition-color-screen",{zIndex:11,left:"-100%"}),i.set(".open-room-screen",{zIndex:12}),i.to(".choose-mode-screen",P,{left:"100%",ease:R}),i.staggerTo([".transition-color-screen.blue",".transition-color-screen.green",".open-room-screen"],P,{left:"0%",ease:R},C,"-="+P),i.staggerTo(["#generated-room-code",".open-room-screen .grey-text"],.3,{y:0,opacity:1}),i.to([".open-room-screen .opponent-joined"],.3,{opacity:1},"+=0.5"),i.call(t);var n=1,r=new h.TimelineMax({repeat:-1,repeatDelay:n});r.set(".opponent-joined",{color:"#392a85"},0),r.set(".opponent-joined",{color:"#ffffff"},n)})["catch"](function(t){console.warn(t)})}}]),e}();new I}).call(e,i(2))},function(t,e,i){(function(e,n,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   3.3.1
	 */
!function(e,i){t.exports=i()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function s(t){Z=t}function o(t){Q=t}function a(){return function(){return e.nextTick(p)}}function h(){return function(){X(p)}}function l(){var t=0,e=new K(p),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=p,function(){return t.port2.postMessage(0)}}function u(){var t=setTimeout;return function(){return t(p,1)}}function p(){for(var t=0;t<q;t+=2){var e=it[t],i=it[t+1];e(i),it[t]=void 0,it[t+1]=void 0}q=0}function f(){try{var t=i(4);return X=t.runOnLoop||t.runOnContext,h()}catch(e){return u()}}function d(t,e){var i=arguments,n=this,r=new this.constructor(g);void 0===r[rt]&&k(r);var s=n._state;return s?!function(){var t=i[s-1];Q(function(){return O(s,r,t,n._result)})}():P(n,r,t,e),r}function m(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var i=new e(g);return T(i,t),i}function g(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return ht.error=e,ht}}function b(t,e,i,n){try{t.call(e,i,n)}catch(r){return r}}function x(t,e,i){Q(function(t){var n=!1,r=b(i,e,function(i){n||(n=!0,e!==i?T(t,i):S(t,i))},function(e){n||(n=!0,M(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&r&&(n=!0,M(t,r))},t)}function E(t,e){e._state===ot?S(t,e._result):e._state===at?M(t,e._result):P(e,void 0,function(e){return T(t,e)},function(e){return M(t,e)})}function w(t,e,i){e.constructor===t.constructor&&i===d&&e.constructor.resolve===m?E(t,e):i===ht?M(t,ht.error):void 0===i?S(t,e):n(i)?x(t,e,i):S(t,e)}function T(e,i){e===i?M(e,v()):t(i)?w(e,i,_(i)):S(e,i)}function A(t){t._onerror&&t._onerror(t._result),C(t)}function S(t,e){t._state===st&&(t._result=e,t._state=ot,0!==t._subscribers.length&&Q(C,t))}function M(t,e){t._state===st&&(t._state=at,t._result=e,Q(A,t))}function P(t,e,i,n){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+ot]=i,r[s+at]=n,0===s&&t._state&&Q(C,t)}function C(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,r=void 0,s=t._result,o=0;o<e.length;o+=3)n=e[o],r=e[o+i],n?O(i,n,r,s):r(s);t._subscribers.length=0}}function R(){this.error=null}function I(t,e){try{return t(e)}catch(i){return lt.error=i,lt}}function O(t,e,i,r){var s=n(i),o=void 0,a=void 0,h=void 0,l=void 0;if(s){if(o=I(i,r),o===lt?(l=!0,a=o.error,o=null):h=!0,e===o)return void M(e,y())}else o=r,h=!0;e._state!==st||(s&&h?T(e,o):l?M(e,a):t===ot?S(e,o):t===at&&M(e,o))}function N(t,e){try{e(function(e){T(t,e)},function(e){M(t,e)})}catch(i){M(t,i)}}function L(){return ct++}function k(t){t[rt]=ct++,t._state=void 0,t._result=void 0,t._subscribers=[]}function D(t,e){this._instanceConstructor=t,this.promise=new t(g),this.promise[rt]||k(this.promise),Y(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):M(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function B(t){return new D(this,t).promise}function U(t){var e=this;return new e(Y(t)?function(i,n){for(var r=t.length,s=0;s<r;s++)e.resolve(t[s]).then(i,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function V(t){var e=this,i=new e(g);return M(i,t),i}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(t){this[rt]=L(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&z(),this instanceof j?N(this,t):G())}function H(){var t=void 0;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(e){}if("[object Promise]"===n&&!i.cast)return}t.Promise=j}var W=void 0;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y=W,q=0,X=void 0,Z=void 0,Q=function(t,e){it[q]=t,it[q+1]=e,q+=2,2===q&&(Z?Z(p):nt())},J="undefined"!=typeof window?window:void 0,$=J||{},K=$.MutationObserver||$.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,it=new Array(1e3),nt=void 0;nt=tt?a():K?l():et?c():void 0===J?f():u();var rt=Math.random().toString(36).substring(16),st=void 0,ot=1,at=2,ht=new R,lt=new R,ct=0;return D.prototype._enumerate=function(){for(var t=this.length,e=this._input,i=0;this._state===st&&i<t;i++)this._eachEntry(e[i],i)},D.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===m){var r=_(t);if(r===d&&t._state!==st)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===j){var s=new i(g);w(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},D.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===st&&(this._remaining--,t===at?M(n,i):this._result[e]=i),0===this._remaining&&S(n,this._result)},D.prototype._willSettleAt=function(t,e){var i=this;P(t,void 0,function(t){return i._settledAt(ot,e,t)},function(t){return i._settledAt(at,e,t)})},j.all=B,j.race=U,j.resolve=m,j.reject=V,j._setScheduler=s,j._setAsap=o,j._asap=Q,j.prototype={constructor:j,then:d,"catch":function(t){return this.then(null,t)}},H(),j.polyfill=H,j.Promise=j,j})}).call(e,i(3),i(2),function(){return this}())},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(u===clearTimeout)return clearTimeout(t);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function o(){m&&f&&(m=!1,f.length?d=f.concat(d):g=-1,d.length&&a())}function a(){if(!m){var t=r(o);m=!0;for(var e=d.length;e;){for(f=d,d=[];++g<e;)f&&f[g].run();g=-1,e=d.length}f=null,m=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var c,u,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(t){c=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(t){u=n}}();var f,d=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new h(t,e)),1!==d.length||m||r(a)},h.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){},function(t,e){function i(t,e,i){var n=document.createElement("source");n.src=i,n.type="video/"+e,t.appendChild(n)}var n={Android:/Android/gi.test(navigator.userAgent),iOS:/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)},r={WebM:"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",MP4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw=="},s=function(){return n.iOS?this.noSleepTimer=null:n.Android&&(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("loop",""),i(this.noSleepVideo,"webm",r.WebM),i(this.noSleepVideo,"mp4",r.MP4)),this};s.prototype.enable=function(t){n.iOS?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},t||15e3)):n.Android&&this.noSleepVideo.play()},s.prototype.disable=function(){n.iOS?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):n.Android&&this.noSleepVideo.pause()},t.exports=s},function(t,e,i){var n,r;(function(s){/*!
	 * VERSION: 1.19.1
	 * DATE: 2017-01-17
	 * UPDATES AND DOCS AT: http://greensock.com
	 * 
	 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
	 *
	 * @license Copyright (c) 2008-2017, GreenSock. All rights reserved.
	 * This work is subject to the terms at http://greensock.com/standard-license or for
	 * Club GreenSock members, the software agreement that was issued with your membership.
	 * 
	 * @author: Jack Doyle, jack@greensock.com
	 **/
var o="undefined"!=typeof t&&t.exports&&"undefined"!=typeof s?s:this||window;(o._gsQueue||(o._gsQueue=[])).push(function(){"use strict";o._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,i){var n,r,s=t.cycle;for(n in s)r=s[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},s=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},o=1e-10,a=i._internals,h=a.isSelector,l=a.isArray,c=s.prototype=i.to({},.1,{}),u=[];s.version="1.19.1",c.constructor=s,c.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.lagSmoothing=i.lagSmoothing,s.ticker=i.ticker,s.render=i.render,c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},c.updateTo=function(t,e){var n,r=this.ratio,s=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||s)for(var a,h=1/(1-r),l=this._firstPT;l;)a=l.s+l.c,l.c*=h,l.s=a-l.c,l=l._next;return this},c.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,s,h,l,c,u,p,f=this._dirty?this.totalDuration():this._totalDuration,d=this._time,m=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=f-1e-7&&t>=0?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(y<0||t<=0&&t>=-1e-7||y===o&&"isPause"!==this.data)&&y!==t&&(i=!0,y>o&&(r="onReverseComplete")),this._rawPrevTime=p=!e||t||y===t?t:o)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&y>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=p=!e||t||y===t?t:o)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType?(l=this._time/v,c=this._easeType,u=this._easePower,(1===c||3===c&&l>=.5)&&(l=1-l),3===c&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),1===c?this.ratio=1-l:2===c?this.ratio=l:this._time/v<.5?this.ratio=l/2:this.ratio=1-l/2):this.ratio=this._ease.getRatio(this._time/v)),d===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=d,this._totalTime=m,this._rawPrevTime=y,this._cycle=g,a.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/v):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==d&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||r)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===v&&this._rawPrevTime===o&&p!==o&&(this._rawPrevTime=0)))},s.to=function(t,e,i){return new s(t,e,i)},s.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(t,e,i)},s.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new s(t,e,n)},s.staggerTo=s.allTo=function(t,e,o,a,c,p,f){a=a||0;var d,m,g,v,y=0,_=[],b=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),c.apply(f||o.callbackScope||this,p||u)},x=o.cycle,E=o.startAt&&o.startAt.cycle;for(l(t)||("string"==typeof t&&(t=i.selector(t)||t),h(t)&&(t=n(t))),t=t||[],a<0&&(t=n(t),t.reverse(),a*=-1),d=t.length-1,g=0;g<=d;g++){m={};for(v in o)m[v]=o[v];if(x&&(r(m,t,g),null!=m.duration&&(e=m.duration,delete m.duration)),E){E=m.startAt={};for(v in o.startAt)E[v]=o.startAt[v];r(m.startAt,t,g)}m.delay=y+(m.delay||0),g===d&&c&&(m.onComplete=b),_[g]=new s(t[g],e,m),y+=a}return _},s.staggerFrom=s.allFrom=function(t,e,i,n,r,o,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(t,e,i,n,r,o,a)},s.staggerFromTo=s.allFromTo=function(t,e,i,n,r,o,a,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,s.staggerTo(t,e,n,r,o,a,h)},s.delayedCall=function(t,e,i,n,r){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var p=function(t,e){for(var n=[],r=0,s=t._first;s;)s instanceof i?n[r++]=s:(e&&(n[r++]=s),n=n.concat(p(s,e)),r=n.length),s=s._next;return n},f=s.getAllTweens=function(e){return p(t._rootTimeline,e).concat(p(t._rootFramesTimeline,e))};s.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var s,o,a,h=f(0!=r),l=h.length,c=i&&n&&r;for(a=0;a<l;a++)o=h[a],(c||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var r,o,c,u,p,f=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),h(t)&&(t=n(t)),l(t))for(u=t.length;--u>-1;)s.killChildTweensOf(t[u],e);else{r=[];for(c in f)for(o=f[c].target.parentNode;o;)o===t&&(r=r.concat(f[c].tweens)),o=o.parentNode;for(p=r.length,u=0;u<p;u++)e&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var d=function(t,i,n,r){i=i!==!1,n=n!==!1,r=r!==!1;for(var s,o,a=f(r),h=i&&n&&r,l=a.length;--l>-1;)o=a[l],(h||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&o.paused(t)};return s.pauseAll=function(t,e,i){d(!0,t,e,i)},s.resumeAll=function(t,e,i){d(!1,t,e,i)},s.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||o,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},c.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},c.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},c.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),o._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],l(i)&&i.join("").indexOf("{self}")!==-1&&(r[n]=this._swapSelfInParams(i));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,s=i._internals,a=n._internals={},h=s.isSelector,l=s.isArray,c=s.lazyTweens,u=s.lazyRender,p=o._gsDefine.globals,f=function(t){var e,i={};for(e in t)i[e]=t[e];return i},d=function(t,e,i){var n,r,s=t.cycle;for(n in s)r=s[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},m=a.pauseCallback=function(){},g=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},v=n.prototype=new e;return n.version="1.19.1",v.constructor=n,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(t,e,n,r){var s=n.repeat&&p.TweenMax||i;return e?this.add(new s(t,e,n),r):this.set(t,n,r)},v.from=function(t,e,n,r){return this.add((n.repeat&&p.TweenMax||i).from(t,e,n),r)},v.fromTo=function(t,e,n,r,s){var o=r.repeat&&p.TweenMax||i;return e?this.add(o.fromTo(t,e,n,r),s):this.set(t,r,s)},v.staggerTo=function(t,e,r,s,o,a,l,c){var u,p,m=new n({onComplete:a,onCompleteParams:l,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),v=r.cycle;for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],h(t)&&(t=g(t)),s=s||0,s<0&&(t=g(t),t.reverse(),s*=-1),p=0;p<t.length;p++)u=f(r),u.startAt&&(u.startAt=f(u.startAt),u.startAt.cycle&&d(u.startAt,t,p)),v&&(d(u,t,p),null!=u.duration&&(e=u.duration,delete u.duration)),m.to(t[p],e,u,p*s);return this.add(m,o)},v.staggerFrom=function(t,e,i,n,r,s,o,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,s,o,a)},v.staggerFromTo=function(t,e,i,n,r,s,o,a,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,s,o,a,h)},v.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},v.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,s,o=new n(t),a=o._timeline;for(null==e&&(e=!0),a._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=a._time,r=a._first;r;)s=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||o.add(r,r._startTime-r._delay),r=s;return a.add(o,0),o},v.add=function(r,s,o,a){var h,c,u,p,f,d;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&l(r)){for(o=o||"normal",a=a||0,h=s,c=r.length,u=0;u<c;u++)l(p=r[u])&&(p=new n({tweens:p})),this.add(p,h),"string"!=typeof p&&"function"!=typeof p&&("sequence"===o?h=p._startTime+p.totalDuration()/p._timeScale:"start"===o&&(p._startTime-=p.delay())),h+=a;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,s);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,d=f.rawTime()>r._startTime;f._timeline;)d&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},v.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,i){e.prototype._remove.call(this,t,i);var n=this._last;return n?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},v.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,n,r){var s=i.delayedCall(0,m,n,r||this);return s.vars.onComplete=s.vars.onReverseComplete=e,s.data="isPause",this._hasPause=!0,this.add(s,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,i,n,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),s===-1)return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):this.duration()}return Number(e)+i},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,s,o,a,h,l,p,f=this._dirty?this.totalDuration():this._totalDuration,d=this._time,m=this._startTime,g=this._timeScale,v=this._paused;if(t>=f-1e-7&&t>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(s=!0,a="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=f+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(a="onReverseComplete",s=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&s)for(n=this._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;t=0,this._initted||(h=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=d)for(n=this._first;n&&n._startTime<=t&&!l;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(l=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!l;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(l=n),n=n._prev;l&&(this._time=t=l._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==d&&this._first||i||h||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),p=this._time,p>=d)for(n=this._first;n&&(o=n._next,p===this._time&&(!this._paused||v));)(n._active||n._startTime<=p&&!n._paused&&!n._gc)&&(l===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,p===this._time&&(!this._paused||v));){if(n._active||n._startTime<=d&&!n._paused&&!n._gc){if(l===n){for(l=n._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,i),l=l._prev;l=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=o}this._onUpdate&&(e||(c.length&&u(),this._callback("onUpdate"))),a&&(this._gc||m!==this._startTime&&g===this._timeScale||(0===this._time||f>=this.totalDuration())&&(s&&(c.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,n,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)o._startTime<r||(o instanceof i?e!==!1&&(s[a++]=o):(n!==!1&&(s[a++]=o),t!==!1&&(s=s.concat(o.getChildren(!0,e,n)),a=s.length))),o=o._next;return s},v.getTweensOf=function(t,e){var n,r,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),n=i.getTweensOf(t),r=n.length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(o[a++]=n[r]);return s&&this._enabled(!1,!0),o},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,s=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},v.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},v.totalTime=function(e,i,n){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},v.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},n},!0),o._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,s=e._internals,a=s.lazyTweens,h=s.lazyRender,l=o._gsDefine.globals,c=new i(null,null,1,0),u=n.prototype=new t;return u.constructor=n,u.kill()._gc=!1,n.version="1.19.1",u.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},u.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},u.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},u.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},u.tweenTo=function(t,i){i=i||{};var n,r,s,o={ease:c,useFrames:this.usesFrames(),immediateRender:!1},a=i.repeat&&l.TweenMax||e;for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),n=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new a(this,n,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&n===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||s,i.onStartParams||[])},s},u.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},u.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,s,o,l,c,u,p,f,d=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,g=this._time,v=this._totalTime,y=this._startTime,_=this._timeScale,b=this._rawPrevTime,x=this._paused,E=this._cycle;if(t>=d-1e-7&&t>=0)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||b<0||b===r)&&b!==t&&this._first&&(c=!0,b>r&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=m,t=m+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==g||0===m&&b!==r&&(b>0||t<0&&b>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=s=!0,l="onReverseComplete"):b>=0&&this._first&&(c=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=m||!e||t||this._rawPrevTime===t?t:r,0===t&&s)for(n=this._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;t=0,this._initted||(c=!0)}else if(0===m&&b<0&&(c=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=m+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&v<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,t=m+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e&&t<m){if(t=this._time,t>=g||this._repeat&&E!==this._cycle)for(n=this._first;n&&n._startTime<=t&&!p;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(p=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!p;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(p=n),n=n._prev;p&&(this._time=t=p._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==E&&!this._locked){var w=this._yoyo&&0!==(1&E),T=w===(this._yoyo&&0!==(1&this._cycle)),A=this._totalTime,S=this._cycle,M=this._rawPrevTime,P=this._time;if(this._totalTime=E*m,this._cycle<E?w=!w:this._totalTime+=m,this._time=g,this._rawPrevTime=0===m?b-1e-4:b,this._cycle=E,this._locked=!0,g=w?0:m,this.render(g,e,0===m),e||this._gc||this.vars.onRepeat&&(this._cycle=S,this._locked=!1,this._callback("onRepeat")),g!==this._time)return;if(T&&(this._cycle=E,this._locked=!0,g=w?m+1e-4:-1e-4,this.render(g,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=P,this._totalTime=A,this._cycle=S,this._rawPrevTime=M}if(!(this._time!==g&&this._first||i||c||p))return void(v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&t>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),f=this._time,f>=g)for(n=this._first;n&&(o=n._next,f===this._time&&(!this._paused||x));)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(p===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,f===this._time&&(!this._paused||x));){if(n._active||n._startTime<=g&&!n._paused&&!n._gc){if(p===n){for(p=n._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(t-p._startTime)*p._timeScale:(t-p._startTime)*p._timeScale,e,i),p=p._prev;p=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=o}this._onUpdate&&(e||(a.length&&h(),this._callback("onUpdate"))),l&&(this._locked||this._gc||y!==this._startTime&&_===this._timeScale||(0===this._time||d>=this.totalDuration())&&(s&&(a.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},u.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,s=[],o=this.getChildren(t,e,i),a=0,h=o.length;for(n=0;n<h;n++)r=o[n],r.isActive()&&(s[a++]=r);return s},u.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},u.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},u.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},u.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},u.totalDuration=function(e){return arguments.length?this._repeat!==-1&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},u.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],i=[],n=[],r={},s=o._gsDefine.globals,a=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},h=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(t,e,i,n){var r={a:t},s={},o={},a={c:n},h=(t+e)/2,l=(e+i)/2,c=(i+n)/2,u=(h+l)/2,p=(l+c)/2,f=(p-u)/8;return r.b=h+(t-h)/4,s.b=u+f,r.c=s.a=(r.b+s.b)/2,s.c=o.a=(u+p)/2,o.b=p-f,a.b=c+(n-c)/4,o.c=a.a=(o.b+a.b)/2,[r,s,o,a]},c=function(t,r,s,o,a){var h,c,u,p,f,d,m,g,v,y,_,b,x,E=t.length-1,w=0,T=t[0].a;for(h=0;h<E;h++)f=t[w],c=f.a,u=f.d,p=t[w+1].d,a?(_=e[h],b=i[h],x=(b+_)*r*.25/(o?.5:n[h]||.5),d=u-(u-c)*(o?.5*r:0!==_?x/_:0),m=u+(p-u)*(o?.5*r:0!==b?x/b:0),g=u-(d+((m-d)*(3*_/(_+b)+.5)/4||0))):(d=u-(u-c)*r*.5,m=u+(p-u)*r*.5,g=u-(d+m)/2),d+=g,m+=g,f.c=v=d,0!==h?f.b=T:f.b=T=f.a+.6*(f.c-f.a),f.da=u-c,f.ca=v-c,f.ba=T-c,s?(y=l(c,T,v,u),t.splice(w,1,y[0],y[1],y[2],y[3]),w+=4):w++,T=m;f=t[w],f.b=T,f.c=T+.4*(f.d-T),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=T-f.a,s&&(y=l(f.a,T,f.c,f.d),t.splice(w,1,y[0],y[1],y[2],y[3]))},u=function(t,n,r,s){var o,h,l,c,u,p,f=[];if(s)for(t=[s].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][n])&&"="===p.charAt(1)&&(t[h][n]=s[n]+Number(p.charAt(0)+p.substr(2)));if(o=t.length-2,o<0)return f[0]=new a(t[0][n],0,0,t[o<-1?0:1][n]),f;for(h=0;h<o;h++)l=t[h][n],c=t[h+1][n],f[h]=new a(l,0,0,c),r&&(u=t[h+2][n],e[h]=(e[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(u-c)*(u-c));return f[h]=new a(t[h][n],0,0,t[h+1][n]),f},p=function(t,s,o,a,l,p){var f,d,m,g,v,y,_,b,x={},E=[],w=p||t[0];l="string"==typeof l?","+l+",":h,null==s&&(s=1);for(d in t[0])E.push(d);if(t.length>1){for(b=t[t.length-1],_=!0,f=E.length;--f>-1;)if(d=E[f],Math.abs(w[d]-b[d])>.05){_=!1;break}_&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=n.length=0,f=E.length;--f>-1;)d=E[f],r[d]=l.indexOf(","+d+",")!==-1,x[d]=u(t,d,r[d],p);for(f=e.length;--f>-1;)e[f]=Math.sqrt(e[f]),i[f]=Math.sqrt(i[f]);if(!a){for(f=E.length;--f>-1;)if(r[d])for(m=x[E[f]],y=m.length-1,g=0;g<y;g++)v=m[g+1].da/i[g]+m[g].da/e[g]||0,n[g]=(n[g]||0)+v*v;for(f=n.length;--f>-1;)n[f]=Math.sqrt(n[f])}for(f=E.length,g=o?4:1;--f>-1;)d=E[f],m=x[d],c(m,s,o,a,r[d]),_&&(m.splice(0,g),m.splice(m.length-g,g));return x},f=function(t,e,i){e=e||"soft";var n,r,s,o,h,l,c,u,p,f,d,m={},g="cubic"===e?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(p in t[0])y.push(p);for(l=y.length;--l>-1;){for(p=y[l],m[p]=h=[],f=0,u=t.length,c=0;c<u;c++)n=null==i?t[c][p]:"string"==typeof(d=t[c][p])&&"="===d.charAt(1)?i[p]+Number(d.charAt(0)+d.substr(2)):Number(d),v&&c>1&&c<u-1&&(h[f++]=(n+h[f-2])/2),h[f++]=n;for(u=f-g+1,f=0,c=0;c<u;c+=g)n=h[c],r=h[c+1],s=h[c+2],o=2===g?0:h[c+3],h[f++]=d=3===g?new a(n,r,s,o):new a(n,(2*r+n)/3,(2*r+s)/3,s);h.length=f}return m},d=function(t,e,i){for(var n,r,s,o,a,h,l,c,u,p,f,d=1/i,m=t.length;--m>-1;)for(p=t[m],s=p.a,o=p.d-s,a=p.c-s,h=p.b-s,n=r=0,c=1;c<=i;c++)l=d*c,u=1-l,n=r-(r=(l*l*o+3*u*(l*a+u*h))*l),f=m*i+c-1,
e[f]=(e[f]||0)+n*n},m=function(t,e){e=e>>0||6;var i,n,r,s,o=[],a=[],h=0,l=0,c=e-1,u=[],p=[];for(i in t)d(t[i],o,e);for(r=o.length,n=0;n<r;n++)h+=Math.sqrt(o[n]),s=n%e,p[s]=h,s===c&&(l+=h,s=n/e>>0,u[s]=p,a[s]=l,h=0,p=[]);return{length:l,lengths:a,segments:u}},g=o._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,s,o,a,h=e.values||[],l={},c=h[0],u=e.autoRotate||i.vars.orientToBezier;this._autoRotate=u?u instanceof Array?u:[["x","y","rotation",u===!0?0:Number(u)||0]]:null;for(n in c)this._props.push(n);for(s=this._props.length;--s>-1;)n=this._props[s],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],l[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||l[n]!==h[0][n]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):f(h,e.type,l),this._segCount=this._beziers[n].length,this._timeRes){var d=m(this._beziers,this._timeRes);this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(u=this._autoRotate)for(this._initialRotations=[],u[0]instanceof Array||(this._autoRotate=u=[u]),s=u.length;--s>-1;){for(o=0;o<3;o++)n=u[s][o],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=u[s][2],this._initialRotations[s]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,s,o,a,h,l,c,u,p=this._segCount,f=this._func,d=this._target,m=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<p-1){for(l=p-1;r<l&&(this._l2=c[++r])<=e;);this._l1=c[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=c[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&r<u.length-1){for(l=u.length-1;r<l&&(this._s2=u[++r])<=e;);this._s1=u[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=u[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else i=e<0?0:e>=1?p-1:p*e>>0,a=(e-i*(1/p))*p;for(n=1-a,r=this._props.length;--r>-1;)s=this._props[r],o=this._beziers[s][i],h=(a*a*o.da+3*n*(a*o.ca+n*o.ba))*a+o.a,this._mod[s]&&(h=this._mod[s](h,d)),f[s]?d[s](h):d[s]=h;if(this._autoRotate){var g,v,y,_,b,x,E,w=this._autoRotate;for(r=w.length;--r>-1;)s=w[r][2],x=w[r][3]||0,E=w[r][4]===!0?1:t,o=this._beziers[w[r][0]],g=this._beziers[w[r][1]],o&&g&&(o=o[i],g=g[i],v=o.a+(o.b-o.a)*a,_=o.b+(o.c-o.b)*a,v+=(_-v)*a,_+=(o.c+(o.d-o.c)*a-_)*a,y=g.a+(g.b-g.a)*a,b=g.b+(g.c-g.b)*a,y+=(b-y)*a,b+=(g.c+(g.d-g.c)*a-b)*a,h=m?Math.atan2(b-y,_-v)*E+x:this._initialRotations[r],this._mod[s]&&(h=this._mod[s](h,d)),f[s]?d[s](h):d[s]=h)}}}),v=g.prototype;g.bezierThrough=p,g.cubicToQuadratic=l,g._autoCSS=!0,g.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},g._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,h){e instanceof Array&&(e={values:e}),h=new g;var l,c,u,p=e.values,f=p.length-1,d=[],m={};if(f<0)return a;for(l=0;l<=f;l++)u=i(t,p[l],o,a,h,f!==l),d[l]=u.end;for(c in e)m[c]=e[c];return m.values=d,a=new r(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=h,a.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(l=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x&&[["x","y","rotation",l,!1]]),m.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform,u.proxy.rotation=u.autoRotate.rotation||0,o._overwriteProps.push("rotation")),h._onInitTween(u.proxy,m,o._tween),a}})}},v._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)e=t[i[n]],e&&"function"==typeof e&&(this._mod[i[n]]=e)},v._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)}}(),o._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,s,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},h=o._gsDefine.globals,l={},c=a.prototype=new t("css");c.constructor=a,a.version="1.19.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,c="px",a.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var u,p,f,d,m,g,v,y,_=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,E=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/i,A=/opacity:([^;]*)/i,S=/alpha\(opacity *=.+?\)/i,M=/^(rgb|hsl)/,P=/([A-Z])/g,C=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(t,e){return e.toUpperCase()},O=/(?:Left|Right|Width)/i,N=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,k=/,(?=[^\)]*(?:\(|$))/gi,D=/[\s,\(]/i,F=Math.PI/180,B=180/Math.PI,U={},V={style:{}},z=o.document||{createElement:function(){return V}},G=function(t,e){return z.createElementNS?z.createElementNS(e||"http://www.w3.org/1999/xhtml",t):z.createElement(t)},j=G("div"),H=G("img"),W=a._internals={_specialProps:l},Y=(o.navigator||{}).userAgent||"",q=function(){var t=Y.indexOf("Android"),e=G("a");return f=Y.indexOf("Safari")!==-1&&Y.indexOf("Chrome")===-1&&(t===-1||parseFloat(Y.substr(t+8,2))>3),m=f&&parseFloat(Y.substr(Y.indexOf("Version/")+8,2))<6,d=Y.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),X=function(t){return T.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(t){o.console&&console.log(t)},Q="",J="",$=function(t,e){e=e||j;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(J=3===n?"ms":i[n],Q="-"+J.toLowerCase()+"-",J+t):null},K=z.defaultView?z.defaultView.getComputedStyle:function(){},tt=a.getStyle=function(t,e,i,n,r){var s;return q||"opacity"!==e?(!n&&t.style[e]?s=t.style[e]:(i=i||K(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(P,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):X(t)},et=W.convertToPixels=function(t,i,n,r,s){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var o,h,l,c=O.test(i),u=t,p=j.style,f=n<0,d=1===n;if(f&&(n=-n),d&&(n*=100),"%"===r&&i.indexOf("border")!==-1)o=n/100*(c?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)p[c?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=t.parentNode||z.body,h=u._gsCache,l=e.ticker.frame,h&&c&&h.time===l)return h.width*n/100;p[c?"width":"height"]=n+r}u.appendChild(j),o=parseFloat(j[c?"offsetWidth":"offsetHeight"]),u.removeChild(j),c&&"%"===r&&a.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=o/n*100),0!==o||s||(o=et(t,i,n,r,!0))}return d&&(o/=100),f?-o:o},it=W.calculateOffset=function(t,e,i){if("absolute"!==tt(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=tt(t,"margin"+n,i);return t["offset"+n]-(et(t,e,parseFloat(r),r.replace(w,""))||0)},nt=function(t,e){var i,n,r,s={};if(e=e||K(t,null))if(i=e.length)for(;--i>-1;)r=e[i],r.indexOf("-transform")!==-1&&Rt!==r||(s[r.replace(C,I)]=e.getPropertyValue(r));else for(i in e)i.indexOf("Transform")!==-1&&Ct!==i||(s[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(C,I)]=e[i]);return q||(s.opacity=X(t)),n=Ht(t,e,!1),s.rotation=n.rotation,s.skewX=n.skewX,s.scaleX=n.scaleX,s.scaleY=n.scaleY,s.x=n.x,s.y=n.y,Ot&&(s.z=n.z,s.rotationX=n.rotationX,s.rotationY=n.rotationY,s.scaleZ=n.scaleZ),s.filters&&delete s.filters,s},rt=function(t,e,i,n,r){var s,o,a,h={},l=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=i[o])||r&&r[o])&&o.indexOf("Origin")===-1&&("number"!=typeof s&&"string"!=typeof s||(h[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(E,"")?s:0:it(t,o),void 0!==l[o]&&(a=new _t(l,o,l[o],a))));if(n)for(o in n)"className"!==o&&(h[o]=n[o]);return{difs:h,firstMPT:a}},st={width:["Left","Right"],height:["Top","Bottom"]},ot=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||K(t))[e]||0;if(t.getCTM&&zt(t))return t.getBBox()[e]||0;var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=st[e],s=r.length;for(i=i||K(t,null);--s>-1;)n-=parseFloat(tt(t,"padding"+r[s],i,!0))||0,n-=parseFloat(tt(t,"border"+r[s]+"Width",i,!0))||0;return n},ht=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,n=t.split(" "),r=t.indexOf("left")!==-1?"0%":t.indexOf("right")!==-1?"100%":n[0],s=t.indexOf("top")!==-1?"0%":t.indexOf("bottom")!==-1?"100%":n[1];if(n.length>3&&!e){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(ht(n[i]));return t.join(",")}return null==s?s="center"===r?"50%":"0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1)&&(r="50%"),t=r+" "+s+(n.length>2?" "+n[2]:""),e&&(e.oxp=r.indexOf("%")!==-1,e.oyp=s.indexOf("%")!==-1,e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(E,"")),e.oy=parseFloat(s.replace(E,"")),e.v=t),e||t},lt=function(t,e){return"function"==typeof t&&(t=t(y,v)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ct=function(t,e){return"function"==typeof t&&(t=t(y,v)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ut=function(t,e,i,n){var r,s,o,a,h,l=1e-6;return"function"==typeof t&&(t=t(y,v)),null==t?a=e:"number"==typeof t?a=t:(r=360,s=t.split("_"),h="="===t.charAt(1),o=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(t.indexOf("rad")===-1?1:B)-(h?0:e),s.length&&(n&&(n[i]=e+o),t.indexOf("short")!==-1&&(o%=r,o!==o%(r/2)&&(o=o<0?o+r:o-r)),t.indexOf("_cw")!==-1&&o<0?o=(o+9999999999*r)%r-(o/r|0)*r:t.indexOf("ccw")!==-1&&o>0&&(o=(o-9999999999*r)%r-(o/r|0)*r)),a=e+o),a<l&&a>-l&&(a=0),a},pt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ft=function(t,e,i){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},dt=a.parseColor=function(t,e){var i,n,r,s,o,a,h,l,c,u,p;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),pt[t])i=pt[t];else if("#"===t.charAt(0))4===t.length&&(n=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+n+n+r+r+s+s),t=parseInt(t.substr(1),16),i=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=p=t.match(_),e){if(t.indexOf("=")!==-1)return t.match(b)}else o=Number(i[0])%360/360,a=Number(i[1])/100,h=Number(i[2])/100,r=h<=.5?h*(a+1):h+a-h*a,n=2*h-r,i.length>3&&(i[3]=Number(t[3])),i[0]=ft(o+1/3,n,r),i[1]=ft(o,n,r),i[2]=ft(o-1/3,n,r);else i=t.match(_)||pt.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=pt.black;return e&&!p&&(n=i[0]/255,r=i[1]/255,s=i[2]/255,l=Math.max(n,r,s),c=Math.min(n,r,s),h=(l+c)/2,l===c?o=a=0:(u=l-c,a=h>.5?u/(2-l-c):u/(l+c),o=l===n?(r-s)/u+(r<s?6:0):l===r?(s-n)/u+2:(n-r)/u+4,o*=60),i[0]=o+.5|0,i[1]=100*a+.5|0,i[2]=100*h+.5|0),i},mt=function(t,e){var i,n,r,s=t.match(gt)||[],o=0,a=s.length?"":t;for(i=0;i<s.length;i++)n=s[i],r=t.substr(o,t.indexOf(n,o)-o),o+=r.length+n.length,n=dt(n,e),3===n.length&&n.push(1),a+=r+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return a+t.substr(o)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in pt)gt+="|"+c+"\\b";gt=new RegExp(gt+")","gi"),a.colorStringFilter=function(t){var e,i=t[0]+t[1];gt.test(i)&&(e=i.indexOf("hsl(")!==-1||i.indexOf("hsla(")!==-1,t[0]=mt(t[0],e),t[1]=mt(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var vt=function(t,e,i,n){if(null==t)return function(t){return t};var r,s=e?(t.match(gt)||[""])[0]:"",o=t.split(s).join("").match(x)||[],a=t.substr(0,t.indexOf(o[0])),h=")"===t.charAt(t.length-1)?")":"",l=t.indexOf(" ")!==-1?" ":",",c=o.length,u=c>0?o[0].replace(_,""):"";return c?r=e?function(t){var e,p,f,d;if("number"==typeof t)t+=u;else if(n&&k.test(t)){for(d=t.replace(k,"|").split("|"),f=0;f<d.length;f++)d[f]=r(d[f]);return d.join(",")}if(e=(t.match(gt)||[s])[0],p=t.split(e).join("").match(x)||[],f=p.length,c>f--)for(;++f<c;)p[f]=i?p[(f-1)/2|0]:o[f];return a+p.join(l)+l+e+h+(t.indexOf("inset")!==-1?" inset":"")}:function(t){var e,s,p;if("number"==typeof t)t+=u;else if(n&&k.test(t)){for(s=t.replace(k,"|").split("|"),p=0;p<s.length;p++)s[p]=r(s[p]);return s.join(",")}if(e=t.match(x)||[],p=e.length,c>p--)for(;++p<c;)e[p]=i?e[(p-1)/2|0]:o[p];return a+e.join(l)+h}:function(t){return t}},yt=function(t){return t=t.split(","),function(e,i,n,r,s,o,a){var h,l=(i+"").split(" ");for(a={},h=0;h<4;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,a,s,o)}},_t=(W._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,s,o=this.data,a=o.proxy,h=o.firstMPT,l=1e-6;h;)e=a[h.v],h.r?e=Math.round(e):e<l&&e>-l&&(e=0),h.t[h.p]=e,h=h._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod(a.rotation,this.t):a.rotation),1===t||0===t)for(h=o.firstMPT,s=1===t?"e":"b";h;){if(i=h.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[s]=r}}else i[s]=i.s+i.xs0;h=h._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),bt=(W._parseToProxy=function(t,e,i,n,r,s){var o,a,h,l,c,u=n,p={},f={},d=i._transform,m=U;for(i._transform=null,U=e,n=c=i.parse(t,e,n,r),U=m,s&&(i._transform=d,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(n.type<=1&&(a=n.p,f[a]=n.s+n.c,p[a]=n.s,s||(l=new _t(n,"s",a,l,n.r),n.c=0),1===n.type))for(o=n.l;--o>0;)h="xn"+o,a=n.p+"_"+h,f[a]=n.data[h],p[a]=n[h],s||(l=new _t(n,h,a,l,n.rxp[h]));n=n._next}return{proxy:p,end:f,firstMPT:l,pt:c}},W.CSSPropTween=function(t,e,n,r,o,a,h,l,c,u,p){this.t=t,this.p=e,this.s=n,this.c=r,this.n=h||e,t instanceof bt||s.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?n:u,this.e=void 0===p?n+r:p,o&&(this._next=o,o._prev=this)}),xt=function(t,e,i,n,r,s){var o=new bt(t,e,i,n-i,r,(-1),s);return o.b=i,o.e=o.xs0=n,o},Et=a.parseComplex=function(t,e,i,n,r,s,o,h,l,c){i=i||s||"","function"==typeof n&&(n=n(y,v)),o=new bt(t,e,0,0,o,c?2:1,null,(!1),h,i,n),n+="",r&&gt.test(n+i)&&(n=[i,n],a.colorStringFilter(n),i=n[0],n=n[1]);var p,f,d,m,g,x,E,w,T,A,S,M,P,C=i.split(", ").join(",").split(" "),R=n.split(", ").join(",").split(" "),I=C.length,O=u!==!1;for(n.indexOf(",")===-1&&i.indexOf(",")===-1||(C=C.join(" ").replace(k,", ").split(" "),R=R.join(" ").replace(k,", ").split(" "),I=C.length),I!==R.length&&(C=(s||"").split(" "),I=C.length),o.plugin=l,o.setRatio=c,gt.lastIndex=0,p=0;p<I;p++)if(m=C[p],g=R[p],w=parseFloat(m),w||0===w)o.appendXtra("",w,lt(g,w),g.replace(b,""),O&&g.indexOf("px")!==-1,!0);else if(r&&gt.test(m))M=g.indexOf(")")+1,M=")"+(M?g.substr(M):""),P=g.indexOf("hsl")!==-1&&q,m=dt(m,P),g=dt(g,P),T=m.length+g.length>6,T&&!q&&0===g[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(R[p]).join("transparent")):(q||(T=!1),P?o.appendXtra(T?"hsla(":"hsl(",m[0],lt(g[0],m[0]),",",!1,!0).appendXtra("",m[1],lt(g[1],m[1]),"%,",!1).appendXtra("",m[2],lt(g[2],m[2]),T?"%,":"%"+M,!1):o.appendXtra(T?"rgba(":"rgb(",m[0],g[0]-m[0],",",!0,!0).appendXtra("",m[1],g[1]-m[1],",",!0).appendXtra("",m[2],g[2]-m[2],T?",":M,!0),T&&(m=m.length<4?1:m[3],o.appendXtra("",m,(g.length<4?1:g[3])-m,M,!1))),gt.lastIndex=0;else if(x=m.match(_)){if(E=g.match(b),!E||E.length!==x.length)return o;for(d=0,f=0;f<x.length;f++)S=x[f],A=m.indexOf(S,d),o.appendXtra(m.substr(d,A-d),Number(S),lt(E[f],S),"",O&&"px"===m.substr(A+S.length,2),0===f),d=A+S.length;o["xs"+o.l]+=m.substr(d)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+g:g;if(n.indexOf("=")!==-1&&o.data){for(M=o.xs0+o.data.s,p=1;p<o.l;p++)M+=o["xs"+p]+o.data["xn"+p];o.e=M+o["xs"+p]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},wt=9;for(c=bt.prototype,c.l=c.pr=0;--wt>0;)c["xn"+wt]=0,c["xs"+wt]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(t,e,i,n,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&(a||o["xs"+a])?" "+t:t||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",a>0?(o.data["xn"+a]=e+i,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new bt(o,"xn"+a,e,i,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=r,o)):(o["xs"+a]+=e+(n||""),o)};var Tt=function(t,e){e=e||{},this.p=e.prefix?$(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},At=W._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r,s=t.split(","),o=e.defaultValue;for(i=i||[o],n=0;n<s.length;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||o,r=new Tt(s[n],e)},St=W._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";At(t,{parser:function(t,i,n,r,s,o,a){var c=h.com.greensock.plugins[e];return c?(c._cssRegister(),l[n].parse(t,i,n,r,s,o,a)):(Z("Error: "+e+" js file not loaded."),s)}})}};c=Tt.prototype,c.parseComplex=function(t,e,i,n,r,s){var o,a,h,l,c,u,p=this.keyword;if(this.multi&&(k.test(i)||k.test(e)?(a=e.replace(k,"|").split("|"),h=i.replace(k,"|").split("|")):p&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,o=0;o<l;o++)e=a[o]=a[o]||this.dflt,i=h[o]=h[o]||this.dflt,p&&(c=e.indexOf(p),u=i.indexOf(p),c!==u&&(u===-1?a[o]=a[o].split(p).join(""):c===-1&&(a[o]+=" "+p)));e=a.join(", "),i=h.join(", ")}return Et(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,s)},c.parse=function(t,e,i,n,s,o,a){return this.parseComplex(t.style,this.format(tt(t,this.p,r,!1,this.dflt)),this.format(e),s,o)},a.registerSpecialProp=function(t,e,i){At(t,{parser:function(t,n,r,s,o,a,h){var l=new bt(t,r,0,0,o,2,r,(!1),i);return l.plugin=a,l.setRatio=e(t,n,s._tween,r),l},priority:i})},a.useSVGTransformAttr=!0;var Mt,Pt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ct=$("transform"),Rt=Q+"transform",It=$("transformOrigin"),Ot=null!==$("perspective"),Nt=W.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(a.defaultForce3D===!1||!Ot)&&(a.defaultForce3D||"auto")},Lt=o.SVGElement,kt=function(t,e,i){var n,r=z.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(s,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},Dt=z.documentElement||{},Ft=function(){var t,e,i,n=g||/Android/i.test(Y)&&!o.chrome;return z.createElementNS&&!n&&(t=kt("svg",Dt),e=kt("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[It]="50% 50%",e.style[Ct]="scaleX(0.5)",n=i===e.getBoundingClientRect().width&&!(d&&Ot),Dt.removeChild(t)),n}(),Bt=function(t,e,i,n,r,s){var o,h,l,c,u,p,f,d,m,g,v,y,_,b,x=t._gsTransform,E=jt(t,!0);x&&(_=x.xOrigin,b=x.yOrigin),(!n||(o=n.split(" ")).length<2)&&(f=t.getBBox(),0===f.x&&0===f.y&&f.width+f.height===0&&(f={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),e=ht(e).split(" "),o=[(e[0].indexOf("%")!==-1?parseFloat(e[0])/100*f.width:parseFloat(e[0]))+f.x,(e[1].indexOf("%")!==-1?parseFloat(e[1])/100*f.height:parseFloat(e[1]))+f.y]),i.xOrigin=c=parseFloat(o[0]),i.yOrigin=u=parseFloat(o[1]),n&&E!==Gt&&(p=E[0],f=E[1],d=E[2],m=E[3],g=E[4],v=E[5],y=p*m-f*d,y&&(h=c*(m/y)+u*(-d/y)+(d*v-m*g)/y,l=c*(-f/y)+u*(p/y)-(p*v-f*g)/y,c=i.xOrigin=o[0]=h,u=i.yOrigin=o[1]=l)),x&&(s&&(i.xOffset=x.xOffset,i.yOffset=x.yOffset,x=i),r||r!==!1&&a.defaultSmoothOrigin!==!1?(h=c-_,l=u-b,x.xOffset+=h*E[0]+l*E[2]-h,x.yOffset+=h*E[1]+l*E[3]-l):x.xOffset=x.yOffset=0),s||t.setAttribute("data-svg-origin",o.join(" "))},Ut=function(t){var e,i=G("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Dt.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ut}catch(o){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),Dt.removeChild(i),this.style.cssText=s,e},Vt=function(t){try{return t.getBBox()}catch(e){return Ut.call(t,!0)}},zt=function(t){return!(!(Lt&&t.getCTM&&Vt(t))||t.parentNode&&!t.ownerSVGElement)},Gt=[1,0,0,1,0,0],jt=function(t,e){var i,n,r,s,o,a,h=t._gsTransform||new Nt,l=1e5,c=t.style;if(Ct?n=tt(t,Rt,null,!0):t.currentStyle&&(n=t.currentStyle.filter.match(N),n=n&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),h.x||0,h.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,i&&Ct&&((a="none"===K(t).display)||!t.parentNode)&&(a&&(s=c.display,c.display="block"),t.parentNode||(o=1,Dt.appendChild(t)),n=tt(t,Rt,null,!0),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,s?c.display=s:a&&Xt(c,"display"),o&&Dt.removeChild(t)),(h.svg||t.getCTM&&zt(t))&&(i&&(c[Ct]+"").indexOf("matrix")!==-1&&(n=c[Ct],i=0),r=t.getAttribute("transform"),i&&r&&(r.indexOf("matrix")!==-1?(n=r,i=0):r.indexOf("translate")!==-1&&(n="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Gt;for(r=(n||"").match(_)||[],wt=r.length;--wt>-1;)s=Number(r[wt]),r[wt]=(o=s-(s|=0))?(o*l+(o<0?-.5:.5)|0)/l+s:s;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Ht=W.getTransform=function(t,i,n,r){if(t._gsTransform&&n&&!r)return t._gsTransform;var s,o,h,l,c,u,p=n?t._gsTransform||new Nt:new Nt,f=p.scaleX<0,d=2e-5,m=1e5,g=Ot?parseFloat(tt(t,It,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,v=parseFloat(a.defaultTransformPerspective)||0;if(p.svg=!(!t.getCTM||!zt(t)),p.svg&&(Bt(t,tt(t,It,i,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),Mt=a.useSVGTransformAttr||Ft),s=jt(t),s!==Gt){if(16===s.length){var y,_,b,x,E,w=s[0],T=s[1],A=s[2],S=s[3],M=s[4],P=s[5],C=s[6],R=s[7],I=s[8],O=s[9],N=s[10],L=s[12],k=s[13],D=s[14],F=s[11],U=Math.atan2(C,N);p.zOrigin&&(D=-p.zOrigin,L=I*D-s[12],k=O*D-s[13],D=N*D+p.zOrigin-s[14]),p.rotationX=U*B,U&&(x=Math.cos(-U),E=Math.sin(-U),y=M*x+I*E,_=P*x+O*E,b=C*x+N*E,I=M*-E+I*x,O=P*-E+O*x,N=C*-E+N*x,F=R*-E+F*x,M=y,P=_,C=b),U=Math.atan2(-A,N),p.rotationY=U*B,U&&(x=Math.cos(-U),E=Math.sin(-U),y=w*x-I*E,_=T*x-O*E,b=A*x-N*E,O=T*E+O*x,N=A*E+N*x,F=S*E+F*x,w=y,T=_,A=b),U=Math.atan2(T,w),p.rotation=U*B,U&&(x=Math.cos(-U),E=Math.sin(-U),w=w*x+M*E,_=T*x+P*E,P=T*-E+P*x,C=A*-E+C*x,T=_),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),p.scaleX=(Math.sqrt(w*w+T*T)*m+.5|0)/m,p.scaleY=(Math.sqrt(P*P+O*O)*m+.5|0)/m,p.scaleZ=(Math.sqrt(C*C+N*N)*m+.5|0)/m,p.rotationX||p.rotationY?p.skewX=0:(p.skewX=M||P?Math.atan2(M,P)*B+p.rotation:p.skewX||0,Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(f?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180))),p.perspective=F?1/(F<0?-F:F):0,p.x=L,p.y=k,p.z=D,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*w-p.yOrigin*M),p.y-=p.yOrigin-(p.yOrigin*T-p.xOrigin*P))}else if(!Ot||r||!s.length||p.x!==s[4]||p.y!==s[5]||!p.rotationX&&!p.rotationY){var V=s.length>=6,z=V?s[0]:1,G=s[1]||0,j=s[2]||0,H=V?s[3]:1;p.x=s[4]||0,p.y=s[5]||0,h=Math.sqrt(z*z+G*G),l=Math.sqrt(H*H+j*j),c=z||G?Math.atan2(G,z)*B:p.rotation||0,u=j||H?Math.atan2(j,H)*B+c:p.skewX||0,Math.abs(u)>90&&Math.abs(u)<270&&(f?(h*=-1,u+=c<=0?180:-180,c+=c<=0?180:-180):(l*=-1,u+=u<=0?180:-180)),p.scaleX=h,p.scaleY=l,p.rotation=c,p.skewX=u,Ot&&(p.rotationX=p.rotationY=p.z=0,p.perspective=v,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*z+p.yOrigin*j),p.y-=p.yOrigin-(p.xOrigin*G+p.yOrigin*H))}p.zOrigin=g;for(o in p)p[o]<d&&p[o]>-d&&(p[o]=0)}return n&&(t._gsTransform=p,p.svg&&(Mt&&t.style[Ct]?e.delayedCall(.001,function(){Xt(t.style,Ct)}):!Mt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Wt=function(t){var e,i,n=this.data,r=-n.rotation*F,s=r+n.skewX*F,o=1e5,a=(Math.cos(r)*n.scaleX*o|0)/o,h=(Math.sin(r)*n.scaleX*o|0)/o,l=(Math.sin(s)*-n.scaleY*o|0)/o,c=(Math.cos(s)*n.scaleY*o|0)/o,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var f,d,m=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==p.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,b=n.x+m*n.xPercent/100,x=n.y+v*n.yPercent/100;if(null!=n.ox&&(f=(n.oxp?m*n.ox*.01:n.ox)-m/2,d=(n.oyp?v*n.oy*.01:n.oy)-v/2,b+=f-(f*a+d*h),x+=d-(f*l+d*c)),y?(f=m/2,d=v/2,_+=", Dx="+(f-(f*a+d*h)+b)+", Dy="+(d-(f*l+d*c)+x)+")"):_+=", sizingMethod='auto expand')",e.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?u.filter=e.replace(L,_):u.filter=_+" "+e,0!==t&&1!==t||1===a&&0===h&&0===l&&1===c&&(y&&_.indexOf("Dx=0, Dy=0")===-1||T.test(e)&&100!==parseFloat(RegExp.$1)||e.indexOf(e.indexOf("Alpha"))===-1&&u.removeAttribute("filter")),!y){var E,A,S,M=g<8?1:-1;for(f=n.ieOffsetX||0,d=n.ieOffsetY||0,n.ieOffsetX=Math.round((m-((a<0?-a:a)*m+(h<0?-h:h)*v))/2+b),n.ieOffsetY=Math.round((v-((c<0?-c:c)*v+(l<0?-l:l)*m))/2+x),wt=0;wt<4;wt++)A=ot[wt],E=p[A],i=E.indexOf("px")!==-1?parseFloat(E):et(this.t,A,parseFloat(E),E.replace(w,""))||0,S=i!==n[A]?wt<2?-n.ieOffsetX:-n.ieOffsetY:wt<2?f-n.ieOffsetX:d-n.ieOffsetY,u[A]=(n[A]=Math.round(i-S*(0===wt||2===wt?1:M)))+"px"}}},Yt=W.set3DTransformRatio=W.setTransformRatio=function(t){var e,i,n,r,s,o,a,h,l,c,u,p,f,m,g,v,y,_,b,x,E,w,T,A=this.data,S=this.t.style,M=A.rotation,P=A.rotationX,C=A.rotationY,R=A.scaleX,I=A.scaleY,O=A.scaleZ,N=A.x,L=A.y,k=A.z,D=A.svg,B=A.perspective,U=A.force3D,V=A.skewY,z=A.skewX;if(V&&(z+=V,M+=V),((1===t||0===t)&&"auto"===U&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!U)&&!k&&!B&&!C&&!P&&1===O||Mt&&D||!Ot)return void(M||z||D?(M*=F,w=z*F,T=1e5,i=Math.cos(M)*R,s=Math.sin(M)*R,n=Math.sin(M-w)*-I,o=Math.cos(M-w)*I,w&&"simple"===A.skewType&&(e=Math.tan(w-V*F),e=Math.sqrt(1+e*e),n*=e,o*=e,V&&(e=Math.tan(V*F),e=Math.sqrt(1+e*e),i*=e,s*=e)),D&&(N+=A.xOrigin-(A.xOrigin*i+A.yOrigin*n)+A.xOffset,L+=A.yOrigin-(A.xOrigin*s+A.yOrigin*o)+A.yOffset,Mt&&(A.xPercent||A.yPercent)&&(g=this.t.getBBox(),N+=.01*A.xPercent*g.width,L+=.01*A.yPercent*g.height),g=1e-6,N<g&&N>-g&&(N=0),L<g&&L>-g&&(L=0)),b=(i*T|0)/T+","+(s*T|0)/T+","+(n*T|0)/T+","+(o*T|0)/T+","+N+","+L+")",D&&Mt?this.t.setAttribute("transform","matrix("+b):S[Ct]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix(":"matrix(")+b):S[Ct]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix(":"matrix(")+R+",0,0,"+I+","+N+","+L+")");if(d&&(g=1e-4,R<g&&R>-g&&(R=O=2e-5),I<g&&I>-g&&(I=O=2e-5),!B||A.z||A.rotationX||A.rotationY||(B=0)),M||z)M*=F,v=i=Math.cos(M),y=s=Math.sin(M),z&&(M-=z*F,v=Math.cos(M),y=Math.sin(M),"simple"===A.skewType&&(e=Math.tan((z-V)*F),e=Math.sqrt(1+e*e),v*=e,y*=e,A.skewY&&(e=Math.tan(V*F),e=Math.sqrt(1+e*e),i*=e,s*=e))),n=-y,o=v;else{if(!(C||P||1!==O||B||D))return void(S[Ct]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) translate3d(":"translate3d(")+N+"px,"+L+"px,"+k+"px)"+(1!==R||1!==I?" scale("+R+","+I+")":""));i=o=1,n=s=0}c=1,r=a=h=l=u=p=0,f=B?-1/B:0,m=A.zOrigin,g=1e-6,x=",",E="0",M=C*F,M&&(v=Math.cos(M),y=Math.sin(M),h=-y,u=f*-y,r=i*y,a=s*y,c=v,f*=v,i*=v,s*=v),M=P*F,M&&(v=Math.cos(M),y=Math.sin(M),e=n*v+r*y,_=o*v+a*y,l=c*y,p=f*y,r=n*-y+r*v,a=o*-y+a*v,c*=v,f*=v,n=e,o=_),1!==O&&(r*=O,a*=O,c*=O,f*=O),1!==I&&(n*=I,o*=I,l*=I,p*=I),1!==R&&(i*=R,s*=R,h*=R,u*=R),(m||D)&&(m&&(N+=r*-m,L+=a*-m,k+=c*-m+m),D&&(N+=A.xOrigin-(A.xOrigin*i+A.yOrigin*n)+A.xOffset,L+=A.yOrigin-(A.xOrigin*s+A.yOrigin*o)+A.yOffset),N<g&&N>-g&&(N=E),L<g&&L>-g&&(L=E),k<g&&k>-g&&(k=0)),b=A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix3d(":"matrix3d(",b+=(i<g&&i>-g?E:i)+x+(s<g&&s>-g?E:s)+x+(h<g&&h>-g?E:h),b+=x+(u<g&&u>-g?E:u)+x+(n<g&&n>-g?E:n)+x+(o<g&&o>-g?E:o),P||C||1!==O?(b+=x+(l<g&&l>-g?E:l)+x+(p<g&&p>-g?E:p)+x+(r<g&&r>-g?E:r),b+=x+(a<g&&a>-g?E:a)+x+(c<g&&c>-g?E:c)+x+(f<g&&f>-g?E:f)+x):b+=",0,0,0,0,1,0,",b+=N+x+L+x+k+x+(B?1+-k/B:1)+")",S[Ct]=b};c=Nt.prototype,c.x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,At("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,s,o,h){if(n._lastParsedTransform===h)return s;n._lastParsedTransform=h;var l,c=h.scale&&"function"==typeof h.scale?h.scale:0;"function"==typeof h[i]&&(l=h[i],h[i]=e),c&&(h.scale=c(y,t));var u,p,f,d,m,g,_,b,x,E=t._gsTransform,w=t.style,T=1e-6,A=Pt.length,S=h,M={},P="transformOrigin",C=Ht(t,r,!0,S.parseTransform),R=S.transform&&("function"==typeof S.transform?S.transform(y,v):S.transform);if(n._transform=C,R&&"string"==typeof R&&Ct)p=j.style,p[Ct]=R,p.display="block",p.position="absolute",z.body.appendChild(j),u=Ht(j,null,!1),C.svg&&(g=C.xOrigin,_=C.yOrigin,u.x-=C.xOffset,u.y-=C.yOffset,(S.transformOrigin||S.svgOrigin)&&(R={},Bt(t,ht(S.transformOrigin),R,S.svgOrigin,S.smoothOrigin,!0),g=R.xOrigin,_=R.yOrigin,u.x-=R.xOffset-C.xOffset,u.y-=R.yOffset-C.yOffset),(g||_)&&(b=jt(j,!0),u.x-=g-(g*b[0]+_*b[2]),u.y-=_-(g*b[1]+_*b[3]))),z.body.removeChild(j),u.perspective||(u.perspective=C.perspective),null!=S.xPercent&&(u.xPercent=ct(S.xPercent,C.xPercent)),null!=S.yPercent&&(u.yPercent=ct(S.yPercent,C.yPercent));else if("object"==typeof S){if(u={scaleX:ct(null!=S.scaleX?S.scaleX:S.scale,C.scaleX),scaleY:ct(null!=S.scaleY?S.scaleY:S.scale,C.scaleY),scaleZ:ct(S.scaleZ,C.scaleZ),x:ct(S.x,C.x),y:ct(S.y,C.y),z:ct(S.z,C.z),xPercent:ct(S.xPercent,C.xPercent),yPercent:ct(S.yPercent,C.yPercent),perspective:ct(S.transformPerspective,C.perspective)},m=S.directionalRotation,null!=m)if("object"==typeof m)for(p in m)S[p]=m[p];else S.rotation=m;
"string"==typeof S.x&&S.x.indexOf("%")!==-1&&(u.x=0,u.xPercent=ct(S.x,C.xPercent)),"string"==typeof S.y&&S.y.indexOf("%")!==-1&&(u.y=0,u.yPercent=ct(S.y,C.yPercent)),u.rotation=ut("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":"rotationZ"in S?S.rotationZ:C.rotation,C.rotation,"rotation",M),Ot&&(u.rotationX=ut("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":C.rotationX||0,C.rotationX,"rotationX",M),u.rotationY=ut("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":C.rotationY||0,C.rotationY,"rotationY",M)),u.skewX=ut(S.skewX,C.skewX),u.skewY=ut(S.skewY,C.skewY)}for(Ot&&null!=S.force3D&&(C.force3D=S.force3D,d=!0),C.skewType=S.skewType||C.skewType||a.defaultSkewType,f=C.force3D||C.z||C.rotationX||C.rotationY||u.z||u.rotationX||u.rotationY||u.perspective,f||null==S.scale||(u.scaleZ=1);--A>-1;)x=Pt[A],R=u[x]-C[x],(R>T||R<-T||null!=S[x]||null!=U[x])&&(d=!0,s=new bt(C,x,C[x],R,s),x in M&&(s.e=M[x]),s.xs0=0,s.plugin=o,n._overwriteProps.push(s.n));return R=S.transformOrigin,C.svg&&(R||S.svgOrigin)&&(g=C.xOffset,_=C.yOffset,Bt(t,ht(R),u,S.svgOrigin,S.smoothOrigin),s=xt(C,"xOrigin",(E?C:u).xOrigin,u.xOrigin,s,P),s=xt(C,"yOrigin",(E?C:u).yOrigin,u.yOrigin,s,P),g===C.xOffset&&_===C.yOffset||(s=xt(C,"xOffset",E?g:C.xOffset,C.xOffset,s,P),s=xt(C,"yOffset",E?_:C.yOffset,C.yOffset,s,P)),R="0px 0px"),(R||Ot&&f&&C.zOrigin)&&(Ct?(d=!0,x=It,R=(R||tt(t,x,r,!1,"50% 50%"))+"",s=new bt(w,x,0,0,s,(-1),P),s.b=w[x],s.plugin=o,Ot?(p=C.zOrigin,R=R.split(" "),C.zOrigin=(R.length>2&&(0===p||"0px"!==R[2])?parseFloat(R[2]):p)||0,s.xs0=s.e=R[0]+" "+(R[1]||"50%")+" 0px",s=new bt(C,"zOrigin",0,0,s,(-1),s.n),s.b=p,s.xs0=s.e=C.zOrigin):s.xs0=s.e=R):ht(R+"",C)),d&&(n._transformType=C.svg&&Mt||!f&&3!==this._transformType?2:3),l&&(h[i]=l),c&&(h.scale=c),s},prefix:!0}),At("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),At("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,o,a){e=this.format(e);var h,l,c,u,p,f,d,m,g,v,y,_,b,x,E,w,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],A=t.style;for(g=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),h=e.split(" "),l=0;l<T.length;l++)this.p.indexOf("border")&&(T[l]=$(T[l])),p=u=tt(t,T[l],r,!1,"0px"),p.indexOf(" ")!==-1&&(u=p.split(" "),p=u[0],u=u[1]),f=c=h[l],d=parseFloat(p),_=p.substr((d+"").length),b="="===f.charAt(1),b?(m=parseInt(f.charAt(0)+"1",10),f=f.substr(2),m*=parseFloat(f),y=f.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(f),y=f.substr((m+"").length)),""===y&&(y=n[i]||_),y!==_&&(x=et(t,"borderLeft",d,_),E=et(t,"borderTop",d,_),"%"===y?(p=x/g*100+"%",u=E/v*100+"%"):"em"===y?(w=et(t,"borderLeft",1,"em"),p=x/w+"em",u=E/w+"em"):(p=x+"px",u=E+"px"),b&&(f=parseFloat(p)+m+y,c=parseFloat(u)+m+y)),o=Et(A,T[l],p+" "+u,f+" "+c,!1,"0px",o);return o},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),At("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,s,o){return Et(t.style,i,this.format(tt(t,i,r,!1,"0px 0px")),this.format(e),!1,"0px",s)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),At("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,s,o){var a,h,l,c,u,p,f="background-position",d=r||K(t,null),m=this.format((d?g?d.getPropertyValue(f+"-x")+" "+d.getPropertyValue(f+"-y"):d.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(m.indexOf("%")!==-1!=(v.indexOf("%")!==-1)&&v.split(",").length<2&&(p=tt(t,"backgroundImage").replace(R,""),p&&"none"!==p)){for(a=m.split(" "),h=v.split(" "),H.setAttribute("src",p),l=2;--l>-1;)m=a[l],c=m.indexOf("%")!==-1,c!==(h[l].indexOf("%")!==-1)&&(u=0===l?t.offsetWidth-H.width:t.offsetHeight-H.height,a[l]=c?parseFloat(m)/100*u+"px":parseFloat(m)/u*100+"%");m=a.join(" ")}return this.parseComplex(t.style,m,v,s,o)},formatter:ht}),At("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",ht(t.indexOf(" ")===-1?t+" "+t:t)}}),At("perspective",{defaultValue:"0px",prefix:!0}),At("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),At("transformStyle",{prefix:!0}),At("backfaceVisibility",{prefix:!0}),At("userSelect",{prefix:!0}),At("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),At("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),At("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,s,o){var a,h,l;return g<9?(h=t.currentStyle,l=g<8?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(tt(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,s,o)}}),At("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),At("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),At("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,s,o){var a=tt(t,"borderTopWidth",r,!1,"0px"),h=this.format(e).split(" "),l=h[0].replace(w,"");return"px"!==l&&(a=parseFloat(a)/et(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(a+" "+tt(t,"borderTopStyle",r,!1,"solid")+" "+tt(t,"borderTopColor",r,!1,"#000")),h.join(" "),s,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),At("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),At("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r,s){var o=t.style,a="cssFloat"in o?"cssFloat":"styleFloat";return new bt(o,a,0,0,r,(-1),i,(!1),0,o[a],e)}});var qt=function(t){var e,i=this.t,n=i.filter||tt(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(n.indexOf("atrix(")===-1&&n.indexOf("radient(")===-1&&n.indexOf("oader(")===-1?(i.removeAttribute("filter"),e=!tt(this.data,"filter")):(i.filter=n.replace(S,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),n.indexOf("pacity")===-1?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(T,"opacity="+r))};At("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,s,o){var a=parseFloat(tt(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===tt(t,"visibility",r)&&0!==e&&(a=0),q?s=new bt(h,"opacity",a,e-a,s):(s=new bt(h,"opacity",100*a,100*(e-a),s),s.xn1=l?1:0,h.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=o,s.setRatio=qt),l&&(s=new bt(h,"visibility",0,0,s,(-1),null,(!1),0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),s.xs0="inherit",n._overwriteProps.push(s.n),n._overwriteProps.push(i)),s}});var Xt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(P,"-$1").toLowerCase())):t.removeAttribute(e))},Zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Xt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};At("className",{parser:function(t,e,n,s,o,a,h){var l,c,u,p,f,d=t.getAttribute("class")||"",m=t.style.cssText;if(o=s._classNamePT=new bt(t,n,0,0,o,2),o.setRatio=Zt,o.pr=-11,i=!0,o.b=d,c=nt(t,r),u=t._gsClassPT){for(p={},f=u.data;f;)p[f.p]=1,f=f._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),l=rt(t,c,nt(t),h,p),t.setAttribute("class",d),o.data=l.firstMPT,t.style.cssText=m,o=o.xfirst=s.parse(t,l.difs,o,a)}});var Qt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,s,o=this.t.style,a=l.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),n=e.length;--n>-1;)i=e[n],l[i]&&(l[i].parse===a?r=!0:i="transformOrigin"===i?It:l[i].p),Xt(o,i);r&&(Xt(o,Ct),s=this.t._gsTransform,s&&(s.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(At("clearProps",{parser:function(t,e,n,r,s){return s=new bt(t,n,0,0,s,2),s.setRatio=Qt,s.e=e,s.pr=-10,s.data=r._tween,i=!0,s}}),c="bezier,throwProps,physicsProps,physics2D".split(","),wt=c.length;wt--;)St(c[wt]);c=a.prototype,c._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(t,e,o,h){if(!t.nodeType)return!1;this._target=v=t,this._tween=o,this._vars=e,y=h,u=e.autoRound,i=!1,n=e.suffixMap||a.suffixMap,r=K(t,""),s=this._overwriteProps;var c,d,g,_,b,x,E,w,T,S=t.style;if(p&&""===S.zIndex&&(c=tt(t,"zIndex",r),"auto"!==c&&""!==c||this._addLazySet(S,"zIndex",0)),"string"==typeof e&&(_=S.cssText,c=nt(t,r),S.cssText=_+";"+e,c=rt(t,c,nt(t)).difs,!q&&A.test(e)&&(c.opacity=parseFloat(RegExp.$1)),e=c,S.cssText=_),e.className?this._firstPT=d=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=d=this.parse(t,e,null),this._transformType){for(T=3===this._transformType,Ct?f&&(p=!0,""===S.zIndex&&(E=tt(t,"zIndex",r),"auto"!==E&&""!==E||this._addLazySet(S,"zIndex",0)),m&&this._addLazySet(S,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(T?"visible":"hidden"))):S.zoom=1,g=d;g&&g._next;)g=g._next;w=new bt(t,"transform",0,0,null,2),this._linkCSSP(w,null,g),w.setRatio=Ct?Yt:Wt,w.data=this._transform||Ht(t,r,!0),w.tween=o,w.pr=-1,s.pop()}if(i){for(;d;){for(x=d._next,g=_;g&&g.pr>d.pr;)g=g._next;(d._prev=g?g._prev:b)?d._prev._next=d:_=d,(d._next=g)?g._prev=d:b=d,d=x}this._firstPT=_}return!0},c.parse=function(t,e,i,s){var o,a,h,c,p,f,d,m,g,_,b=t.style;for(o in e)f=e[o],"function"==typeof f&&(f=f(y,v)),a=l[o],a?i=a.parse(t,f,o,this,i,s,e):(p=tt(t,o,r)+"",g="string"==typeof f,"color"===o||"fill"===o||"stroke"===o||o.indexOf("Color")!==-1||g&&M.test(f)?(g||(f=dt(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),i=Et(b,o,p,f,!0,"transparent",i,0,s)):g&&D.test(f)?i=Et(b,o,p,f,!0,null,i,0,s):(h=parseFloat(p),d=h||0===h?p.substr((h+"").length):"",""!==p&&"auto"!==p||("width"===o||"height"===o?(h=at(t,o,r),d="px"):"left"===o||"top"===o?(h=it(t,o,r),d="px"):(h="opacity"!==o?0:1,d="")),_=g&&"="===f.charAt(1),_?(c=parseInt(f.charAt(0)+"1",10),f=f.substr(2),c*=parseFloat(f),m=f.replace(w,"")):(c=parseFloat(f),m=g?f.replace(w,""):""),""===m&&(m=o in n?n[o]:d),f=c||0===c?(_?c+h:c)+m:e[o],d!==m&&""!==m&&(c||0===c)&&h&&(h=et(t,o,h,d),"%"===m?(h/=et(t,o,100,"%")/100,e.strictUnits!==!0&&(p=h+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?h/=et(t,o,1,m):"px"!==m&&(c=et(t,o,c,m),m="px"),_&&(c||0===c)&&(f=c+h+m)),_&&(c+=h),!h&&0!==h||!c&&0!==c?void 0!==b[o]&&(f||f+""!="NaN"&&null!=f)?(i=new bt(b,o,c||h||0,0,i,(-1),o,(!1),0,p,f),i.xs0="none"!==f||"display"!==o&&o.indexOf("Style")===-1?f:p):Z("invalid "+o+" tween value: "+e[o]):(i=new bt(b,o,h,c-h,i,0,o,u!==!1&&("px"===m||"zIndex"===o),0,p,f),i.xs0=m))),s&&i&&!i.plugin&&(i.plugin=s);return i},c.setRatio=function(t){var e,i,n,r=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):e<s&&e>-s&&(e=0),r.type)if(1===r.type)if(n=r.l,2===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else r.type===-1?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&r.type!==-1)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},c._enableTransforms=function(t){this._transform=this._transform||Ht(this._target,r,!0),this._transformType=this._transform.svg&&Mt||!t&&3!==this._transformType?2:3};var Jt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(t,e,i){var n=this._firstPT=new bt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Jt,n.data=this},c._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},c._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},c._kill=function(e){var i,n,r,s=e;if(e.autoAlpha||e.alpha){s={};for(n in e)s[n]=e[n];s.opacity=1,s.autoAlpha&&(s.visibility=1)}for(e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(e),n=i.plugin),i=i._next;return t.prototype._kill.call(this,s)};var $t=function(t,e,i){var n,r,s,o;if(t.slice)for(r=t.length;--r>-1;)$t(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)s=n[r],o=s.type,s.style&&(e.push(nt(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||$t(s,e,i)};return a.cascadeTo=function(t,i,n){var r,s,o,a,h=e.to(t,i,n),l=[h],c=[],u=[],p=[],f=e._internals.reservedProps;for(t=h._targets||h.target,$t(t,c,p),h.render(i,!0,!0),$t(t,u),h.render(0,!0,!0),h._enabled(!0),r=p.length;--r>-1;)if(s=rt(p[r],c[r],u[r]),s.firstMPT){s=s.difs;for(o in n)f[o]&&(s[o]=n[o]);a={};for(o in s)a[o]=c[r][o];l.push(e.fromTo(p[r],i,a,s))}return l},t.activate([a]),a},!0),function(){var t=o._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},i=t.prototype;i._onInitAllProps=function(){for(var t,i,n,r=this._tween,s=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),o=s.length,a={},h=r._propLookup.roundProps;--o>-1;)a[s[o]]=Math.round;for(o=s.length;--o>-1;)for(t=s[o],i=r._firstPT;i;)n=i._next,i.pg?i.t._mod(a):i.n===t&&(2===i.f&&i.t?e(i.t._firstPT):(this._add(i.t,t,i.s,i.c),n&&(n._prev=i._prev),i._prev?i._prev._next=n:r._firstPT===i&&(r._firstPT=n),i._next=i._prev=null,r._propLookup[t]=h)),i=n;return!1},i._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,Math.round),this._overwriteProps.push(e)}}(),function(){o._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,i,n){var r,s;if("function"!=typeof t.setAttribute)return!1;for(r in e)s=e[r],"function"==typeof s&&(s=s(n,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",s+"",r,!1,r),this._overwriteProps.push(r);return!0}})}(),o._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,i,n){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,s,o,a,h,l,c=e.useRadians===!0?2*Math.PI:360,u=1e-6;for(r in e)"useRadians"!==r&&(a=e[r],"function"==typeof a&&(a=a(n,t)),l=(a+"").split("_"),s=l[0],o=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),a=this.finals[r]="string"==typeof s&&"="===s.charAt(1)?o+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,h=a-o,l.length&&(s=l.join("_"),s.indexOf("short")!==-1&&(h%=c,h!==h%(c/2)&&(h=h<0?h+c:h-c)),s.indexOf("_cw")!==-1&&h<0?h=(h+9999999999*c)%c-(h/c|0)*c:s.indexOf("ccw")!==-1&&h>0&&(h=(h-9999999999*c)%c-(h/c|0)*c)),(h>u||h<-u)&&(this._addTween(t,r,o,o+h,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,o._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r=o.GreenSockGlobals||o,s=r.com.greensock,a=2*Math.PI,h=Math.PI/2,l=s._class,c=function(e,i){var n=l("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},u=t.register||function(){},p=function(t,e,i,n,r){var s=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return u(s,t),s},f=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},d=function(e,i){var n=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},m=p("Back",d("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),d("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),d("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),v=g.prototype=new t;return v.constructor=g,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),v.config=g.config=function(t,e,i){return new g(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),v=e.prototype=new t,v.constructor=e,v.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},v.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var i,n,r,s,o,a,h=e.taper||"none",l=[],c=0,u=0|(e.points||20),p=u,d=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=d?Math.random():1/u*p,n=g?g.getRatio(i):i,"none"===h?r=v:"out"===h?(s=1-i,r=s*s*v):"in"===h?r=i*i*v:i<.5?(s=2*i,r=s*s*.5*v):(s=2*(1-i),r=s*s*.5*v),d?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:n<0&&(n=0)),l[c++]={x:i,y:n};for(l.sort(function(t,e){return t.x-e.x}),a=new f(1,1,null),p=u;--p>-1;)o=l[p],a=new f(o.x,o.y,a);this._prev=new f(0,0,0!==a.t?a:a.next)},!0),v=i.prototype=new t,v.constructor=i,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new i(t)},i.ease=new i,p("Bounce",c("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),c("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),c("BounceInOut",function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t=t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),p("Circ",c("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),c("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),c("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,n){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t,e){return new r(t,e)},r},p("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),n("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),n("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),p("Expo",c("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),c("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),c("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),p("Sine",c("SineOut",function(t){return Math.sin(t*h)}),c("SineIn",function(t){return-Math.cos(t*h)+1}),c("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(r.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),m},!0)}),o._gsDefine&&o._gsQueue.pop()(),function(s,o){"use strict";var a={},h=s.document,l=s.GreenSockGlobals=s.GreenSockGlobals||s;if(!l.TweenLite){var c,u,p,f,d,m=function(t){var e,i=t.split("."),n=l;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},g=m("com.greensock"),v=1e-10,y=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},_=function(){},b=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),x={},E=function(s,h,c,u){this.sc=x[s]?x[s].sc:[],x[s]=this,this.gsClass=null,this.func=c;var p=[];this.check=function(f){for(var d,g,v,y,_,b=h.length,w=b;--b>-1;)(d=x[h[b]]||new E(h[b],[])).gsClass?(p[b]=d.gsClass,w--):f&&d.sc.push(this);if(0===w&&c){if(g=("com.greensock."+s).split("."),v=g.pop(),y=m(g.join("."))[v]=this.gsClass=c.apply(c,p),u)if(l[v]=a[v]=y,_="undefined"!=typeof t&&t.exports,!_&&i(7))n=[],r=function(){return y}.apply(e,n),!(void 0!==r&&(t.exports=r));else if(_)if(s===o){t.exports=a[o]=y;for(b in a)y[b]=a[b]}else a[o]&&(a[o][v]=y);for(b=0;b<this.sc.length;b++)this.sc[b].check()}},this.check(!0)},w=s._gsDefine=function(t,e,i,n){return new E(t,e,i,n)},T=g._class=function(t,e,i){return e=e||function(){},w(t,[],function(){return e},i),e};w.globals=l;var A=[0,0,1,1],S=T("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?A.concat(e):A},!0),M=S.map={},P=S.register=function(t,e,i,n){for(var r,s,o,a,h=e.split(","),l=h.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(s=h[l],r=n?T("easing."+s,null,!0):g.easing[s]||{},o=c.length;--o>-1;)a=c[o],M[s+"."+a]=M[a+s]=r[a]=t.getRatio?t:t[a]||new t};for(p=S.prototype,p._calcEnd=!1,p.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],u=c.length;--u>-1;)p=c[u]+",Power"+u,P(new S(null,null,1,u),p,"easeOut",!0),P(new S(null,null,2,u),p,"easeIn"+(0===u?",easeNone":"")),P(new S(null,null,3,u),p,"easeInOut");M.linear=g.easing.Linear.easeIn,M.swing=g.easing.Quad.easeInOut;var C=T("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});p=C.prototype,p.addEventListener=function(t,e,i,n,r){r=r||0;var s,o,a=this._listeners[t],h=0;for(this!==f||d||f.wake(),null==a&&(this._listeners[t]=a=[]),o=a.length;--o>-1;)s=a[o],s.c===e&&s.s===i?a.splice(o,1):0===h&&s.pr<r&&(h=o+1);a.splice(h,0,{c:e,s:i,up:n,pr:r})},p.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},p.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,e>1&&(r=r.slice(0)),i=this._eventTarget;--e>-1;)n=r[e],n&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var R=s.requestAnimationFrame,I=s.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},N=O();for(c=["ms","moz","webkit","o"],u=c.length;--u>-1&&!R;)R=s[c[u]+"RequestAnimationFrame"],I=s[c[u]+"CancelAnimationFrame"]||s[c[u]+"CancelRequestAnimationFrame"];T("Ticker",function(t,e){var i,n,r,s,o,a=this,l=O(),c=!(e===!1||!R)&&"auto",u=500,p=33,m="tick",g=function(t){var e,h,c=O()-N;c>u&&(l+=c-p),N+=c,a.time=(N-l)/1e3,e=a.time-o,(!i||e>0||t===!0)&&(a.frame++,o+=e+(e>=s?.004:s-e),h=!0),t!==!0&&(r=n(g)),h&&a.dispatchEvent(m)};C.call(a),a.time=a.frame=0,a.tick=function(){g(!0)},a.lagSmoothing=function(t,e){u=t||1/v,p=Math.min(e,u,0)},a.sleep=function(){null!=r&&(c&&I?I(r):clearTimeout(r),n=_,r=null,a===f&&(d=!1))},a.wake=function(t){null!==r?a.sleep():t?l+=-N+(N=O()):a.frame>10&&(N=O()-u+5),n=0===i?_:c&&R?R:function(t){return setTimeout(t,1e3*(o-a.time)+1|0)},a===f&&(d=!0),g(2)},a.fps=function(t){return arguments.length?(i=t,s=1/(i||60),o=this.time+s,void a.wake()):i},a.useRAF=function(t){return arguments.length?(a.sleep(),c=t,void a.fps(i)):c},a.fps(t),setTimeout(function(){"auto"===c&&a.frame<5&&"hidden"!==h.visibilityState&&a.useRAF(!1)},1500)}),p=g.Ticker.prototype=new g.events.EventDispatcher,p.constructor=g.Ticker;var L=T("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,K){d||f.wake();var i=this.vars.useFrames?$:K;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});f=L.ticker=new g.Ticker,p=L.prototype,p._dirty=p._gc=p._initted=p._paused=!1,p._totalTime=p._time=0,p._rawPrevTime=-1,p._next=p._last=p._onUpdate=p._timeline=p.timeline=null,p._paused=!1;var k=function(){d&&O()-N>2e3&&f.wake(),setTimeout(k,2e3)};k(),p.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},p.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},p.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},p.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},p.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},p.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},p.render=function(t,e,i){},p.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},p.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale},p._enabled=function(t,e){return d||f.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},p._kill=function(t,e){return this._enabled(!1,!1)},p.kill=function(t,e){return this._kill(t,e),this},p._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},p._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},p._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this,s=n?n.length:0;switch(s){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},p.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=b(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},p.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},p.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},p.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},p.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},p.totalTime=function(t,e,i){if(d||f.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(V.length&&et(),this.render(t,e,!1),V.length&&et())}return this},p.progress=p.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},p.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},p.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},p.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||v,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},p.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},p.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(d||t||f.wake(),e=n.rawTime(),i=e-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var D=T("core.SimpleTimeline",function(t){L.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});p=D.prototype=new L,p.constructor=D,p.kill()._gc=!1,p._first=p._last=p._recent=null,p._sortChildren=!1,p.add=p.insert=function(t,e,i,n){var r,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(s=t._startTime;r&&r._startTime>s;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},p._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},p.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},p.rawTime=function(){return d||f.wake(),this._totalTime};var F=T("TweenLite",function(t,e,i){if(L.call(this,e,i),this.render=F.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:F.selector(t)||t;var n,r,o,a=t.jquery||t.length&&t!==s&&t[0]&&(t[0]===s||t[0].nodeType&&t[0].style&&!t.nodeType),h=this.vars.overwrite;
if(this._overwrite=h=null==h?J[F.defaultOverwrite]:"number"==typeof h?h>>0:J[h],(a||t instanceof Array||t.push&&b(t))&&"number"!=typeof t[0])for(this._targets=o=y(t),this._propLookup=[],this._siblings=[],n=0;n<o.length;n++)r=o[n],r?"string"!=typeof r?r.length&&r!==s&&r[0]&&(r[0]===s||r[0].nodeType&&r[0].style&&!r.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(y(r))):(this._siblings[n]=it(r,this,!1),1===h&&this._siblings[n].length>1&&rt(r,this,null,1,this._siblings[n])):(r=o[n--]=F.selector(r),"string"==typeof r&&o.splice(n+1,1)):o.splice(n--,1);else this._propLookup={},this._siblings=it(t,this,!1),1===h&&this._siblings.length>1&&rt(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-v,this.render(Math.min(0,-this._delay)))},!0),B=function(t){return t&&t.length&&t!==s&&t[0]&&(t[0]===s||t[0].nodeType&&t[0].style&&!t.nodeType)},U=function(t,e){var i,n={};for(i in t)Q[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!q[i]||q[i]&&q[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};p=F.prototype=new L,p.constructor=F,p.kill()._gc=!1,p.ratio=0,p._firstPT=p._targets=p._overwrittenProps=p._startAt=null,p._notifyPluginsOfEnabled=p._lazy=!1,F.version="1.19.1",F.defaultEase=p._ease=new S(null,null,1,1),F.defaultOverwrite="auto",F.ticker=f,F.autoSleep=120,F.lagSmoothing=function(t,e){f.lagSmoothing(t,e)},F.selector=s.$||s.jQuery||function(t){var e=s.$||s.jQuery;return e?(F.selector=e,e(t)):"undefined"==typeof h?t:h.querySelectorAll?h.querySelectorAll(t):h.getElementById("#"===t.charAt(0)?t.substr(1):t)};var V=[],z={},G=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,j=function(t){for(var e,i=this._firstPT,n=1e-6;i;)e=i.blob?1===t?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<n&&e>-n&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},H=function(t,e,i,n){var r,s,o,a,h,l,c,u=[],p=0,f="",d=0;for(u.start=t,u.end=e,t=u[0]=t+"",e=u[1]=e+"",i&&(i(u),t=u[0],e=u[1]),u.length=0,r=t.match(G)||[],s=e.match(G)||[],n&&(n._next=null,n.blob=1,u._firstPT=u._applyPT=n),h=s.length,a=0;a<h;a++)c=s[a],l=e.substr(p,e.indexOf(c,p)-p),f+=l||!a?l:",",p+=l.length,d?d=(d+1)%5:"rgba("===l.substr(-5)&&(d=1),c===r[a]||r.length<=a?f+=c:(f&&(u.push(f),f=""),o=parseFloat(r[a]),u.push(o),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:o,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-o)||0,f:0,m:d&&d<4?Math.round:0}),p+=c.length;return f+=e.substr(p),f&&u.push(f),u.setRatio=j,u},W=function(t,e,i,n,r,s,o,a,h){"function"==typeof n&&(n=n(h||0,t));var l,c=typeof t[e],u="function"!==c?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),p="get"!==i?i:u?o?t[u](o):t[u]():t[e],f="string"==typeof n&&"="===n.charAt(1),d={t:t,p:e,s:p,f:"function"===c,pg:0,n:r||e,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:f?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-p||0};if(("number"!=typeof p||"number"!=typeof n&&!f)&&(o||isNaN(p)||!f&&isNaN(n)||"boolean"==typeof p||"boolean"==typeof n?(d.fp=o,l=H(p,f?d.s+d.c:n,a||F.defaultStringFilter,d),d={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(d.s=parseFloat(p),f||(d.c=parseFloat(n)-d.s||0))),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d},Y=F._internals={isArray:b,isSelector:B,lazyTweens:V,blobDif:H},q=F._plugins={},X=Y.tweenLookup={},Z=0,Q=Y.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},J={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},$=L._rootFramesTimeline=new D,K=L._rootTimeline=new D,tt=30,et=Y.lazyRender=function(){var t,e=V.length;for(z={};--e>-1;)t=V[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);V.length=0};K._startTime=f.time,$._startTime=f.frame,K._active=$._active=!0,setTimeout(et,1),L._updateRoot=F.render=function(){var t,e,i;if(V.length&&et(),K.render((f.time-K._startTime)*K._timeScale,!1,!1),$.render((f.frame-$._startTime)*$._timeScale,!1,!1),V.length&&et(),f.frame>=tt){tt=f.frame+(parseInt(F.autoSleep,10)||120);for(i in X){for(e=X[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete X[i]}if(i=K._first,(!i||i._paused)&&F.autoSleep&&!$._first&&1===f._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||f.sleep()}}},f.addEventListener("tick",L._updateRoot);var it=function(t,e,i){var n,r,s=t._gsTweenID;if(X[s||(t._gsTweenID=s="t"+Z++)]||(X[s]={target:t,tweens:[]}),e&&(n=X[s].tweens,n[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return X[s].tweens},nt=function(t,e,i,n){var r,s,o=t.vars.onOverwrite;return o&&(r=o(t,e,i,n)),o=F.onOverwrite,o&&(s=o(t,e,i,n)),r!==!1&&s!==!1},rt=function(t,e,i,n,r){var s,o,a,h;if(1===n||n>=4){for(h=r.length,s=0;s<h;s++)if((a=r[s])!==e)a._gc||a._kill(null,t,e)&&(o=!0);else if(5===n)break;return o}var l,c=e._startTime+v,u=[],p=0,f=0===e._duration;for(s=r.length;--s>-1;)(a=r[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||st(e,0,f),0===st(a,l,f)&&(u[p++]=a)):a._startTime<=c&&a._startTime+a.totalDuration()/a._timeScale>c&&((f||!a._initted)&&c-a._startTime<=2e-10||(u[p++]=a)));for(s=p;--s>-1;)if(a=u[s],2===n&&a._kill(i,t,e)&&(o=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!nt(a,e))continue;a._enabled(!1,!1)&&(o=!0)}return o},st=function(t,e,i){for(var n=t._timeline,r=n._timeScale,s=t._startTime;n._timeline;){if(s+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return s/=r,s>e?s-e:i&&s===e||!t._initted&&s-e<2*v?v:(s+=t.totalDuration()/t._timeScale/r)>e+v?0:s-e-v};p._init=function(){var t,e,i,n,r,s,o=this.vars,a=this._overwrittenProps,h=this._duration,l=!!o.immediateRender,c=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in o.startAt)r[n]=o.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&o.lazy!==!1,r.startAt=r.delay=null,this._startAt=F.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(o.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(n in o)Q[n]&&"autoCSS"!==n||(i[n]=o[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&o.lazy!==!1,i.immediateRender=l,this._startAt=F.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof S?c:"function"==typeof c?new S(c,o.easeParams):M[c]||F.defaultEase:F.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(s=this._targets.length,t=0;t<s;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&F._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onUpdate,this._initted=!0},p._initProps=function(t,e,i,n,r){var o,a,h,l,c,u;if(null==t)return!1;z[t._gsTweenID]&&et(),this.vars.css||t.style&&t!==s&&t.nodeType&&q.css&&this.vars.autoCSS!==!1&&U(this.vars,t);for(o in this.vars)if(u=this.vars[o],Q[o])u&&(u instanceof Array||u.push&&b(u))&&u.join("").indexOf("{self}")!==-1&&(this.vars[o]=u=this._swapSelfInParams(u,this));else if(q[o]&&(l=new q[o])._onInitTween(t,this.vars[o],this,r)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority,m:0},a=l._overwriteProps.length;--a>-1;)e[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(h=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else e[o]=W.call(this,t,o,"get",u,o,0,null,this.vars.stringFilter,r);return n&&this._kill(n,t)?this._initProps(t,e,i,n,r):this._overwrite>1&&this._firstPT&&i.length>1&&rt(t,this,e,this._overwrite,i)?(this._kill(e,t),this._initProps(t,e,i,n,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(z[t._gsTweenID]=!0),h)},p.render=function(t,e,i){var n,r,s,o,a=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h-1e-7&&t>=0)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(l<0||t<=0&&t>=-1e-7||l===v&&"isPause"!==this.data)&&l!==t&&(i=!0,l>v&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||l===t?t:v);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===h&&l>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==v||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=o=!e||t||l===t?t:v)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var c=t/h,u=this._easeType,p=this._easePower;(1===u||3===u&&c>=.5)&&(c=1-c),3===u&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),1===u?this.ratio=1-c:2===u?this.ratio=c:t/h<.5?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,V.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/h):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==h||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==a||n||i)&&this._callback("onUpdate")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===h&&this._rawPrevTime===v&&o!==v&&(this._rawPrevTime=0)))}},p._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:F.selector(e)||e;var n,r,s,o,a,h,l,c,u,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((b(e)||B(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(h=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,c=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(F.onOverwrite||this.vars.onOverwrite)){for(s in l)a[s]&&(u||(u=[]),u.push(s));if((u||!t)&&!nt(this,i,e,u))return!1}for(s in l)(o=a[s])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,h=!0),o.pg&&o.t._kill(l)&&(h=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[s]),c&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},p.invalidate=function(){return this._notifyPluginsOfEnabled&&F._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-v,this.render(Math.min(0,-this._delay))),this},p._enabled=function(t,e){if(d||f.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=it(n[i],this,!0);else this._siblings=it(this.target,this,!0)}return L.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&F._onPluginEvent(t?"_onEnable":"_onDisable",this)},F.to=function(t,e,i){return new F(t,e,i)},F.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new F(t,e,i)},F.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new F(t,e,n)},F.delayedCall=function(t,e,i,n,r){return new F(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},F.set=function(t,e){return new F(t,0,e)},F.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:F.selector(t)||t;var i,n,r,s;if((b(t)||B(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(F.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(s=n[i],r=i;--r>-1;)s===n[r]&&n.splice(i,1)}else for(n=it(t).concat(),i=n.length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},F.killTweensOf=F.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=F.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var ot=T("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=ot.prototype},!0);if(p=ot.prototype,ot.version="1.19.0",ot.API=2,p._firstPT=null,p._addTween=W,p.setRatio=j,p._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},p._mod=p._roundProps=function(t){for(var e,i=this._firstPT;i;)e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")],e&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},F._onPluginEvent=function(t,e){var i,n,r,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:s)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:s=a,a=o}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},ot.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===ot.API&&(q[(new t[e])._propName]=t[e]);return!0},w.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=T("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ot.call(this,i,n),this._overwriteProps=r||[]},t.global===!0),a=o.prototype=new ot(i);a.constructor=o,o.API=t.API;for(e in s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,ot.activate([o]),o},c=s._gsQueue){for(u=0;u<c.length;u++)c[u]();for(p in x)x[p].func||s.console.log("GSAP encountered missing dependency: "+p)}d=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof s?s:this||window,"TweenMax")}).call(e,function(){return this}())},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){var n=i(9);i(10),i(11),i(12),i(13),t.exports=n},function(t,e){var i=function(){function t(t){return null==t?String(t):X[Z.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function s(t){return r(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function o(t){var e=!!t&&"length"in t&&t.length,n=T.type(t);return"function"!=n&&!i(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t){return R.call(t,function(t){return null!=t})}function h(t){return t.length>0?T.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(t){return t in L?L[t]:L[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){return"number"!=typeof e||k[l(t)]?e:e+"px"}function p(t){var e,i;return N[t]||(e=O.createElement(t),O.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),N[t]=i),N[t]}function f(t){return"children"in t?I.call(t.children):T.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function d(t,e){var i,n=t?t.length:0;for(i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function m(t,e,i){for(w in e)i&&(s(e[w])||K(e[w]))?(s(e[w])&&!s(t[w])&&(t[w]={}),K(e[w])&&!K(t[w])&&(t[w]=[]),m(t[w],e[w],i)):e[w]!==E&&(t[w]=e[w])}function g(t,e){return null==e?T(t):T(t).filter(e)}function v(t,i,n,r){return e(i)?i.call(t,n,r):i}function y(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function _(t,e){var i=t.className||"",n=i&&i.baseVal!==E;return e===E?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?T.parseJSON(t):t):t}catch(e){return t}}function x(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)x(t.childNodes[i],e)}var E,w,T,A,S,M,P=[],C=P.concat,R=P.filter,I=P.slice,O=window.document,N={},L={},k={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,F=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,B=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,U=/^(?:body|html)$/i,V=/([A-Z])/g,z=["val","css","html","text","data","width","height","offset"],G=["after","prepend","before","append"],j=O.createElement("table"),H=O.createElement("tr"),W={tr:O.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:H,th:H,"*":O.createElement("div")},Y=/complete|loaded|interactive/,q=/^[\w-]*$/,X={},Z=X.toString,Q={},J=O.createElement("div"),$={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(t){return t instanceof Array};return Q.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,r=t.parentNode,s=!r;return s&&(r=J).appendChild(t),n=~Q.qsa(r,e).indexOf(t),s&&J.removeChild(t),n},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},M=function(t){return R.call(t,function(e,i){return t.indexOf(e)==i})},Q.fragment=function(t,e,i){var n,r,o;return F.test(t)&&(n=T(O.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(B,"<$1></$2>")),e===E&&(e=D.test(t)&&RegExp.$1),e in W||(e="*"),o=W[e],o.innerHTML=""+t,n=T.each(I.call(o.childNodes),function(){o.removeChild(this)})),s(i)&&(r=T(n),T.each(i,function(t,e){z.indexOf(t)>-1?r[t](e):r.attr(t,e)})),n},Q.Z=function(t,e){return new d(t,e)},Q.isZ=function(t){return t instanceof Q.Z},Q.init=function(t,i){var n;if(!t)return Q.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&D.test(t))n=Q.fragment(t,RegExp.$1,i),t=null;else{if(i!==E)return T(i).find(t);n=Q.qsa(O,t)}else{if(e(t))return T(O).ready(t);if(Q.isZ(t))return t;if(K(t))n=a(t);else if(r(t))n=[t],t=null;else if(D.test(t))n=Q.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==E)return T(i).find(t);n=Q.qsa(O,t)}}return Q.Z(n,t)},T=function(t,e){return Q.init(t,e)},T.extend=function(t){var e,i=I.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},Q.qsa=function(t,e){var i,n="#"==e[0],r=!n&&"."==e[0],s=n||r?e.slice(1):e,o=q.test(s);return t.getElementById&&o&&n?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:I.call(o&&!n&&t.getElementsByClassName?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},T.contains=O.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},T.type=t,T.isFunction=e,T.isWindow=i,T.isArray=K,T.isPlainObject=s,T.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},T.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},T.inArray=function(t,e,i){return P.indexOf.call(e,t,i)},T.camelCase=S,T.trim=function(t){return null==t?"":String.prototype.trim.call(t)},T.uuid=0,T.support={},T.expr={},T.noop=function(){},T.map=function(t,e){var i,n,r,s=[];if(o(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&s.push(i);else for(r in t)i=e(t[r],r),null!=i&&s.push(i);return h(s)},T.each=function(t,e){var i,n;if(o(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},T.grep=function(t,e){return R.call(t,e)},window.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),T.fn={constructor:Q.Z,length:0,forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,splice:P.splice,indexOf:P.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=Q.isZ(e)?e.toArray():e;return C.apply(Q.isZ(this)?this.toArray():this,i)},map:function(t){return T(T.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return T(I.apply(this,arguments))},ready:function(t){return Y.test(O.readyState)&&O.body?t(T):O.addEventListener("DOMContentLoaded",function(){t(T)},!1),this},get:function(t){return t===E?I.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):T(R.call(this,function(e){return Q.matches(e,t)}))},add:function(t,e){return T(M(this.concat(T(t,e))))},is:function(t){return this.length>0&&Q.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==E)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):o(t)&&e(t.item)?I.call(t):T(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return T(i)},has:function(t){return this.filter(function(){return r(t)?T.contains(this,t):T(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:T(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:T(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?T(t).filter(function(){var t=this;return P.some.call(i,function(e){return T.contains(e,t)})}):1==this.length?T(Q.qsa(this[0],t)):this.map(function(){return Q.qsa(this,t)}):T()},closest:function(t,e){var i=[],r="object"==typeof t&&T(t);return this.each(function(s,o){for(;o&&!(r?r.indexOf(o)>=0:Q.matches(o,t));)o=o!==e&&!n(o)&&o.parentNode;o&&i.indexOf(o)<0&&i.push(o)}),T(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=T.map(i,function(t){if((t=t.parentNode)&&!n(t)&&e.indexOf(t)<0)return e.push(t),t});return g(e,t)},parent:function(t){return g(M(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||I.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return R.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return T.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=T(t).get(0),r=n.parentNode||this.length>1;return this.each(function(e){T(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){T(this[0]).before(t=T(t));for(var e;(e=t.children()).length;)t=e.first();T(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=T(this),r=n.contents(),s=i?t.call(this,e):t;r.length?r.wrapAll(s):n.append(s)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=T(this);(t===E?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return T(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return T(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;T(this).empty().append(v(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=v(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(r(t))for(w in t)y(this,w,t[w]);else y(this,t,v(this,e,i,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:E},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){y(this,t)},this)})},prop:function(t,e){return t=$[t]||t,1 in arguments?this.each(function(i){this[t]=v(this,e,i,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=$[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(V,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?b(n):E},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=v(this,t,e,this.value)})):this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=T(this),n=v(this,t,e,i.offset()),r=i.offsetParent().offset(),s={top:n.top-r.top,left:n.left-r.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;if(O.documentElement!==this[0]&&!T.contains(O.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[S(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(K(e)){if(!n)return;var r={},s=getComputedStyle(n,"");return T.each(e,function(t,e){r[e]=n.style[S(e)]||s.getPropertyValue(e)}),r}}var o="";if("string"==t(e))i||0===i?o=l(e)+":"+u(e,i):this.each(function(){this.style.removeProperty(l(e))});else for(w in e)e[w]||0===e[w]?o+=l(w)+":"+u(w,e[w])+";":this.each(function(){this.style.removeProperty(l(w))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(T(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&P.some.call(this,function(t){return this.test(_(t))},c(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){A=[];var i=_(this),n=v(this,t,e,i);n.split(/\s+/g).forEach(function(t){T(this).hasClass(t)||A.push(t)},this),A.length&&_(this,i+(i?" ":"")+A.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===E)return _(this,"");A=_(this),v(this,t,e,A).split(/\s+/g).forEach(function(t){A=A.replace(c(t)," ")}),_(this,A.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=T(this),r=v(this,t,i,_(this));r.split(/\s+/g).forEach(function(t){(e===E?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===E?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===E?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=U.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(T(t).css("margin-top"))||0,i.left-=parseFloat(T(t).css("margin-left"))||0,n.top+=parseFloat(T(e[0]).css("border-top-width"))||0,n.left+=parseFloat(T(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||O.body;t&&!U.test(t.nodeName)&&"static"==T(t).css("position");)t=t.offsetParent;return t})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});T.fn[t]=function(r){var s,o=this[0];return r===E?i(o)?o["inner"+e]:n(o)?o.documentElement["scroll"+e]:(s=this.offset())&&s[t]:this.each(function(e){o=T(this),o.css(t,v(this,r,e,o[t]()))})}}),G.forEach(function(e,i){var n=i%2;T.fn[e]=function(){var e,r,s=T.map(arguments,function(i){var n=[];return e=t(i),"array"==e?(i.forEach(function(t){return t.nodeType!==E?n.push(t):T.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(Q.fragment(t)))}),n):"object"==e||null==i?i:Q.fragment(i)}),o=this.length>1;return s.length<1?this:this.each(function(t,e){r=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var a=T.contains(O.documentElement,r);s.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!r)return T(t).remove();r.insertBefore(t,e),a&&x(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}})})})},T.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return T(t)[e](this),this}}),Q.Z.prototype=d.prototype=T.fn,Q.uniq=M,Q.deserializeValue=b,T.zepto=Q,T}();t.exports=i},function(t,e,i){var n=i(9);!function(t){function e(t){return t._zid||(t._zid=p++)}function i(t,i,s,o){if(i=n(i),i.ns)var a=r(i.ns);return(g[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||a.test(t.ns))&&(!s||e(t.fn)===e(s))&&(!o||t.sel==o)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t,e){return t.del&&!y&&t.e in _||!!e}function o(t){return b[t]||y&&_[t]||t}function a(i,r,a,h,c,p,f){var d=e(i),m=g[d]||(g[d]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var r=n(e);r.fn=a,r.sel=c,r.e in b&&(a=function(e){
var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return r.fn.apply(this,arguments)}),r.del=p;var d=p||a;r.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=h;var e=d.apply(i,t._args==u?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=m.length,m.push(r),"addEventListener"in i&&i.addEventListener(o(r.e),r.proxy,s(r,f))})}function h(t,n,r,a,h){var l=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,r,a).forEach(function(e){delete g[l][e.i],"removeEventListener"in t&&t.removeEventListener(o(e.e),e.proxy,s(e,h))})})}function l(e,i){if(i||!e.isDefaultPrevented){i||(i=e),t.each(T,function(t,n){var r=i[t];e[t]=function(){return this[n]=x,r&&r.apply(i,arguments)},e[n]=E});try{e.timeStamp||(e.timeStamp=Date.now())}catch(n){}(i.defaultPrevented!==u?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)}return e}function c(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===u||(i[e]=t[e]);return l(i,t)}var u,p=1,f=Array.prototype.slice,d=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,_={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:a,remove:h},t.proxy=function(i,n){var r=2 in arguments&&f.call(arguments,2);if(d(i)){var s=function(){return i.apply(n,r?r.concat(f.call(arguments)):arguments)};return s._zid=e(i),s}if(m(n))return r?(r.unshift(i[n],i),t.proxy.apply(null,r)):t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var x=function(){return!0},E=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,r,s){var o,l,p=this;return e&&!m(e)?(t.each(e,function(t,e){p.on(t,i,n,e,s)}),p):(m(i)||d(r)||r===!1||(r=n,n=i,i=u),r!==u&&n!==!1||(r=n,n=u),r===!1&&(r=E),p.each(function(u,p){s&&(o=function(t){return h(p,t.type,r),r.apply(this,arguments)}),i&&(l=function(e){var n,s=t(e.target).closest(i,p).get(0);if(s&&s!==p)return n=t.extend(c(e),{currentTarget:s,liveFired:p}),(o||r).apply(s,[n].concat(f.call(arguments,1)))}),a(p,e,r,n,i,l||o)}))},t.fn.off=function(e,i,n){var r=this;return e&&!m(e)?(t.each(e,function(t,e){r.off(t,i,e)}),r):(m(i)||d(n)||n===!1||(n=i,i=u),n===!1&&(n=E),r.each(function(){h(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=m(e)||t.isPlainObject(e)?t.Event(e):l(e),e._args=i,this.each(function(){e.type in _&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var r,s;return this.each(function(o,a){r=c(m(e)?t.Event(e):e),r._args=n,r.target=a,t.each(i(a,e.type||e),function(t,e){if(s=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var i=document.createEvent(v[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),l(i)}}(n)},function(t,e,i){var n=i(9);!function(t){function e(e,i,n){var r=t.Event(i);return t(e).trigger(r,n),!r.isDefaultPrevented()}function i(t,i,n,r){if(t.global)return e(i||_,n,r)}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function s(t,e){var n=e.context;return e.beforeSend.call(n,t,e)!==!1&&i(e,n,"ajaxBeforeSend",[t,e])!==!1&&void i(e,n,"ajaxSend",[t,e])}function o(t,e,n,r){var s=n.context,o="success";n.success.call(s,t,o,e),r&&r.resolveWith(s,[t,o,e]),i(n,s,"ajaxSuccess",[e,n,t]),h(o,e,n)}function a(t,e,n,r,s){var o=r.context;r.error.call(o,n,e,t),s&&s.rejectWith(o,[n,e,t]),i(r,o,"ajaxError",[n,r,t||e]),h(e,n,r)}function h(t,e,n){var s=n.context;n.complete.call(s,e,t),i(n,s,"ajaxComplete",[e,n]),r(n)}function l(t,e,i){if(i.dataFilter==c)return t;var n=i.context;return i.dataFilter.call(n,t,e)}function c(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==w?"json":x.test(t)?"script":E.test(t)&&"xml")||"text"}function p(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=p(e.url,e.data),e.data=void 0)}function d(e,i,n,r){return t.isFunction(i)&&(r=n,n=i,i=void 0),t.isFunction(n)||(r=n,n=void 0),{url:e,data:i,success:n,dataType:r}}function m(e,i,n,r){var s,o=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,h){s=t.type(h),r&&(i=n?r:r+"["+(a||"object"==s||"array"==s?i:"")+"]"),!r&&o?e.add(h.name,h.value):"array"==s||!n&&"object"==s?m(e,h,n,i):e.add(i,h)})}var g,v,y=+new Date,_=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,E=/^(?:text|application)\/xml/i,w="application/json",T="text/html",A=/^\s*$/,S=_.createElement("a");S.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,r,h=e.jsonpCallback,l=(t.isFunction(h)?h():h)||"Zepto"+y++,c=_.createElement("script"),u=window[l],p=function(e){t(c).triggerHandler("error",e||"abort")},f={abort:p};return i&&i.promise(f),t(c).on("load error",function(s,h){clearTimeout(r),t(c).off().remove(),"error"!=s.type&&n?o(n[0],f,e,i):a(null,h||"error",f,e,i),window[l]=u,n&&t.isFunction(u)&&u(n[0]),u=n=void 0}),s(f,e)===!1?(p("abort"),f):(window[l]=function(){n=arguments},c.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),_.head.appendChild(c),e.timeout>0&&(r=setTimeout(function(){p("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:c},t.ajax=function(e){var i,r,h=t.extend({},e||{}),d=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===h[g]&&(h[g]=t.ajaxSettings[g]);n(h),h.crossDomain||(i=_.createElement("a"),i.href=h.url,i.href=i.href,h.crossDomain=S.protocol+"//"+S.host!=i.protocol+"//"+i.host),h.url||(h.url=window.location.toString()),(r=h.url.indexOf("#"))>-1&&(h.url=h.url.slice(0,r)),f(h);var m=h.dataType,y=/\?.+=\?/.test(h.url);if(y&&(m="jsonp"),h.cache!==!1&&(e&&e.cache===!0||"script"!=m&&"jsonp"!=m)||(h.url=p(h.url,"_="+Date.now())),"jsonp"==m)return y||(h.url=p(h.url,h.jsonp?h.jsonp+"=?":h.jsonp===!1?"":"callback=?")),t.ajaxJSONP(h,d);var b,x=h.accepts[m],E={},w=function(t,e){E[t.toLowerCase()]=[t,e]},T=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:window.location.protocol,M=h.xhr(),P=M.setRequestHeader;if(d&&d.promise(M),h.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",x||"*/*"),(x=h.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),M.overrideMimeType&&M.overrideMimeType(x)),(h.contentType||h.contentType!==!1&&h.data&&"GET"!=h.type.toUpperCase())&&w("Content-Type",h.contentType||"application/x-www-form-urlencoded"),h.headers)for(v in h.headers)w(v,h.headers[v]);if(M.setRequestHeader=w,M.onreadystatechange=function(){if(4==M.readyState){M.onreadystatechange=c,clearTimeout(b);var e,i=!1;if(M.status>=200&&M.status<300||304==M.status||0==M.status&&"file:"==T){if(m=m||u(h.mimeType||M.getResponseHeader("content-type")),"arraybuffer"==M.responseType||"blob"==M.responseType)e=M.response;else{e=M.responseText;try{e=l(e,m,h),"script"==m?(0,eval)(e):"xml"==m?e=M.responseXML:"json"==m&&(e=A.test(e)?null:t.parseJSON(e))}catch(n){i=n}if(i)return a(i,"parsererror",M,h,d)}o(e,M,h,d)}else a(M.statusText||null,M.status?"error":"abort",M,h,d)}},s(M,h)===!1)return M.abort(),a(null,"abort",M,h,d),M;var C=!("async"in h)||h.async;if(M.open(h.type,h.url,C,h.username,h.password),h.xhrFields)for(v in h.xhrFields)M[v]=h.xhrFields[v];for(v in E)P.apply(M,E[v]);return h.timeout>0&&(b=setTimeout(function(){M.onreadystatechange=c,M.abort(),a(null,"timeout",M,h,d)},h.timeout)),M.send(h.data?h.data:null),M},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var r,s=this,o=e.split(/\s/),a=d(e,i,n),h=a.success;return o.length>1&&(a.url=o[0],r=o[1]),a.success=function(e){s.html(r?t("<div>").html(e.replace(b,"")).find(r):e),h&&h.apply(s,arguments)},t.ajax(a),this};var M=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(M(e)+"="+M(i))},m(n,e,i),n.join("&").replace(/%20/g,"+")}}(n)},function(t,e,i){var n=i(9);!function(t){t.fn.serializeArray=function(){var e,i,n=[],r=function(t){return t.forEach?t.forEach(r):void n.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(n,s){i=s.type,e=s.name,e&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||s.checked)&&r(t(s).val())}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(n)},function(t,e){!function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,i){try{return e(t,i)}catch(n){return null}}}}()},function(t,e,i){var n,r,s;!function(o,a){r=[t,i(15),i(17),i(18)],n=a,s="function"==typeof n?n.apply(e,r):n,!(void 0!==s&&(t.exports=s))}(this,function(t,e,i,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}var l=r(e),c=r(i),u=r(n),p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),f=function(t){function e(t,i){s(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.resolveOptions(i),n.listenClick(t),n}return a(e,t),p(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,u["default"])(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l["default"]({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return h("action",t)}},{key:"defaultTarget",value:function(t){var e=h("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return h("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),e}(c["default"]);t.exports=f})},function(t,e,i){var n,r,s;!function(o,a){r=[t,i(16)],n=a,s="function"==typeof n?n.apply(e,r):n,!(void 0!==s&&(t.exports=s))}(this,function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(e),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return o(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,r["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":s(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},function(t,e){function i(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r),e=n.toString()}return e}t.exports=i},function(t,e){function i(){}i.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){function n(){r.off(t,n),e.apply(i,arguments)}var r=this;return n._=e,this.on(t,n,i)},emit:function(t){var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,r=i.length;for(n;n<r;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],r=[];if(n&&e)for(var s=0,o=n.length;s<o;s++)n[s].fn!==e&&n[s].fn._!==e&&r.push(n[s]);return r.length?i[t]=r:delete i[t],this}},t.exports=i},function(t,e,i){function n(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(i))throw new TypeError("Third argument must be a Function");if(a.node(t))return r(t,e,i);if(a.nodeList(t))return s(t,e,i);if(a.string(t))return o(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}function s(t,e,i){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,i)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,i)})}}}function o(t,e,i){return h(document.body,t,e,i)}var a=i(19),h=i(20);t.exports=n},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var i=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},function(t,e,i){function n(t,e,i,n,s){var o=r.apply(this,arguments);return t.addEventListener(i,o,s),{destroy:function(){t.removeEventListener(i,o,s)}}}function r(t,e,i,n){return function(i){i.delegateTarget=s(i.target,e),i.delegateTarget&&n.call(t,i)}}var s=i(21);t.exports=n},function(t,e){function i(t,e){for(;t&&t.nodeType!==n;){if(t.matches(e))return t;t=t.parentNode}}var n=9;if(Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=i},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){__WEBPACK_AMD_DEFINE_FACTORY__=e,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(window,function(){function ProjectInterface(){return{}}function roundValues(t){bm_rnd=t?Math.round:function(t){return t}}function roundTo2Decimals(t){return Math.round(1e4*t)/1e4}function roundTo3Decimals(t){return Math.round(100*t)/100}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin=t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible",t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function styleUnselectableDiv(t){t.style.userSelect="none",t.style.MozUserSelect="none",t.style.webkitUserSelect="none",t.style.oUserSelect="none"}function BMEnterFrameEvent(t,e,i,n){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,i,n){this.type=t,this.currentLoop=e,this.totalLoops=i,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function BMDestroyEvent(t,e){this.type=t,this.target=e}function _addEventListener(t,e){this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e)}function _removeEventListener(t,e){if(e){if(this._cbs[t]){for(var i=0,n=this._cbs[t].length;i<n;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,n-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}function _triggerEvent(t,e){if(this._cbs[t])for(var i=this._cbs[t].length,n=0;n<i;n++)this._cbs[t][n](e)}function randomString(t,e){void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var i,n="";for(i=t;i>0;--i)n+=e[Math.round(Math.random()*(e.length-1))];return n}function HSVtoRGB(t,e,i){var n,r,s,o,a,h,l,c;switch(1===arguments.length&&(e=t.s,i=t.v,t=t.h),o=Math.floor(6*t),a=6*t-o,h=i*(1-e),l=i*(1-a*e),c=i*(1-(1-a)*e),o%6){case 0:n=i,r=c,s=h;break;case 1:n=l,r=i,s=h;break;case 2:n=h,r=i,s=c;break;case 3:n=h,r=l,s=i;break;case 4:n=c,r=h,s=i;break;case 5:n=i,r=h,s=l}return[n,r,s]}function RGBtoHSV(t,e,i){1===arguments.length&&(e=t.g,i=t.b,t=t.r);var n,r=Math.max(t,e,i),s=Math.min(t,e,i),o=r-s,a=0===r?0:o/r,h=r/255;switch(r){case s:n=0;break;case t:n=e-i+o*(e<i?6:0),n/=6*o;break;case e:n=i-t+2*o,n/=6*o;break;case i:n=t-e+4*o,n/=6*o}return[n,a,h]}function addSaturationToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}function componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function fillToRgba(t,e){if(!cachedColors[t]){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);cachedColors[t]=parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)}return"rgba("+cachedColors[t]+","+e+")"}function RenderedFrame(t,e){this.tr=t,this.o=e}function LetterProps(t,e,i,n,r,s){this.o=t,this.sw=e,this.sc=i,this.fc=n,this.m=r,this.props=s}function iterateDynamicProperties(t){var e,i=this.dynamicProperties;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t)}function reversePath(t){var e,i,n=[],r=[],s=[],o={},a=0;t.c&&(n[0]=t.o[0],r[0]=t.i[0],s[0]=t.v[0],a=1),i=t.i.length;var h=i-1;for(e=a;e<i;e+=1)n.push(t.o[h]),r.push(t.i[h]),s.push(t.v[h]),h-=1;return o.i=n,o.o=r,o.v=s,o}function Matrix(){}function matrixManagerFunction(){var t=new Matrix,e=function(e,i,n,r,s){return t.reset().translate(r,s).rotate(e).scale(i,n).toCSS()},i=function(t){return e(t.tr.r[2],t.tr.s[0],t.tr.s[1],t.tr.p[0],t.tr.p[1])};return{getMatrix:i}}function createElement(t,e,i){if(!e){var n=Object.create(t.prototype,i),r={};return n&&"[object Function]"===r.toString.call(n.init)&&n.init(),n}e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._parent=t.prototype}function extendPrototype(t,e){for(var i in t.prototype)t.prototype.hasOwnProperty(i)&&(e.prototype[i]=t.prototype[i])}function bezFunction(){function t(t,e,i,n,r,s){var o=t*n+e*r+i*s-r*n-s*t-i*e;return o>-1e-4&&o<1e-4}function e(e,i,n,r,s,o,a,h,l){return t(e,i,r,s,a,h)&&t(e,n,r,o,a,l)}function i(t){this.segmentLength=0,this.points=new Array(t)}function n(t,e){this.partialLength=t,this.point=e}function r(t,e){var i=e.segments,n=i.length,r=bm_floor((n-1)*t),s=t*e.addedLength,o=0;if(s==i[r].l)return i[r].p;for(var a=i[r].l>s?-1:1,h=!0;h;)i[r].l<=s&&i[r+1].l>s?(o=(s-i[r].l)/(i[r+1].l-i[r].l),h=!1):r+=a,(r<0||r>=n-1)&&(h=!1);return i[r].p+(i[r+1].p-i[r].p)*o}function s(){this.pt1=new Array(2),this.pt2=new Array(2),this.pt3=new Array(2),this.pt4=new Array(2)}function o(t,e,i,n,o,a,h){var l=new s;o=o<0?0:o>1?1:o;var c=r(o,h);a=a>1?1:a;var u,p=r(a,h),f=t.length,d=1-c,m=1-p;for(u=0;u<f;u+=1)l.pt1[u]=Math.round(1e3*(d*d*d*t[u]+(c*d*d+d*c*d+d*d*c)*i[u]+(c*c*d+d*c*c+c*d*c)*n[u]+c*c*c*e[u]))/1e3,l.pt3[u]=Math.round(1e3*(d*d*m*t[u]+(c*d*m+d*c*m+d*d*p)*i[u]+(c*c*m+d*c*p+c*d*p)*n[u]+c*c*p*e[u]))/1e3,l.pt4[u]=Math.round(1e3*(d*m*m*t[u]+(c*m*m+d*p*m+d*m*p)*i[u]+(c*p*m+d*p*p+c*m*p)*n[u]+c*p*p*e[u]))/1e3,l.pt2[u]=Math.round(1e3*(m*m*m*t[u]+(p*m*m+m*p*m+m*m*p)*i[u]+(p*p*m+m*p*p+p*m*p)*n[u]+p*p*p*e[u]))/1e3;return l}var a=(Math,function(){function t(t,e){this.l=t,this.p=e}return function(e,i,n,r){var s,o,a,h,l,c,u=defaultCurveSegments,p=0,f=[],d=[],m={addedLength:0,segments:[]};for(a=n.length,s=0;s<u;s+=1){for(l=s/(u-1),c=0,o=0;o<a;o+=1)h=bm_pow(1-l,3)*e[o]+3*bm_pow(1-l,2)*l*n[o]+3*(1-l)*bm_pow(l,2)*r[o]+bm_pow(l,3)*i[o],f[o]=h,null!==d[o]&&(c+=bm_pow(f[o]-d[o],2)),d[o]=f[o];c&&(c=bm_sqrt(c),p+=c),m.segments.push(new t(p,l))}return m.addedLength=p,m}}()),h=function(){var e={};return function(r){var s=r.s,o=r.e,a=r.to,h=r.ti,l=(s.join("_")+"_"+o.join("_")+"_"+a.join("_")+"_"+h.join("_")).replace(/\./g,"p");if(e[l])return void(r.bezierData=e[l]);var c,u,p,f,d,m,g,v=defaultCurveSegments,y=0,_=null;2===s.length&&(s[0]!=o[0]||s[1]!=o[1])&&t(s[0],s[1],o[0],o[1],s[0]+a[0],s[1]+a[1])&&t(s[0],s[1],o[0],o[1],o[0]+h[0],o[1]+h[1])&&(v=2);var b=new i(v);for(p=a.length,c=0;c<v;c+=1){for(g=new Array(p),d=c/(v-1),m=0,u=0;u<p;u+=1)f=bm_pow(1-d,3)*s[u]+3*bm_pow(1-d,2)*d*(s[u]+a[u])+3*(1-d)*bm_pow(d,2)*(o[u]+h[u])+bm_pow(d,3)*o[u],g[u]=f,null!==_&&(m+=bm_pow(g[u]-_[u],2));m=bm_sqrt(m),y+=m,b.points[c]=new n(m,g),_=g}b.segmentLength=y,r.bezierData=b,e[l]=b}}();return{getBezierLength:a,getNewSegment:o,buildBezierData:h,pointOnLine2D:t,pointOnLine3D:e}}function dataFunctionManager(){function t(r,s,a){var h,l,c,u,p,f,d,m,g=r.length;for(u=0;u<g;u+=1)if(h=r[u],"ks"in h&&!h.completed){if(h.completed=!0,h.tt&&(r[u-1].td=h.tt),l=[],c=-1,h.hasMask){var v=h.masksProperties;for(f=v.length,p=0;p<f;p+=1)if(v[p].pt.k.i)n(v[p].pt.k);else for(m=v[p].pt.k.length,d=0;d<m;d+=1)v[p].pt.k[d].s&&n(v[p].pt.k[d].s[0]),v[p].pt.k[d].e&&n(v[p].pt.k[d].e[0])}0===h.ty?(h.layers=e(h.refId,s),t(h.layers,s,a)):4===h.ty?i(h.shapes):5==h.ty&&o(h,a)}}function e(t,e){for(var i=0,n=e.length;i<n;){if(e[i].id===t)return e[i].layers;i+=1}}function i(t){var e,r,s,o=t.length,a=!1;for(e=o-1;e>=0;e-=1)if("sh"==t[e].ty){if(t[e].ks.k.i)n(t[e].ks.k);else for(s=t[e].ks.k.length,r=0;r<s;r+=1)t[e].ks.k[r].s&&n(t[e].ks.k[r].s[0]),t[e].ks.k[r].e&&n(t[e].ks.k[r].e[0]);a=!0}else"gr"==t[e].ty&&i(t[e].it)}function n(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&void 0))}function s(e,i){e.__complete||(h(e),a(e),l(e),t(e.layers,e.assets,i),e.__complete=!0)}function o(t,e){var i,n,r=t.t.d.k,s=r.length;for(n=0;n<s;n+=1){var o=t.t.d.k[n].s;i=[];var a,h,l,c,u,p,f,d=0,m=t.t.m.g,g=0,v=0,y=0,_=[],b=0,x=0,E=e.getFontByName(o.f),w=0,T=E.fStyle.split(" "),A="normal",S="normal";for(h=T.length,a=0;a<h;a+=1)"italic"===T[a].toLowerCase()?S="italic":"bold"===T[a].toLowerCase()?A="700":"black"===T[a].toLowerCase()?A="900":"medium"===T[a].toLowerCase()?A="500":"regular"===T[a].toLowerCase()||"normal"===T[a].toLowerCase()?A="400":"light"!==T[a].toLowerCase()&&"thin"!==T[a].toLowerCase()||(A="200");if(o.fWeight=A,o.fStyle=S,h=o.t.length,o.sz){var M=o.sz[0],P=-1;for(a=0;a<h;a+=1)l=!1," "===o.t.charAt(a)?P=a:13===o.t.charCodeAt(a)&&(b=0,l=!0),e.chars?(f=e.getCharData(o.t.charAt(a),E.fStyle,E.fFamily),w=l?0:f.w*o.s/100):w=e.measureText(o.t.charAt(a),o.f,o.s),b+w>M?(P===-1?(o.t=o.t.substr(0,a)+"\r"+o.t.substr(a),h+=1):(a=P,o.t=o.t.substr(0,a)+"\r"+o.t.substr(a+1)),P=-1,b=0):b+=w;h=o.t.length}for(b=0,w=0,a=0;a<h;a+=1)if(l=!1," "===o.t.charAt(a)?c="":13===o.t.charCodeAt(a)?(_.push(b),x=b>x?b:x,b=0,c="",l=!0,y+=1):c=o.t.charAt(a),e.chars?(f=e.getCharData(o.t.charAt(a),E.fStyle,e.getFontByName(o.f).fFamily),w=l?0:f.w*o.s/100):w=e.measureText(c,o.f,o.s),b+=w,i.push({l:w,an:w,add:g,n:l,anIndexes:[],val:c,line:y}),2==m){if(g+=w,""==c||""==c||a==h-1){for(""!=c&&""!=c||(g-=w);v<=a;)i[v].an=g,i[v].ind=d,i[v].extra=w,v+=1;d+=1,g=0}}else if(3==m){if(g+=w,""==c||a==h-1){for(""==c&&(g-=w);v<=a;)i[v].an=g,i[v].ind=d,i[v].extra=w,v+=1;g=0,d+=1}}else i[d].ind=d,i[d].extra=0,d+=1;if(o.l=i,x=b>x?b:x,_.push(b),o.sz)o.boxWidth=o.sz[0],o.justifyOffset=0;else switch(o.boxWidth=x,o.j){case 1:o.justifyOffset=-o.boxWidth;break;case 2:o.justifyOffset=-o.boxWidth/2;break;default:o.justifyOffset=0}o.lineWidths=_;var C=t.t.a;p=C.length;var R,I,O=[];for(u=0;u<p;u+=1){for(C[u].a.sc&&(o.strokeColorAnim=!0),C[u].a.sw&&(o.strokeWidthAnim=!0),(C[u].a.fc||C[u].a.fh||C[u].a.fs||C[u].a.fb)&&(o.fillColorAnim=!0),I=0,R=C[u].s.b,a=0;a<h;a+=1)i[a].anIndexes[u]=I,(1==R&&""!=i[a].val||2==R&&""!=i[a].val&&""!=i[a].val||3==R&&(i[a].n||""==i[a].val||a==h-1)||4==R&&(i[a].n||a==h-1))&&(1===C[u].s.rn&&O.push(I),I+=1);t.t.a[u].s.totalChars=I;var N,L=-1;if(1===C[u].s.rn)for(a=0;a<h;a+=1)L!=i[a].anIndexes[u]&&(L=i[a].anIndexes[u],N=O.splice(Math.floor(Math.random()*O.length),1)[0]),i[a].anIndexes[u]=N}0!==p||"m"in t.t.p||(t.singleShape=!0),o.yOffset=o.lh||1.2*o.s,o.ascent=E.ascent*o.s/100}}var a=function(){function t(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function e(e){var i,n=e.length;for(i=0;i<n;i+=1)5===e[i].ty&&t(e[i])}var i=[4,4,14];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,s=t.assets.length;for(n=0;n<s;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),h=function(){function t(e){var i,n,r,s=e.length;for(i=0;i<s;i+=1)if("gr"===e[i].ty)t(e[i].it);else if("fl"===e[i].ty||"st"===e[i].ty)if(e[i].c.k&&e[i].c.k[0].i)for(r=e[i].c.k.length,n=0;n<r;n+=1)e[i].c.k[n].s&&(e[i].c.k[n].s[0]/=255,e[i].c.k[n].s[1]/=255,e[i].c.k[n].s[2]/=255,e[i].c.k[n].s[3]/=255),e[i].c.k[n].e&&(e[i].c.k[n].e[0]/=255,e[i].c.k[n].e[1]/=255,e[i].c.k[n].e[2]/=255,e[i].c.k[n].e[3]/=255);else e[i].c.k[0]/=255,e[i].c.k[1]/=255,e[i].c.k[2]/=255,e[i].c.k[3]/=255}function e(e){var i,n=e.length;for(i=0;i<n;i+=1)4===e[i].ty&&t(e[i].shapes)}var i=[4,1,9];return function(t){if(r(i,t.v)&&(e(t.layers),t.assets)){var n,s=t.assets.length;for(n=0;n<s;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),l=function(){function t(e){var i,n,r,s=e.length,o=!1;for(i=s-1;i>=0;i-=1)if("sh"==e[i].ty){if(e[i].ks.k.i)e[i].ks.k.c=e[i].closed;else for(r=e[i].ks.k.length,n=0;n<r;n+=1)e[i].ks.k[n].s&&(e[i].ks.k[n].s[0].c=e[i].closed),e[i].ks.k[n].e&&(e[i].ks.k[n].e[0].c=e[i].closed);o=!0}else"gr"==e[i].ty&&t(e[i].it)}function e(e){var i,n,r,s,o,a,h=e.length;for(n=0;n<h;n+=1){if(i=e[n],i.hasMask){var l=i.masksProperties;for(s=l.length,r=0;r<s;r+=1)if(l[r].pt.k.i)l[r].pt.k.c=l[r].cl;else for(a=l[r].pt.k.length,o=0;o<a;o+=1)l[r].pt.k[o].s&&(l[r].pt.k[o].s[0].c=l[r].cl),l[r].pt.k[o].e&&(l[r].pt.k[o].e[0].c=l[r].cl)}4===i.ty&&t(i.shapes)}}var i=[4,4,18];return function(t){
if(r(i,t.v)&&(e(t.layers),t.assets)){var n,s=t.assets.length;for(n=0;n<s;n+=1)t.assets[n].layers&&e(t.assets[n].layers)}}}(),c={};return c.completeData=s,c}function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",progressiveLoad:e&&e.progressiveLoad||!1},this.elements=[],this.pendingElements=[],this.destroyed=!1}function MaskElement(t,e,i){this.dynamicProperties=[],this.data=t,this.element=e,this.globalData=i,this.paths=[],this.storedData=[],this.masksProperties=this.data.masksProperties,this.viewData=new Array(this.masksProperties.length),this.maskElement=null,this.firstFrame=!0;var n,r,s,o,a,h,l,c,u=this.globalData.defs,p=this.masksProperties.length,f=this.masksProperties,d=0,m=[],g=randomString(10),v="clipPath",y="clip-path";for(n=0;n<p;n++)if(("a"!==f[n].mode&&"n"!==f[n].mode||f[n].inv||100!==f[n].o.k)&&(v="mask",y="mask"),"s"!=f[n].mode&&"i"!=f[n].mode||0!=d?a=null:(a=document.createElementNS(svgNS,"rect"),a.setAttribute("fill","#ffffff"),a.setAttribute("width",this.element.comp.data?this.element.comp.data.w:this.element.globalData.compSize.w),a.setAttribute("height",this.element.comp.data?this.element.comp.data.h:this.element.globalData.compSize.h),m.push(a)),r=document.createElementNS(svgNS,"path"),"n"!=f[n].mode){if(d+=1,"s"==f[n].mode?r.setAttribute("fill","#000000"):r.setAttribute("fill","#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==f[n].x.k){v="mask",y="mask",c=PropertyFactory.getProp(this.element,f[n].x,0,null,this.dynamicProperties);var _="fi_"+randomString(10);h=document.createElementNS(svgNS,"filter"),h.setAttribute("id",_),l=document.createElementNS(svgNS,"feMorphology"),l.setAttribute("operator","dilate"),l.setAttribute("in","SourceGraphic"),l.setAttribute("radius","0"),h.appendChild(l),u.appendChild(h),"s"==f[n].mode?r.setAttribute("stroke","#000000"):r.setAttribute("stroke","#ffffff")}else l=null,c=null;if(this.storedData[n]={elem:r,x:c,expan:l,lastPath:"",lastOperator:"",filterId:_,lastRadius:0},"i"==f[n].mode){o=m.length;var b=document.createElementNS(svgNS,"g");for(s=0;s<o;s+=1)b.appendChild(m[s]);var x=document.createElementNS(svgNS,"mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",g+"_"+d),x.appendChild(r),u.appendChild(x),b.setAttribute("mask","url(#"+g+"_"+d+")"),m.length=0,m.push(b)}else m.push(r);f[n].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[n]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,f[n].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,f[n],3,this.dynamicProperties,null)},a&&(this.viewData[n].invRect=a),this.viewData[n].prop.k||this.drawPath(f[n],this.viewData[n].prop.v,this.viewData[n])}else this.viewData[n]={op:PropertyFactory.getProp(this.element,f[n].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,f[n],3,this.dynamicProperties,null),elem:r},u.appendChild(r);for(this.maskElement=document.createElementNS(svgNS,v),p=m.length,n=0;n<p;n+=1)this.maskElement.appendChild(m[n]);this.maskElement.setAttribute("id",g),d>0&&this.element.maskedElement.setAttribute(y,"url(#"+g+")"),u.appendChild(this.maskElement)}function BaseElement(){}function SVGBaseElement(t,e,i,n,r){this.globalData=i,this.comp=n,this.data=t,this.matteElement=null,this.transformedElement=null,this.parentContainer=e,this.layerId=r?r.layerId:"ly_"+randomString(10),this.placeholder=r,this.init()}function ITextElement(t,e,i,n){}function SVGTextElement(t,e,i,n,r){this.textSpans=[],this.renderType="svg",this._parent.constructor.call(this,t,e,i,n,r)}function SVGTintFilter(t,e){this.filterManager=e;var i=document.createElementNS(svgNS,"feColorMatrix");if(i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i),i=document.createElementNS(svgNS,"feColorMatrix"),i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result","f2"),t.appendChild(i),this.matrixFilter=i,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var n=document.createElementNS(svgNS,"feMerge");t.appendChild(n);var r;r=document.createElementNS(svgNS,"feMergeNode"),r.setAttribute("in","SourceGraphic"),n.appendChild(r),r=document.createElementNS(svgNS,"feMergeNode"),r.setAttribute("in","f2"),n.appendChild(r)}}function SVGFillFilter(t,e){this.filterManager=e;var i=document.createElementNS(svgNS,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(i),this.matrixFilter=i}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var i=document.createElementNS(svgNS,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i);var n=document.createElementNS(svgNS,"feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.matrixFilter=n;var r=document.createElementNS(svgNS,"feFuncR");r.setAttribute("type","table"),n.appendChild(r),this.feFuncR=r;var s=document.createElementNS(svgNS,"feFuncG");s.setAttribute("type","table"),n.appendChild(s),this.feFuncG=s;var o=document.createElementNS(svgNS,"feFuncB");o.setAttribute("type","table"),n.appendChild(o),this.feFuncB=o}function SVGProLevelsFilter(t,e){this.filterManager=e;var i=this.filterManager.effectElements,n=document.createElementNS(svgNS,"feComponentTransfer");(i[9].p.k||0!==i[9].p.v||i[10].p.k||1!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||0!==i[12].p.v||i[13].p.k||1!==i[13].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(i[16].p.k||0!==i[16].p.v||i[17].p.k||1!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||0!==i[19].p.v||i[20].p.k||1!==i[20].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(i[23].p.k||0!==i[23].p.v||i[24].p.k||1!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||0!==i[26].p.v||i[27].p.k||1!==i[27].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(i[30].p.k||0!==i[30].p.v||i[31].p.k||1!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||0!==i[33].p.v||i[34].p.k||1!==i[34].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),n=document.createElementNS(svgNS,"feComponentTransfer")),(i[2].p.k||0!==i[2].p.v||i[3].p.k||1!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||0!==i[5].p.v||i[6].p.k||1!==i[6].p.v)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGEffects(t){var e,i=t.data.ef.length,n=randomString(10),r=filtersFactory.createFilter(n),s=0;this.filters=[];var o;for(e=0;e<i;e+=1)20===t.data.ef[e].ty?(s+=1,o=new SVGTintFilter(r,t.effects.effectElements[e]),this.filters.push(o)):21===t.data.ef[e].ty?(s+=1,o=new SVGFillFilter(r,t.effects.effectElements[e]),this.filters.push(o)):22===t.data.ef[e].ty?(o=new SVGStrokeEffect(t,t.effects.effectElements[e]),this.filters.push(o)):23===t.data.ef[e].ty?(s+=1,o=new SVGTritoneFilter(r,t.effects.effectElements[e]),this.filters.push(o)):24===t.data.ef[e].ty&&(s+=1,o=new SVGProLevelsFilter(r,t.effects.effectElements[e]),this.filters.push(o));s&&(t.globalData.defs.appendChild(r),t.layerElement.setAttribute("filter","url(#"+n+")"))}function ICompElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r),this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?Array.apply(null,{length:this.layers.length}):[],this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),this.data.xt?(this.layerElement=document.createElementNS(svgNS,"g"),this.buildAllItems()):i.progressiveLoad||this.buildAllItems()}function IImageElement(t,e,i,n,r){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i,n,r)}function IShapeElement(t,e,i,n,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.viewData=[],this.shapeModifiers=[],this._parent.constructor.call(this,t,e,i,n,r)}function ISolidElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r)}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet"},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1};var i,n=15;for(i=0;i<n;i+=1)this.contextData.saved[i]=Array.apply(null,{length:16});this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1}function HybridRenderer(t){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0}function CVBaseElement(t,e,i){this.globalData=i,this.data=t,this.comp=e,this.canvasContext=i.canvasContext,this.init()}function CVCompElement(t,e,i){this._parent.constructor.call(this,t,e,i);var n={};for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r]);n.renderer=this,n.compHeight=this.data.h,n.compWidth=this.data.w,this.renderConfig={clearCanvas:!0},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1},this.completeLayers=!1;var s,o=15;for(s=0;s<o;s+=1)this.contextData.saved[s]=Array.apply(null,{length:16});this.transformMat=new Matrix,this.parentGlobalData=this.globalData;var a=document.createElement("canvas");n.canvasContext=a.getContext("2d"),this.canvasContext=n.canvasContext,a.width=this.data.w,a.height=this.data.h,this.canvas=a,this.globalData=n,this.layers=t.layers,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),!this.data.xt&&i.progressiveLoad||this.buildAllItems()}function CVImageElement(t,e,i){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i),this.globalData.addPendingElement()}function CVMaskElement(t,e){this.data=t,this.element=e,this.dynamicProperties=[],this.masksProperties=this.data.masksProperties,this.viewData=new Array(this.masksProperties.length);var i,n=this.masksProperties.length;for(i=0;i<n;i++)this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3,this.dynamicProperties,null)}function CVShapeElement(t,e,i){this.shapes=[],this.stylesList=[],this.viewData=[],this.shapeModifiers=[],this.shapesData=t.shapes,this.firstFrame=!0,this._parent.constructor.call(this,t,e,i)}function CVSolidElement(t,e,i){this._parent.constructor.call(this,t,e,i)}function CVTextElement(t,e,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this._parent.constructor.call(this,t,e,i)}function HBaseElement(t,e,i,n,r){this.globalData=i,this.comp=n,this.data=t,this.matteElement=null,this.parentContainer=e,this.layerId=r?r.layerId:"ly_"+randomString(10),this.placeholder=r,this.init()}function HSolidElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r)}function HCompElement(t,e,i,n,r){this._parent.constructor.call(this,t,e,i,n,r),this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,i.frameRate,this.dynamicProperties)),this.data.hasMask&&(this.supports3d=!1),this.data.xt&&(this.layerElement=document.createElement("div")),this.buildAllItems()}function HShapeElement(t,e,i,n,r){this.shapes=[],this.shapeModifiers=[],this.shapesData=t.shapes,this.stylesList=[],this.viewData=[],this._parent.constructor.call(this,t,e,i,n,r),this.addedTransforms={mdf:!1,mats:[this.finalTransform.mat]},this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,i,n,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this._parent.constructor.call(this,t,e,i,n,r)}function HImageElement(t,e,i,n,r){this.assetData=i.getAssetData(t.refId),this._parent.constructor.call(this,t,e,i,n,r)}function HCameraElement(t,e,i,n,r){if(this._parent.constructor.call(this,t,e,i,n,r),this.pe=PropertyFactory.getProp(this,t.pe,0,0,this.dynamicProperties),t.ks.p.s?(this.px=PropertyFactory.getProp(this,t.ks.p.x,1,0,this.dynamicProperties),this.py=PropertyFactory.getProp(this,t.ks.p.y,1,0,this.dynamicProperties),this.pz=PropertyFactory.getProp(this,t.ks.p.z,1,0,this.dynamicProperties)):this.p=PropertyFactory.getProp(this,t.ks.p,1,0,this.dynamicProperties),t.ks.a&&(this.a=PropertyFactory.getProp(this,t.ks.a,1,0,this.dynamicProperties)),t.ks.or.k.length){var s,o=t.ks.or.k.length;for(s=0;s<o;s+=1)t.ks.or.k[s].to=null,t.ks.or.k[s].ti=null}this.or=PropertyFactory.getProp(this,t.ks.or,1,degToRads,this.dynamicProperties),this.or.sh=!0,this.rx=PropertyFactory.getProp(this,t.ks.rx,0,degToRads,this.dynamicProperties),this.ry=PropertyFactory.getProp(this,t.ks.ry,0,degToRads,this.dynamicProperties),this.rz=PropertyFactory.getProp(this,t.ks.rz,0,degToRads,this.dynamicProperties),this.mat=new Matrix}function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function CheckboxEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(t,e,i){var n=t.ef;this.effectElements=[];var r,s,o=n.length;for(r=0;r<o;r++)s=new GroupEffect(n[r],e,i),this.effectElements.push(s)}function GroupEffect(t,e,i){this.dynamicProperties=[],this.init(t,e,this.dynamicProperties),this.dynamicProperties.length&&i.push(this)}function play(t){animationManager.play(t)}function pause(t){animationManager.pause(t)}function togglePause(t){animationManager.togglePause(t)}function setSpeed(t,e){animationManager.setSpeed(t,e)}function setDirection(t,e){animationManager.setDirection(t,e)}function stop(t){animationManager.stop(t)}function moveFrame(t){animationManager.moveFrame(t)}function searchAnimations(){standalone===!0?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function registerAnimation(t){return animationManager.registerAnimation(t)}function resize(){animationManager.resize()}function start(){animationManager.start()}function goToAndStop(t,e,i){animationManager.goToAndStop(t,e,i)}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){return standalone===!0&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function destroy(t){return animationManager.destroy(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i++){var n=e[i].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}var svgNS="http://www.w3.org/2000/svg",subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};!function(){var t,e=Object.getOwnPropertyNames(Math),i=e.length;for(t=0;t<i;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){var e=typeof t;if("object"===e&&t.length){var i,n=Array.apply(null,{length:t.length}),r=t.length;for(i=0;i<r;i+=1)n[i]=Math.abs(t[i]);return n}return Math.abs(t)};var defaultCurveSegments=75,degToRads=Math.PI/180,roundCorner=.5519;roundValues(!1);var rgbToHex=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1==e.length?"0"+e:e;return function(t,e,n){return t<0&&(t=0),e<0&&(e=0),n<0&&(n=0),"#"+i[t]+i[e]+i[n]}}(),fillColorToString=function(){var t=[];return function(e,i){return void 0!==i&&(e[3]=i),t[e[0]]||(t[e[0]]={}),t[e[0]][e[1]]||(t[e[0]][e[1]]={}),t[e[0]][e[1]][e[2]]||(t[e[0]][e[1]][e[2]]={}),t[e[0]][e[1]][e[2]][e[3]]||(t[e[0]][e[1]][e[2]][e[3]]="rgba("+e.join(",")+")"),t[e[0]][e[1]][e[2]][e[3]]}}(),Matrix=function(){function t(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function e(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function i(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1)}function n(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1)}function r(t){if(0===t)return this;var e=Math.cos(t),i=Math.sin(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function s(t,e){return this._t(1,e,t,1,0,0)}function o(t,e){return this.shear(Math.tan(t),Math.tan(e))}function a(t,e){var i=Math.cos(e),n=Math.sin(e);return this._t(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1)._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function h(t,e,i){return i=isNaN(i)?1:i,1==t&&1==e&&1==i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function l(t,e,i,n,r,s,o,a,h,l,c,u,p,f,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=n,this.props[4]=r,this.props[5]=s,this.props[6]=o,this.props[7]=a,this.props[8]=h,this.props[9]=l,this.props[10]=c,this.props[11]=u,this.props[12]=p,this.props[13]=f,this.props[14]=d,this.props[15]=m,this}function c(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function u(t,e,i,n,r,s,o,a,h,l,c,u,p,f,d,m){if(1===t&&0===e&&0===i&&0===n&&0===r&&1===s&&0===o&&0===a&&0===h&&0===l&&1===c&&0===u)return 0===p&&0===f&&0===d||(this.props[12]=this.props[12]*t+this.props[13]*r+this.props[14]*h+this.props[15]*p,this.props[13]=this.props[12]*e+this.props[13]*s+this.props[14]*l+this.props[15]*f,this.props[14]=this.props[12]*i+this.props[13]*o+this.props[14]*c+this.props[15]*d,this.props[15]=this.props[12]*n+this.props[13]*a+this.props[14]*u+this.props[15]*m),this;var g=this.props[0],v=this.props[1],y=this.props[2],_=this.props[3],b=this.props[4],x=this.props[5],E=this.props[6],w=this.props[7],T=this.props[8],A=this.props[9],S=this.props[10],M=this.props[11],P=this.props[12],C=this.props[13],R=this.props[14],I=this.props[15];return this.props[0]=g*t+v*r+y*h+_*p,this.props[1]=g*e+v*s+y*l+_*f,this.props[2]=g*i+v*o+y*c+_*d,this.props[3]=g*n+v*a+y*u+_*m,this.props[4]=b*t+x*r+E*h+w*p,this.props[5]=b*e+x*s+E*l+w*f,this.props[6]=b*i+x*o+E*c+w*d,this.props[7]=b*n+x*a+E*u+w*m,this.props[8]=T*t+A*r+S*h+M*p,this.props[9]=T*e+A*s+S*l+M*f,this.props[10]=T*i+A*o+S*c+M*d,this.props[11]=T*n+A*a+S*u+M*m,this.props[12]=P*t+C*r+R*h+I*p,this.props[13]=P*e+C*s+R*l+I*f,this.props[14]=P*i+C*o+R*c+I*d,this.props[15]=P*n+C*a+R*u+I*m,this}function p(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function f(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function d(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function m(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function g(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function v(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function y(t){var e,i=this.props[0]*this.props[5]-this.props[1]*this.props[4],n=this.props[5]/i,r=-this.props[1]/i,s=-this.props[4]/i,o=this.props[0]/i,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/i,h=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/i,l=t.length,c=[];for(e=0;e<l;e+=1)c[e]=[t[e][0]*n+t[e][1]*s+a,t[e][0]*r+t[e][1]*o+h,0];return c}function _(t,e,i){return[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function b(t,e){return bm_rnd(t*this.props[0]+e*this.props[4]+this.props[12])+","+bm_rnd(t*this.props[1]+e*this.props[5]+this.props[13])}function x(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function E(){return isSafari?"matrix3d("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[2])+","+roundTo2Decimals(this.props[3])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[6])+","+roundTo2Decimals(this.props[7])+","+roundTo2Decimals(this.props[8])+","+roundTo2Decimals(this.props[9])+","+roundTo2Decimals(this.props[10])+","+roundTo2Decimals(this.props[11])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+","+roundTo2Decimals(this.props[14])+","+roundTo2Decimals(this.props[15])+")":(this.cssParts[1]=this.props.join(","),this.cssParts.join(""))}function w(){return"matrix("+this.props[0]+","+this.props[1]+","+this.props[4]+","+this.props[5]+","+this.props[12]+","+this.props[13]+")"}function T(){return""+this.toArray()}return function(){this.reset=t,this.rotate=e,this.rotateX=i,this.rotateY=n,this.rotateZ=r,this.skew=o,this.skewFromAxis=a,this.shear=s,this.scale=h,this.setTransform=l,this.translate=c,this.transform=u,this.applyToPoint=d,this.applyToX=m,this.applyToY=g,this.applyToZ=v,this.applyToPointArray=_,this.applyToPointStringified=b,this.toArray=x,this.toCSS=E,this.to2dCSS=w,this.toString=T,this.clone=p,this.cloneFromProps=f,this.inversePoints=y,this._t=this.transform,this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.cssParts=["matrix3d(","",")"]}}();!function(t,e){function i(i,l,c){var f=[];l=1==l?{entropy:!0}:l||{};var y=o(s(l.entropy?[i,h(t)]:null==i?a():i,3),f),_=new n(f),b=function(){for(var t=_.g(p),e=m,i=0;t<g;)t=(t+i)*u,e*=u,i=_.g(1);for(;t>=v;)t/=2,e/=2,i>>>=1;return(t+i)/e};return b.int32=function(){return 0|_.g(4)},b.quick=function(){return _.g(4)/4294967296},b["double"]=b,o(h(_.S),t),(l.pass||c||function(t,i,n,s){return s&&(s.S&&r(s,_),t.state=function(){return r(_,{})}),n?(e[d]=t,i):t})(b,y,"global"in l?l.global:this==e,l.state)}function n(t){var e,i=t.length,n=this,r=0,s=n.i=n.j=0,o=n.S=[];for(i||(t=[i++]);r<u;)o[r]=r++;for(r=0;r<u;r++)o[r]=o[s=y&s+t[r%i]+(e=o[r])],o[s]=e;(n.g=function(t){for(var e,i=0,r=n.i,s=n.j,o=n.S;t--;)e=o[r=y&r+1],i=i*u+o[y&(o[r]=o[s=y&s+e])+(o[s]=e)];return n.i=r,n.j=s,i})(u)}function r(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function s(t,e){var i,n=[],r=typeof t;if(e&&"object"==r)for(i in t)try{n.push(s(t[i],e-1))}catch(o){}return n.length?n:"string"==r?t:t+"\0"}function o(t,e){for(var i,n=t+"",r=0;r<n.length;)e[y&r]=y&(i^=19*e[y&r])+n.charCodeAt(r++);return h(e)}function a(){try{if(l)return h(l.randomBytes(u));var e=new Uint8Array(u);return(c.crypto||c.msCrypto).getRandomValues(e),h(e)}catch(i){var n=c.navigator,r=n&&n.plugins;return[+new Date,c,r,c.screen,h(t)]}}function h(t){return String.fromCharCode.apply(0,t)}var l,c=this,u=256,p=6,f=52,d="random",m=e.pow(u,p),g=e.pow(2,f),v=2*g,y=u-1;e["seed"+d]=i,o(e.random(),t)}([],BMMath);var BezierFactory=function(){function t(t,e,i,n,r){var s=r||("bez_"+t+"_"+e+"_"+i+"_"+n).replace(/\./g,"p");if(c[s])return c[s];var o=new h([t,e,i,n]);return c[s]=o,o}function e(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function r(t,r,s){return((e(r,s)*t+i(r,s))*t+n(r))*t}function s(t,r,s){return 3*e(r,s)*t*t+2*i(r,s)*t+n(r)}function o(t,e,i,n,s){var o,a,h=0;do a=e+(i-e)/2,o=r(a,n,s)-t,o>0?i=a:e=a;while(Math.abs(o)>f&&++h<d);return a}function a(t,e,i,n){for(var o=0;o<u;++o){var a=s(e,i,n);if(0===a)return e;var h=r(e,i,n)-t;e-=h/a}return e}function h(t){this._p=t,this._mSampleValues=v?new Float32Array(m):new Array(m),this._precomputed=!1,this.get=this.get.bind(this)}var l={};l.getBezierEasing=t;var c={},u=4,p=.001,f=1e-7,d=10,m=11,g=1/(m-1),v="function"==typeof Float32Array;return h.prototype={get:function(t){var e=this._p[0],i=this._p[1],n=this._p[2],s=this._p[3];return this._precomputed||this._precompute(),e===i&&n===s?t:0===t?0:1===t?1:r(this._getTForX(t),i,s)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],n=this._p[3];this._precomputed=!0,t===e&&i===n||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<m;++i)this._mSampleValues[i]=r(i*g,t,e)},_getTForX:function(t){for(var e=this._p[0],i=this._p[2],n=this._mSampleValues,r=0,h=1,l=m-1;h!==l&&n[h]<=t;++h)r+=g;--h;var c=(t-n[h])/(n[h+1]-n[h]),u=r+c*g,f=s(u,e,i);return f>=p?a(t,u,e,i):0===f?u:o(t,r,r+g,e,i)}},l}(),MatrixManager=matrixManagerFunction;!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+r)},r);return t=n+r,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction(),dataManager=dataFunctionManager(),FontManager=function(){function t(t,e){var i=document.createElement("span");i.style.fontFamily=e;var n=document.createElement("span");n.innerHTML="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(n),document.body.appendChild(i);var r=n.offsetWidth;return n.style.fontFamily=t+", "+e,{node:n,w:r,parent:i}}function e(){var t,i,n,r=this.fonts.length,s=r;for(t=0;t<r;t+=1)if(this.fonts[t].loaded)s-=1;else if("t"===this.fonts[t].fOrigin){if(window.Typekit&&window.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{window.Typekit.load({async:!0,active:function(){this.typekitLoaded=2}.bind(this)})}catch(o){}}2===this.typekitLoaded&&(this.fonts[t].loaded=!0)}else"n"===this.fonts[t].fOrigin?this.fonts[t].loaded=!0:(i=this.fonts[t].monoCase.node,n=this.fonts[t].monoCase.w,i.offsetWidth!==n?(s-=1,this.fonts[t].loaded=!0):(i=this.fonts[t].sansCase.node,n=this.fonts[t].sansCase.w,i.offsetWidth!==n&&(s-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==s&&Date.now()-this.initTime<h?setTimeout(e.bind(this),20):setTimeout(function(){this.loaded=!0}.bind(this),0)}function i(t,e){var i=document.createElementNS(svgNS,"text");i.style.fontSize="100px",i.style.fontFamily=e.fFamily,i.textContent="1",e.fClass?(i.style.fontFamily="inherit",i.className=e.fClass):i.style.fontFamily=e.fFamily,t.appendChild(i);var n=document.createElement("canvas").getContext("2d");return n.font="100px "+e.fFamily,n}function n(n,r){if(!n)return void(this.loaded=!0);if(this.chars)return this.loaded=!0,void(this.fonts=n.list);var s,o=n.list,a=o.length;for(s=0;s<a;s+=1){if(o[s].loaded=!1,o[s].monoCase=t(o[s].fFamily,"monospace"),o[s].sansCase=t(o[s].fFamily,"sans-serif"),o[s].fPath){if("p"===o[s].fOrigin){var h=document.createElement("style");h.type="text/css",h.innerHTML="@font-face {font-family: "+o[s].fFamily+"; font-style: normal; src: url('"+o[s].fPath+"');}",r.appendChild(h)}else if("g"===o[s].fOrigin){var l=document.createElement("link");l.type="text/css",l.rel="stylesheet",l.href=o[s].fPath,r.appendChild(l)}else if("t"===o[s].fOrigin){var c=document.createElement("script");c.setAttribute("src",o[s].fPath),r.appendChild(c)}}else o[s].loaded=!0;o[s].helper=i(r,o[s]),this.fonts.push(o[s])}e.bind(this)()}function r(t){if(t){this.chars||(this.chars=[]);var e,i,n,r=t.length,s=this.chars.length;for(e=0;e<r;e+=1){for(i=0,n=!1;i<s;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(n=!0),i+=1;n||(this.chars.push(t[e]),s+=1)}}}function s(t,e,i){for(var n=0,r=this.chars.length;n<r;){if(this.chars[n].ch===t&&this.chars[n].style===e&&this.chars[n].fFamily===i)return this.chars[n];n+=1}}function o(t,e,i){var n=this.getFontByName(e),r=n.helper;return r.measureText(t).width*i/100}function a(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return"sans-serif"}var h=5e3,l=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.loaded=!1,this.initTime=Date.now()};return l.prototype.addChars=r,l.prototype.addFonts=n,l.prototype.getCharData=s,l.prototype.getFontByName=a,l.prototype.measureText=o,l}(),PropertyFactory=function(){function t(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime;if(t===this.lastFrame||this.lastFrame!==l&&(this.lastFrame>=this.keyframes[this.keyframes.length-1].t-this.offsetTime&&t>=this.keyframes[this.keyframes.length-1].t-this.offsetTime||this.lastFrame<this.keyframes[0].t-this.offsetTime&&t<this.keyframes[0].t-this.offsetTime));else{for(var e,i,n=0,r=this.keyframes.length-1,s=1,o=!0;o;){if(e=this.keyframes[n],i=this.keyframes[n+1],n==r-1&&t>=i.t-this.offsetTime){e.h&&(e=i);break}if(i.t-this.offsetTime>t)break;n<r-1?n+=s:o=!1}var a,h,c,u,p,f=0;if(e.to){e.bezierData||bez.buildBezierData(e);var d=e.bezierData;if(t>=i.t-this.offsetTime||t<e.t-this.offsetTime){var m=t>=i.t-this.offsetTime?d.points.length-1:0;for(h=d.points[m].point.length,a=0;a<h;a+=1)this.v[a]=this.mult?d.points[m].point[a]*this.mult:d.points[m].point[a],this.pv[a]=d.points[m].point[a],this.lastPValue[a]!==this.pv[a]&&(this.mdf=!0,
this.lastPValue[a]=this.pv[a])}else{e.__fnct?p=e.__fnct:(p=BezierFactory.getBezierEasing(e.o.x,e.o.y,e.i.x,e.i.y,e.n).get,e.__fnct=p),c=p((t-(e.t-this.offsetTime))/(i.t-this.offsetTime-(e.t-this.offsetTime)));var g,v=d.segmentLength*c,y=0;for(s=1,o=!0,u=d.points.length;o;){if(y+=d.points[f].partialLength*s,0===v||0===c||f==d.points.length-1){for(h=d.points[f].point.length,a=0;a<h;a+=1)this.v[a]=this.mult?d.points[f].point[a]*this.mult:d.points[f].point[a],this.pv[a]=d.points[f].point[a],this.lastPValue[a]!==this.pv[a]&&(this.mdf=!0,this.lastPValue[a]=this.pv[a]);break}if(v>=y&&v<y+d.points[f+1].partialLength){for(g=(v-y)/d.points[f+1].partialLength,h=d.points[f].point.length,a=0;a<h;a+=1)this.v[a]=this.mult?(d.points[f].point[a]+(d.points[f+1].point[a]-d.points[f].point[a])*g)*this.mult:d.points[f].point[a]+(d.points[f+1].point[a]-d.points[f].point[a])*g,this.pv[a]=d.points[f].point[a]+(d.points[f+1].point[a]-d.points[f].point[a])*g,this.lastPValue[a]!==this.pv[a]&&(this.mdf=!0,this.lastPValue[a]=this.pv[a]);break}f<u-1&&1==s||f>0&&s==-1?f+=s:o=!1}}}else{var _,b,x,E,w,T=!1;for(r=e.s.length,n=0;n<r;n+=1){if(1!==e.h&&(e.o.x instanceof Array?(T=!0,e.__fnct||(e.__fnct=[]),e.__fnct[n]||(_=e.o.x[n]||e.o.x[0],b=e.o.y[n]||e.o.y[0],x=e.i.x[n]||e.i.x[0],E=e.i.y[n]||e.i.y[0])):(T=!1,e.__fnct||(_=e.o.x,b=e.o.y,x=e.i.x,E=e.i.y)),T?e.__fnct[n]?p=e.__fnct[n]:(p=BezierFactory.getBezierEasing(_,b,x,E).get,e.__fnct[n]=p):e.__fnct?p=e.__fnct:(p=BezierFactory.getBezierEasing(_,b,x,E).get,e.__fnct=p),c=t>=i.t-this.offsetTime?1:t<e.t-this.offsetTime?0:p((t-(e.t-this.offsetTime))/(i.t-this.offsetTime-(e.t-this.offsetTime)))),this.sh&&1!==e.h){var A=e.s[n],S=e.e[n];A-S<-180?A+=360:A-S>180&&(A-=360),w=A+(S-A)*c}else w=1===e.h?e.s[n]:e.s[n]+(e.e[n]-e.s[n])*c;1===r?(this.v=this.mult?w*this.mult:w,this.pv=w,this.lastPValue!=this.pv&&(this.mdf=!0,this.lastPValue=this.pv)):(this.v[n]=this.mult?w*this.mult:w,this.pv[n]=w,this.lastPValue[n]!==this.pv[n]&&(this.mdf=!0,this.lastPValue[n]=this.pv[n]))}}}this.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function e(){}function i(t,i,n){this.mult=n,this.v=n?i.k*n:i.k,this.pv=i.k,this.mdf=!1,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.getValue=e}function n(t,i,n){this.mult=n,this.data=i,this.mdf=!1,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1,this.v=new Array(i.k.length),this.pv=new Array(i.k.length),this.lastValue=new Array(i.k.length);var r=Array.apply(null,{length:i.k.length});this.vel=r.map(function(){return 0});var s,o=i.k.length;for(s=0;s<o;s+=1)this.v[s]=n?i.k[s]*n:i.k[s],this.pv[s]=i.k[s];this.getValue=e}function r(e,i,n){this.keyframes=i.k,this.offsetTime=e.data.st,this.lastValue=-99999,this.lastPValue=-99999,this.frameId=-1,this.k=!0,this.kf=!0,this.data=i,this.mult=n,this.elem=e,this.comp=e.comp,this.lastFrame=l,this.v=n?i.k[0].s[0]*n:i.k[0].s[0],this.pv=i.k[0].s[0],this.getValue=t}function s(e,i,n){var r,s,o,a,h,c=i.k.length;for(r=0;r<c-1;r+=1)i.k[r].to&&i.k[r].s&&i.k[r].e&&(s=i.k[r].s,o=i.k[r].e,a=i.k[r].to,h=i.k[r].ti,(2===s.length&&(s[0]!==o[0]||s[1]!==o[1])&&bez.pointOnLine2D(s[0],s[1],o[0],o[1],s[0]+a[0],s[1]+a[1])&&bez.pointOnLine2D(s[0],s[1],o[0],o[1],o[0]+h[0],o[1]+h[1])||3===s.length&&(s[0]!==o[0]||s[1]!==o[1]||s[2]!==o[2])&&bez.pointOnLine3D(s[0],s[1],s[2],o[0],o[1],o[2],s[0]+a[0],s[1]+a[1],s[2]+a[2])&&bez.pointOnLine3D(s[0],s[1],s[2],o[0],o[1],o[2],o[0]+h[0],o[1]+h[1],o[2]+h[2]))&&(i.k[r].to=null,i.k[r].ti=null));this.keyframes=i.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this.mult=n,this.elem=e,this.comp=e.comp,this.getValue=t,this.frameId=-1,this.v=new Array(i.k[0].s.length),this.pv=new Array(i.k[0].s.length),this.lastValue=new Array(i.k[0].s.length),this.lastPValue=new Array(i.k[0].s.length),this.lastFrame=l}function o(t,e,o,a,h){var l;if(2===o)l=new c(t,e,h);else if(0===e.a)l=0===o?new i(t,e,a):new n(t,e,a);else if(1===e.a)l=0===o?new r(t,e,a):new s(t,e,a);else if(e.k.length)if("number"==typeof e.k[0])l=new n(t,e,a);else switch(o){case 0:l=new r(t,e,a);break;case 1:l=new s(t,e,a)}else l=new i(t,e,a);return l.k&&h.push(l),l}function a(t,e,i,n){return new p(t,e,i,n)}function h(t,e,i){return new f(t,e,i)}var l=-999999,c=function(){function t(){return this.p.k&&this.p.getValue(),this.p.v.key||(this.p.v.key=function(t){return this.p.v.numKeys?this.p.keyframes[t-1].t:0}.bind(this)),this.p.v.numKeys||(this.p.v.numKeys=this.p.keyframes?this.p.keyframes.length:0),this.p.v.valueAtTime||(this.p.v.valueAtTime=this.p.getValueAtTime.bind(this.p)),this.p.v}function e(){return this.px.k&&this.px.getValue(),this.px.v}function i(){return this.py.k&&this.py.getValue(),this.py.v}function n(){return this.a.k&&this.a.getValue(),this.a.v}function r(){return this.or.k&&this.or.getValue(),this.or.v}function s(){return this.r.k&&this.r.getValue(),this.r.v/degToRads}function o(){return this.s.k&&this.s.getValue(),this.s.v}function a(){return this.o.k&&this.o.getValue(),this.o.v}function h(){return this.sk.k&&this.sk.getValue(),this.sk.v}function l(){return this.sa.k&&this.sa.getValue(),this.sa.v}function c(t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function u(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);if(this.mdf){if(this.v.reset(),this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&this.p.keyframes&&this.p.getValueAtTime){var i,n;this.p.lastFrame+this.p.offsetTime<this.p.keyframes[0].t?(i=this.p.getValueAtTime(this.p.keyframes[0].t+.01,0),n=this.p.getValueAtTime(this.p.keyframes[0].t,0)):this.p.lastFrame+this.p.offsetTime>this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t,0),n=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t-.01,0)):(i=this.p.pv,n=this.p.getValueAtTime(this.p.lastFrame+this.p.offsetTime-.01,this.p.offsetTime)),this.v.rotate(-Math.atan2(i[1]-n[1],i[0]-n[0]))}this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function p(){this.inverted=!0,this.iv=new Matrix,this.k||(this.data.p.s?this.iv.translate(this.px.v,this.py.v,-this.pz.v):this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]),this.r?this.iv.rotate(-this.r.v):this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.s&&this.iv.scale(this.s.v[0],this.s.v[1],1),this.a&&this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]))}function f(){}return function(d,m,g){this.elem=d,this.frameId=-1,this.dynamicProperties=[],this.mdf=!1,this.data=m,this.getValue=u,this.applyToMatrix=c,this.setInverted=p,this.autoOrient=f,this.v=new Matrix,m.p.s?(this.px=PropertyFactory.getProp(d,m.p.x,0,0,this.dynamicProperties),this.py=PropertyFactory.getProp(d,m.p.y,0,0,this.dynamicProperties),m.p.z&&(this.pz=PropertyFactory.getProp(d,m.p.z,0,0,this.dynamicProperties))):this.p=PropertyFactory.getProp(d,m.p,1,0,this.dynamicProperties),m.r?this.r=PropertyFactory.getProp(d,m.r,0,degToRads,this.dynamicProperties):m.rx&&(this.rx=PropertyFactory.getProp(d,m.rx,0,degToRads,this.dynamicProperties),this.ry=PropertyFactory.getProp(d,m.ry,0,degToRads,this.dynamicProperties),this.rz=PropertyFactory.getProp(d,m.rz,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(d,m.or,0,degToRads,this.dynamicProperties)),m.sk&&(this.sk=PropertyFactory.getProp(d,m.sk,0,degToRads,this.dynamicProperties),this.sa=PropertyFactory.getProp(d,m.sa,0,degToRads,this.dynamicProperties)),m.a&&(this.a=PropertyFactory.getProp(d,m.a,1,0,this.dynamicProperties)),m.s&&(this.s=PropertyFactory.getProp(d,m.s,1,.01,this.dynamicProperties)),m.o?this.o=PropertyFactory.getProp(d,m.o,0,.01,g):this.o={mdf:!1,v:1},this.dynamicProperties.length?g.push(this):(this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?m.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),Object.defineProperty(this,"position",{get:t}),Object.defineProperty(this,"xPosition",{get:e}),Object.defineProperty(this,"yPosition",{get:i}),Object.defineProperty(this,"orientation",{get:r}),Object.defineProperty(this,"anchorPoint",{get:n}),Object.defineProperty(this,"rotation",{get:s}),Object.defineProperty(this,"scale",{get:o}),Object.defineProperty(this,"opacity",{get:a}),Object.defineProperty(this,"skew",{get:h}),Object.defineProperty(this,"skewAxis",{get:l})}}(),u=function(){function t(t){if(this.prop.getValue(),this.cmdf=!1,this.omdf=!1,this.prop.mdf||t){var e,i,n,r=4*this.data.p;for(e=0;e<r;e+=1)i=e%4===0?100:255,n=Math.round(this.prop.v[e]*i),this.c[e]!==n&&(this.c[e]=n,this.cmdf=!0);if(this.o.length)for(r=this.prop.v.length,e=4*this.data.p;e<r;e+=1)i=e%2===0?100:1,n=e%2===0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==n&&(this.o[e-4*this.data.p]=n,this.omdf=!0)}}function e(e,i,n){this.prop=o(e,i.k,1,null,[]),this.data=i,this.k=this.prop.k,this.c=Array.apply(null,{length:4*i.p});var r=i.k.k[0].s?i.k.k[0].s.length-4*i.p:i.k.k.length-4*i.p;this.o=Array.apply(null,{length:r}),this.cmdf=!1,this.omdf=!1,this.getValue=t,this.prop.k&&n.push(this),this.getValue(!0)}return function(t,i,n){return new e(t,i,n)}}(),p=function(){function t(t){var e=0,i=this.dataProps.length;if(this.elem.globalData.frameId!==this.frameId||t){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId;e<i;){if(this.dataProps[e].p.mdf){this.mdf=!0;break}e+=1}if(this.mdf||t)for("svg"===this.renderer&&(this.dasharray=""),e=0;e<i;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dasharray+=" "+this.dataProps[e].p.v:this.dasharray[e]=this.dataProps[e].p.v:this.dashoffset=this.dataProps[e].p.v}}return function(e,i,n,r){this.elem=e,this.frameId=-1,this.dataProps=new Array(i.length),this.renderer=n,this.mdf=!1,this.k=!1,"svg"===this.renderer?this.dasharray="":this.dasharray=new Array(i.length-1),this.dashoffset=0;var s,o,a=i.length;for(s=0;s<a;s+=1)o=PropertyFactory.getProp(e,i[s].v,0,0,r),this.k=!!o.k||this.k,this.dataProps[s]={n:i[s].n,p:o};this.getValue=t,this.k?r.push(this):this.getValue(!0)}}(),f=function(){function t(){if(this.dynamicProperties.length){var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0)}var i=this.data.totalChars,n=2===this.data.r?1:100/i,r=this.o.v/n,s=this.s.v/n+r,o=this.e.v/n+r;if(s>o){var a=s;s=o,o=a}this.finalS=s,this.finalE=o}function e(t){var e=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,s=0,o=this.finalS,a=this.finalE,h=this.data.sh;if(2==h)s=a===o?t>=a?1:0:i(0,n(.5/(a-o)+(t-o)/(a-o),1)),s=e(s);else if(3==h)s=a===o?t>=a?0:1:1-i(0,n(.5/(a-o)+(t-o)/(a-o),1)),s=e(s);else if(4==h)a===o?s=0:(s=i(0,n(.5/(a-o)+(t-o)/(a-o),1)),s<.5?s*=2:s=1-2*(s-.5)),s=e(s);else if(5==h){if(a===o)s=0;else{var l=a-o;t=n(i(0,t+.5-o),a-o);var c=-l/2+t,u=l/2;s=Math.sqrt(1-c*c/(u*u))}s=e(s)}else 6==h?(a===o?s=0:(t=n(i(0,t+.5-o),a-o),s=(1+Math.cos(Math.PI+2*Math.PI*t/(a-o)))/2),s=e(s)):(t>=r(o)&&(s=t-o<0?1-(o-t):i(0,n(a-t,1))),s=e(s));return s*this.a.v}var i=Math.max,n=Math.min,r=Math.floor;return function(i,n,r){this.mdf=!1,this.k=!1,this.data=n,this.dynamicProperties=[],this.getValue=t,this.getMult=e,this.comp=i.comp,this.finalS=0,this.finalE=0,this.s=PropertyFactory.getProp(i,n.s||{k:0},0,0,this.dynamicProperties),"e"in n?this.e=PropertyFactory.getProp(i,n.e,0,0,this.dynamicProperties):this.e={v:2===n.r?n.totalChars:100},this.o=PropertyFactory.getProp(i,n.o||{k:0},0,0,this.dynamicProperties),this.xe=PropertyFactory.getProp(i,n.xe||{k:0},0,0,this.dynamicProperties),this.ne=PropertyFactory.getProp(i,n.ne||{k:0},0,0,this.dynamicProperties),this.a=PropertyFactory.getProp(i,n.a,0,.01,this.dynamicProperties),this.dynamicProperties.length?r.push(this):this.getValue()}}(),d={};return d.getProp=o,d.getDashProp=a,d.getTextSelectorProp=h,d.getGradientProp=u,d}(),ShapePropertyFactory=function(){function t(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime;if(this.lastFrame!==o&&(this.lastFrame<this.keyframes[0].t-this.offsetTime&&t<this.keyframes[0].t-this.offsetTime||this.lastFrame>this.keyframes[this.keyframes.length-1].t-this.offsetTime&&t>this.keyframes[this.keyframes.length-1].t-this.offsetTime));else{var e,i,n;if(t<this.keyframes[0].t-this.offsetTime)e=this.keyframes[0].s[0],n=!0;else if(t>=this.keyframes[this.keyframes.length-1].t-this.offsetTime)e=1===this.keyframes[this.keyframes.length-2].h?this.keyframes[this.keyframes.length-1].s[0]:this.keyframes[this.keyframes.length-2].e[0],n=!0;else{for(var r,s,a,h,l,c,u=0,p=this.keyframes.length-1,f=!0;f&&(r=this.keyframes[u],s=this.keyframes[u+1],!(s.t-this.offsetTime>t));)u<p-1?u+=1:f=!1;n=1===r.h,n&&u===p&&(r=s);var d;if(!n){var m;r.__fnct?m=r.__fnct:(m=BezierFactory.getBezierEasing(r.o.x,r.o.y,r.i.x,r.i.y).get,r.__fnct=m),d=t>=s.t-this.offsetTime?1:t<r.t-this.offsetTime?0:m((t-(r.t-this.offsetTime))/(s.t-this.offsetTime-(r.t-this.offsetTime))),i=r.e[0]}e=r.s[0]}h=this.v.i.length,c=e.i[0].length;var g,v=!1;for(a=0;a<h;a+=1)for(l=0;l<c;l+=1)n?(g=e.i[a][l],this.v.i[a][l]!==g&&(this.v.i[a][l]=g,this.pv.i[a][l]=g,v=!0),g=e.o[a][l],this.v.o[a][l]!==g&&(this.v.o[a][l]=g,this.pv.o[a][l]=g,v=!0),g=e.v[a][l],this.v.v[a][l]!==g&&(this.v.v[a][l]=g,this.pv.v[a][l]=g,v=!0)):(g=e.i[a][l]+(i.i[a][l]-e.i[a][l])*d,this.v.i[a][l]!==g&&(this.v.i[a][l]=g,this.pv.i[a][l]=g,v=!0),g=e.o[a][l]+(i.o[a][l]-e.o[a][l])*d,this.v.o[a][l]!==g&&(this.v.o[a][l]=g,this.pv.o[a][l]=g,v=!0),g=e.v[a][l]+(i.v[a][l]-e.v[a][l])*d,this.v.v[a][l]!==g&&(this.v.v[a][l]=g,this.pv.v[a][l]=g,v=!0));this.mdf=v,this.paths.length=0,this.v.c=e.c,this.paths[0]=this.v}this.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function e(){return this.v}function i(){this.resetPaths.length=1,this.resetPaths[0]=this.v,this.paths=this.resetPaths,this.k||(this.mdf=!1)}function n(t,n,r){this.resetPaths=[],this.comp=t.comp,this.k=!1,this.mdf=!1,this.numNodes=3===r?n.pt.k.v.length:n.ks.k.v.length,this.v=3===r?n.pt.k:n.ks.k,this.getValue=e,this.pv=this.v,this.paths=[this.v],this.reset=i}function r(e,n,r){this.resetPaths=[],this.comp=e.comp,this.elem=e,this.offsetTime=e.data.st,this.getValue=t,this.keyframes=3===r?n.pt.k:n.ks.k,this.k=!0;var s,a=this.keyframes[0].s[0].i.length,h=this.keyframes[0].s[0].i[0].length;for(this.numNodes=a,this.v={i:Array.apply(null,{length:a}),o:Array.apply(null,{length:a}),v:Array.apply(null,{length:a}),c:this.keyframes[0].s[0].c},this.pv={i:Array.apply(null,{length:a}),o:Array.apply(null,{length:a}),v:Array.apply(null,{length:a}),c:this.keyframes[0].s[0].c},s=0;s<a;s+=1)this.v.i[s]=Array.apply(null,{length:h}),this.v.o[s]=Array.apply(null,{length:h}),this.v.v[s]=Array.apply(null,{length:h}),this.pv.i[s]=Array.apply(null,{length:h}),this.pv.o[s]=Array.apply(null,{length:h}),this.pv.v[s]=Array.apply(null,{length:h});this.paths=[],this.lastFrame=o,this.reset=i}function s(t,e,i,s){var o;if(3===i||4===i){var c=3===i?e.pt:e.ks,u=c.k;o=1===c.a||u.length?new r(t,e,i):new n(t,e,i)}else 5===i?o=new l(t,e):6===i?o=new a(t,e):7===i&&(o=new h(t,e));return o.k&&s.push(o),o}var o=-999999,a=function(){function t(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,r=this.s.v[1]/2;2!==this.d&&3!==this.d?(this.v.v[0]=[t,e-r],this.v.i[0]=[t-i*n,e-r],this.v.o[0]=[t+i*n,e-r],this.v.v[1]=[t+i,e],this.v.i[1]=[t+i,e-r*n],this.v.o[1]=[t+i,e+r*n],this.v.v[2]=[t,e+r],this.v.i[2]=[t+i*n,e+r],this.v.o[2]=[t-i*n,e+r],this.v.v[3]=[t-i,e],this.v.i[3]=[t-i,e+r*n],this.v.o[3]=[t-i,e-r*n]):(this.v.v[0]=[t,e-r],this.v.o[0]=[t-i*n,e-r],this.v.i[0]=[t+i*n,e-r],this.v.v[1]=[t-i,e],this.v.o[1]=[t-i,e+r*n],this.v.i[1]=[t-i,e-r*n],this.v.v[2]=[t,e+r],this.v.o[2]=[t+i*n,e+r],this.v.i[2]=[t-i*n,e+r],this.v.v[3]=[t+i,e],this.v.o[3]=[t+i,e-r*n],this.v.i[3]=[t+i,e+r*n]),this.paths.length=0,this.paths[0]=this.v}function e(t){var e,i=this.dynamicProperties.length;if(this.elem.globalData.frameId!==this.frameId){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId,e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&(this.convertEllToPath(),this.paths.length=0,this.paths[0]=this.v)}}var n=roundCorner;return function(n,r){this.v={v:Array.apply(null,{length:4}),i:Array.apply(null,{length:4}),o:Array.apply(null,{length:4}),c:!0},this.numNodes=4,this.d=r.d,this.dynamicProperties=[],this.resetPaths=[],this.paths=[],this.elem=n,this.comp=n.comp,this.frameId=-1,this.mdf=!1,this.getValue=e,this.convertEllToPath=t,this.reset=i,this.p=PropertyFactory.getProp(n,r.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(n,r.s,1,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertEllToPath()}}(),h=function(){function t(){var t=Math.floor(this.pt.v),e=2*Math.PI/t;this.v.v.length=t,this.v.i.length=t,this.v.o.length=t;var i,n=this.or.v,r=this.os.v,s=2*Math.PI*n/(4*t),o=-Math.PI/2,a=3===this.data.d?-1:1;for(o+=this.r.v,i=0;i<t;i+=1){var h=n*Math.cos(o),l=n*Math.sin(o),c=0===h&&0===l?0:l/Math.sqrt(h*h+l*l),u=0===h&&0===l?0:-h/Math.sqrt(h*h+l*l);h+=+this.p.v[0],l+=+this.p.v[1],this.v.v[i]=[h,l],this.v.i[i]=[h+c*s*r*a,l+u*s*r*a],this.v.o[i]=[h-c*s*r*a,l-u*s*r*a],o+=e*a}this.numNodes=t,this.paths.length=0,this.paths[0]=this.v}function e(){var t=2*Math.floor(this.pt.v),e=2*Math.PI/t;this.v.v.length=t,this.v.i.length=t,this.v.o.length=t;var i,n,r,s,o=!0,a=this.or.v,h=this.ir.v,l=this.os.v,c=this.is.v,u=2*Math.PI*a/(2*t),p=2*Math.PI*h/(2*t),f=-Math.PI/2;f+=this.r.v;var d=3===this.data.d?-1:1;for(i=0;i<t;i+=1){n=o?a:h,r=o?l:c,s=o?u:p;var m=n*Math.cos(f),g=n*Math.sin(f),v=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),y=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.v[i]=[m,g],this.v.i[i]=[m+v*s*r*d,g+y*s*r*d],this.v.o[i]=[m-v*s*r*d,g-y*s*r*d],o=!o,f+=e*d}this.numNodes=t,this.paths.length=0,this.paths[0]=this.v}function n(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&this.convertToPath()}}return function(r,s){this.v={v:[],i:[],o:[],c:!0},this.resetPaths=[],this.elem=r,this.comp=r.comp,this.data=s,this.frameId=-1,this.d=s.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=n,this.reset=i,1===s.sy?(this.ir=PropertyFactory.getProp(r,s.ir,0,0,this.dynamicProperties),this.is=PropertyFactory.getProp(r,s.is,0,.01,this.dynamicProperties),this.convertToPath=e):this.convertToPath=t,this.pt=PropertyFactory.getProp(r,s.pt,0,0,this.dynamicProperties),this.p=PropertyFactory.getProp(r,s.p,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(r,s.r,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(r,s.or,0,0,this.dynamicProperties),this.os=PropertyFactory.getProp(r,s.os,0,.01,this.dynamicProperties),this.paths=[],this.dynamicProperties.length?this.k=!0:this.convertToPath()}}(),l=function(){function t(t){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertRectToPath()}}function e(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,r=bm_min(i,n,this.r.v),s=r*(1-roundCorner);0===r?(this.v.v.length=4,this.v.i.length=4,this.v.o.length=4):(this.v.v.length=8,this.v.i.length=8,this.v.o.length=8),2===this.d||1===this.d?(this.v.v[0]=[t+i,e-n+r],this.v.o[0]=this.v.v[0],this.v.i[0]=[t+i,e-n+s],this.v.v[1]=[t+i,e+n-r],this.v.o[1]=[t+i,e+n-s],this.v.i[1]=this.v.v[1],0!==r?(this.v.v[2]=[t+i-r,e+n],this.v.o[2]=this.v.v[2],this.v.i[2]=[t+i-s,e+n],this.v.v[3]=[t-i+r,e+n],this.v.o[3]=[t-i+s,e+n],this.v.i[3]=this.v.v[3],this.v.v[4]=[t-i,e+n-r],this.v.o[4]=this.v.v[4],this.v.i[4]=[t-i,e+n-s],this.v.v[5]=[t-i,e-n+r],this.v.o[5]=[t-i,e-n+s],this.v.i[5]=this.v.v[5],this.v.v[6]=[t-i+r,e-n],this.v.o[6]=this.v.v[6],this.v.i[6]=[t-i+s,e-n],this.v.v[7]=[t+i-r,e-n],this.v.o[7]=[t+i-s,e-n],this.v.i[7]=this.v.v[7]):(this.v.v[2]=[t-i+r,e+n],this.v.o[2]=[t-i+s,e+n],this.v.i[2]=this.v.v[2],this.v.v[3]=[t-i,e-n+r],this.v.o[3]=[t-i,e-n+s],this.v.i[3]=this.v.v[3])):(this.v.v[0]=[t+i,e-n+r],this.v.o[0]=[t+i,e-n+s],this.v.i[0]=this.v.v[0],0!==r?(this.v.v[1]=[t+i-r,e-n],this.v.o[1]=this.v.v[1],this.v.i[1]=[t+i-s,e-n],this.v.v[2]=[t-i+r,e-n],this.v.o[2]=[t-i+s,e-n],this.v.i[2]=this.v.v[2],this.v.v[3]=[t-i,e-n+r],this.v.o[3]=this.v.v[3],this.v.i[3]=[t-i,e-n+s],this.v.v[4]=[t-i,e+n-r],this.v.o[4]=[t-i,e+n-s],this.v.i[4]=this.v.v[4],this.v.v[5]=[t-i+r,e+n],this.v.o[5]=this.v.v[5],this.v.i[5]=[t-i+s,e+n],this.v.v[6]=[t+i-r,e+n],this.v.o[6]=[t+i-s,e+n],this.v.i[6]=this.v.v[6],this.v.v[7]=[t+i,e+n-r],this.v.o[7]=this.v.v[7],this.v.i[7]=[t+i,e+n-s]):(this.v.v[1]=[t-i+r,e-n],this.v.o[1]=[t-i+s,e-n],this.v.i[1]=this.v.v[1],this.v.v[2]=[t-i,e+n-r],this.v.o[2]=[t-i,e+n-s],this.v.i[2]=this.v.v[2],this.v.v[3]=[t+i-r,e+n],this.v.o[3]=[t+i-s,e+n],this.v.i[3]=this.v.v[3])),this.paths.length=0,this.paths[0]=this.v}return function(n,r){this.v={v:Array.apply(null,{length:8}),i:Array.apply(null,{length:8}),o:Array.apply(null,{length:8}),c:!0},this.resetPaths=[],this.paths=[],this.numNodes=8,this.elem=n,this.comp=n.comp,this.frameId=-1,this.d=r.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=t,this.convertRectToPath=e,this.reset=i,this.p=PropertyFactory.getProp(n,r.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(n,r.s,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(n,r.r,0,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertRectToPath()}}(),c={};return c.getShapeProp=s,c}(),ShapeModifiers=function(){function t(t,e){n[t]||(n[t]=e)}function e(t,e,i,r){return new n[t](e,i,r)}var i={},n={};return i.registerModifier=t,i.getModifier=e,i}();ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){this.closed||(this.shapes.push({shape:t,last:[]}),this.addShapeToModifier(t))},ShapeModifier.prototype.init=function(t,e,i){this.elem=t,this.frameId=-1,this.shapes=[],this.dynamicProperties=[],this.mdf=!1,this.closed=!1,this.k=!1,this.isTrimming=!1,this.comp=t.comp,this.initModifierProperties(t,e),this.dynamicProperties.length?(this.k=!0,i.push(this)):this.getValue(!0)},extendPrototype(ShapeModifier,TrimModifier),TrimModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);if(this.mdf||t){var n=this.o.v%360/360;n<0&&(n+=1);var r=this.s.v+n,s=this.e.v+n;if(r>s){var o=r;r=s,s=o}this.sValue=r,this.eValue=s,this.oValue=n}}},TrimModifier.prototype.initModifierProperties=function(t,e){this.sValue=0,this.eValue=0,this.oValue=0,this.getValue=this.processKeys,this.s=PropertyFactory.getProp(t,e.s,0,.01,this.dynamicProperties),this.e=PropertyFactory.getProp(t,e.e,0,.01,this.dynamicProperties),this.o=PropertyFactory.getProp(t,e.o,0,0,this.dynamicProperties),this.m=e.m,this.dynamicProperties.length||this.getValue(!0)},TrimModifier.prototype.getSegmentsLength=function(t){var e,i=t.c,n=t.v,r=t.o,s=t.i,o=n.length,a=[],h=0;for(e=0;e<o-1;e+=1)a[e]=bez.getBezierLength(n[e],n[e+1],r[e],s[e+1]),h+=a[e].addedLength;return i&&(a[e]=bez.getBezierLength(n[e],n[0],r[e],s[0]),h+=a[e].addedLength),{lengths:a,totalLength:h}},TrimModifier.prototype.calculateShapeEdges=function(t,e,i,n,r){var s=[];e<=1?s.push({s:t,e:e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var o,a,h=[],l=s.length;for(o=0;o<l;o+=1)if(a=s[o],a.e*r<n||a.s*r>n+i);else{var c,u;c=a.s*r<=n?0:(a.s*r-n)/i,u=a.e*r>=n+i?1:(a.e*r-n)/i,h.push([c,u])}return h.length||h.push([0,0]),h},TrimModifier.prototype.processShapes=function(t){var e,i,n,r,s,o,a,h=this.shapes.length,l=this.sValue,c=this.eValue,u=0;if(c===l)for(i=0;i<h;i+=1)this.shapes[i].shape.paths=[],this.shapes[i].shape.mdf=!0;else if(1===c&&0===l||0===c&&1===l)for(i=0;i<h;i+=1)p=this.shapes[i],p.shape.paths!==p.last&&(p.shape.mdf=!0,p.last=p.shape.paths);else{var p,f,d=[];for(i=0;i<h;i+=1)if(p=this.shapes[i],p.shape.mdf||this.mdf||t||2===this.m){if(e=p.shape.paths,r=e.length,a=0,!p.shape.mdf&&p.pathsData)a=p.totalShapeLength;else{for(s=[],n=0;n<r;n+=1)o=this.getSegmentsLength(e[n]),s.push(o),a+=o.totalLength;p.totalShapeLength=a,p.pathsData=s}u+=a,p.shape.mdf=!0}else p.shape.paths=p.last;var n,r,m=l,g=c,v=0;for(i=h-1;i>=0;i-=1)if(f=[],p=this.shapes[i],p.shape.mdf){if(2===this.m&&h>1){var y=this.calculateShapeEdges(l,c,p.totalShapeLength,v,u);v+=p.totalShapeLength}else y=[[m,g]];for(r=y.length,n=0;n<r;n+=1){m=y[n][0],g=y[n][1],d.length=0,g<=1?d.push({s:p.totalShapeLength*m,e:p.totalShapeLength*g}):m>=1?d.push({s:p.totalShapeLength*(m-1),e:p.totalShapeLength*(g-1)}):(d.push({s:p.totalShapeLength*m,e:p.totalShapeLength}),d.push({s:0,e:p.totalShapeLength*(g-1)}));var _=this.addShapes(p,d[0]);if(d[0].s!==d[0].e){var b;f.push(_),d.length>1&&(p.shape.v.c?this.addShapes(p,d[1],_):(_.i[0]=[_.v[0][0],_.v[0][1]],b=_.v.length-1,_.o[b]=[_.v[b][0],_.v[b][1]],_=this.addShapes(p,d[1]),f.push(_))),_.i[0]=[_.v[0][0],_.v[0][1]],b=_.v.length-1,_.o[b]=[_.v[b][0],_.v[b][1]]}}p.last=f,p.shape.paths=f}}this.dynamicProperties.length||(this.mdf=!1)},TrimModifier.prototype.addSegment=function(t,e,i,n,r,s){r.o[s]=e,r.i[s+1]=i,r.v[s+1]=n,r.v[s]=t},TrimModifier.prototype.addShapes=function(t,e,i){var n,r,s,o,a,h,l,c=t.pathsData,u=t.shape.paths,p=u.length,f=0;for(i?a=i.v.length-1:(i={c:!1,v:[],i:[],o:[]},a=0),n=0;n<p;n+=1){for(h=c[n].lengths,s=u[n].c?h.length:h.length+1,r=1;r<s;r+=1)if(o=h[r-1],f+o.addedLength<e.s)f+=o.addedLength;else{if(f>e.e)break;e.s<=f&&e.e>=f+o.addedLength?this.addSegment(u[n].v[r-1],u[n].o[r-1],u[n].i[r],u[n].v[r],i,a):(l=bez.getNewSegment(u[n].v[r-1],u[n].v[r],u[n].o[r-1],u[n].i[r],(e.s-f)/o.addedLength,(e.e-f)/o.addedLength,h[r-1]),this.addSegment(l.pt1,l.pt3,l.pt4,l.pt2,i,a)),f+=o.addedLength,a+=1}if(u[n].c&&f<=e.e){var d=h[r-1].addedLength;e.s<=f&&e.e>=f+d?this.addSegment(u[n].v[r-1],u[n].o[r-1],u[n].i[0],u[n].v[0],i,a):(l=bez.getNewSegment(u[n].v[r-1],u[n].v[0],u[n].o[r-1],u[n].i[0],(e.s-f)/d,(e.e-f)/d,h[r-1]),this.addSegment(l.pt1,l.pt3,l.pt4,l.pt2,i,a))}}return i},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype(ShapeModifier,RoundCornersModifier),RoundCornersModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t,this.frameId=this.elem.globalData.frameId;var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}},RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},RoundCornersModifier.prototype.processPath=function(t,e){var i,n,r,s,o,a,h,l,c,u,p=t.v.length,f=[],d=[],m=[];for(i=0;i<p;i+=1)n=t.v[i],s=t.o[i],r=t.i[i],n[0]===s[0]&&n[1]===s[1]&&n[0]===r[0]&&n[1]===r[1]?0!==i&&i!==p-1||t.c?(o=0===i?t.v[p-1]:t.v[i-1],c=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)),u=c?Math.min(c/2,e)/c:0,a=[n[0]+(o[0]-n[0])*u,n[1]-(n[1]-o[1])*u],l=a,h=[a[0]-(a[0]-n[0])*roundCorner,a[1]-(a[1]-n[1])*roundCorner],f.push(a),d.push(h),m.push(l),o=i===p-1?t.v[0]:t.v[i+1],c=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)),u=c?Math.min(c/2,e)/c:0,a=[n[0]+(o[0]-n[0])*u,n[1]+(o[1]-n[1])*u],l=[a[0]-(a[0]-n[0])*roundCorner,a[1]-(a[1]-n[1])*roundCorner],h=a,f.push(a),d.push(h),m.push(l)):(f.push(n),d.push(s),m.push(r)):(f.push(t.v[i]),d.push(t.o[i]),m.push(t.i[i]));return{v:f,o:d,i:m,c:t.c}},RoundCornersModifier.prototype.processShapes=function(){var t,e,i,n,r=this.shapes.length,s=this.rd.v;if(0!==s){var o,a;for(e=0;e<r;e+=1)if(a=[],o=this.shapes[e],o.shape.mdf||this.mdf){for(o.shape.mdf=!0,t=o.shape.paths,n=t.length,i=0;i<n;i+=1)a.push(this.processPath(t[i],s));o.shape.paths=a,o.last=a}else o.shape.paths=o.last}this.dynamicProperties.length||(this.mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier);var ImagePreloader=function(){function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages}function e(t){var e="";if(this.assetsPath){var i=t.p;i.indexOf("images/")!==-1&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e}function i(e){var i=document.createElement("img");i.addEventListener("load",t.bind(this),!1),i.addEventListener("error",t.bind(this),!1),i.src=e}function n(t){this.totalAssets=t.length;var n;for(n=0;n<this.totalAssets;n+=1)t[n].layers||(i.bind(this)(e.bind(this)(t[n])),this.totalImages+=1)}function r(t){this.path=t||""}function s(t){this.assetsPath=t||""}return function(){this.loadAssets=n,this.setAssetsPath=s,this.setPath=r,this.assetsPath="",this.path="",this.totalAssets=0,this.totalImages=0,this.loadedAssets=0}}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){function t(t){var e=document.createElementNS(svgNS,"filter");return e.setAttribute("id",t),e.setAttribute("filterUnits","objectBoundingBox"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e}function e(){var t=document.createElementNS(svgNS,"feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 0 1"),t}var i={};return i.createFilter=t,i.createAlphaToLuminanceFilter=e,i}();BaseRenderer.prototype.checkLayers=function(t){var e,i,n=this.layers.length;for(this.completeLayers=!0,e=n-1;e>=0;e--)this.elements[e]||(i=this.layers[e],i.ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 99:return null}return this.createBase(t)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,i,n=t.length,r=this.layers.length;for(e=0;e<n;e+=1)for(i=0;i<r;){
if(this.layers[i].id==t[e].id){this.layers[i]=t[e];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,i){i=i||[];for(var n=this.elements,r=this.layers,s=0,o=r.length;s<o;)r[s].ind==e&&(n[s]&&n[s]!==!0?void 0!==r[s].parent?(i.push(n[s]),this.buildElementParenting(t,r[s].parent,i)):(i.push(n[s]),t.setHierarchy(i)):(this.buildItem(s),this.addPendingElement(t))),s+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},extendPrototype(BaseRenderer,SVGRenderer),SVGRenderer.prototype.createBase=function(t){return new SVGBaseElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new IShapeElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new ICompElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.layerElement,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.layerElement=document.createElementNS(svgNS,"svg"),this.layerElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.layerElement.setAttribute("width",t.w),this.layerElement.setAttribute("height",t.h),this.layerElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.layerElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.layerElement.style.width="100%",this.layerElement.style.height="100%",this.animationItem.wrapper.appendChild(this.layerElement);var e=document.createElementNS(svgNS,"defs");this.globalData.defs=e,this.layerElement.appendChild(e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.frameId=0,this.globalData.compSize={w:t.w,h:t.h},this.globalData.frameRate=t.fr;var i=document.createElementNS(svgNS,"clipPath"),n=document.createElementNS(svgNS,"rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var r="animationMask_"+randomString(10);i.setAttribute("id",r),i.appendChild(n);var s=document.createElementNS(svgNS,"g");s.setAttribute("clip-path","url(#"+r+")"),this.layerElement.appendChild(s),e.appendChild(i),this.layerElement=s,this.layers=t.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.elements=Array.apply(null,{length:t.layers.length})},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);e[t]=i,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt&&(this.elements[t-1]&&this.elements[t-1]!==!0?i.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(i)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!=t&&!this.destroyed){null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t;var e,i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=i-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var n,r=0;r<e;)this.elements[r]&&this.elements[r]!==!0&&this.elements[r].getBaseElement()&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(i,n):this.layerElement.appendChild(i)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},SVGRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length,n=document.createElementNS(svgNS,"g");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.prepareFrame=function(){var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue()},MaskElement.prototype.renderFrame=function(t){var e,i=this.masksProperties.length;for(e=0;e<i;e++)if((this.viewData[e].prop.mdf||this.firstFrame)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op.mdf||this.firstFrame)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp.mdf||this.firstFrame)&&(this.viewData[e].invRect.setAttribute("x",-t.props[12]),this.viewData[e].invRect.setAttribute("y",-t.props[13])),this.storedData[e].x&&(this.storedData[e].x.mdf||this.firstFrame))){var n=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url(#"+this.storedData[e].filterId+")")),n.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}this.firstFrame=!1},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,i){var n,r,s="";for(r=e.v.length,n=1;n<r;n+=1)1==n&&(s+=" M"+bm_rnd(e.v[0][0])+","+bm_rnd(e.v[0][1])),s+=" C"+bm_rnd(e.o[n-1][0])+","+bm_rnd(e.o[n-1][1])+" "+bm_rnd(e.i[n][0])+","+bm_rnd(e.i[n][1])+" "+bm_rnd(e.v[n][0])+","+bm_rnd(e.v[n][1]);e.c&&r>1&&(s+=" C"+bm_rnd(e.o[n-1][0])+","+bm_rnd(e.o[n-1][1])+" "+bm_rnd(e.i[0][0])+","+bm_rnd(e.i[0][1])+" "+bm_rnd(e.v[0][0])+","+bm_rnd(e.v[0][1])),i.lastPath!==s&&(i.elem&&(e.c?t.inv?i.elem.setAttribute("d",this.solidPath+s):i.elem.setAttribute("d",s):i.elem.setAttribute("d","")),i.lastPath=s)},MaskElement.prototype.getMask=function(t){for(var e=0,i=this.masksProperties.length;e<i;){if(this.masksProperties[e].nm===t)return{maskPath:this.viewData[e].prop.pv};e+=1}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.paths=null,this.masksProperties=null},BaseElement.prototype.checkMasks=function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&this.data.masksProperties[t].cl!==!1)return!0;t+=1}return!1},BaseElement.prototype.checkParenting=function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent)},BaseElement.prototype.prepareFrame=function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?this.isVisible!==!0&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!0,this.firstFrame=!0,this.data.hasMask&&(this.maskManager.firstFrame=!0)):this.isVisible!==!1&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!1);var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.elemMdf=!0,this.globalData.mdf=!0);return this.data.hasMask&&this.maskManager.prepareFrame(t*this.data.sr),this.currentFrameNum=t*this.data.sr,this.isVisible},BaseElement.prototype.globalToLocal=function(t){var e=[];e.push(this.finalTransform);for(var i=!0,n=this.comp;i;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):i=!1;var r,s,o=e.length;for(r=0;r<o;r+=1)s=e[r].mat.applyToPointArray(0,0,0),t=[t[0]-s[0],t[1]-s[1],0];return t},BaseElement.prototype.initExpressions=function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty&&(this.layerInterface.shapeInterface=ShapeExpressionInterface.createShapeInterface(this.shapesData,this.viewData,this.layerInterface))},BaseElement.prototype.setBlendMode=function(){var t="";switch(this.data.bm){case 1:t="multiply";break;case 2:t="screen";break;case 3:t="overlay";break;case 4:t="darken";break;case 5:t="lighten";break;case 6:t="color-dodge";break;case 7:t="color-burn";break;case 8:t="hard-light";break;case 9:t="soft-light";break;case 10:t="difference";break;case 11:t="exclusion";break;case 12:t="hue";break;case 13:t="saturation";break;case 14:t="color";break;case 15:t="luminosity"}var e=this.baseElement||this.layerElement;e.style["mix-blend-mode"]=t},BaseElement.prototype.init=function(){this.data.sr||(this.data.sr=1),this.dynamicProperties=[],this.data.ef&&(this.effects=new EffectsManager(this.data,this,this.dynamicProperties)),this.hidden=!1,this.firstFrame=!0,this.isVisible=!1,this.currentFrameNum=-99999,this.lastNum=-99999,this.data.ks&&(this.finalTransform={mProp:PropertyFactory.getProp(this,this.data.ks,2,null,this.dynamicProperties),matMdf:!1,opMdf:!1,mat:new Matrix,opacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.finalTransform.op=this.finalTransform.mProp.o,this.transform=this.finalTransform.mProp,11!==this.data.ty&&this.createElements(),this.data.hasMask&&this.addMasks(this.data)),this.elemMdf=!1},BaseElement.prototype.getType=function(){return this.type},BaseElement.prototype.resetHierarchy=function(){this.hierarchy?this.hierarchy.length=0:this.hierarchy=[]},BaseElement.prototype.getHierarchy=function(){return this.hierarchy||(this.hierarchy=[]),this.hierarchy},BaseElement.prototype.setHierarchy=function(t){this.hierarchy=t},BaseElement.prototype.getLayerSize=function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}},BaseElement.prototype.hide=function(){},BaseElement.prototype.mHelper=new Matrix,createElement(BaseElement,SVGBaseElement),SVGBaseElement.prototype.createElements=function(){this.layerElement=document.createElementNS(svgNS,"g"),this.transformedElement=this.layerElement,this.data.hasMask&&(this.maskedElement=this.layerElement);var t=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var e=document.createElementNS(svgNS,"mask");if(e.setAttribute("id",this.layerId),e.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e),!featureSupport.maskType&&1==this.data.td){e.setAttribute("mask-type","luminance");var i=randomString(10),n=filtersFactory.createFilter(i);this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter());var r=document.createElementNS(svgNS,"g");r.appendChild(this.layerElement),t=r,e.appendChild(r),r.setAttribute("filter","url(#"+i+")")}}else if(2==this.data.td){var s=document.createElementNS(svgNS,"mask");s.setAttribute("id",this.layerId),s.setAttribute("mask-type","alpha");var o=document.createElementNS(svgNS,"g");s.appendChild(o);var i=randomString(10),n=filtersFactory.createFilter(i),a=document.createElementNS(svgNS,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1"),n.appendChild(a),this.globalData.defs.appendChild(n);var h=document.createElementNS(svgNS,"rect");if(h.setAttribute("width",this.comp.data?this.comp.data.w:this.globalData.compSize.w),h.setAttribute("height",this.comp.data?this.comp.data.h:this.globalData.compSize.h),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("fill","#ffffff"),h.setAttribute("opacity","0"),o.setAttribute("filter","url(#"+i+")"),o.appendChild(h),o.appendChild(this.layerElement),t=o,!featureSupport.maskType){s.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter());var r=document.createElementNS(svgNS,"g");o.appendChild(h),r.appendChild(this.layerElement),t=r,o.appendChild(r)}this.globalData.defs.appendChild(s)}}else(this.data.hasMask||this.data.tt)&&this.data.tt?(this.matteElement=document.createElementNS(svgNS,"g"),this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(!this.data.ln&&!this.data.cl||4!==this.data.ty&&0!==this.data.ty||(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)),0===this.data.ty){var l=document.createElementNS(svgNS,"clipPath"),c=document.createElementNS(svgNS,"path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var u="cp_"+randomString(8);if(l.setAttribute("id",u),l.appendChild(c),this.globalData.defs.appendChild(l),this.checkMasks()){var p=document.createElementNS(svgNS,"g");p.setAttribute("clip-path","url(#"+u+")"),p.appendChild(this.layerElement),this.transformedElement=p,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url(#"+u+")")}0!==this.data.bm&&this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.data.ef&&(this.effectsManager=new SVGEffects(this)),this.checkParenting()},SVGBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,SVGBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty||this.data.hd)return!1;if(!this.isVisible)return this.isVisible;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v,this.firstFrame&&(this.finalTransform.opMdf=!0,this.finalTransform.matMdf=!0);var e,i=this.finalTransform.mat;if(this.hierarchy){var n,r=this.hierarchy.length;for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)this.finalTransform.matMdf=!!this.hierarchy[n].finalTransform.mProp.mdf||this.finalTransform.matMdf,e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else this.isVisible&&i.cloneFromProps(this.finalTransform.mProp.v.props);return t&&(e=t.mat.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.finalTransform.opacity*=t.opacity,this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf),this.finalTransform.matMdf&&this.layerElement&&this.transformedElement.setAttribute("transform",i.to2dCSS()),this.finalTransform.opMdf&&this.layerElement&&this.transformedElement.setAttribute("opacity",this.finalTransform.opacity),this.data.hasMask&&this.maskManager.renderFrame(i),this.effectsManager&&this.effectsManager.renderFrame(this.firstFrame),this.isVisible},SVGBaseElement.prototype.destroy=function(){this.layerElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&this.maskManager.destroy()},SVGBaseElement.prototype.getBaseElement=function(){return this.baseElement},SVGBaseElement.prototype.addMasks=function(t){this.maskManager=new MaskElement(t,this,this.globalData)},SVGBaseElement.prototype.setMatte=function(t){this.matteElement&&this.matteElement.setAttribute("mask","url(#"+t+")")},SVGBaseElement.prototype.setMatte=function(t){this.matteElement&&this.matteElement.setAttribute("mask","url(#"+t+")")},SVGBaseElement.prototype.hide=function(){},ITextElement.prototype.init=function(){this._parent.init.call(this),this.lettersChangedFlag=!1,this.currentTextDocumentData={};var t=this.data;this.viewData={m:{a:PropertyFactory.getProp(this,t.t.m.a,1,0,this.dynamicProperties)}};var e=this.data.t;if(e.a.length){this.viewData.a=Array.apply(null,{length:e.a.length});var i,n,r,s=e.a.length;for(i=0;i<s;i+=1)r=e.a[i],n={a:{},s:{}},"r"in r.a&&(n.a.r=PropertyFactory.getProp(this,r.a.r,0,degToRads,this.dynamicProperties)),"rx"in r.a&&(n.a.rx=PropertyFactory.getProp(this,r.a.rx,0,degToRads,this.dynamicProperties)),"ry"in r.a&&(n.a.ry=PropertyFactory.getProp(this,r.a.ry,0,degToRads,this.dynamicProperties)),"sk"in r.a&&(n.a.sk=PropertyFactory.getProp(this,r.a.sk,0,degToRads,this.dynamicProperties)),"sa"in r.a&&(n.a.sa=PropertyFactory.getProp(this,r.a.sa,0,degToRads,this.dynamicProperties)),"s"in r.a&&(n.a.s=PropertyFactory.getProp(this,r.a.s,1,.01,this.dynamicProperties)),"a"in r.a&&(n.a.a=PropertyFactory.getProp(this,r.a.a,1,0,this.dynamicProperties)),"o"in r.a&&(n.a.o=PropertyFactory.getProp(this,r.a.o,0,.01,this.dynamicProperties)),"p"in r.a&&(n.a.p=PropertyFactory.getProp(this,r.a.p,1,0,this.dynamicProperties)),"sw"in r.a&&(n.a.sw=PropertyFactory.getProp(this,r.a.sw,0,0,this.dynamicProperties)),"sc"in r.a&&(n.a.sc=PropertyFactory.getProp(this,r.a.sc,1,0,this.dynamicProperties)),"fc"in r.a&&(n.a.fc=PropertyFactory.getProp(this,r.a.fc,1,0,this.dynamicProperties)),"fh"in r.a&&(n.a.fh=PropertyFactory.getProp(this,r.a.fh,0,0,this.dynamicProperties)),"fs"in r.a&&(n.a.fs=PropertyFactory.getProp(this,r.a.fs,0,.01,this.dynamicProperties)),"fb"in r.a&&(n.a.fb=PropertyFactory.getProp(this,r.a.fb,0,.01,this.dynamicProperties)),"t"in r.a&&(n.a.t=PropertyFactory.getProp(this,r.a.t,0,0,this.dynamicProperties)),n.s=PropertyFactory.getTextSelectorProp(this,r.s,this.dynamicProperties),n.s.t=r.s.t,this.viewData.a[i]=n}else this.viewData.a=[];e.p&&"m"in e.p?(this.viewData.p={f:PropertyFactory.getProp(this,e.p.f,0,0,this.dynamicProperties),l:PropertyFactory.getProp(this,e.p.l,0,0,this.dynamicProperties),r:e.p.r,m:this.maskManager.getMaskProperty(e.p.m)},this.maskPath=!0):this.maskPath=!1},ITextElement.prototype.prepareFrame=function(t){var e=0,i=this.data.t.d.k.length,n=this.data.t.d.k[e].s;for(e+=1;e<i&&!(this.data.t.d.k[e].t>t);)n=this.data.t.d.k[e].s,e+=1;this.lettersChangedFlag=!1,n!==this.currentTextDocumentData&&(this.currentTextDocumentData=n,this.lettersChangedFlag=!0,this.buildNewText()),this._parent.prepareFrame.call(this,t)},ITextElement.prototype.createPathShape=function(t,e){var i,n,r,s,o=e.length,a="";for(i=0;i<o;i+=1){for(r=e[i].ks.k.i.length,s=e[i].ks.k,n=1;n<r;n+=1)1==n&&(a+=" M"+t.applyToPointStringified(s.v[0][0],s.v[0][1])),a+=" C"+t.applyToPointStringified(s.o[n-1][0],s.o[n-1][1])+" "+t.applyToPointStringified(s.i[n][0],s.i[n][1])+" "+t.applyToPointStringified(s.v[n][0],s.v[n][1]);a+=" C"+t.applyToPointStringified(s.o[n-1][0],s.o[n-1][1])+" "+t.applyToPointStringified(s.i[0][0],s.i[0][1])+" "+t.applyToPointStringified(s.v[0][0],s.v[0][1]),a+="z"}return a},ITextElement.prototype.getMeasures=function(){var t,e,i,n,r=this.mHelper,s=this.renderType,o=this.data,a=this.currentTextDocumentData,h=a.l;if(this.maskPath){var l=this.viewData.p.m;if(!this.viewData.p.n||this.viewData.p.mdf){var c=l.v;this.viewData.p.r&&(c=reversePath(c));var u={tLength:0,segments:[]};n=c.v.length-1;var p,f=0;for(i=0;i<n;i+=1)p={s:c.v[i],e:c.v[i+1],to:[c.o[i][0]-c.v[i][0],c.o[i][1]-c.v[i][1]],ti:[c.i[i+1][0]-c.v[i+1][0],c.i[i+1][1]-c.v[i+1][1]]},bez.buildBezierData(p),u.tLength+=p.bezierData.segmentLength,u.segments.push(p),f+=p.bezierData.segmentLength;i=n,l.v.c&&(p={s:c.v[i],e:c.v[0],to:[c.o[i][0]-c.v[i][0],c.o[i][1]-c.v[i][1]],ti:[c.i[0][0]-c.v[0][0],c.i[0][1]-c.v[0][1]]},bez.buildBezierData(p),u.tLength+=p.bezierData.segmentLength,u.segments.push(p),f+=p.bezierData.segmentLength),this.viewData.p.pi=u}var d,m,g,u=this.viewData.p.pi,v=this.viewData.p.f.v,y=0,_=1,b=0,x=!0,E=u.segments;if(v<0&&l.v.c)for(u.tLength<Math.abs(v)&&(v=-Math.abs(v)%u.tLength),y=E.length-1,g=E[y].bezierData.points,_=g.length-1;v<0;)v+=g[_].partialLength,_-=1,_<0&&(y-=1,g=E[y].bezierData.points,_=g.length-1);g=E[y].bezierData.points,m=g[_-1],d=g[_];var w,T,A=d.partialLength}n=h.length,t=0,e=0;var S,M,P,C,R,I=1.2*a.s*.714,O=!0,N=this.viewData,L=Array.apply(null,{length:n});C=N.a.length;var k,D,F,B,U,V,z,G,j,H,W,Y,q,X,Z,Q,J=-1,$=v,K=y,tt=_,et=-1,it=0;for(i=0;i<n;i+=1)if(r.reset(),V=1,h[i].n)t=0,e+=a.yOffset,e+=O?1:0,v=$,O=!1,it=0,this.maskPath&&(y=K,_=tt,g=E[y].bezierData.points,m=g[_-1],d=g[_],A=d.partialLength,b=0),L[i]=this.emptyProp;else{if(this.maskPath){if(et!==h[i].line){switch(a.j){case 1:v+=f-a.lineWidths[h[i].line];break;case 2:v+=(f-a.lineWidths[h[i].line])/2}et=h[i].line}J!==h[i].ind&&(h[J]&&(v+=h[J].extra),v+=h[i].an/2,J=h[i].ind),v+=N.m.a.v[0]*h[i].an/200;var nt=0;for(P=0;P<C;P+=1)S=N.a[P].a,"p"in S&&(M=N.a[P].s,D=M.getMult(h[i].anIndexes[P],o.t.a[P].s.totalChars),nt+=D.length?S.p.v[0]*D[0]:S.p.v[0]*D);for(x=!0;x;)b+A>=v+nt||!g?(w=(v+nt-b)/d.partialLength,B=m.point[0]+(d.point[0]-m.point[0])*w,U=m.point[1]+(d.point[1]-m.point[1])*w,r.translate(0,-(N.m.a.v[1]*I/100)+e),x=!1):g&&(b+=d.partialLength,_+=1,_>=g.length&&(_=0,y+=1,E[y]?g=E[y].bezierData.points:l.v.c?(_=0,y=0,g=E[y].bezierData.points):(b-=d.partialLength,g=null)),g&&(m=d,d=g[_],A=d.partialLength));F=h[i].an/2-h[i].add,r.translate(-F,0,0)}else F=h[i].an/2-h[i].add,r.translate(-F,0,0),r.translate(-N.m.a.v[0]*h[i].an/200,-N.m.a.v[1]*I/100,0);for(it+=h[i].l/2,P=0;P<C;P+=1)S=N.a[P].a,"t"in S&&(M=N.a[P].s,D=M.getMult(h[i].anIndexes[P],o.t.a[P].s.totalChars),this.maskPath?v+=D.length?S.t*D[0]:S.t*D:t+=D.length?S.t.v*D[0]:S.t.v*D);for(it+=h[i].l/2,a.strokeWidthAnim&&(G=a.sw||0),a.strokeColorAnim&&(z=a.sc?[a.sc[0],a.sc[1],a.sc[2]]:[0,0,0]),a.fillColorAnim&&(j=[a.fc[0],a.fc[1],a.fc[2]]),P=0;P<C;P+=1)S=N.a[P].a,"a"in S&&(M=N.a[P].s,D=M.getMult(h[i].anIndexes[P],o.t.a[P].s.totalChars),D.length?r.translate(-S.a.v[0]*D[0],-S.a.v[1]*D[1],S.a.v[2]*D[2]):r.translate(-S.a.v[0]*D,-S.a.v[1]*D,S.a.v[2]*D));for(P=0;P<C;P+=1)S=N.a[P].a,"s"in S&&(M=N.a[P].s,D=M.getMult(h[i].anIndexes[P],o.t.a[P].s.totalChars),D.length?r.scale(1+(S.s.v[0]-1)*D[0],1+(S.s.v[1]-1)*D[1],1):r.scale(1+(S.s.v[0]-1)*D,1+(S.s.v[1]-1)*D,1));for(P=0;P<C;P+=1){if(S=N.a[P].a,M=N.a[P].s,D=M.getMult(h[i].anIndexes[P],o.t.a[P].s.totalChars),"sk"in S&&(D.length?r.skewFromAxis(-S.sk.v*D[0],S.sa.v*D[1]):r.skewFromAxis(-S.sk.v*D,S.sa.v*D)),"r"in S&&(D.length?r.rotateZ(-S.r.v*D[2]):r.rotateZ(-S.r.v*D)),"ry"in S&&(D.length?r.rotateY(S.ry.v*D[1]):r.rotateY(S.ry.v*D)),"rx"in S&&(D.length?r.rotateX(S.rx.v*D[0]):r.rotateX(S.rx.v*D)),"o"in S&&(V+=D.length?(S.o.v*D[0]-V)*D[0]:(S.o.v*D-V)*D),a.strokeWidthAnim&&"sw"in S&&(G+=D.length?S.sw.v*D[0]:S.sw.v*D),a.strokeColorAnim&&"sc"in S)for(H=0;H<3;H+=1)D.length?z[H]=Math.round(255*(z[H]+(S.sc.v[H]-z[H])*D[0])):z[H]=Math.round(255*(z[H]+(S.sc.v[H]-z[H])*D));if(a.fillColorAnim){if("fc"in S)for(H=0;H<3;H+=1)D.length?j[H]=j[H]+(S.fc.v[H]-j[H])*D[0]:j[H]=j[H]+(S.fc.v[H]-j[H])*D;"fh"in S&&(j=D.length?addHueToRGB(j,S.fh.v*D[0]):addHueToRGB(j,S.fh.v*D)),"fs"in S&&(j=D.length?addSaturationToRGB(j,S.fs.v*D[0]):addSaturationToRGB(j,S.fs.v*D)),"fb"in S&&(j=D.length?addBrightnessToRGB(j,S.fb.v*D[0]):addBrightnessToRGB(j,S.fb.v*D))}}for(P=0;P<C;P+=1)S=N.a[P].a,"p"in S&&(M=N.a[P].s,D=M.getMult(h[i].anIndexes[P],o.t.a[P].s.totalChars),this.maskPath?D.length?r.translate(0,S.p.v[1]*D[0],-S.p.v[2]*D[1]):r.translate(0,S.p.v[1]*D,-S.p.v[2]*D):D.length?r.translate(S.p.v[0]*D[0],S.p.v[1]*D[1],-S.p.v[2]*D[2]):r.translate(S.p.v[0]*D,S.p.v[1]*D,-S.p.v[2]*D));if(a.strokeWidthAnim&&(W=G<0?0:G),a.strokeColorAnim&&(Y="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),a.fillColorAnim&&(q="rgb("+Math.round(255*j[0])+","+Math.round(255*j[1])+","+Math.round(255*j[2])+")"),this.maskPath){if(o.t.p.p){T=(d.point[1]-m.point[1])/(d.point[0]-m.point[0]);var rt=180*Math.atan(T)/Math.PI;d.point[0]<m.point[0]&&(rt+=180),r.rotate(-rt*Math.PI/180)}r.translate(B,U,0),r.translate(N.m.a.v[0]*h[i].an/200,N.m.a.v[1]*I/100,0),v-=N.m.a.v[0]*h[i].an/200,h[i+1]&&J!==h[i+1].ind&&(v+=h[i].an/2,v+=a.tr/1e3*a.s)}else{switch(r.translate(t,e,0),a.ps&&r.translate(a.ps[0],a.ps[1]+a.ascent,0),a.j){case 1:r.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[h[i].line]),0,0);break;case 2:r.translate(a.justifyOffset+(a.boxWidth-a.lineWidths[h[i].line])/2,0,0)}r.translate(F,0,0),r.translate(N.m.a.v[0]*h[i].an/200,N.m.a.v[1]*I/100,0),t+=h[i].l+a.tr/1e3*a.s}"html"===s?X=r.toCSS():"svg"===s?X=r.to2dCSS():Z=[r.props[0],r.props[1],r.props[2],r.props[3],r.props[4],r.props[5],r.props[6],r.props[7],r.props[8],r.props[9],r.props[10],r.props[11],r.props[12],r.props[13],r.props[14],r.props[15]],Q=V,k=this.renderedLetters[i],!k||k.o===Q&&k.sw===W&&k.sc===Y&&k.fc===q?"svg"!==s&&"html"!==s||k&&k.m===X?"canvas"!==s||k&&k.props[0]===Z[0]&&k.props[1]===Z[1]&&k.props[4]===Z[4]&&k.props[5]===Z[5]&&k.props[12]===Z[12]&&k.props[13]===Z[13]?R=k:(this.lettersChangedFlag=!0,R=new LetterProps(Q,W,Y,q,null,Z)):(this.lettersChangedFlag=!0,R=new LetterProps(Q,W,Y,q,X)):(this.lettersChangedFlag=!0,R=new LetterProps(Q,W,Y,q,X,Z)),this.renderedLetters[i]=R}},ITextElement.prototype.emptyProp=new LetterProps,createElement(SVGBaseElement,SVGTextElement),SVGTextElement.prototype.init=ITextElement.prototype.init,SVGTextElement.prototype.createPathShape=ITextElement.prototype.createPathShape,SVGTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,SVGTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,SVGTextElement.prototype.createElements=function(){this._parent.createElements.call(this),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},SVGTextElement.prototype.buildNewText=function(){var t,e,i=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0}),i.fc?this.layerElement.setAttribute("fill","rgb("+Math.round(255*i.fc[0])+","+Math.round(255*i.fc[1])+","+Math.round(255*i.fc[2])+")"):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke","rgb("+Math.round(255*i.sc[0])+","+Math.round(255*i.sc[1])+","+Math.round(255*i.sc[2])+")"),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.s);var n=this.globalData.fontManager.getFontByName(i.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var r=i.fWeight,s=i.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",r)}var o=i.l||[];if(e=o.length){var a,h,l=this.mHelper,c="",u=this.data.singleShape;if(u)var p=0,f=0,d=i.lineWidths,m=i.boxWidth,g=!0;var v=0;for(t=0;t<e;t+=1){if(this.globalData.fontManager.chars?u&&0!==t||(a=this.textSpans[v]?this.textSpans[v]:document.createElementNS(svgNS,"path")):a=this.textSpans[v]?this.textSpans[v]:document.createElementNS(svgNS,"text"),a.style.display="inherit",a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),u&&o[t].n&&(p=0,f+=i.yOffset,f+=g?1:0,g=!1),l.reset(),this.globalData.fontManager.chars&&l.scale(i.s/100,i.s/100),u){switch(i.ps&&l.translate(i.ps[0],i.ps[1]+i.ascent,0),i.j){case 1:l.translate(i.justifyOffset+(m-d[o[t].line]),0,0);break;case 2:l.translate(i.justifyOffset+(m-d[o[t].line])/2,0,0)}l.translate(p,f,0)}if(this.globalData.fontManager.chars){var y,_=this.globalData.fontManager.getCharData(i.t.charAt(t),n.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily);y=_?_.data:null,y&&y.shapes&&(h=y.shapes[0].it,u||(c=""),c+=this.createPathShape(l,h),u||a.setAttribute("d",c)),u||this.layerElement.appendChild(a)}else a.textContent=o[t].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.layerElement.appendChild(a),u&&a.setAttribute("transform",l.to2dCSS());u&&(p+=o[t].l,p+=i.tr/1e3*i.s),this.textSpans[v]=a,v+=1}if(!u)for(;v<this.textSpans.length;)this.textSpans[v].style.display="none",v+=1;u&&this.globalData.fontManager.chars&&(a.setAttribute("d",c),this.layerElement.appendChild(a))}},SVGTextElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},SVGTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(e===!1)return void this.hide();if(this.hidden&&(this.hidden=!1,this.layerElement.style.display="block"),!this.data.singleShape&&(this.getMeasures(),this.lettersChangedFlag)){var i,n,r=this.renderedLetters,s=this.currentTextDocumentData.l;n=s.length;var o;for(i=0;i<n;i+=1)s[i].n||(o=r[i],this.textSpans[i].setAttribute("transform",o.m),this.textSpans[i].setAttribute("opacity",o.o),o.sw&&this.textSpans[i].setAttribute("stroke-width",o.sw),o.sc&&this.textSpans[i].setAttribute("stroke",o.sc),o.fc&&this.textSpans[i].setAttribute("fill",o.fc));this.firstFrame&&(this.firstFrame=!1)}},SVGTextElement.prototype.destroy=function(){this._parent.destroy.call(this._parent)},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,i,n,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(n=this.elem.maskManager.masksProperties.length,i=0):(i=this.filterManager.effectElements[0].p.v-1,n=i+1),e=document.createElementNS(svgNS,"g"),e.setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1),i;i<n;i+=1)t=document.createElementNS(svgNS,"path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var s=document.createElementNS(svgNS,"mask"),o="stms_"+randomString(10);s.setAttribute("id",o),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var a=document.createElementNS(svgNS,"g");a.setAttribute("mask","url(#"+o+")"),r[0]&&a.appendChild(r[0]),this.elem.layerElement.appendChild(a),this.masker=s,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){
if(2===this.filterManager.effectElements[10].p.v)for(var r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,i,n,r=this.paths.length;for(e=0;e<r;e+=1)if(i=this.elem.maskManager.viewData[this.paths[e].m],n=this.paths[e].p,(t||this.filterManager.mdf||i.prop.mdf)&&n.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p.mdf||this.filterManager.effectElements[4].p.mdf||this.filterManager.effectElements[7].p.mdf||this.filterManager.effectElements[8].p.mdf||i.prop.mdf){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,a=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,h=n.getTotalLength();s="0 0 0 "+h*o+" ";var l,c=h*(a-o),u=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,p=Math.floor(c/u);for(l=0;l<p;l+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";s+="0 "+10*h+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;n.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p.mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p.mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p.mdf)){var f=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*f[0])+","+bm_floor(255*f[1])+","+bm_floor(255*f[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,r=n[0]+" "+i[0]+" "+e[0],s=n[1]+" "+i[1]+" "+e[1],o=n[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",o)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var i=document.createElementNS(svgNS,t);return i.setAttribute("type","table"),e.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(t,e,i,n,r){for(var s,o,a=0,h=256,l=Math.min(t,e),c=Math.max(t,e),u=Array.call(null,{length:h}),p=0,f=r-n,d=e-t;a<=256;)s=a/256,o=s<=l?d<0?r:n:s>=c?d<0?n:r:n+f*Math.pow((s-t)/d,1/i),u[p++]=o,a+=256/(h-1);return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager.mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[2].p.mdf||i[3].p.mdf||i[4].p.mdf||i[5].p.mdf||i[6].p.mdf)&&(e=this.getTableValue(i[2].p.v,i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[9].p.mdf||i[10].p.mdf||i[11].p.mdf||i[12].p.mdf||i[13].p.mdf)&&(e=this.getTableValue(i[9].p.v,i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[16].p.mdf||i[17].p.mdf||i[18].p.mdf||i[19].p.mdf||i[20].p.mdf)&&(e=this.getTableValue(i[16].p.v,i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[23].p.mdf||i[24].p.mdf||i[25].p.mdf||i[26].p.mdf||i[27].p.mdf)&&(e=this.getTableValue(i[23].p.v,i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[30].p.mdf||i[31].p.mdf||i[32].p.mdf||i[33].p.mdf||i[34].p.mdf)&&(e=this.getTableValue(i[30].p.v,i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},createElement(SVGBaseElement,ICompElement),ICompElement.prototype.hide=function(){if(!this.hidden){var t,e=this.elements.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].hide();this.hidden=!0}},ICompElement.prototype.prepareFrame=function(t){if(this._parent.prepareFrame.call(this,t),this.isVisible!==!1||this.data.xt){if(this.tm){var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}else this.renderedFrame=t/this.data.sr;var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=0;i<n;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st)}},ICompElement.prototype.renderFrame=function(t){var e,i=this._parent.renderFrame.call(this,t),n=this.layers.length;if(i===!1)return void this.hide();for(this.hidden=!1,e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.firstFrame&&(this.firstFrame=!1)},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroy=function(){this._parent.destroy.call(this._parent);var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.checkLayers=SVGRenderer.prototype.checkLayers,ICompElement.prototype.buildItem=SVGRenderer.prototype.buildItem,ICompElement.prototype.buildAllItems=SVGRenderer.prototype.buildAllItems,ICompElement.prototype.buildElementParenting=SVGRenderer.prototype.buildElementParenting,ICompElement.prototype.createItem=SVGRenderer.prototype.createItem,ICompElement.prototype.createImage=SVGRenderer.prototype.createImage,ICompElement.prototype.createComp=SVGRenderer.prototype.createComp,ICompElement.prototype.createSolid=SVGRenderer.prototype.createSolid,ICompElement.prototype.createShape=SVGRenderer.prototype.createShape,ICompElement.prototype.createText=SVGRenderer.prototype.createText,ICompElement.prototype.createBase=SVGRenderer.prototype.createBase,ICompElement.prototype.appendElementInPos=SVGRenderer.prototype.appendElementInPos,ICompElement.prototype.checkPendingElements=SVGRenderer.prototype.checkPendingElements,ICompElement.prototype.addPendingElement=SVGRenderer.prototype.addPendingElement,createElement(SVGBaseElement,IImageElement),IImageElement.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData);this._parent.createElements.call(this),this.innerElem=document.createElementNS(svgNS,"image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio","xMidYMid slice"),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.maskedElement=this.innerElem,this.layerElement.appendChild(this.innerElem),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},IImageElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},IImageElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);return e===!1?void this.hide():(this.hidden&&(this.hidden=!1,this.layerElement.style.display="block"),void(this.firstFrame&&(this.firstFrame=!1)))},IImageElement.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.innerElem=null},createElement(SVGBaseElement,IShapeElement),IShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"butt"},IShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},IShapeElement.prototype.buildExpressionInterface=function(){},IShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.viewData,this.layerElement,this.dynamicProperties,0),this.data.hd&&!this.data.td||styleUnselectableDiv(this.layerElement)},IShapeElement.prototype.setGradientData=function(t,e,i){var n,r="gr_"+randomString(10);n=1===e.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var s,o,a,h=[];for(a=4*e.g.p,o=0;o<a;o+=4)s=document.createElementNS(svgNS,"stop"),n.appendChild(s),h.push(s);t.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+r+")"),this.globalData.defs.appendChild(n),i.gf=n,i.cst=h},IShapeElement.prototype.setGradientOpacity=function(t,e,i){if(t.g.k.k[0].s&&t.g.k.k[0].s.length>4*t.g.p||t.g.k.k.length>4*t.g.p){var n,r,s,o,a=document.createElementNS(svgNS,"mask"),h=document.createElementNS(svgNS,"path");a.appendChild(h);var l="op_"+randomString(10),c="mk_"+randomString(10);a.setAttribute("id",c),n=1===t.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),n.setAttribute("id",l),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse"),o=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var u=[];for(s=4*t.g.p;s<o;s+=2)r=document.createElementNS(svgNS,"stop"),r.setAttribute("stop-color","rgb(255,255,255)"),n.appendChild(r),u.push(r);return h.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+l+")"),this.globalData.defs.appendChild(n),this.globalData.defs.appendChild(a),e.of=n,e.ost=u,i.msElem=h,c}},IShapeElement.prototype.searchShapes=function(t,e,i,n,r,s){s=s||[];var o,a,h,l,c,u=[].concat(s),p=t.length-1,f=[],d=[];for(o=p;o>=0;o-=1)if("fl"==t[o].ty||"st"==t[o].ty||"gf"==t[o].ty||"gs"==t[o].ty){e[o]={},l={type:t[o].ty,d:"",ld:"",lvl:r,mdf:!1};var m=document.createElementNS(svgNS,"path");if(e[o].o=PropertyFactory.getProp(this,t[o].o,0,.01,n),("st"==t[o].ty||"gs"==t[o].ty)&&(m.setAttribute("stroke-linecap",this.lcEnum[t[o].lc]||"round"),m.setAttribute("stroke-linejoin",this.ljEnum[t[o].lj]||"round"),m.setAttribute("fill-opacity","0"),1==t[o].lj&&m.setAttribute("stroke-miterlimit",t[o].ml),e[o].w=PropertyFactory.getProp(this,t[o].w,0,null,n),t[o].d)){var g=PropertyFactory.getDashProp(this,t[o].d,"svg",n);g.k||(m.setAttribute("stroke-dasharray",g.dasharray),m.setAttribute("stroke-dashoffset",g.dashoffset)),e[o].d=g}if("fl"==t[o].ty||"st"==t[o].ty)e[o].c=PropertyFactory.getProp(this,t[o].c,1,255,n),i.appendChild(m);else{e[o].g=PropertyFactory.getGradientProp(this,t[o].g,n),2==t[o].t&&(e[o].h=PropertyFactory.getProp(this,t[o].h,1,.01,n),e[o].a=PropertyFactory.getProp(this,t[o].a,1,degToRads,n)),e[o].s=PropertyFactory.getProp(this,t[o].s,1,null,n),e[o].e=PropertyFactory.getProp(this,t[o].e,1,null,n),this.setGradientData(m,t[o],e[o],l);var v=this.setGradientOpacity(t[o],e[o],l);v&&m.setAttribute("mask","url(#"+v+")"),e[o].elem=m,i.appendChild(m)}t[o].ln&&m.setAttribute("id",t[o].ln),t[o].cl&&m.setAttribute("class",t[o].cl),l.pElem=m,this.stylesList.push(l),e[o].style=l,f.push(l)}else if("gr"==t[o].ty){e[o]={it:[]};var y=document.createElementNS(svgNS,"g");i.appendChild(y),e[o].gr=y,this.searchShapes(t[o].it,e[o].it,y,n,r+1,s)}else if("tr"==t[o].ty)e[o]={transform:{op:PropertyFactory.getProp(this,t[o].o,0,.01,n),mProps:PropertyFactory.getProp(this,t[o],2,null,n)},elements:[]},c=e[o].transform,u.push(c);else if("sh"==t[o].ty||"rc"==t[o].ty||"el"==t[o].ty||"sr"==t[o].ty){e[o]={elements:[],caches:[],styles:[],transformers:u,lStr:""};var _=4;for("rc"==t[o].ty?_=5:"el"==t[o].ty?_=6:"sr"==t[o].ty&&(_=7),e[o].sh=ShapePropertyFactory.getShapeProp(this,t[o],_,n),e[o].lvl=r,this.shapes.push(e[o].sh),this.addShapeToModifiers(e[o].sh),h=this.stylesList.length,a=0;a<h;a+=1)this.stylesList[a].closed||e[o].elements.push({ty:this.stylesList[a].type,st:this.stylesList[a]})}else if("tm"==t[o].ty||"rd"==t[o].ty||"ms"==t[o].ty){var b=ShapeModifiers.getModifier(t[o].ty);b.init(this,t[o],n),this.shapeModifiers.push(b),d.push(b),e[o]=b}for(p=f.length,o=0;o<p;o+=1)f[o].closed=!0;for(p=d.length,o=0;o<p;o+=1)d[o].closed=!0},IShapeElement.prototype.addShapeToModifiers=function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},IShapeElement.prototype.renderModifiers=function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].reset();for(e=this.shapeModifiers.length,t=e-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this.firstFrame)}},IShapeElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);return e===!1?void this.hide():(this.globalToLocal([0,0,0]),this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers(),void this.renderShape(null,null,!0,null))},IShapeElement.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";var t,e=this.stylesList.length;for(t=e-1;t>=0;t-=1)"0"!==this.stylesList[t].ld&&(this.stylesList[t].ld="0",this.stylesList[t].pElem.style.display="none",this.stylesList[t].pElem.parentNode&&(this.stylesList[t].parent=this.stylesList[t].pElem.parentNode));this.hidden=!0}},IShapeElement.prototype.renderShape=function(t,e,i,n){var r,s;if(!t)for(t=this.shapesData,s=this.stylesList.length,r=0;r<s;r+=1)this.stylesList[r].d="",this.stylesList[r].mdf=!1;e||(e=this.viewData),s=t.length-1;var o;for(r=s;r>=0;r-=1)o=t[r].ty,"tr"==o?((this.firstFrame||e[r].transform.op.mdf&&n)&&n.setAttribute("opacity",e[r].transform.op.v),(this.firstFrame||e[r].transform.mProps.mdf&&n)&&n.setAttribute("transform",e[r].transform.mProps.v.to2dCSS())):"sh"==o||"el"==o||"rc"==o||"sr"==o?this.renderPath(t[r],e[r]):"fl"==o?this.renderFill(t[r],e[r]):"gf"==o?this.renderGradient(t[r],e[r]):"gs"==o?(this.renderGradient(t[r],e[r]),this.renderStroke(t[r],e[r])):"st"==o?this.renderStroke(t[r],e[r]):"gr"==o&&this.renderShape(t[r].it,e[r].it,!1,e[r].gr);if(i){for(s=this.stylesList.length,r=0;r<s;r+=1)"0"===this.stylesList[r].ld&&(this.stylesList[r].ld="1",this.stylesList[r].pElem.style.display="block"),(this.stylesList[r].mdf||this.firstFrame)&&(this.stylesList[r].pElem.setAttribute("d",this.stylesList[r].d),this.stylesList[r].msElem&&this.stylesList[r].msElem.setAttribute("d",this.stylesList[r].d));this.firstFrame&&(this.firstFrame=!1)}},IShapeElement.prototype.renderPath=function(t,e){var i,n,r,s,o,a,h,l,c=e.elements.length,u=e.lvl;for(l=0;l<c;l+=1){a=e.sh.mdf||this.firstFrame,o="";var p=e.sh.paths;if(s=p.length,e.elements[l].st.lvl<u){var f,d,m=this.mHelper.reset();for(d=e.transformers.length-1;d>=0;d-=1)a=e.transformers[d].mProps.mdf||a,f=e.transformers[d].mProps.v.props,m.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]);if(a){for(r=0;r<s;r+=1)if(h=p[r],h&&h.v){for(i=h.v.length,n=1;n<i;n+=1)1==n&&(o+=" M"+m.applyToPointStringified(h.v[0][0],h.v[0][1])),o+=" C"+m.applyToPointStringified(h.o[n-1][0],h.o[n-1][1])+" "+m.applyToPointStringified(h.i[n][0],h.i[n][1])+" "+m.applyToPointStringified(h.v[n][0],h.v[n][1]);1==i&&(o+=" M"+m.applyToPointStringified(h.v[0][0],h.v[0][1])),h.c&&(o+=" C"+m.applyToPointStringified(h.o[n-1][0],h.o[n-1][1])+" "+m.applyToPointStringified(h.i[0][0],h.i[0][1])+" "+m.applyToPointStringified(h.v[0][0],h.v[0][1]),o+="z")}e.caches[l]=o}else o=e.caches[l]}else if(a){for(r=0;r<s;r+=1)if(h=p[r],h&&h.v){for(i=h.v.length,n=1;n<i;n+=1)1==n&&(o+=" M"+h.v[0].join(",")),o+=" C"+h.o[n-1].join(",")+" "+h.i[n].join(",")+" "+h.v[n].join(",");1==i&&(o+=" M"+h.v[0].join(",")),h.c&&i&&(o+=" C"+h.o[n-1].join(",")+" "+h.i[0].join(",")+" "+h.v[0].join(","),o+="z")}e.caches[l]=o}else o=e.caches[l];e.elements[l].st.d+=o,e.elements[l].st.mdf=a||e.elements[l].st.mdf}},IShapeElement.prototype.renderFill=function(t,e){var i=e.style;(e.c.mdf||this.firstFrame)&&i.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&i.pElem.setAttribute("fill-opacity",e.o.v)},IShapeElement.prototype.renderGradient=function(t,e){var i=e.gf,n=e.of,r=e.s.v,s=e.e.v;if(e.o.mdf||this.firstFrame){var o="gf"===t.ty?"fill-opacity":"stroke-opacity";e.elem.setAttribute(o,e.o.v)}if(e.s.mdf||this.firstFrame){var a=1===t.t?"x1":"cx",h="x1"===a?"y1":"cy";i.setAttribute(a,r[0]),i.setAttribute(h,r[1]),n&&(n.setAttribute(a,r[0]),n.setAttribute(h,r[1]))}var l,c,u,p;if(e.g.cmdf||this.firstFrame){l=e.cst;var f=e.g.c;for(u=l.length,c=0;c<u;c+=1)p=l[c],p.setAttribute("offset",f[4*c]+"%"),p.setAttribute("stop-color","rgb("+f[4*c+1]+","+f[4*c+2]+","+f[4*c+3]+")")}if(n&&(e.g.omdf||this.firstFrame)){l=e.ost;var d=e.g.o;for(u=l.length,c=0;c<u;c+=1)p=l[c],p.setAttribute("offset",d[2*c]+"%"),p.setAttribute("stop-opacity",d[2*c+1])}if(1===t.t)(e.e.mdf||this.firstFrame)&&(i.setAttribute("x2",s[0]),i.setAttribute("y2",s[1]),n&&(n.setAttribute("x2",s[0]),n.setAttribute("y2",s[1])));else{var m;if((e.s.mdf||e.e.mdf||this.firstFrame)&&(m=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2)),i.setAttribute("r",m),n&&n.setAttribute("r",m)),e.e.mdf||e.h.mdf||e.a.mdf||this.firstFrame){m||(m=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2)));var g=Math.atan2(s[1]-r[1],s[0]-r[0]),v=e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v,y=m*v,_=Math.cos(g+e.a.v)*y+r[0],b=Math.sin(g+e.a.v)*y+r[1];i.setAttribute("fx",_),i.setAttribute("fy",b),n&&(n.setAttribute("fx",_),n.setAttribute("fy",b))}}},IShapeElement.prototype.renderStroke=function(t,e){var i=e.style,n=e.d;n&&n.k&&(n.mdf||this.firstFrame)&&(i.pElem.setAttribute("stroke-dasharray",n.dasharray),i.pElem.setAttribute("stroke-dashoffset",n.dashoffset)),e.c&&(e.c.mdf||this.firstFrame)&&i.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||this.firstFrame)&&i.pElem.setAttribute("stroke-opacity",e.o.v),(e.w.mdf||this.firstFrame)&&(i.pElem.setAttribute("stroke-width",e.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",e.w.v))},IShapeElement.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.shapeData=null,this.viewData=null,this.parentContainer=null,this.placeholder=null},createElement(SVGBaseElement,ISolidElement),ISolidElement.prototype.createElements=function(){this._parent.createElements.call(this);var t=document.createElementNS(svgNS,"rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t),this.innerElem=t,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},ISolidElement.prototype.hide=IImageElement.prototype.hide,ISolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,ISolidElement.prototype.destroy=IImageElement.prototype.destroy;var animationManager=function(){function t(t){for(var e=0,i=t.target;e<T;)E[e].animation===i&&(E.splice(e,1),e-=1,T-=1,i.isPaused||n()),e+=1}function e(t,e){if(!t)return null;for(var i=0;i<T;){if(E[i].elem==t&&null!==E[i].elem)return E[i].animation;i+=1}var n=new AnimationItem;return n.setData(t,e),r(n,t),n}function i(){S+=1,b()}function n(){S-=1,0===S&&(A=!0)}function r(e,r){e.addEventListener("destroy",t),e.addEventListener("_active",i),e.addEventListener("_idle",n),E.push({elem:r,animation:e}),T+=1}function s(t){var e=new AnimationItem;return r(e,null),e.setParams(t),e}function o(t,e){var i;for(i=0;i<T;i+=1)E[i].animation.setSpeed(t,e)}function a(t,e){var i;for(i=0;i<T;i+=1)E[i].animation.setDirection(t,e)}function h(t){var e;for(e=0;e<T;e+=1)E[e].animation.play(t)}function l(t,e){w=Date.now();var i;for(i=0;i<T;i+=1)E[i].animation.moveFrame(t,e)}function c(t){var e,i=t-w;for(e=0;e<T;e+=1)E[e].animation.advanceTime(i);w=t,A||requestAnimationFrame(c)}function u(t){w=t,requestAnimationFrame(c)}function p(t){var e;for(e=0;e<T;e+=1)E[e].animation.pause(t)}function f(t,e,i){var n;for(n=0;n<T;n+=1)E[n].animation.goToAndStop(t,e,i)}function d(t){var e;for(e=0;e<T;e+=1)E[e].animation.stop(t)}function m(t){var e;for(e=0;e<T;e+=1)E[e].animation.togglePause(t)}function g(t){var e;for(e=T-1;e>=0;e-=1)E[e].animation.destroy(t)}function v(t,i,n){var r,s=document.getElementsByClassName("bodymovin"),o=s.length;for(r=0;r<o;r+=1)n&&s[r].setAttribute("data-bm-type",n),e(s[r],t);if(i&&0===o){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerHTML="";var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.setAttribute("data-bm-type",n),a.appendChild(h),e(h,t)}}function y(){var t;for(t=0;t<T;t+=1)E[t].animation.resize()}function _(){requestAnimationFrame(u)}function b(){A&&(A=!1,requestAnimationFrame(u))}var x={},E=[],w=0,T=0,A=!0,S=0;return setTimeout(_,0),x.registerAnimation=e,x.loadAnimation=s,x.setSpeed=o,x.setDirection=a,x.play=h,x.moveFrame=l,x.pause=p,x.stop=d,x.togglePause=m,x.searchAnimations=v,x.resize=y,x.start=_,x.goToAndStop=f,x.destroy=g,x}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.pendingElements=0,this.playCount=0,this.prerenderFramesFlag=!0,this.animationData={},this.layers=[],this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=randomString(10),this.scaleMode="fit",this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this.pendingSegment=!1,this._idle=!0,this.projectInterface=ProjectInterface()};AnimationItem.prototype.setParams=function(t){var e=this;t.context&&(this.context=t.context),(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var i=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(i){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;case"hybrid":case"html":default:this.renderer=new HybridRenderer(this,t.rendererSettings)}if(this.renderer.setProjectInterface(this.projectInterface),this.animType=i,""===t.loop||null===t.loop||(t.loop===!1?this.loop=!1:t.loop===!0?this.loop=!0:this.loop=parseInt(t.loop)),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.prerenderFramesFlag=!("prerender"in t)||t.prerender,this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments,t.animationData)e.configAnimation(t.animationData);else if(t.path){"json"!=t.path.substr(-4)&&("/"!=t.path.substr(-1,1)&&(t.path+="/"),t.path+="data.json");var n=new XMLHttpRequest;t.path.lastIndexOf("\\")!=-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.assetsPath=t.assetsPath,this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),n.open("GET",t.path,!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status)e.configAnimation(JSON.parse(n.responseText));else try{var t=JSON.parse(n.responseText);e.configAnimation(t)}catch(i){}}}},AnimationItem.prototype.setData=function(t,e){var i={wrapper:t,animationData:e?"object"==typeof e?e:JSON.parse(e):null},n=t.attributes;i.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",i.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var r=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";""===r||("false"===r?i.loop=!1:"true"===r?i.loop=!0:i.loop=parseInt(r));var s=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;i.autoplay="false"!==s,i.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var o=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";"false"===o&&(i.prerender=!1),this.setParams(i)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip),this.animationData.tf=this.totalFrames);var e,i,n=this.animationData.layers,r=n.length,s=t.layers,o=s.length;for(i=0;i<o;i+=1)for(e=0;e<r;){if(n[e].id==s[i].id){n[e]=s[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,e=0;e<r;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.renderFrame(null),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.animationData.tf);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=new XMLHttpRequest,n=this,r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,i.open("GET",r,!0),i.send(),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)n.includeLayers(JSON.parse(i.responseText));else try{var t=JSON.parse(i.responseText);n.includeLayers(t)}catch(e){}}},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.animationData.tf),this.loadNextSegment()},AnimationItem.prototype.configAnimation=function(t){this.renderer&&this.renderer.destroyed||(this.animationData=t,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.animationData.tf=this.totalFrames,this.renderer.configAnimation(t),t.assets||(t.assets=[]),t.comps&&(t.assets=t.assets.concat(t.comps),t.comps=null),this.renderer.searchExtraCompositions(t.assets),this.layers=this.animationData.layers,this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.imagePreloader=new ImagePreloader,this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(t.assets),this.loadSegments(),this.updaFrameModifier(),this.renderer.globalData.fontManager?this.waitForFontsLoaded():(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()))},AnimationItem.prototype.waitForFontsLoaded=function(){function t(){this.renderer.globalData.fontManager.loaded?(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()):setTimeout(t.bind(this),20)}return function(){t.bind(this)()}}(),AnimationItem.prototype.addPendingElement=function(){this.pendingElements+=1},AnimationItem.prototype.elementLoaded=function(){this.pendingElements--,this.checkLoaded()},AnimationItem.prototype.checkLoaded=function(){0===this.pendingElements&&(expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.isLoaded=!0,this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.subframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.subframeEnabled?this.currentFrame=this.currentRawFrame:this.currentFrame=Math.floor(this.currentRawFrame),this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){this.isLoaded!==!1&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(t){t&&this.name!=t||this.isPaused===!0&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!=t||this.isPaused===!1&&(this.isPaused=!0,this.pendingSegment||(this._idle=!0,this.trigger("_idle")))},AnimationItem.prototype.togglePause=function(t){t&&this.name!=t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.currentFrame=this.currentRawFrame=0,this.playCount=0,this.gotoFrame())},AnimationItem.prototype.goToAndStop=function(t,e,i){i&&this.name!=i||(e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,i){this.goToAndStop(t,e,i),this.play()},AnimationItem.prototype.advanceTime=function(t){return this.pendingSegment?(this.pendingSegment=!1,this.adjustSegment(this.segments.shift()),void(this.isPaused&&this.play())):void(this.isPaused!==!0&&this.isLoaded!==!1&&this.setCurrentRawFrameValue(this.currentRawFrame+t*this.frameModifier))},AnimationItem.prototype.updateAnimation=function(t){this.setCurrentRawFrameValue(this.totalFrames*t)},AnimationItem.prototype.moveFrame=function(t,e){e&&this.name!=e||this.setCurrentRawFrameValue(this.currentRawFrame+t)},AnimationItem.prototype.adjustSegment=function(t){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.01)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(0)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t-.01)),this.firstFrame=t,this.totalFrames=e-t,i!==-1&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(t,e){if("object"==typeof t[0]){var i,n=t.length;for(i=0;i<n;i+=1)this.segments.push(t[i])}else this.segments.push(t);e&&this.adjustSegment(this.segments.shift()),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op-this.animationData.ip+this.animationData.ip*this.frameRate)]),t&&this.adjustSegment(this.segments.shift())},AnimationItem.prototype.checkSegments=function(){this.segments.length&&(this.pendingSegment=!0)},AnimationItem.prototype.remove=function(t){t&&this.name!=t||this.renderer.destroy()},AnimationItem.prototype.destroy=function(t){t&&this.name!=t||this.renderer&&this.renderer.destroyed||(this.renderer.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){if(this.currentRawFrame=t,this.currentRawFrame>=this.totalFrames){
if(this.checkSegments(),this.loop===!1)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");if(this.trigger("loopComplete"),this.playCount+=1,this.loop!==!0&&this.playCount==this.loop||this.pendingSegment)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");this.currentRawFrame=this.currentRawFrame%this.totalFrames}else if(this.currentRawFrame<0)return this.checkSegments(),this.playCount-=1,this.playCount<0&&(this.playCount=0),this.loop===!1||this.pendingSegment?(this.currentRawFrame=0,this.gotoFrame(),this.pause(),void this.trigger("complete")):(this.trigger("loopComplete"),this.currentRawFrame=(this.totalFrames+this.currentRawFrame)%this.totalFrames,void this.gotoFrame());this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(this.assetsPath){var i=t.p;i.indexOf("images/")!==-1&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t==this.assets[e].id)return this.assets[e];e+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getAssets=function(){return this.assets},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.addEventListener=_addEventListener,AnimationItem.prototype.removeEventListener=_removeEventListener,AnimationItem.prototype.triggerEvent=_triggerEvent,extendPrototype(BaseRenderer,CanvasRenderer),CanvasRenderer.prototype.createBase=function(t){return new CVBaseElement(t,this,this.globalData)},CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this,this.globalData)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this,this.globalData)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this,this.globalData)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this,this.globalData)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this,this.globalData)},CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13]){if(!this.renderConfig.clearCanvas)return void this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13]);this.transformMat.cloneFromProps(t),this.transformMat.transform(this.contextData.cTr.props[0],this.contextData.cTr.props[1],this.contextData.cTr.props[2],this.contextData.cTr.props[3],this.contextData.cTr.props[4],this.contextData.cTr.props[5],this.contextData.cTr.props[6],this.contextData.cTr.props[7],this.contextData.cTr.props[8],this.contextData.cTr.props[9],this.contextData.cTr.props[10],this.contextData.cTr.props[11],this.contextData.cTr.props[12],this.contextData.cTr.props[13],this.contextData.cTr.props[14],this.contextData.cTr.props[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var e=this.contextData.cTr.props;this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}},CanvasRenderer.prototype.ctxOpacity=function(t){if(1!==t){if(!this.renderConfig.clearCanvas)return void(this.canvasContext.globalAlpha*=t<0?0:t);this.contextData.cO*=t<0?0:t,this.canvasContext.globalAlpha=this.contextData.cO}},CanvasRenderer.prototype.reset=function(){return this.renderConfig.clearCanvas?(this.contextData.cArrPos=0,this.contextData.cTr.reset(),void(this.contextData.cO=1)):void this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(!this.renderConfig.clearCanvas)return void this.canvasContext.save();t&&this.canvasContext.save();var e=this.contextData.cTr.props;null!==this.contextData.saved[this.contextData.cArrPos]&&void 0!==this.contextData.saved[this.contextData.cArrPos]||(this.contextData.saved[this.contextData.cArrPos]=new Array(16));var i,n=this.contextData.saved[this.contextData.cArrPos];for(i=0;i<16;i+=1)n[i]=e[i];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRenderer.prototype.restore=function(t){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();t&&this.canvasContext.restore(),this.contextData.cArrPos-=1;var e,i=this.contextData.saved[this.contextData.cArrPos],n=this.contextData.cTr.props;for(e=0;e<16;e+=1)n[e]=i[e];this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),i=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=i,this.canvasContext.globalAlpha=i},CanvasRenderer.prototype.configAnimation=function(t){this.animationItem.wrapper?(this.animationItem.container=document.createElement("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d")):this.canvasContext=this.renderConfig.context,this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.totalFrames=Math.floor(t.tf),this.globalData.compWidth=t.w,this.globalData.compHeight=t.h,this.globalData.frameRate=t.fr,this.globalData.frameId=0,this.globalData.compSize={w:t.w,h:t.h},this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.layers=t.layers,this.transformCanvas={},this.transformCanvas.w=t.w,this.transformCanvas.h=t.h,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,document.body),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.addPendingElement=this.animationItem.addPendingElement.bind(this.animationItem),this.globalData.transformCanvas=this.transformCanvas,this.elements=Array.apply(null,{length:t.layers.length}),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e;this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr);var i,n;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var r=this.renderConfig.preserveAspectRatio.split(" "),s=r[1]||"meet",o=r[0]||"xMidYMid",a=o.substr(0,4),h=o.substr(4);i=t/e,n=this.transformCanvas.w/this.transformCanvas.h,n>i&&"meet"===s||n<i&&"slice"===s?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),"xMid"===a&&(n<i&&"meet"===s||n>i&&"slice"===s)?this.transformCanvas.tx=(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===a&&(n<i&&"meet"===s||n>i&&"slice"===s)?this.transformCanvas.tx=(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,"YMid"===h&&(n>i&&"meet"===s||n<i&&"slice"===s)?this.transformCanvas.ty=(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===h&&(n>i&&"meet"===s||n<i&&"slice"===s)?this.transformCanvas.ty=(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];var l,c=this.elements.length;for(l=0;l<c;l+=1)this.elements[l]&&0===this.elements[l].data.ty&&this.elements[l].resize(this.globalData.transformCanvas)},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t){if(!(this.renderedFrame==t&&this.renderConfig.clearCanvas===!0||this.destroyed||null===t)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem.firstFrame,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.renderConfig.clearCanvas===!0?(this.reset(),this.canvasContext.save(),this.canvasContext.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)):this.save(),this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip();var e,i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=0;e<i;e++)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);for(e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.renderConfig.clearCanvas!==!0?this.restore():this.canvasContext.restore()}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){var i=this.createItem(this.layers[t],this,this.globalData);e[t]=i,i.initExpressions(),0===this.layers[t].ty&&i.resize(this.globalData.transformCanvas)}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},CanvasRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length;document.createElementNS(svgNS,"g");for(e=0;e<i;e+=1)if(t[e].xt){var n=this.createComp(t[e],this.globalData.comp,this.globalData);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},extendPrototype(BaseRenderer,HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){var n=this.layers[e];if(n.ddd&&this.supports3d)this.addTo3dContainer(i,e);else{for(var r,s=0;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement&&(r=this.elements[s].getBaseElement()),s+=1;r?n.ddd&&this.supports3d||this.layerElement.insertBefore(i,r):n.ddd&&this.supports3d||this.layerElement.appendChild(i)}}},HybridRenderer.prototype.createBase=function(t){return new SVGBaseElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.layerElement,this.globalData,this):new IShapeElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.layerElement,this.globalData,this):new SVGTextElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.layerElement,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.layerElement,this.globalData,this):new IImageElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.layerElement,this.globalData,this):new ICompElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.layerElement,this.globalData,this):new ISolidElement(t,this.layerElement,this.globalData,this)},HybridRenderer.prototype.getThreeDContainer=function(t){var e=document.createElement("div");styleDiv(e),e.style.width=this.globalData.compSize.w+"px",e.style.height=this.globalData.compSize.h+"px",e.style.transformOrigin=e.style.mozTransformOrigin=e.style.webkitTransformOrigin="50% 50%";var i=document.createElement("div");styleDiv(i),i.style.transform=i.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",e.appendChild(i),this.resizerElem.appendChild(e);var n={container:i,perspectiveElem:e,startPos:t,endPos:t};return this.threeDElements.push(n),n},HybridRenderer.prototype.build3dContainers=function(){var t,e,i=this.layers.length;for(t=0;t<i;t+=1)this.layers[t].ddd?(e||(e=this.getThreeDContainer(t)),e.endPos=Math.max(e.endPos,t)):e=null},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var i=0,n=this.threeDElements.length;i<n;){if(e<=this.threeDElements[i].endPos){for(var r,s=this.threeDElements[i].startPos;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(r=this.elements[s].getBaseElement()),s+=1;r?this.threeDElements[i].container.insertBefore(t,r):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=document.createElement("div"),i=this.animationItem.wrapper;e.style.width=t.w+"px",e.style.height=t.h+"px",this.resizerElem=e,styleDiv(e),e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat",i.appendChild(e),e.style.overflow="hidden";var n=document.createElementNS(svgNS,"svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var r=document.createElementNS(svgNS,"defs");n.appendChild(r),this.globalData.defs=r,this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.frameId=0,this.globalData.compSize={w:t.w,h:t.h},this.globalData.frameRate=t.fr,this.layers=t.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,n),this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,i,n,r=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,o=r/s,a=this.globalData.compSize.w/this.globalData.compSize.h;a>o?(t=r/this.globalData.compSize.w,e=r/this.globalData.compSize.w,i=0,n=(s-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(t=s/this.globalData.compSize.h,e=s/this.globalData.compSize.h,i=(r-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,n=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+i+","+n+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,i=this.globalData.compSize.h,n=this.threeDElements.length;for(t=0;t<n;t+=1)this.threeDElements[t].perspectiveElem.style.perspective=this.threeDElements[t].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length,n=document.createElement("div");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},createElement(BaseElement,CVBaseElement),CVBaseElement.prototype.createElements=function(){this.checkParenting()},CVBaseElement.prototype.checkBlendMode=function(t){if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e="";switch(this.data.bm){case 0:e="normal";break;case 1:e="multiply";break;case 2:e="screen";break;case 3:e="overlay";break;case 4:e="darken";break;case 5:e="lighten";break;case 6:e="color-dodge";break;case 7:e="color-burn";break;case 8:e="hard-light";break;case 9:e="soft-light";break;case 10:e="difference";break;case 11:e="exclusion";break;case 12:e="hue";break;case 13:e="saturation";break;case 14:e="color";break;case 15:e="luminosity"}t.canvasContext.globalCompositeOperation=e}},CVBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty)return!1;if(this.checkBlendMode(0===this.data.ty?this.parentGlobalData:this.globalData),!this.isVisible)return this.isVisible;this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var e,i=this.finalTransform.mat;if(this.hierarchy){var n,r=this.hierarchy.length;for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)this.finalTransform.matMdf=!!this.hierarchy[n].finalTransform.mProp.mdf||this.finalTransform.matMdf,e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else t?(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e)):i.cloneFromProps(this.finalTransform.mProp.v.props);return t&&(e=t.mat.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.finalTransform.opacity*=t.opacity,this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf),this.data.hasMask&&(this.globalData.renderer.save(!0),this.maskManager.renderFrame(0===this.data.ty?null:i)),this.data.hd&&(this.isVisible=!1),this.isVisible},CVBaseElement.prototype.addMasks=function(t){this.maskManager=new CVMaskElement(t,this,this.globalData)},CVBaseElement.prototype.destroy=function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager&&this.maskManager.destroy()},CVBaseElement.prototype.mHelper=new Matrix,createElement(CVBaseElement,CVCompElement),CVCompElement.prototype.ctxTransform=CanvasRenderer.prototype.ctxTransform,CVCompElement.prototype.ctxOpacity=CanvasRenderer.prototype.ctxOpacity,CVCompElement.prototype.save=CanvasRenderer.prototype.save,CVCompElement.prototype.restore=CanvasRenderer.prototype.restore,CVCompElement.prototype.reset=function(){this.contextData.cArrPos=0,this.contextData.cTr.reset(),this.contextData.cO=1},CVCompElement.prototype.resize=function(t){var e=Math.max(t.sx,t.sy);this.canvas.width=this.data.w*e,this.canvas.height=this.data.h*e,this.transformCanvas={sc:e,w:this.data.w*e,h:this.data.h*e,props:[e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]};var i,n=this.elements.length;for(i=0;i<n;i+=1)this.elements[i]&&0===this.elements[i].data.ty&&this.elements[i].resize(t)},CVCompElement.prototype.prepareFrame=function(t){if(this.globalData.frameId=this.parentGlobalData.frameId,this.globalData.mdf=!1,this._parent.prepareFrame.call(this,t),this.isVisible!==!1||this.data.xt){var e=t;this.tm&&(e=this.tm.v,e===this.data.op&&(e=this.data.op-1)),this.renderedFrame=e/this.data.sr;var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(t),i=0;i<n;i+=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(e/this.data.sr-this.layers[i].st),0===this.elements[i].data.ty&&this.elements[i].globalData.mdf&&(this.globalData.mdf=!0));this.globalData.mdf&&!this.data.xt&&(this.canvasContext.clearRect(0,0,this.data.w,this.data.h),this.ctxTransform(this.transformCanvas.props))}},CVCompElement.prototype.renderFrame=function(t){if(this._parent.renderFrame.call(this,t)!==!1){if(this.globalData.mdf){var e,i=this.layers.length;for(e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}this.data.hasMask&&this.globalData.renderer.restore(!0),this.firstFrame&&(this.firstFrame=!1),this.parentGlobalData.renderer.save(),this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props),this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity),this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas,0,0,this.data.w,this.data.h),this.parentGlobalData.renderer.restore(),this.globalData.mdf&&this.reset()}},CVCompElement.prototype.setElements=function(t){this.elements=t},CVCompElement.prototype.getElements=function(){return this.elements},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t].destroy();this.layers=null,this.elements=null,this._parent.destroy.call(this._parent)},CVCompElement.prototype.checkLayers=CanvasRenderer.prototype.checkLayers,CVCompElement.prototype.buildItem=CanvasRenderer.prototype.buildItem,CVCompElement.prototype.checkPendingElements=CanvasRenderer.prototype.checkPendingElements,CVCompElement.prototype.addPendingElement=CanvasRenderer.prototype.addPendingElement,CVCompElement.prototype.buildAllItems=CanvasRenderer.prototype.buildAllItems,CVCompElement.prototype.createItem=CanvasRenderer.prototype.createItem,CVCompElement.prototype.createImage=CanvasRenderer.prototype.createImage,CVCompElement.prototype.createComp=CanvasRenderer.prototype.createComp,CVCompElement.prototype.createSolid=CanvasRenderer.prototype.createSolid,CVCompElement.prototype.createShape=CanvasRenderer.prototype.createShape,CVCompElement.prototype.createText=CanvasRenderer.prototype.createText,CVCompElement.prototype.createBase=CanvasRenderer.prototype.createBase,CVCompElement.prototype.buildElementParenting=CanvasRenderer.prototype.buildElementParenting,createElement(CVBaseElement,CVImageElement),CVImageElement.prototype.createElements=function(){var t=function(){if(this.globalData.elementLoaded(),this.assetData.w!==this.img.width||this.assetData.h!==this.img.height){var t=document.createElement("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,i,n=t.getContext("2d"),r=this.img.width,s=this.img.height,o=r/s,a=this.assetData.w/this.assetData.h;o>a?(i=s,e=i*a):(e=r,i=e/a),n.drawImage(this.img,(r-e)/2,(s-i)/2,e,i,0,0,this.assetData.w,this.assetData.h),this.img=t}}.bind(this),e=function(){this.failed=!0,this.globalData.elementLoaded()}.bind(this);this.img=new Image,this.img.addEventListener("load",t,!1),this.img.addEventListener("error",e,!1);var i=this.globalData.getAssetsPath(this.assetData);this.img.src=i,this._parent.createElements.call(this)},CVImageElement.prototype.renderFrame=function(t){if(!this.failed&&this._parent.renderFrame.call(this,t)!==!1){var e=this.canvasContext;this.globalData.renderer.save();var i=this.finalTransform.mat.props;this.globalData.renderer.ctxTransform(i),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),e.drawImage(this.img,0,0),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},CVImageElement.prototype.destroy=function(){this.img=null,this._parent.destroy.call(this._parent)},CVMaskElement.prototype.getMaskProperty=function(t){return this.viewData[t]},CVMaskElement.prototype.prepareFrame=function(t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e].mdf&&(this.element.globalData.mdf=!0)},CVMaskElement.prototype.renderFrame=function(t){var e,i,n,r,s,o=this.element.canvasContext,a=this.data.masksProperties.length,h=!1;for(e=0;e<a;e++)if("n"!==this.masksProperties[e].mode){h===!1&&(o.beginPath(),h=!0),this.masksProperties[e].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compWidth,0),o.lineTo(this.element.globalData.compWidth,this.element.globalData.compHeight),o.lineTo(0,this.element.globalData.compHeight),o.lineTo(0,0)),s=this.viewData[e].v,i=t?t.applyToPointArray(s.v[0][0],s.v[0][1],0):s.v[0],o.moveTo(i[0],i[1]);var l,c=s.v.length;for(l=1;l<c;l++)i=t?t.applyToPointArray(s.o[l-1][0],s.o[l-1][1],0):s.o[l-1],n=t?t.applyToPointArray(s.i[l][0],s.i[l][1],0):s.i[l],r=t?t.applyToPointArray(s.v[l][0],s.v[l][1],0):s.v[l],o.bezierCurveTo(i[0],i[1],n[0],n[1],r[0],r[1]);i=t?t.applyToPointArray(s.o[l-1][0],s.o[l-1][1],0):s.o[l-1],n=t?t.applyToPointArray(s.i[0][0],s.i[0][1],0):s.i[0],r=t?t.applyToPointArray(s.v[0][0],s.v[0][1],0):s.v[0],o.bezierCurveTo(i[0],i[1],n[0],n[1],r[0],r[1])}h&&o.clip()},CVMaskElement.prototype.getMask=function(t){for(var e=0,i=this.masksProperties.length;e<i;){if(this.masksProperties[e].nm===t)return{maskPath:this.viewData[e].pv};e+=1}},CVMaskElement.prototype.destroy=function(){this.element=null},createElement(CVBaseElement,CVShapeElement),CVShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"butt"},CVShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},CVShapeElement.prototype.transformHelper={opacity:1,mat:new Matrix,matMdf:!1,opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.viewData,this.dynamicProperties)},CVShapeElement.prototype.searchShapes=function(t,e,i){var n,r,s,o,a=t.length-1,h=[],l=[];for(n=a;n>=0;n-=1)if("fl"==t[n].ty||"st"==t[n].ty){if(o={type:t[n].ty,elements:[]},e[n]={},"fl"!=t[n].ty&&"st"!=t[n].ty||(e[n].c=PropertyFactory.getProp(this,t[n].c,1,255,i),e[n].c.k||(o.co="rgb("+bm_floor(e[n].c.v[0])+","+bm_floor(e[n].c.v[1])+","+bm_floor(e[n].c.v[2])+")")),e[n].o=PropertyFactory.getProp(this,t[n].o,0,.01,i),"st"==t[n].ty&&(o.lc=this.lcEnum[t[n].lc]||"round",o.lj=this.ljEnum[t[n].lj]||"round",1==t[n].lj&&(o.ml=t[n].ml),e[n].w=PropertyFactory.getProp(this,t[n].w,0,null,i),e[n].w.k||(o.wi=e[n].w.v),t[n].d)){var c=PropertyFactory.getDashProp(this,t[n].d,"canvas",i);e[n].d=c,e[n].d.k||(o.da=e[n].d.dasharray,o["do"]=e[n].d.dashoffset)}this.stylesList.push(o),e[n].style=o,h.push(e[n].style)}else if("gr"==t[n].ty)e[n]={it:[]},this.searchShapes(t[n].it,e[n].it,i);else if("tr"==t[n].ty)e[n]={transform:{mat:new Matrix,opacity:1,matMdf:!1,opMdf:!1,op:PropertyFactory.getProp(this,t[n].o,0,.01,i),mProps:PropertyFactory.getProp(this,t[n],2,null,i)},elements:[]};else if("sh"==t[n].ty||"rc"==t[n].ty||"el"==t[n].ty||"sr"==t[n].ty){e[n]={nodes:[],trNodes:[],tr:[0,0,0,0,0,0]};var u=4;"rc"==t[n].ty?u=5:"el"==t[n].ty?u=6:"sr"==t[n].ty&&(u=7),e[n].sh=ShapePropertyFactory.getShapeProp(this,t[n],u,i),this.shapes.push(e[n].sh),this.addShapeToModifiers(e[n].sh),s=this.stylesList.length;var p=!1,f=!1;for(r=0;r<s;r+=1)this.stylesList[r].closed||(this.stylesList[r].elements.push(e[n]),"st"===this.stylesList[r].type?p=!0:f=!0);e[n].st=p,e[n].fl=f}else if("tm"==t[n].ty||"rd"==t[n].ty){var d=ShapeModifiers.getModifier(t[n].ty);d.init(this,t[n],i),this.shapeModifiers.push(d),l.push(d),e[n]=d}for(a=h.length,n=0;n<a;n+=1)h[n].closed=!0;for(a=l.length,n=0;n<a;n+=1)l[n].closed=!0},CVShapeElement.prototype.addShapeToModifiers=IShapeElement.prototype.addShapeToModifiers,CVShapeElement.prototype.renderModifiers=IShapeElement.prototype.renderModifiers,CVShapeElement.prototype.renderFrame=function(t){this._parent.renderFrame.call(this,t)!==!1&&(this.transformHelper.mat.reset(),this.transformHelper.opacity=this.finalTransform.opacity,this.transformHelper.matMdf=!1,this.transformHelper.opMdf=this.finalTransform.opMdf,this.renderModifiers(),this.renderShape(this.transformHelper,null,null,!0),this.data.hasMask&&this.globalData.renderer.restore(!0))},CVShapeElement.prototype.renderShape=function(t,e,i,n){var r,s;if(!e)for(e=this.shapesData,s=this.stylesList.length,r=0;r<s;r+=1)this.stylesList[r].d="",this.stylesList[r].mdf=!1;i||(i=this.viewData),s=e.length-1;var o,a;for(o=t,r=s;r>=0;r-=1)if("tr"==e[r].ty){o=i[r].transform;var h=i[r].transform.mProps.v.props;if(o.matMdf=o.mProps.mdf,o.opMdf=o.op.mdf,a=o.mat,a.cloneFromProps(h),t){var l=t.mat.props;o.opacity=t.opacity,o.opacity*=i[r].transform.op.v,o.matMdf=!!t.matMdf||o.matMdf,o.opMdf=!!t.opMdf||o.opMdf,a.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])}else o.opacity=o.op.o}else"sh"==e[r].ty||"el"==e[r].ty||"rc"==e[r].ty||"sr"==e[r].ty?this.renderPath(e[r],i[r],o):"fl"==e[r].ty?this.renderFill(e[r],i[r],o):"st"==e[r].ty?this.renderStroke(e[r],i[r],o):"gr"==e[r].ty?this.renderShape(o,e[r].it,i[r].it):"tm"==e[r].ty;if(n){s=this.stylesList.length;var c,u,p,f,d,m,g,v=this.globalData.renderer,y=this.globalData.canvasContext;for(v.save(),v.ctxTransform(this.finalTransform.mat.props),r=0;r<s;r+=1)if(g=this.stylesList[r].type,"st"!==g||0!==this.stylesList[r].wi){for(v.save(),d=this.stylesList[r].elements,"st"===g?(y.strokeStyle=this.stylesList[r].co,y.lineWidth=this.stylesList[r].wi,y.lineCap=this.stylesList[r].lc,y.lineJoin=this.stylesList[r].lj,y.miterLimit=this.stylesList[r].ml||0):y.fillStyle=this.stylesList[r].co,v.ctxOpacity(this.stylesList[r].coOp),"st"!==g&&y.beginPath(),u=d.length,c=0;c<u;c+=1){for("st"===g&&(y.beginPath(),this.stylesList[r].da?(y.setLineDash(this.stylesList[r].da),y.lineDashOffset=this.stylesList[r]["do"],this.globalData.isDashed=!0):this.globalData.isDashed&&(y.setLineDash(this.dashResetter),this.globalData.isDashed=!1)),m=d[c].trNodes,f=m.length,p=0;p<f;p+=1)"m"==m[p].t?y.moveTo(m[p].p[0],m[p].p[1]):"c"==m[p].t?y.bezierCurveTo(m[p].p1[0],m[p].p1[1],m[p].p2[0],m[p].p2[1],m[p].p3[0],m[p].p3[1]):y.closePath();
"st"===g&&y.stroke()}"st"!==g&&y.fill(),v.restore()}v.restore(),this.firstFrame&&(this.firstFrame=!1)}},CVShapeElement.prototype.renderPath=function(t,e,i){var n,r,s,o,a=i.matMdf||e.sh.mdf||this.firstFrame;if(a){var h=e.sh.paths;o=h.length;var l=e.trNodes;for(l.length=0,s=0;s<o;s+=1){var c=h[s];if(c&&c.v){for(n=c.v.length,r=1;r<n;r+=1)1==r&&l.push({t:"m",p:i.mat.applyToPointArray(c.v[0][0],c.v[0][1],0)}),l.push({t:"c",p1:i.mat.applyToPointArray(c.o[r-1][0],c.o[r-1][1],0),p2:i.mat.applyToPointArray(c.i[r][0],c.i[r][1],0),p3:i.mat.applyToPointArray(c.v[r][0],c.v[r][1],0)});1==n&&l.push({t:"m",p:i.mat.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&n&&(l.push({t:"c",p1:i.mat.applyToPointArray(c.o[r-1][0],c.o[r-1][1],0),p2:i.mat.applyToPointArray(c.i[0][0],c.i[0][1],0),p3:i.mat.applyToPointArray(c.v[0][0],c.v[0][1],0)}),l.push({t:"z"})),e.lStr=l}}if(e.st)for(r=0;r<16;r+=1)e.tr[r]=i.mat.props[r];e.trNodes=l}},CVShapeElement.prototype.renderFill=function(t,e,i){var n=e.style;(e.c.mdf||this.firstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||i.opMdf||this.firstFrame)&&(n.coOp=e.o.v*i.opacity)},CVShapeElement.prototype.renderStroke=function(t,e,i){var n=e.style,r=e.d;r&&(r.mdf||this.firstFrame)&&(n.da=r.dasharray,n["do"]=r.dashoffset),(e.c.mdf||this.firstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||i.opMdf||this.firstFrame)&&(n.coOp=e.o.v*i.opacity),(e.w.mdf||this.firstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.viewData.length=0,this._parent.destroy.call(this._parent)},createElement(CVBaseElement,CVSolidElement),CVSolidElement.prototype.renderFrame=function(t){if(this._parent.renderFrame.call(this,t)!==!1){var e=this.canvasContext;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(CVBaseElement,CVTextElement),CVTextElement.prototype.init=ITextElement.prototype.init,CVTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,CVTextElement.prototype.getMult=ITextElement.prototype.getMult,CVTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,CVTextElement.prototype.tHelper=document.createElement("canvas").getContext("2d"),CVTextElement.prototype.createElements=function(){this._parent.createElements.call(this)},CVTextElement.prototype.buildNewText=function(){var t=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0});var e=!1;t.fc?(e=!0,this.values.fill="rgb("+Math.round(255*t.fc[0])+","+Math.round(255*t.fc[1])+","+Math.round(255*t.fc[2])+")"):this.values.fill="rgba(0,0,0,0)",this.fill=e;var i=!1;t.sc&&(i=!0,this.values.stroke="rgb("+Math.round(255*t.sc[0])+","+Math.round(255*t.sc[1])+","+Math.round(255*t.sc[2])+")",this.values.sWidth=t.sw);var n,r,s=this.globalData.fontManager.getFontByName(t.f),o=t.l,a=this.mHelper;this.stroke=i,this.values.fValue=t.s+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,r=t.t.length,this.tHelper.font=this.values.fValue;var h,l,c,u,p,f,d,m,g,v,y=this.data.singleShape;if(y)var _=0,b=0,x=t.lineWidths,E=t.boxWidth,w=!0;var T=0;for(n=0;n<r;n+=1){h=this.globalData.fontManager.getCharData(t.t.charAt(n),s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);var l;if(l=h?h.data:null,a.reset(),y&&o[n].n&&(_=0,b+=t.yOffset,b+=w?1:0,w=!1),l&&l.shapes){if(p=l.shapes[0].it,d=p.length,a.scale(t.s/100,t.s/100),y){switch(t.ps&&a.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:a.translate(t.justifyOffset+(E-x[o[n].line]),0,0);break;case 2:a.translate(t.justifyOffset+(E-x[o[n].line])/2,0,0)}a.translate(_,b,0)}for(g=new Array(d),f=0;f<d;f+=1){for(u=p[f].ks.k.i.length,m=p[f].ks.k,v=[],c=1;c<u;c+=1)1==c&&v.push(a.applyToX(m.v[0][0],m.v[0][1],0),a.applyToY(m.v[0][0],m.v[0][1],0)),v.push(a.applyToX(m.o[c-1][0],m.o[c-1][1],0),a.applyToY(m.o[c-1][0],m.o[c-1][1],0),a.applyToX(m.i[c][0],m.i[c][1],0),a.applyToY(m.i[c][0],m.i[c][1],0),a.applyToX(m.v[c][0],m.v[c][1],0),a.applyToY(m.v[c][0],m.v[c][1],0));v.push(a.applyToX(m.o[c-1][0],m.o[c-1][1],0),a.applyToY(m.o[c-1][0],m.o[c-1][1],0),a.applyToX(m.i[0][0],m.i[0][1],0),a.applyToY(m.i[0][0],m.i[0][1],0),a.applyToX(m.v[0][0],m.v[0][1],0),a.applyToY(m.v[0][0],m.v[0][1],0)),g[f]=v}}else g=[];y&&(_+=o[n].l),this.textSpans[T]?this.textSpans[T].elem=g:this.textSpans[T]={elem:g},T+=1}},CVTextElement.prototype.renderFrame=function(t){if(this._parent.renderFrame.call(this,t)!==!1){var e=this.canvasContext,i=this.finalTransform.mat.props;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(i),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),e.font=this.values.fValue,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.data.singleShape||this.getMeasures();var n,r,s,o,a,h,l=this.renderedLetters,c=this.currentTextDocumentData.l;r=c.length;var u,p,f,d=null,m=null,g=null;for(n=0;n<r;n+=1)if(!c[n].n){if(u=l[n],u&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(u.props),this.globalData.renderer.ctxOpacity(u.o)),this.fill){for(u&&u.fc?d!==u.fc&&(d=u.fc,e.fillStyle=u.fc):d!==this.values.fill&&(d=this.values.fill,e.fillStyle=this.values.fill),p=this.textSpans[n].elem,o=p.length,this.globalData.canvasContext.beginPath(),s=0;s<o;s+=1)for(f=p[s],h=f.length,this.globalData.canvasContext.moveTo(f[0],f[1]),a=2;a<h;a+=6)this.globalData.canvasContext.bezierCurveTo(f[a],f[a+1],f[a+2],f[a+3],f[a+4],f[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(u&&u.sw?g!==u.sw&&(g=u.sw,e.lineWidth=u.sw):g!==this.values.sWidth&&(g=this.values.sWidth,e.lineWidth=this.values.sWidth),u&&u.sc?m!==u.sc&&(m=u.sc,e.strokeStyle=u.sc):m!==this.values.stroke&&(m=this.values.stroke,e.strokeStyle=this.values.stroke),p=this.textSpans[n].elem,o=p.length,this.globalData.canvasContext.beginPath(),s=0;s<o;s+=1)for(f=p[s],h=f.length,this.globalData.canvasContext.moveTo(f[0],f[1]),a=2;a<h;a+=6)this.globalData.canvasContext.bezierCurveTo(f[a],f[a+1],f[a+2],f[a+3],f[a+4],f[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}u&&this.globalData.renderer.restore()}this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(BaseElement,HBaseElement),HBaseElement.prototype.checkBlendMode=function(){},HBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,HBaseElement.prototype.getBaseElement=function(){return this.baseElement},HBaseElement.prototype.createElements=function(){this.data.hasMask?(this.layerElement=document.createElementNS(svgNS,"svg"),styleDiv(this.layerElement),this.baseElement=this.layerElement,this.maskedElement=this.layerElement):this.layerElement=this.parentContainer,this.transformedElement=this.layerElement,!this.data.ln||4!==this.data.ty&&0!==this.data.ty||(this.layerElement===this.parentContainer&&(this.layerElement=document.createElementNS(svgNS,"g"),this.baseElement=this.layerElement),this.layerElement.setAttribute("id",this.data.ln)),this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.checkParenting()},HBaseElement.prototype.renderFrame=function(t){if(3===this.data.ty)return!1;if(this.currentFrameNum===this.lastNum||!this.isVisible)return this.isVisible;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v,this.firstFrame&&(this.finalTransform.opMdf=!0,this.finalTransform.matMdf=!0);var e,i=this.finalTransform.mat;if(this.hierarchy){var n,r=this.hierarchy.length;for(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e),n=0;n<r;n+=1)this.finalTransform.matMdf=!!this.hierarchy[n].finalTransform.mProp.mdf||this.finalTransform.matMdf,e=this.hierarchy[n].finalTransform.mProp.v.props,i.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}else this.isVisible&&this.finalTransform.matMdf&&(t?(e=this.finalTransform.mProp.v.props,i.cloneFromProps(e)):i.cloneFromProps(this.finalTransform.mProp.v.props));return this.data.hasMask&&this.maskManager.renderFrame(i),t&&(e=t.mat.props,i.cloneFromProps(e),this.finalTransform.opacity*=t.opacity,this.finalTransform.opMdf=!!t.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!t.matMdf||this.finalTransform.matMdf),this.finalTransform.matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=i.toCSS(),this.finalMat=i),this.finalTransform.opMdf&&(this.transformedElement.style.opacity=this.finalTransform.opacity),this.isVisible},HBaseElement.prototype.destroy=function(){this.layerElement=null,this.transformedElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},HBaseElement.prototype.getDomElement=function(){return this.layerElement},HBaseElement.prototype.addMasks=function(t){this.maskManager=new MaskElement(t,this,this.globalData)},HBaseElement.prototype.hide=function(){},HBaseElement.prototype.setMatte=function(){},HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,createElement(HBaseElement,HSolidElement),HSolidElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);var e=document.createElementNS(svgNS,"svg");styleDiv(e),e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),t.appendChild(e),this.layerElement=t,this.transformedElement=t,this.baseElement=t,this.innerElem=t,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),0!==this.data.bm&&this.setBlendMode();var i=document.createElementNS(svgNS,"rect");i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),e.appendChild(i),this.data.hasMask&&(this.maskedElement=i),this.checkParenting()},HSolidElement.prototype.hide=IImageElement.prototype.hide,HSolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,HSolidElement.prototype.destroy=IImageElement.prototype.destroy,createElement(HBaseElement,HCompElement),HCompElement.prototype.createElements=function(){var t=document.createElement("div");if(styleDiv(t),this.data.ln&&t.setAttribute("id",this.data.ln),t.style.clip="rect(0px, "+this.data.w+"px, "+this.data.h+"px, 0px)",this.data.hasMask){var e=document.createElementNS(svgNS,"svg");styleDiv(e),e.setAttribute("width",this.data.w),e.setAttribute("height",this.data.h);var i=document.createElementNS(svgNS,"g");e.appendChild(i),t.appendChild(e),this.maskedElement=i,this.baseElement=t,this.layerElement=i,this.transformedElement=t}else this.layerElement=t,this.baseElement=this.layerElement,this.transformedElement=t;this.checkParenting()},HCompElement.prototype.hide=ICompElement.prototype.hide,HCompElement.prototype.prepareFrame=ICompElement.prototype.prepareFrame,HCompElement.prototype.setElements=ICompElement.prototype.setElements,HCompElement.prototype.getElements=ICompElement.prototype.getElements,HCompElement.prototype.destroy=ICompElement.prototype.destroy,HCompElement.prototype.renderFrame=function(t){var e,i=this._parent.renderFrame.call(this,t),n=this.layers.length;if(i===!1)return void this.hide();for(this.hidden=!1,e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.firstFrame&&(this.firstFrame=!1)},HCompElement.prototype.checkLayers=BaseRenderer.prototype.checkLayers,HCompElement.prototype.buildItem=HybridRenderer.prototype.buildItem,HCompElement.prototype.checkPendingElements=HybridRenderer.prototype.checkPendingElements,HCompElement.prototype.addPendingElement=HybridRenderer.prototype.addPendingElement,HCompElement.prototype.buildAllItems=BaseRenderer.prototype.buildAllItems,HCompElement.prototype.createItem=HybridRenderer.prototype.createItem,HCompElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,HCompElement.prototype.createImage=HybridRenderer.prototype.createImage,HCompElement.prototype.createComp=HybridRenderer.prototype.createComp,HCompElement.prototype.createSolid=HybridRenderer.prototype.createSolid,HCompElement.prototype.createShape=HybridRenderer.prototype.createShape,HCompElement.prototype.createText=HybridRenderer.prototype.createText,HCompElement.prototype.createBase=HybridRenderer.prototype.createBase,HCompElement.prototype.appendElementInPos=HybridRenderer.prototype.appendElementInPos,createElement(HBaseElement,HShapeElement);var parent=HShapeElement.prototype._parent;extendPrototype(IShapeElement,HShapeElement),HShapeElement.prototype._parent=parent,HShapeElement.prototype.createElements=function(){var t=document.createElement("div");styleDiv(t);var e=document.createElementNS(svgNS,"svg");styleDiv(e);var i=this.comp.data?this.comp.data:this.globalData.compSize;if(e.setAttribute("width",i.w),e.setAttribute("height",i.h),this.data.hasMask){var n=document.createElementNS(svgNS,"g");t.appendChild(e),e.appendChild(n),this.maskedElement=n,this.layerElement=n,this.shapesContainer=n}else t.appendChild(e),this.layerElement=e,this.shapesContainer=document.createElementNS(svgNS,"g"),this.layerElement.appendChild(this.shapesContainer);this.data.hd||(this.baseElement=t),this.innerElem=t,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.searchShapes(this.shapesData,this.viewData,this.layerElement,this.dynamicProperties,0),this.buildExpressionInterface(),this.layerElement=t,this.transformedElement=t,this.shapeCont=e,0!==this.data.bm&&this.setBlendMode(),this.checkParenting()},HShapeElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(e===!1)return void this.hide();if(this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers(),this.addedTransforms.mdf=this.finalTransform.matMdf,this.addedTransforms.mats.length=1,this.addedTransforms.mats[0]=this.finalTransform.mat,this.renderShape(null,null,!0,null),this.isVisible&&(this.elemMdf||this.firstFrame)){var i=this.shapeCont.getBBox(),n=!1;this.currentBBox.w!==i.width&&(this.currentBBox.w=i.width,this.shapeCont.setAttribute("width",i.width),n=!0),this.currentBBox.h!==i.height&&(this.currentBBox.h=i.height,this.shapeCont.setAttribute("height",i.height),n=!0),(n||this.currentBBox.x!==i.x||this.currentBBox.y!==i.y)&&(this.currentBBox.w=i.width,this.currentBBox.h=i.height,this.currentBBox.x=i.x,this.currentBBox.y=i.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},createElement(HBaseElement,HTextElement),HTextElement.prototype.init=ITextElement.prototype.init,HTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,HTextElement.prototype.createPathShape=ITextElement.prototype.createPathShape,HTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,HTextElement.prototype.createElements=function(){this.isMasked=this.checkMasks();var t=document.createElement("div");if(styleDiv(t),this.layerElement=t,this.transformedElement=t,this.isMasked){this.renderType="svg";var e=document.createElementNS(svgNS,"svg");styleDiv(e),this.cont=e,this.compW=this.comp.data?this.comp.data.w:this.globalData.compSize.w,this.compH=this.comp.data?this.comp.data.h:this.globalData.compSize.h,e.setAttribute("width",this.compW),e.setAttribute("height",this.compH);var i=document.createElementNS(svgNS,"g");e.appendChild(i),t.appendChild(e),this.maskedElement=i,this.innerElem=i}else this.renderType="html",this.innerElem=t;this.baseElement=t,this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0}),t.fc?this.innerElem.style.color=this.innerElem.style.fill="rgb("+Math.round(255*t.fc[0])+","+Math.round(255*t.fc[1])+","+Math.round(255*t.fc[2])+")":this.innerElem.style.color=this.innerElem.style.fill="rgba(0,0,0,0)",t.sc&&(this.innerElem.style.stroke="rgb("+Math.round(255*t.sc[0])+","+Math.round(255*t.sc[1])+","+Math.round(255*t.sc[2])+")",this.innerElem.style.strokeWidth=t.sw+"px");var e=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(this.innerElem.style.fontSize=t.s+"px",this.innerElem.style.lineHeight=t.s+"px",e.fClass)this.innerElem.className=e.fClass;else{this.innerElem.style.fontFamily=e.fFamily;var i=t.fWeight,n=t.fStyle;this.innerElem.style.fontStyle=n,this.innerElem.style.fontWeight=i}var r,s,o=t.l;s=o.length;var a,h,l,c,u=this.mHelper,p="",f=0;for(r=0;r<s;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[f]?a=this.textPaths[f]:(a=document.createElementNS(svgNS,"path"),a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[f]?(h=this.textSpans[f],l=h.children[0]):(h=document.createElement("div"),l=document.createElementNS(svgNS,"svg"),l.appendChild(a),styleDiv(h)))):this.isMasked?a=this.textPaths[f]?this.textPaths[f]:document.createElementNS(svgNS,"text"):this.textSpans[f]?(h=this.textSpans[f],a=this.textPaths[f]):(h=document.createElement("span"),styleDiv(h),a=document.createElement("span"),styleDiv(a),h.appendChild(a)),this.globalData.fontManager.chars){var d,m=this.globalData.fontManager.getCharData(t.t.charAt(r),e.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(d=m?m.data:null,u.reset(),d&&d.shapes&&(c=d.shapes[0].it,u.scale(t.s/100,t.s/100),p=this.createPathShape(u,c),a.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(a);else if(this.innerElem.appendChild(h),d&&d.shapes){document.body.appendChild(l);var g=l.getBBox();l.setAttribute("width",g.width),l.setAttribute("height",g.height),l.setAttribute("viewBox",g.x+" "+g.y+" "+g.width+" "+g.height),l.style.transform=l.style.webkitTransform="translate("+g.x+"px,"+g.y+"px)",o[r].yOffset=g.y,h.appendChild(l)}else l.setAttribute("width",1),l.setAttribute("height",1)}else a.textContent=o[r].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(a):(this.innerElem.appendChild(h),a.style.transform=a.style.webkitTransform="translate3d(0,"+-t.s/1.2+"px,0)");this.isMasked?this.textSpans[f]=a:this.textSpans[f]=h,this.textSpans[f].style.display="block",this.textPaths[f]=a,f+=1}for(;f<this.textSpans.length;)this.textSpans[f].style.display="none",f+=1},HTextElement.prototype.hide=SVGTextElement.prototype.hide,HTextElement.prototype.renderFrame=function(t){var e=this._parent.renderFrame.call(this,t);if(e===!1)return void this.hide();if(this.hidden&&(this.hidden=!1,this.innerElem.style.display="block",this.layerElement.style.display="block"),this.data.singleShape){if(!this.firstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform.matMdf&&(this.cont.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.cont.style.transform=this.cont.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.getMeasures(),this.lettersChangedFlag){var i,n,r=this.renderedLetters,s=this.currentTextDocumentData.l;n=s.length;var o;for(i=0;i<n;i+=1)s[i].n||(o=r[i],this.isMasked?this.textSpans[i].setAttribute("transform",o.m):this.textSpans[i].style.transform=this.textSpans[i].style.webkitTransform=o.m,this.textSpans[i].style.opacity=o.o,o.sw&&this.textPaths[i].setAttribute("stroke-width",o.sw),o.sc&&this.textPaths[i].setAttribute("stroke",o.sc),o.fc&&(this.textPaths[i].setAttribute("fill",o.fc),this.textPaths[i].style.color=o.fc));if(this.isVisible&&(this.elemMdf||this.firstFrame)&&this.innerElem.getBBox){var a=this.innerElem.getBBox();this.currentBBox.w!==a.width&&(this.currentBBox.w=a.width,this.cont.setAttribute("width",a.width)),this.currentBBox.h!==a.height&&(this.currentBBox.h=a.height,this.cont.setAttribute("height",a.height)),this.currentBBox.w===a.width&&this.currentBBox.h===a.height&&this.currentBBox.x===a.x&&this.currentBBox.y===a.y||(this.currentBBox.w=a.width,this.currentBBox.h=a.height,this.currentBBox.x=a.x,this.currentBBox.y=a.y,this.cont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.cont.style.transform=this.cont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}this.firstFrame&&(this.firstFrame=!1)}},HTextElement.prototype.destroy=SVGTextElement.prototype.destroy,createElement(HBaseElement,HImageElement),HImageElement.prototype.createElements=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;if(this.data.hasMask){var i=document.createElement("div");styleDiv(i);var n=document.createElementNS(svgNS,"svg");styleDiv(n),n.setAttribute("width",this.assetData.w),n.setAttribute("height",this.assetData.h),i.appendChild(n),this.imageElem=document.createElementNS(svgNS,"image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),n.appendChild(this.imageElem),this.layerElement=i,this.transformedElement=i,this.baseElement=i,this.innerElem=i,this.maskedElement=this.imageElem}else styleDiv(e),this.layerElement=e,this.baseElement=e,this.innerElem=e,this.transformedElement=e;e.src=t,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.checkParenting()},HImageElement.prototype.hide=HSolidElement.prototype.hide,HImageElement.prototype.renderFrame=HSolidElement.prototype.renderFrame,HImageElement.prototype.destroy=HSolidElement.prototype.destroy,createElement(HBaseElement,HCameraElement),HCameraElement.prototype.setup=function(){var t,e,i=this.comp.threeDElements.length;for(t=0;t<i;t+=1)e=this.comp.threeDElements[t],e.perspectiveElem.style.perspective=e.perspectiveElem.style.webkitPerspective=this.pe.v+"px",e.container.style.transformOrigin=e.container.style.mozTransformOrigin=e.container.style.webkitTransformOrigin="0px 0px 0px",e.perspectiveElem.style.transform=e.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,i=this.firstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)i=!!this.hierarchy[t].finalTransform.mProp.mdf||i;if(i||this.p&&this.p.mdf||this.px&&(this.px.mdf||this.py.mdf||this.pz.mdf)||this.rx.mdf||this.ry.mdf||this.rz.mdf||this.or.mdf||this.a&&this.a.mdf){if(this.mat.reset(),this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var n=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],r=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),s=[n[0]/r,n[1]/r,n[2]/r],o=Math.sqrt(s[2]*s[2]+s[0]*s[0]),a=Math.atan2(s[1],o),h=Math.atan2(s[0],-s[2]);this.mat.rotateY(h).rotateX(-a)}if(this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v),this.hierarchy){var l;for(e=this.hierarchy.length,t=0;t<e;t+=1)l=this.hierarchy[t].finalTransform.mProp.iv.props,this.mat.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],-l[12],-l[13],l[14],l[15])}e=this.comp.threeDElements.length;var c;for(t=0;t<e;t+=1)c=this.comp.threeDElements[t],c.container.style.transform=c.container.style.webkitTransform=this.mat.toCSS()}this.firstFrame=!1},HCameraElement.prototype.destroy=function(){};var Expressions=function(){function t(t){t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer)}var e={};return e.initExpressions=t,e}();expressionsPlugin=Expressions,function(){function t(){return this.pv}function e(t,e){var i,n,r=0,s=this.keyframes.length-1,o=1,a=!0;e=void 0===e?this.offsetTime:0;for(var h="object"==typeof this.pv?[this.pv.length]:0;a;){if(i=this.keyframes[r],n=this.keyframes[r+1],r==s-1&&t>=n.t-e){i.h&&(i=n);break}if(n.t-e>t)break;r<s-1?r+=o:a=!1}var l,c,u,p,f,d=0;if(i.to){i.bezierData||bez.buildBezierData(i);var m=i.bezierData;if(t>=n.t-e||t<i.t-e){var g=t>=n.t-e?m.points.length-1:0;for(c=m.points[g].point.length,l=0;l<c;l+=1)h[l]=m.points[g].point[l]}else{i.__fnct?f=i.__fnct:(f=BezierFactory.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,i.__fnct=f),u=f((t-(i.t-e))/(n.t-e-(i.t-e)));var v,y=m.segmentLength*u,_=0;for(o=1,a=!0,p=m.points.length;a;){if(_+=m.points[d].partialLength*o,0===y||0===u||d==m.points.length-1){for(c=m.points[d].point.length,l=0;l<c;l+=1)h[l]=m.points[d].point[l];break}if(y>=_&&y<_+m.points[d+1].partialLength){for(v=(y-_)/m.points[d+1].partialLength,c=m.points[d].point.length,l=0;l<c;l+=1)h[l]=m.points[d].point[l]+(m.points[d+1].point[l]-m.points[d].point[l])*v;break}d<p-1&&1==o||d>0&&o==-1?d+=o:a=!1}}}else{var b,x,E,w,T,A=!1;for(s=i.s.length,r=0;r<s;r+=1){if(1!==i.h&&(i.o.x instanceof Array?(A=!0,i.__fnct||(i.__fnct=[]),i.__fnct[r]||(b=i.o.x[r]||i.o.x[0],x=i.o.y[r]||i.o.y[0],E=i.i.x[r]||i.i.x[0],w=i.i.y[r]||i.i.y[0])):(A=!1,i.__fnct||(b=i.o.x,x=i.o.y,E=i.i.x,w=i.i.y)),A?i.__fnct[r]?f=i.__fnct[r]:(f=BezierFactory.getBezierEasing(b,x,E,w).get,i.__fnct[r]=f):i.__fnct?f=i.__fnct:(f=BezierFactory.getBezierEasing(b,x,E,w).get,i.__fnct=f),u=t>=n.t-e?1:t<i.t-e?0:f((t-(i.t-e))/(n.t-e-(i.t-e)))),this.sh&&1!==i.h){var S=i.s[r],M=i.e[r];S-M<-180?S+=360:S-M>180&&(S-=360),T=S+(M-S)*u}else T=1===i.h?i.s[r]:i.s[r]+(i.e[r]-i.s[r])*u;1===s?h=T:h[r]=T}}return h}function i(t){if(void 0!==this.vel)return this.vel;var e=-.01;t*=this.elem.globalData.frameRate;var i,n=this.getValueAtTime(t,0),r=this.getValueAtTime(t+e,0);if(n.length){i=Array.apply(null,{length:n.length});var s;for(s=0;s<n.length;s+=1)i[s]=this.elem.globalData.frameRate*((r[s]-n[s])/e)}else i=(r-n)/e;return i}function n(t){this.propertyGroup=t}function r(t,e,i){e.x&&(i.k=!0,i.x=!0,i.getValue&&(i.getPreValue=i.getValue),i.getValue=ExpressionManager.initiateExpression.bind(i)(t,e,i))}var s=function(){function s(t,e){return this.textIndex=t+1,this.textTotal=e,this.getValue(),this.v}return function(o,a){this.pv=1,this.comp=o.comp,this.elem=o,this.mult=.01,this.type="textSelector",this.textTotal=a.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],r.bind(this)(o,a,this),this.getMult=s,this.getVelocityAtTime=i,this.kf?this.getValueAtTime=e:this.getValueAtTime=t,this.setGroupProperty=n}}(),o=PropertyFactory.getProp;PropertyFactory.getProp=function(s,a,h,l,c){var u=o(s,a,h,l,c);u.getVelocityAtTime=i,u.kf?u.getValueAtTime=e:u.getValueAtTime=t,u.setGroupProperty=n;var p=u.k;return void 0!==a.ix&&Object.defineProperty(u,"propertyIndex",{get:function(){return a.ix}}),r(s,a,u),!p&&u.x&&c.push(u),u};var a=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,i,s,o){var h=a(t,e,i,s,o);h.setGroupProperty=n;var l=h.k;return void 0!==e.ix&&Object.defineProperty(h,"propertyIndex",{get:function(){return e.ix}}),3===i?r(t,e.pt,h):4===i&&r(t,e.ks,h),!l&&h.x&&s.push(h),h};var h=PropertyFactory.getTextSelectorProp;PropertyFactory.getTextSelectorProp=function(t,e,i){return 1===e.t?new s(t,e,i):h(t,e,i)}}();var ExpressionManager=function(){function duplicatePropertyValue(t,e){if(e=e||1,"number"==typeof t)return t*e;if(t.i)return JSON.parse(JSON.stringify(t));var i,n=Array.apply(null,{length:t.length}),r=t.length;for(i=0;i<r;i+=1)n[i]=t[i]*e;return n}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e)return-t;if("object"===e){var i,n=t.length,r=[];for(i=0;i<n;i+=1)r[i]=-t[i];return r}}function sum(t,e){var i=typeof t,n=typeof e;if("string"===i||"string"===n)return t+e;if(!("number"!==i&&"boolean"!==i&&"string"!==i||"number"!==n&&"boolean"!==n&&"string"!==n))return t+e;if("object"===i&&("number"===n||"boolean"===n||"string"===n))return t[0]=t[0]+e,t;if(("number"===i||"boolean"===i||"string"===i)&&"object"===n)return e[0]=t+e[0],e;if("object"===i&&"object"===n){for(var r=0,s=t.length,o=e.length,a=[];r<s||r<o;)"number"==typeof t[r]&&"number"==typeof e[r]?a[r]=t[r]+e[r]:a[r]=void 0==e[r]?t[r]:t[r]||e[r],r+=1;return a}return 0}function sub(t,e){var i=typeof t,n=typeof e;if(!("number"!==i&&"boolean"!==i&&"string"!==i||"number"!==n&&"boolean"!==n&&"string"!==n))return t-e;if("object"===i&&("number"===n||"boolean"===n||"string"===n))return t[0]=t[0]-e,t;if(("number"===i||"boolean"===i||"string"===i)&&"object"===n)return e[0]=t-e[0],e;if("object"===i&&"object"===n){for(var r=0,s=t.length,o=e.length,a=[];r<s||r<o;)"number"==typeof t[r]&&"number"==typeof e[r]?a[r]=t[r]-e[r]:a[r]=void 0==e[r]?t[r]:t[r]||e[r],r+=1;return a}return 0}function mul(t,e){var i,n=typeof t,r=typeof e;if(!("number"!==n&&"boolean"!==n&&"string"!==n||"number"!==r&&"boolean"!==r&&"string"!==r))return t*e;var s,o;if("object"===n&&("number"===r||"boolean"===r||"string"===r)){for(o=t.length,i=Array.apply(null,{length:o}),s=0;s<o;s+=1)i[s]=t[s]*e;return i}if(("number"===n||"boolean"===n||"string"===n)&&"object"===r){for(o=e.length,i=Array.apply(null,{length:o}),s=0;s<o;s+=1)i[s]=t*e[s];return i}return 0}function div(t,e){var i,n=typeof t,r=typeof e;if(!("number"!==n&&"boolean"!==n&&"string"!==n||"number"!==r&&"boolean"!==r&&"string"!==r))return t/e;var s,o;if("object"===n&&("number"===r||"boolean"===r||"string"===r)){for(o=t.length,i=Array.apply(null,{length:o}),s=0;s<o;s+=1)i[s]=t[s]/e;return i}if(("number"===n||"boolean"===n||"string"===n)&&"object"===r){for(o=e.length,i=Array.apply(null,{length:o}),s=0;s<o;s+=1)i[s]=t/e[s];return i}return 0}function clamp(t,e,i){if(e>i){var n=i;i=e,e=n}return Math.min(Math.max(t,e),i)}function radiansToDegrees(t){return t/degToRads}function degreesToRadians(t){return t*degToRads}function length(t,e){if("number"==typeof t)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var i,n=Math.min(t.length,e.length),r=0;for(i=0;i<n;i+=1)r+=Math.pow(e[i]-t[i],2);return Math.sqrt(r)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,i,n=t[0],r=t[1],s=t[2],o=Math.max(n,r,s),a=Math.min(n,r,s),h=(o+a)/2;if(o==a)e=i=0;else{var l=o-a;switch(i=h>.5?l/(2-o-a):l/(o+a),o){case n:e=(r-s)/l+(r<s?6:0);break;case r:e=(s-n)/l+2;break;case s:e=(n-r)/l+4}e/=6}return[e,i,h,t[3]]}function hslToRgb(t){function e(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var i,n,r,s=t[0],o=t[1],a=t[2];if(0==o)i=n=r=a;else{var h=a<.5?a*(1+o):a+o-a*o,l=2*a-h;i=e(l,h,s+1/3),n=e(l,h,s),r=e(l,h,s-1/3)}return[i,n,r,t[3]]}function linear(t,e,i,n,r){if(void 0===n||void 0===r)return linear(t,0,1,e,i);if(t<=e)return n;if(t>=i)return r;var s=i===e?0:(t-e)/(i-e);if(!n.length)return n+(r-n)*s;var o,a=n.length,h=Array.apply(null,{length:a});for(o=0;o<a;o+=1)h[o]=n[o]+(r[o]-n[o])*s;return h}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,n=e.length;t||(t=Array.apply(null,{length:n}));var r=Array.apply(null,{length:n}),s=BMMath.random();for(i=0;i<n;i+=1)r[i]=t[i]+s*(e[i]-t[i]);return r}void 0===t&&(t=0);var o=BMMath.random();return t+o*(e-t)}function initiateExpression(elem,data,property){function lookAt(t,e){var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],n=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads,r=-Math.atan2(i[1],i[2])/degToRads;
return[r,n,0]}function easeOut(t,e,i){return-(i-e)*t*(t-2)+e}function nearestKey(t){var e,i,n,r=data.k.length;if(data.k.length&&"number"!=typeof data.k[0]){for(i=-1,t*=elem.comp.globalData.frameRate,e=0;e<r-1;e+=1){if(t===data.k[e].t){i=e+1,n=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(i=e+2,n=data.k[e+1].t):(i=e+1,n=data.k[e].t);break}}i===-1&&(i=e+1,n=data.k[e].t)}else i=0,n=0;var s={};return s.index=i,s.time=n/elem.comp.globalData.frameRate,s}function key(t){if(!data.k.length||"number"==typeof data.k[0])return{time:0};t-=1;var e,i={time:data.k[t].t/elem.comp.globalData.frameRate};e=t===data.k.length-1?data.k[t-1].e:data.k[t].s;var n,r=e.length;for(n=0;n<r;n+=1)i[n]=e[n];return i}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function toWorld(t){if(toworldMatrix.reset(),elem.finalTransform.mProp.applyToMatrix(toworldMatrix),elem.hierarchy&&elem.hierarchy.length){var e,i=elem.hierarchy.length;for(e=0;e<i;e+=1)elem.hierarchy[e].finalTransform.mProp.applyToMatrix(toworldMatrix);return toworldMatrix.applyToPointArray(t[0],t[1],t[2]||0)}return toworldMatrix.applyToPointArray(t[0],t[1],t[2]||0)}function fromWorld(t){fromworldMatrix.reset();var e=[];if(e.push(t),elem.finalTransform.mProp.applyToMatrix(fromworldMatrix),elem.hierarchy&&elem.hierarchy.length){var i,n=elem.hierarchy.length;for(i=0;i<n;i+=1)elem.hierarchy[i].finalTransform.mProp.applyToMatrix(fromworldMatrix);return fromworldMatrix.inversePoints(e)[0]}return fromworldMatrix.inversePoints(e)[0]}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function execute(){if(seedRandom(randSeed),this.frameExpressionId!==elem.globalData.frameId||"textSelector"===this.type){if(this.lock)return this.v=duplicatePropertyValue(this.pv,this.mult),!0;"textSelector"===this.type&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface),transform||(transform=elem.layerInterface("ADBE Transform Group")),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!(!elem.hierarchy||!elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[elem.hierarchy.length-1].layerInterface),this.lock=!0,this.getPreValue&&this.getPreValue(),value=this.pv,time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),bindedFn(),this.frameExpressionId=elem.globalData.frameId;var t,e;if(this.mult)if("number"==typeof this.v)this.v*=this.mult;else for(e=this.v.length,value===this.v&&(this.v=2===e?[value[0],value[1]]:[value[0],value[1],value[2]]),t=0;t<e;t+=1)this.v[t]*=this.mult;if("number"==typeof this.v)this.lastValue!==this.v&&(this.lastValue=this.v,this.mdf=!0);else if(this.v.i)this.mdf=!0,this.paths.length=0,this.paths[0]=this.v;else for(e=this.v.length,t=0;t<e;t+=1)this.v[t]!==this.lastValue[t]&&(this.lastValue[t]=this.v[t],this.mdf=!0);this.lock=!1}}var val=data.x,needsVelocity=val.indexOf("velocity")!==-1,elemType=elem.data.ty,transform,content,effect,thisComp=elem.comp,thisProperty=property;elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,thisLayer,thisComp,fn=new Function,fn=eval("[function(){"+val+";this.v = $bm_rt;}]")[0],bindedFn=fn.bind(this),numKeys=data.k?data.k.length:0,wiggle=function(t,e){var i,n,r=this.pv.length?this.pv.length:1,s=Array.apply(null,{len:r});for(n=0;n<r;n+=1)s[n]=0;t=5;var o=Math.floor(time*t);for(i=0,n=0;i<o;){for(n=0;n<r;n+=1)s[n]+=-e+2*e*BMMath.random();i+=1}var a=time*t,h=a-Math.floor(a),l=Array.apply({length:r});for(n=0;n<r;n+=1)l[n]=this.pv[n]+s[n]+(-e+2*e*BMMath.random())*h;return l}.bind(this),loopIn=function(t,e,i){if(!this.k)return this.pv;var n=time*elem.comp.globalData.frameRate,r=this.keyframes,s=r[0].t;if(n>=s)return this.pv;var o,a;i?(o=e?Math.abs(elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-s),a=s+o):((!e||e>r.length-1)&&(e=r.length-1),a=r[e].t,o=a-s);var h,l,c;if("pingpong"===t){var u=Math.floor((s-n)/o);if(u%2===0)return this.getValueAtTime((s-n)%o+s,0)}else{if("offset"===t){var p=this.getValueAtTime(s,0),f=this.getValueAtTime(a,0),d=this.getValueAtTime(o-(s-n)%o+s,0),m=Math.floor((s-n)/o)+1;if(this.pv.length){for(c=new Array(p.length),l=c.length,h=0;h<l;h+=1)c[h]=d[h]-(f[h]-p[h])*m;return c}return d-(f-p)*m}if("continue"===t){var g=this.getValueAtTime(s,0),v=this.getValueAtTime(s+.001,0);if(this.pv.length){for(c=new Array(g.length),l=c.length,h=0;h<l;h+=1)c[h]=g[h]+(g[h]-v[h])*(s-n)/5e-4;return c}return g+(g-v)*(s-n)/5e-4}}return this.getValueAtTime(o-(s-n)%o+s,0)}.bind(this),loopInDuration=function(t,e){return loopIn(t,e,!0)}.bind(this),loopOut=function(t,e,i){if(!this.k||!this.keyframes)return this.pv;var n=time*elem.comp.globalData.frameRate,r=this.keyframes,s=r[r.length-1].t;if(n<=s)return this.pv;var o,a;i?(o=e?Math.abs(s-elem.comp.globalData.frameRate*e):Math.max(0,s-this.elem.data.ip),a=s-o):((!e||e>r.length-1)&&(e=r.length-1),a=r[r.length-1-e].t,o=s-a);var h,l,c;if("pingpong"===t){var u=Math.floor((n-a)/o);if(u%2!==0)return this.getValueAtTime(o-(n-a)%o+a,0)}else{if("offset"===t){var p=this.getValueAtTime(a,0),f=this.getValueAtTime(s,0),d=this.getValueAtTime((n-a)%o+a,0),m=Math.floor((n-a)/o);if(this.pv.length){for(c=new Array(p.length),l=c.length,h=0;h<l;h+=1)c[h]=(f[h]-p[h])*m+d[h];return c}return(f-p)*m+d}if("continue"===t){var g=this.getValueAtTime(s,0),v=this.getValueAtTime(s-.001,0);if(this.pv.length){for(c=new Array(g.length),l=c.length,h=0;h<l;h+=1)c[h]=g[h]+(g[h]-v[h])*(n-s)/5e-4;return c}return g+(g-v)*(n-s)/5e-4}}return this.getValueAtTime((n-a)%o+a,0)}.bind(this),loop_out=loopOut,loopOutDuration=function(t,e){return loopOut(t,e,!0)}.bind(this),valueAtTime=function(t){return this.getValueAtTime(t*elem.comp.globalData.frameRate,0)}.bind(this),velocityAtTime=function(t){return this.getVelocityAtTime(t)}.bind(this),comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),toworldMatrix=new Matrix,fromworldMatrix=new Matrix,time,velocity,value,textIndex,textTotal,selectorValue,index=elem.data.ind+1,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random());return execute}var ob={},Math=BMMath,radians_to_degrees=radiansToDegrees,degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];return ob.initiateExpression=initiateExpression,ob}(),ShapeExpressionInterface=function(){function t(t,e,i){return f(t,e,i)}function e(t,e,i){return m(t,e,i)}function i(t,e,i){return g(t,e,i)}function n(t,e,i){return v(t,e,i)}function r(t,e,i){return y(t,e,i)}function s(t,e,i){return _(t,e,i)}function o(t,e,i){return b(t,e,i)}function a(t,e,i){return x(t,e,i)}function h(t,e,i){return E(t,e,i)}function l(t,e,i){return w(t,e,i)}function c(t,e,i){return T(t,e,i)}function u(t,e,i){var n,r=[],s=t?t.length:0;for(n=0;n<s;n+=1)"gr"==t[n].ty?r.push(ShapeExpressionInterface.createGroupInterface(t[n],e[n],i)):"fl"==t[n].ty?r.push(ShapeExpressionInterface.createFillInterface(t[n],e[n],i)):"st"==t[n].ty?r.push(ShapeExpressionInterface.createStrokeInterface(t[n],e[n],i)):"tm"==t[n].ty?r.push(ShapeExpressionInterface.createTrimInterface(t[n],e[n],i)):"tr"==t[n].ty||("el"==t[n].ty?r.push(ShapeExpressionInterface.createEllipseInterface(t[n],e[n],i)):"sr"==t[n].ty?r.push(ShapeExpressionInterface.createStarInterface(t[n],e[n],i)):"sh"==t[n].ty?r.push(ShapeExpressionInterface.createPathInterface(t[n],e[n],i)):"rc"==t[n].ty?r.push(ShapeExpressionInterface.createRectInterface(t[n],e[n],i)):"rd"==t[n].ty&&r.push(ShapeExpressionInterface.createRoundedInterface(t[n],e[n],i)));return r}var p={createShapeInterface:t,createGroupInterface:e,createTrimInterface:r,createStrokeInterface:n,createTransformInterface:s,createEllipseInterface:o,createStarInterface:a,createRectInterface:h,createRoundedInterface:l,createPathInterface:c,createFillInterface:i},f=function(){return function(t,e,i){function n(t){if("number"==typeof t)return r[t-1];for(var e=0,i=r.length;e<i;){if(r[e]._name===t)return r[e];e+=1}}var r;return n.propertyGroup=i,r=u(t,e,n),n}}(),d=function(){return function(t,e,i){var n,r=function(t){if("number"==typeof t)return n[t-1];for(var e=0,i=n.length;e<i;){if(n[e]._name===t||n[e].mn===t)return n[e];e+=1}};return r.propertyGroup=function(t){return 1===t?r:i(t-1)},n=u(t.it,e.it,r.propertyGroup),r.numProperties=n.length,r}}(),m=function(){return function(t,e,i){var n=function(t){switch(t){case"ADBE Vectors Group":case 2:return n.content;case"ADBE Vector Transform Group":case 3:default:return n.transform}};n.propertyGroup=function(t){return 1===t?n:i(t-1)};var r=d(t,e,n.propertyGroup),s=ShapeExpressionInterface.createTransformInterface(t.it[t.it.length-1],e.it[e.it.length-1],n.propertyGroup);return n.content=r,n.transform=s,Object.defineProperty(n,"_name",{get:function(){return t.nm}}),n.numProperties=1,n.nm=t.nm,n.mn=t.mn,n}}(),g=function(){return function(t,e,i){e.c.setGroupProperty(i),e.o.setGroupProperty(i);var n={get color(){return e.c.k&&e.c.getValue(),[e.c.v[0]/e.c.mult,e.c.v[1]/e.c.mult,e.c.v[2]/e.c.mult,1]},get opacity(){return e.o.k&&e.o.getValue(),e.o.v},_name:t.nm,mn:t.mn};return n}}(),v=function(){return function(t,e,i){function n(t){return 1===t?r:i(t-1)}e.c.setGroupProperty(n),e.o.setGroupProperty(n),e.w.setGroupProperty(n);var r={get color(){return e.c.k&&e.c.getValue(),[e.c.v[0]/e.c.mult,e.c.v[1]/e.c.mult,e.c.v[2]/e.c.mult,1]},get opacity(){return e.o.k&&e.o.getValue(),e.o.v},get strokeWidth(){return e.w.k&&e.w.getValue(),e.w.v},dashOb:{},get dash(){var n,r=e.d,s=t.d,o=s.length;for(n=0;n<o;n+=1)r.dataProps[n].p.k&&r.dataProps[n].p.getValue(),r.dataProps[n].p.setGroupProperty(i),this.dashOb[s[n].nm]=r.dataProps[n].p.v;return this.dashOb},_name:t.nm,mn:t.mn};return r}}(),y=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return e===t.e.ix?r.end:e===t.s.ix?r.start:e===t.o.ix?r.offset:void 0}return r.propertyIndex=t.ix,e.s.setGroupProperty(n),e.e.setGroupProperty(n),e.o.setGroupProperty(n),r.propertyIndex=t.ix,Object.defineProperty(r,"start",{get:function(){return e.s.k&&e.s.getValue(),e.s.v/e.s.mult}}),Object.defineProperty(r,"end",{get:function(){return e.e.k&&e.e.getValue(),e.e.v/e.e.mult}}),Object.defineProperty(r,"offset",{get:function(){return e.o.k&&e.o.getValue(),e.o.v}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),_=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.a.ix===e?r.anchorPoint:t.o.ix===e?r.opacity:t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.s.ix===e?r.scale:t.sk&&t.sk.ix===e?r.skew:t.sa&&t.sa.ix===e?r.skewAxis:"Opacity"===e?r.opacity:"Position"===e?r.position:"Anchor Point"===e?r.anchorPoint:"Scale"===e?r.scale:"Rotation"===e?r.rotation:"Skew"===e?r.skew:"Skew Axis"===e?r.skewAxis:void 0}e.transform.mProps.o.setGroupProperty(n),e.transform.mProps.p.setGroupProperty(n),e.transform.mProps.a.setGroupProperty(n),e.transform.mProps.s.setGroupProperty(n),e.transform.mProps.r.setGroupProperty(n),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(n),e.transform.mProps.sa.setGroupProperty(n)),e.transform.op.setGroupProperty(n),Object.defineProperty(r,"opacity",{get:function(){return e.transform.mProps.o.k&&e.transform.mProps.o.getValue(),e.transform.mProps.o.v/e.transform.mProps.o.mult}}),Object.defineProperty(r,"position",{get:function(){return e.transform.mProps.p.k&&e.transform.mProps.p.getValue(),[e.transform.mProps.p.v[0],e.transform.mProps.p.v[1]]}}),Object.defineProperty(r,"anchorPoint",{get:function(){return e.transform.mProps.a.k&&e.transform.mProps.a.getValue(),[e.transform.mProps.a.v[0],e.transform.mProps.a.v[1]]}});var s=[];return Object.defineProperty(r,"scale",{get:function(){return e.transform.mProps.s.k&&e.transform.mProps.s.getValue(),s[0]=e.transform.mProps.s.v[0]/e.transform.mProps.s.mult,s[1]=e.transform.mProps.s.v[1]/e.transform.mProps.s.mult,s}}),Object.defineProperty(r,"rotation",{get:function(){return e.transform.mProps.r.k&&e.transform.mProps.r.getValue(),e.transform.mProps.r.v/e.transform.mProps.r.mult}}),Object.defineProperty(r,"skew",{get:function(){return e.transform.mProps.sk.k&&e.transform.mProps.sk.getValue(),e.transform.mProps.sk.v}}),Object.defineProperty(r,"skewAxis",{get:function(){return e.transform.mProps.sa.k&&e.transform.mProps.sa.getValue(),e.transform.mProps.sa.v}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.ty="tr",r.mn=t.mn,r}}(),b=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.p.ix===e?r.position:t.s.ix===e?r.size:void 0}r.propertyIndex=t.ix;var s="tm"===e.sh.ty?e.sh.prop:e.sh;return s.s.setGroupProperty(n),s.p.setGroupProperty(n),Object.defineProperty(r,"size",{get:function(){return s.s.k&&s.s.getValue(),[s.s.v[0],s.s.v[1]]}}),Object.defineProperty(r,"position",{get:function(){return s.p.k&&s.p.getValue(),[s.p.v[0],s.p.v[1]]}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),x=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.pt.ix===e?r.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?r.outerRadius:t.os.ix===e?r.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?r.innerRoundness:void 0:r.innerRadius}var s="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,s.or.setGroupProperty(n),s.os.setGroupProperty(n),s.pt.setGroupProperty(n),s.p.setGroupProperty(n),s.r.setGroupProperty(n),t.ir&&(s.ir.setGroupProperty(n),s.is.setGroupProperty(n)),Object.defineProperty(r,"position",{get:function(){return s.p.k&&s.p.getValue(),s.p.v}}),Object.defineProperty(r,"rotation",{get:function(){return s.r.k&&s.r.getValue(),s.r.v/s.r.mult}}),Object.defineProperty(r,"points",{get:function(){return s.pt.k&&s.pt.getValue(),s.pt.v}}),Object.defineProperty(r,"outerRadius",{get:function(){return s.or.k&&s.or.getValue(),s.or.v}}),Object.defineProperty(r,"outerRoundness",{get:function(){return s.os.k&&s.os.getValue(),s.os.v/s.os.mult}}),Object.defineProperty(r,"innerRadius",{get:function(){return s.ir?(s.ir.k&&s.ir.getValue(),s.ir.v):0}}),Object.defineProperty(r,"innerRoundness",{get:function(){return s.is?(s.is.k&&s.is.getValue(),s.is.v/s.is.mult):0}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),E=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){return t.p.ix===e?r.position:t.r.ix===e?r.rotation:t.pt.ix===e?r.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?r.outerRadius:t.os.ix===e?r.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?r.innerRoundness:void 0:r.innerRadius}var s="tm"===e.sh.ty?e.sh.prop:e.sh;return r.propertyIndex=t.ix,s.p.setGroupProperty(n),s.s.setGroupProperty(n),s.r.setGroupProperty(n),Object.defineProperty(r,"position",{get:function(){return s.p.k&&s.p.getValue(),s.p.v}}),Object.defineProperty(r,"roundness",{get:function(){return s.r.k&&s.r.getValue(),s.r.v}}),Object.defineProperty(r,"size",{get:function(){return s.s.k&&s.s.getValue(),s.s.v}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),w=function(){return function(t,e,i){function n(t){return 1==t?r:i(--t)}function r(e){if(t.r.ix===e||"Round Corners 1"===e)return r.radius}var s=e;return r.propertyIndex=t.ix,s.rd.setGroupProperty(n),Object.defineProperty(r,"radius",{get:function(){return s.rd.k&&s.rd.getValue(),s.rd.v}}),Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.mn=t.mn,r}}(),T=function(){return function(t,e,i){var n="tm"===e.sh.ty?e.sh.prop:e.sh;n.setGroupProperty(i);var r={get shape(){return n.k&&n.getValue(),n.v},get path(){return n.k&&n.getValue(),n.v},_name:t.nm,mn:t.mn};return r}}();return p}(),LayerExpressionInterface=function(){function t(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.applyToPointArray(t[0],t[1],t[2]||0)}return e.applyToPointArray(t[0],t[1],t[2]||0)}return function(e){function i(t){r.mask=t.getMask.bind(t)}function n(t){r.effect=t}function r(t){switch(t){case"ADBE Root Vectors Group":case 2:return r.shapeInterface;case 1:case"Transform":case"transform":case"ADBE Transform Group":return s;case 4:case"ADBE Effect Parade":return r.effect}}var s=TransformExpressionInterface(e.transform);return r.toWorld=t,r.toComp=t,r._elem=e,Object.defineProperty(r,"hasParent",{get:function(){return!!e.hierarchy}}),Object.defineProperty(r,"parent",{get:function(){return e.hierarchy[0].layerInterface}}),Object.defineProperty(r,"rotation",{get:function(){return s.rotation}}),Object.defineProperty(r,"scale",{get:function(){return s.scale}}),Object.defineProperty(r,"position",{get:function(){return s.position}}),Object.defineProperty(r,"anchorPoint",{get:function(){return s.anchorPoint}}),Object.defineProperty(r,"transform",{get:function(){return s}}),Object.defineProperty(r,"_name",{value:e.data.nm}),Object.defineProperty(r,"content",{get:function(){return r.shapeInterface}}),r.active=!0,r.registerMaskInterface=i,r.registerEffectsInterface=n,r}}(),CompExpressionInterface=function(){return function(t){function e(e){for(var i=0,n=t.layers.length;i<n;){if(t.layers[i].nm===e||t.layers[i].ind===e-1)return t.elements[i].layerInterface;i+=1}}return e.layer=e,e.pixelAspect=1,e.height=t.globalData.compSize.h,e.width=t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e}}(),TransformExpressionInterface=function(){return function(t){function e(i){switch(i){case"scale":case"Scale":case"ADBE Scale":return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":return e.rotation;case"position":case"Position":case"ADBE Position":return t.position;case"anchorPoint":case"AnchorPoint":case"ADBE AnchorPoint":return e.anchorPoint;case"opacity":case"Opacity":return e.opacity}}return Object.defineProperty(e,"rotation",{get:function(){return t.rotation}}),Object.defineProperty(e,"scale",{get:function(){var e,i=t.scale,n=i.length,r=Array.apply(null,{length:n});for(e=0;e<n;e+=1)r[e]=100*i[e];return r}}),Object.defineProperty(e,"position",{get:function(){return t.position}}),Object.defineProperty(e,"xPosition",{get:function(){return t.xPosition}}),Object.defineProperty(e,"yPosition",{get:function(){return t.yPosition}}),Object.defineProperty(e,"anchorPoint",{get:function(){return t.anchorPoint}}),Object.defineProperty(e,"opacity",{get:function(){return 100*t.opacity}}),Object.defineProperty(e,"skew",{get:function(){return t.skew}}),Object.defineProperty(e,"skewAxis",{get:function(){return t.skewAxis}}),e}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,i=this.compositions.length;e<i;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return this.compositions[0].compInterface}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(t,i){if(t.effects){var n,r=[],s=t.data.ef,o=t.effects.effectElements.length;for(n=0;n<o;n+=1)r.push(e(s[n],t.effects.effectElements[n],i,t));return function(e){for(var i=t.data.ef,n=0,s=i.length;n<s;){if(e===i[n].nm||e===i[n].mn||e===i[n].ix)return r[n];n+=1}}}}function e(t,n,r,s){var o,a=[],h=t.ef.length;for(o=0;o<h;o+=1)5===t.ef[o].ty?a.push(e(t.ef[o],n.effectElements[o],r,s)):a.push(i(n.effectElements[o],t.ef[o].ty,s));var l=function(e){for(var i=t.ef,n=0,r=i.length;n<r;){if(e===i[n].nm||e===i[n].mn||e===i[n].ix)return 5===i[n].ty?a[n]:a[n]();n+=1}return a[0]()};return l.active=0!==t.en,l}function i(t,e,i){return function(){if(10===e)return i.comp.compInterface(t.p.v);if(t.p.k&&t.p.getValue(),"number"==typeof t.p.v)return t.p.v;var n,r=t.p.v.length,s=Array.apply(null,{length:r});for(n=0;n<r;n+=1)s[n]=t.p.v[n];return s}}var n={createEffectsInterface:t};return n}();GroupEffect.prototype.getValue=function(){this.mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.mdf=!!this.dynamicProperties[t].mdf||this.mdf},GroupEffect.prototype.init=function(t,e,i){this.data=t,this.mdf=!1,this.effectElements=[];var n,r,s=this.data.ef.length,o=this.data.ef;for(n=0;n<s;n+=1)switch(o[n].ty){case 0:r=new SliderEffect(o[n],e,i),this.effectElements.push(r);break;case 1:r=new AngleEffect(o[n],e,i),this.effectElements.push(r);break;case 2:r=new ColorEffect(o[n],e,i),this.effectElements.push(r);break;case 3:r=new PointEffect(o[n],e,i),this.effectElements.push(r);break;case 4:case 7:r=new CheckboxEffect(o[n],e,i),this.effectElements.push(r);break;case 10:r=new LayerIndexEffect(o[n],e,i),this.effectElements.push(r);break;case 5:r=new EffectsManager(o[n],e,i),this.effectElements.push(r);break;case 6:r=new NoValueEffect(o[n],e,i),this.effectElements.push(r)}};var bodymovinjs={};bodymovinjs.play=play,bodymovinjs.pause=pause,bodymovinjs.togglePause=togglePause,bodymovinjs.setSpeed=setSpeed,bodymovinjs.setDirection=setDirection,bodymovinjs.stop=stop,bodymovinjs.moveFrame=moveFrame,bodymovinjs.searchAnimations=searchAnimations,bodymovinjs.registerAnimation=registerAnimation,bodymovinjs.loadAnimation=loadAnimation,bodymovinjs.setSubframeRendering=setSubframeRendering,bodymovinjs.resize=resize,bodymovinjs.start=start,bodymovinjs.goToAndStop=goToAndStop,bodymovinjs.destroy=destroy,bodymovinjs.setQuality=setQuality,bodymovinjs.installPlugin=installPlugin,bodymovinjs.__getFactory=getFactory,bodymovinjs.version="4.5.6";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index],queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return bodymovinjs})},function(t,e,i){"use strict";var n,r,s,o,a,h,l,c=i(24),u=i(37),p=Function.prototype.apply,f=Function.prototype.call,d=Object.create,m=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var i;return u(e),v.call(this,"__ee__")?i=this.__ee__:(i=y.value=d(null),m(this,"__ee__",y),y.value=null),i[t]?"object"==typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},r=function(t,e){var i,r;return u(e),r=this,n.call(this,t,i=function(){s.call(r,t,i),p.call(e,this,arguments)}),i.__eeOnceListener__=e,this},s=function(t,e){var i,n,r,s;if(u(e),!v.call(this,"__ee__"))return this;if(i=this.__ee__,!i[t])return this;if(n=i[t],"object"==typeof n)for(s=0;r=n[s];++s)r!==e&&r.__eeOnceListener__!==e||(2===n.length?i[t]=n[s?0:1]:n.splice(s,1));else n!==e&&n.__eeOnceListener__!==e||delete i[t];return this},o=function(t){var e,i,n,r,s;if(v.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"==typeof r){for(i=arguments.length,s=new Array(i-1),e=1;e<i;++e)s[e-1]=arguments[e];for(r=r.slice(),e=0;n=r[e];++e)p.call(n,this,s)}else switch(arguments.length){case 1:f.call(r,this);break;case 2:f.call(r,this,arguments[1]);break;case 3:f.call(r,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),e=1;e<i;++e)s[e-1]=arguments[e];p.call(r,this,s)}},a={on:n,once:r,off:s,emit:o},h={on:c(n),once:c(r),off:c(s),emit:c(o)},l=g({},h),t.exports=e=function(t){return null==t?d(l):g(Object(t),h)},e.methods=a},function(t,e,i){"use strict";var n,r=i(25),s=i(32),o=i(33),a=i(34);n=t.exports=function(t,e){var i,n,o,h,l;return arguments.length<2||"string"!=typeof t?(h=e,e=t,t=null):h=arguments[2],null==t?(i=o=!0,n=!1):(i=a.call(t,"c"),n=a.call(t,"e"),o=a.call(t,"w")),l={value:e,configurable:i,enumerable:n,writable:o},h?r(s(h),l):l},n.gs=function(t,e,i){var n,h,l,c;return"string"!=typeof t?(l=i,i=e,e=t,t=null):l=arguments[3],null==e?e=void 0:o(e)?null==i?i=void 0:o(i)||(l=i,i=void 0):(l=e,e=i=void 0),null==t?(n=!0,h=!1):(n=a.call(t,"c"),h=a.call(t,"e")),c={get:e,set:i,configurable:n,enumerable:h},l?r(s(l),c):c}},function(t,e,i){"use strict";t.exports=i(26)()?Object.assign:i(27)},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,i){"use strict";var n=i(28),r=i(31),s=Math.max;t.exports=function(t,e){var i,o,a,h=s(arguments.length,2);for(t=Object(r(t)),a=function(n){try{t[n]=e[n]}catch(r){i||(i=r)}},o=1;o<h;++o)e=arguments[o],n(e).forEach(a);if(void 0!==i)throw i;return t}},function(t,e,i){"use strict";t.exports=i(29)()?Object.keys:i(30)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e){"use strict";var i=Object.keys;t.exports=function(t){return i(null==t?t:Object(t))}},function(t,e){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},function(t,e){"use strict";var i=Array.prototype.forEach,n=Object.create,r=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=n(null);return i.call(arguments,function(t){null!=t&&r(Object(t),e)}),e}},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,i){"use strict";t.exports=i(35)()?String.prototype.contains:i(36)},function(t,e){"use strict";var i="razdwatrzy";t.exports=function(){return"function"==typeof i.contains&&(i.contains("dwa")===!0&&i.contains("foo")===!1)}},function(t,e){"use strict";var i=String.prototype.indexOf;t.exports=function(t){return i.call(this,t,arguments[1])>-1}},function(t,e){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e){"use strict";var i={UNKNOWN:0,NORMAL:1,MAGIC_WINDOW:2,VR:3};t.exports=i},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WebVRManager=e.State=e.dom=e.EnterVRButton=void 0;var s=i(40),o=r(s),a=i(41),h=r(a),l=i(44),c=n(l),u=i(45),p=r(u);i(46),e.EnterVRButton=p["default"],e.dom=c,e.State=h["default"],e.WebVRManager=o["default"]},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(41),l=n(h),c=i(42),u=n(c),p=i(43),f=n(p),d=function(e){function i(){r(this,i);var t=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.state=l["default"].PREPARING,t.__onVRDisplayPresentChange=t.__onVRDisplayPresentChange.bind(t),window.addEventListener("vrdisplaypresentchange",t.__onVRDisplayPresentChange),t.__onChangeFullscreen=t.__onChangeFullscreen.bind(t),f["default"].enabled&&document.addEventListener(f["default"].raw.fullscreenchange,t.__onChangeFullscreen),t}return o(i,e),a(i,[{key:"checkDisplays",value:function(){var t=this;return i.getVRDisplay().then(function(e){return t.defaultDisplay=e,t.__setState(l["default"].READY_TO_PRESENT),e})["catch"](function(e){delete t.defaultDisplay,"NO_DISPLAYS"==e.name?t.__setState(l["default"].ERROR_NO_PRESENTABLE_DISPLAYS):"WEBVR_UNSUPPORTED"==e.name?t.__setState(l["default"].ERROR_BROWSER_NOT_SUPPORTED):t.__setState(l["default"].ERROR_UNKOWN)})}},{key:"remove",value:function(){window.removeEventListener("vrdisplaypresentchange",this.__onVRDisplayPresentChange),f["default"].enabled&&document.removeEventListener(f["default"].raw.fullscreenchanged,this.__onChangeFullscreen),this.removeAllListeners()}},{key:"enterVR",value:function(t,e){var i=this;return this.presentedSource=e,t.requestPresent([{source:e}]).then(function(){},function(){return i.__setState(l["default"].ERROR_REQUEST_TO_PRESENT_REJECTED)})}},{key:"exitVR",value:function(t){var e=this;return t.exitPresent().then(function(){e.presentedSource=void 0},function(){return e.__setState(l["default"].ERROR_EXIT_PRESENT_REJECTED)})}},{key:"enterFullscreen",value:function(t){return f["default"].enabled?f["default"].request(t):this.__setState(l["default"].PRESENTING_FULLSCREEN),!0}},{key:"exitFullscreen",value:function(){return f["default"].enabled&&f["default"].isFullscreen?f["default"].exit():this.state==l["default"].PRESENTING_FULLSCREEN&&this.checkDisplays(),!0}},{key:"__setState",value:function(t){t!=this.state&&(this.emit("change",t,this.state),this.state=t)}},{key:"__onChangeFullscreen",value:function(t){f["default"].isFullscreen?this.state!=l["default"].PRESENTING&&this.__setState(l["default"].PRESENTING_FULLSCREEN):this.checkDisplays()}},{key:"__onVRDisplayPresentChange",value:function(t){try{var e=void 0;if(t.display?e=t.display:t.detail&&t.detail.display&&(e=t.detail.display),e&&e.isPresenting&&e.getLayers()[0].source!==this.presentedSource)return;var i=this.defaultDisplay&&this.defaultDisplay.isPresenting;this.__setState(i?l["default"].PRESENTING:l["default"].READY_TO_PRESENT)}catch(n){}}}],[{key:"getVRDisplay",value:function(){return new t(function(t,e){if(!navigator||!navigator.getVRDisplays){var i=new Error("Browser not supporting WebVR");return i.name="WEBVR_UNSUPPORTED",void e(i)}var n=function(){var t=new Error("No displays found");t.name="NO_DISPLAYS",e(t)};navigator.getVRDisplays().then(function(e){for(var i=0;i<e.length;i++)if(e[i].capabilities.canPresent){t(e[i]);break}n()},n)})}}]),i}(u["default"]);e["default"]=d}).call(e,i(2))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="ready",n="presenting",r="presenting-fullscreen",s="preparing",o="error-no-presentable-displays",a="error-browser-not-supported",h="error-request-to-present-rejected",l="error-exit-present-rejected",c="error-request-state-change-rejected",u="error-unkown";e["default"]={READY_TO_PRESENT:i,PRESENTING:n,PRESENTING_FULLSCREEN:r,PREPARING:s,ERROR_NO_PRESENTABLE_DISPLAYS:o,ERROR_BROWSER_NOT_SUPPORTED:a,ERROR_REQUEST_TO_PRESENT_REJECTED:h,ERROR_EXIT_PRESENT_REJECTED:l,ERROR_REQUEST_STATE_CHANGE_REJECTED:c,ERROR_UNKOWN:u}},function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(){this._events=new n,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)o.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},s.prototype.emit=function(t,e,i,n,r,s){
var o=a?a+t:t;if(!this._events[o])return!1;var h,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,r),!0;case 6:return c.fn.call(c.context,e,i,n,r,s),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,n);break;default:if(!h)for(p=1,h=new Array(u-1);p<u;p++)h[p-1]=arguments[p];c[l].fn.apply(c[l].context,h)}}return!0},s.prototype.on=function(t,e,i){var n=new r(e,i||this),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.once=function(t,e,i){var n=new r(e,i||this,(!0)),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.removeListener=function(t,e,i,r){var s=a?a+t:t;if(!this._events[s])return this;if(!e)return 0===--this._eventsCount?this._events=new n:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||(0===--this._eventsCount?this._events=new n:delete this._events[s]);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[s]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new n:delete this._events[s]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=a,s.EventEmitter=s,t.exports=s},function(t,e){/*!
	* screenfull
	* v3.0.0 - 2015-11-24
	* (c) Sindre Sorhus; MIT License
	*/
!function(){"use strict";var e="undefined"!=typeof t&&t.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var t,e,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=i.length,s={};n<r;n++)if(t=i[n],t&&t[1]in document){for(n=0,e=t.length;n<e;n++)s[i[0][n]]=t[n];return s}return!1}(),r={request:function(t){var e=n.requestFullscreen;t=t||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?t[e]():t[e](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[n.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},raw:n};return n?(Object.defineProperties(r,{isFullscreen:{get:function(){return Boolean(document[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[n.fullscreenEnabled])}}}),void(e?t.exports=r:window.screenfull=r)):void(e?t.exports=!1:window.screenfull=!1)}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=.8,n={},r=function(t,e){var n=e*i,r=o(t,n)+a(t,n);return'<button class="'+t+'-button">\n          <div class="'+t+'-title"></div>\n          <div class="'+t+'-logo" >'+r+"</div>\n        </button>"},s=e.injectCSS=function(t){var e=document.createElement("style");e.innerHTML=t;var i=document.getElementsByTagName("head")[0];i.insertBefore(e,i.firstChild)},o=(e.createDefaultView=function(t){var e=t.height/3;t.injectCSS&&(n[t.cssprefix]||(s(h(t,e)),n[t.cssprefix]=!0));var i=document.createElement("div");return i.innerHTML=r(t.cssprefix,e),i.firstChild},e.createVRIcon=function(t,e){var i=document.createElement("div");return i.innerHTML=o(t,e),i.firstChild},e.createNoVRIcon=function(t,e){var i=document.createElement("div");return i.innerHTML=a(t,e),i.firstChild},function(t,e){var i=28/18;return'<svg class="'+t+'-svg" version="1.1" x="0px" y="0px" \n        width="'+i*e+'px" height="'+e+'px" viewBox="0 0 28 18" xml:space="preserve">\n        <path d="M26.8,1.1C26.1,0.4,25.1,0,24.2,0H3.4c-1,0-1.7,0.4-2.4,1.1C0.3,1.7,0,2.7,0,3.6v10.7\n        c0,1,0.3,1.9,0.9,2.6C1.6,17.6,2.4,18,3.4,18h5c0.7,0,1.3-0.2,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l\n        1.5-2.6C13.2,13.1,13,13,14,13v0h-0.2 h0c0.3,0,0.7,0.1,0.8,0.5l1.4,2.6c0.3,0.6,0.8,1.1,1.3,\n        1.4c0.6,0.3,1.2,0.5,1.8,0.5h5c1,0,2-0.4,2.7-1.1c0.7-0.7,1.2-1.6,1.2-2.6 V3.6C28,2.7,27.5,\n        1.7,26.8,1.1z M7.4,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8c1.6,0,2.8,1.3,2.8,2.8\n        C10.2,10.5,8.9,11.8,7.4,11.8z M20.1,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8C21.7\n        ,6.2,23,7.4,23,9 C23,10.5,21.7,11.8,20.1,11.8z"/>\n    </svg>'}),a=function(t,e){var i=28/18;return'<svg class="'+t+'-svg-error" x="0px" y="0px" \n        width="'+i*e+'px" height="'+i*e+'px" viewBox="0 0 28 28" xml:space="preserve">\n        <path d="M17.6,13.4c0-0.2-0.1-0.4-0.1-0.6c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8s-1.3,2.8-2.8,2.8\n        c-0.2,0-0.4,0-0.6-0.1l5.9,5.9c0.5-0.2,0.9-0.4,1.3-0.8\n        c0.7-0.7,1.1-1.6,1.1-2.5V7.4c0-1-0.4-1.9-1.1-2.5c-0.7-0.7-1.6-1-2.5-1\n        H8.1 L17.6,13.4z"/>\n        <path d="M10.1,14.2c-0.5,0.9-1.4,1.4-2.4,1.4c-1.6,0-2.8-1.3-2.8-2.8c0-1.1,0.6-2,1.4-2.5\n        L0.9,5.1 C0.3,5.7,0,6.6,0,7.5v10.7c0,1,0.4,1.8,1.1,2.5c0.7,0.7,1.6,1,2.5,1\n        h5c0.7,0,1.3-0.1,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l1.3-2.6 L10.1,14.2z"/>\n        <path d="M25.5,27.5l-25-25C-0.1,2-0.1,1,0.5,0.4l0,0C1-0.1,2-0.1,2.6,0.4l25,25c0.6,0.6,0.6,1.5\n        ,0,2.1l0,0 C27,28.1,26,28.1,25.5,27.5z"/>\n    </svg>'},h=e.generateCSS=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=t.height,r=2,s=t.background?t.background:t.color,o=t.cssprefix,a=void 0;return a="round"==t.corners?t.height/2:"square"==t.corners?2:t.corners,"\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/31P4mP32i98D9CEnGyeX9Q.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\n    }\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/Zi_e6rBgGqv33BWF8WTq8g.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, \n                       U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;\n    }\n\n    button."+o+"-button {\n        font-family: 'Karla', sans-serif;\n\n        border: "+s+" "+r+"px solid;\n        border-radius: "+a+"px;\n        box-sizing: border-box;\n        background: "+(t.background?t.background:"none")+";\n\n        height: "+n+"px;\n        min-width: "+9.6*e+"px;\n        display: inline-block;\n        position: relative;\n\n        cursor: pointer;\n    }\n    \n    button."+o+"-button:focus {\n      outline: none;\n    }\n\n    /*\n    * Logo\n    */\n\n    ."+o+"-logo {\n        width: "+n+"px;\n        height: "+n+"px;\n        position: absolute;\n        top:0px;\n        left:0px;\n        width: "+(n-4)+"px;\n        height: "+(n-4)+"px;\n    }\n    ."+o+"-svg {\n        fill: "+t.color+";\n        margin-top: "+((n-e*i)/2-2)+"px;\n        margin-left: "+n/3+"px;\n    }\n    ."+o+"-svg-error {\n        fill: "+t.color+";\n        display:none;\n        margin-top: "+((n-28/18*e*i)/2-2)+"px;\n        margin-left: "+n/3+"px;\n    }\n\n\n    /*\n    * Title\n    */\n\n    ."+o+"-title {\n        color: "+t.color+";\n        position: relative;\n        font-size: "+e+"px;\n        padding-left: "+1.05*n+"px;\n        padding-right: "+(a-10<5?n/3:a-10)+"px;\n    }\n\n    /*\n    * disabled\n    */\n\n    button."+o+"-button[disabled=true] {\n        opacity: "+t.disabledOpacity+";\n    }\n\n    button."+o+"-button[disabled=true] > ."+o+"-logo > ."+o+"-svg {\n        display:none;\n    }\n\n    button."+o+"-button[disabled=true] > ."+o+"-logo > ."+o+"-svg-error {\n        display:initial;\n    }\n  "}},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(40),l=n(h),c=i(44),u=i(41),p=n(u),f=i(42),d=n(f),m=function(e){function i(e,n){r(this,i);var o=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n=n||{},n.color=n.color||"rgb(80,168,252)",n.background=n.background||!1,n.disabledOpacity=n.disabledOpacity||.5,n.height=n.height||55,n.corners=n.corners||"square",n.cssprefix=n.cssprefix||"webvr-ui",n.textEnterVRTitle=n.textEnterVRTitle||"ENTER VR",n.textVRNotFoundTitle=n.textVRNotFoundTitle||"VR NOT FOUND",n.textExitVRTitle=n.textExitVRTitle||"EXIT VR",n.onRequestStateChange=n.onRequestStateChange||function(){return!0},n.beforeEnter=n.beforeEnter||function(){return new t(function(t){return t()})},n.beforeExit=n.beforeExit||function(){return new t(function(t){return t()})},n.injectCSS=n.injectCSS!==!1,o.options=n,o.sourceCanvas=e,o.domElement=n.domElement||(0,c.createDefaultView)(n),o.__defaultDisplayStyle=o.domElement.style.display||"initial",o.manager=new l["default"],o.manager.checkDisplays(),o.manager.addListener("change",function(t){return o.__onStateChange(t)}),o.domElement.addEventListener("click",function(){return o.__onEnterVRClick()}),o.__forceDisabled=!1,o.setTitle(o.options.textEnterVRTitle),o}return o(i,e),a(i,[{key:"setTitle",value:function(t){return this.domElement.title=t,g(this.domElement,this.options.cssprefix,"title",function(e){t?(e.innerText=t,e.style.display="initial"):e.style.display="none"}),this}},{key:"setTooltip",value:function(t){return this.domElement.title=t,this}},{key:"show",value:function(){return this.domElement.style.display=this.__defaultDisplayStyle,this.emit("show"),this}},{key:"hide",value:function(){return this.domElement.style.display="none",this.emit("hide"),this}},{key:"enable",value:function(){return this.__setDisabledAttribute(!1),this.__forceDisabled=!1,this}},{key:"disable",value:function(){return this.__setDisabledAttribute(!0),this.__forceDisabled=!0,this}},{key:"remove",value:function(){this.manager.remove(),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement)}},{key:"getVRDisplay",value:function(){return l["default"].getVRDisplay()}},{key:"isPresenting",value:function(){return this.state===p["default"].PRESENTING||this.state==p["default"].PRESENTING_FULLSCREEN}},{key:"requestEnterVR",value:function(){var e=this;return new t(function(t,i){return e.options.onRequestStateChange(p["default"].PRESENTING)?e.options.beforeEnter().then(function(){return e.manager.enterVR(e.manager.defaultDisplay,e.sourceCanvas)}).then(t):void i(new Error(p["default"].ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestExit",value:function(){var e=this,i=this.state;return new t(function(t,n){return e.options.onRequestStateChange(p["default"].READY_TO_PRESENT)?e.options.beforeExit().then(function(){return i===p["default"].PRESENTING?e.manager.exitVR(e.manager.defaultDisplay):e.manager.exitFullscreen()}).then(t):void n(new Error(p["default"].ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestEnterFullscreen",value:function(){var e=this;return new t(function(t,i){return e.options.onRequestStateChange(p["default"].PRESENTING_FULLSCREEN)?e.options.beforeEnter().then(function(){return e.manager.enterFullscreen(e.sourceCanvas)}).then(t):void i(new Error(p["default"].ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"__setDisabledAttribute",value:function(t){t||this.__forceDisabled?this.domElement.setAttribute("disabled","true"):this.domElement.removeAttribute("disabled")}},{key:"__onEnterVRClick",value:function(){this.state==p["default"].READY_TO_PRESENT?this.requestEnterVR():this.isPresenting()&&this.requestExit()}},{key:"__onStateChange",value:function(t){if(t!=this.state)switch(this.state!==p["default"].PRESENTING&&this.state!==p["default"].PRESENTING_FULLSCREEN||this.emit("exit"),this.state=t,t){case p["default"].READY_TO_PRESENT:this.show(),this.setTitle(this.options.textEnterVRTitle),this.manager.defaultDisplay&&this.setTooltip("Enter VR using "+this.manager.defaultDisplay.displayName),this.__setDisabledAttribute(!1),this.emit("ready");break;case p["default"].PRESENTING:case p["default"].PRESENTING_FULLSCREEN:this.manager.defaultDisplay&&this.manager.defaultDisplay.capabilities.hasExternalDisplay&&t!=p["default"].PRESENTING_FULLSCREEN||this.hide(),this.setTitle(this.options.textExitVRTitle),this.__setDisabledAttribute(!1),this.emit("enter");break;case p["default"].ERROR_BROWSER_NOT_SUPPORTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Browser not supported"),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p["default"].ERROR_NO_PRESENTABLE_DISPLAYS:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("No VR headset found."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p["default"].ERROR_REQUEST_TO_PRESENT_REJECTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Something went wrong trying to start presenting to your headset."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p["default"].ERROR_EXIT_PRESENT_REJECTED:default:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Unknown error."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t))}}}]),i}(d["default"]);e["default"]=m;var g=function(t,e,i,n){var r=t.querySelector("."+e+"-"+i);r&&n(r)}}).call(e,i(2))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var r=i(45),s=n(r),o=i(41),a=n(o);"undefined"!=typeof AFRAME&&AFRAME&&AFRAME.registerComponent("webvr-ui",{dependencies:["canvas"],schema:{enabled:{type:"boolean","default":!0},color:{type:"string","default":"white"},background:{type:"string","default":"black"},corners:{type:"string","default":"square"},disabledOpacity:{type:"number","default":.5},textEnterVRTitle:{type:"string"},textExitVRTitle:{type:"string"},textVRNotFoundTitle:{type:"string"}},init:function(){},update:function(){var t=document.querySelector("a-scene");if(t.setAttribute("vr-mode-ui",{enabled:!this.data.enabled}),this.data.enabled){if(this.enterVREl)return;var e={color:this.data.color,background:this.data.background,corners:this.data.corners,disabledOpacity:this.data.disabledOpacity,textEnterVRTitle:this.data.textEnterVRTitle,textExitVRTitle:this.data.textExitVRTitle,textVRNotFoundTitle:this.data.textVRNotFoundTitle,onRequestStateChange:function(e){return e==a["default"].PRESENTING?t.enterVR():t.exitVR(),!1}},i=this.enterVR=new s["default"](t.canvas,e);this.enterVREl=i.domElement,document.body.appendChild(i.domElement),i.domElement.style.position="absolute",i.domElement.style.bottom="10px",i.domElement.style.left="50%",i.domElement.style.transform="translate(-50%, -50%)",i.domElement.style.textAlign="center"}else this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())},remove:function(){this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.MODE={MULTIPLAYER:"MULTIPLAYER",SINGLEPLAYER:"SINGLEPLAYER"},n=(e.CONTROLMODE={MOUSE:"MOUSE",VR:"VR"},e.STATE={PRELOADER:"PRELOADER",MODE_SELECTION:"MODE_SELECTION",ROOM_URL_DISPLAY:"ROOM_URL_DISPLAY",PLAYING:"PLAYING",GAME_OVER:"GAME_OVER",COUNTDOWN:"COUNTDOWN",INSTRUCTIONS:"INSTRUCTIONS",PAUSED:"PAUSED",WAITING:"WAITING"});e.EVENT={OPPONENT_CONNECTED:"OPPONENT_CONNECTED",OPPONENT_DISCONNECTED:"OPPONENT_DISCONNECTED",OPPONENT_PAUSED:"OPPONENT_PAUSED",OPPONENT_UNPAUSED:"OPPONENT_UNPAUSED",GAME_OVER:"GAME_OVER",RESTART_GAME:"RESTART_GAME",RESTART_BUTTON_PRESSED:"RESTART_BUTTON_PRESSED",EXIT_BUTTON_PRESSED:"EXIT_BUTTON_PRESSED",BALL_TABLE_COLLISION:"BALL_TABLE_COLLISION",BALL_PADDLE_COLLISION:"BALL_PADDLE_COLLISION",BALL_NET_COLLISION:"BALL_NET_COLLISION",INIT_BALL:"INIT_BALL",LOAD_PROGRESS:"LOAD_PROGRESS"},e.ACTION={MOVE:"M",HIT:"HIT",MISS:"MISS",PING:"PING",PONG:"PONG",CONNECT:"CONNECT",DISCONNECT:"DISCONNECT",RESTART_GAME:"RESTART_GAME",REQUEST_COUNTDOWN:"REQUEST_COUNTDOWN",PAUSE:"PAUSE",UNPAUSE:"UNPAUSE"},e.INITIAL_CONFIG={mode:i.SINGLEPLAYER,gravity:6,netThickness:.04,tableWidth:1.52,tableDepth:2.74,tableHeight:.76,netHeight:.15,tablePositionZ:-2,tableThickness:.1,paddleThickness:.01,paddleSize:.16/1.5,get paddlePositionZ(){return this.tablePositionZ+this.tableDepth/2+this.paddleThickness/2},ballRadius:.02,ballMass:.001,ballPaddleFriction:.8,ballPaddleBounciness:1,ballBoxBounciness:.95,ballInitVelocity:1,paddleModel:"box",cameraHeight:1.6,startLives:5,state:n.PRELOADER,POINTS_FOR_WIN:11,ROOM_CODE_LENGTH:4,colors:{PINK_TABLE:16496835,PINK_TABLE_UPWARDS:16496835,BLUE_TABLE:4403620,GREEN_TABLE:5426323,PINK_CLEARCOLOR:16753584,GREEN_CLEARCOLOR:4698507,BLUE_CLEARCOLOR:3089525,PADDLE_COLOR:16728122,PADDLE_SIDE_COLOR:14231848,PADDLE_WOOD_COLOR:15855335,PADDLE_WOOD_SIDE_COLOR:14210514,BALL:16383062}}},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(h){r=!0,s=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(6),h=i(8),l=n(h),c=i(49),u=n(c),p=i(52),f=i(53),d=n(f),m=i(54),g=n(m),v=i(55),y=n(v),_=i(47),b=i(56),x=i(38),E=n(x),w=i(57),T=n(w),A=i(59),S=n(A),M=i(93),P=n(M),C=i(95),R=n(C),I=i(58),O=n(I),N=i(98),L=n(N),k=i(125),D=n(k),F=i(126),B=n(F),U=i(127),V=n(U),z=i(128),G=n(z),j=i(129),H=n(j),W=!1,Y=function(){function e(t,i){r(this,e),this.emitter=t,this.communication=i,this.config=Object.assign({},_.INITIAL_CONFIG),this.time=new L["default"],this.sound=new P["default"](this.config),this.score={self:0,opponent:0,lives:this.config.startLives,highest:0},this.controlMode=_.CONTROLMODE.MOUSE,this.renderer=null,this.scene=null,this.camera=null,this.controls=null,this.effect=null,this.display=null,this.textureLoader=new p.TextureLoader,this.textureLoader.setPath("/textures/"),this.objLoader=new d["default"],this.objLoader.setPath("/models/"),this.table=null,this.tablePlane=null,this.net=null,this.ball=null,this.crossHair=null,this.manager=null,this.raycaster=null,this.physicsDebugRenderer=null,this.physicsTimeStep=1e3,this.physics=new T["default"](this.config,this.emitter),this.resetBallTimeout=null,this.ballHasHitEnemyTable=!1,this.resetTimeoutDuration=1500,this.playerRequestedRestart=!1,this.opponentRequestedRestart=!1,this.playerRequestedCountdown=!1,this.opponentRequestedCountdown=!1,this.ballInterpolationAlpha=0,this.lastHitPosition=null,this.paddleInterpolationAlpha=0,this.ghostPaddlePosition=new p.Vector3,this.hitAvailable=!0,this.pointerIsLocked=!1,this.mouseMoveSinceLastFrame={x:0,y:0},this.mousePosition={x:0,y:0},this.isMobile=O["default"].isMobile(),this.fps=(0,u["default"])({every:10,decay:.05}),this.quality=4,this.trailEnabled=!O["default"].isMobile(),this.frameNumber=0,this.firstActiveFrame=0,this.lastRender=0,this.tabActive=!0}return o(e,[{key:"setup",value:function(){var e=this;return new t(function(i){e.setupThree(),e.setupVR(),e.net=(0,B["default"])(e.scene,e.config),e.renderer.domElement.requestPointerLock=e.renderer.domElement.requestPointerLock||e.renderer.domElement.mozRequestPointerLock,e.renderer.domElement.onclick=function(){e.config.state!==_.STATE.GAME_OVER&&e.renderer.domElement.requestPointerLock&&e.renderer.domElement.requestPointerLock()},e.physics.setupWorld(),W&&(e.physicsDebugRenderer=new CannonDebugRenderer(e.scene,e.physics.world)),e.setupEventListeners(),e.setupTablePlane(),e.setupLights(),e.setupEffects(),e.hud=new S["default"](e.scene,e.config,e.emitter,e.objLoader),e.crosshair=new G["default"](e.scene,e.config),e.crosshair.visible=!1,t.all([(0,H["default"])(e.objLoader,e.config,e.scene),e.hud.setup()]).then(function(t){var n=s(t,1),r=n[0],o=r.paddle,a=r.paddleOpponent;e.paddle=o,e.paddleOpponent=a,e.paddle.position.copy(e.computePaddlePosition()||new p.Vector3),e.ghostPaddlePosition.copy(e.paddle.position),i("loaded")})["catch"](function(t){console.warn("Loading error:"),console.warn(t)})})}},{key:"setupEventListeners",value:function(){var t=this;this.emitter.on(_.EVENT.GAME_OVER,this.onGameOver.bind(this)),this.emitter.on(_.EVENT.BALL_TABLE_COLLISION,this.onBallTableCollision.bind(this)),this.emitter.on(_.EVENT.RESTART_BUTTON_PRESSED,this.onRestartButtonPressed.bind(this)),this.emitter.on(_.EVENT.EXIT_BUTTON_PRESSED,function(){t.manager.mode===E["default"].VR&&t.hud.message.setMessage("take off vr device")}),this.emitter.on(_.EVENT.BALL_NET_COLLISION,function(){t.sound.playUI("net")}),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("touchstart",function(e){if(t.config.state===_.STATE.GAME_OVER){var i={x:-2*(.5-e.touches[0].clientX/t.viewport.width),y:2*(.5-e.touches[0].clientY/t.viewport.height)};t.raycaster.setFromCamera(i,t.camera),t.hud.message.intersect(t.raycaster,!0),t.hud.message.click()}}),(0,l["default"])(this.renderer.domElement).click(function(){t.config.state===_.STATE.GAME_OVER&&t.hud.message.click()}),"onpointerlockchange"in document?document.addEventListener("pointerlockchange",this.onPointerLockChange.bind(this),!1):"onmozpointerlockchange"in document&&document.addEventListener("mozpointerlockchange",this.onPointerLockChange.bind(this),!1),(0,l["default"])(window).on("resize",this.onResize.bind(this)),(0,l["default"])(window).on("vrdisplaypresentchange",this.onResize.bind(this)),this.fps.on("data",function(e){if((0,l["default"])("#fps-counter").text(Math.round(100*e)/100+" FPS"),t.tabActive&&t.frameNumber-t.firstActiveFrame>300&&e<50){if(t.firstActiveFrame=t.frameNumber,console.warn("reducing quality to "+(t.quality-1)),4===t.quality)t.light.shadow.mapSize.width=512,t.light.shadow.mapSize.height=512;else if(3===t.quality)t.trailEnabled=!1,t.scene.remove(t.trail);else if(2===t.quality)t.light.castShadow=!1,t.time.setTimeout(function(){t.renderer.shadowMap.enabled=!1},100);else{if(1!==t.quality)return;O["default"].isMobile()&&t.manager.mode!==E["default"].VR&&t.renderer.setPixelRatio(window.devicePixelRatio/2)}t.quality-=1}})}},{key:"onBallPaddleCollision",value:function(t){this.hitTween&&this.hitTween.isActive()||(this.physics.onBallPaddleCollision({body:this.physics.ball,target:this.paddle}),this.ballHitAnimation(),this.haloAnimation(t),this.ballPositionDifference=null,this.restartPingpongTimeout(),this.ballHasHitEnemyTable=!1,this.sound.paddle(t),this.config.mode!==_.MODE.SINGLEPLAYER&&(this.slowdownBall(),this.communication.sendHit({x:t.x,y:t.y,z:t.z},{x:this.physics.ball.velocity.x,y:this.physics.ball.velocity.y,z:this.physics.ball.velocity.z})))}},{key:"onBallTableCollision",value:function(t,e){this.sound.table(t.position,this.physics.ball.velocity),"upwards-table"===e._name&&this.config.mode===_.MODE.SINGLEPLAYER&&(this.score.self+=1,this.hud.scoreDisplay.setSelfScore(this.score.self)),"table-2-player"===e._name&&t.position.z<this.config.tablePositionZ&&(this.ballHasHitEnemyTable=!0)}},{key:"onGameOver",value:function(){this.ballPath=null,this.sound.playLoop("bass-pad-synth"),this.ball.visible=!1,this.paddle.visible=!1,this.paddleOpponent.visible=!1,this.config.state=_.STATE.GAME_OVER,this.time.clearTimeout(this.resetBallTimeout),this.crosshair.visible=!0,this.config.mode===_.MODE.SINGLEPLAYER?(this.hud.message.gameOver(this.score),this.sound.playUI("win")):(this.hud.message.gameOver(this.score),this.score.self>this.score.opponent?this.sound.playUI("win"):this.sound.playUI("lose")),this.showOverlay(),this.hud.scoreDisplay.hide(),this.hud.message.showMessage()}},{key:"onRestartButtonPressed",value:function(){this.hud.message.hideMessage(),this.config.mode===_.MODE.MULTIPLAYER&&(this.playerRequestedRestart=!0,this.hud.message.setMessage("waiting"),this.hud.message.showMessage(),this.communication.sendRestartGame()),this.restartGame()}},{key:"onResize",value:function(){this.effect.setSize(window.innerWidth,window.innerHeight,!0),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.viewport={width:(0,l["default"])(this.renderer.domElement).width(),height:(0,l["default"])(this.renderer.domElement).height()}}},{key:"onMouseMove",value:function(t){this.paddle&&this.viewport&&(this.pointerIsLocked?(this.mouseMoveSinceLastFrame.x+=t.movementX,this.mouseMoveSinceLastFrame.y+=t.movementY):(this.mousePosition.x=t.offsetX/this.viewport.width-.5,this.mousePosition.y=-(t.offsetY/this.viewport.height-.5)))}},{key:"onPointerLockChange",value:function(){document.pointerLockElement===this.renderer.domElement||document.mozPointerLockElement===this.renderer.domElement?this.pointerIsLocked=!0:this.pointerIsLocked=!1}},{key:"setupVRControls",value:function(){this.controls=new y["default"](this.camera),this.controls.standing=!0,this.controls.userHeight=this.config.cameraHeight}},{key:"setupVR",value:function(){var t=this;this.effect=new g["default"](this.renderer),this.effect.setSize(window.innerWidth,window.innerHeight);var e={hideButton:!1,isUndistorted:!1};this.manager=new R["default"](this.renderer,this.effect,e),navigator.getVRDisplays().then(function(e){for(var i=0;i<e.length;i+=1)if(e[i].capabilities.canPresent){t.display=e[i],t.display.displayName.indexOf("Daydream")!==-1&&(t.daydream=!0);break}})["catch"](function(t){console.warn("error getting vr displays:"),console.warn(t)})}},{key:"setupThree",value:function(){this.renderer=new p.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=p.BasicShadowMap,document.body.appendChild(this.renderer.domElement),this.scene=new p.Scene,this.camera=new p.PerspectiveCamera(47,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.x=0,this.camera.position.y=1.6,this.camera.position.z=.6}},{key:"setupLights",value:function(){this.light=new p.DirectionalLight(16777215,.3,0),this.light.position.z=this.config.tablePositionZ,this.light.position.z=2,this.light.position.y=4,this.light.shadow.camera.near=3.5,this.light.shadow.camera.far=5.4,this.light.shadow.camera.left=-this.config.tableWidth/2,this.light.shadow.camera.right=this.config.tableWidth/2,this.light.shadow.camera.bottom=.8,this.light.shadow.camera.top=3.4,this.light.castShadow=!0,this.light.shadow.mapSize.width=512*(this.isMobile?1:8),this.light.shadow.mapSize.height=512*(this.isMobile?1:8),this.scene.add(this.light),this.scene.add(new p.AmbientLight(16777215,.9))}},{key:"setupTablePlane",value:function(){this.raycaster=new p.Raycaster;var t=new p.PlaneGeometry(40,40,5,5),e=new p.MeshBasicMaterial({color:16776960,wireframe:!0});this.tablePlane=new p.Mesh(t,e),this.tablePlane.rotation.x=.45*-Math.PI,this.tablePlane.position.y=this.config.tableHeight+.2,this.tablePlane.position.z=this.config.tablePositionZ+this.config.tableDepth/2,this.tablePlane.material.visible=!1,this.scene.add(this.tablePlane)}},{key:"setupEffects",value:function(){var t=new p.SphereGeometry(.3,32,32),e=new p.MeshBasicMaterial({color:16777215,transparent:!0,depthTest:!1,depthWrite:!1});if(this.halo=new p.Mesh(t,e),this.halo.position.z=10,this.scene.add(this.halo),this.halo.scale.x=.001,this.halo.scale.y=.001,this.halo.scale.z=.001,this.ballPath=new p.CatmullRomCurve3([new p.Vector3(0,0,0),new p.Vector3(0,.1,0)]),t=new p.TubeGeometry(this.ballPath,30,.01,8,(!1)),this.trailEnabled){var i=document.createElement("canvas");i.width=256,i.height=128;var n=i.getContext("2d"),r=n.createLinearGradient(0,0,200,0);r.addColorStop(0,"rgba(249, 252, 86, 0)"),r.addColorStop(1,"rgba(249, 252, 86, 0.3)"),n.fillStyle=r,n.fillRect(0,0,512,512);var s=new p.Texture(i);s.needsUpdate=!0,e=new p.MeshBasicMaterial({map:s,transparent:!0}),this.trail=new p.Mesh(t,e),this.scene.add(this.trail),this.ballPath=null}}},{key:"startGame",value:function(){var t=this;this.hud.container.visible=!1;var e=this.scene.getObjectByName("table-self"),i=this.scene.getObjectByName("table-opponent");if(a.TweenMax.set("canvas",{visibility:"visible"}),this.config.mode===_.MODE.MULTIPLAYER)this.communication.isHost?(this.renderer.setClearColor(this.config.colors.BLUE_CLEARCOLOR,1),e.material.color.set(this.config.colors.BLUE_TABLE),i.material.color.set(this.config.colors.BLUE_TABLE)):(this.renderer.setClearColor(this.config.colors.GREEN_CLEARCOLOR,1),e.material.color.set(this.config.colors.GREEN_TABLE),i.material.color.set(this.config.colors.GREEN_TABLE)),this.net.getObjectByName("net").material.color.setHex(this.communication.isHost?1841748:1657425),this.showOverlay();else{var n=this.scene.getObjectByName("upwardsTableGroup");n.visible=!0,this.net.visible=!1,this.physics.net.collisionResponse=0,this.physics.upwardsTable.collisionResponse=1,this.renderer.setClearColor(this.config.colors.PINK_CLEARCOLOR,1),e.material.color.set(this.config.colors.PINK_TABLE)}this.introPanAnimation().then(function(){t.viewport={width:(0,l["default"])(t.renderer.domElement).width(),height:(0,l["default"])(t.renderer.domElement).height()},O["default"].isMobile()&&a.TweenMax.set(".reset-pose",{display:"block"}),t.manager.isVRCompatible&&a.TweenMax.set(".enter-vr",{display:"block"}),t.resetPose(),t.paddle.visible=!0,t.hud.container.visible=!0,t.setupVRControls(),t.config.mode===_.MODE.SINGLEPLAYER?t.countdown():(t.paddleOpponent.visible=!0,t.playerRequestedCountdown=!0,t.communication.sendRequestCountdown(),t.requestCountdown(),t.config.state=_.STATE.WAITING)})}},{key:"introPanAnimation",value:function(){var e=this;return this.animate(),new t(function(t){var i=new a.TimelineMax;e.camera.lookAt((new p.Vector3).lerpVectors(e.ghostPaddlePosition,new p.Vector3(e.table.position.x,e.config.tableHeight+.3,e.table.position.z),.5)),i.set(e.renderer.domElement,{display:"block"}),i.to(".intro-wrapper",.3,{autoAlpha:0}),i.call(t,[],null,"+=1")})}},{key:"requestCountdown",value:function(){this.playerRequestedCountdown&&this.opponentRequestedCountdown&&this.countdown()}},{key:"showInstructions",value:function(){var e=this;return new t(function(t){return e.config.state=_.STATE.INSTRUCTIONS,e.config.state===_.STATE.GAME_OVER?void t():(e.config.mode===_.MODE.SINGLEPLAYER?(e.hud.message.setMessage("YOU HAVE\nFIVE LIVES","antique"),e.time.setTimeout(t,1500)):(e.hud.message.setMessage("FIRST WITH\n11PTS WINS","antique"),e.time.setTimeout(t,2500)),void e.hud.message.showMessage())})}},{key:"countdown",value:function(){var t=this;if(this.config.state!==_.STATE.COUNTDOWN&&this.config.state!==_.STATE.PLAYING){(0,l["default"])(".opponent-joined").css("display","none"),this.paddle.visible=!0,this.paddleOpponent.visible=this.config.mode===_.MODE.MULTIPLAYER,this.sound.playLoop("bass"),this.hud.scoreDisplay.show(),this.hideOverlay();var e=4;this.showInstructions().then(function(){t.config.state=_.STATE.COUNTDOWN,t.hud.countdown.showCountdown(),t.hud.message.hideMessage();var i=t.time.setInterval(function(){t.hud.countdown.setCountdown(e),e-=1,e<0&&(t.time.clearInterval(i),t.hud.countdown.hideCountdown(),t.config.mode===_.MODE.SINGLEPLAYER?(t.addBall(),t.physics.initBallPosition()):t.config.mode!==_.MODE.MULTIPLAYER||t.communication.isHost||(t.addBall(),t.communication.sendMiss({x:t.physics.ball.position.x,y:t.physics.ball.position.y,z:t.physics.ball.position.z},{x:t.physics.ball.velocity.x,y:t.physics.ball.velocity.y,z:t.physics.ball.velocity.z},!0,!0)))},1e3)})}}},{key:"restartGame",value:function(){return this.crosshair.visible=!1,this.physics.speed=1,this.resetScore(),this.config.mode===_.MODE.SINGLEPLAYER?(this.countdown(),void this.emitter.emit(_.EVENT.RESTART_GAME,this.score)):void(this.opponentRequestedRestart&&this.playerRequestedRestart&&(this.emitter.emit(_.EVENT.RESTART_GAME,this.score),
this.playerRequestedRestart=!1,this.opponentRequestedRestart=!1,this.countdown()))}},{key:"resetScore",value:function(){this.score.self=0,this.score.opponent=0,this.score.highest=0,this.score.lives=this.config.startLives,this.hud.scoreDisplay.setSelfScore(0),this.hud.scoreDisplay.setOpponentScore(0),this.hud.scoreDisplay.setLives(this.score.lives)}},{key:"setMultiplayer",value:function(){this.config.mode=_.MODE.MULTIPLAYER,this.scene.remove(this.table),this.table=(0,D["default"])(this.scene,this.config),this.hud.message.showMessage(),this.resetTimeoutDuration=2e3,this.hud.scoreDisplay.opponentScore.visible=!0,this.hud.scoreDisplay.lifeGroup.visible=!1,this.net.getObjectByName("net-collider").visible=!0,this.communication.setCallbacks({receivedMove:this.onReceivedMove.bind(this),receivedHit:this.onReceivedHit.bind(this),receivedMiss:this.onReceivedMiss.bind(this),receivedRestartGame:this.onReceivedRestartGame.bind(this),receivedRequestCountdown:this.onReceivedRequestCountdown.bind(this)})}},{key:"setSingleplayer",value:function(){this.config.mode=_.MODE.SINGLEPLAYER,this.scene.remove(this.table),this.table=(0,D["default"])(this.scene,this.config),this.resetTimeoutDuration=1500,this.hud.scoreDisplay.opponentScore.visible=!1,this.hud.scoreDisplay.lifeGroup.visible=!0,this.scene.getObjectByName("net-collider").visible=!1}},{key:"onReceivedMove",value:function(t){var e=this,i=(0,b.mirrorPosition)(t.position,this.config.tablePositionZ),n={x:this.paddleOpponent.position.x,y:this.paddleOpponent.position.y,z:this.paddleOpponent.position.z,rotationX:this.paddleOpponent.rotation.x,rotationY:this.paddleOpponent.rotation.y,rotationZ:this.paddleOpponent.rotation.z};a.TweenMax.to(n,.14,{x:i.x,y:i.y,z:i.z-.1,rotationX:-t.rotation._x,rotationY:t.rotation._y,rotationZ:-t.rotation._z,onUpdate:function(){e.paddleOpponent.position.x=n.x,e.paddleOpponent.position.y=n.y,e.paddleOpponent.position.z=n.z,e.paddleOpponent.rotation.x=n.rotationX,e.paddleOpponent.rotation.y=n.rotationY,e.paddleOpponent.rotation.z=n.rotationZ}})}},{key:"onReceivedRestartGame",value:function(){this.opponentRequestedRestart=!0,this.restartGame()}},{key:"onReceivedHit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.time.clearTimeout(this.resetBallTimeout),this.ball?this.sound.paddle(t.point):this.addBall(),e||(this.haloAnimation((0,b.mirrorPosition)(t.point,this.config.tablePositionZ)),this.ballPositionDifference=(new p.Vector3).subVectors(this.physics.ball.position,(0,b.mirrorPosition)(t.point,this.config.tablePositionZ)),this.ballInterpolationAlpha=1,a.TweenMax.to(this,.5,{ease:a.Power0.easeNone,ballInterpolationAlpha:0}),this.physics.increaseSpeed()),this.physicsTimeStep=1e3,this.physics.ball.position.copy((0,b.mirrorPosition)(t.point,this.config.tablePositionZ)),this.physics.ball.velocity.copy((0,b.mirrorVelocity)(t.velocity))}},{key:"onReceivedMiss",value:function(t){this.physics.speed=1,this.ballPositionDifference=null,this.time.clearTimeout(this.resetBallTimeout),t.isInit?this.addBall():t.ballHasHitEnemyTable?(this.score.opponent+=1,this.tableBlinkAnimation("table-opponent"),this.hud.scoreDisplay.setOpponentScore(this.score.opponent),this.sound.playUI("miss")):(this.score.self+=1,this.tableBlinkAnimation("table-self"),this.hud.scoreDisplay.setSelfScore(this.score.self),this.sound.playUI("point")),this.score.self>=this.config.POINTS_FOR_WIN||this.score.opponent>=this.config.POINTS_FOR_WIN?this.emitter.emit(_.EVENT.GAME_OVER,this.score,this.config.mode):(this.physics.ball.angularVelocity.x=0,this.physics.ball.angularVelocity.y=0,this.physics.ball.angularVelocity.z=0,this.onReceivedHit(t,!0),this.config.state=_.STATE.PLAYING)}},{key:"onReceivedRequestCountdown",value:function(){this.opponentRequestedCountdown=!0,this.requestCountdown()}},{key:"slowdownBall",value:function(){if(!(this.physics.ball.velocity.z>0)){var t=this.physics.ball.velocity.length(),e=(new p.Vector3).subVectors(this.ball.position,this.paddleOpponent.position).length(),i=e/t,n=i+this.communication.latency/1e3;this.physicsTimeStep=1e3*(n/i)*1}}},{key:"restartPingpongTimeout",value:function(){this.time.clearTimeout(this.resetBallTimeout),this.config.state!==_.STATE.GAME_OVER&&(this.resetBallTimeout=this.time.setTimeout(this.resetTimeoutEnded.bind(this),this.resetTimeoutDuration))}},{key:"resetTimeoutEnded",value:function(){var t=this;this.ballPath=null,this.config.mode===_.MODE.MULTIPLAYER?(this.physicsTimeStep=1e3,this.ballHasHitEnemyTable?(this.score.self+=1,this.tableBlinkAnimation("table-self"),this.hud.scoreDisplay.setSelfScore(this.score.self),this.sound.playUI("point")):(this.score.opponent+=1,this.tableBlinkAnimation("table-opponent"),this.hud.scoreDisplay.setOpponentScore(this.score.opponent),this.sound.playUI("miss")),this.score.opponent>=this.config.POINTS_FOR_WIN||this.score.self>=this.config.POINTS_FOR_WIN?this.emitter.emit(_.EVENT.GAME_OVER,this.score,this.config.mode):this.physics.initBallPosition(),this.communication.sendMiss({x:this.physics.ball.position.x,y:this.physics.ball.position.y,z:this.physics.ball.position.z},{x:this.physics.ball.velocity.x,y:this.physics.ball.velocity.y,z:this.physics.ball.velocity.z},this.ballHasHitEnemyTable),this.ballHasHitEnemyTable=!1):(this.score.highest=Math.max(this.score.self,this.score.highest),this.score.self=0,this.hud.scoreDisplay.setSelfScore(this.score.self),this.physics.initBallPosition(),this.score.lives-=1,this.hud.scoreDisplay.setLives(this.score.lives),this.sound.playUI("miss"),1===this.score.lives&&(this.hud.message.setMessage("LAST LIFE!","antique"),this.hud.message.showMessage(),this.time.setTimeout(function(){t.hud.message.hideMessage()},1500)),this.score.lives<1&&this.emitter.emit(_.EVENT.GAME_OVER,this.score,this.config.mode)),this.restartPingpongTimeout()}},{key:"showOverlay",value:function(){(0,b.setTransparency)(this.table,.2),(0,b.setTransparency)(this.net.topNet,.2),this.net.collider.visible=!1}},{key:"hideOverlay",value:function(){(0,b.setTransparency)(this.table,1),(0,b.setTransparency)(this.net.topNet,1),this.net.collider.visible=!0}},{key:"resetPose",value:function(){this.display&&this.controls.resetPose()}},{key:"addBall",value:function(){return this.config.state=_.STATE.PLAYING,this.ball?(this.ball.visible=!0,this.physics.initBallPosition(),void this.restartPingpongTimeout()):(this.ball=new V["default"](this.scene,this.config),this.physics.addBall(),void this.restartPingpongTimeout())}},{key:"updateControls",value:function(){var t=this.computePaddlePosition();if(t&&this.ghostPaddlePosition.copy(t),this.controls&&this.controlMode===_.CONTROLMODE.VR&&(this.controls.update(),0===this.camera.position.x&&0===this.camera.position.z&&(this.camera.position.z=1),this.daydream&&(this.camera.position.z=1)),this.hitTween&&this.hitTween.isActive()){var e=(new p.Vector3).lerpVectors(t,this.lastHitPosition,this.paddleInterpolationAlpha);this.paddle.position.copy(e)}else t&&this.paddle.position.copy(t);var i=this.computePaddleRotation(this.paddle.position);this.paddle.rotation.x=i.x,this.paddle.rotation.z=i.z,this.updateCamera()}},{key:"updateCamera",value:function(){if(!this.display||this.controlMode===_.CONTROLMODE.MOUSE){var t=(new p.Euler).copy(this.camera.rotation);this.camera.lookAt((new p.Vector3).lerpVectors(this.ghostPaddlePosition,new p.Vector3(this.table.position.x,this.config.tableHeight+.3,this.table.position.z),.5));var e=(new p.Euler).copy(this.camera.rotation);this.camera.rotation.copy(t),this.cameraTween&&this.cameraTween.kill(),this.cameraTween=a.TweenMax.to(this.camera.rotation,.5,{x:e.x,y:e.y,z:e.z,ease:a.Power4.easeOut})}}},{key:"computePaddlePosition",value:function(){var t=null;if(this.display&&this.controlMode===_.CONTROLMODE.VR){var e=[],i=this.manager.mode===E["default"].VR?-.7:-.3;this.raycaster.setFromCamera(new p.Vector2(0,i),this.camera),this.raycaster.far=5,e=this.raycaster.intersectObject(this.tablePlane,!1),e.length>0&&(e[0].point.x*=1.5),e.length>0&&(t=e[0].point)}else t=this.pointerIsLocked?{x:this.ghostPaddlePosition.x+.0015*this.mouseMoveSinceLastFrame.x,y:this.config.tableHeight+.24,z:this.ghostPaddlePosition.z+.0015*this.mouseMoveSinceLastFrame.y}:{x:1.4*this.mousePosition.x*this.config.tableWidth,y:this.config.tableHeight+.24,z:.5*-this.config.tableDepth*(this.mousePosition.y+.5)};if(t){var n=(0,b.cap)(t.x,this.config.tableWidth,-this.config.tableWidth),r=(0,b.cap)(t.z,this.config.tablePositionZ+.5,0),s=t.y||this.config.tableHeight+.1-.2*r;return{x:n,y:s,z:r}}return this.paddle.position.clone()}},{key:"computePaddleRotation",value:function(t){return{x:-(this.config.tablePositionZ+this.config.tableDepth/2-1*t.z),y:0,z:(0,b.cap)(-t.x,-Math.PI/2,Math.PI/2)}}},{key:"updateBall",value:function(){if(this.ballPositionDifference){var t=(new p.Vector3).lerpVectors(this.physics.ball.position,(new p.Vector3).addVectors(this.physics.ball.position,this.ballPositionDifference),this.ballInterpolationAlpha);this.ball.position.copy(t),this.ball.quaternion.copy(this.physics.ball.quaternion)}else this.ball.position.copy(this.physics.ball.position),this.ball.quaternion.copy(this.physics.ball.quaternion)}},{key:"ballHitAnimation",value:function(){var t=this;this.hitTween&&this.hitTween.isActive()||!this.hitAvailable||(this.hitAvailable=!1,this.hitTween=new a.TimelineMax({onComplete:function(){t.hitAvailable=!0}}),this.lastHitPosition=this.ball.position.clone(),this.lastHitPosition.y=Math.max(this.lastHitPosition.y,this.config.tableHeight+.2),this.hitTween.to(this,.05,{paddleInterpolationAlpha:1,ease:a.Power2.easeIn}),this.hitTween.to(this,.4,{ease:a.Power2.easeOut,paddleInterpolationAlpha:0}))}},{key:"haloAnimation",value:function(t){this.halo.position.copy(t),a.TweenMax.fromTo(this.halo.material,1,{opacity:.2},{opacity:0}),a.TweenMax.fromTo(this.halo.scale,1,{x:.001,y:.001,z:.001},{x:1,y:1,z:1,ease:a.Expo.easeOut})}},{key:"tableBlinkAnimation",value:function(t){var e=this.scene.getObjectByName(t);if(e){var i="#"+e.material.color.clone().lerp(new p.Color(16777215),.5).getHexString(),n={color:"#"+e.material.color.getHexString()},r="#"+new p.Color(this.config.colors.BLUE_TABLE).getHexString(),s="#"+new p.Color(this.config.colors.GREEN_TABLE).getHexString(),o=this.communication.isHost?r:s;a.TweenMax.fromTo(n,.8,{color:i},{color:o,ease:a.Power4.easeOut,onUpdate:function(){e.material.color.set(n.color)}})}}},{key:"updateHudControls",value:function(){var t={};if(this.controlMode===_.CONTROLMODE.VR||this.isMobile){var e=new p.Vector3(0,0,(-1)),i=this.camera.localToWorld(e);this.crosshair.position.set(i.x,i.y,i.z),t={x:0,y:0}}else t={x:2*this.mousePosition.x,y:2*this.mousePosition.y};this.raycaster.setFromCamera(t,this.camera),this.hud.message.intersect(this.raycaster,this.controlMode===_.CONTROLMODE.MOUSE&&!this.isMobile)}},{key:"updateTrail",value:function(){this.trailEnabled&&(this.ballPath?this.ballPath.points.push(this.ball.position.clone()):this.ballPath=new p.CatmullRomCurve3([this.ball.position.clone(),new p.Vector3(this.ball.position.x,this.ball.position.y,this.ball.position.z+.001)]),this.ballPath.points.length>20&&this.ballPath.points.shift(),this.trail.geometry.dispose(),this.trail.geometry=new p.TubeGeometry(this.ballPath,8,.01,8,(!1)))}},{key:"animate",value:function(){var t=Date.now(),e=Math.min(t-this.lastRender,500);if(this.fps.tick(),this.ball){var i=new p.Vector3;i.subVectors(this.ball.position,this.paddle.position),(i.length()<.4&&Math.abs(i.x)<.2&&Math.abs(i.z)<.1||this.isMobile&&i.length()<.8&&Math.abs(i.x)<.3&&Math.abs(i.z)<.1)&&this.physics.ball.velocity.z>0&&this.onBallPaddleCollision(this.ball.position),this.updateTrail()}this.config.state!==_.STATE.PLAYING&&this.config.state!==_.STATE.WAITING&&this.config.state!==_.STATE.COUNTDOWN&&this.config.state!==_.STATE.PAUSED&&this.config.state!==_.STATE.INSTRUCTIONS&&this.config.state!==_.STATE.GAME_OVER||(this.updateControls(),this.ball&&this.config.mode===_.MODE.MULTIPLAYER&&!this.communication.isHost,this.config.mode===_.MODE.MULTIPLAYER&&this.config.state!==_.STATE.WAITING&&this.frameNumber%5===0&&this.communication.sendMove(this.paddle.position,this.paddle.rotation)),this.config.state===_.STATE.PLAYING&&this.tabActive&&(this.physics.step(e/this.physicsTimeStep),this.updateBall(),this.physics.predictCollisions(this.scene.getObjectByName("net-collider"),e)),this.config.state===_.STATE.GAME_OVER&&this.updateHudControls(),W&&this.physicsDebugRenderer.update(),this.tabActive&&this.config.state!==_.STATE.PAUSED&&this.time.step(),this.lastRender=t,this.frameNumber+=1,this.mouseMoveSinceLastFrame.x=0,this.mouseMoveSinceLastFrame.y=0,this.manager.render(this.scene,this.camera,this.timestamp),this.display&&"requestAnimationFrame"in this.display&&this.controlMode===_.CONTROLMODE.VR?this.display.requestAnimationFrame(this.animate.bind(this)):requestAnimationFrame(this.animate.bind(this))}}]),e}();e["default"]=Y}).call(e,i(2))},function(t,e,i){function n(t){return this instanceof n?(r.call(this),t=t||{},this.last=o(),this.rate=0,this.time=0,this.decay=t.decay||1,this.every=t.every||1,void(this.ticks=0)):new n(t)}var r=i(50).EventEmitter,s=i(51);t.exports=n;var o=function(){return this}().performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now||function(){return+new Date};s(n,r),n.prototype.tick=function(){var t=o(),e=t-this.last,i=e;this.ticks+=1,this.last=t,this.time+=(i-this.time)*this.decay,this.rate=1e3/this.time,this.ticks%this.every||this.emit("data",this.rate)}},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,a,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(i=this._events[t],o(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(s(i))for(a=Array.prototype.slice.call(arguments,1),l=i.slice(),r=l.length,h=0;h<r;h++)l[h].apply(this,a);return!0},i.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(r=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,r,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],o=i.length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(i)){for(a=o;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){r=a;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){function i(t,e,i){i=i||{};var n={};[t.prototype,i].forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(e){n[e]=Object.getOwnPropertyDescriptor(t,e)})}),t.prototype=Object.create(e.prototype,n),t["super"]=e}t.exports=i},function(t,e,i){!function(t,i){i(e)}(this,function(t){"use strict";function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,r,s,o,a,h,l,c,u){Object.defineProperty(this,"id",{value:pa++}),this.uuid=ua.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:n.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:so,this.wrapT=void 0!==s?s:so,this.magFilter=void 0!==o?o:co,this.minFilter=void 0!==a?a:po,this.anisotropy=void 0!==c?c:1,this.format=void 0!==h?h:Po,this.type=void 0!==l?l:fo,this.offset=new i(0,0),this.repeat=new i(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:ea,this.version=0,this.onUpdate=null}function r(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function s(t,e,i){this.uuid=ua.generateUUID(),this.width=t,this.height=e,this.scissor=new r(0,0,t,e),this.scissorTest=!1,this.viewport=new r(0,0,t,e),i=i||{},void 0===i.minFilter&&(i.minFilter=co),this.texture=new n((void 0),(void 0),i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function o(t,e,i){s.call(this,t,e,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function a(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function h(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function l(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function c(t,e,i,r,s,o,a,h,l,c){t=void 0!==t?t:[],e=void 0!==e?e:Js,n.call(this,t,e,i,r,s,o,a,h,l,c),this.flipY=!1}function u(){this.seq=[],this.map={}}function p(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,s=ma[r];if(void 0===s&&(s=new Float32Array(r),ma[r]=s),0!==e){n.toArray(s,0);for(var o=1,a=0;o!==e;++o)a+=i,t[o].toArray(s,a)}return s}function f(t,e){var i=ga[e];void 0===i&&(i=new Int32Array(e),ga[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function d(t,e){t.uniform1f(this.addr,e)}function m(t,e){t.uniform1i(this.addr,e)}function g(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function v(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function y(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function _(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function b(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function E(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||fa,n)}function w(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||da,n)}function T(t,e){t.uniform2iv(this.addr,e)}function A(t,e){t.uniform3iv(this.addr,e)}function S(t,e){t.uniform4iv(this.addr,e)}function M(t){switch(t){case 5126:return d;case 35664:return g;case 35665:return v;case 35666:return y;case 35674:return _;case 35675:return b;case 35676:return x;case 35678:return E;case 35680:return w;case 5124:case 35670:return m;case 35667:case 35671:return T;case 35668:case 35672:return A;case 35669:case 35673:return S}}function P(t,e){t.uniform1fv(this.addr,e)}function C(t,e){t.uniform1iv(this.addr,e)}function R(t,e){t.uniform2fv(this.addr,p(e,this.size,2))}function I(t,e){t.uniform3fv(this.addr,p(e,this.size,3))}function O(t,e){t.uniform4fv(this.addr,p(e,this.size,4))}function N(t,e){t.uniformMatrix2fv(this.addr,!1,p(e,this.size,4))}function L(t,e){t.uniformMatrix3fv(this.addr,!1,p(e,this.size,9))}function k(t,e){t.uniformMatrix4fv(this.addr,!1,p(e,this.size,16))}function D(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var s=0;s!==n;++s)i.setTexture2D(e[s]||fa,r[s])}function F(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var s=0;s!==n;++s)i.setTextureCube(e[s]||da,r[s])}function B(t){switch(t){case 5126:return P;case 35664:return R;case 35665:return I;case 35666:return O;case 35674:return N;case 35675:return L;case 35676:return k;case 35678:return D;case 35680:return F;case 5124:case 35670:return C;case 35667:case 35671:return T;case 35668:case 35672:return A;case 35669:case 35673:return S}}function U(t,e,i){this.id=t,this.addr=i,this.setValue=M(e.type)}function V(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=B(e.type)}function z(t){this.id=t,u.call(this)}function G(t,e){t.seq.push(e),t.map[e.id]=e}function j(t,e,i){var n=t.name,r=n.length;for(va.lastIndex=0;;){var s=va.exec(n),o=va.lastIndex,a=s[1],h="]"===s[2],l=s[3];if(h&&(a=0|a),void 0===l||"["===l&&o+2===r){G(i,void 0===l?new U(a,t,e):new V(a,t,e));break}var c=i.map,u=c[a];void 0===u&&(u=new z(a),G(i,u)),i=u}}function H(t,e,i){u.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<n;++r){var s=t.getActiveUniform(e,r),o=s.name,a=t.getUniformLocation(e,o);j(s,a,this)}}function W(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function Y(t,e,i,r,s,o,a,h,l,c,u,p){n.call(this,null,o,a,h,l,c,r,s,u,p),this.image={data:t,width:e,height:i},this.magFilter=void 0!==l?l:ao,this.minFilter=void 0!==c?c:ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function q(t,e){this.min=void 0!==t?t:new i((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new i((-(1/0)),(-(1/0)))}function X(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);s=d.createBuffer(),o=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,s),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),p=d.createTexture(),f=d.createTexture(),m.bindTexture(d.TEXTURE_2D,p),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),m.bindTexture(d.TEXTURE_2D,f),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),a={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=r(a),c={vertex:d.getAttribLocation(l,"position"),uv:d.getAttribLocation(l,"uv")},u={renderType:d.getUniformLocation(l,"renderType"),map:d.getUniformLocation(l,"map"),occlusionMap:d.getUniformLocation(l,"occlusionMap"),opacity:d.getUniformLocation(l,"opacity"),color:d.getUniformLocation(l,"color"),scale:d.getUniformLocation(l,"scale"),rotation:d.getUniformLocation(l,"rotation"),screenPosition:d.getUniformLocation(l,"screenPosition")}}function r(e){var i=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),r=d.createShader(d.VERTEX_SHADER),s="precision "+t.getPrecision()+" float;\n";return d.shaderSource(n,s+e.fragmentShader),d.shaderSource(r,s+e.vertexShader),d.compileShader(n),d.compileShader(r),d.attachShader(i,n),d.attachShader(i,r),d.linkProgram(i),i}var s,o,a,l,c,u,p,f,d=t.context,m=t.state;this.render=function(r,a,g){if(0!==e.length){var v=new h,y=g.w/g.z,_=.5*g.z,b=.5*g.w,x=16/g.w,E=new i(x*y,x),w=new h(1,1,0),T=new i(1,1),A=new q;A.min.set(g.x,g.y),A.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===l&&n(),d.useProgram(l),m.initAttributes(),m.enableAttribute(c.vertex),m.enableAttribute(c.uv),m.disableUnusedAttributes(),d.uniform1i(u.occlusionMap,0),d.uniform1i(u.map,1),d.bindBuffer(d.ARRAY_BUFFER,s),d.vertexAttribPointer(c.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(c.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,o),m.disable(d.CULL_FACE),m.setDepthWrite(!1);for(var S=0,M=e.length;S<M;S++){x=16/g.w,E.set(x*y,x);var P=e[S];if(v.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]),v.applyMatrix4(a.matrixWorldInverse),v.applyMatrix4(a.projectionMatrix),w.copy(v),T.x=g.x+w.x*_+_-8,T.y=g.y+w.y*b+b-8,A.containsPoint(T)===!0){m.activeTexture(d.TEXTURE0),m.bindTexture(d.TEXTURE_2D,null),m.activeTexture(d.TEXTURE1),m.bindTexture(d.TEXTURE_2D,p),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,T.x,T.y,16,16,0),d.uniform1i(u.renderType,0),d.uniform2f(u.scale,E.x,E.y),d.uniform3f(u.screenPosition,w.x,w.y,w.z),m.disable(d.BLEND),m.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),m.activeTexture(d.TEXTURE0),m.bindTexture(d.TEXTURE_2D,f),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,T.x,T.y,16,16,0),d.uniform1i(u.renderType,1),m.disable(d.DEPTH_TEST),m.activeTexture(d.TEXTURE1),m.bindTexture(d.TEXTURE_2D,p),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),P.positionScreen.copy(w),P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares(),d.uniform1i(u.renderType,2),m.enable(d.BLEND);for(var C=0,R=P.lensFlares.length;C<R;C++){var I=P.lensFlares[C];I.opacity>.001&&I.scale>.001&&(w.x=I.x,w.y=I.y,w.z=I.z,x=I.size*I.scale/g.w,E.x=x*y,E.y=x,d.uniform3f(u.screenPosition,w.x,w.y,w.z),d.uniform2f(u.scale,E.x,E.y),d.uniform1f(u.rotation,I.rotation),d.uniform1f(u.opacity,I.opacity),d.uniform3f(u.color,I.color.r,I.color.g,I.color.b),m.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),t.setTexture2D(I.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}m.enable(d.CULL_FACE),m.enable(d.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function Z(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=d.createBuffer(),l=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),c=r(),u={position:d.getAttribLocation(c,"position"),uv:d.getAttribLocation(c,"uv")},p={uvOffset:d.getUniformLocation(c,"uvOffset"),uvScale:d.getUniformLocation(c,"uvScale"),rotation:d.getUniformLocation(c,"rotation"),scale:d.getUniformLocation(c,"scale"),color:d.getUniformLocation(c,"color"),map:d.getUniformLocation(c,"map"),opacity:d.getUniformLocation(c,"opacity"),modelViewMatrix:d.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:d.getUniformLocation(c,"projectionMatrix"),fogType:d.getUniformLocation(c,"fogType"),fogDensity:d.getUniformLocation(c,"fogDensity"),fogNear:d.getUniformLocation(c,"fogNear"),fogFar:d.getUniformLocation(c,"fogFar"),fogColor:d.getUniformLocation(c,"fogColor"),alphaTest:d.getUniformLocation(c,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var s=i.getContext("2d");s.fillStyle="white",s.fillRect(0,0,8,8),f=new n(i),f.needsUpdate=!0}function r(){var e=d.createProgram(),i=d.createShader(d.VERTEX_SHADER),n=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),d.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),d.compileShader(i),d.compileShader(n),d.attachShader(e,i),d.attachShader(e,n),d.linkProgram(e),e}function s(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id;
}var o,l,c,u,p,f,d=t.context,m=t.state,g=new h,v=new a,y=new h;this.render=function(n,r){if(0!==e.length){void 0===c&&i(),d.useProgram(c),m.initAttributes(),m.enableAttribute(u.position),m.enableAttribute(u.uv),m.disableUnusedAttributes(),m.disable(d.CULL_FACE),m.enable(d.BLEND),d.bindBuffer(d.ARRAY_BUFFER,o),d.vertexAttribPointer(u.position,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(u.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),d.uniformMatrix4fv(p.projectionMatrix,!1,r.projectionMatrix.elements),m.activeTexture(d.TEXTURE0),d.uniform1i(p.map,0);var a=0,h=0,_=n.fog;_?(d.uniform3f(p.fogColor,_.color.r,_.color.g,_.color.b),_.isFog?(d.uniform1f(p.fogNear,_.near),d.uniform1f(p.fogFar,_.far),d.uniform1i(p.fogType,1),a=1,h=1):_.isFogExp2&&(d.uniform1f(p.fogDensity,_.density),d.uniform1i(p.fogType,2),a=2,h=2)):(d.uniform1i(p.fogType,0),a=0,h=0);for(var b=0,x=e.length;b<x;b++){var E=e[b];E.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}e.sort(s);for(var w=[],b=0,x=e.length;b<x;b++){var E=e[b],T=E.material;if(T.visible!==!1){d.uniform1f(p.alphaTest,T.alphaTest),d.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(g,v,y),w[0]=y.x,w[1]=y.y;var A=0;n.fog&&T.fog&&(A=h),a!==A&&(d.uniform1i(p.fogType,A),a=A),null!==T.map?(d.uniform2f(p.uvOffset,T.map.offset.x,T.map.offset.y),d.uniform2f(p.uvScale,T.map.repeat.x,T.map.repeat.y)):(d.uniform2f(p.uvOffset,0,0),d.uniform2f(p.uvScale,1,1)),d.uniform1f(p.opacity,T.opacity),d.uniform3f(p.color,T.color.r,T.color.g,T.color.b),d.uniform1f(p.rotation,T.rotation),d.uniform2fv(p.scale,w),m.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),m.setDepthTest(T.depthTest),m.setDepthWrite(T.depthWrite),T.map?t.setTexture2D(T.map,0):t.setTexture2D(f,0),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)}}m.enable(d.CULL_FACE),t.resetGLState()}}}function Q(){Object.defineProperty(this,"id",{value:wl++}),this.uuid=ua.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=fs,this.side=rs,this.shading=hs,this.vertexColors=ls,this.opacity=1,this.transparent=!1,this.blendSrc=Ms,this.blendDst=Ps,this.blendEquation=ys,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Fs,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function J(t){Q.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function $(t){Q.call(this),this.type="MeshDepthMaterial",this.depthPacking=la,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function K(t,e){this.min=void 0!==t?t:new h((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new h((-(1/0)),(-(1/0)),(-(1/0)))}function tt(t,e){this.center=void 0!==t?t:new h,this.radius=void 0!==e?e:0}function et(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function it(t,e){this.normal=void 0!==t?t:new h(1,0,0),this.constant=void 0!==e?e:0}function nt(t,e,i,n,r,s){this.planes=[void 0!==t?t:new it,void 0!==e?e:new it,void 0!==i?i:new it,void 0!==n?n:new it,void 0!==r?r:new it,void 0!==s?s:new it]}function rt(t,e,n,o){function a(e,i,n,r){var s=e.geometry,o=null,a=T,h=e.customDepthMaterial;if(n&&(a=A,h=e.customDistanceMaterial),h)o=h;else{var l=!1;i.morphTargets&&(s&&s.isBufferGeometry?l=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(l=s.morphTargets&&s.morphTargets.length>0));var c=e.isSkinnedMesh&&i.skinning,u=0;l&&(u|=x),c&&(u|=E),o=a[u]}if(t.localClippingEnabled&&i.clipShadows===!0&&0!==i.clippingPlanes.length){var p=o.uuid,f=i.uuid,d=S[p];void 0===d&&(d={},S[p]=d);var m=d[f];void 0===m&&(m=o.clone(),d[f]=m),o=m}o.visible=i.visible,o.wireframe=i.wireframe;var g=i.side;return B.renderSingleSided&&g==os&&(g=rs),B.renderReverseSided&&(g===rs?g=ss:g===ss&&(g=rs)),o.side=g,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(r),o}function c(t,e,i){if(t.visible!==!1){var n=0!==(t.layers.mask&e.layers.mask);if(n&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(t.frustumCulled===!1||f.intersectsObject(t)===!0)){var r=t.material;r.visible===!0&&(t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),b.push(t))}for(var s=t.children,o=0,a=s.length;o<a;o++)c(s[o],e,i)}}var u=t.context,p=t.state,f=new nt,d=new l,m=e.shadows,g=new i,v=new i(o.maxTextureSize,o.maxTextureSize),y=new h,_=new h,b=[],x=1,E=2,w=(x|E)+1,T=new Array(w),A=new Array(w),S={},M=[new h(1,0,0),new h((-1),0,0),new h(0,0,1),new h(0,0,(-1)),new h(0,1,0),new h(0,(-1),0)],P=[new h(0,1,0),new h(0,1,0),new h(0,1,0),new h(0,1,0),new h(0,0,1),new h(0,0,(-1))],C=[new r,new r,new r,new r,new r,new r],R=new $;R.depthPacking=ca,R.clipping=!0;for(var I=El.distanceRGBA,O=ya.clone(I.uniforms),N=0;N!==w;++N){var L=0!==(N&x),k=0!==(N&E),D=R.clone();D.morphTargets=L,D.skinning=k,T[N]=D;var F=new J({defines:{USE_SHADOWMAP:""},uniforms:O,vertexShader:I.vertexShader,fragmentShader:I.fragmentShader,morphTargets:L,skinning:k,clipping:!0});A[N]=F}var B=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=is,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,i){if(B.enabled!==!1&&(B.autoUpdate!==!1||B.needsUpdate!==!1)&&0!==m.length){p.buffers.color.setClear(1,1,1,1),p.disable(u.BLEND),p.setDepthTest(!0),p.setScissorTest(!1);for(var r,o,h=0,l=m.length;h<l;h++){var x=m[h],E=x.shadow;if(void 0!==E){var w=E.camera;if(g.copy(E.mapSize),g.min(v),x&&x.isPointLight){r=6,o=!0;var T=g.x,A=g.y;C[0].set(2*T,A,T,A),C[1].set(0,A,T,A),C[2].set(3*T,A,T,A),C[3].set(T,A,T,A),C[4].set(3*T,0,T,A),C[5].set(T,0,T,A),g.x*=4,g.y*=2}else r=1,o=!1;if(null===E.map){var S={minFilter:ao,magFilter:ao,format:Po};E.map=new s(g.x,g.y,S),w.updateProjectionMatrix()}E.isSpotLightShadow&&E.update(x),E&&E.isRectAreaLightShadow&&E.update(x);var R=E.map,I=E.matrix;_.setFromMatrixPosition(x.matrixWorld),w.position.copy(_),t.setRenderTarget(R),t.clear();for(var O=0;O<r;O++){if(o){y.copy(w.position),y.add(M[O]),w.up.copy(P[O]),w.lookAt(y);var N=C[O];p.viewport(N)}else y.setFromMatrixPosition(x.target.matrixWorld),w.lookAt(y);w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(w.projectionMatrix),I.multiply(w.matrixWorldInverse),d.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),f.setFromMatrix(d),b.length=0,c(e,i,w);for(var L=0,k=b.length;L<k;L++){var D=b[L],F=n.update(D),U=D.material;if(U&&U.isMultiMaterial)for(var V=F.groups,z=U.materials,G=0,j=V.length;G<j;G++){var H=V[G],W=z[H.materialIndex];if(W.visible===!0){var Y=a(D,W,o,_);t.renderBufferDirect(w,null,F,Y,D,H)}}else{var Y=a(D,U,o,_);t.renderBufferDirect(w,null,F,Y,D,null)}}}}else console.warn("THREE.WebGLShadowMap:",x,"has no shadow.")}var q=t.getClearColor(),X=t.getClearAlpha();t.setClearColor(q,X),B.needsUpdate=!1}}}function st(t,e){this.origin=void 0!==t?t:new h,this.direction=void 0!==e?e:new h}function ot(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||ot.DefaultOrder}function at(){this.mask=1}function ht(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Tl++}),this.uuid=ua.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ht.DefaultUp.clone();var i=new h,n=new ot,r=new a,s=new h(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:s},modelViewMatrix:{value:new l},normalMatrix:{value:new et}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=ht.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function lt(t,e){this.start=void 0!==t?t:new h,this.end=void 0!==e?e:new h}function ct(t,e,i){this.a=void 0!==t?t:new h,this.b=void 0!==e?e:new h,this.c=void 0!==i?i:new h}function ut(t,e,i,n,r,s){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new h,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new W,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}function pt(t){Q.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ft(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=ua.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function dt(t,e){ft.call(this,new Int8Array(t),e)}function mt(t,e){ft.call(this,new Uint8Array(t),e)}function gt(t,e){ft.call(this,new Uint8ClampedArray(t),e)}function vt(t,e){ft.call(this,new Int16Array(t),e)}function yt(t,e){ft.call(this,new Uint16Array(t),e)}function _t(t,e){ft.call(this,new Int32Array(t),e)}function bt(t,e){ft.call(this,new Uint32Array(t),e)}function xt(t,e){ft.call(this,new Float32Array(t),e)}function Et(t,e){ft.call(this,new Float64Array(t),e)}function wt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Tt(t){for(var e=t.length,i=-(1/0);e--;)t[e]>i&&(i=t[e]);return i}function At(){return Al++}function St(){Object.defineProperty(this,"id",{value:At()}),this.uuid=ua.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Mt(){Object.defineProperty(this,"id",{value:At()}),this.uuid=ua.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Pt(t,e){ht.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Mt,this.material=void 0!==e?e:new pt({color:16777215*Math.random()}),this.drawMode=$o,this.updateMorphTargets()}function Ct(t,e,i,n,r,s){St.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new Rt(t,e,i,n,r,s)),this.mergeVertices()}function Rt(t,e,i,n,r,s){function o(t,e,i,n,r,s,o,m,g,v,y){var _,b,x=s/g,E=o/v,w=s/2,T=o/2,A=m/2,S=g+1,M=v+1,P=0,C=0,R=new h;for(b=0;b<M;b++){var I=b*E-T;for(_=0;_<S;_++){var O=_*x-w;R[t]=O*n,R[e]=I*r,R[i]=A,c.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[i]=m>0?1:-1,u.push(R.x,R.y,R.z),p.push(_/g),p.push(1-b/v),P+=1}}for(b=0;b<v;b++)for(_=0;_<g;_++){var N=f+_+S*b,L=f+_+S*(b+1),k=f+(_+1)+S*(b+1),D=f+(_+1)+S*b;l.push(N,L,D),l.push(L,k,D),C+=6}a.addGroup(d,C,y),d+=C,f+=P}Mt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};var a=this;n=Math.floor(n)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var l=[],c=[],u=[],p=[],f=0,d=0;o("z","y","x",-1,-1,i,e,t,s,r,0),o("z","y","x",1,-1,i,e,-t,s,r,1),o("x","z","y",1,1,t,i,e,n,s,2),o("x","z","y",1,-1,t,i,-e,n,s,3),o("x","y","z",1,-1,t,e,i,n,r,4),o("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(l),this.addAttribute("position",new xt(c,3)),this.addAttribute("normal",new xt(u,3)),this.addAttribute("uv",new xt(p,2))}function It(t,e,i,n){St.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Ot(t,e,i,n))}function Ot(t,e,i,n){Mt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,s,o=t/2,a=e/2,h=Math.floor(i)||1,l=Math.floor(n)||1,c=h+1,u=l+1,p=t/h,f=e/l,d=[],m=[],g=[],v=[];for(s=0;s<u;s++){var y=s*f-a;for(r=0;r<c;r++){var _=r*p-o;m.push(_,-y,0),g.push(0,0,1),v.push(r/h),v.push(1-s/l)}}for(s=0;s<l;s++)for(r=0;r<h;r++){var b=r+c*s,x=r+c*(s+1),E=r+1+c*(s+1),w=r+1+c*s;d.push(b,x,w),d.push(x,E,w)}this.setIndex(d),this.addAttribute("position",new xt(m,3)),this.addAttribute("normal",new xt(g,3)),this.addAttribute("uv",new xt(v,2))}function Nt(){ht.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l}function Lt(t,e,i,n){Nt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function kt(t,e,i,n,r,s){Nt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function Dt(t,e,i){function n(t){a=t}function r(i){i.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(h=t.UNSIGNED_INT,l=4):i.array instanceof Uint16Array?(h=t.UNSIGNED_SHORT,l=2):(h=t.UNSIGNED_BYTE,l=1)}function s(e,n){t.drawElements(a,n,h,e*l),i.calls++,i.vertices+=n,a===t.TRIANGLES&&(i.faces+=n/3)}function o(n,r,s){var o=e.get("ANGLE_instanced_arrays");return null===o?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(o.drawElementsInstancedANGLE(a,s,h,r*l,n.maxInstancedCount),i.calls++,i.vertices+=s*n.maxInstancedCount,void(a===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*s/3)))}var a,h,l;return{setMode:n,setIndex:r,render:s,renderInstances:o}}function Ft(t,e,i){function n(t){o=t}function r(e,n){t.drawArrays(o,e,n),i.calls++,i.vertices+=n,o===t.TRIANGLES&&(i.faces+=n/3)}function s(n){var r=e.get("ANGLE_instanced_arrays");if(null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var s=n.attributes.position,a=0;s.isInterleavedBufferAttribute?(a=s.data.count,r.drawArraysInstancedANGLE(o,0,a,n.maxInstancedCount)):(a=s.count,r.drawArraysInstancedANGLE(o,0,a,n.maxInstancedCount)),i.calls++,i.vertices+=a*n.maxInstancedCount,o===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*a/3)}var o;return{setMode:n,render:r,renderInstances:s}}function Bt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new h,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new h,direction:new h,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new h,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"HemisphereLight":n={direction:new h,skyColor:new W,groundColor:new W};break;case"RectAreaLight":n={color:new W,position:new h,halfWidth:new h,halfHeight:new h}}return t[e.id]=n,n}}}function Ut(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}function Vt(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),Ut(i)),n}function zt(t){switch(t){case ea:return["Linear","( value )"];case ia:return["sRGB","( value )"];case ra:return["RGBE","( value )"];case oa:return["RGBM","( value, 7.0 )"];case aa:return["RGBM","( value, 16.0 )"];case ha:return["RGBD","( value, 256.0 )"];case na:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Gt(t,e){var i=zt(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function jt(t,e){var i=zt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Ht(t,e){var i;switch(e){case Ys:i="Linear";break;case qs:i="Reinhard";break;case Xs:i="Uncharted2";break;case Zs:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Wt(t,e,i){t=t||{};var n=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(Xt).join("\n")}function Yt(t){var e=[];for(var i in t){var n=t[i];n!==!1&&e.push("#define "+i+" "+n)}return e.join("\n")}function qt(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var o=t.getActiveAttrib(e,s),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function Xt(t){return""!==t}function Zt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Qt(t){function e(t,e){var i=_l[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Qt(i)}var i=/#include +<([\w\d.]+)>/g;return t.replace(i,e)}function Jt(t){function e(t,e,i,n){for(var r="",s=parseInt(e);s<parseInt(i);s++)r+=n.replace(/\[ i \]/g,"[ "+s+" ]");return r}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,e)}function $t(t,e,i,n){var r=t.context,s=i.extensions,o=i.defines,a=i.__webglShader.vertexShader,h=i.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";n.shadowMapType===is?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===ns&&(l="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case Js:case $s:c="ENVMAP_TYPE_CUBE";break;case io:case no:c="ENVMAP_TYPE_CUBE_UV";break;case Ks:case to:c="ENVMAP_TYPE_EQUIREC";break;case eo:c="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case $s:case to:u="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Gs:p="ENVMAP_BLENDING_MULTIPLY";break;case js:p="ENVMAP_BLENDING_MIX";break;case Hs:p="ENVMAP_BLENDING_ADD"}}var f,d,m=t.gammaFactor>0?t.gammaFactor:1,g=Wt(s,n,t.extensions),v=Yt(o),y=r.createProgram();i.isRawShaderMaterial?(f=[v,"\n"].filter(Xt).join("\n"),d=[g,v,"\n"].filter(Xt).join("\n")):(f=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,v,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xt).join("\n"),d=[g,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==Ws?"#define TONE_MAPPING":"",n.toneMapping!==Ws?_l.tonemapping_pars_fragment:"",n.toneMapping!==Ws?Ht("toneMapping",n.toneMapping):"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?_l.encodings_pars_fragment:"",n.mapEncoding?Gt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Gt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Gt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?jt("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Xt).join("\n")),a=Qt(a,n),a=Zt(a,n),h=Qt(h,n),h=Zt(h,n),i.isShaderMaterial||(a=Jt(a),h=Jt(h));var _=f+a,b=d+h,x=Vt(r,r.VERTEX_SHADER,_),E=Vt(r,r.FRAGMENT_SHADER,b);r.attachShader(y,x),r.attachShader(y,E),void 0!==i.index0AttributeName?r.bindAttribLocation(y,0,i.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);var w=r.getProgramInfoLog(y),T=r.getShaderInfoLog(x),A=r.getShaderInfoLog(E),S=!0,M=!0;r.getProgramParameter(y,r.LINK_STATUS)===!1?(S=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(y,r.VALIDATE_STATUS),"gl.getProgramInfoLog",w,T,A)):""!==w?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",w):""!==T&&""!==A||(M=!1),M&&(this.diagnostics={runnable:S,material:i,programLog:w,vertexShader:{log:T,prefix:f},fragmentShader:{log:A,prefix:d}}),r.deleteShader(x),r.deleteShader(E);var P;this.getUniforms=function(){return void 0===P&&(P=new H(r,y,t)),P};var C;return this.getAttributes=function(){return void 0===C&&(C=qt(r,y)),C},this.destroy=function(){r.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Sl++,this.code=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=E,this}function Kt(t,e){function i(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var i=e.maxVertexUniforms,n=Math.floor((i-20)/4),r=n;return void 0!==t&&t&&t.isSkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),r<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function n(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding):i=ea,i===ea&&e&&(i=na),i}var r=[],s={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(r,o,a,h,l,c){var u=s[r.type],p=i(c),f=t.getPrecision();null!==r.precision&&(f=e.getMaxPrecision(r.precision),f!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",f,"instead."));var d=t.getCurrentRenderTarget(),m={shaderID:u,precision:f,supportsVertexTextures:e.vertexTextures,outputEncoding:n(d?d.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:n(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:n(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===io||r.envMap.mapping===no),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:n(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!a,useFog:r.fog,fogExp:a&&a.isFogExp2,flatShading:r.shading===as,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:p,useVertexTexture:e.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:h,numClipIntersection:l,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&o.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===os,flipSided:r.side===ss,depthPacking:void 0!==r.depthPacking&&r.depthPacking};return m},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<o.length;r++)i.push(e[o[r]]);return i.join()},this.acquireProgram=function(e,i,n){for(var s,o=0,a=r.length;o<a;o++){var h=r[o];if(h.code===n){s=h,++s.usedTimes;break}}return void 0===s&&(s=new $t(t,n,e,i),r.push(s)),s},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function te(t,e,i){function n(t){var r=t.target,a=h[r.id];null!==a.index&&s(a.index),o(a.attributes),r.removeEventListener("dispose",n),delete h[r.id];var l=e.get(r);l.wireframe&&s(l.wireframe),e["delete"](r);var c=e.get(a);c.wireframe&&s(c.wireframe),e["delete"](a),i.memory.geometries--}function r(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function s(e){var i=r(e);void 0!==i&&(t.deleteBuffer(i),a(e))}function o(t){for(var e in t)s(t[e])}function a(t){t.isInterleavedBufferAttribute?e["delete"](t.data):e["delete"](t)}var h={};return{get:function(t){var e=t.geometry;if(void 0!==h[e.id])return h[e.id];e.addEventListener("dispose",n);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Mt).setFromObject(t)),
r=e._bufferGeometry),h[e.id]=r,i.memory.geometries++,r}}}function ee(t,e,i){function n(e){var i=c.get(e);e.geometry.isGeometry&&i.updateFromObject(e);var n=i.index,s=i.attributes;null!==n&&r(n,t.ELEMENT_ARRAY_BUFFER);for(var o in s)r(s[o],t.ARRAY_BUFFER);var a=i.morphAttributes;for(var o in a)for(var h=a[o],l=0,u=h.length;l<u;l++)r(h[l],t.ARRAY_BUFFER);return i}function r(t,i){var n=t.isInterleavedBufferAttribute?t.data:t,r=e.get(n);void 0===r.__webglBuffer?s(r,n,i):r.version!==n.version&&o(r,n,i)}function s(e,i,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var r=i.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,i.array,r);var s=t.FLOAT,o=i.array;o instanceof Float32Array?s=t.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?s=t.UNSIGNED_SHORT:o instanceof Int16Array?s=t.SHORT:o instanceof Uint32Array?s=t.UNSIGNED_INT:o instanceof Int32Array?s=t.INT:o instanceof Int8Array?s=t.BYTE:o instanceof Uint8Array&&(s=t.UNSIGNED_BYTE),e.bytesPerElement=o.BYTES_PER_ELEMENT,e.type=s,e.version=i.version,i.onUploadCallback()}function o(e,i,n){t.bindBuffer(n,e.__webglBuffer),i.dynamic===!1?t.bufferData(n,i.array,t.STATIC_DRAW):i.updateRange.count===-1?t.bufferSubData(n,0,i.array):0===i.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),e.version=i.version}function a(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function h(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)}function l(i){var n=e.get(i);if(void 0!==n.wireframe)return n.wireframe;var s=[],o=i.index,a=i.attributes;if(null!==o)for(var h=o.array,l=0,c=h.length;l<c;l+=3){var u=h[l+0],p=h[l+1],f=h[l+2];s.push(u,p,p,f,f,u)}else for(var h=a.position.array,l=0,c=h.length/3-1;l<c;l+=3){var u=l+0,p=l+1,f=l+2;s.push(u,p,p,f,f,u)}var d=new(Tt(s)>65535?bt:yt)(s,1);return r(d,t.ELEMENT_ARRAY_BUFFER),n.wireframe=d,d}var c=new te(t,e,i);return{getAttributeBuffer:a,getAttributeProperties:h,getWireframeAttribute:l,update:n}}function ie(t,e,i,n,r,s,o){function a(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);var r=n.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function h(t){return ua.isPowerOfTwo(t.width)&&ua.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=ua.nearestPowerOfTwo(t.width),e.height=ua.nearestPowerOfTwo(t.height);var i=e.getContext("2d");return i.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function c(t){return t.wrapS!==so||t.wrapT!==so||t.minFilter!==ao&&t.minFilter!==co}function u(e){return e===ao||e===ho||e===lo?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),d(e),M.textures--}function f(t){var e=t.target;e.removeEventListener("dispose",f),m(e),M.textures--}function d(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n["delete"](e)}function m(e){var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var s=0;s<6;s++)t.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[s]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n["delete"](e.texture),n["delete"](e)}}function g(e,r){var s=n.get(e);if(e.version>0&&s.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(o.complete!==!1)return void b(s,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,s.__webglTexture)}function v(e,o){var l=n.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",p),l.__image__webglTextureCube=t.createTexture(),M.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var c=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,f=[],d=0;d<6;d++)c||u?f[d]=u?e.image[d].image:e.image[d]:f[d]=a(e.image[d],r.maxCubemapSize);var m=f[0],g=h(m),v=s(e.format),y=s(e.type);_(t.TEXTURE_CUBE_MAP,e,g);for(var d=0;d<6;d++)if(c)for(var b,x=f[d].mipmaps,E=0,w=x.length;E<w;E++)b=x[E],e.format!==Po&&e.format!==Mo?i.getCompressedTextureFormats().indexOf(v)>-1?i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,E,v,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,E,v,b.width,b.height,0,v,y,b.data);else u?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,v,f[d].width,f[d].height,0,v,y,f[d].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,v,v,y,f[d]);e.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function y(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function _(i,o,a){var h;if(a?(t.texParameteri(i,t.TEXTURE_WRAP_S,s(o.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,s(o.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,s(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,s(o.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o.wrapS===so&&o.wrapT===so||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),t.texParameteri(i,t.TEXTURE_MAG_FILTER,u(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,u(o.minFilter)),o.minFilter!==ao&&o.minFilter!==co&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),h=e.get("EXT_texture_filter_anisotropic")){if(o.type===bo&&null===e.get("OES_texture_float_linear"))return;if(o.type===xo&&null===e.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(i,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function b(e,n,o){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),M.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var u=a(n.image,r.maxTextureSize);c(n)&&h(u)===!1&&(u=l(u));var f=h(u),d=s(n.format),m=s(n.type);_(t.TEXTURE_2D,n,f);var g,v=n.mipmaps;if(n.isDepthTexture){var y=t.DEPTH_COMPONENT;if(n.type===bo){if(!P)throw new Error("Float Depth Texture only supported in WebGL2.0");y=t.DEPTH_COMPONENT32F}else P&&(y=t.DEPTH_COMPONENT16);n.format===Oo&&y===t.DEPTH_COMPONENT&&n.type!==vo&&n.type!==_o&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=vo,m=s(n.type)),n.format===No&&(y=t.DEPTH_STENCIL,n.type!==Ao&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Ao,m=s(n.type))),i.texImage2D(t.TEXTURE_2D,0,y,u.width,u.height,0,d,m,null)}else if(n.isDataTexture)if(v.length>0&&f){for(var b=0,x=v.length;b<x;b++)g=v[b],i.texImage2D(t.TEXTURE_2D,b,d,g.width,g.height,0,d,m,g.data);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,d,u.width,u.height,0,d,m,u.data);else if(n.isCompressedTexture)for(var b=0,x=v.length;b<x;b++)g=v[b],n.format!==Po&&n.format!==Mo?i.getCompressedTextureFormats().indexOf(d)>-1?i.compressedTexImage2D(t.TEXTURE_2D,b,d,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(t.TEXTURE_2D,b,d,g.width,g.height,0,d,m,g.data);else if(v.length>0&&f){for(var b=0,x=v.length;b<x;b++)g=v[b],i.texImage2D(t.TEXTURE_2D,b,d,d,m,g);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,d,d,m,u);n.generateMipmaps&&f&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(e,r,o,a){var h=s(r.texture.format),l=s(r.texture.type);i.texImage2D(a,0,h,r.width,r.height,0,h,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,a,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function w(e,i){var r=i&&i.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var s=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Oo)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==No)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}function T(e){var i=n.get(e),r=e.isWebGLRenderTargetCube===!0;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");w(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var s=0;s<6;s++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[s]),i.__webglDepthbuffer[s]=t.createRenderbuffer(),E(i.__webglDepthbuffer[s],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),E(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function A(e){var r=n.get(e),s=n.get(e.texture);e.addEventListener("dispose",f),s.__webglTexture=t.createTexture(),M.textures++;var o=e.isWebGLRenderTargetCube===!0,a=h(e);if(o){r.__webglFramebuffer=[];for(var l=0;l<6;l++)r.__webglFramebuffer[l]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(o){i.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,a);for(var l=0;l<6;l++)x(r.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);e.texture.generateMipmaps&&a&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,s.__webglTexture),_(t.TEXTURE_2D,e.texture,a),x(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&a&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&T(e)}function S(e){var r=e.texture;if(r.generateMipmaps&&h(e)&&r.minFilter!==ao&&r.minFilter!==co){var s=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=n.get(r).__webglTexture;i.bindTexture(s,o),t.generateMipmap(s),i.bindTexture(s,null)}}var M=o.memory,P="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=A,this.updateRenderTargetMipmap=S}function ne(){var t={};return{get:function(e){var i=e.uuid,n=t[i];return void 0===n&&(n={},t[i]=n),n},"delete":function(e){delete t[e.uuid]},clear:function(){t={}}}}function re(t,e,i){function n(){var e=!1,i=new r,n=null,s=new r;return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,r,o,a){a===!0&&(e*=o,n*=o,r*=o),i.set(e,n,r,o),s.equals(i)===!1&&(t.clearColor(e,n,r,o),s.copy(i))},reset:function(){e=!1,n=null,s.set(0,0,0,1)}}}function s(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?f(t.DEPTH_TEST):d(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case Ls:t.depthFunc(t.NEVER);break;case ks:t.depthFunc(t.ALWAYS);break;case Ds:t.depthFunc(t.LESS);break;case Fs:t.depthFunc(t.LEQUAL);break;case Bs:t.depthFunc(t.EQUAL);break;case Us:t.depthFunc(t.GEQUAL);break;case Vs:t.depthFunc(t.GREATER);break;case zs:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function o(){var e=!1,i=null,n=null,r=null,s=null,o=null,a=null,h=null,l=null;return{setTest:function(e){e?f(t.STENCIL_TEST):d(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&s===o||(t.stencilFunc(e,i,o),n=e,r=i,s=o)},setOp:function(e,i,n){o===e&&a===i&&h===n||(t.stencilOp(e,i,n),o=e,a=i,h=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,n=null,r=null,s=null,o=null,a=null,h=null,l=null}}}function a(e,i,n){var r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<n;o++)t.texImage2D(i+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return s}function h(){B.setClear(0,0,0,1),U.setClear(1),V.setClear(0),f(t.DEPTH_TEST),b(Fs),A(!1),S(Qr),f(t.CULL_FACE),f(t.BLEND),g(fs)}function l(){for(var t=0,e=G.length;t<e;t++)G[t]=0}function c(i){if(G[i]=1,0===j[i]&&(t.enableVertexAttribArray(i),j[i]=1),0!==H[i]){var n=e.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(i,0),H[i]=0}}function u(e,i,n){G[e]=1,0===j[e]&&(t.enableVertexAttribArray(e),j[e]=1),H[e]!==i&&(n.vertexAttribDivisorANGLE(e,i),H[e]=i)}function p(){for(var e=0,i=j.length;e!==i;++e)j[e]!==G[e]&&(t.disableVertexAttribArray(e),j[e]=0)}function f(e){W[e]!==!0&&(t.enable(e),W[e]=!0)}function d(e){W[e]!==!1&&(t.disable(e),W[e]=!1)}function m(){if(null===Y&&(Y=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)Y.push(i[n]);return Y}function g(e,n,r,s,o,a,h,l){e!==ps?f(t.BLEND):d(t.BLEND),e===q&&l===tt||(e===ds?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===ms?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===gs?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),q=e,tt=l),e===vs?(o=o||n,a=a||r,h=h||s,n===X&&o===J||(t.blendEquationSeparate(i(n),i(o)),X=n,J=o),r===Z&&s===Q&&a===$&&h===K||(t.blendFuncSeparate(i(r),i(s),i(a),i(h)),Z=r,Q=s,$=a,K=h)):(X=null,Z=null,Q=null,J=null,$=null,K=null)}function v(t){B.setMask(t)}function y(t){U.setTest(t)}function _(t){U.setMask(t)}function b(t){U.setFunc(t)}function x(t){V.setTest(t)}function E(t){V.setMask(t)}function w(t,e,i){V.setFunc(t,e,i)}function T(t,e,i){V.setOp(t,e,i)}function A(e){et!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),et=e)}function S(e){e!==Zr?(f(t.CULL_FACE),e!==it&&(e===Qr?t.cullFace(t.BACK):e===Jr?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):d(t.CULL_FACE),it=e}function M(e){e!==nt&&(lt&&t.lineWidth(e),nt=e)}function P(e,i,n){e?(f(t.POLYGON_OFFSET_FILL),rt===i&&st===n||(t.polygonOffset(i,n),rt=i,st=n)):d(t.POLYGON_OFFSET_FILL)}function C(){return ot}function R(e){ot=e,e?f(t.SCISSOR_TEST):d(t.SCISSOR_TEST)}function I(e){void 0===e&&(e=t.TEXTURE0+at-1),ct!==e&&(t.activeTexture(e),ct=e)}function O(e,i){null===ct&&I();var n=ut[ct];void 0===n&&(n={type:void 0,texture:void 0},ut[ct]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||dt[e]),n.type=e,n.texture=i)}function N(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}}function L(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}}function k(e){pt.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),pt.copy(e))}function D(e){ft.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),ft.copy(e))}function F(){for(var e=0;e<j.length;e++)1===j[e]&&(t.disableVertexAttribArray(e),j[e]=0);W={},Y=null,ct=null,ut={},q=null,et=null,it=null,B.reset(),U.reset(),V.reset()}var B=new n,U=new s,V=new o,z=t.getParameter(t.MAX_VERTEX_ATTRIBS),G=new Uint8Array(z),j=new Uint8Array(z),H=new Uint8Array(z),W={},Y=null,q=null,X=null,Z=null,Q=null,J=null,$=null,K=null,tt=!1,et=null,it=null,nt=null,rt=null,st=null,ot=null,at=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ht=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),lt=parseFloat(ht)>=1,ct=null,ut={},pt=new r,ft=new r,dt={};return dt[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),dt[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:B,depth:U,stencil:V},init:h,initAttributes:l,enableAttribute:c,enableAttributeAndDivisor:u,disableUnusedAttributes:p,enable:f,disable:d,getCompressedTextureFormats:m,setBlending:g,setColorWrite:v,setDepthTest:y,setDepthWrite:_,setDepthFunc:b,setStencilTest:x,setStencilWrite:E,setStencilFunc:w,setStencilOp:T,setFlipSided:A,setCullFace:S,setLineWidth:M,setPolygonOffset:P,getScissorTest:C,setScissorTest:R,activeTexture:I,bindTexture:O,compressedTexImage2D:N,texImage2D:L,scissor:k,viewport:D,reset:F}}function se(t,e,i){function n(){if(void 0!==s)return s;var i=e.get("EXT_texture_filter_anisotropic");return s=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var s,o=void 0!==i.precision?i.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var h=i.logarithmicDepthBuffer===!0&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),f=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=c>0,y=!!e.get("OES_texture_float"),_=v&&y;return{getMaxAnisotropy:n,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:h,maxTextures:l,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:_}}function oe(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n,n}}}function ae(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var s=null!==t?t.length:0,o=null;if(0!==s){if(o=l.value,r!==!0||null===o){var c=n+4*s,u=e.matrixWorldInverse;h.getNormalMatrix(u),(null===o||o.length<c)&&(o=new Float32Array(c));for(var p=0,f=n;p!==s;++p,f+=4)a.copy(t[p]).applyMatrix4(u,h),a.normal.toArray(o,f),o[f+3]=a.constant}l.value=o,l.needsUpdate=!0}return i.numPlanes=s,o}var i=this,n=null,r=0,s=!1,o=!1,a=new it,h=new et,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==r||s;return s=i,n=e(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,e(null)},this.endShadows=function(){o=!1,t()},this.setState=function(i,a,h,c,u,p){if(!s||null===i||0===i.length||o&&!h)o?e(null):t();else{var f=o?0:r,d=4*f,m=u.clippingState||null;l.value=m,m=e(i,c,d,p);for(var g=0;g!==d;++g)m[g]=n[g];u.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function he(t){function e(){return null===ft?St:1}function i(){le.init(),le.scissor(yt.copy(Ct).multiplyScalar(St)),le.viewport(bt.copy(Nt).multiplyScalar(St)),le.buffers.color.setClear(Et.r,Et.g,Et.b,wt,Q)}function n(){ut=null,vt=null,gt="",mt=-1,le.reset()}function s(t){t.preventDefault(),n(),i(),ce.clear()}function o(t){var e=t.target;e.removeEventListener("dispose",o),a(e)}function a(t){c(t),ce["delete"](t)}function c(t){var e=ce.get(t).program;t.program=void 0,void 0!==e&&fe.releaseProgram(e)}function u(t,e,i,n){var r;if(i&&i.isInstancedBufferGeometry&&(r=te.get("ANGLE_instanced_arrays"),null===r))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),le.initAttributes();var s=i.attributes,o=e.getAttributes(),a=t.defaultAttributeValues;for(var h in o){var l=o[h];if(l>=0){var c=s[h];if(void 0!==c){var u=c.normalized,p=c.itemSize,f=pe.getAttributeProperties(c),d=f.__webglBuffer,m=f.type,g=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var v=c.data,y=v.stride,_=c.offset;v&&v.isInstancedInterleavedBuffer?(le.enableAttributeAndDivisor(l,v.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):le.enableAttribute(l),Qt.bindBuffer(Qt.ARRAY_BUFFER,d),Qt.vertexAttribPointer(l,p,m,u,y*g,(n*y+_)*g)}else c.isInstancedBufferAttribute?(le.enableAttributeAndDivisor(l,c.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=c.meshPerAttribute*c.count)):le.enableAttribute(l),Qt.bindBuffer(Qt.ARRAY_BUFFER,d),Qt.vertexAttribPointer(l,p,m,u,0,n*p*g)}else if(void 0!==a){var b=a[h];if(void 0!==b)switch(b.length){case 2:Qt.vertexAttrib2fv(l,b);break;case 3:Qt.vertexAttrib3fv(l,b);break;case 4:Qt.vertexAttrib4fv(l,b);break;default:Qt.vertexAttrib1fv(l,b)}}}}le.disableUnusedAttributes()}function p(t,e){return Math.abs(e[0])-Math.abs(t[0])}function f(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function d(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function m(t,e,i,n,r){var s,o;i.transparent?(s=st,o=++ot):(s=et,o=++it);var a=s[o];void 0!==a?(a.id=t.id,a.object=t,a.geometry=e,a.material=i,a.z=Wt.z,a.group=r):(a={id:t.id,object:t,geometry:e,material:i,z:Wt.z,group:r},s.push(a))}function g(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),jt.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),y(jt)}function v(t){return jt.center.set(0,0,0),jt.radius=.7071067811865476,jt.applyMatrix4(t.matrixWorld),y(jt)}function y(t){if(!Ut.intersectsSphere(t))return!1;var e=Vt.numPlanes;if(0===e)return!0;var i=ct.clippingPlanes,n=t.center,r=-t.radius,s=0;do if(i[s].distanceToPoint(n)<r)return!1;while(++s!==e);return!0}function _(t,e){if(t.visible!==!1){var i=0!==(t.layers.mask&e.layers.mask);if(i)if(t.isLight)K.push(t);else if(t.isSprite)t.frustumCulled!==!1&&v(t)!==!0||ht.push(t);else if(t.isLensFlare)lt.push(t);else if(t.isImmediateRenderObject)ct.sortObjects===!0&&(Wt.setFromMatrixPosition(t.matrixWorld),Wt.applyMatrix4(Ht)),m(t,null,t.material,Wt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||g(t)===!0)){var n=t.material;if(n.visible===!0){ct.sortObjects===!0&&(Wt.setFromMatrixPosition(t.matrixWorld),Wt.applyMatrix4(Ht));var r=pe.update(t);if(n.isMultiMaterial)for(var s=r.groups,o=n.materials,a=0,h=s.length;a<h;a++){var l=s[a],c=o[l.materialIndex];c.visible===!0&&m(t,r,c,Wt.z,l)}else m(t,r,n,Wt.z,null)}}for(var u=t.children,a=0,h=u.length;a<h;a++)_(u[a],e)}}function b(t,e,i,n){for(var r=0,s=t.length;r<s;r++){var o=t[r],a=o.object,h=o.geometry,l=void 0===n?o.material:n,c=o.group;if(a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),a.onBeforeRender(ct,e,i,h,l,c),a.isImmediateRenderObject){E(l);var u=w(i,e.fog,l,a);gt="",a.render(function(t){ct.renderBufferImmediate(t,u,l)})}else ct.renderBufferDirect(i,e.fog,h,l,a,c);a.onAfterRender(ct,e,i,h,l,c)}}function x(t,e,i){var n=ce.get(t),r=fe.getParameters(t,Xt,e,Vt.numPlanes,Vt.numIntersection,i),s=fe.getProgramCode(t,r),a=n.program,h=!0;if(void 0===a)t.addEventListener("dispose",o);else if(a.code!==s)c(t);else{if(void 0!==r.shaderID)return;h=!1}if(h){if(r.shaderID){var l=El[r.shaderID];n.__webglShader={name:t.type,uniforms:ya.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,a=fe.acquireProgram(t,r,s),n.program=a,t.program=a}var u=a.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<ct.maxMorphTargets;p++)u["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<ct.maxMorphNormals;p++)u["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var f=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&t.clipping!==!0||(n.numClippingPlanes=Vt.numPlanes,n.numIntersection=Vt.numIntersection,f.clippingPlanes=Vt.uniform),n.fog=e,n.lightsHash=Xt.hash,t.lights&&(f.ambientLightColor.value=Xt.ambient,f.directionalLights.value=Xt.directional,f.spotLights.value=Xt.spot,f.rectAreaLights.value=Xt.rectArea,f.pointLights.value=Xt.point,f.hemisphereLights.value=Xt.hemi,f.directionalShadowMap.value=Xt.directionalShadowMap,f.directionalShadowMatrix.value=Xt.directionalShadowMatrix,f.spotShadowMap.value=Xt.spotShadowMap,f.spotShadowMatrix.value=Xt.spotShadowMatrix,f.pointShadowMap.value=Xt.pointShadowMap,f.pointShadowMatrix.value=Xt.pointShadowMatrix);var d=n.program.getUniforms(),m=H.seqWithValue(d.seq,f);n.uniformsList=m}function E(t){t.side===os?le.disable(Qt.CULL_FACE):le.enable(Qt.CULL_FACE),le.setFlipSided(t.side===ss),t.transparent===!0?le.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):le.setBlending(ps),le.setDepthFunc(t.depthFunc),le.setDepthTest(t.depthTest),le.setDepthWrite(t.depthWrite),le.setColorWrite(t.colorWrite),le.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function w(t,e,i,n){xt=0;var r=ce.get(i);if(zt&&(Gt||t!==vt)){var s=t===vt&&i.id===mt;Vt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,s)}i.needsUpdate===!1&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==Xt.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Vt.numPlanes&&r.numIntersection===Vt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(x(i,e,n),i.needsUpdate=!1);var o=!1,a=!1,h=!1,l=r.program,c=l.getUniforms(),u=r.__webglShader.uniforms;if(l.id!==ut&&(Qt.useProgram(l.program),ut=l.id,o=!0,a=!0,h=!0),i.id!==mt&&(mt=i.id,a=!0),o||t!==vt){if(c.set(Qt,t,"projectionMatrix"),he.logarithmicDepthBuffer&&c.setValue(Qt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==vt&&(vt=t,a=!0,h=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var p=c.map.cameraPosition;void 0!==p&&p.setValue(Qt,Wt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&c.setValue(Qt,"viewMatrix",t.matrixWorldInverse),c.set(Qt,ct,"toneMappingExposure"),c.set(Qt,ct,"toneMappingWhitePoint")}if(i.skinning){c.setOptional(Qt,n,"bindMatrix"),c.setOptional(Qt,n,"bindMatrixInverse");var f=n.skeleton;f&&(he.floatVertexTextures&&f.useVertexTexture?(c.set(Qt,f,"boneTexture"),c.set(Qt,f,"boneTextureWidth"),c.set(Qt,f,"boneTextureHeight")):c.setOptional(Qt,f,"boneMatrices"))}return a&&(i.lights&&k(u,h),e&&i.fog&&P(u,e),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&T(u,i),i.isLineBasicMaterial?A(u,i):i.isLineDashedMaterial?(A(u,i),S(u,i)):i.isPointsMaterial?M(u,i):i.isMeshLambertMaterial?C(u,i):i.isMeshToonMaterial?I(u,i):i.isMeshPhongMaterial?R(u,i):i.isMeshPhysicalMaterial?N(u,i):i.isMeshStandardMaterial?O(u,i):i.isMeshDepthMaterial?i.displacementMap&&(u.displacementMap.value=i.displacementMap,u.displacementScale.value=i.displacementScale,u.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&L(u,i),void 0!==u.ltcMat&&(u.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),H.upload(Qt,r.uniformsList,u,ct)),c.set(Qt,n,"modelViewMatrix"),c.set(Qt,n,"normalMatrix"),c.setValue(Qt,"modelMatrix",n.matrixWorld),l}function T(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,
t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function A(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function S(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function M(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*St,t.scale.value=.5*At,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function P(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function C(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function R(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function I(t,e){R(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function O(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function N(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,O(t,e)}function L(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function k(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function D(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r.castShadow&&(Xt.shadows[e++]=r)}Xt.shadows.length=e}function F(t,e){var i,n,r,s,o,a,h,c=0,u=0,p=0,f=e.matrixWorldInverse,d=0,m=0,g=0,v=0,y=0;for(i=0,n=t.length;i<n;i++)if(r=t[i],s=r.color,o=r.intensity,a=r.distance,h=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)c+=s.r*o,u+=s.g*o,p+=s.b*o;else if(r.isDirectionalLight){var _=de.get(r);_.color.copy(r.color).multiplyScalar(r.intensity),_.direction.setFromMatrixPosition(r.matrixWorld),Wt.setFromMatrixPosition(r.target.matrixWorld),_.direction.sub(Wt),_.direction.transformDirection(f),_.shadow=r.castShadow,r.castShadow&&(_.shadowBias=r.shadow.bias,_.shadowRadius=r.shadow.radius,_.shadowMapSize=r.shadow.mapSize),Xt.directionalShadowMap[d]=h,Xt.directionalShadowMatrix[d]=r.shadow.matrix,Xt.directional[d++]=_}else if(r.isSpotLight){var _=de.get(r);_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(f),_.color.copy(s).multiplyScalar(o),_.distance=a,_.direction.setFromMatrixPosition(r.matrixWorld),Wt.setFromMatrixPosition(r.target.matrixWorld),_.direction.sub(Wt),_.direction.transformDirection(f),_.coneCos=Math.cos(r.angle),_.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),_.decay=0===r.distance?0:r.decay,_.shadow=r.castShadow,r.castShadow&&(_.shadowBias=r.shadow.bias,_.shadowRadius=r.shadow.radius,_.shadowMapSize=r.shadow.mapSize),Xt.spotShadowMap[g]=h,Xt.spotShadowMatrix[g]=r.shadow.matrix,Xt.spot[g++]=_}else if(r.isRectAreaLight){var _=de.get(r);_.color.copy(s).multiplyScalar(o/(r.width*r.height)),_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(f),qt.identity(),Yt.copy(r.matrixWorld),Yt.premultiply(f),qt.extractRotation(Yt),_.halfWidth.set(.5*r.width,0,0),_.halfHeight.set(0,.5*r.height,0),_.halfWidth.applyMatrix4(qt),_.halfHeight.applyMatrix4(qt),Xt.rectArea[v++]=_}else if(r.isPointLight){var _=de.get(r);_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(f),_.color.copy(r.color).multiplyScalar(r.intensity),_.distance=r.distance,_.decay=0===r.distance?0:r.decay,_.shadow=r.castShadow,r.castShadow&&(_.shadowBias=r.shadow.bias,_.shadowRadius=r.shadow.radius,_.shadowMapSize=r.shadow.mapSize),Xt.pointShadowMap[m]=h,void 0===Xt.pointShadowMatrix[m]&&(Xt.pointShadowMatrix[m]=new l),Wt.setFromMatrixPosition(r.matrixWorld).negate(),Xt.pointShadowMatrix[m].identity().setPosition(Wt),Xt.point[m++]=_}else if(r.isHemisphereLight){var _=de.get(r);_.direction.setFromMatrixPosition(r.matrixWorld),_.direction.transformDirection(f),_.direction.normalize(),_.skyColor.copy(r.color).multiplyScalar(o),_.groundColor.copy(r.groundColor).multiplyScalar(o),Xt.hemi[y++]=_}Xt.ambient[0]=c,Xt.ambient[1]=u,Xt.ambient[2]=p,Xt.directional.length=d,Xt.spot.length=g,Xt.rectArea.length=v,Xt.point.length=m,Xt.hemi.length=y,Xt.hash=d+","+m+","+g+","+v+","+y+","+Xt.shadows.length}function B(){var t=xt;return t>=he.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+he.maxTextures),xt+=1,t}function U(t){var e;if(t===ro)return Qt.REPEAT;if(t===so)return Qt.CLAMP_TO_EDGE;if(t===oo)return Qt.MIRRORED_REPEAT;if(t===ao)return Qt.NEAREST;if(t===ho)return Qt.NEAREST_MIPMAP_NEAREST;if(t===lo)return Qt.NEAREST_MIPMAP_LINEAR;if(t===co)return Qt.LINEAR;if(t===uo)return Qt.LINEAR_MIPMAP_NEAREST;if(t===po)return Qt.LINEAR_MIPMAP_LINEAR;if(t===fo)return Qt.UNSIGNED_BYTE;if(t===Eo)return Qt.UNSIGNED_SHORT_4_4_4_4;if(t===wo)return Qt.UNSIGNED_SHORT_5_5_5_1;if(t===To)return Qt.UNSIGNED_SHORT_5_6_5;if(t===mo)return Qt.BYTE;if(t===go)return Qt.SHORT;if(t===vo)return Qt.UNSIGNED_SHORT;if(t===yo)return Qt.INT;if(t===_o)return Qt.UNSIGNED_INT;if(t===bo)return Qt.FLOAT;if(t===xo&&(e=te.get("OES_texture_half_float"),null!==e))return e.HALF_FLOAT_OES;if(t===So)return Qt.ALPHA;if(t===Mo)return Qt.RGB;if(t===Po)return Qt.RGBA;if(t===Co)return Qt.LUMINANCE;if(t===Ro)return Qt.LUMINANCE_ALPHA;if(t===Oo)return Qt.DEPTH_COMPONENT;if(t===No)return Qt.DEPTH_STENCIL;if(t===ys)return Qt.FUNC_ADD;if(t===_s)return Qt.FUNC_SUBTRACT;if(t===bs)return Qt.FUNC_REVERSE_SUBTRACT;if(t===ws)return Qt.ZERO;if(t===Ts)return Qt.ONE;if(t===As)return Qt.SRC_COLOR;if(t===Ss)return Qt.ONE_MINUS_SRC_COLOR;if(t===Ms)return Qt.SRC_ALPHA;if(t===Ps)return Qt.ONE_MINUS_SRC_ALPHA;if(t===Cs)return Qt.DST_ALPHA;if(t===Rs)return Qt.ONE_MINUS_DST_ALPHA;if(t===Is)return Qt.DST_COLOR;if(t===Os)return Qt.ONE_MINUS_DST_COLOR;if(t===Ns)return Qt.SRC_ALPHA_SATURATE;if((t===Lo||t===ko||t===Do||t===Fo)&&(e=te.get("WEBGL_compressed_texture_s3tc"),null!==e)){if(t===Lo)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===ko)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Do)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Fo)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Bo||t===Uo||t===Vo||t===zo)&&(e=te.get("WEBGL_compressed_texture_pvrtc"),null!==e)){if(t===Bo)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Uo)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Vo)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===zo)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Go&&(e=te.get("WEBGL_compressed_texture_etc1"),null!==e))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===xs||t===Es)&&(e=te.get("EXT_blend_minmax"),null!==e)){if(t===xs)return e.MIN_EXT;if(t===Es)return e.MAX_EXT}return t===Ao&&(e=te.get("WEBGL_depth_texture"),null!==e)?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",qr),t=t||{};var V=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),z=void 0!==t.context?t.context:null,G=void 0!==t.alpha&&t.alpha,j=void 0===t.depth||t.depth,Y=void 0===t.stencil||t.stencil,q=void 0!==t.antialias&&t.antialias,Q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,$=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,K=[],et=[],it=-1,st=[],ot=-1,at=new Float32Array(8),ht=[],lt=[];this.domElement=V,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Ys,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ct=this,ut=null,ft=null,dt=null,mt=-1,gt="",vt=null,yt=new r,_t=null,bt=new r,xt=0,Et=new W(0),wt=0,Tt=V.width,At=V.height,St=1,Ct=new r(0,0,Tt,At),It=!1,Nt=new r(0,0,Tt,At),Ut=new nt,Vt=new ae,zt=!1,Gt=!1,jt=new tt,Ht=new l,Wt=new h,Yt=new l,qt=new l,Xt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Zt={calls:0,vertices:0,faces:0,points:0};this.info={render:Zt,memory:{geometries:0,textures:0},programs:null};var Qt;try{var Jt={alpha:G,depth:j,stencil:Y,antialias:q,premultipliedAlpha:Q,preserveDrawingBuffer:$};if(Qt=z||V.getContext("webgl",Jt)||V.getContext("experimental-webgl",Jt),null===Qt)throw null!==V.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Qt.getShaderPrecisionFormat&&(Qt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),V.addEventListener("webglcontextlost",s,!1)}catch($t){console.error("THREE.WebGLRenderer: "+$t)}var te=new oe(Qt);te.get("WEBGL_depth_texture"),te.get("OES_texture_float"),te.get("OES_texture_float_linear"),te.get("OES_texture_half_float"),te.get("OES_texture_half_float_linear"),te.get("OES_standard_derivatives"),te.get("ANGLE_instanced_arrays"),te.get("OES_element_index_uint")&&(Mt.MaxIndex=4294967296);var he=new se(Qt,te,t),le=new re(Qt,te,U),ce=new ne,ue=new ie(Qt,te,le,ce,he,U,this.info),pe=new ee(Qt,ce,this.info),fe=new Kt(this,he),de=new Bt;this.info.programs=fe.programs;var me,ge,ve,ye,_e=new Ft(Qt,te,Zt),be=new Dt(Qt,te,Zt);i(),this.context=Qt,this.capabilities=he,this.extensions=te,this.properties=ce,this.state=le;var xe=new rt(this,Xt,pe,he);this.shadowMap=xe;var Ee=new Z(this,ht),we=new X(this,lt);this.getContext=function(){return Qt},this.getContextAttributes=function(){return Qt.getContextAttributes()},this.forceContextLoss=function(){te.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return he.getMaxAnisotropy()},this.getPrecision=function(){return he.precision},this.getPixelRatio=function(){return St},this.setPixelRatio=function(t){void 0!==t&&(St=t,this.setSize(Nt.z,Nt.w,!1))},this.getSize=function(){return{width:Tt,height:At}},this.setSize=function(t,e,i){Tt=t,At=e,V.width=t*St,V.height=e*St,i!==!1&&(V.style.width=t+"px",V.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){le.viewport(Nt.set(t,e,i,n))},this.setScissor=function(t,e,i,n){le.scissor(Ct.set(t,e,i,n))},this.setScissorTest=function(t){le.setScissorTest(It=t)},this.getClearColor=function(){return Et},this.setClearColor=function(t,e){Et.set(t),wt=void 0!==e?e:1,le.buffers.color.setClear(Et.r,Et.g,Et.b,wt,Q)},this.getClearAlpha=function(){return wt},this.setClearAlpha=function(t){wt=t,le.buffers.color.setClear(Et.r,Et.g,Et.b,wt,Q)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=Qt.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=Qt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=Qt.STENCIL_BUFFER_BIT),Qt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=n,this.dispose=function(){st=[],ot=-1,et=[],it=-1,V.removeEventListener("webglcontextlost",s,!1)},this.renderBufferImmediate=function(t,e,i){le.initAttributes();var n=ce.get(t);t.hasPositions&&!n.position&&(n.position=Qt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Qt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Qt.createBuffer()),t.hasColors&&!n.color&&(n.color=Qt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(Qt.bindBuffer(Qt.ARRAY_BUFFER,n.position),Qt.bufferData(Qt.ARRAY_BUFFER,t.positionArray,Qt.DYNAMIC_DRAW),le.enableAttribute(r.position),Qt.vertexAttribPointer(r.position,3,Qt.FLOAT,!1,0,0)),t.hasNormals){if(Qt.bindBuffer(Qt.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===as)for(var s=0,o=3*t.count;s<o;s+=9){var a=t.normalArray,h=(a[s+0]+a[s+3]+a[s+6])/3,l=(a[s+1]+a[s+4]+a[s+7])/3,c=(a[s+2]+a[s+5]+a[s+8])/3;a[s+0]=h,a[s+1]=l,a[s+2]=c,a[s+3]=h,a[s+4]=l,a[s+5]=c,a[s+6]=h,a[s+7]=l,a[s+8]=c}Qt.bufferData(Qt.ARRAY_BUFFER,t.normalArray,Qt.DYNAMIC_DRAW),le.enableAttribute(r.normal),Qt.vertexAttribPointer(r.normal,3,Qt.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(Qt.bindBuffer(Qt.ARRAY_BUFFER,n.uv),Qt.bufferData(Qt.ARRAY_BUFFER,t.uvArray,Qt.DYNAMIC_DRAW),le.enableAttribute(r.uv),Qt.vertexAttribPointer(r.uv,2,Qt.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==ls&&(Qt.bindBuffer(Qt.ARRAY_BUFFER,n.color),Qt.bufferData(Qt.ARRAY_BUFFER,t.colorArray,Qt.DYNAMIC_DRAW),le.enableAttribute(r.color),Qt.vertexAttribPointer(r.color,3,Qt.FLOAT,!1,0,0)),le.disableUnusedAttributes(),Qt.drawArrays(Qt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,s,o){E(r);var a=w(t,i,r,s),h=!1,l=n.id+"_"+a.id+"_"+r.wireframe;l!==gt&&(gt=l,h=!0);var c=s.morphTargetInfluences;if(void 0!==c){for(var f=[],d=0,m=c.length;d<m;d++){var g=c[d];f.push([g,d])}f.sort(p),f.length>8&&(f.length=8);for(var v=n.morphAttributes,d=0,m=f.length;d<m;d++){var g=f[d];if(at[d]=g[0],0!==g[0]){var y=g[1];r.morphTargets===!0&&v.position&&n.addAttribute("morphTarget"+d,v.position[y]),r.morphNormals===!0&&v.normal&&n.addAttribute("morphNormal"+d,v.normal[y])}else r.morphTargets===!0&&n.removeAttribute("morphTarget"+d),r.morphNormals===!0&&n.removeAttribute("morphNormal"+d)}for(var d=f.length,_=at.length;d<_;d++)at[d]=0;a.getUniforms().setValue(Qt,"morphTargetInfluences",at),h=!0}var y=n.index,b=n.attributes.position,x=1;r.wireframe===!0&&(y=pe.getWireframeAttribute(n),x=2);var T;null!==y?(T=be,T.setIndex(y)):T=_e,h&&(u(r,a,n),null!==y&&Qt.bindBuffer(Qt.ELEMENT_ARRAY_BUFFER,pe.getAttributeBuffer(y)));var A=0;null!==y?A=y.count:void 0!==b&&(A=b.count);var S=n.drawRange.start*x,M=n.drawRange.count*x,P=null!==o?o.start*x:0,C=null!==o?o.count*x:1/0,R=Math.max(S,P),I=Math.min(A,S+M,P+C)-1,O=Math.max(0,I-R+1);if(0!==O){if(s.isMesh)if(r.wireframe===!0)le.setLineWidth(r.wireframeLinewidth*e()),T.setMode(Qt.LINES);else switch(s.drawMode){case $o:T.setMode(Qt.TRIANGLES);break;case Ko:T.setMode(Qt.TRIANGLE_STRIP);break;case ta:T.setMode(Qt.TRIANGLE_FAN)}else if(s.isLine){var N=r.linewidth;void 0===N&&(N=1),le.setLineWidth(N*e()),s.isLineSegments?T.setMode(Qt.LINES):T.setMode(Qt.LINE_STRIP)}else s.isPoints&&T.setMode(Qt.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&T.renderInstances(n,R,O):T.render(R,O)}},this.render=function(t,e,i,n){if(void 0!==e&&e.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");gt="",mt=-1,vt=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Ht.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Ut.setFromMatrix(Ht),K.length=0,it=-1,ot=-1,ht.length=0,lt.length=0,Gt=this.localClippingEnabled,zt=Vt.init(this.clippingPlanes,Gt,e),_(t,e),et.length=it+1,st.length=ot+1,ct.sortObjects===!0&&(et.sort(f),st.sort(d)),zt&&Vt.beginShadows(),D(K),xe.render(t,e),F(K,e),zt&&Vt.endShadows(),Zt.calls=0,Zt.vertices=0,Zt.faces=0,Zt.points=0,void 0===i&&(i=null),this.setRenderTarget(i);var r=t.background;if(null===r?le.buffers.color.setClear(Et.r,Et.g,Et.b,wt,Q):r&&r.isColor&&(le.buffers.color.setClear(r.r,r.g,r.b,1,Q),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r&&r.isCubeTexture?(void 0===ve&&(ve=new Lt,ye=new Pt(new Rt(5,5,5),new J({uniforms:El.cube.uniforms,vertexShader:El.cube.vertexShader,fragmentShader:El.cube.fragmentShader,side:ss,depthTest:!1,depthWrite:!1,fog:!1}))),ve.projectionMatrix.copy(e.projectionMatrix),ve.matrixWorld.extractRotation(e.matrixWorld),ve.matrixWorldInverse.getInverse(ve.matrixWorld),ye.material.uniforms.tCube.value=r,ye.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,ye.matrixWorld),pe.update(ye),ct.renderBufferDirect(ve,null,ye.geometry,ye.material,ye,null)):r&&r.isTexture&&(void 0===me&&(me=new kt((-1),1,1,(-1),0,1),ge=new Pt(new Ot(2,2),new pt({depthTest:!1,depthWrite:!1,fog:!1}))),ge.material.map=r,pe.update(ge),ct.renderBufferDirect(me,null,ge.geometry,ge.material,ge,null)),t.overrideMaterial){var s=t.overrideMaterial;b(et,t,e,s),b(st,t,e,s)}else le.setBlending(ps),b(et,t,e),b(st,t,e);Ee.render(t,e),we.render(t,e,bt),i&&ue.updateRenderTargetMipmap(i),le.setDepthTest(!0),le.setDepthWrite(!0),le.setColorWrite(!0)},this.setFaceCulling=function(t,e){le.setCullFace(t),le.setFlipSided(e===Kr)},this.allocTextureUnit=B,this.setTexture2D=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),ue.setTexture2D(e,i)}}(),this.setTexture=function(){var t=!1;return function(e,i){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),ue.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?ue.setTextureCube(e,i):ue.setTextureCubeDynamic(e,i)}}(),this.getCurrentRenderTarget=function(){return ft},this.setRenderTarget=function(t){ft=t,t&&void 0===ce.get(t).__webglFramebuffer&&ue.setupRenderTarget(t);var e,i=t&&t.isWebGLRenderTargetCube;if(t){var n=ce.get(t);e=i?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,yt.copy(t.scissor),_t=t.scissorTest,bt.copy(t.viewport)}else e=null,yt.copy(Ct).multiplyScalar(St),_t=It,bt.copy(Nt).multiplyScalar(St);if(dt!==e&&(Qt.bindFramebuffer(Qt.FRAMEBUFFER,e),dt=e),le.scissor(yt),le.setScissorTest(_t),le.viewport(bt),i){var r=ce.get(t.texture);Qt.framebufferTexture2D(Qt.FRAMEBUFFER,Qt.COLOR_ATTACHMENT0,Qt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,s){if((t&&t.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=ce.get(t).__webglFramebuffer;if(o){var a=!1;o!==dt&&(Qt.bindFramebuffer(Qt.FRAMEBUFFER,o),a=!0);try{var h=t.texture,l=h.format,c=h.type;if(l!==Po&&U(l)!==Qt.getParameter(Qt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===fo||U(c)===Qt.getParameter(Qt.IMPLEMENTATION_COLOR_READ_TYPE)||c===bo&&(te.get("OES_texture_float")||te.get("WEBGL_color_buffer_float"))||c===xo&&te.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Qt.checkFramebufferStatus(Qt.FRAMEBUFFER)===Qt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&Qt.readPixels(e,i,n,r,U(l),U(c),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&Qt.bindFramebuffer(Qt.FRAMEBUFFER,dt)}}}}function le(t,e){this.name="",this.color=new W(t),this.density=void 0!==e?e:25e-5}function ce(t,e,i){this.name="",this.color=new W(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function ue(){ht.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function pe(t,e,i,n,r){ht.call(this),this.lensFlares=[],this.positionScreen=new h,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,i,n,r)}function fe(t){Q.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function de(t){ht.call(this),this.type="Sprite",this.material=void 0!==t?t:new fe}function me(){ht.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ge(t,e,i){if(this.useVertexTexture=void 0===i||i,this.identityMatrix=new l,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=ua.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new Y(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Po,bo)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new l)}}function ve(){ht.call(this),this.type="Bone"}function ye(t,e,i){Pt.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,s,o=0,a=this.geometry.bones.length;o<a;++o)s=this.geometry.bones[o],r=new ve,n.push(r),r.name=s.name,r.position.fromArray(s.pos),r.quaternion.fromArray(s.rotq),void 0!==s.scl&&r.scale.fromArray(s.scl);for(var o=0,a=this.geometry.bones.length;o<a;++o)s=this.geometry.bones[o],s.parent!==-1&&null!==s.parent&&void 0!==n[s.parent]?n[s.parent].add(n[o]):this.add(n[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ge(n,(void 0),i),this.matrixWorld)}function _e(t){Q.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function be(t,e,i){return 1===i?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new xe(t,e)):(ht.call(this),this.type="Line",this.geometry=void 0!==t?t:new Mt,void(this.material=void 0!==e?e:new _e({color:16777215*Math.random()})))}function xe(t,e){be.call(this,t,e),this.type="LineSegments"}function Ee(t){Q.call(this),this.type="PointsMaterial",this.color=new W(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function we(t,e){ht.call(this),this.type="Points",this.geometry=void 0!==t?t:new Mt,this.material=void 0!==e?e:new Ee({color:16777215*Math.random()})}function Te(){ht.call(this),this.type="Group"}function Ae(t,e,i,r,s,o,a,h,l){function c(){requestAnimationFrame(c),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}n.call(this,t,e,i,r,s,o,a,h,l),this.generateMipmaps=!1;var u=this;c()}function Se(t,e,i,r,s,o,a,h,l,c,u,p){n.call(this,null,o,a,h,l,c,r,s,u,p),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Me(t,e,i,r,s,o,a,h,l){n.call(this,t,e,i,r,s,o,a,h,l),this.needsUpdate=!0}function Pe(t,e,i,r,s,o,a,h,l,c){if(c=void 0!==c?c:Oo,c!==Oo&&c!==No)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Oo&&(i=vo),void 0===i&&c===No&&(i=Ao),n.call(this,null,r,s,o,a,h,c,i,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ao,this.minFilter=void 0!==h?h:ao,this.flipY=!1,this.generateMipmaps=!1}function Ce(t){function e(t,e){return t-e}Mt.call(this),this.type="WireframeGeometry";var i,n,r,s,o,a,l,c,u=[],p=[0,0],f={},d=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(i=0,r=m.length;i<r;i++){var g=m[i];for(n=0;n<3;n++)p[0]=g[d[n]],p[1]=g[d[(n+1)%3]],p.sort(e),l=p.toString(),void 0===f[l]&&(f[l]={index1:p[0],index2:p[1]})}for(l in f)a=f[l],c=t.vertices[a.index1],u.push(c.x,c.y,c.z),c=t.vertices[a.index2],u.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var v,y,_,b,x,E,w,T;if(c=new h,null!==t.index){for(v=t.attributes.position,y=t.index,_=t.groups,0===_.length&&t.addGroup(0,y.count),s=0,o=_.length;s<o;++s)for(b=_[s],x=b.start,E=b.count,i=x,r=x+E;i<r;i+=3)for(n=0;n<3;n++)p[0]=y.getX(i+n),p[1]=y.getX(i+(n+1)%3),p.sort(e),l=p.toString(),void 0===f[l]&&(f[l]={index1:p[0],index2:p[1]});for(l in f)a=f[l],c.fromBufferAttribute(v,a.index1),u.push(c.x,c.y,c.z),c.fromBufferAttribute(v,a.index2),u.push(c.x,c.y,c.z)}else for(v=t.attributes.position,i=0,r=v.count/3;i<r;i++)for(n=0;n<3;n++)w=3*i+n,c.fromBufferAttribute(v,w),u.push(c.x,c.y,c.z),T=3*i+(n+1)%3,c.fromBufferAttribute(v,T),u.push(c.x,c.y,c.z)}this.addAttribute("position",new xt(u,3))}function Re(t,e,i){St.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Ie(t,e,i)),this.mergeVertices()}function Ie(t,e,i){Mt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,r,s=[],o=[],a=[],h=e+1;for(n=0;n<=i;n++){var l=n/i;for(r=0;r<=e;r++){var c=r/e,u=t(c,l);o.push(u.x,u.y,u.z),a.push(c,l)}}for(n=0;n<i;n++)for(r=0;r<e;r++){var p=n*h+r,f=n*h+r+1,d=(n+1)*h+r+1,m=(n+1)*h+r;s.push(p,f,m),s.push(f,d,m)}this.setIndex(s),this.addAttribute("position",new xt(o,3)),this.addAttribute("uv",new xt(a,2)),this.computeVertexNormals()}function Oe(t,e,i,n){St.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new Ne(t,e,i,n)),this.mergeVertices()}function Ne(t,e,n,r){function s(t){for(var i=new h,n=new h,r=new h,s=0;s<e.length;s+=3)p(e[s+0],i),p(e[s+1],n),p(e[s+2],r),o(i,n,r,t)}function o(t,e,i,n){var r,s,o=Math.pow(2,n),a=[];for(r=0;r<=o;r++){a[r]=[];var h=t.clone().lerp(i,r/o),l=e.clone().lerp(i,r/o),c=o-r;for(s=0;s<=c;s++)0===s&&r===o?a[r][s]=h:a[r][s]=h.clone().lerp(l,s/c)}for(r=0;r<o;r++)for(s=0;s<2*(o-r)-1;s++){var p=Math.floor(s/2);s%2===0?(u(a[r][p+1]),u(a[r+1][p]),u(a[r][p])):(u(a[r][p+1]),u(a[r+1][p+1]),u(a[r+1][p]))}}function a(t){for(var e=new h,i=0;i<v.length;i+=3)e.x=v[i+0],e.y=v[i+1],e.z=v[i+2],e.normalize().multiplyScalar(t),v[i+0]=e.x,v[i+1]=e.y,v[i+2]=e.z}function l(){for(var t=new h,e=0;e<v.length;e+=3){t.x=v[e+0],t.y=v[e+1],t.z=v[e+2];var i=m(t)/2/Math.PI+.5,n=g(t)/Math.PI+.5;y.push(i,1-n)}f(),c()}function c(){for(var t=0;t<y.length;t+=6){var e=y[t+0],i=y[t+2],n=y[t+4],r=Math.max(e,i,n),s=Math.min(e,i,n);r>.9&&s<.1&&(e<.2&&(y[t+0]+=1),i<.2&&(y[t+2]+=1),n<.2&&(y[t+4]+=1))}}function u(t){v.push(t.x,t.y,t.z)}function p(e,i){var n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function f(){for(var t=new h,e=new h,n=new h,r=new h,s=new i,o=new i,a=new i,l=0,c=0;l<v.length;l+=9,c+=6){t.set(v[l+0],v[l+1],v[l+2]),e.set(v[l+3],v[l+4],v[l+5]),n.set(v[l+6],v[l+7],v[l+8]),s.set(y[c+0],y[c+1]),o.set(y[c+2],y[c+3]),a.set(y[c+4],y[c+5]),r.copy(t).add(e).add(n).divideScalar(3);var u=m(r);d(s,c+0,t,u),d(o,c+2,e,u),d(a,c+4,n,u)}}function d(t,e,i,n){n<0&&1===t.x&&(y[e]=t.x-1),0===i.x&&0===i.z&&(y[e]=n/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function g(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}Mt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;var v=[],y=[];s(r),a(n),l(),this.addAttribute("position",new xt(v,3)),this.addAttribute("normal",new xt(v.slice(),3)),this.addAttribute("uv",new xt(y,2)),this.normalizeNormals()}function Le(t,e){St.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ke(t,e)),this.mergeVertices()}function ke(t,e){var i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];Ne.call(this,i,n,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function De(t,e){St.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Fe(t,e)),this.mergeVertices()}function Fe(t,e){var i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ne.call(this,i,n,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Be(t,e){St.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ue(t,e)),this.mergeVertices()}function Ue(t,e){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ne.call(this,n,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ve(t,e){St.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ze(t,e)),this.mergeVertices()}function ze(t,e){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ne.call(this,r,s,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ge(t,e,i,n,r,s){St.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new je(t,e,i,n,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function je(t,e,n,r,s){function o(){for(p=0;p<e;p++)a(p);a(s===!1?e:0),c(),l()}function a(i){var s=t.getPointAt(i/e),o=u.normals[i],a=u.binormals[i];for(f=0;f<=r;f++){var h=f/r*Math.PI*2,l=Math.sin(h),c=-Math.cos(h);m.x=c*o.x+l*a.x,m.y=c*o.y+l*a.y,m.z=c*o.z+l*a.z,m.normalize(),y.push(m.x,m.y,m.z),d.x=s.x+n*m.x,d.y=s.y+n*m.y,d.z=s.z+n*m.z,v.push(d.x,d.y,d.z)}}function l(){for(f=1;f<=e;f++)for(p=1;p<=r;p++){var t=(r+1)*(f-1)+(p-1),i=(r+1)*f+(p-1),n=(r+1)*f+p,s=(r+1)*(f-1)+p;b.push(t,i,s),b.push(i,n,s)}}function c(){for(p=0;p<=e;p++)for(f=0;f<=r;f++)g.x=p/e,g.y=f/r,_.push(g.x,g.y)}Mt.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:s},e=e||64,n=n||1,r=r||8,s=s||!1;var u=t.computeFrenetFrames(e,s);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var p,f,d=new h,m=new h,g=new i,v=[],y=[],_=[],b=[];o(),this.setIndex(b),this.addAttribute("position",new xt(v,3)),this.addAttribute("normal",new xt(y,3)),this.addAttribute("uv",new xt(_,2))}function He(t,e,i,n,r,s,o){
St.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:s},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new We(t,e,i,n,r,s)),this.mergeVertices()}function We(t,e,n,r,s,o){function a(t,e,i,n,r){var s=Math.cos(t),o=Math.sin(t),a=i/e*t,h=Math.cos(a);r.x=n*(2+h)*.5*s,r.y=n*(2+h)*o*.5,r.z=n*Math.sin(a)*.5}Mt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:s,q:o},t=t||100,e=e||40,n=Math.floor(n)||64,r=Math.floor(r)||8,s=s||2,o=o||3;var l,c,u=[],p=[],f=[],d=[],m=new h,g=new h,v=(new i,new h),y=new h,_=new h,b=new h,x=new h;for(l=0;l<=n;++l){var E=l/n*s*Math.PI*2;for(a(E,s,o,t,v),a(E+.01,s,o,t,y),b.subVectors(y,v),x.addVectors(y,v),_.crossVectors(b,x),x.crossVectors(_,b),_.normalize(),x.normalize(),c=0;c<=r;++c){var w=c/r*Math.PI*2,T=-e*Math.cos(w),A=e*Math.sin(w);m.x=v.x+(T*x.x+A*_.x),m.y=v.y+(T*x.y+A*_.y),m.z=v.z+(T*x.z+A*_.z),p.push(m.x,m.y,m.z),g.subVectors(m,v).normalize(),f.push(g.x,g.y,g.z),d.push(l/n),d.push(c/r)}}for(c=1;c<=n;c++)for(l=1;l<=r;l++){var S=(r+1)*(c-1)+(l-1),M=(r+1)*c+(l-1),P=(r+1)*c+l,C=(r+1)*(c-1)+l;u.push(S,M,C),u.push(M,P,C)}this.setIndex(u),this.addAttribute("position",new xt(p,3)),this.addAttribute("normal",new xt(f,3)),this.addAttribute("uv",new xt(d,2))}function Ye(t,e,i,n,r){St.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new qe(t,e,i,n,r))}function qe(t,e,i,n,r){Mt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||100,e=e||40,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var s,o,a=[],l=[],c=[],u=[],p=new h,f=new h,d=new h;for(s=0;s<=i;s++)for(o=0;o<=n;o++){var m=o/n*r,g=s/i*Math.PI*2;f.x=(t+e*Math.cos(g))*Math.cos(m),f.y=(t+e*Math.cos(g))*Math.sin(m),f.z=e*Math.sin(g),l.push(f.x,f.y,f.z),p.x=t*Math.cos(m),p.y=t*Math.sin(m),d.subVectors(f,p).normalize(),c.push(d.x,d.y,d.z),u.push(o/n),u.push(s/i)}for(s=1;s<=i;s++)for(o=1;o<=n;o++){var v=(n+1)*s+o-1,y=(n+1)*(s-1)+o-1,_=(n+1)*(s-1)+o,b=(n+1)*s+o;a.push(v,y,b),a.push(y,_,b)}this.setIndex(a),this.addAttribute("position",new xt(l,3)),this.addAttribute("normal",new xt(c,3)),this.addAttribute("uv",new xt(u,2))}function Xe(t,e){return"undefined"==typeof t?void(t=[]):(St.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())}function Ze(t,e){e=e||{};var i=e.font;if((i&&i.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new St;var n=i.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Xe.call(this,n,e),this.type="TextGeometry"}function Qe(t,e,i,n,r,s,o){St.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Je(t,e,i,n,r,s,o))}function Je(t,e,i,n,r,s,o){Mt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,s=void 0!==s?s:0,o=void 0!==o?o:Math.PI;var a,l,c=s+o,u=0,p=[],f=new h,d=new h,m=[],g=[],v=[],y=[];for(l=0;l<=i;l++){var _=[],b=l/i;for(a=0;a<=e;a++){var x=a/e;f.x=-t*Math.cos(n+x*r)*Math.sin(s+b*o),f.y=t*Math.cos(s+b*o),f.z=t*Math.sin(n+x*r)*Math.sin(s+b*o),g.push(f.x,f.y,f.z),d.set(f.x,f.y,f.z).normalize(),v.push(d.x,d.y,d.z),y.push(x,1-b),_.push(u++)}p.push(_)}for(l=0;l<i;l++)for(a=0;a<e;a++){var E=p[l][a+1],w=p[l][a],T=p[l+1][a],A=p[l+1][a+1];(0!==l||s>0)&&m.push(E,w,A),(l!==i-1||c<Math.PI)&&m.push(w,T,A)}this.setIndex(m),this.addAttribute("position",new xt(g,3)),this.addAttribute("normal",new xt(v,3)),this.addAttribute("uv",new xt(y,2))}function $e(t,e,i,n,r,s){St.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new Ke(t,e,i,n,r,s))}function Ke(t,e,n,r,s,o){Mt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},t=t||20,e=e||50,s=void 0!==s?s:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var a,l,c,u=[],p=[],f=[],d=[],m=t,g=(e-t)/r,v=new h,y=new i;for(l=0;l<=r;l++){for(c=0;c<=n;c++)a=s+c/n*o,v.x=m*Math.cos(a),v.y=m*Math.sin(a),p.push(v.x,v.y,v.z),f.push(0,0,1),y.x=(v.x/e+1)/2,y.y=(v.y/e+1)/2,d.push(y.x,y.y);m+=g}for(l=0;l<r;l++){var _=l*(n+1);for(c=0;c<n;c++){a=c+_;var b=a,x=a+n+1,E=a+n+2,w=a+1;u.push(b,x,w),u.push(x,E,w)}}this.setIndex(u),this.addAttribute("position",new xt(p,3)),this.addAttribute("normal",new xt(f,3)),this.addAttribute("uv",new xt(d,2))}function ti(t,e,i,n){St.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new ei(t,e,i,n)),this.mergeVertices()}function ei(t,e,n,r){Mt.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=ua.clamp(r,0,2*Math.PI);var s,o,a,l=[],c=[],u=[],p=1/e,f=new h,d=new i;for(o=0;o<=e;o++){var m=n+o*p*r,g=Math.sin(m),v=Math.cos(m);for(a=0;a<=t.length-1;a++)f.x=t[a].x*g,f.y=t[a].y,f.z=t[a].x*v,c.push(f.x,f.y,f.z),d.x=o/e,d.y=a/(t.length-1),u.push(d.x,d.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){s=a+o*t.length;var y=s,_=s+t.length,b=s+t.length+1,x=s+1;l.push(y,_,x),l.push(_,b,x)}if(this.setIndex(l),this.addAttribute("position",new xt(c,3)),this.addAttribute("uv",new xt(u,2)),this.computeVertexNormals(),r===2*Math.PI){var E=this.attributes.normal.array,w=new h,T=new h,A=new h;for(s=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)w.x=E[a+0],w.y=E[a+1],w.z=E[a+2],T.x=E[s+a+0],T.y=E[s+a+1],T.z=E[s+a+2],A.addVectors(w,T).normalize(),E[a+0]=E[s+a+0]=A.x,E[a+1]=E[s+a+1]=A.y,E[a+2]=E[s+a+2]=A.z}}function ii(t,e){St.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ni(t,e)),this.mergeVertices()}function ni(t,e){function i(t){var i,a,l,c=r.length/3,u=t.extractPoints(e),p=u.shape,f=u.holes;if(Ml.isClockWise(p)===!1)for(p=p.reverse(),i=0,a=f.length;i<a;i++)l=f[i],Ml.isClockWise(l)===!0&&(f[i]=l.reverse());var d=Ml.triangulateShape(p,f);for(i=0,a=f.length;i<a;i++)l=f[i],p=p.concat(l);for(i=0,a=p.length;i<a;i++){var m=p[i];r.push(m.x,m.y,0),s.push(0,0,1),o.push(m.x,m.y)}for(i=0,a=d.length;i<a;i++){var g=d[i],v=g[0]+c,y=g[1]+c,_=g[2]+c;n.push(v,y,_),h+=3}}Mt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],s=[],o=[],a=0,h=0;if(Array.isArray(t)===!1)i(t);else for(var l=0;l<t.length;l++)i(t[l]),this.addGroup(a,h,l),a+=h,h=0;this.setIndex(n),this.addAttribute("position",new xt(r,3)),this.addAttribute("normal",new xt(s,3)),this.addAttribute("uv",new xt(o,2))}function ri(t,e){function i(t,e){return t-e}Mt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,s=[],o=Math.cos(ua.DEG2RAD*e),a=[0,0],h={},l=["a","b","c"];t.isBufferGeometry?(r=new St,r.fromBufferGeometry(t)):r=t.clone(),r.mergeVertices(),r.computeFaceNormals();for(var c=r.vertices,u=r.faces,p=0,f=u.length;p<f;p++)for(var d=u[p],m=0;m<3;m++)a[0]=d[l[m]],a[1]=d[l[(m+1)%3]],a.sort(i),n=a.toString(),void 0===h[n]?h[n]={index1:a[0],index2:a[1],face1:p,face2:void 0}:h[n].face2=p;for(n in h){var g=h[n];if(void 0===g.face2||u[g.face1].normal.dot(u[g.face2].normal)<=o){var v=c[g.index1];s.push(v.x,v.y,v.z),v=c[g.index2],s.push(v.x,v.y,v.z)}}this.addAttribute("position",new xt(s,3))}function si(t,e,i,n,r,s,o,a){St.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new oi(t,e,i,n,r,s,o,a)),this.mergeVertices()}function oi(t,e,n,r,s,o,a,l){function c(){var i,o,c=new h,u=new h,x=0,E=(e-t)/n;for(o=0;o<=s;o++){var w=[],T=o/s,A=T*(e-t)+t;for(i=0;i<=r;i++){var S=i/r,M=S*l+a,P=Math.sin(M),C=Math.cos(M);u.x=A*P,u.y=-T*n+_,u.z=A*C,d.push(u.x,u.y,u.z),c.set(P,E,C).normalize(),m.push(c.x,c.y,c.z),g.push(S,1-T),w.push(v++)}y.push(w)}for(i=0;i<r;i++)for(o=0;o<s;o++){var R=y[o][i],I=y[o+1][i],O=y[o+1][i+1],N=y[o][i+1];f.push(R,I,N),f.push(I,O,N),x+=6}p.addGroup(b,x,0),b+=x}function u(n){var s,o,c,u=new i,y=new h,x=0,E=n===!0?t:e,w=n===!0?1:-1;for(o=v,s=1;s<=r;s++)d.push(0,_*w,0),m.push(0,w,0),g.push(.5,.5),v++;for(c=v,s=0;s<=r;s++){var T=s/r,A=T*l+a,S=Math.cos(A),M=Math.sin(A);y.x=E*M,y.y=_*w,y.z=E*S,d.push(y.x,y.y,y.z),m.push(0,w,0),u.x=.5*S+.5,u.y=.5*M*w+.5,g.push(u.x,u.y),v++}for(s=0;s<r;s++){var P=o+s,C=c+s;n===!0?f.push(C,C+1,P):f.push(C+1,C,P),x+=3}p.addGroup(b,x,n===!0?1:2),b+=x}Mt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};var p=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,s=Math.floor(s)||1,o=void 0!==o&&o,a=void 0!==a?a:0,l=void 0!==l?l:2*Math.PI;var f=[],d=[],m=[],g=[],v=0,y=[],_=n/2,b=0;c(),o===!1&&(t>0&&u(!0),e>0&&u(!1)),this.setIndex(f),this.addAttribute("position",new xt(d,3)),this.addAttribute("normal",new xt(m,3)),this.addAttribute("uv",new xt(g,2))}function ai(t,e,i,n,r,s,o){si.call(this,0,t,e,i,n,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:o}}function hi(t,e,i,n,r,s,o){oi.call(this,0,t,e,i,n,r,s,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:o}}function li(t,e,i,n){St.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new ci(t,e,i,n))}function ci(t,e,n,r){Mt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var s,o,a=[],l=[],c=[],u=[],p=new h,f=new i;for(l.push(0,0,0),c.push(0,0,1),u.push(.5,.5),o=0,s=3;o<=e;o++,s+=3){var d=n+o/e*r;p.x=t*Math.cos(d),p.y=t*Math.sin(d),l.push(p.x,p.y,p.z),c.push(0,0,1),f.x=(l[s]/t+1)/2,f.y=(l[s+1]/t+1)/2,u.push(f.x,f.y)}for(s=1;s<=e;s++)a.push(s,s+1,0);this.setIndex(a),this.addAttribute("position",new xt(l,3)),this.addAttribute("normal",new xt(c,3)),this.addAttribute("uv",new xt(u,2))}function ui(){J.call(this,{uniforms:ya.merge([xl.lights,{opacity:{value:1}}]),vertexShader:_l.shadow_vert,fragmentShader:_l.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function pi(t){J.call(this,t),this.type="RawShaderMaterial"}function fi(t){this.uuid=ua.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function di(t){Q.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new W(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function mi(t){di.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function gi(t){Q.call(this),this.type="MeshPhongMaterial",this.color=new W(16777215),this.specular=new W(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vi(t){gi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function yi(t){Q.call(this,t),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _i(t){Q.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function bi(t){Q.call(this),this.type="LineDashedMaterial",this.color=new W(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function xi(t,e,i){var n=this,r=!1,s=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,r===!1&&void 0!==n.onStart&&n.onStart(t,s,o),r=!0},this.itemEnd=function(t){s++,void 0!==n.onProgress&&n.onProgress(t,s,o),s===o&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function Ei(t){this.manager=void 0!==t?t:Il}function wi(t){this.manager=void 0!==t?t:Il,this._parser=null}function Ti(t){this.manager=void 0!==t?t:Il,this._parser=null}function Ai(t){this.manager=void 0!==t?t:Il}function Si(t){this.manager=void 0!==t?t:Il}function Mi(t){this.manager=void 0!==t?t:Il}function Pi(t,e){ht.call(this),this.type="Light",this.color=new W(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ci(t,e,i){Pi.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ht.DefaultUp),this.updateMatrix(),this.groundColor=new W(e)}function Ri(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new l}function Ii(){Ri.call(this,new Lt(50,1,.5,500))}function Oi(t,e,i,n,r,s){Pi.call(this,t,e),this.type="SpotLight",this.position.copy(ht.DefaultUp),this.updateMatrix(),this.target=new ht,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new Ii}function Ni(t,e,i,n){Pi.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Ri(new Lt(90,1,.5,500))}function Li(){Ri.call(this,new kt((-5),5,5,(-5),.5,500))}function ki(t,e){Pi.call(this,t,e),this.type="DirectionalLight",this.position.copy(ht.DefaultUp),this.updateMatrix(),this.target=new ht,this.shadow=new Li}function Di(t,e){Pi.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Fi(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Bi(t,e,i,n){Fi.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ui(t,e,i,n){Fi.call(this,t,e,i,n)}function Vi(t,e,i,n){Fi.call(this,t,e,i,n)}function zi(t,e,i,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Ol.convertArray(e,this.TimeBufferType),this.values=Ol.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Gi(t,e,i,n){zi.call(this,t,e,i,n)}function ji(t,e,i,n){Fi.call(this,t,e,i,n)}function Hi(t,e,i,n){zi.call(this,t,e,i,n)}function Wi(t,e,i,n){zi.call(this,t,e,i,n)}function Yi(t,e,i,n){zi.call(this,t,e,i,n)}function qi(t,e,i){zi.call(this,t,e,i)}function Xi(t,e,i,n){zi.call(this,t,e,i,n)}function Zi(t,e,i,n){zi.apply(this,arguments)}function Qi(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=ua.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Ji(t){this.manager=void 0!==t?t:Il,this.textures={}}function $i(t){this.manager=void 0!==t?t:Il}function Ki(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function tn(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Il,this.withCredentials=!1}function en(t){this.manager=void 0!==t?t:Il,this.texturePath=""}function nn(t,e,i,n,r){var s=.5*(n-e),o=.5*(r-i),a=t*t,h=t*a;return(2*i-2*n+s+o)*h+(-3*i+3*n-2*s-o)*a+s*t+i}function rn(t,e){var i=1-t;return i*i*e}function sn(t,e){return 2*(1-t)*t*e}function on(t,e){return t*t*e}function an(t,e,i,n){return rn(t,e)+sn(t,i)+on(t,n)}function hn(t,e){var i=1-t;return i*i*i*e}function ln(t,e){var i=1-t;return 3*i*i*t*e}function cn(t,e){return 3*(1-t)*t*t*e}function un(t,e){return t*t*t*e}function pn(t,e,i,n,r){return hn(t,e)+ln(t,i)+cn(t,n)+un(t,r)}function fn(){}function dn(t,e){this.v1=t,this.v2=e}function mn(){this.curves=[],this.autoClose=!1}function gn(t,e,i,n,r,s,o,a){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a||0}function vn(t){this.points=void 0===t?[]:t}function yn(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function _n(t,e,i){this.v0=t,this.v1=e,this.v2=i}function bn(t){mn.call(this),this.currentPoint=new i,t&&this.fromPoints(t)}function xn(){bn.apply(this,arguments),this.holes=[]}function En(){this.subPaths=[],this.currentPath=null}function wn(t){this.data=t}function Tn(t){this.manager=void 0!==t?t:Il}function An(t){this.manager=void 0!==t?t:Il}function Sn(t,e,i,n){Pi.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Mn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Lt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Lt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Pn(t,e,i){ht.call(this),this.type="CubeCamera";var n=90,r=1,s=new Lt(n,r,t,e);s.up.set(0,-1,0),s.lookAt(new h(1,0,0)),this.add(s);var a=new Lt(n,r,t,e);a.up.set(0,-1,0),a.lookAt(new h((-1),0,0)),this.add(a);var l=new Lt(n,r,t,e);l.up.set(0,0,1),l.lookAt(new h(0,1,0)),this.add(l);var c=new Lt(n,r,t,e);c.up.set(0,0,-1),c.lookAt(new h(0,(-1),0)),this.add(c);var u=new Lt(n,r,t,e);u.up.set(0,-1,0),u.lookAt(new h(0,0,1)),this.add(u);var p=new Lt(n,r,t,e);p.up.set(0,-1,0),p.lookAt(new h(0,0,(-1))),this.add(p);var f={format:Mo,magFilter:co,minFilter:co};this.renderTarget=new o(i,i,f),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,n=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,t.render(e,s,i),i.activeCubeFace=1,t.render(e,a,i),i.activeCubeFace=2,t.render(e,l,i),i.activeCubeFace=3,t.render(e,c,i),i.activeCubeFace=4,t.render(e,u,i),i.texture.generateMipmaps=n,i.activeCubeFace=5,t.render(e,p,i),t.setRenderTarget(null)}}function Cn(){ht.call(this),this.type="AudioListener",this.context=Dl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Rn(t){ht.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function In(t){Rn.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function On(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Nn(t,e,i){this.binding=t,this.valueSize=i;var n,r=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Ln(t,e,i){this.path=e,this.parsedPath=i||Ln.parseTrackName(e),this.node=Ln.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function kn(t){this.uuid=ua.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Dn(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null;for(var n=e.tracks,r=n.length,s=new Array(r),o={endingStart:Zo,endingEnd:Zo},a=0;a!==r;++a){var h=n[a].createInterpolant(null);s[a]=h,h.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ho,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Fn(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Bn(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Un(){Mt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Vn(t,e,i,n){this.uuid=ua.generateUUID(),this.data=t,this.itemSize=e,this.offset=i,this.normalized=n===!0}function zn(t,e){this.uuid=ua.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Gn(t,e,i){zn.call(this,t,e),this.meshPerAttribute=i||1}function jn(t,e,i){ft.call(this,t,e),this.meshPerAttribute=i||1}function Hn(t,e,i,n){this.ray=new st(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Wn(t,e){return t.distance-e.distance}function Yn(t,e,i,n){if(t.visible!==!1&&(t.raycast(e,i),n===!0))for(var r=t.children,s=0,o=r.length;s<o;s++)Yn(r[s],e,i,!0)}function qn(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Xn(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Zn(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function Qn(t,e){Pt.call(this,t,e),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,n="__default",r=0,s=i-1,o=i/1;this.createAnimation(n,r,s,o),this.setAnimationWeight(n,1)}function Jn(t){ht.call(this),this.material=t,this.render=function(t){}}function $n(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16711680,s=void 0!==n?n:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=3*a.faces.length:a&&a.isBufferGeometry&&(o=a.attributes.normal.count);var h=new Mt,l=new xt(2*o*3,3);h.addAttribute("position",l),xe.call(this,h,new _e({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Kn(t){ht.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new Mt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,r=1,s=32;n<s;n++,r++){var o=n/s*Math.PI*2,a=r/s*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new xt(i,3));var h=new _e({fog:!1});this.cone=new xe(e,h),this.add(this.cone),this.update()}function tr(t){this.bones=this.getBoneList(t);for(var e=new Mt,i=[],n=[],r=new W(0,0,1),s=new W(0,1,0),o=0;o<this.bones.length;o++){var a=this.bones[o];a.parent&&a.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(r.r,r.g,r.b),n.push(s.r,s.g,s.b))}e.addAttribute("position",new xt(i,3)),e.addAttribute("color",new xt(n,3));var h=new _e({vertexColors:us,depthTest:!1,depthWrite:!1,transparent:!0});xe.call(this,e,h),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function er(t,e){this.light=t,this.light.updateMatrixWorld();var i=new Je(e,4,2),n=new pt({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),Pt.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function ir(t){ht.call(this),this.light=t,this.light.updateMatrixWorld();var e=new pt({color:t.color,fog:!1}),i=new pt({color:t.color,fog:!1,wireframe:!0}),n=new Mt;n.addAttribute("position",new ft(new Float32Array(18),3)),this.add(new Pt(n,e)),this.add(new Pt(n,i)),this.update()}function nr(t,e){ht.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var i=new Fe(e);i.rotateY(.5*Math.PI);var n=new pt({vertexColors:us,wireframe:!0}),r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.addAttribute("color",new ft(s,3)),this.add(new Pt(i,n)),this.update()}function rr(t,e,i,n){t=t||10,e=e||10,i=new W(void 0!==i?i:4473924),n=new W(void 0!==n?n:8947848);for(var r=e/2,s=t/e,o=t/2,a=[],h=[],l=0,c=0,u=-o;l<=e;l++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);var p=l===r?i:n;p.toArray(h,c),c+=3,p.toArray(h,c),c+=3,p.toArray(h,c),c+=3,p.toArray(h,c),c+=3}var f=new Mt;f.addAttribute("position",new xt(a,3)),f.addAttribute("color",new xt(h,3));var d=new _e({vertexColors:us});xe.call(this,f,d)}function sr(t,e,i,n,r,s){t=t||10,e=e||16,i=i||8,n=n||64,r=new W(void 0!==r?r:4473924),s=new W(void 0!==s?s:8947848);var o,a,h,l,c,u,p,f=[],d=[];for(l=0;l<=e;l++)h=l/e*(2*Math.PI),o=Math.sin(h)*t,a=Math.cos(h)*t,f.push(0,0,0),f.push(o,0,a),p=1&l?r:s,d.push(p.r,p.g,p.b),d.push(p.r,p.g,p.b);for(l=0;l<=i;l++)for(p=1&l?r:s,u=t-t/i*l,c=0;c<n;c++)h=c/n*(2*Math.PI),o=Math.sin(h)*u,a=Math.cos(h)*u,f.push(o,0,a),d.push(p.r,p.g,p.b),h=(c+1)/n*(2*Math.PI),o=Math.sin(h)*u,a=Math.cos(h)*u,f.push(o,0,a),d.push(p.r,p.g,p.b);var m=new Mt;m.addAttribute("position",new xt(f,3)),m.addAttribute("color",new xt(d,3));var g=new _e({vertexColors:us});xe.call(this,m,g)}function or(t,e,i,n){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==i?i:16776960,s=void 0!==n?n:1,o=0,a=this.object.geometry;a&&a.isGeometry?o=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var h=new Mt,l=new xt(2*o*3,3);h.addAttribute("position",l),xe.call(this,h,new _e({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function ar(t,e){ht.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var i=new Mt;i.addAttribute("position",new xt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var n=new _e({fog:!1});this.add(new be(i,n)),i=new Mt,i.addAttribute("position",new xt([0,0,0,0,0,1],3)),this.add(new be(i,n)),this.update()}function hr(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){s.push(0,0,0),o.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(s.length/3-1)}var n=new Mt,r=new _e({color:16777215,vertexColors:cs}),s=[],o=[],a={},h=new W(16755200),l=new W(16711680),c=new W(43775),u=new W(16777215),p=new W(3355443);e("n1","n2",h),e("n2","n4",h),e("n4","n3",h),e("n3","n1",h),e("f1","f2",h),e("f2","f4",h),e("f4","f3",h),e("f3","f1",h),e("n1","f1",h),e("n2","f2",h),e("n3","f3",h),e("n4","f4",h),e("p","n1",l),e("p","n2",l),e("p","n3",l),e("p","n4",l),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",u),e("p","c",p),e("cn1","cn2",p),e("cn3","cn4",p),e("cf1","cf2",p),e("cf3","cf4",p),n.addAttribute("position",new xt(s,3)),n.addAttribute("color",new xt(o,3)),xe.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function lr(t,e){void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Mt;r.setIndex(new ft(i,1)),r.addAttribute("position",new ft(n,3)),xe.call(this,r,new _e({color:e})),void 0!==t&&this.update(t)}function cr(t,e,i,n,r,s){ht.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===s&&(s=.2*r),void 0===Fl&&(Fl=new Mt,Fl.addAttribute("position",new xt([0,0,0,0,1,0],3)),Bl=new oi(0,.5,1,5,1),Bl.translate(0,-.5,0)),this.position.copy(e),this.line=new be(Fl,new _e({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pt(Bl,new pt({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,s)}function ur(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Mt;n.addAttribute("position",new xt(e,3)),n.addAttribute("color",new xt(i,3));var r=new _e({vertexColors:us});xe.call(this,n,r)}function pr(){function t(t,s,o,a){e=t,i=o,n=-3*t+3*s-2*o-a,r=2*t-2*s+o+a}var e=0,i=0,n=0,r=0;return{initCatmullRom:function(e,i,n,r,s){t(i,n,s*(n-e),s*(r-i))},initNonuniformCatmullRom:function(e,i,n,r,s,o,a){var h=(i-e)/s-(n-e)/(s+o)+(n-i)/o,l=(n-i)/o-(r-i)/(o+a)+(r-n)/a;h*=o,l*=o,t(i,n,h,l)},calc:function(t){var s=t*t,o=s*t;return e+i*t+n*s+r*o}}}function fr(t){this.points=t||[],this.closed=!1}function dr(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function mr(t,e,i){this.v0=t,this.v1=e,this.v2=i}function gr(t,e){this.v1=t,this.v2=e}function vr(t,e,i,n,r,s){gn.call(this,t,e,i,i,n,r,s)}function yr(t,e,i,n,r,s,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ut(t,e,i,r,s,o)}function _r(t){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new fi(t)}function br(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),
new we(t,e)}function xr(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new de(t)}function Er(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new we(t,e)}function wr(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function Tr(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function Ar(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function Sr(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new h(t,e,i)}function Mr(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ft(t,e).setDynamic(!0)}function Pr(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new dt(t,e)}function Cr(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new mt(t,e)}function Rr(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new gt(t,e)}function Ir(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new vt(t,e)}function Or(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new yt(t,e)}function Nr(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new _t(t,e)}function Lr(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new bt(t,e)}function kr(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new xt(t,e)}function Dr(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Et(t,e)}function Fr(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fr.call(this,t),this.type="catmullrom",this.closed=!0}function Br(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fr.call(this,t),this.type="catmullrom"}function Ur(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),fr.call(this,t),this.type="catmullrom"}function Vr(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new lr(t,e)}function zr(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new xe(new ri(t.geometry),new _e({color:void 0!==e?e:16777215}))}function Gr(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new xe(new Ce(t.geometry),new _e({color:void 0!==e?e:16777215}))}function jr(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ei(t)}function Hr(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ti(t)}function Wr(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Yr(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}(),e.prototype={addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&i[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);r!==-1&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;var n=[],r=0,s=i.length;for(r=0;r<s;r++)n[r]=i[r];for(r=0;r<s;r++)n[r].call(this,t)}}}};var qr="84",Xr={LEFT:0,MIDDLE:1,RIGHT:2},Zr=0,Qr=1,Jr=2,$r=3,Kr=0,ts=1,es=0,is=1,ns=2,rs=0,ss=1,os=2,as=1,hs=2,ls=0,cs=1,us=2,ps=0,fs=1,ds=2,ms=3,gs=4,vs=5,ys=100,_s=101,bs=102,xs=103,Es=104,ws=200,Ts=201,As=202,Ss=203,Ms=204,Ps=205,Cs=206,Rs=207,Is=208,Os=209,Ns=210,Ls=0,ks=1,Ds=2,Fs=3,Bs=4,Us=5,Vs=6,zs=7,Gs=0,js=1,Hs=2,Ws=0,Ys=1,qs=2,Xs=3,Zs=4,Qs=300,Js=301,$s=302,Ks=303,to=304,eo=305,io=306,no=307,ro=1e3,so=1001,oo=1002,ao=1003,ho=1004,lo=1005,co=1006,uo=1007,po=1008,fo=1009,mo=1010,go=1011,vo=1012,yo=1013,_o=1014,bo=1015,xo=1016,Eo=1017,wo=1018,To=1019,Ao=1020,So=1021,Mo=1022,Po=1023,Co=1024,Ro=1025,Io=Po,Oo=1026,No=1027,Lo=2001,ko=2002,Do=2003,Fo=2004,Bo=2100,Uo=2101,Vo=2102,zo=2103,Go=2151,jo=2200,Ho=2201,Wo=2202,Yo=2300,qo=2301,Xo=2302,Zo=2400,Qo=2401,Jo=2402,$o=0,Ko=1,ta=2,ea=3e3,ia=3001,na=3007,ra=3002,sa=3003,oa=3004,aa=3005,ha=3006,la=3200,ca=3201,ua={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ua.DEG2RAD},radToDeg:function(t){return t*ua.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}};i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*i-s*n+t.x,this.y=r*n+s*i+t.y,this}};var pa=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=Qs,n.prototype={constructor:n,isTexture:!0,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=ua.generateUUID()),void 0===t.images[n.uuid]&&(t.images[n.uuid]={uuid:n.uuid,url:e(n)}),i.image=n.uuid}return t.textures[this.uuid]=i,i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===Qs){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case ro:t.x=t.x-Math.floor(t.x);break;case so:t.x=t.x<0?0:1;break;case oo:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ro:t.y=t.y-Math.floor(t.y);break;case so:t.y=t.y<0?0:1;break;case oo:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(n.prototype,e.prototype),r.prototype={constructor:r,isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*e+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*e+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*e+s[7]*i+s[11]*n+s[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,s=.01,o=.1,a=t.elements,h=a[0],l=a[4],c=a[8],u=a[1],p=a[5],f=a[9],d=a[2],m=a[6],g=a[10];if(Math.abs(l-u)<s&&Math.abs(c-d)<s&&Math.abs(f-m)<s){if(Math.abs(l+u)<o&&Math.abs(c+d)<o&&Math.abs(f+m)<o&&Math.abs(h+p+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;var v=(h+1)/2,y=(p+1)/2,_=(g+1)/2,b=(l+u)/4,x=(c+d)/4,E=(f+m)/4;return v>y&&v>_?v<s?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(v),n=b/i,r=x/i):y>_?y<s?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(y),i=b/n,r=E/n):_<s?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(_),i=x/r,n=E/r),this.set(i,n,r,e),this}var w=Math.sqrt((m-f)*(m-f)+(c-d)*(c-d)+(u-l)*(u-l));return Math.abs(w)<.001&&(w=1),this.x=(m-f)/w,this.y=(c-d)/w,this.z=(u-l)/w,this.w=Math.acos((h+p+g-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new r,e=new r),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},s.prototype={constructor:s,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(s.prototype,e.prototype),o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.isWebGLRenderTargetCube=!0,a.prototype={constructor:a,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if((t&&t.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),s=Math.sin(t._x/2),o=Math.sin(t._y/2),a=Math.sin(t._z/2),h=t.order;return"XYZ"===h?(this._x=s*n*r+i*o*a,this._y=i*o*r-s*n*a,this._z=i*n*a+s*o*r,this._w=i*n*r-s*o*a):"YXZ"===h?(this._x=s*n*r+i*o*a,this._y=i*o*r-s*n*a,this._z=i*n*a-s*o*r,this._w=i*n*r+s*o*a):"ZXY"===h?(this._x=s*n*r-i*o*a,this._y=i*o*r+s*n*a,this._z=i*n*a+s*o*r,this._w=i*n*r-s*o*a):"ZYX"===h?(this._x=s*n*r-i*o*a,this._y=i*o*r+s*n*a,this._z=i*n*a-s*o*r,this._w=i*n*r+s*o*a):"YZX"===h?(this._x=s*n*r+i*o*a,this._y=i*o*r+s*n*a,this._z=i*n*a-s*o*r,this._w=i*n*r-s*o*a):"XZY"===h&&(this._x=s*n*r-i*o*a,this._y=i*o*r-s*n*a,this._z=i*n*a+s*o*r,this._w=i*n*r+s*o*a),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],s=i[8],o=i[1],a=i[5],h=i[9],l=i[2],c=i[6],u=i[10],p=n+a+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(c-h)*e,this._y=(s-l)*e,this._z=(o-r)*e):n>a&&n>u?(e=2*Math.sqrt(1+n-a-u),this._w=(c-h)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(s+l)/e):a>u?(e=2*Math.sqrt(1+a-n-u),this._w=(s-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(h+c)/e):(e=2*Math.sqrt(1+u-n-a),this._w=(o-r)/e,this._x=(s+l)/e,this._y=(h+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(n,r){return void 0===t&&(t=new h),e=n.dot(r)+1,e<i?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,s=t._w,o=e._x,a=e._y,h=e._z,l=e._w;return this._x=i*l+s*o+n*h-r*a,this._y=n*l+s*a+r*o-i*h,this._z=r*l+s*h+i*a-n*o,this._w=s*l-i*o-n*a-r*h,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,s=this._w,o=s*t._w+i*t._x+n*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;var a=Math.sqrt(1-o*o);if(Math.abs(a)<.001)return this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var h=Math.atan2(a,o),l=Math.sin((1-e)*h)/a,c=Math.sin(e*h)/a;return this._w=s*l+this._w*c,this._x=i*l+this._x*c,this._y=n*l+this._y*c,this._z=r*l+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(a,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,s,o){var a=i[n+0],h=i[n+1],l=i[n+2],c=i[n+3],u=r[s+0],p=r[s+1],f=r[s+2],d=r[s+3];if(c!==d||a!==u||h!==p||l!==f){var m=1-o,g=a*u+h*p+l*f+c*d,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*v);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var x=o*v;if(a=a*m+u*x,h=h*m+p*x,l=l*m+f*x,c=c*m+d*x,m===1-o){var E=1/Math.sqrt(a*a+h*h+l*l+c*c);a*=E,h*=E,l*=E,c*=E}}t[e]=a,t[e+1]=h,t[e+2]=l,t[e+3]=c}}),h.prototype={constructor:h,isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return(e&&e.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new a),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new a),this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14];var s=r[3]*e+r[7]*i+r[11]*n+r[15];return this.divideScalar(s)},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*n-o*i,l=a*i+o*e-r*n,c=a*n+r*i-s*e,u=-r*e-s*i-o*n;return this.x=h*a+u*-r+l*-o-c*-s,this.y=l*a+u*-s+c*-r-h*-o,this.z=c*a+u*-o+h*-s-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new l),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new l),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new h,e=new h),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=n*a-r*o,this.y=r*s-i*a,this.z=i*o-n*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new h),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new h),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(ua.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3);
},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var i=t;t=e,e=i}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},l.prototype={constructor:l,isMatrix4:!0,set:function(t,e,i,n,r,s,o,a,h,l,c,u,p,f,d,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=h,g[6]=l,g[10]=c,g[14]=u,g[3]=p,g[7]=f,g[11]=d,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new h);var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),s=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*s,i[5]=n[5]*s,i[6]=n[6]*s,i[8]=n[8]*o,i[9]=n[9]*o,i[10]=n[10]*o,this}}(),makeRotationFromEuler:function(t){(t&&t.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,s=Math.cos(i),o=Math.sin(i),a=Math.cos(n),h=Math.sin(n),l=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var u=s*l,p=s*c,f=o*l,d=o*c;e[0]=a*l,e[4]=-a*c,e[8]=h,e[1]=p+f*h,e[5]=u-d*h,e[9]=-o*a,e[2]=d-u*h,e[6]=f+p*h,e[10]=s*a}else if("YXZ"===t.order){var m=a*l,g=a*c,v=h*l,y=h*c;e[0]=m+y*o,e[4]=v*o-g,e[8]=s*h,e[1]=s*c,e[5]=s*l,e[9]=-o,e[2]=g*o-v,e[6]=y+m*o,e[10]=s*a}else if("ZXY"===t.order){var m=a*l,g=a*c,v=h*l,y=h*c;e[0]=m-y*o,e[4]=-s*c,e[8]=v+g*o,e[1]=g+v*o,e[5]=s*l,e[9]=y-m*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){var u=s*l,p=s*c,f=o*l,d=o*c;e[0]=a*l,e[4]=f*h-p,e[8]=u*h+d,e[1]=a*c,e[5]=d*h+u,e[9]=p*h-f,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){var _=s*a,b=s*h,x=o*a,E=o*h;e[0]=a*l,e[4]=E-_*c,e[8]=x*c+b,e[1]=c,e[5]=s*l,e[9]=-o*l,e[2]=-h*l,e[6]=b*c+x,e[10]=_-E*c}else if("XZY"===t.order){var _=s*a,b=s*h,x=o*a,E=o*h;e[0]=a*l,e[4]=-c,e[8]=h*l,e[1]=_*c+E,e[5]=s*l,e[9]=b*c-x,e[2]=x*c-b,e[6]=o*l,e[10]=E*c+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,s=t.w,o=i+i,a=n+n,h=r+r,l=i*o,c=i*a,u=i*h,p=n*a,f=n*h,d=r*h,m=s*o,g=s*a,v=s*h;return e[0]=1-(p+d),e[4]=c-v,e[8]=u+g,e[1]=c+v,e[5]=1-(l+d),e[9]=f-m,e[2]=u-g,e[6]=f+m,e[10]=1-(l+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,i;return function(n,r,s){void 0===t&&(t=new h,e=new h,i=new h);var o=this.elements;return i.subVectors(n,r).normalize(),0===i.lengthSq()&&(i.z=1),t.crossVectors(s,i).normalize(),0===t.lengthSq()&&(i.z+=1e-4,t.crossVectors(s,i).normalize()),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,s=i[0],o=i[4],a=i[8],h=i[12],l=i[1],c=i[5],u=i[9],p=i[13],f=i[2],d=i[6],m=i[10],g=i[14],v=i[3],y=i[7],_=i[11],b=i[15],x=n[0],E=n[4],w=n[8],T=n[12],A=n[1],S=n[5],M=n[9],P=n[13],C=n[2],R=n[6],I=n[10],O=n[14],N=n[3],L=n[7],k=n[11],D=n[15];return r[0]=s*x+o*A+a*C+h*N,r[4]=s*E+o*S+a*R+h*L,r[8]=s*w+o*M+a*I+h*k,r[12]=s*T+o*P+a*O+h*D,r[1]=l*x+c*A+u*C+p*N,r[5]=l*E+c*S+u*R+p*L,r[9]=l*w+c*M+u*I+p*k,r[13]=l*T+c*P+u*O+p*D,r[2]=f*x+d*A+m*C+g*N,r[6]=f*E+d*S+m*R+g*L,r[10]=f*w+d*M+m*I+g*k,r[14]=f*T+d*P+m*O+g*D,r[3]=v*x+y*A+_*C+b*N,r[7]=v*E+y*S+_*R+b*L,r[11]=v*w+y*M+_*I+b*k,r[15]=v*T+y*P+_*O+b*D,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new h);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],s=t[1],o=t[5],a=t[9],h=t[13],l=t[2],c=t[6],u=t[10],p=t[14],f=t[3],d=t[7],m=t[11],g=t[15];return f*(+r*a*c-n*h*c-r*o*u+i*h*u+n*o*p-i*a*p)+d*(+e*a*p-e*h*u+r*s*u-n*s*p+n*h*l-r*a*l)+m*(+e*h*c-e*o*p-r*s*c+i*s*p+r*o*l-i*h*l)+g*(-n*o*l-e*a*c+e*o*u+n*s*c-i*s*u+i*a*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],s=n[1],o=n[2],a=n[3],h=n[4],l=n[5],c=n[6],u=n[7],p=n[8],f=n[9],d=n[10],m=n[11],g=n[12],v=n[13],y=n[14],_=n[15],b=f*y*u-v*d*u+v*c*m-l*y*m-f*c*_+l*d*_,x=g*d*u-p*y*u-g*c*m+h*y*m+p*c*_-h*d*_,E=p*v*u-g*f*u+g*l*m-h*v*m-p*l*_+h*f*_,w=g*f*c-p*v*c-g*l*d+h*v*d+p*l*y-h*f*y,T=r*b+s*x+o*E+a*w;if(0===T){var A="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(A);return console.warn(A),this.identity()}var S=1/T;return i[0]=b*S,i[1]=(v*d*a-f*y*a-v*o*m+s*y*m+f*o*_-s*d*_)*S,i[2]=(l*y*a-v*c*a+v*o*u-s*y*u-l*o*_+s*c*_)*S,i[3]=(f*c*a-l*d*a-f*o*u+s*d*u+l*o*m-s*c*m)*S,i[4]=x*S,i[5]=(p*y*a-g*d*a+g*o*m-r*y*m-p*o*_+r*d*_)*S,i[6]=(g*c*a-h*y*a-g*o*u+r*y*u+h*o*_-r*c*_)*S,i[7]=(h*d*a-p*c*a+p*o*u-r*d*u-h*o*m+r*c*m)*S,i[8]=E*S,i[9]=(g*f*a-p*v*a-g*s*m+r*v*m+p*s*_-r*f*_)*S,i[10]=(h*v*a-g*l*a+g*s*u-r*v*u-h*s*_+r*l*_)*S,i[11]=(p*l*a-h*f*a-p*s*u+r*f*u+h*s*m-r*l*m)*S,i[12]=w*S,i[13]=(p*v*o-g*f*o+g*s*d-r*v*d-p*s*y+r*f*y)*S,i[14]=(g*l*o-h*v*o-g*s*c+r*v*c+h*s*y-r*l*y)*S,i[15]=(h*f*o-p*l*o+p*s*c-r*f*c-h*s*d+r*l*d)*S,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,s=t.x,o=t.y,a=t.z,h=r*s,l=r*o;return this.set(h*s+i,h*o-n*a,h*a+n*o,0,h*o+n*a,l*o+i,l*a-n*s,0,h*a-n*o,l*a+n*s,r*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t,e;return function(i,n,r){void 0===t&&(t=new h,e=new l);var s=this.elements,o=t.set(s[0],s[1],s[2]).length(),a=t.set(s[4],s[5],s[6]).length(),c=t.set(s[8],s[9],s[10]).length(),u=this.determinant();u<0&&(o=-o),i.x=s[12],i.y=s[13],i.z=s[14],e.elements.set(this.elements);var p=1/o,f=1/a,d=1/c;return e.elements[0]*=p,e.elements[1]*=p,e.elements[2]*=p,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),r.x=o,r.y=a,r.z=c,this}}(),makePerspective:function(t,e,i,n,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(e-t),h=2*r/(i-n),l=(e+t)/(e-t),c=(i+n)/(i-n),u=-(s+r)/(s-r),p=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=h,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,s){var o=this.elements,a=1/(e-t),h=1/(i-n),l=1/(s-r),c=(e+t)*a,u=(i+n)*h,p=(s+r)*l;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var fa=new n,da=new c,ma=[],ga=[];z.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var s=i[n];s.setValue(t,e[s.id])}};var va=/([\w\d_]+)(\])?(\[|\.)?/g;H.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},H.prototype.set=function(t,e,i){var n=this.map[i];void 0!==n&&n.setValue(t,e[i],this.renderer)},H.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},H.upload=function(t,e,i,n){for(var r=0,s=e.length;r!==s;++r){var o=e[r],a=i[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,n)}},H.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var s=t[n];s.id in e&&i.push(s)}return i};var ya={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},_a="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",ba="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",xa="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ea="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",wa="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Ta="\nvec3 transformed = vec3( position );\n",Aa="\nvec3 objectNormal = vec3( normal );\n",Sa="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Ma="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",Pa="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",Ca="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",Ra="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Ia="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",Oa="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Na="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",La="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",ka="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Da="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",Fa="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",Ba="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",Ua="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",Va="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",za="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",Ga="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",ja="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",Ha="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",Wa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",Ya="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",qa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",Xa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",Za="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",Qa="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",Ja="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",$a="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",Ka="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",th="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",eh="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",ih="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",nh="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",rh="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",sh="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",oh="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",ah="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",hh="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",lh="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",ch="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",uh="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",ph="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",fh="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",dh="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",mh="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",gh="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",vh="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",yh="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",_h="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",bh="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",xh="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Eh="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",wh="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",Th="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",Ah="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Sh="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Mh="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",Ph="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",Ch="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Rh="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",Ih="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",Oh="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",Nh="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",Lh="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",kh="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",Dh="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",Fh="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",Bh="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Uh="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Vh="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",zh="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",Gh="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",jh="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",Hh="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",Wh="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Yh="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",qh="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",Xh="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",Zh="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",Qh="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",Jh="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",$h="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Kh="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",tl="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",el="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",il="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",nl="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",rl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",sl="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",ol="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",al="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",hl="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",ll="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",cl="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",ul="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",pl="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",fl="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",dl="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",ml="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",gl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",vl="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",yl="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",_l={
alphamap_fragment:_a,alphamap_pars_fragment:ba,alphatest_fragment:xa,aomap_fragment:Ea,aomap_pars_fragment:wa,begin_vertex:Ta,beginnormal_vertex:Aa,bsdfs:Sa,bumpmap_pars_fragment:Ma,clipping_planes_fragment:Pa,clipping_planes_pars_fragment:Ca,clipping_planes_pars_vertex:Ra,clipping_planes_vertex:Ia,color_fragment:Oa,color_pars_fragment:Na,color_pars_vertex:La,color_vertex:ka,common:Da,cube_uv_reflection_fragment:Fa,defaultnormal_vertex:Ba,displacementmap_pars_vertex:Ua,displacementmap_vertex:Va,emissivemap_fragment:za,emissivemap_pars_fragment:Ga,encodings_fragment:ja,encodings_pars_fragment:Ha,envmap_fragment:Wa,envmap_pars_fragment:Ya,envmap_pars_vertex:qa,envmap_vertex:Xa,fog_vertex:Za,fog_pars_vertex:Qa,fog_fragment:Ja,fog_pars_fragment:$a,gradientmap_pars_fragment:Ka,lightmap_fragment:th,lightmap_pars_fragment:eh,lights_lambert_vertex:ih,lights_pars:nh,lights_phong_fragment:rh,lights_phong_pars_fragment:sh,lights_physical_fragment:oh,lights_physical_pars_fragment:ah,lights_template:hh,logdepthbuf_fragment:lh,logdepthbuf_pars_fragment:ch,logdepthbuf_pars_vertex:uh,logdepthbuf_vertex:ph,map_fragment:fh,map_pars_fragment:dh,map_particle_fragment:mh,map_particle_pars_fragment:gh,metalnessmap_fragment:vh,metalnessmap_pars_fragment:yh,morphnormal_vertex:_h,morphtarget_pars_vertex:bh,morphtarget_vertex:xh,normal_flip:Eh,normal_fragment:wh,normalmap_pars_fragment:Th,packing:Ah,premultiplied_alpha_fragment:Sh,project_vertex:Mh,roughnessmap_fragment:Ph,roughnessmap_pars_fragment:Ch,shadowmap_pars_fragment:Rh,shadowmap_pars_vertex:Ih,shadowmap_vertex:Oh,shadowmask_pars_fragment:Nh,skinbase_vertex:Lh,skinning_pars_vertex:kh,skinning_vertex:Dh,skinnormal_vertex:Fh,specularmap_fragment:Bh,specularmap_pars_fragment:Uh,tonemapping_fragment:Vh,tonemapping_pars_fragment:zh,uv_pars_fragment:Gh,uv_pars_vertex:jh,uv_vertex:Hh,uv2_pars_fragment:Wh,uv2_pars_vertex:Yh,uv2_vertex:qh,worldpos_vertex:Xh,cube_frag:Zh,cube_vert:Qh,depth_frag:Jh,depth_vert:$h,distanceRGBA_frag:Kh,distanceRGBA_vert:tl,equirect_frag:el,equirect_vert:il,linedashed_frag:nl,linedashed_vert:rl,meshbasic_frag:sl,meshbasic_vert:ol,meshlambert_frag:al,meshlambert_vert:hl,meshphong_frag:ll,meshphong_vert:cl,meshphysical_frag:ul,meshphysical_vert:pl,normal_frag:fl,normal_vert:dl,points_frag:ml,points_vert:gl,shadow_frag:vl,shadow_vert:yl};W.prototype={constructor:W,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=ua.euclideanModulo(e,1),i=ua.clamp(i,0,1),n=ua.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;this.r=t(s,r,e+1/3),this.g=t(s,r,e),this.b=t(s,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var o=parseFloat(n[1])/360,a=parseInt(n[2],10)/100,h=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,a,h)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=i[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=bl[t];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,s=this.g,o=this.b,a=Math.max(r,s,o),h=Math.min(r,s,o),l=(h+a)/2;if(h===a)e=0,i=0;else{var c=a-h;switch(i=l<=.5?c/(a+h):c/(2-a-h),a){case r:e=(s-o)/c+(s<o?6:0);break;case s:e=(o-r)/c+2;break;case o:e=(r-s)/c+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var bl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Y.prototype=Object.create(n.prototype),Y.prototype.constructor=Y,Y.prototype.isDataTexture=!0;var xl={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},El={basic:{uniforms:ya.merge([xl.common,xl.aomap,xl.lightmap,xl.fog]),vertexShader:_l.meshbasic_vert,fragmentShader:_l.meshbasic_frag},lambert:{uniforms:ya.merge([xl.common,xl.aomap,xl.lightmap,xl.emissivemap,xl.fog,xl.lights,{emissive:{value:new W(0)}}]),vertexShader:_l.meshlambert_vert,fragmentShader:_l.meshlambert_frag},phong:{uniforms:ya.merge([xl.common,xl.aomap,xl.lightmap,xl.emissivemap,xl.bumpmap,xl.normalmap,xl.displacementmap,xl.gradientmap,xl.fog,xl.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:_l.meshphong_vert,fragmentShader:_l.meshphong_frag},standard:{uniforms:ya.merge([xl.common,xl.aomap,xl.lightmap,xl.emissivemap,xl.bumpmap,xl.normalmap,xl.displacementmap,xl.roughnessmap,xl.metalnessmap,xl.fog,xl.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_l.meshphysical_vert,fragmentShader:_l.meshphysical_frag},points:{uniforms:ya.merge([xl.points,xl.fog]),vertexShader:_l.points_vert,fragmentShader:_l.points_frag},dashed:{uniforms:ya.merge([xl.common,xl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_l.linedashed_vert,fragmentShader:_l.linedashed_frag},depth:{uniforms:ya.merge([xl.common,xl.displacementmap]),vertexShader:_l.depth_vert,fragmentShader:_l.depth_frag},normal:{uniforms:ya.merge([xl.common,xl.bumpmap,xl.normalmap,xl.displacementmap,{opacity:{value:1}}]),vertexShader:_l.normal_vert,fragmentShader:_l.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_l.cube_vert,fragmentShader:_l.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:_l.equirect_vert,fragmentShader:_l.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new h}},vertexShader:_l.distanceRGBA_vert,fragmentShader:_l.distanceRGBA_frag}};El.physical={uniforms:ya.merge([El.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:_l.meshphysical_vert,fragmentShader:_l.meshphysical_frag},q.prototype={constructor:q,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var n=e||new i;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var n=e||new i;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var wl=0;Q.prototype={constructor:Q,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):"overdraw"===e?this[e]=Number(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==fs&&(n.blending=this.blending),this.shading!==hs&&(n.shading=this.shading),this.side!==rs&&(n.side=this.side),this.vertexColors!==ls&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,i){var r=e(t.textures),s=e(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Q.prototype,e.prototype),J.prototype=Object.create(Q.prototype),J.prototype.constructor=J,J.prototype.isShaderMaterial=!0,J.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ya.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},J.prototype.toJSON=function(t){var e=Q.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},$.prototype=Object.create(Q.prototype),$.prototype.constructor=$,$.prototype.isMeshDepthMaterial=!0,$.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},K.prototype={constructor:K,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),i=+(1/0),n=+(1/0),r=-(1/0),s=-(1/0),o=-(1/0),a=0,h=t.length;a<h;a+=3){var l=t[a],c=t[a+1],u=t[a+2];l<e&&(e=l),c<i&&(i=c),u<n&&(n=u),l>r&&(r=l),c>s&&(s=c),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,s,o),this},setFromBufferAttribute:function(t){for(var e=+(1/0),i=+(1/0),n=+(1/0),r=-(1/0),s=-(1/0),o=-(1/0),a=0,h=t.count;a<h;a++){var l=t.getX(a),c=t.getY(a),u=t.getZ(a);l<e&&(e=l),c<i&&(i=c),u<n&&(n=u),l>r&&(r=l),c>s&&(s=c),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,s,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new h;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new h;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new h;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new h;return function(e){var i=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var n,r,s=e.geometry;if(void 0!==s)if(s.isGeometry){var o=s.vertices;for(n=0,r=o.length;n<r;n++)t.copy(o[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}else if(s.isBufferGeometry){var a=s.attributes.position;if(void 0!==a)for(n=0,r=a.count;n<r;n++)t.fromBufferAttribute(a,n).applyMatrix4(e.matrixWorld),i.expandByPoint(t)}}),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var i=e||new h;return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new h),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},clampPoint:function(t,e){var i=e||new h;return i.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new h;return function(e){var i=t.copy(e).clamp(this.min,this.max);return i.sub(e).length()}}(),getBoundingSphere:function(){var t=new h;return function(e){var i=e||new tt;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new h,new h,new h,new h,new h,new h,new h,new h];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},tt.prototype={constructor:tt,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t;return function(e,i){void 0===t&&(t=new K);var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=0,s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new h;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new K;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},et.prototype={constructor:et,isMatrix3:!0,set:function(t,e,i,n,r,s,o,a,h){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=r,l[5]=a,l[6]=i,l[7]=s,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new h);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*s*l-e*o*h-i*r*l+i*o*a+n*r*h-n*s*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var i=t.elements,n=this.elements,r=i[0],s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],c=i[6],u=i[7],p=i[8],f=p*h-l*u,d=l*c-p*a,m=u*a-h*c,g=r*f+s*d+o*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return n[0]=f*y,n[1]=(o*u-p*s)*y,n[2]=(l*s-o*h)*y,n[3]=d*y,n[4]=(p*r-o*c)*y,n[5]=(o*a-l*r)*y,n[6]=m*y,n[7]=(s*c-u*r)*y,n[8]=(h*r-s*a)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}},it.prototype={constructor:it,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new h,e=new h;return function(i,n,r){var s=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t),n=e||new h;return n.copy(this.normal).multiplyScalar(i)},intersectLine:function(){var t=new h;return function(e,i){var n=i||new h,r=e.delta(t),s=this.normal.dot(r);if(0!==s){var o=-(e.start.dot(this.normal)+this.constant)/s;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new h;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new h,e=new et;return function(i,n){var r=this.coplanarPoint(t).applyMatrix4(i),s=n||e.getNormalMatrix(i),o=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),
this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},nt.prototype={constructor:nt,set:function(t,e,i,n,r,s){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],c=i[7],u=i[8],p=i[9],f=i[10],d=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return e[0].setComponents(o-n,c-a,d-u,y-m).normalize(),e[1].setComponents(o+n,c+a,d+u,y+m).normalize(),e[2].setComponents(o+r,c+h,d+p,y+g).normalize(),e[3].setComponents(o-r,c-h,d-p,y-g).normalize(),e[4].setComponents(o-s,c-l,d-f,y-v).normalize(),e[5].setComponents(o+s,c+l,d+f,y+v).normalize(),this},intersectsObject:function(){var t=new tt;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new tt;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){var s=e[r].distanceToPoint(i);if(s<n)return!1}return!0},intersectsBox:function(){var t=new h,e=new h;return function(i){for(var n=this.planes,r=0;r<6;r++){var s=n[r];t.x=s.normal.x>0?i.min.x:i.max.x,e.x=s.normal.x>0?i.max.x:i.min.x,t.y=s.normal.y>0?i.min.y:i.max.y,e.y=s.normal.y>0?i.max.y:i.min.y,t.z=s.normal.z>0?i.min.z:i.max.z,e.z=s.normal.z>0?i.max.z:i.min.z;var o=s.distanceToPoint(t),a=s.distanceToPoint(e);if(o<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},st.prototype={constructor:st,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var i=e||new h;return i.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new h;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new h;i.subVectors(t,this.origin);var n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new h;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new h,e=new h,i=new h;return function(n,r,s,o){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var a,h,l,c,u=.5*n.distanceTo(r),p=-this.direction.dot(e),f=i.dot(this.direction),d=-i.dot(e),m=i.lengthSq(),g=Math.abs(1-p*p);if(g>0)if(a=p*d-f,h=p*f-d,c=u*g,a>=0)if(h>=-c)if(h<=c){var v=1/g;a*=v,h*=v,l=a*(a+p*h+2*f)+h*(p*a+h+2*d)+m}else h=u,a=Math.max(0,-(p*h+f)),l=-a*a+h*(h+2*d)+m;else h=-u,a=Math.max(0,-(p*h+f)),l=-a*a+h*(h+2*d)+m;else h<=-c?(a=Math.max(0,-(-p*u+f)),h=a>0?-u:Math.min(Math.max(-u,-d),u),l=-a*a+h*(h+2*d)+m):h<=c?(a=0,h=Math.min(Math.max(-u,-d),u),l=h*(h+2*d)+m):(a=Math.max(0,-(p*u+f)),h=a>0?u:Math.min(Math.max(-u,-d),u),l=-a*a+h*(h+2*d)+m);else h=p>0?-u:u,a=Math.max(0,-(p*h+f)),l=-a*a+h*(h+2*d)+m;return s&&s.copy(this.direction).multiplyScalar(a).add(this.origin),o&&o.copy(e).multiplyScalar(h).add(t),l}}(),intersectSphere:function(){var t=new h;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,s=e.radius*e.radius;if(r>s)return null;var o=Math.sqrt(s-r),a=n-o,h=n+o;return a<0&&h<0?null:a<0?this.at(h,i):this.at(a,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var i=t.normal.dot(this.direction);return i*e<0},intersectBox:function(t,e){var i,n,r,s,o,a,h=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,u=this.origin;return h>=0?(i=(t.min.x-u.x)*h,n=(t.max.x-u.x)*h):(i=(t.max.x-u.x)*h,n=(t.min.x-u.x)*h),l>=0?(r=(t.min.y-u.y)*l,s=(t.max.y-u.y)*l):(r=(t.max.y-u.y)*l,s=(t.min.y-u.y)*l),i>s||r>n?null:((r>i||i!==i)&&(i=r),(s<n||n!==n)&&(n=s),c>=0?(o=(t.min.z-u.z)*c,a=(t.max.z-u.z)*c):(o=(t.max.z-u.z)*c,a=(t.min.z-u.z)*c),i>a||o>n?null:((o>i||i!==i)&&(i=o),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:function(){var t=new h;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new h,e=new h,i=new h,n=new h;return function(r,s,o,a,h){e.subVectors(s,r),i.subVectors(o,r),n.crossVectors(e,i);var l,c=this.direction.dot(n);if(c>0){if(a)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,r);var u=l*this.direction.dot(i.crossVectors(t,i));if(u<0)return null;var p=l*this.direction.dot(e.cross(t));if(p<0)return null;if(u+p>c)return null;var f=-l*t.dot(n);return f<0?null:this.at(f/c,h)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},ot.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ot.DefaultOrder="XYZ",ot.prototype={constructor:ot,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=ua.clamp,r=t.elements,s=r[0],o=r[4],a=r[8],h=r[1],l=r[5],c=r[9],u=r[2],p=r[6],f=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,f),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-u,s),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,s))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f))):"XZY"===e?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,n){return void 0===t&&(t=new l),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new a;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new h(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},at.prototype={constructor:at,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}};var Tl=0;ht.DefaultUp=new h(0,1,0),ht.DefaultMatrixAutoUpdate=!0,ht.prototype={constructor:ht,isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new a;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new h(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new h(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new h(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new h;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new h(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new h(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new h(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new l;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new l;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);i!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i],s=r.getObjectByProperty(t,e);if(void 0!==s)return s}},getWorldPosition:function(t){var e=t||new h;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new h,e=new h;return function(i){var n=i||new a;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new a;return function(e){var i=e||new ot;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new h,e=new a;return function(i){var n=i||new h;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new a;return function(e){var i=e||new h;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t||""===t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(i){var o=e(t.geometries),a=e(t.materials),h=e(t.textures),l=e(t.images);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),h.length>0&&(n.textures=h),l.length>0&&(n.images=l)}return n.object=r,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}},Object.assign(ht.prototype,e.prototype),lt.prototype={constructor:lt,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){var e=t||new h;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new h;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new h;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new h,e=new h;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),s=e.dot(t),o=s/r;return n&&(o=ua.clamp(o,0,1)),o}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new h;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ct.normal=function(){var t=new h;return function(e,i,n,r){var s=r||new h;s.subVectors(n,i),t.subVectors(e,i),s.cross(t);var o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}}(),ct.barycoordFromPoint=function(){var t=new h,e=new h,i=new h;return function(n,r,s,o,a){t.subVectors(o,r),e.subVectors(s,r),i.subVectors(n,r);var l=t.dot(t),c=t.dot(e),u=t.dot(i),p=e.dot(e),f=e.dot(i),d=l*p-c*c,m=a||new h;if(0===d)return m.set(-2,-1,-1);var g=1/d,v=(p*u-c*f)*g,y=(l*f-c*u)*g;return m.set(1-v-y,y,v)}}(),ct.containsPoint=function(){var t=new h;return function(e,i,n,r){var s=ct.barycoordFromPoint(e,i,n,r,t);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}(),ct.prototype={constructor:ct,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new h,e=new h;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new h;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ct.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new it;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ct.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ct.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,i,n;return function(r,s){void 0===t&&(t=new it,e=[new lt,new lt,new lt],i=new h,n=new h);var o=s||new h,a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,i),this.containsPoint(i)===!0)o.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(i,!0,n);var c=i.distanceToSquared(n);c<a&&(a=c,o.copy(n))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ut.prototype={constructor:ut,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},pt.prototype=Object.create(Q.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshBasicMaterial=!0,pt.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},ft.prototype={constructor:ft,isBufferAttribute:!0,set needsUpdate(t){t===!0&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var s=t[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),s=new W),e[i++]=s.r,e[i++]=s.g,e[i++]=s.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var s=t[n];e[i++]=s.a,e[i++]=s.b,e[i++]=s.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,s=t.length;r<s;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var s=t[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new h),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,s=t.length;n<s;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},dt.prototype=Object.create(ft.prototype),dt.prototype.constructor=dt,mt.prototype=Object.create(ft.prototype),mt.prototype.constructor=mt,gt.prototype=Object.create(ft.prototype),gt.prototype.constructor=gt,vt.prototype=Object.create(ft.prototype),vt.prototype.constructor=vt,yt.prototype=Object.create(ft.prototype),yt.prototype.constructor=yt,_t.prototype=Object.create(ft.prototype),_t.prototype.constructor=_t,bt.prototype=Object.create(ft.prototype),bt.prototype.constructor=bt,xt.prototype=Object.create(ft.prototype),xt.prototype.constructor=xt,Et.prototype=Object.create(ft.prototype),Et.prototype.constructor=Et,Object.assign(wt.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,s=0;s<r.length;s++){var o=r[s];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*s-e.start,i.push(e)),e={start:3*s,materialIndex:n})}void 0!==e&&(e.count=3*s-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,s=t.faceVertexUvs,o=s[0]&&s[0].length>0,a=s[1]&&s[1].length>0,h=t.morphTargets,l=h.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]=[];this.morphTargets.position=e}var u,p=t.morphNormals,f=p.length;if(f>0){u=[];for(var c=0;c<f;c++)u[c]=[];this.morphTargets.normal=u}for(var d=t.skinIndices,m=t.skinWeights,g=d.length===r.length,v=m.length===r.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var E=y.color;this.colors.push(E,E,E)}if(o===!0){var w=s[0][c];void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new i,new i,new i))}if(a===!0){var w=s[1][c];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new i,new i,new i))}for(var T=0;T<l;T++){var A=h[T].vertices;e[T].push(A[y.a],A[y.b],A[y.c])}for(var T=0;T<f;T++){var S=p[T].vertexNormals[c];u[T].push(S.a,S.b,S.c)}g&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var Al=0;St.prototype={constructor:St,isGeometry:!0,applyMatrix:function(t){for(var e=(new et).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){var r=this.vertices[i];r.applyMatrix4(t)}for(var i=0,n=this.faces.length;i<n;i++){var s=this.faces[i];s.normal.applyMatrix3(e).normalize();for(var o=0,a=s.vertexNormals.length;o<a;o++)s.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new l),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new l),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ht),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,r){var s=void 0!==a?[p[t].clone(),p[e].clone(),p[i].clone()]:[],o=void 0!==l?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],h=new ut(t,e,i,s,o,r);n.faces.push(h),void 0!==c&&n.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[i].clone()]),void 0!==u&&n.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[i].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,s=t.attributes,o=s.position.array,a=void 0!==s.normal?s.normal.array:void 0,l=void 0!==s.color?s.color.array:void 0,c=void 0!==s.uv?s.uv.array:void 0,u=void 0!==s.uv2?s.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var p=[],f=[],d=[],m=0,g=0;m<o.length;m+=3,g+=2)n.vertices.push(new h(o[m],o[m+1],o[m+2])),void 0!==a&&p.push(new h(a[m],a[m+1],a[m+2])),void 0!==l&&n.colors.push(new W(l[m],l[m+1],l[m+2])),void 0!==c&&f.push(new i(c[g],c[g+1])),void 0!==u&&d.push(new i(u[g],u[g+1]));if(void 0!==r){var v=t.groups;if(v.length>0)for(var m=0;m<v.length;m++)for(var y=v[m],_=y.start,b=y.count,g=_,x=_+b;g<x;g+=3)e(r[g],r[g+1],r[g+2],y.materialIndex);else for(var m=0;m<r.length;m+=3)e(r[m],r[m+1],r[m+2])}else for(var m=0;m<o.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new l;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new h,e=new h,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,i,n,r,s,o;for(o=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)o[e]=new h;if(t){var a,l,c,u=new h,p=new h;for(n=0,r=this.faces.length;n<r;n++)s=this.faces[n],a=this.vertices[s.a],l=this.vertices[s.b],c=this.vertices[s.c],u.subVectors(c,l),p.subVectors(a,l),u.cross(p),o[s.a].add(u),o[s.b].add(u),o[s.c].add(u)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)s=this.faces[n],o[s.a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(e=0,i=this.vertices.length;e<i;e++)o[e].normalize();for(n=0,r=this.faces.length;n<r;n++){s=this.faces[n];var f=s.vertexNormals;3===f.length?(f[0].copy(o[s.a]),f[1].copy(o[s.b]),f[2].copy(o[s.c])):(f[0]=o[s.a].clone(),f[1]=o[s.b].clone(),f[2]=o[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){i=this.faces[t];var n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var s=new St;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o,a,l=this.morphNormals[t].faceNormals,c=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)o=new h,a={a:new h,b:new h,c:new h},l.push(o),c.push(a)}var u=this.morphNormals[t];s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals();var o,a;for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],o=u.faceNormals[i],a=u.vertexNormals[i],o.copy(r.normal),a.a.copy(r.vertexNormals[0]),a.b.copy(r.vertexNormals[1]),a.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;i<n;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new tt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if((t&&t.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var n,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,h=t.faces,l=this.faceVertexUvs[0],c=t.faceVertexUvs[0],u=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new et).getNormalMatrix(e));for(var f=0,d=o.length;f<d;f++){var m=o[f],g=m.clone();void 0!==e&&g.applyMatrix4(e),s.push(g)}for(var f=0,d=p.length;f<d;f++)u.push(p[f].clone());for(f=0,d=h.length;f<d;f++){var v,y,_,b=h[f],x=b.vertexNormals,E=b.vertexColors;v=new ut(b.a+r,b.b+r,b.c+r),v.normal.copy(b.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var w=0,T=x.length;w<T;w++)y=x[w].clone(),void 0!==n&&y.applyMatrix3(n).normalize(),v.vertexNormals.push(y);v.color.copy(b.color);for(var w=0,T=E.length;w<T;w++)_=E[w],v.vertexColors.push(_.clone());v.materialIndex=b.materialIndex+i,a.push(v)}for(f=0,d=c.length;f<d;f++){var A=c[f],S=[];if(void 0!==A){for(var w=0,T=A.length;w<T;w++)S.push(A[w].clone());l.push(S)}}},mergeMesh:function(t){return(t&&t.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),
void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,n,r,s,o,a,h={},l=[],c=[],u=4,p=Math.pow(10,u);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===h[e]?(h[e]=i,l.push(this.vertices[i]),c[i]=l.length-1):c[i]=c[h[e]];var f=[];for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],s=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(s[d]===s[(d+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var m=f[i];for(this.faces.splice(m,1),o=0,a=this.faceVertexUvs.length;o<a;o++)this.faceVertexUvs[o].splice(m,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;n<i;n++)e[n]._id=n;e.sort(t);var r,s,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===i&&(r=[]),a&&a.length===i&&(s=[]);for(var n=0;n<i;n++){var h=e[n]._id;r&&r.push(o[h]),s&&s.push(a[h])}r&&(this.faceVertexUvs[0]=r),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=u.length/3,u.push(t.x,t.y,t.z),p[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=f.length,f.push(t.getHex()),d[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var s=this.parameters;for(var o in s)void 0!==s[o]&&(r[o]=s[o]);return r}for(var a=[],h=0;h<this.vertices.length;h++){var l=this.vertices[h];a.push(l.x,l.y,l.z)}for(var c=[],u=[],p={},f=[],d={},m=[],g={},h=0;h<this.faces.length;h++){var v=this.faces[h],y=!0,_=!1,b=void 0!==this.faceVertexUvs[0][h],x=v.normal.length()>0,E=v.vertexNormals.length>0,w=1!==v.color.r||1!==v.color.g||1!==v.color.b,T=v.vertexColors.length>0,A=0;if(A=t(A,0,0),A=t(A,1,y),A=t(A,2,_),A=t(A,3,b),A=t(A,4,x),A=t(A,5,E),A=t(A,6,w),A=t(A,7,T),c.push(A),c.push(v.a,v.b,v.c),c.push(v.materialIndex),b){var S=this.faceVertexUvs[0][h];c.push(n(S[0]),n(S[1]),n(S[2]))}if(x&&c.push(e(v.normal)),E){var M=v.vertexNormals;c.push(e(M[0]),e(M[1]),e(M[2]))}if(w&&c.push(i(v.color)),T){var P=v.vertexColors;c.push(i(P[0]),i(P[1]),i(P[2]))}}return r.data={},r.data.vertices=a,r.data.normals=u,f.length>0&&(r.data.colors=f),m.length>0&&(r.data.uvs=[m]),r.data.faces=c,r},clone:function(){return(new St).copy(this)},copy:function(t){var e,i,n,r,s,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var a=t.vertices;for(e=0,i=a.length;e<i;e++)this.vertices.push(a[e].clone());var h=t.colors;for(e=0,i=h.length;e<i;e++)this.colors.push(h[e].clone());var l=t.faces;for(e=0,i=l.length;e<i;e++)this.faces.push(l[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,r=c.length;n<r;n++){var u=c[n],p=[];for(s=0,o=u.length;s<o;s++){var f=u[s];p.push(f.clone())}this.faceVertexUvs[e].push(p)}}var d=t.morphTargets;for(e=0,i=d.length;e<i;e++){var m={};if(m.name=d[e].name,void 0!==d[e].vertices)for(m.vertices=[],n=0,r=d[e].vertices.length;n<r;n++)m.vertices.push(d[e].vertices[n].clone());if(void 0!==d[e].normals)for(m.normals=[],n=0,r=d[e].normals.length;n<r;n++)m.normals.push(d[e].normals[n].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,i=g.length;e<i;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],n=0,r=g[e].vertexNormals.length;n<r;n++){var y=g[e].vertexNormals[n],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),v.vertexNormals.push(_)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],n=0,r=g[e].faceNormals.length;n<r;n++)v.faceNormals.push(g[e].faceNormals[n].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,i=b.length;e<i;e++)this.skinWeights.push(b[e].clone());var x=t.skinIndices;for(e=0,i=x.length;e<i;e++)this.skinIndices.push(x[e].clone());var E=t.lineDistances;for(e=0,i=E.length;e<i;e++)this.lineDistances.push(E[e]);var w=t.boundingBox;null!==w&&(this.boundingBox=w.clone());var T=t.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(St.prototype,e.prototype),Mt.prototype={constructor:Mt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Tt(t)>65535?bt:yt)(t,1):this.index=t},addAttribute:function(t,e){return(e&&e.isBufferAttribute)===!1&&(e&&e.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new ft(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var n=(new et).getNormalMatrix(t);n.applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new l),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new l),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ht),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new xt(3*e.vertices.length,3),n=new xt(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new xt(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}var n;return e.verticesNeedUpdate===!0&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new wt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new ft(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new ft(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new ft(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new ft(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new ft(s,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=Tt(t.indices)>65535?Uint32Array:Uint16Array,a=new o(3*t.indices.length);this.setIndex(new ft(a,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var h in t.morphTargets){for(var l=[],c=t.morphTargets[h],u=0,p=c.length;u<p;u++){var f=c[u],d=new xt(3*f.length,3);l.push(d.copyVector3sArray(f))}this.morphAttributes[h]=l}if(t.skinIndices.length>0){var m=new xt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new xt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new K,e=new h;return function(){null===this.boundingSphere&&(this.boundingSphere=new tt);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(n);for(var r=0,s=0,o=i.count;s<o;s++)e.x=i.getX(s),e.y=i.getY(s),e.z=i.getZ(s),r=Math.max(r,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new ft(new Float32Array(n.length),3));else for(var r=e.normal.array,s=0,o=r.length;s<o;s++)r[s]=0;var a,l,c,u=e.normal.array,p=new h,f=new h,d=new h,m=new h,g=new h;if(t){var v=t.array;0===i.length&&this.addGroup(0,v.length);for(var y=0,_=i.length;y<_;++y)for(var b=i[y],x=b.start,E=b.count,s=x,o=x+E;s<o;s+=3)a=3*v[s+0],l=3*v[s+1],c=3*v[s+2],p.fromArray(n,a),f.fromArray(n,l),d.fromArray(n,c),m.subVectors(d,f),g.subVectors(p,f),m.cross(g),u[a]+=m.x,u[a+1]+=m.y,u[a+2]+=m.z,u[l]+=m.x,u[l+1]+=m.y,u[l+2]+=m.z,u[c]+=m.x,u[c+1]+=m.y,u[c+2]+=m.z}else for(var s=0,o=n.length;s<o;s+=9)p.fromArray(n,s),f.fromArray(n,s+3),d.fromArray(n,s+6),m.subVectors(d,f),g.subVectors(p,f),m.cross(g),u[s]=m.x,u[s+1]=m.y,u[s+2]=m.z,u[s+3]=m.x,u[s+4]=m.y,u[s+5]=m.z,u[s+6]=m.x,u[s+7]=m.y,u[s+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if((t&&t.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],s=r.array,o=t.attributes[n],a=o.array,h=o.itemSize,l=0,c=h*e;l<a.length;l++,c++)s[c]=a[l];return this},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,s=0,o=r.length;s<o;s+=3)t=r[s],e=r[s+1],i=r[s+2],n=1/Math.sqrt(t*t+e*e+i*i),r[s]*=n,r[s+1]*=n,r[s+2]*=n},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Mt,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],s=r.array,o=r.itemSize,a=new s.constructor(e.length*o),h=0,l=0,c=0,u=e.length;c<u;c++){h=e[c]*o;for(var p=0;p<o;p++)a[l++]=s[h++]}t.addAttribute(n,new ft(a,o))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var s=this.attributes;for(var i in s){var o=s[i],r=Array.prototype.slice.call(o.array);t.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var h=this.boundingSphere;return null!==h&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t},clone:function(){return(new Mt).copy(this)},copy:function(t){var e,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var s=t.attributes;for(e in s){var o=s[e];this.addAttribute(e,o.clone())}var a=t.morphAttributes;for(e in a){var h=[],l=a[e];for(i=0,n=l.length;i<n;i++)h.push(l[i].clone());this.morphAttributes[e]=h}var c=t.groups;for(i=0,n=c.length;i<n;i++){var u=c[i];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var f=t.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Mt.MaxIndex=65535,Object.assign(Mt.prototype,e.prototype),Pt.prototype=Object.assign(Object.create(ht.prototype),{constructor:Pt,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ht.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,i,n,r,s,o){return ct.barycoordFromPoint(t,e,i,n,y),r.multiplyScalar(y.x),s.multiplyScalar(y.y),o.multiplyScalar(y.z),r.add(s).add(o),r.clone()}function e(t,e,i,n,r,s,o){var a,h=t.material;if(a=h.side===ss?i.intersectTriangle(s,r,n,!0,o):i.intersectTriangle(n,r,s,h.side!==os,o),null===a)return null;b.copy(o),b.applyMatrix4(t.matrixWorld);var l=e.ray.origin.distanceTo(b);return l<e.near||l>e.far?null:{distance:l,point:b.clone(),object:t}}function n(i,n,r,s,o,h,l,p){a.fromBufferAttribute(s,h),c.fromBufferAttribute(s,l),u.fromBufferAttribute(s,p);var f=e(i,n,r,a,c,u,_);return f&&(o&&(m.fromBufferAttribute(o,h),g.fromBufferAttribute(o,l),v.fromBufferAttribute(o,p),f.uv=t(_,a,c,u,m,g,v)),f.face=new ut(h,l,p,ct.normal(a,c,u)),f.faceIndex=h),f}var r=new l,s=new st,o=new tt,a=new h,c=new h,u=new h,p=new h,f=new h,d=new h,m=new i,g=new i,v=new i,y=new h,_=new h,b=new h;return function(i,h){var l=this.geometry,y=this.material,b=this.matrixWorld;if(void 0!==y&&(null===l.boundingSphere&&l.computeBoundingSphere(),o.copy(l.boundingSphere),o.applyMatrix4(b),i.ray.intersectsSphere(o)!==!1&&(r.getInverse(b),s.copy(i.ray).applyMatrix4(r),null===l.boundingBox||s.intersectsBox(l.boundingBox)!==!1))){var x;if(l.isBufferGeometry){var E,w,T,A,S,M=l.index,P=l.attributes.position,C=l.attributes.uv;if(null!==M)for(A=0,S=M.count;A<S;A+=3)E=M.getX(A),w=M.getX(A+1),T=M.getX(A+2),x=n(this,i,s,P,C,E,w,T),x&&(x.faceIndex=Math.floor(A/3),h.push(x));else for(A=0,S=P.count;A<S;A+=3)E=A,w=A+1,T=A+2,x=n(this,i,s,P,C,E,w,T),x&&(x.index=E,h.push(x))}else if(l.isGeometry){var R,I,O,N,L=y&&y.isMultiMaterial,k=L===!0?y.materials:null,D=l.vertices,F=l.faces,B=l.faceVertexUvs[0];B.length>0&&(N=B);for(var U=0,V=F.length;U<V;U++){var z=F[U],G=L===!0?k[z.materialIndex]:y;if(void 0!==G){if(R=D[z.a],I=D[z.b],O=D[z.c],G.morphTargets===!0){var j=l.morphTargets,H=this.morphTargetInfluences;a.set(0,0,0),c.set(0,0,0),u.set(0,0,0);for(var W=0,Y=j.length;W<Y;W++){var q=H[W];if(0!==q){var X=j[W].vertices;a.addScaledVector(p.subVectors(X[z.a],R),q),c.addScaledVector(f.subVectors(X[z.b],I),q),u.addScaledVector(d.subVectors(X[z.c],O),q)}}a.add(R),c.add(I),u.add(O),R=a,I=c,O=u}if(x=e(this,i,s,R,I,O,_)){if(N){var Z=N[U];m.copy(Z[0]),g.copy(Z[1]),v.copy(Z[2]),x.uv=t(_,R,I,O,m,g,v)}x.face=z,x.faceIndex=U,h.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ct.prototype=Object.create(St.prototype),Ct.prototype.constructor=Ct,Rt.prototype=Object.create(Mt.prototype),Rt.prototype.constructor=Rt,It.prototype=Object.create(St.prototype),It.prototype.constructor=It,Ot.prototype=Object.create(Mt.prototype),Ot.prototype.constructor=Ot,Nt.prototype=Object.create(ht.prototype),Nt.prototype.constructor=Nt,Nt.prototype.isCamera=!0,Nt.prototype.getWorldDirection=function(){var t=new a;return function(e){var i=e||new h;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),Nt.prototype.lookAt=function(){var t=new l;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Nt.prototype.clone=function(){return(new this.constructor).copy(this)},Nt.prototype.copy=function(t){return ht.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Lt.prototype=Object.assign(Object.create(Nt.prototype),{constructor:Lt,isPerspectiveCamera:!0,copy:function(t){return Nt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*ua.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ua.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ua.RAD2DEG*Math.atan(Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,s){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:s},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,s=this.view;if(null!==s){var o=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/o,e-=s.offsetY*i/a,n*=s.width/o,i*=s.height/a}var h=this.filmOffset;0!==h&&(r+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far)},toJSON:function(t){var e=ht.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),kt.prototype=Object.assign(Object.create(Nt.prototype),{constructor:kt,isOrthographicCamera:!0,copy:function(t){return Nt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,s){this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:s},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,s=i+t,o=n+e,a=n-e;if(null!==this.view){var h=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/h),s=r+c*(this.view.width/h),o-=u*(this.view.offsetY/l),a=o-u*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far)},toJSON:function(t){var e=ht.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var Sl=0;le.prototype.isFogExp2=!0,le.prototype.clone=function(){return new le(this.color.getHex(),this.density)},le.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ce.prototype.isFog=!0,ce.prototype.clone=function(){return new ce(this.color.getHex(),this.near,this.far)},ce.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ue.prototype=Object.create(ht.prototype),ue.prototype.constructor=ue,ue.prototype.copy=function(t,e){return ht.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},ue.prototype.toJSON=function(t){var e=ht.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},pe.prototype=Object.assign(Object.create(ht.prototype),{constructor:pe,isLensFlare:!0,copy:function(t){ht.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,i=t.lensFlares.length;e<i;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,i,n,r,s){void 0===e&&(e=-1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=new W(16777215)),void 0===n&&(n=fs),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:t,size:e,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:s,color:r,blending:n})},updateLensFlares:function(){var t,e,i=this.lensFlares.length,n=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<i;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),fe.prototype=Object.create(Q.prototype),fe.prototype.constructor=fe,fe.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},de.prototype=Object.assign(Object.create(ht.prototype),{constructor:de,isSprite:!0,raycast:function(){var t=new h;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t),r=this.scale.x*this.scale.y/4;n>r||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),me.prototype=Object.assign(Object.create(ht.prototype),{constructor:me,copy:function(t){ht.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,n=e.length;i<n;i++){var r=e[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);i.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(){var t=new h;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),update:function(){var t=new h,e=new h;return function(i){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);n[0].object.visible=!0;for(var s=1,o=n.length;s<o&&r>=n[s].distance;s++)n[s-1].object.visible=!1,n[s].object.visible=!0;for(;s<o;s++)n[s].object.visible=!1}}}(),toJSON:function(t){var e=ht.prototype.toJSON.call(this,t);e.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var s=i[n];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}}),Object.assign(ge.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new l;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){for(var t,e=0,i=this.bones.length;e<i;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,i=this.bones.length;e<i;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new l;return function(){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(n,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ge(this.bones,this.boneInverses,this.useVertexTexture)}}),ve.prototype=Object.assign(Object.create(ht.prototype),{constructor:ve,isBone:!0}),ye.prototype=Object.assign(Object.create(Pt.prototype),{constructor:ye,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],i=1/e.lengthManhattan();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var n=new r,s=this.geometry.attributes.skinWeight,t=0;t<s.count;t++){n.x=s.getX(t),n.y=s.getY(t),n.z=s.getZ(t),n.w=s.getW(t);var i=1/n.lengthManhattan();i!==1/0?n.multiplyScalar(i):n.set(1,0,0,0),s.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){Pt.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_e.prototype=Object.create(Q.prototype),_e.prototype.constructor=_e,_e.prototype.isLineBasicMaterial=!0,_e.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},be.prototype=Object.assign(Object.create(ht.prototype),{constructor:be,isLine:!0,raycast:function(){var t=new l,e=new st,i=new tt;return function(n,r){var s=n.linePrecision,o=s*s,a=this.geometry,l=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(l),n.ray.intersectsSphere(i)!==!1){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var c=new h,u=new h,p=new h,f=new h,d=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,g=a.attributes,v=g.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length-1;_<b;_+=d){var x=y[_],E=y[_+1];c.fromArray(v,3*x),u.fromArray(v,3*E);var w=e.distanceSqToSegment(c,u,f,p);if(!(w>o)){f.applyMatrix4(this.matrixWorld);var T=n.ray.origin.distanceTo(f);T<n.near||T>n.far||r.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=v.length/3-1;_<b;_+=d){c.fromArray(v,3*_),u.fromArray(v,3*_+3);var w=e.distanceSqToSegment(c,u,f,p);if(!(w>o)){f.applyMatrix4(this.matrixWorld);var T=n.ray.origin.distanceTo(f);T<n.near||T>n.far||r.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(a.isGeometry)for(var A=a.vertices,S=A.length,_=0;_<S-1;_+=d){var w=e.distanceSqToSegment(A[_],A[_+1],f,p);if(!(w>o)){f.applyMatrix4(this.matrixWorld);var T=n.ray.origin.distanceTo(f);T<n.near||T>n.far||r.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xe.prototype=Object.assign(Object.create(be.prototype),{constructor:xe,isLineSegments:!0}),Ee.prototype=Object.create(Q.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isPointsMaterial=!0,Ee.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},we.prototype=Object.assign(Object.create(ht.prototype),{constructor:we,isPoints:!0,raycast:function(){var t=new l,e=new st,i=new tt;return function(n,r){function s(t,i){var s=e.distanceSqToPoint(t);if(s<p){var a=e.closestPointToPoint(t);a.applyMatrix4(l);var h=n.ray.origin.distanceTo(a);if(h<n.near||h>n.far)return;r.push({distance:h,distanceToRay:Math.sqrt(s),point:a.clone(),index:i,face:null,object:o})}}var o=this,a=this.geometry,l=this.matrixWorld,c=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(l),n.ray.intersectsSphere(i)!==!1){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3),p=u*u,f=new h;if(a.isBufferGeometry){var d=a.index,m=a.attributes,g=m.position.array;if(null!==d)for(var v=d.array,y=0,_=v.length;y<_;y++){var b=v[y];f.fromArray(g,3*b),s(f,b)}else for(var y=0,x=g.length/3;y<x;y++)f.fromArray(g,3*y),s(f,y)}else for(var E=a.vertices,y=0,x=E.length;y<x;y++)s(E[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Te.prototype=Object.assign(Object.create(ht.prototype),{constructor:Te}),Ae.prototype=Object.create(n.prototype),Ae.prototype.constructor=Ae,Se.prototype=Object.create(n.prototype),Se.prototype.constructor=Se,Se.prototype.isCompressedTexture=!0,Me.prototype=Object.create(n.prototype),Me.prototype.constructor=Me,
Pe.prototype=Object.create(n.prototype),Pe.prototype.constructor=Pe,Pe.prototype.isDepthTexture=!0,Ce.prototype=Object.create(Mt.prototype),Ce.prototype.constructor=Ce,Re.prototype=Object.create(St.prototype),Re.prototype.constructor=Re,Ie.prototype=Object.create(Mt.prototype),Ie.prototype.constructor=Ie,Oe.prototype=Object.create(St.prototype),Oe.prototype.constructor=Oe,Ne.prototype=Object.create(Mt.prototype),Ne.prototype.constructor=Ne,Le.prototype=Object.create(St.prototype),Le.prototype.constructor=Le,ke.prototype=Object.create(Ne.prototype),ke.prototype.constructor=ke,De.prototype=Object.create(St.prototype),De.prototype.constructor=De,Fe.prototype=Object.create(Ne.prototype),Fe.prototype.constructor=Fe,Be.prototype=Object.create(St.prototype),Be.prototype.constructor=Be,Ue.prototype=Object.create(Ne.prototype),Ue.prototype.constructor=Ue,Ve.prototype=Object.create(St.prototype),Ve.prototype.constructor=Ve,ze.prototype=Object.create(Ne.prototype),ze.prototype.constructor=ze,Ge.prototype=Object.create(St.prototype),Ge.prototype.constructor=Ge,je.prototype=Object.create(Mt.prototype),je.prototype.constructor=je,He.prototype=Object.create(St.prototype),He.prototype.constructor=He,We.prototype=Object.create(Mt.prototype),We.prototype.constructor=We,Ye.prototype=Object.create(St.prototype),Ye.prototype.constructor=Ye,qe.prototype=Object.create(Mt.prototype),qe.prototype.constructor=qe;var Ml={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,s){var o,a,h,l,c,u,p,f,d;if(a=t[s[e]].x,h=t[s[e]].y,l=t[s[i]].x,c=t[s[i]].y,u=t[s[n]].x,p=t[s[n]].y,(l-a)*(p-h)-(c-h)*(u-a)<=0)return!1;var m,g,v,y,_,b,x,E,w,T,A,S,M,P,C;for(m=u-l,g=p-c,v=a-u,y=h-p,_=l-a,b=c-h,o=0;o<r;o++)if(f=t[s[o]].x,d=t[s[o]].y,!(f===a&&d===h||f===l&&d===c||f===u&&d===p)&&(x=f-a,E=d-h,w=f-l,T=d-c,A=f-u,S=d-p,C=m*T-g*w,M=_*E-b*x,P=v*S-y*A,C>=-Number.EPSILON&&P>=-Number.EPSILON&&M>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(n<3)return null;var r,s,o,a=[],h=[],l=[];if(Ml.area(e)>0)for(s=0;s<n;s++)h[s]=s;else for(s=0;s<n;s++)h[s]=n-1-s;var c=n,u=2*c;for(s=c-1;c>2;){if(u--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),i?l:a;if(r=s,c<=r&&(r=0),s=r+1,c<=s&&(s=0),o=s+1,c<=o&&(o=0),t(e,r,s,o,c,h)){var p,f,d,m,g;for(p=h[r],f=h[s],d=h[o],a.push([e[p],e[f],e[d]]),l.push([h[r],h[s],h[o]]),m=s,g=s+1;g<c;m++,g++)h[m]=h[g];c--,u=2*c}}return i?l:a}}(),triangulateShape:function(t,e){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,s){var o=e.x-t.x,a=e.y-t.y,h=r.x-i.x,l=r.y-i.y,c=t.x-i.x,u=t.y-i.y,p=a*h-o*l,f=a*c-o*u;if(Math.abs(p)>Number.EPSILON){var d;if(p>0){if(f<0||f>p)return[];if(d=l*c-h*u,d<0||d>p)return[]}else{if(f>0||f<p)return[];if(d=l*c-h*u,d>0||d<p)return[]}if(0===d)return!s||0!==f&&f!==p?[t]:[];if(d===p)return!s||0!==f&&f!==p?[e]:[];if(0===f)return[i];if(f===p)return[r];var m=d/p;return[{x:t.x+m*o,y:t.y+m*a}]}if(0!==f||l*c!==h*u)return[];var g=0===o&&0===a,v=0===h&&0===l;if(g&&v)return t.x!==i.x||t.y!==i.y?[]:[t];if(g)return n(i,r,t)?[t]:[];if(v)return n(t,e,i)?[i]:[];var y,_,b,x,E,w,T,A;return 0!==o?(t.x<e.x?(y=t,b=t.x,_=e,x=e.x):(y=e,b=e.x,_=t,x=t.x),i.x<r.x?(E=i,T=i.x,w=r,A=r.x):(E=r,T=r.x,w=i,A=i.x)):(t.y<e.y?(y=t,b=t.y,_=e,x=e.y):(y=e,b=e.y,_=t,x=t.y),i.y<r.y?(E=i,T=i.y,w=r,A=r.y):(E=r,T=r.y,w=i,A=i.y)),b<=T?x<T?[]:x===T?s?[]:[E]:x<=A?[E,_]:[E,w]:b>A?[]:b===A?s?[]:[y]:x<=A?[y,_]:[y,w]}function s(t,e,i,n){var r=e.x-t.x,s=e.y-t.y,o=i.x-t.x,a=i.y-t.y,h=n.x-t.x,l=n.y-t.y,c=r*a-s*o,u=r*l-s*h;if(Math.abs(c)>Number.EPSILON){var p=h*a-l*o;return c>0?u>=0&&p>=0:u>=0||p>=0}return u>0}function o(t,e){function i(t,e){var i=y.length-1,n=t-1;n<0&&(n=i);var r=t+1;r>i&&(r=0);var o=s(y[t],y[n],y[r],a[e]);if(!o)return!1;var h=a.length-1,l=e-1;l<0&&(l=h);var c=e+1;return c>h&&(c=0),o=s(a[e],a[l],a[c],y[t]),!!o}function n(t,e){var i,n,s;for(i=0;i<y.length;i++)if(n=i+1,n%=y.length,s=r(t,e,y[i],y[n],!0),s.length>0)return!0;return!1}function o(t,i){var n,s,o,a,h;for(n=0;n<_.length;n++)for(s=e[_[n]],o=0;o<s.length;o++)if(a=o+1,a%=s.length,h=r(t,i,s[o],s[a],!0),h.length>0)return!0;return!1}for(var a,h,l,c,u,p,f,d,m,g,v,y=t.concat(),_=[],b=[],x=0,E=e.length;x<E;x++)_.push(x);for(var w=0,T=2*_.length;_.length>0;){if(T--,T<0){console.log("Infinite Loop! Holes left:"+_.length+", Probably Hole outside Shape!");break}for(l=w;l<y.length;l++){c=y[l],h=-1;for(var x=0;x<_.length;x++)if(p=_[x],f=c.x+":"+c.y+":"+p,void 0===b[f]){a=e[p];for(var A=0;A<a.length;A++)if(u=a[A],i(l,A)&&!n(c,u)&&!o(c,u)){h=A,_.splice(x,1),d=y.slice(0,l+1),m=y.slice(l),g=a.slice(h),v=a.slice(0,h+1),y=d.concat(g).concat(v).concat(m),w=l;break}if(h>=0)break;b[f]=!0}if(h>=0)break}}return y}i(t),e.forEach(i);for(var a,h,l,c,u,p,f={},d=t.concat(),m=0,g=e.length;m<g;m++)Array.prototype.push.apply(d,e[m]);for(a=0,h=d.length;a<h;a++)u=d[a].x+":"+d[a].y,void 0!==f[u]&&console.warn("THREE.ShapeUtils: Duplicate point",u,a),f[u]=a;var v=o(t,e),y=Ml.triangulate(v,!1);for(a=0,h=y.length;a<h;a++)for(c=y[a],l=0;l<3;l++)u=c[l].x+":"+c[l].y,p=f[u],void 0!==p&&(c[l]=p);return y.concat()},isClockWise:function(t){return Ml.area(t)<0}};Xe.prototype=Object.create(St.prototype),Xe.prototype.constructor=Xe,Xe.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];this.addShape(r,e)}},Xe.prototype.addShape=function(t,e){function n(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function r(t,e,n){var r,s,o=1,a=t.x-e.x,h=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+h*h,p=a*c-h*l;if(Math.abs(p)>Number.EPSILON){var f=Math.sqrt(u),d=Math.sqrt(l*l+c*c),m=e.x-h/f,g=e.y+a/f,v=n.x-c/d,y=n.y+l/d,_=((v-m)*c-(y-g)*l)/(a*c-h*l);r=m+a*_-t.x,s=g+h*_-t.y;var b=r*r+s*s;if(b<=2)return new i(r,s);o=Math.sqrt(b/2)}else{var x=!1;a>Number.EPSILON?l>Number.EPSILON&&(x=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(h)===Math.sign(c)&&(x=!0),x?(r=-h,s=a,o=Math.sqrt(u)):(r=a,s=h,o=Math.sqrt(u/2))}return new i(r/o,s/o)}function s(){if(x){var t=0,e=H*t;for(q=0;q<W;q++)j=D[q],c(j[2]+e,j[1]+e,j[0]+e);for(t=w+2*b,e=H*t,q=0;q<W;q++)j=D[q],c(j[0]+e,j[1]+e,j[2]+e)}else{for(q=0;q<W;q++)j=D[q],c(j[2],j[1],j[0]);for(q=0;q<W;q++)j=D[q],c(j[0]+H*w,j[1]+H*w,j[2]+H*w)}}function o(){var t=0;for(a(F,t),t+=F.length,P=0,C=L.length;P<C;P++)M=L[P],a(M,t),t+=M.length}function a(t,e){var i,n;for(q=t.length;--q>=0;){i=q,n=q-1,n<0&&(n=t.length-1);var r=0,s=w+2*b;for(r=0;r<s;r++){var o=H*r,a=H*(r+1),h=e+i+o,l=e+n+o,c=e+n+a,p=e+i+a;u(h,l,c,p,t,r,s,i,n)}}}function l(t,e,i){R.vertices.push(new h(t,e,i))}function c(t,e,i){t+=I,e+=I,i+=I,R.faces.push(new ut(t,e,i,null,null,0));var n=S.generateTopUV(R,t,e,i);R.faceVertexUvs[0].push(n)}function u(t,e,i,n,r,s,o,a,h){t+=I,e+=I,i+=I,n+=I,R.faces.push(new ut(t,e,n,null,null,1)),R.faces.push(new ut(e,i,n,null,null,1));var l=S.generateSideWallUV(R,t,e,i,n);R.faceVertexUvs[0].push([l[0],l[1],l[3]]),R.faceVertexUvs[0].push([l[1],l[2],l[3]])}var p,f,d,m,g,v=void 0!==e.amount?e.amount:100,y=void 0!==e.bevelThickness?e.bevelThickness:6,_=void 0!==e.bevelSize?e.bevelSize:y-2,b=void 0!==e.bevelSegments?e.bevelSegments:3,x=void 0===e.bevelEnabled||e.bevelEnabled,E=void 0!==e.curveSegments?e.curveSegments:12,w=void 0!==e.steps?e.steps:1,T=e.extrudePath,A=!1,S=void 0!==e.UVGenerator?e.UVGenerator:Xe.WorldUVGenerator;T&&(p=T.getSpacedPoints(w),A=!0,x=!1,f=void 0!==e.frames?e.frames:T.computeFrenetFrames(w,!1),d=new h,m=new h,g=new h),x||(b=0,y=0,_=0);var M,P,C,R=this,I=this.vertices.length,O=t.extractPoints(E),N=O.shape,L=O.holes,k=!Ml.isClockWise(N);if(k){for(N=N.reverse(),P=0,C=L.length;P<C;P++)M=L[P],Ml.isClockWise(M)&&(L[P]=M.reverse());k=!1}var D=Ml.triangulateShape(N,L),F=N;for(P=0,C=L.length;P<C;P++)M=L[P],N=N.concat(M);for(var B,U,V,z,G,j,H=N.length,W=D.length,Y=[],q=0,X=F.length,Z=X-1,Q=q+1;q<X;q++,Z++,Q++)Z===X&&(Z=0),Q===X&&(Q=0),Y[q]=r(F[q],F[Z],F[Q]);var J,$=[],K=Y.concat();for(P=0,C=L.length;P<C;P++){for(M=L[P],J=[],q=0,X=M.length,Z=X-1,Q=q+1;q<X;q++,Z++,Q++)Z===X&&(Z=0),Q===X&&(Q=0),J[q]=r(M[q],M[Z],M[Q]);$.push(J),K=K.concat(J)}for(B=0;B<b;B++){for(V=B/b,z=y*Math.cos(V*Math.PI/2),U=_*Math.sin(V*Math.PI/2),q=0,X=F.length;q<X;q++)G=n(F[q],Y[q],U),l(G.x,G.y,-z);for(P=0,C=L.length;P<C;P++)for(M=L[P],J=$[P],q=0,X=M.length;q<X;q++)G=n(M[q],J[q],U),l(G.x,G.y,-z)}for(U=_,q=0;q<H;q++)G=x?n(N[q],K[q],U):N[q],A?(m.copy(f.normals[0]).multiplyScalar(G.x),d.copy(f.binormals[0]).multiplyScalar(G.y),g.copy(p[0]).add(m).add(d),l(g.x,g.y,g.z)):l(G.x,G.y,0);var tt;for(tt=1;tt<=w;tt++)for(q=0;q<H;q++)G=x?n(N[q],K[q],U):N[q],A?(m.copy(f.normals[tt]).multiplyScalar(G.x),d.copy(f.binormals[tt]).multiplyScalar(G.y),g.copy(p[tt]).add(m).add(d),l(g.x,g.y,g.z)):l(G.x,G.y,v/w*tt);for(B=b-1;B>=0;B--){for(V=B/b,z=y*Math.cos(V*Math.PI/2),U=_*Math.sin(V*Math.PI/2),q=0,X=F.length;q<X;q++)G=n(F[q],Y[q],U),l(G.x,G.y,v+z);for(P=0,C=L.length;P<C;P++)for(M=L[P],J=$[P],q=0,X=M.length;q<X;q++)G=n(M[q],J[q],U),A?l(G.x,G.y+p[w-1].y,p[w-1].x+z):l(G.x,G.y,v+z)}s(),o()},Xe.WorldUVGenerator={generateTopUV:function(t,e,n,r){var s=t.vertices,o=s[e],a=s[n],h=s[r];return[new i(o.x,o.y),new i(a.x,a.y),new i(h.x,h.y)]},generateSideWallUV:function(t,e,n,r,s){var o=t.vertices,a=o[e],h=o[n],l=o[r],c=o[s];return Math.abs(a.y-h.y)<.01?[new i(a.x,1-a.z),new i(h.x,1-h.z),new i(l.x,1-l.z),new i(c.x,1-c.z)]:[new i(a.y,1-a.z),new i(h.y,1-h.z),new i(l.y,1-l.z),new i(c.y,1-c.z)]}},Ze.prototype=Object.create(Xe.prototype),Ze.prototype.constructor=Ze,Qe.prototype=Object.create(St.prototype),Qe.prototype.constructor=Qe,Je.prototype=Object.create(Mt.prototype),Je.prototype.constructor=Je,$e.prototype=Object.create(St.prototype),$e.prototype.constructor=$e,Ke.prototype=Object.create(Mt.prototype),Ke.prototype.constructor=Ke,ti.prototype=Object.create(St.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(Mt.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(St.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(Mt.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(Mt.prototype),ri.prototype.constructor=ri,si.prototype=Object.create(St.prototype),si.prototype.constructor=si,oi.prototype=Object.create(Mt.prototype),oi.prototype.constructor=oi,ai.prototype=Object.create(si.prototype),ai.prototype.constructor=ai,hi.prototype=Object.create(oi.prototype),hi.prototype.constructor=hi,li.prototype=Object.create(St.prototype),li.prototype.constructor=li,ci.prototype=Object.create(Mt.prototype),ci.prototype.constructor=ci;var Pl=Object.freeze({WireframeGeometry:Ce,ParametricGeometry:Re,ParametricBufferGeometry:Ie,TetrahedronGeometry:Le,TetrahedronBufferGeometry:ke,OctahedronGeometry:De,OctahedronBufferGeometry:Fe,IcosahedronGeometry:Be,IcosahedronBufferGeometry:Ue,DodecahedronGeometry:Ve,DodecahedronBufferGeometry:ze,PolyhedronGeometry:Oe,PolyhedronBufferGeometry:Ne,TubeGeometry:Ge,TubeBufferGeometry:je,TorusKnotGeometry:He,TorusKnotBufferGeometry:We,TorusGeometry:Ye,TorusBufferGeometry:qe,TextGeometry:Ze,SphereGeometry:Qe,SphereBufferGeometry:Je,RingGeometry:$e,RingBufferGeometry:Ke,PlaneGeometry:It,PlaneBufferGeometry:Ot,LatheGeometry:ti,LatheBufferGeometry:ei,ShapeGeometry:ii,ShapeBufferGeometry:ni,ExtrudeGeometry:Xe,EdgesGeometry:ri,ConeGeometry:ai,ConeBufferGeometry:hi,CylinderGeometry:si,CylinderBufferGeometry:oi,CircleGeometry:li,CircleBufferGeometry:ci,BoxGeometry:Ct,BoxBufferGeometry:Rt});ui.prototype=Object.create(J.prototype),ui.prototype.constructor=ui,ui.prototype.isShadowMaterial=!0,pi.prototype=Object.create(J.prototype),pi.prototype.constructor=pi,pi.prototype.isRawShaderMaterial=!0,fi.prototype={constructor:fi,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,n=0,r=i.length;n<r;n++){var s=i[n].toJSON(t);delete s.metadata,e.materials.push(s)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},di.prototype=Object.create(Q.prototype),di.prototype.constructor=di,di.prototype.isMeshStandardMaterial=!0,di.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},mi.prototype=Object.create(di.prototype),mi.prototype.constructor=mi,mi.prototype.isMeshPhysicalMaterial=!0,mi.prototype.copy=function(t){return di.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},gi.prototype=Object.create(Q.prototype),gi.prototype.constructor=gi,gi.prototype.isMeshPhongMaterial=!0,gi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vi.prototype=Object.create(gi.prototype),vi.prototype.constructor=vi,vi.prototype.isMeshToonMaterial=!0,vi.prototype.copy=function(t){return gi.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},yi.prototype=Object.create(Q.prototype),yi.prototype.constructor=yi,yi.prototype.isMeshNormalMaterial=!0,yi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_i.prototype=Object.create(Q.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshLambertMaterial=!0,_i.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bi.prototype=Object.create(Q.prototype),bi.prototype.constructor=bi,bi.prototype.isLineDashedMaterial=!0,bi.prototype.copy=function(t){return Q.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Cl=Object.freeze({ShadowMaterial:ui,SpriteMaterial:fe,RawShaderMaterial:pi,ShaderMaterial:J,PointsMaterial:Ee,MultiMaterial:fi,MeshPhysicalMaterial:mi,MeshStandardMaterial:di,MeshPhongMaterial:gi,MeshToonMaterial:vi,MeshNormalMaterial:yi,MeshLambertMaterial:_i,MeshDepthMaterial:$,MeshBasicMaterial:pt,LineDashedMaterial:bi,LineBasicMaterial:_e,Material:Q}),Rl={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Il=new xi;Object.assign(Ei.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,s=Rl.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;var o=/^data:(.*?)(;base64)?,(.*)$/,a=t.match(o);if(a){var h=a[1],l=!!a[2],c=a[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var u,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":u=new ArrayBuffer(c.length);for(var f=new Uint8Array(u),d=0;d<c.length;d++)f[d]=c.charCodeAt(d);"blob"===p&&(u=new Blob([u],{type:h}));break;case"document":var m=new DOMParser;u=m.parseFromString(c,h);break;case"json":u=JSON.parse(c);break;default:u=c}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(g){window.setTimeout(function(){n&&n(g),r.manager.itemError(t)},0)}}else{var v=new XMLHttpRequest;v.open("GET",t,!0),v.addEventListener("load",function(i){var s=i.target.response;Rl.add(t,s),200===this.status?(e&&e(s),r.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(s),r.manager.itemEnd(t)):(n&&n(i),r.manager.itemError(t))},!1),void 0!==i&&v.addEventListener("progress",function(t){i(t)},!1),v.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),v.send(null)}return r.manager.itemStart(t),v},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(wi.prototype,{load:function(t,e,i,n){function r(r){h.load(t[r],function(t){var i=s._parser(t,!0);o[r]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(a.minFilter=co),a.format=i.format,a.needsUpdate=!0,e&&e(a))},i,n)}var s=this,o=[],a=new Se;a.image=o;var h=new Ei(this.manager);if(h.setPath(this.path),h.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,u=t.length;c<u;++c)r(c);else h.load(t,function(t){var i=s._parser(t,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,r=0;r<n;r++){o[r]={mipmaps:[]};for(var h=0;h<i.mipmapCount;h++)o[r].mipmaps.push(i.mipmaps[r*i.mipmapCount+h]),o[r].format=i.format,o[r].width=i.width,o[r].height=i.height}else a.image.width=i.width,a.image.height=i.height,a.mipmaps=i.mipmaps;1===i.mipmapCount&&(a.minFilter=co),a.format=i.format,a.needsUpdate=!0,e&&e(a)},i,n);return a},setPath:function(t){return this.path=t,this}}),Object.assign(Ti.prototype,{load:function(t,e,i,n){var r=this,s=new Y,o=new Ei(this.manager);return o.setResponseType("arraybuffer"),o.load(t,function(t){var i=r._parser(t);i&&(void 0!==i.image?s.image=i.image:void 0!==i.data&&(s.image.width=i.width,s.image.height=i.height,s.image.data=i.data),s.wrapS=void 0!==i.wrapS?i.wrapS:so,s.wrapT=void 0!==i.wrapT?i.wrapT:so,s.magFilter=void 0!==i.magFilter?i.magFilter:co,s.minFilter=void 0!==i.minFilter?i.minFilter:po,s.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(s.format=i.format),void 0!==i.type&&(s.type=i.type),void 0!==i.mipmaps&&(s.mipmaps=i.mipmaps),1===i.mipmapCount&&(s.minFilter=co),s.needsUpdate=!0,e&&e(s,i))},i,n),s}}),Object.assign(Ai.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,s=Rl.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Rl.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),o.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Si.prototype,{load:function(t,e,i,n){function r(i){o.load(t[i],function(t){s.images[i]=t,a++,6===a&&(s.needsUpdate=!0,e&&e(s))},void 0,n)}var s=new c,o=new Ai(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,h=0;h<t.length;++h)r(h);return s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Mi.prototype,{load:function(t,e,i,r){var s=new n,o=new Ai(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);s.format=n?Mo:Po,s.image=i,s.needsUpdate=!0,void 0!==e&&e(s)},i,r),s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Pi.prototype=Object.assign(Object.create(ht.prototype),{constructor:Pi,isLight:!0,copy:function(t){return ht.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ht.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Ci.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ci,isHemisphereLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ri.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ii.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Ii,isSpotLightShadow:!0,update:function(t){var e=2*ua.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,n=t.distance||500,r=this.camera;e===r.fov&&i===r.aspect&&n===r.far||(r.fov=e,r.aspect=i,r.far=n,r.updateProjectionMatrix())}}),Oi.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Oi,isSpotLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ni.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ni,isPointLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Li.prototype=Object.assign(Object.create(Ri.prototype),{constructor:Li}),ki.prototype=Object.assign(Object.create(Pi.prototype),{constructor:ki,isDirectionalLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Di.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Di,isAmbientLight:!0});var Ol={arraySlice:function(t,e,i){return Ol.isTypedArray(t)?new t.constructor(t.subarray(e,i)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=r;return n.sort(e),n},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),s=0,o=0;o!==n;++s)for(var a=i[s]*e,h=0;h!==e;++h)r[o++]=t[a+h];return r},flattenJSON:function(t,e,i,n){for(var r=1,s=t[0];void 0!==s&&void 0===s[n];)s=t[r++];if(void 0!==s){var o=s[n];if(void 0!==o)if(Array.isArray(o)){do o=s[n],void 0!==o&&(e.push(s.time),i.push.apply(i,o)),s=t[r++];while(void 0!==s)}else if(void 0!==o.toArray){do o=s[n],void 0!==o&&(e.push(s.time),o.toArray(i,i.length)),s=t[r++];while(void 0!==s)}else do o=s[n],void 0!==o&&(e.push(s.time),i.push(o)),s=t[r++];while(void 0!==s)}}};Fi.prototype={constructor:Fi,evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var s;i:{n:if(!(t<n)){for(var o=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===o)break;if(r=n,n=e[++i],t<n)break e}s=e.length;break i}{if(t>=r)break t;var a=e[1];t<a&&(i=2,r=a);for(var o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===o)break;if(n=r,r=e[--i-1],t>=r)break e}s=i,i=0}}for(;i<s;){var h=i+s>>>1;t<e[h]?s=h:i=h+1}if(n=e[i],r=e[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,s=0;s!==n;++s)e[s]=i[r+s];return e},interpolate_:function(t,e,i,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,i){}},Object.assign(Fi.prototype,{beforeStart_:Fi.prototype.copySampleValue_,afterEnd_:Fi.prototype.copySampleValue_}),Bi.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Bi,DefaultSettings_:{endingStart:Zo,endingEnd:Zo},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,s=t+1,o=n[r],a=n[s];if(void 0===o)switch(this.getSettings_().endingStart){case Qo:r=t,o=2*e-i;break;case Jo:r=n.length-2,o=e+n[r]-n[r+1];break;default:r=t,o=i}if(void 0===a)switch(this.getSettings_().endingEnd){case Qo:s=t,a=2*i-e;break;case Jo:s=1,a=i+n[1]-n[0];break;default:s=t-1,a=e}var h=.5*(i-e),l=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(a-i),this._offsetPrev=r*l,this._offsetNext=s*l},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,p=this._weightNext,f=(i-e)/(n-e),d=f*f,m=d*f,g=-u*m+2*u*d-u*f,v=(1+u)*m+(-1.5-2*u)*d+(-.5+u)*f+1,y=(-1-p)*m+(1.5+p)*d+.5*f,_=p*m-p*d,b=0;b!==o;++b)r[b]=g*s[l+b]+v*s[h+b]+y*s[a+b]+_*s[c+b];return r}}),Ui.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Ui,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=(i-e)/(n-e),c=1-l,u=0;u!==o;++u)r[u]=s[h+u]*c+s[a+u]*l;return r}}),Vi.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Vi,interpolate_:function(t,e,i,n){return this.copySampleValue_(t-1)}});var Nl;Nl={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:qo,InterpolantFactoryMethodDiscrete:function(t){return new Vi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Ui(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Bi(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Yo:e=this.InterpolantFactoryMethodDiscrete;break;case qo:e=this.InterpolantFactoryMethodLinear;break;case Xo:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(i)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yo;case this.InterpolantFactoryMethodLinear:return qo;case this.InterpolantFactoryMethodSmooth:return Xo}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,s=n-1;r!==n&&i[r]<t;)++r;for(;s!==-1&&i[s]>e;)--s;if(++s,0!==r||s!==n){r>=s&&(s=Math.max(s,1),r=s-1);var o=this.getValueSize();this.times=Ol.arraySlice(i,r,s),this.values=Ol.arraySlice(this.values,r*o,s*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(console.error("track is empty",this),t=!1);for(var s=null,o=0;o!==r;o++){var a=i[o];if("number"==typeof a&&isNaN(a)){console.error("time is not a valid number",this,o,a),t=!1;break}if(null!==s&&s>a){console.error("out of order keys",this,o,a,s),t=!1;break}s=a}if(void 0!==n&&Ol.isTypedArray(n))for(var o=0,h=n.length;o!==h;++o){var l=n[o];if(isNaN(l)){console.error("value is not a valid number",this,o,l),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=this.getInterpolation()===Xo,r=1,s=t.length-1,o=1;o<s;++o){var a=!1,h=t[o],l=t[o+1];if(h!==l&&(1!==o||h!==h[0]))if(n)a=!0;else for(var c=o*i,u=c-i,p=c+i,f=0;f!==i;++f){var d=e[c+f];if(d!==e[u+f]||d!==e[p+f]){a=!0;break}}if(a){if(o!==r){t[r]=t[o];for(var m=o*i,g=r*i,f=0;f!==i;++f)e[g+f]=e[m+f]}++r}}if(s>0){t[r]=t[s];for(var m=s*i,g=r*i,f=0;f!==i;++f)e[g+f]=e[m+f];++r}return r!==t.length&&(this.times=Ol.arraySlice(t,0,r),this.values=Ol.arraySlice(e,0,r*i)),this}},Gi.prototype=Object.assign(Object.create(Nl),{constructor:Gi,ValueTypeName:"vector"}),ji.prototype=Object.assign(Object.create(Fi.prototype),{constructor:ji,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,h=t*o,l=(i-e)/(n-e),c=h+o;h!==c;h+=4)a.slerpFlat(r,0,s,h-o,s,h,l);return r}}),Hi.prototype=Object.assign(Object.create(Nl),{constructor:Hi,ValueTypeName:"quaternion",DefaultInterpolation:qo,InterpolantFactoryMethodLinear:function(t){return new ji(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Wi.prototype=Object.assign(Object.create(Nl),{
constructor:Wi,ValueTypeName:"number"}),Yi.prototype=Object.assign(Object.create(Nl),{constructor:Yi,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Yo,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),qi.prototype=Object.assign(Object.create(Nl),{constructor:qi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Yo,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Xi.prototype=Object.assign(Object.create(Nl),{constructor:Xi,ValueTypeName:"color"}),Zi.prototype=Nl,Nl.constructor=Zi,Object.assign(Zi,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=Zi._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];Ol.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Ol.convertArray(t.times,Array),values:Ol.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wi;case"vector":case"vector2":case"vector3":case"vector4":return Gi;case"color":return Xi;case"quaternion":return Hi;case"bool":case"boolean":return qi;case"string":return Yi}throw new Error("Unsupported typeName: "+t)}}),Qi.prototype={constructor:Qi,resetDuration:function(){for(var t=this.tracks,e=0,i=0,n=t.length;i!==n;++i){var r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Qi,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,s=i.length;r!==s;++r)e.push(Zi.parse(i[r]).scale(n));return new Qi(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,s=i.length;r!==s;++r)e.push(Zi.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,s=[],o=0;o<r;o++){var a=[],h=[];a.push((o+r-1)%r,o,(o+1)%r),h.push(0,1,0);var l=Ol.getKeyframeOrder(a);a=Ol.sortedArray(a,1,l),h=Ol.sortedArray(h,1,l),n||0!==a[0]||(a.push(r),h.push(h[0])),s.push(new Wi(".morphTargetInfluences["+e[o].name+"]",a,h).scale(1/i))}return new Qi(t,(-1),s)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,s=0,o=t.length;s<o;s++){var a=t[s],h=a.name.match(r);if(h&&h.length>1){var l=h[1],c=n[l];c||(n[l]=c=[]),c.push(a)}}var u=[];for(var l in n)u.push(Qi.CreateFromMorphTargetSequence(l,n[l],e,i));return u},parseAnimation:function(t,e){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var i=function(t,e,i,n,r){if(0!==i.length){var s=[],o=[];Ol.flattenJSON(i,s,o,n),0!==s.length&&r.push(new t(e,s,o))}},n=[],r=t.name||"default",s=t.length||-1,o=t.fps||30,a=t.hierarchy||[],h=0;h<a.length;h++){var l=a[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},u=0;u<l.length;u++)if(l[u].morphTargets)for(var p=0;p<l[u].morphTargets.length;p++)c[l[u].morphTargets[p]]=-1;for(var f in c){for(var d=[],m=[],p=0;p!==l[u].morphTargets.length;++p){var g=l[u];d.push(g.time),m.push(g.morphTarget===f?1:0)}n.push(new Wi(".morphTargetInfluence["+f+"]",d,m))}s=c.length*(o||1)}else{var v=".bones["+e[h].name+"]";i(Gi,v+".position",l,"pos",n),i(Hi,v+".quaternion",l,"rot",n),i(Gi,v+".scale",l,"scl",n)}}if(0===n.length)return null;var y=new Qi(r,s,n);return y}}),Object.assign(Ji.prototype,{load:function(t,e,i,n){var r=this,s=new Ei(r.manager);s.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,r=new Cl[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var s=t.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=(new i).fromArray(s)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var o=0,a=t.materials.length;o<a;o++)r.materials.push(this.parse(t.materials[o]));return r}}),Object.assign($i.prototype,{load:function(t,e,i,n){var r=this,s=new Ei(r.manager);s.load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},parse:function(t){var e=new Mt,i=t.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==i){var r=new n[i.type](i.array);e.setIndex(new ft(r,1))}var s=t.data.attributes;for(var o in s){var a=s[o],r=new n[a.type](a.array);e.addAttribute(o,new ft(r,a.itemSize,a.normalized))}var l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(var c=0,u=l.length;c!==u;++c){var p=l[c];e.addGroup(p.start,p.count,p.materialIndex)}var f=t.data.boundingSphere;if(void 0!==f){var d=new h;void 0!==f.center&&d.fromArray(f.center),e.boundingSphere=new tt(d,f.radius)}return e}}),Ki.prototype={constructor:Ki,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t,e,i,n={NoBlending:ps,NormalBlending:fs,AdditiveBlending:ds,SubtractiveBlending:ms,MultiplyBlending:gs,CustomBlending:vs};return function(r,s,o){function a(t,i,n,r,a){var l,c=s+t,u=Ki.Handlers.get(c);null!==u?l=u.load(c):(e.setCrossOrigin(o),l=e.load(c)),void 0!==i&&(l.repeat.fromArray(i),1!==i[0]&&(l.wrapS=ro),1!==i[1]&&(l.wrapT=ro)),void 0!==n&&l.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(l.wrapS=ro),"mirror"===r[0]&&(l.wrapS=oo),"repeat"===r[1]&&(l.wrapT=ro),"mirror"===r[1]&&(l.wrapT=oo)),void 0!==a&&(l.anisotropy=a);var p=ua.generateUUID();return h[p]=l,p}void 0===t&&(t=new W),void 0===e&&(e=new Mi),void 0===i&&(i=new Ji);var h={},l={uuid:ua.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var u=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=u;break;case"blending":l.blending=n[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(u).getHex();break;case"colorSpecular":l.specular=t.fromArray(u).getHex();break;case"colorEmissive":l.emissive=t.fromArray(u).getHex();break;case"specularCoef":l.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=ss;break;case"doubleSided":l.side=os;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=u;break;case"vertexColors":u===!0&&(l.vertexColors=us),"face"===u&&(l.vertexColors=cs);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,u)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(h),i.parse(l)}}()},Ki.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],s=e[i+1];if(r.test(t))return s}return null}},Object.assign(tn.prototype,{load:function(t,e,i,n){var r=this,s=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Ki.prototype.extractUrlBase(t),o=new Ei(this.manager);o.setWithCredentials(this.withCredentials),o.load(t,function(i){var n=JSON.parse(i),o=n.metadata;if(void 0!==o){var a=o.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var h=r.parse(n,s);e(h.geometry,h.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function n(e){function n(t,e){return t&1<<e}var r,s,o,a,c,u,p,f,d,m,g,v,y,_,b,x,E,w,T,A,S,M,P,C,R,I,O,N=t.faces,L=t.vertices,k=t.normals,D=t.colors,F=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&F++;for(r=0;r<F;r++)l.faceVertexUvs[r]=[]}for(a=0,c=L.length;a<c;)w=new h,w.x=L[a++]*e,w.y=L[a++]*e,w.z=L[a++]*e,l.vertices.push(w);for(a=0,c=N.length;a<c;)if(m=N[a++],g=n(m,0),v=n(m,1),y=n(m,3),_=n(m,4),b=n(m,5),x=n(m,6),E=n(m,7),g){if(A=new ut,A.a=N[a],A.b=N[a+1],A.c=N[a+3],S=new ut,S.a=N[a+1],S.b=N[a+2],S.c=N[a+3],a+=4,v&&(d=N[a++],A.materialIndex=d,S.materialIndex=d),o=l.faces.length,y)for(r=0;r<F;r++)for(C=t.uvs[r],l.faceVertexUvs[r][o]=[],l.faceVertexUvs[r][o+1]=[],s=0;s<4;s++)f=N[a++],I=C[2*f],O=C[2*f+1],R=new i(I,O),2!==s&&l.faceVertexUvs[r][o].push(R),0!==s&&l.faceVertexUvs[r][o+1].push(R);if(_&&(p=3*N[a++],A.normal.set(k[p++],k[p++],k[p]),S.normal.copy(A.normal)),b)for(r=0;r<4;r++)p=3*N[a++],P=new h(k[p++],k[p++],k[p]),2!==r&&A.vertexNormals.push(P),0!==r&&S.vertexNormals.push(P);if(x&&(u=N[a++],M=D[u],A.color.setHex(M),S.color.setHex(M)),E)for(r=0;r<4;r++)u=N[a++],M=D[u],2!==r&&A.vertexColors.push(new W(M)),0!==r&&S.vertexColors.push(new W(M));l.faces.push(A),l.faces.push(S)}else{if(T=new ut,T.a=N[a++],T.b=N[a++],T.c=N[a++],v&&(d=N[a++],T.materialIndex=d),o=l.faces.length,y)for(r=0;r<F;r++)for(C=t.uvs[r],l.faceVertexUvs[r][o]=[],s=0;s<3;s++)f=N[a++],I=C[2*f],O=C[2*f+1],R=new i(I,O),l.faceVertexUvs[r][o].push(R);if(_&&(p=3*N[a++],T.normal.set(k[p++],k[p++],k[p])),b)for(r=0;r<3;r++)p=3*N[a++],P=new h(k[p++],k[p++],k[p]),T.vertexNormals.push(P);if(x&&(u=N[a++],T.color.setHex(D[u])),E)for(r=0;r<3;r++)u=N[a++],T.vertexColors.push(new W(D[u]));l.faces.push(T)}}function s(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,n=t.skinWeights.length;i<n;i+=e){var s=t.skinWeights[i],o=e>1?t.skinWeights[i+1]:0,a=e>2?t.skinWeights[i+2]:0,h=e>3?t.skinWeights[i+3]:0;l.skinWeights.push(new r(s,o,a,h))}if(t.skinIndices)for(var i=0,n=t.skinIndices.length;i<n;i+=e){var c=t.skinIndices[i],u=e>1?t.skinIndices[i+1]:0,p=e>2?t.skinIndices[i+2]:0,f=e>3?t.skinIndices[i+3]:0;l.skinIndices.push(new r(c,u,p,f))}l.bones=t.bones,l.bones&&l.bones.length>0&&(l.skinWeights.length!==l.skinIndices.length||l.skinIndices.length!==l.vertices.length)&&console.warn("When skinning, number of vertices ("+l.vertices.length+"), skinIndices ("+l.skinIndices.length+"), and skinWeights ("+l.skinWeights.length+") should match.")}function o(e){if(void 0!==t.morphTargets)for(var i=0,n=t.morphTargets.length;i<n;i++){l.morphTargets[i]={},l.morphTargets[i].name=t.morphTargets[i].name,l.morphTargets[i].vertices=[];for(var r=l.morphTargets[i].vertices,s=t.morphTargets[i].vertices,o=0,a=s.length;o<a;o+=3){var c=new h;c.x=s[o]*e,c.y=s[o+1]*e,c.z=s[o+2]*e,r.push(c)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var u=l.faces,p=t.morphColors[0].colors,i=0,n=u.length;i<n;i++)u[i].color.fromArray(p,3*i)}}function a(){var e=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var n=0;n<i.length;n++){var r=Qi.parseAnimation(i[n],l.bones);r&&e.push(r)}if(l.morphTargets){var s=Qi.CreateClipsFromMorphTargetSequences(l.morphTargets,10);e=e.concat(s)}e.length>0&&(l.animations=e)}var l=new St,c=void 0!==t.scale?1/t.scale:1;if(n(c),s(),o(c),a(),l.computeFaceNormals(),l.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:l};var u=Ki.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:l,materials:u}}}),Object.assign(en.prototype,{load:function(t,e,i,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this,s=new Ei(r.manager);s.load(t,function(i){var s=null;try{s=JSON.parse(i)}catch(o){return void 0!==n&&n(o),void console.error("THREE:ObjectLoader: Can't parse "+t+".",o.message)}var a=s.metadata;return void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):void r.parse(s,e)},i,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var i=this.parseGeometries(t.geometries),n=this.parseImages(t.images,function(){void 0!==e&&e(o)}),r=this.parseTextures(t.textures,n),s=this.parseMaterials(t.materials,r),o=this.parseObject(t.object,i,s);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o},parseGeometries:function(t){var e={};if(void 0!==t)for(var i=new tn,n=new $i,r=0,s=t.length;r<s;r++){var o,a=t[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Pl[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Pl[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Pl[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Pl[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Pl[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Pl[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new Pl[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Pl[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Pl[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Pl[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Pl[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"BufferGeometry":o=n.parse(a);break;case"Geometry":o=i.parse(a.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),e[a.uuid]=o}return e},parseMaterials:function(t,e){var i={};if(void 0!==t){var n=new Ji;n.setTextures(e);for(var r=0,s=t.length;r<s;r++){var o=n.parse(t[r]);i[o.uuid]=o}}return i},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=Qi.parse(t[i]);e.push(n)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t)})}var n=this,r={};if(void 0!==t&&t.length>0){var s=new xi(e),o=new Ai(s);o.setCrossOrigin(this.crossOrigin);for(var a=0,h=t.length;a<h;a++){var l=t[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;r[l.uuid]=i(c)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={UVMapping:Qs,CubeReflectionMapping:Js,CubeRefractionMapping:$s,EquirectangularReflectionMapping:Ks,EquirectangularRefractionMapping:to,SphericalReflectionMapping:eo,CubeUVReflectionMapping:io,CubeUVRefractionMapping:no},s={RepeatWrapping:ro,ClampToEdgeWrapping:so,MirroredRepeatWrapping:oo},o={NearestFilter:ao,NearestMipMapNearestFilter:ho,NearestMipMapLinearFilter:lo,LinearFilter:co,LinearMipMapNearestFilter:uo,LinearMipMapLinearFilter:po},a={};if(void 0!==t)for(var h=0,l=t.length;h<l;h++){var c=t[h];void 0===c.image&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),void 0===e[c.image]&&console.warn("THREE.ObjectLoader: Undefined image",c.image);var u=new n(e[c.image]);u.needsUpdate=!0,u.uuid=c.uuid,void 0!==c.name&&(u.name=c.name),void 0!==c.mapping&&(u.mapping=i(c.mapping,r)),void 0!==c.offset&&u.offset.fromArray(c.offset),void 0!==c.repeat&&u.repeat.fromArray(c.repeat),void 0!==c.wrap&&(u.wrapS=i(c.wrap[0],s),u.wrapT=i(c.wrap[1],s)),void 0!==c.minFilter&&(u.minFilter=i(c.minFilter,o)),void 0!==c.magFilter&&(u.magFilter=i(c.magFilter,o)),void 0!==c.anisotropy&&(u.anisotropy=c.anisotropy),void 0!==c.flipY&&(u.flipY=c.flipY),a[c.uuid]=u}return a},parseObject:function(){var t=new l;return function(e,i,n){function r(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),i[t]}function s(t){if(void 0!==t)return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}var o;switch(e.type){case"Scene":o=new ue,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new W(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new ce(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new le(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Lt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new kt(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":o=new Di(e.color,e.intensity);break;case"DirectionalLight":o=new ki(e.color,e.intensity);break;case"PointLight":o=new Ni(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":o=new Oi(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ci(e.color,e.groundColor,e.intensity);break;case"Mesh":var a=r(e.geometry),h=s(e.material);o=a.bones&&a.bones.length>0?new ye(a,h):new Pt(a,h);break;case"LOD":o=new me;break;case"Line":o=new be(r(e.geometry),s(e.material),e.mode);break;case"LineSegments":o=new xe(r(e.geometry),s(e.material));break;case"PointCloud":case"Points":o=new we(r(e.geometry),s(e.material));break;case"Sprite":o=new de(s(e.material));break;case"Group":o=new Te;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:o=new ht}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var l in e.children)o.add(this.parseObject(e.children[l],i,n));if("LOD"===e.type)for(var c=e.levels,u=0;u<c.length;u++){var p=c[u],l=o.getObjectByProperty("uuid",p.object);void 0!==l&&o.addLevel(l,p.distance)}return o}}()}),fn.prototype={constructor:fn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(isNaN(t)&&(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),s=0;for(n.push(0),i=1;i<=t;i++)e=this.getPoint(i/t),s+=e.distanceTo(r),n.push(s),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,s=n.length;i=e?e:t*n[s-1];for(var o,a=0,h=s-1;a<=h;)if(r=Math.floor(a+(h-a)/2),o=n[r]-i,o<0)a=r+1;else{if(!(o>0)){h=r;break}h=r-1}if(r=h,n[r]===i){var l=r/(s-1);return l}var c=n[r],u=n[r+1],p=u-c,f=(i-c)/p,l=(r+f)/(s-1);return l},getTangent:function(t){var e=1e-4,i=t-e,n=t+e;i<0&&(i=0),n>1&&(n=1);var r=this.getPoint(i),s=this.getPoint(n),o=s.clone().sub(r);return o.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,s=new h,o=[],a=[],c=[],u=new h,p=new l;for(i=0;i<=t;i++)n=i/t,o[i]=this.getTangentAt(n),o[i].normalize();a[0]=new h,c[0]=new h;var f=Number.MAX_VALUE,d=Math.abs(o[0].x),m=Math.abs(o[0].y),g=Math.abs(o[0].z);for(d<=f&&(f=d,s.set(1,0,0)),m<=f&&(f=m,s.set(0,1,0)),g<=f&&s.set(0,0,1),u.crossVectors(o[0],s).normalize(),a[0].crossVectors(o[0],u),c[0].crossVectors(o[0],a[0]),i=1;i<=t;i++)a[i]=a[i-1].clone(),c[i]=c[i-1].clone(),u.crossVectors(o[i-1],o[i]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(ua.clamp(o[i-1].dot(o[i]),-1,1)),a[i].applyMatrix4(p.makeRotationAxis(u,r))),c[i].crossVectors(o[i],a[i]);if(e===!0)for(r=Math.acos(ua.clamp(a[0].dot(a[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(a[0],a[t]))>0&&(r=-r),i=1;i<=t;i++)a[i].applyMatrix4(p.makeRotationAxis(o[i],r*i)),c[i].crossVectors(o[i],a[i]);return{tangents:o,normals:a,binormals:c}}},dn.prototype=Object.create(fn.prototype),dn.prototype.constructor=dn,dn.prototype.isLineCurve=!0,dn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},dn.prototype.getPointAt=function(t){return this.getPoint(t)},dn.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},mn.prototype=Object.assign(Object.create(fn.prototype),{constructor:mn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new dn(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,s=this.curves[n],o=s.getLength(),a=0===o?0:1-r/o;return s.getPointAt(a)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){isNaN(t)&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var s=r[n],o=s&&s.isEllipseCurve?2*t:s&&s.isLineCurve?1:s&&s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o),h=0;h<a.length;h++){var l=a[h];e&&e.equals(l)||(i.push(l),e=l)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new St,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new h(r.x,r.y,r.z||0))}return e}}),gn.prototype=Object.create(fn.prototype),gn.prototype.constructor=gn,gn.prototype.isEllipseCurve=!0,gn.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=r?0:e),this.aClockwise!==!0||r||(n===e?n=-e:n-=e);var s=this.aStartAngle+t*n,o=this.aX+this.xRadius*Math.cos(s),a=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var h=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=o-this.aX,u=a-this.aY;o=c*h-u*l+this.aX,a=c*l+u*h+this.aY}return new i(o,a)},vn.prototype=Object.create(fn.prototype),vn.prototype.constructor=vn,vn.prototype.isSplineCurve=!0,vn.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),s=n-r,o=e[0===r?r:r-1],a=e[r],h=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2];return new i(nn(s,o.x,a.x,h.x,l.x),nn(s,o.y,a.y,h.y,l.y))},yn.prototype=Object.create(fn.prototype),yn.prototype.constructor=yn,yn.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2,s=this.v3;return new i(pn(t,e.x,n.x,r.x,s.x),pn(t,e.y,n.y,r.y,s.y))},_n.prototype=Object.create(fn.prototype),_n.prototype.constructor=_n,_n.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2;return new i(an(t,e.x,n.x,r.x),an(t,e.y,n.y,r.y))};var Ll=Object.assign(Object.create(mn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new dn(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var s=new _n(this.currentPoint.clone(),new i(t,e),new i(n,r));this.curves.push(s),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,s,o){var a=new yn(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(s,o));this.curves.push(a),this.currentPoint.set(s,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),i=new vn(e);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,s){var o=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+o,e+a,i,n,r,s)},absarc:function(t,e,i,n,r,s){this.absellipse(t,e,i,i,n,r,s)},ellipse:function(t,e,i,n,r,s,o,a){var h=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+h,e+l,i,n,r,s,o,a)},absellipse:function(t,e,i,n,r,s,o,a){var h=new gn(t,e,i,n,r,s,o,a);if(this.curves.length>0){
var l=h.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(h);var c=h.getPoint(1);this.currentPoint.copy(c)}});bn.prototype=Ll,Ll.constructor=bn,xn.prototype=Object.assign(Object.create(Ll),{constructor:xn,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),En.prototype={moveTo:function(t,e){this.currentPath=new bn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,s){this.currentPath.bezierCurveTo(t,e,i,n,r,s)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],s=new xn;s.curves=r.curves,e.push(s)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,s=0;s<i;r=s++){var o=e[r],a=e[s],h=a.x-o.x,l=a.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[s],h=-h,a=e[r],l=-l),t.y<o.y||t.y>a.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=l*(t.x-o.x)-h*(t.y-o.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(t.y!==o.y)continue;if(a.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=a.x)return!0}}return n}var r=Ml.isClockWise,s=this.subPaths;if(0===s.length)return[];if(e===!0)return i(s);var o,a,h,l=[];if(1===s.length)return a=s[0],h=new xn,h.curves=a.curves,l.push(h),l;var c=!r(s[0].getPoints());c=t?!c:c;var u,p=[],f=[],d=[],m=0;f[m]=void 0,d[m]=[];for(var g=0,v=s.length;g<v;g++)a=s[g],u=a.getPoints(),o=r(u),o=t?!o:o,o?(!c&&f[m]&&m++,f[m]={s:new xn,p:u},f[m].s.curves=a.curves,c&&m++,d[m]=[]):d[m].push({h:a,p:u[0]});if(!f[0])return i(s);if(f.length>1){for(var y=!1,_=[],b=0,x=f.length;b<x;b++)p[b]=[];for(var b=0,x=f.length;b<x;b++)for(var E=d[b],w=0;w<E.length;w++){for(var T=E[w],A=!0,S=0;S<f.length;S++)n(T.p,f[S].p)&&(b!==S&&_.push({froms:b,tos:S,hole:w}),A?(A=!1,p[S].push(T)):y=!0);A&&p[b].push(T)}_.length>0&&(y||(d=p))}for(var M,g=0,P=f.length;g<P;g++){h=f[g].s,l.push(h),M=d[g];for(var C=0,R=M.length;C<R;C++)h.holes.push(M[C].h)}return l}},Object.assign(wn.prototype,{isFont:!0,generateShapes:function(t,e,i){function n(t){for(var i=String(t).split(""),n=e/s.resolution,o=(s.boundingBox.yMax-s.boundingBox.yMin+s.underlineThickness)*n,a=0,h=0,l=[],c=0;c<i.length;c++){var u=i[c];if("\n"===u)a=0,h-=o;else{var p=r(u,n,a,h);a+=p.offsetX,l.push(p.path)}}return l}function r(t,e,n,r){var o=s.glyphs[t]||s.glyphs["?"];if(o){var a,h,l,c,u,p,f,d,m,g,v,y=new En,_=[];if(o.o)for(var b=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),x=0,E=b.length;x<E;){var w=b[x++];switch(w){case"m":a=b[x++]*e+n,h=b[x++]*e+r,y.moveTo(a,h);break;case"l":a=b[x++]*e+n,h=b[x++]*e+r,y.lineTo(a,h);break;case"q":if(l=b[x++]*e+n,c=b[x++]*e+r,f=b[x++]*e+n,d=b[x++]*e+r,y.quadraticCurveTo(f,d,l,c),v=_[_.length-1]){u=v.x,p=v.y;for(var T=1;T<=i;T++){var A=T/i;an(A,u,f,l),an(A,p,d,c)}}break;case"b":if(l=b[x++]*e+n,c=b[x++]*e+r,f=b[x++]*e+n,d=b[x++]*e+r,m=b[x++]*e+n,g=b[x++]*e+r,y.bezierCurveTo(f,d,m,g,l,c),v=_[_.length-1]){u=v.x,p=v.y;for(var T=1;T<=i;T++){var A=T/i;pn(A,u,f,m,l),pn(A,p,d,g,c)}}}}return{offsetX:o.ha*e,path:y}}}void 0===e&&(e=100),void 0===i&&(i=4);for(var s=this.data,o=n(t),a=[],h=0,l=o.length;h<l;h++)Array.prototype.push.apply(a,o[h].toShapes());return a}}),Object.assign(Tn.prototype,{load:function(t,e,i,n){var r=this,s=new Ei(this.manager);s.load(t,function(t){var i;try{i=JSON.parse(t)}catch(n){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var s=r.parse(i);e&&e(s)},i,n)},parse:function(t){return new wn(t)}});var kl,Dl={getContext:function(){return void 0===kl&&(kl=new(window.AudioContext||window.webkitAudioContext)),kl},setContext:function(t){kl=t}};Object.assign(An.prototype,{load:function(t,e,i,n){var r=new Ei(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){var i=Dl.getContext();i.decodeAudioData(t,function(t){e(t)})},i,n)}}),Sn.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Sn,isRectAreaLight:!0,copy:function(t){return Pi.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this}}),Object.assign(Mn.prototype,{update:function(){var t,e,i,n,r,s,o,a=new l,h=new l;return function(l){var c=t!==this||e!==l.focus||i!==l.fov||n!==l.aspect*this.aspect||r!==l.near||s!==l.far||o!==l.zoom;if(c){t=this,e=l.focus,i=l.fov,n=l.aspect*this.aspect,r=l.near,s=l.far,o=l.zoom;var u,p,f=l.projectionMatrix.clone(),d=this.eyeSep/2,m=d*r/e,g=r*Math.tan(ua.DEG2RAD*i*.5)/o;h.elements[12]=-d,a.elements[12]=d,u=-g*n+m,p=g*n+m,f.elements[0]=2*r/(p-u),f.elements[8]=(p+u)/(p-u),this.cameraL.projectionMatrix.copy(f),u=-g*n-m,p=g*n-m,f.elements[0]=2*r/(p-u),f.elements[8]=(p+u)/(p-u),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(a)}}()}),Pn.prototype=Object.create(ht.prototype),Pn.prototype.constructor=Pn,Cn.prototype=Object.assign(Object.create(ht.prototype),{constructor:Cn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new h,e=new a,i=new h,n=new h;return function(r){ht.prototype.updateMatrixWorld.call(this,r);var s=this.context.listener,o=this.up;this.matrixWorld.decompose(t,e,i),n.set(0,0,-1).applyQuaternion(e),s.positionX?(s.positionX.setValueAtTime(t.x,this.context.currentTime),s.positionY.setValueAtTime(t.y,this.context.currentTime),s.positionZ.setValueAtTime(t.z,this.context.currentTime),s.forwardX.setValueAtTime(n.x,this.context.currentTime),s.forwardY.setValueAtTime(n.y,this.context.currentTime),s.forwardZ.setValueAtTime(n.z,this.context.currentTime),s.upX.setValueAtTime(o.x,this.context.currentTime),s.upY.setValueAtTime(o.y,this.context.currentTime),s.upZ.setValueAtTime(o.z,this.context.currentTime)):(s.setPosition(t.x,t.y,t.z),s.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),Rn.prototype=Object.assign(Object.create(ht.prototype),{constructor:Rn,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),In.prototype=Object.assign(Object.create(Rn.prototype),{constructor:In,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new h;return function(e){ht.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(On.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Nn.prototype={constructor:Nn,accumulate:function(t,e){var i=this.buffer,n=this.valueSize,r=t*n+n,s=this.cumulativeWeight;if(0===s){for(var o=0;o!==n;++o)i[r+o]=i[o];s=e}else{s+=e;var a=e/s;this._mixBufferRegion(i,r,0,a,n)}this.cumulativeWeight=s},apply:function(t){var e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,s=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*e;this._mixBufferRegion(i,n,o,1-r,e)}for(var a=e,h=e+e;a!==h;++a)if(i[a]!==i[a+e]){s.setValue(i,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,n=3*i;t.getValue(e,n);for(var r=i,s=n;r!==s;++r)e[r]=e[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,i,n,r){if(n>=.5)for(var s=0;s!==r;++s)t[e+s]=t[i+s]},_slerp:function(t,e,i,n,r){a.slerpFlat(t,e,t,e,t,i,n)},_lerp:function(t,e,i,n,r){for(var s=1-n,o=0;o!==r;++o){var a=e+o;t[a]=t[a]*s+t[i+o]*n}}},Ln.prototype={constructor:Ln,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(t=Ln.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(i){var s=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===s){s=o;break}break;default:if(void 0===t[i])return void console.error("  can not bind to objectName of node, undefined",this);t=t[i]}if(void 0!==s){if(void 0===t[s])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[s]}}var a=t[n];if(void 0===a){var h=e.nodeName;return void console.error("  trying to update property for track: "+h+"."+n+" but it wasn't found.",t)}var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):void 0!==a.length?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Ln.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Ln.prototype.getValue,_setValue_unbound:Ln.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Ln.Composite=function(t,e,i){var n=i||Ln.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)},Ln.Composite.prototype={constructor:Ln.Composite,getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ln.create=function(t,e,i){return t&&t.isAnimationObjectGroup?new Ln.Composite(t,e,i):new Ln(t,e,i)},Ln.parseTrackName=function(t){var e=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/,i=e.exec(t);if(!i)throw new Error("cannot parse trackName at all: "+t);var n={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return n},Ln.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=function(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];if(n.name===e)return n}return null},n=i(t.skeleton);if(n)return n}if(t.children){var r=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n.name===e||n.uuid===e)return n;var s=r(n.children);if(s)return s}return null},s=r(t.children);if(s)return s}return null},kn.prototype={constructor:kn,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,i=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,s=this._paths,o=this._parsedPaths,a=this._bindings,h=a.length,l=0,c=arguments.length;l!==c;++l){var u=arguments[l],p=u.uuid,f=r[p],d=void 0;if(void 0===f){f=i++,r[p]=f,e.push(u);for(var m=0,g=h;m!==g;++m)a[m].push(new Ln(u,s[m],o[m]))}else if(f<n){d=e[f];var v=--n,y=e[v];r[y.uuid]=f,e[f]=y,r[p]=v,e[v]=u;for(var m=0,g=h;m!==g;++m){var _=a[m],b=_[v],x=_[f];_[f]=b,void 0===x&&(x=new Ln(u,s[m],o[m])),_[v]=x}}else e[f]!==d&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(t){for(var e=this._objects,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,s=r.length,o=0,a=arguments.length;o!==a;++o){var h=arguments[o],l=h.uuid,c=n[l];if(void 0!==c&&c>=i){var u=i++,p=e[u];n[p.uuid]=c,e[c]=p,n[l]=u,e[u]=h;for(var f=0,d=s;f!==d;++f){var m=r[f],g=m[u],v=m[c];m[c]=g,m[u]=v}}}this.nCachedObjects_=i},uncache:function(t){for(var e=this._objects,i=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,s=this._bindings,o=s.length,a=0,h=arguments.length;a!==h;++a){var l=arguments[a],c=l.uuid,u=r[c];if(void 0!==u)if(delete r[c],u<n){var p=--n,f=e[p],d=--i,m=e[d];r[f.uuid]=u,e[u]=f,r[m.uuid]=p,e[p]=m,e.pop();for(var g=0,v=o;g!==v;++g){var y=s[g],_=y[p],b=y[d];y[u]=_,y[p]=b,y.pop()}}else{var d=--i,m=e[d];r[m.uuid]=u,e[u]=m,e.pop();for(var g=0,v=o;g!==v;++g){var y=s[g];y[u]=y[d],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var s=this._paths,o=this._parsedPaths,a=this._objects,h=a.length,l=this.nCachedObjects_,c=new Array(h);n=r.length,i[t]=n,s.push(t),o.push(e),r.push(c);for(var u=l,p=a.length;u!==p;++u){var f=a[u];c[u]=new Ln(f,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o],h=t[o];e[h]=i,s[i]=a,s.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}},Dn.prototype={constructor:Dn,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){var n=this._clip.duration,r=t._clip.duration,s=r/n,o=n/r;t.warp(1,s,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,s=this._timeScaleInterpolant,o=this.timeScale;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);var a=s.parameterPositions,h=s.sampleValues;return a[0]=r,a[1]=r+i,h[0]=t/o,h[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){var r=this._startTime;if(null!==r){var s=(t-r)*i;if(s<0||0===i)return;this._startTime=null,e=i*s}e*=this._updateTimeScale(t);var o=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var h=this._interpolants,l=this._propertyBindings,c=0,u=h.length;c!==u;++c)h[c].evaluate(o),l[c].accumulate(n,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(n===jo){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=i)e=i;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var s=n===Wo;if(r===-1&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),e>=i||e<0){var o=Math.floor(e/i);e-=i*o,r+=Math.abs(o);var a=this.repetitions-r;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===a){var h=t<0;this._setEndings(h,!h,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(s&&1===(1&r))return this.time=e,i-e}return this.time=e,e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=Qo,n.endingEnd=Qo):(t?n.endingStart=this.zeroSlopeAtStart?Qo:Zo:n.endingStart=Jo,e?n.endingEnd=this.zeroSlopeAtEnd?Qo:Zo:n.endingEnd=Jo)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,s=this._weightInterpolant;null===s&&(s=n._lendControlInterpolant(),this._weightInterpolant=s);var o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=e,o[1]=r+t,a[1]=i,this}},Fn.prototype={constructor:Fn,clipAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Qi.findByName(i,t):t,s=null!==r?r.uuid:t,o=this._actionsByClip[s],a=null;if(void 0!==o){var h=o.actionByRoot[n];if(void 0!==h)return h;a=o.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var l=new Dn(this,r,e);return this._bindAction(l,a),this._addInactiveAction(l,s,n),l},existingAction:function(t,e){var i=e||this._root,n=i.uuid,r="string"==typeof t?Qi.findByName(i,t):t,s=r?r.uuid:t,o=this._actionsByClip[s];return void 0!==o?o.actionByRoot[n]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(var r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1,o=0;o!==i;++o){var a=e[o];a.enabled&&a._update(n,t,r,s)}for(var h=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)h[o].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var s=r.knownActions,o=0,a=s.length;o!==a;++o){var h=s[o];this._deactivateAction(h);var l=h._cacheIndex,c=e[e.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(h)}delete n[i]}},uncacheRoot:function(t){var e=t.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot,s=r[e];void 0!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}var o=this._bindingsByRootAndName,a=o[e];if(void 0!==a)for(var h in a){var l=a[h];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}},Object.assign(Fn.prototype,{_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,s=t._propertyBindings,o=t._interpolants,a=i.uuid,h=this._bindingsByRootAndName,l=h[a];void 0===l&&(l={},h[a]=l);for(var c=0;c!==r;++c){var u=n[c],p=u.name,f=l[p];if(void 0!==f)s[c]=f;else{if(f=s[c],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,a,p));continue}var d=e&&e._propertyBindings[c].binding.parsedPath;f=new Nn(Ln.create(i,p,d),u.ValueTypeName,u.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,p),s[c]=f}o[c].resultBuffer=f.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(var r=t._propertyBindings,s=0,o=r.length;s!==o;++s){var a=r[s];0===a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,s=r[e];if(void 0===s)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s;else{var o=s.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=n.length,n.push(t),s.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,h=a[a.length-1],l=t._byClipCacheIndex;h._byClipCacheIndex=l,a[l]=h,a.pop(),t._byClipCacheIndex=null;var c=o.actionByRoot,u=(e._localRoot||this._root).uuid;delete c[u],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],s=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,s=this._bindingsByRootAndName,o=s[n],a=e[e.length-1],h=t._cacheIndex;a._cacheIndex=h,e[h]=a,e.pop(),delete o[r];t:{for(var l in o)break t;delete s[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(i=new Ui(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(Fn.prototype,e.prototype),Bn.prototype.clone=function(){return new Bn(void 0===this.value.clone?this.value:this.value.clone())},Un.prototype=Object.create(Mt.prototype),Un.prototype.constructor=Un,Un.prototype.isInstancedBufferGeometry=!0,Un.prototype.addGroup=function(t,e,i){this.groups.push({start:t,count:e,materialIndex:i})},Un.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var i=t.attributes;for(var n in i){var r=i[n];this.addAttribute(n,r.clone())}for(var s=t.groups,o=0,a=s.length;o<a;o++){var h=s[o];this.addGroup(h.start,h.count,h.materialIndex)}return this},Vn.prototype={constructor:Vn,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}},zn.prototype={constructor:zn,
isInterleavedBuffer:!0,set needsUpdate(t){t===!0&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}},Gn.prototype=Object.create(zn.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isInstancedInterleavedBuffer=!0,Gn.prototype.copy=function(t){return zn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},jn.prototype=Object.create(ft.prototype),jn.prototype.constructor=jn,jn.prototype.isInstancedBufferAttribute=!0,jn.prototype.copy=function(t){return ft.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Hn.prototype={constructor:Hn,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var i=[];return Yn(t,this,i,e),i.sort(Wn),i},intersectObjects:function(t,e){var i=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)Yn(t[n],this,i,e);return i.sort(Wn),i}},qn.prototype={constructor:qn,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},Xn.prototype={constructor:Xn,set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(ua.clamp(t.y/this.radius,-1,1))),this}},Zn.prototype={constructor:Zn,set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}},Qn.prototype=Object.create(Pt.prototype),Qn.prototype.constructor=Qn,Qn.prototype.createAnimation=function(t,e,i,n){var r={start:e,end:i,length:i-e+1,fps:n,duration:(i-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},Qn.prototype.autoCreateAnimations=function(t){for(var e,i=/([a-z]+)_?(\d+)/i,n={},r=this.geometry,s=0,o=r.morphTargets.length;s<o;s++){var a=r.morphTargets[s],h=a.name.match(i);if(h&&h.length>1){var l=h[1];n[l]||(n[l]={start:1/0,end:-(1/0)});var c=n[l];s<c.start&&(c.start=s),s>c.end&&(c.end=s),e||(e=l)}}for(var l in n){var c=n[l];this.createAnimation(l,c.start,c.end,t)}this.firstAnimation=e},Qn.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},Qn.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},Qn.prototype.setAnimationFPS=function(t,e){var i=this.animationsMap[t];i&&(i.fps=e,i.duration=(i.end-i.start)/i.fps)},Qn.prototype.setAnimationDuration=function(t,e){var i=this.animationsMap[t];i&&(i.duration=e,i.fps=(i.end-i.start)/i.duration)},Qn.prototype.setAnimationWeight=function(t,e){var i=this.animationsMap[t];i&&(i.weight=e)},Qn.prototype.setAnimationTime=function(t,e){var i=this.animationsMap[t];i&&(i.time=e)},Qn.prototype.getAnimationTime=function(t){var e=0,i=this.animationsMap[t];return i&&(e=i.time),e},Qn.prototype.getAnimationDuration=function(t){var e=-1,i=this.animationsMap[t];return i&&(e=i.duration),e},Qn.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},Qn.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},Qn.prototype.update=function(t){for(var e=0,i=this.animationsList.length;e<i;e++){var n=this.animationsList[e];if(n.active){var r=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var s=n.start+ua.clamp(Math.floor(n.time/r),0,n.length-1),o=n.weight;s!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*o,this.morphTargetInfluences[s]=0,n.lastFrame=n.currentFrame,n.currentFrame=s);var a=n.time%r/r;n.directionBackwards&&(a=1-a),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=a*o,this.morphTargetInfluences[n.lastFrame]=(1-a)*o):this.morphTargetInfluences[n.currentFrame]=o}}},Jn.prototype=Object.create(ht.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isImmediateRenderObject=!0,$n.prototype=Object.create(xe.prototype),$n.prototype.constructor=$n,$n.prototype.update=function(){var t=new h,e=new h,i=new et;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,s=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var a=o.vertices,h=o.faces,l=0,c=0,u=h.length;c<u;c++)for(var p=h[c],f=0,d=p.vertexNormals.length;f<d;f++){var m=a[p[n[f]]],g=p.vertexNormals[f];t.copy(m).applyMatrix4(r),e.copy(g).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),s.setXYZ(l,t.x,t.y,t.z),l+=1,s.setXYZ(l,e.x,e.y,e.z),l+=1}else if(o&&o.isBufferGeometry)for(var v=o.attributes.position,y=o.attributes.normal,l=0,f=0,d=v.count;f<d;f++)t.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(r),e.set(y.getX(f),y.getY(f),y.getZ(f)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),s.setXYZ(l,t.x,t.y,t.z),l+=1,s.setXYZ(l,e.x,e.y,e.z),l+=1;return s.needsUpdate=!0,this}}(),Kn.prototype=Object.create(ht.prototype),Kn.prototype.constructor=Kn,Kn.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Kn.prototype.update=function(){var t=new h,e=new h;return function(){var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),tr.prototype=Object.create(xe.prototype),tr.prototype.constructor=tr,tr.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var i=0;i<t.children.length;i++)e.push.apply(e,this.getBoneList(t.children[i]));return e},tr.prototype.update=function(){var t=new h,e=new l,i=new l;return function(){var n=this.geometry,r=n.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,o=0;s<this.bones.length;s++){var a=this.bones[s];a.parent&&a.parent.isBone&&(e.multiplyMatrices(i,a.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(o,t.x,t.y,t.z),e.multiplyMatrices(i,a.parent.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(o+1,t.x,t.y,t.z),o+=2)}n.getAttribute("position").needsUpdate=!0}}(),er.prototype=Object.create(Pt.prototype),er.prototype.constructor=er,er.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},er.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},ir.prototype=Object.create(ht.prototype),ir.prototype.constructor=ir,ir.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},ir.prototype.update=function(){var t=new h,e=new h;return function(){var i=this.children[0],n=this.children[1];if(this.light.target){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld);var r=e.clone().sub(t);i.lookAt(r),n.lookAt(r)}i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var s=.5*this.light.width,o=.5*this.light.height,a=i.geometry.getAttribute("position"),h=a.array;h[0]=s,h[1]=-o,h[2]=0,h[3]=s,h[4]=o,h[5]=0,h[6]=-s,h[7]=o,h[8]=0,h[9]=-s,h[10]=o,h[11]=0,h[12]=-s,h[13]=-o,h[14]=0,h[15]=s,h[16]=-o,h[17]=0,a.needsUpdate=!0}}(),nr.prototype=Object.create(ht.prototype),nr.prototype.constructor=nr,nr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},nr.prototype.update=function(){var t=new h,e=new W,i=new W;return function(){var n=this.children[0],r=n.geometry.getAttribute("color");e.copy(this.light.color).multiplyScalar(this.light.intensity),i.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var s=0,o=r.count;s<o;s++){var a=s<o/2?e:i;r.setXYZ(s,a.r,a.g,a.b)}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),r.needsUpdate=!0}}(),rr.prototype=Object.create(xe.prototype),rr.prototype.constructor=rr,sr.prototype=Object.create(xe.prototype),sr.prototype.constructor=sr,or.prototype=Object.create(xe.prototype),or.prototype.constructor=or,or.prototype.update=function(){var t=new h,e=new h,i=new et;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,s=this.object.geometry,o=s.vertices,a=s.faces,h=0,l=0,c=a.length;l<c;l++){var u=a[l],p=u.normal;t.copy(o[u.a]).add(o[u.b]).add(o[u.c]).divideScalar(3).applyMatrix4(n),e.copy(p).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(h,t.x,t.y,t.z),h+=1,r.setXYZ(h,e.x,e.y,e.z),h+=1}return r.needsUpdate=!0,this}}(),ar.prototype=Object.create(ht.prototype),ar.prototype.constructor=ar,ar.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},ar.prototype.update=function(){var t=new h,e=new h,i=new h;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t);var n=this.children[0],r=this.children[1];n.lookAt(i),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.lookAt(i),r.scale.z=i.length()}}(),hr.prototype=Object.create(xe.prototype),hr.prototype.constructor=hr,hr.prototype.update=function(){function t(t,s,o,a){n.set(s,o,a).unproject(r);var h=i[t];if(void 0!==h)for(var l=e.getAttribute("position"),c=0,u=h.length;c<u;c++)l.setXYZ(h[c],n.x,n.y,n.z)}var e,i,n=new h,r=new Nt;return function(){e=this.geometry,i=this.pointMap;var n=1,s=1;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-n,-s,-1),t("n2",n,-s,-1),t("n3",-n,s,-1),t("n4",n,s,-1),t("f1",-n,-s,1),t("f2",n,-s,1),t("f3",-n,s,1),t("f4",n,s,1),t("u1",.7*n,1.1*s,-1),t("u2",.7*-n,1.1*s,-1),t("u3",0,2*s,-1),t("cf1",-n,0,1),t("cf2",n,0,1),t("cf3",0,-s,1),t("cf4",0,s,1),t("cn1",-n,0,-1),t("cn2",n,0,-1),t("cn3",0,-s,-1),t("cn4",0,s,-1),e.getAttribute("position").needsUpdate=!0}}(),lr.prototype=Object.create(xe.prototype),lr.prototype.constructor=lr,lr.prototype.update=function(){var t=new K;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var i=t.min,n=t.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=i.x,s[4]=n.y,s[5]=n.z,s[6]=i.x,s[7]=i.y,s[8]=n.z,s[9]=n.x,s[10]=i.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=i.z,s[15]=i.x,s[16]=n.y,s[17]=i.z,s[18]=i.x,s[19]=i.y,s[20]=i.z,s[21]=n.x,s[22]=i.y,s[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Fl,Bl;cr.prototype=Object.create(ht.prototype),cr.prototype.constructor=cr,cr.prototype.setDirection=function(){var t,e=new h;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),cr.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},cr.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},ur.prototype=Object.create(xe.prototype),ur.prototype.constructor=ur;var Ul=new h,Vl=new pr,zl=new pr,Gl=new pr;fr.prototype=Object.create(fn.prototype),fr.prototype.constructor=fr,fr.prototype.getPoint=function(t){var e=this.points,i=e.length;i<2&&console.log("duh, you need at least 2 points");var n=(i-(this.closed?0:1))*t,r=Math.floor(n),s=n-r;this.closed?r+=r>0?0:(Math.floor(Math.abs(r)/e.length)+1)*e.length:0===s&&r===i-1&&(r=i-2,s=1);var o,a,l,c;if(this.closed||r>0?o=e[(r-1)%i]:(Ul.subVectors(e[0],e[1]).add(e[0]),o=Ul),a=e[r%i],l=e[(r+1)%i],this.closed||r+2<i?c=e[(r+2)%i]:(Ul.subVectors(e[i-1],e[i-2]).add(e[i-1]),c=Ul),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var u="chordal"===this.type?.5:.25,p=Math.pow(o.distanceToSquared(a),u),f=Math.pow(a.distanceToSquared(l),u),d=Math.pow(l.distanceToSquared(c),u);f<1e-4&&(f=1),p<1e-4&&(p=f),d<1e-4&&(d=f),Vl.initNonuniformCatmullRom(o.x,a.x,l.x,c.x,p,f,d),zl.initNonuniformCatmullRom(o.y,a.y,l.y,c.y,p,f,d),Gl.initNonuniformCatmullRom(o.z,a.z,l.z,c.z,p,f,d)}else if("catmullrom"===this.type){var m=void 0!==this.tension?this.tension:.5;Vl.initCatmullRom(o.x,a.x,l.x,c.x,m),zl.initCatmullRom(o.y,a.y,l.y,c.y,m),Gl.initCatmullRom(o.z,a.z,l.z,c.z,m)}return new h(Vl.calc(s),zl.calc(s),Gl.calc(s))},dr.prototype=Object.create(fn.prototype),dr.prototype.constructor=dr,dr.prototype.getPoint=function(t){var e=this.v0,i=this.v1,n=this.v2,r=this.v3;return new h(pn(t,e.x,i.x,n.x,r.x),pn(t,e.y,i.y,n.y,r.y),pn(t,e.z,i.z,n.z,r.z))},mr.prototype=Object.create(fn.prototype),mr.prototype.constructor=mr,mr.prototype.getPoint=function(t){var e=this.v0,i=this.v1,n=this.v2;return new h(an(t,e.x,i.x,n.x),an(t,e.y,i.y,n.y),an(t,e.z,i.z,n.z))},gr.prototype=Object.create(fn.prototype),gr.prototype.constructor=gr,gr.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=new h;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e},vr.prototype=Object.create(gn.prototype),vr.prototype.constructor=vr;var jl={createMultiMaterialObject:function(t,e){for(var i=new Te,n=0,r=e.length;n<r;n++)i.add(new Pt(t,e[n]));return i},detach:function(t,e,i){t.applyMatrix(e.matrixWorld),e.remove(t),i.add(t)},attach:function(t,e,i){var n=new l;n.getInverse(i.matrixWorld),t.applyMatrix(n),e.remove(t),i.add(t)}},Hl=0,Wl=1;fn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(fn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Fr.prototype=Object.create(fr.prototype),Br.prototype=Object.create(fr.prototype),Ur.prototype=Object.create(fr.prototype),Object.assign(Ur.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),rr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(q.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(K.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),lt.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},ua.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(et.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToBuffer:function(t,e,i){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(l.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new h),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,i){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,s)}}),it.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},a.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(st.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(xn.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Xe(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ii(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),Object.assign(h.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,i){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)}}),St.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(ht.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(ht.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(me.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Lt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Pi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ft.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Mt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Bn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Q.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new W}}}),Object.defineProperties(gi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(J.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(he.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){
console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(he.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(rt.prototype,{cullFace:{get:function(){return this.renderReverseSided?Jr:Qr},set:function(t){var e=t!==Qr;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(s.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Rn.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,i=new An;return i.load(t,function(t){e.setBuffer(t)}),this},On.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Yl={merge:function(t,e,i){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},ql={crossOrigin:void 0,loadTexture:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Mi;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,i,void 0,n);return e&&(s.mapping=e),s},loadTextureCube:function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Si;r.setCrossOrigin(this.crossOrigin);var s=r.load(t,i,void 0,n);return e&&(s.mapping=e),s},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};t.WebGLRenderTargetCube=o,t.WebGLRenderTarget=s,t.WebGLRenderer=he,t.ShaderLib=El,t.UniformsLib=xl,t.UniformsUtils=ya,t.ShaderChunk=_l,t.FogExp2=le,t.Fog=ce,t.Scene=ue,t.LensFlare=pe,t.Sprite=de,t.LOD=me,t.SkinnedMesh=ye,t.Skeleton=ge,t.Bone=ve,t.Mesh=Pt,t.LineSegments=xe,t.Line=be,t.Points=we,t.Group=Te,t.VideoTexture=Ae,t.DataTexture=Y,t.CompressedTexture=Se,t.CubeTexture=c,t.CanvasTexture=Me,t.DepthTexture=Pe,t.Texture=n,t.CompressedTextureLoader=wi,t.DataTextureLoader=Ti,t.CubeTextureLoader=Si,t.TextureLoader=Mi,t.ObjectLoader=en,t.MaterialLoader=Ji,t.BufferGeometryLoader=$i,t.DefaultLoadingManager=Il,t.LoadingManager=xi,t.JSONLoader=tn,t.ImageLoader=Ai,t.FontLoader=Tn,t.FileLoader=Ei,t.Loader=Ki,t.Cache=Rl,t.AudioLoader=An,t.SpotLightShadow=Ii,t.SpotLight=Oi,t.PointLight=Ni,t.RectAreaLight=Sn,t.HemisphereLight=Ci,t.DirectionalLightShadow=Li,t.DirectionalLight=ki,t.AmbientLight=Di,t.LightShadow=Ri,t.Light=Pi,t.StereoCamera=Mn,t.PerspectiveCamera=Lt,t.OrthographicCamera=kt,t.CubeCamera=Pn,t.Camera=Nt,t.AudioListener=Cn,t.PositionalAudio=In,t.AudioContext=Dl,t.AudioAnalyser=On,t.Audio=Rn,t.VectorKeyframeTrack=Gi,t.StringKeyframeTrack=Yi,t.QuaternionKeyframeTrack=Hi,t.NumberKeyframeTrack=Wi,t.ColorKeyframeTrack=Xi,t.BooleanKeyframeTrack=qi,t.PropertyMixer=Nn,t.PropertyBinding=Ln,t.KeyframeTrack=Zi,t.AnimationUtils=Ol,t.AnimationObjectGroup=kn,t.AnimationMixer=Fn,t.AnimationClip=Qi,t.Uniform=Bn,t.InstancedBufferGeometry=Un,t.BufferGeometry=Mt,t.GeometryIdCount=At,t.Geometry=St,t.InterleavedBufferAttribute=Vn,t.InstancedInterleavedBuffer=Gn,t.InterleavedBuffer=zn,t.InstancedBufferAttribute=jn,t.Face3=ut,t.Object3D=ht,t.Raycaster=Hn,t.Layers=at,t.EventDispatcher=e,t.Clock=qn,t.QuaternionLinearInterpolant=ji,t.LinearInterpolant=Ui,t.DiscreteInterpolant=Vi,t.CubicInterpolant=Bi,t.Interpolant=Fi,t.Triangle=ct,t.Math=ua,t.Spherical=Xn,t.Cylindrical=Zn,t.Plane=it,t.Frustum=nt,t.Sphere=tt,t.Ray=st,t.Matrix4=l,t.Matrix3=et,t.Box3=K,t.Box2=q,t.Line3=lt,t.Euler=ot,t.Vector4=r,t.Vector3=h,t.Vector2=i,t.Quaternion=a,t.Color=W,t.MorphBlendMesh=Qn,t.ImmediateRenderObject=Jn,t.VertexNormalsHelper=$n,t.SpotLightHelper=Kn,t.SkeletonHelper=tr,t.PointLightHelper=er,t.RectAreaLightHelper=ir,t.HemisphereLightHelper=nr,t.GridHelper=rr,t.PolarGridHelper=sr,t.FaceNormalsHelper=or,t.DirectionalLightHelper=ar,t.CameraHelper=hr,t.BoxHelper=lr,t.ArrowHelper=cr,t.AxisHelper=ur,t.CatmullRomCurve3=fr,t.CubicBezierCurve3=dr,t.QuadraticBezierCurve3=mr,t.LineCurve3=gr,t.ArcCurve=vr,t.EllipseCurve=gn,t.SplineCurve=vn,t.CubicBezierCurve=yn,t.QuadraticBezierCurve=_n,t.LineCurve=dn,t.Shape=xn,t.Path=bn,t.ShapePath=En,t.Font=wn,t.CurvePath=mn,t.Curve=fn,t.ShapeUtils=Ml,t.SceneUtils=jl,t.WireframeGeometry=Ce,t.ParametricGeometry=Re,t.ParametricBufferGeometry=Ie,t.TetrahedronGeometry=Le,t.TetrahedronBufferGeometry=ke,t.OctahedronGeometry=De,t.OctahedronBufferGeometry=Fe,t.IcosahedronGeometry=Be,t.IcosahedronBufferGeometry=Ue,t.DodecahedronGeometry=Ve,t.DodecahedronBufferGeometry=ze,t.PolyhedronGeometry=Oe,t.PolyhedronBufferGeometry=Ne,t.TubeGeometry=Ge,t.TubeBufferGeometry=je,t.TorusKnotGeometry=He,t.TorusKnotBufferGeometry=We,t.TorusGeometry=Ye,t.TorusBufferGeometry=qe,t.TextGeometry=Ze,t.SphereGeometry=Qe,t.SphereBufferGeometry=Je,t.RingGeometry=$e,t.RingBufferGeometry=Ke,t.PlaneGeometry=It,t.PlaneBufferGeometry=Ot,t.LatheGeometry=ti,t.LatheBufferGeometry=ei,t.ShapeGeometry=ii,t.ShapeBufferGeometry=ni,t.ExtrudeGeometry=Xe,t.EdgesGeometry=ri,t.ConeGeometry=ai,t.ConeBufferGeometry=hi,t.CylinderGeometry=si,t.CylinderBufferGeometry=oi,t.CircleGeometry=li,t.CircleBufferGeometry=ci,t.BoxGeometry=Ct,t.BoxBufferGeometry=Rt,t.ShadowMaterial=ui,t.SpriteMaterial=fe,t.RawShaderMaterial=pi,t.ShaderMaterial=J,t.PointsMaterial=Ee,t.MultiMaterial=fi,t.MeshPhysicalMaterial=mi,t.MeshStandardMaterial=di,t.MeshPhongMaterial=gi,t.MeshToonMaterial=vi,t.MeshNormalMaterial=yi,t.MeshLambertMaterial=_i,t.MeshDepthMaterial=$,t.MeshBasicMaterial=pt,t.LineDashedMaterial=bi,t.LineBasicMaterial=_e,t.Material=Q,t.Float64BufferAttribute=Et,t.Float32BufferAttribute=xt,t.Uint32BufferAttribute=bt,t.Int32BufferAttribute=_t,t.Uint16BufferAttribute=yt,t.Int16BufferAttribute=vt,t.Uint8ClampedBufferAttribute=gt,t.Uint8BufferAttribute=mt,t.Int8BufferAttribute=dt,t.BufferAttribute=ft,t.REVISION=qr,t.MOUSE=Xr,t.CullFaceNone=Zr,t.CullFaceBack=Qr,t.CullFaceFront=Jr,t.CullFaceFrontBack=$r,t.FrontFaceDirectionCW=Kr,t.FrontFaceDirectionCCW=ts,t.BasicShadowMap=es,t.PCFShadowMap=is,t.PCFSoftShadowMap=ns,t.FrontSide=rs,t.BackSide=ss,t.DoubleSide=os,t.FlatShading=as,t.SmoothShading=hs,t.NoColors=ls,t.FaceColors=cs,t.VertexColors=us,t.NoBlending=ps,t.NormalBlending=fs,t.AdditiveBlending=ds,t.SubtractiveBlending=ms,t.MultiplyBlending=gs,t.CustomBlending=vs,t.AddEquation=ys,t.SubtractEquation=_s,t.ReverseSubtractEquation=bs,t.MinEquation=xs,t.MaxEquation=Es,t.ZeroFactor=ws,t.OneFactor=Ts,t.SrcColorFactor=As,t.OneMinusSrcColorFactor=Ss,t.SrcAlphaFactor=Ms,t.OneMinusSrcAlphaFactor=Ps,t.DstAlphaFactor=Cs,t.OneMinusDstAlphaFactor=Rs,t.DstColorFactor=Is,t.OneMinusDstColorFactor=Os,t.SrcAlphaSaturateFactor=Ns,t.NeverDepth=Ls,t.AlwaysDepth=ks,t.LessDepth=Ds,t.LessEqualDepth=Fs,t.EqualDepth=Bs,t.GreaterEqualDepth=Us,t.GreaterDepth=Vs,t.NotEqualDepth=zs,t.MultiplyOperation=Gs,t.MixOperation=js,t.AddOperation=Hs,t.NoToneMapping=Ws,t.LinearToneMapping=Ys,t.ReinhardToneMapping=qs,t.Uncharted2ToneMapping=Xs,t.CineonToneMapping=Zs,t.UVMapping=Qs,t.CubeReflectionMapping=Js,t.CubeRefractionMapping=$s,t.EquirectangularReflectionMapping=Ks,t.EquirectangularRefractionMapping=to,t.SphericalReflectionMapping=eo,t.CubeUVReflectionMapping=io,t.CubeUVRefractionMapping=no,t.RepeatWrapping=ro,t.ClampToEdgeWrapping=so,t.MirroredRepeatWrapping=oo,t.NearestFilter=ao,t.NearestMipMapNearestFilter=ho,t.NearestMipMapLinearFilter=lo,t.LinearFilter=co,t.LinearMipMapNearestFilter=uo,t.LinearMipMapLinearFilter=po,t.UnsignedByteType=fo,t.ByteType=mo,t.ShortType=go,t.UnsignedShortType=vo,t.IntType=yo,t.UnsignedIntType=_o,t.FloatType=bo,t.HalfFloatType=xo,t.UnsignedShort4444Type=Eo,t.UnsignedShort5551Type=wo,t.UnsignedShort565Type=To,t.UnsignedInt248Type=Ao,t.AlphaFormat=So,t.RGBFormat=Mo,t.RGBAFormat=Po,t.LuminanceFormat=Co,t.LuminanceAlphaFormat=Ro,t.RGBEFormat=Io,t.DepthFormat=Oo,t.DepthStencilFormat=No,t.RGB_S3TC_DXT1_Format=Lo,t.RGBA_S3TC_DXT1_Format=ko,t.RGBA_S3TC_DXT3_Format=Do,t.RGBA_S3TC_DXT5_Format=Fo,t.RGB_PVRTC_4BPPV1_Format=Bo,t.RGB_PVRTC_2BPPV1_Format=Uo,t.RGBA_PVRTC_4BPPV1_Format=Vo,t.RGBA_PVRTC_2BPPV1_Format=zo,t.RGB_ETC1_Format=Go,t.LoopOnce=jo,t.LoopRepeat=Ho,t.LoopPingPong=Wo,t.InterpolateDiscrete=Yo,t.InterpolateLinear=qo,t.InterpolateSmooth=Xo,t.ZeroCurvatureEnding=Zo,t.ZeroSlopeEnding=Qo,t.WrapAroundEnding=Jo,t.TrianglesDrawMode=$o,t.TriangleStripDrawMode=Ko,t.TriangleFanDrawMode=ta,t.LinearEncoding=ea,t.sRGBEncoding=ia,t.GammaEncoding=na,t.RGBEEncoding=ra,t.LogLuvEncoding=sa,t.RGBM7Encoding=oa,t.RGBM16Encoding=aa,t.RGBDEncoding=ha,t.BasicDepthPacking=la,t.RGBADepthPacking=ca,t.CubeGeometry=Ct,t.Face4=yr,t.LineStrip=Hl,t.LinePieces=Wl,t.MeshFaceMaterial=_r,t.PointCloud=br,t.Particle=xr,t.ParticleSystem=Er,t.PointCloudMaterial=wr,t.ParticleBasicMaterial=Tr,t.ParticleSystemMaterial=Ar,t.Vertex=Sr,t.DynamicBufferAttribute=Mr,t.Int8Attribute=Pr,t.Uint8Attribute=Cr,t.Uint8ClampedAttribute=Rr,t.Int16Attribute=Ir,t.Uint16Attribute=Or,t.Int32Attribute=Nr,t.Uint32Attribute=Lr,t.Float32Attribute=kr,t.Float64Attribute=Dr,t.ClosedSplineCurve3=Fr,t.SplineCurve3=Br,t.Spline=Ur,t.BoundingBoxHelper=Vr,t.EdgesHelper=zr,t.WireframeHelper=Gr,t.XHRLoader=jr,t.BinaryTextureLoader=Hr,t.GeometryUtils=Yl,t.ImageUtils=ql,t.Projector=Wr,t.CanvasRenderer=Yr,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,i){"use strict";var n=i(52),r=function(t){this.manager=void 0!==t?t:n.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}};r.prototype={constructor:r,load:function(t,e,i,r){var s=this,o=new n.FileLoader(s.manager);o.setPath(this.path),o.load(t,function(t){e(s.parse(t))},i,r)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},_createParserState:function(){var t={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=e!==!1);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&e.groupEnd===-1&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseNormalIndex:function(t,e){var i=parseInt(t,10);return 3*(i>=0?i-1:i+e/3)},parseUVIndex:function(t,e){var i=parseInt(t,10);return 2*(i>=0?i-1:i+e/2)},addVertex:function(t,e,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[e+2]),r.push(n[i+0]),r.push(n[i+1]),r.push(n[i+2])},addVertexLine:function(t){var e=this.vertices,i=this.object.geometry.vertices;i.push(e[t+0]),i.push(e[t+1]),i.push(e[t+2])},addNormal:function(t,e,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[e+2]),r.push(n[i+0]),r.push(n[i+1]),r.push(n[i+2])},addUV:function(t,e,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[t+0]),r.push(n[t+1]),r.push(n[e+0]),r.push(n[e+1]),r.push(n[i+0]),r.push(n[i+1])},addUVLine:function(t){var e=this.uvs,i=this.object.geometry.uvs;i.push(e[t+0]),i.push(e[t+1])},addFace:function(t,e,i,n,r,s,o,a,h,l,c,u){var p,f=this.vertices.length,d=this.parseVertexIndex(t,f),m=this.parseVertexIndex(e,f),g=this.parseVertexIndex(i,f);if(void 0===n?this.addVertex(d,m,g):(p=this.parseVertexIndex(n,f),this.addVertex(d,m,p),this.addVertex(m,g,p)),void 0!==r){var v=this.uvs.length;d=this.parseUVIndex(r,v),m=this.parseUVIndex(s,v),g=this.parseUVIndex(o,v),void 0===n?this.addUV(d,m,g):(p=this.parseUVIndex(a,v),this.addUV(d,m,p),this.addUV(m,g,p))}if(void 0!==h){var y=this.normals.length;d=this.parseNormalIndex(h,y),m=h===l?d:this.parseNormalIndex(l,y),g=h===c?d:this.parseNormalIndex(c,y),void 0===n?this.addNormal(d,m,g):(p=this.parseNormalIndex(u,y),this.addNormal(d,m,p),this.addNormal(m,g,p))}},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,s=t.length;r<s;r++)this.addVertexLine(this.parseVertexIndex(t[r],i));for(var o=0,s=e.length;o<s;o++)this.addUVLine(this.parseUVIndex(e[o],n))}};return t.startObject("",!1),t},parse:function(t){console.time("OBJLoader");var e=this._createParserState();t.indexOf("\r\n")!==-1&&(t=t.replace(/\r\n/g,"\n")),t.indexOf("\\\n")!==-1&&(t=t.replace(/\\\n/g,""));for(var i=t.split("\n"),r="",s="",o="",a=0,h=[],l="function"==typeof"".trimLeft,c=0,u=i.length;c<u;c++)if(r=i[c],r=l?r.trimLeft():r.trim(),a=r.length,0!==a&&(s=r.charAt(0),"#"!==s))if("v"===s)if(o=r.charAt(1)," "===o&&null!==(h=this.regexp.vertex_pattern.exec(r)))e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));else if("n"===o&&null!==(h=this.regexp.normal_pattern.exec(r)))e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));else{if("t"!==o||null===(h=this.regexp.uv_pattern.exec(r)))throw new Error("Unexpected vertex/normal/uv line: '"+r+"'");e.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}else if("f"===s)if(null!==(h=this.regexp.face_vertex_uv_normal.exec(r)))e.addFace(h[1],h[4],h[7],h[10],h[2],h[5],h[8],h[11],h[3],h[6],h[9],h[12]);else if(null!==(h=this.regexp.face_vertex_uv.exec(r)))e.addFace(h[1],h[3],h[5],h[7],h[2],h[4],h[6],h[8]);else if(null!==(h=this.regexp.face_vertex_normal.exec(r)))e.addFace(h[1],h[3],h[5],h[7],void 0,void 0,void 0,void 0,h[2],h[4],h[6],h[8]);else{if(null===(h=this.regexp.face_vertex.exec(r)))throw new Error("Unexpected face line: '"+r+"'");e.addFace(h[1],h[2],h[3],h[4])}else if("l"===s){var p=r.substring(1).trim().split(" "),f=[],d=[];if(r.indexOf("/")===-1)f=p;else for(var m=0,g=p.length;m<g;m++){var v=p[m].split("/");""!==v[0]&&f.push(v[0]),""!==v[1]&&d.push(v[1])}e.addLineGeometry(f,d)}else if(null!==(h=this.regexp.object_pattern.exec(r))){var y=(" "+h[0].substr(1).trim()).substr(1);e.startObject(y)}else if(this.regexp.material_use_pattern.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(this.regexp.material_library_pattern.test(r))e.materialLibraries.push(r.substring(7).trim());else{if(null===(h=this.regexp.smoothing_pattern.exec(r))){if("\0"===r)continue;throw new Error("Unexpected line: '"+r+"'")}var _=h[1].trim().toLowerCase();e.object.smooth="1"===_||"on"===_;var b=e.object.currentMaterial();b&&(b.smooth=e.object.smooth)}e.finalize();var x=new n.Group;x.materialLibraries=[].concat(e.materialLibraries);for(var c=0,u=e.objects.length;c<u;c++){var E=e.objects[c],w=E.geometry,T=E.materials,A="Line"===w.type;if(0!==w.vertices.length){var S=new n.BufferGeometry;S.addAttribute("position",new n.BufferAttribute(new Float32Array(w.vertices),3)),w.normals.length>0?S.addAttribute("normal",new n.BufferAttribute(new Float32Array(w.normals),3)):S.computeVertexNormals(),w.uvs.length>0&&S.addAttribute("uv",new n.BufferAttribute(new Float32Array(w.uvs),2));for(var M=[],P=0,C=T.length;P<C;P++){var R=T[P],b=void 0;if(null!==this.materials&&(b=this.materials.create(R.name),A&&b&&!(b instanceof LineBasicMaterial))){var I=new LineBasicMaterial;I.copy(b),b=I}b||(b=A?new LineBasicMaterial:new n.MeshPhongMaterial,b.name=R.name),b.shading=R.smooth?n.SmoothShading:FlatShading,M.push(b)}var O;if(M.length>1){for(var P=0,C=T.length;P<C;P++){var R=T[P];S.addGroup(R.groupStart,R.groupCount,P)}var N=new MultiMaterial(M);O=A?new LineSegments(S,N):new n.Mesh(S,N)}else O=A?new LineSegments(S,M[0]):new n.Mesh(S,M[0]);O.name=E.name,x.add(O)}}return console.timeEnd("OBJLoader"),x}},t.exports=r},function(t,e,i){(function(e){"use strict";var n=i(52),r=function(t,i){function r(t){c=t,t.length>0?l=t[0]:i&&i("HMD not available")}function s(){var e=g.isPresenting;if(g.isPresenting=void 0!==l&&l.isPresenting,g.isPresenting){var i=l.getEyeParameters("left"),n=i.renderWidth,r=i.renderHeight;e||(_=t.getPixelRatio(),v=t.getSize(),t.setPixelRatio(1),t.setSize(2*n,r,!1))}else e&&(t.setPixelRatio(_),t.setSize(v.width,v.height,y))}function o(t){var e=2/(t.leftTan+t.rightTan),i=(t.leftTan-t.rightTan)*e*.5,n=2/(t.upTan+t.downTan),r=(t.upTan-t.downTan)*n*.5;return{scale:[e,n],offset:[i,r]}}function a(t,e,i,n){e=void 0===e||e,i=void 0===i?.01:i,n=void 0===n?1e4:n;var r=e?-1:1,s=new Matrix4,a=s.elements,h=o(t);return a[0]=h.scale[0],a[1]=0,a[2]=h.offset[0]*r,a[3]=0,a[4]=0,a[5]=h.scale[1],a[6]=-h.offset[1]*r,a[7]=0,a[8]=0,a[9]=0,a[10]=n/(i-n)*-r,a[11]=n*i/(i-n),a[12]=0,a[13]=0,a[14]=r,a[15]=0,s.transpose(),s}function h(t,e,i,n){var r=Math.PI/180,s={upTan:Math.tan(t.upDegrees*r),downTan:Math.tan(t.downDegrees*r),leftTan:Math.tan(t.leftDegrees*r),rightTan:Math.tan(t.rightDegrees*r)};return a(s,e,i,n)}var l,c,u,p,f=new n.Vector3,d=new n.Vector3,m=null;"VRFrameData"in window&&(m=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(r)["catch"](function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var g=this,v=t.getSize(),y=!1,_=t.getPixelRatio();this.getVRDisplay=function(){return l},this.setVRDisplay=function(t){l=t},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),c},this.setSize=function(e,i,n){if(v={width:e,height:i},y=n,g.isPresenting){var r=l.getEyeParameters("left");t.setPixelRatio(1),t.setSize(2*r.renderWidth,r.renderHeight,!1)}else t.setPixelRatio(_),t.setSize(e,i,n)};var b=t.domElement,x=[0,0,.5,1],E=[.5,0,.5,1];window.addEventListener("vrdisplaypresentchange",s,!1),this.setFullScreen=function(t){return new e(function(e,i){return void 0===l?void i(new Error("No VR hardware found.")):g.isPresenting===t?void e():void e(t?l.requestPresent([{source:b}]):l.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(t){return void 0!==l?l.requestAnimationFrame(t):window.requestAnimationFrame(t)},this.cancelAnimationFrame=function(t){void 0!==l?l.cancelAnimationFrame(t):window.cancelAnimationFrame(t)},this.submitFrame=function(){void 0!==l&&g.isPresenting&&l.submitFrame()},this.autoSubmitFrame=!0;var w=new n.PerspectiveCamera;w.layers.enable(1);var T=new n.PerspectiveCamera;T.layers.enable(2),this.render=function(e,i,n,r){if(l&&g.isPresenting){var s=e.autoUpdate;s&&(e.updateMatrixWorld(),e.autoUpdate=!1);var o=l.getEyeParameters("left"),a=l.getEyeParameters("right");f.fromArray(o.offset),d.fromArray(a.offset),Array.isArray(e)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var c,v,y=t.getSize(),_=l.getLayers();if(_.length){var b=_[0];c=null!==b.leftBounds&&4===b.leftBounds.length?b.leftBounds:x,v=null!==b.rightBounds&&4===b.rightBounds.length?b.rightBounds:E}else c=x,v=E;u={x:Math.round(y.width*c[0]),y:Math.round(y.height*c[1]),width:Math.round(y.width*c[2]),height:Math.round(y.height*c[3])},p={x:Math.round(y.width*v[0]),y:Math.round(y.height*v[1]),width:Math.round(y.width*v[2]),height:Math.round(y.height*v[3])},n?(t.setRenderTarget(n),n.scissorTest=!0):(t.setRenderTarget(null),t.setScissorTest(!0)),(t.autoClear||r)&&t.clear(),null===i.parent&&i.updateMatrixWorld(),i.matrixWorld.decompose(w.position,w.quaternion,w.scale),i.matrixWorld.decompose(T.position,T.quaternion,T.scale);var A=this.scale;return w.translateOnAxis(f,A),T.translateOnAxis(d,A),l.getFrameData?(l.depthNear=i.near,l.depthFar=i.far,l.getFrameData(m),w.projectionMatrix.elements=m.leftProjectionMatrix,T.projectionMatrix.elements=m.rightProjectionMatrix):(w.projectionMatrix=h(o.fieldOfView,!0,i.near,i.far),T.projectionMatrix=h(a.fieldOfView,!0,i.near,i.far)),n?(n.viewport.set(u.x,u.y,u.width,u.height),n.scissor.set(u.x,u.y,u.width,u.height)):(t.setViewport(u.x,u.y,u.width,u.height),t.setScissor(u.x,u.y,u.width,u.height)),t.render(e,w,n,r),n?(n.viewport.set(p.x,p.y,p.width,p.height),n.scissor.set(p.x,p.y,p.width,p.height)):(t.setViewport(p.x,p.y,p.width,p.height),t.setScissor(p.x,p.y,p.width,p.height)),t.render(e,T,n,r),n?(n.viewport.set(0,0,y.width,y.height),n.scissor.set(0,0,y.width,y.height),n.scissorTest=!1,t.setRenderTarget(null)):(t.setViewport(0,0,y.width,y.height),t.setScissorTest(!1)),s&&(e.autoUpdate=!0),void(g.autoSubmitFrame&&g.submitFrame())}t.render(e,i,n,r)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",s,!1)}};t.exports=r}).call(e,i(2))},function(t,e,i){"use strict";var n=i(52),r=function(t,e){function i(t){s=t,t.length>0?r=t[0]:e&&e("VR input not available.")}var r,s,o=this,a=new n.Matrix4,h=null;"VRFrameData"in window&&(h=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(i)["catch"](function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return r},this.setVRDisplay=function(t){r=t},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),s},this.getStandingMatrix=function(){return a},this.update=function(){if(r){var e;r.getFrameData&&(r.getFrameData(h),e=h.pose),!e.orientation&&r.getPose&&(e=r.getPose()),null!==e.orientation&&t.quaternion.fromArray(e.orientation),null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),this.standing&&(r.stageParameters?(t.updateMatrix(),a.fromArray(r.stageParameters.sittingToStandingTransform),t.applyMatrix(a)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(o.scale)}},this.resetPose=function(){r&&r.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){r=null}};t.exports=r},function(t,e,i){"use strict";var n=i(52);t.exports={cap:function(t,e,i){return e>i?Math.max(i,Math.min(e,t)):Math.max(e,Math.min(i,t))},rand:function(t,e){return t+Math.floor(Math.random()*(e-t))},mirrorPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.z;return i-=2*(i-e),{x:-t.x,y:t.y,z:i}},mirrorVelocity:function(t){return{x:-t.x,y:t.y,z:-t.z}},setTransparency:function(t,e){t.traverse(function(t){t instanceof n.Mesh&&(t.material.transparent=1!==e,t.material.opacity=e),t instanceof n.Line&&(t.material.transparent=1!==e,t.material.opacity=e)})}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(52),a=i(47),h=i(56),l=i(58),c=n(l),u=function(){function t(e,i){r(this,t),this.config=e,this.emitter=i,this.world=null,this.ball=null,this.net=null,this.paddle=null,this.ballNetContact=null,this.ballPaddleContact=null,this.raycaster=new o.Raycaster,this.isMobile=c["default"].isMobile(),this.speed=1}return s(t,[{key:"setupWorld",value:function(){this.world=new CANNON.World,this.world.gravity.set(0,-this.config.gravity,0),this.world.broadphase=new CANNON.NaiveBroadphase,this.world.solver.iterations=20,this.setupTable(),this.setupNet()}},{key:"setupNet",value:function(){this.net=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(this.config.tableWidth/2,this.config.netHeight/2,this.config.netThickness/2)),material:new CANNON.Material}),this.net._name="NET",this.net.position.set(0,this.config.tableHeight+this.config.netHeight/2,this.config.tablePositionZ),this.world.add(this.net)}},{key:"setupTable",value:function(){this.table=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(this.config.tableWidth/2,this.config.tableHeight/2,this.config.tableDepth/2)),material:new CANNON.Material}),this.table.position.y=this.config.tableHeight/2,this.table.position.z=this.config.tablePositionZ,this.table._name="table-2-player",this.table.addEventListener("collide",this.onBallTableCollision.bind(this)),this.world.add(this.table),this.upwardsTable=new CANNON.Body({mass:0,shape:new CANNON.Box(new CANNON.Vec3(this.config.tableWidth/2,this.config.tableHeight/2,this.config.tableDepth/4)),material:new CANNON.Material}),this.upwardsTable.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),Math.PI/2),this.upwardsTable.position.z=this.config.tablePositionZ-this.config.tableHeight/2,this.upwardsTable.position.y=this.config.tableHeight+this.config.tableDepth/4,this.upwardsTable.collisionResponse=0,this.upwardsTable._name="upwards-table",this.upwardsTable.addEventListener("collide",this.onBallTableCollision.bind(this)),this.world.add(this.upwardsTable)}},{key:"addContactMaterial",value:function(t,e,i,n){var r=new CANNON.ContactMaterial(t,e,{friction:n,restitution:i});return this.world.addContactMaterial(r),r}},{key:"addBall",value:function(){if(!this.ball){var t=new CANNON.Body({mass:this.config.ballMass,shape:new CANNON.Sphere(this.config.ballRadius),material:new CANNON.Material});t.linearDamping=.1,this.addContactMaterial(t.material,this.table.material,.7,.3),this.addContactMaterial(t.material,this.upwardsTable.material,.7,.3),t.position.y=this.config.tableHeight/2,t.position.z=this.config.tablePositionZ,this.ball=t,this.world.add(t),this.initBallPosition()}}},{key:"increaseSpeed",value:function(){this.speed=Math.min(1.01*this.speed,1.5)}},{key:"onBallPaddleCollision",value:function(t){this.increaseSpeed(),this.emitter.emit(a.EVENT.BALL_PADDLE_COLLISION,t.body);var e=t.body.position.x-t.target.position.x;e=(0,h.cap)(e/this.config.paddleSize,-1,1);var i=t.body.position.z-(this.config.tablePositionZ+this.config.tableDepth/2);if(this.config.mode===a.MODE.MULTIPLAYER)t.body.velocity.z=-3.5*this.speed+1.2*i,this.isMobile?t.body.velocity.x=-e*t.body.velocity.z*.1:t.body.velocity.x=-e*t.body.velocity.z*.4,t.body.velocity.y=2*(1/this.speed)+1.2*i;else{var n=t.target.position.x/this.config.tableWidth*.5;t.body.velocity.z=-3.5*this.speed+.8*i,this.isMobile?t.body.velocity.x=1.2*-n-e*t.body.velocity.z*.2:t.body.velocity.x=1.2*-n-e*t.body.velocity.z*.3,t.body.velocity.y=2*(1/this.speed)+.8*i}}},{key:"onBallTableCollision",value:function(t){this.emitter.emit(a.EVENT.BALL_TABLE_COLLISION,t.body,t.target)}},{key:"setPaddlePosition",value:function(t,e,i){this.paddle.position.set(t,e,i)}},{key:"initBallPosition",
value:function(){this.speed=1,this.config.mode===a.MODE.SINGLEPLAYER?(this.ball.position.set(0,1.4,this.config.tablePositionZ+.1),this.ball.velocity.x=.5*(.5-Math.random()),this.ball.velocity.y=0,this.ball.velocity.z=2,this.ball.angularVelocity.x=0,this.ball.angularVelocity.y=0,this.ball.angularVelocity.z=0):(this.ball.position.set(0,this.config.tableHeight+.2,this.config.tablePositionZ-.4*this.config.tableDepth),this.ball.velocity.z=3,this.ball.velocity.x=.5*(Math.random()-.5),this.ball.velocity.y=2,this.ball.angularVelocity.x=0,this.ball.angularVelocity.y=0,this.ball.angularVelocity.z=0)}},{key:"predictCollisions",value:function(t,e){this.raycaster.set(this.ball.position.clone(),this.ball.velocity.clone().unit()),this.raycaster.far=this.ball.velocity.clone().length()*(e/1e3)*1.1;var i=this.raycaster.intersectObjects([t],!0);i.length&&(this.emitter.emit(a.EVENT.BALL_NET_COLLISION),this.ball.position.copy(i[0].point),this.ball.velocity.x*=.2,this.ball.velocity.y*=.2,this.ball.velocity.z*=.2)}},{key:"setMode",value:function(t){this.config.mode=t}},{key:"step",value:function(t){this.world.step(1/60,t,2)}}]),t}();e["default"]=u},function(t,e){"use strict";var i={};i.base64=function(t,e){return"data:"+t+";base64,"+e},i.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},i.isFirefox=function(){return/firefox/i.test(navigator.userAgent)},i.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},i.isIFrame=function(){try{return window.self!==window.top}catch(t){return!0}},i.appendQueryParameter=function(t,e,i){var n=t.indexOf("?")<0?"?":"&";return t+=n+e+"="+i},i.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},i.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},i.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},i.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},t.exports=i},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(52),a=i(60),h=n(a),l=i(61),c=n(l),u=i(62),p=n(u),f=i(92),d=n(f),m=function(){function e(t,i,n,s){r(this,e),this.config=i,this.emitter=n,this.scene=t,this.gravity=0,this.ballRadius=.03,this.ballPaddleBounciness=1,this.ballBoxBounciness=1,this.ballInitVelocity=1,this.paddleModel="box",this.activateTween=null,this.loader=s,this.font=null,this.container=null,this.initialized=!1,this.modeWasSelected=!1}return s(e,[{key:"setup",value:function(){var e=this,i=new o.FontLoader;return new t(function(n){t.all([new t(function(t){i.load("fonts/AntiqueOlive.json",function(i){e.antique=i,t()})}),new t(function(t){i.load("fonts/Futura.json",function(i){e.font=i,t()})})]).then(function(){e.container=new o.Group,e.container.position.z=1,e.container.position.y=1.6,e.container.rotation.y=Math.PI,e.scene.add(e.container),e.initialized=!0,e.message=new p["default"](e.scene,e.config,e.font,e.antique,e.emitter),e.message.hideMessage(),e.scoreDisplay=new h["default"](e.scene,e.config,e.font),e.countdown=new c["default"](e.scene,e.config,e.antique),e.countdown.hideCountdown(),(0,d["default"])(e.font,e.loader).then(function(t){e.arrows=t,e.scene.add(t),n()})["catch"](function(t){console.warn(t)})})["catch"](function(t){console.warn(t)})})["catch"](function(t){console.warn(t)})}}]),e}();e["default"]=m}).call(e,i(2))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(52),o=i(47),a=function(){function t(e,i,r){n(this,t),this.parent=e,this.font=r,this.config=i,this.lives=[],this.setupText()}return r(t,[{key:"setupText",value:function(){var t=new s.MeshBasicMaterial({color:16777215,transparent:!0}),e=new s.TextGeometry("0",{font:this.font,size:.35,height:.001,curveSegments:3});e.computeBoundingBox(),this.opponentScore=new s.Mesh(e,t),this.selfScore=new s.Mesh(e.clone(),t.clone()),this.selfScore.rotation.y=Math.PI/2,this.opponentScore.rotation.y=-Math.PI/2,this.parent.add(this.selfScore),this.parent.add(this.opponentScore),this.setSelfScore(0),this.setOpponentScore(0),this.opponentScore.visible=this.config.mode===o.MODE.MULTIPLAYER,this.lifeGroup=new s.Group;for(var i=0;i<this.config.startLives;i+=1){e=new s.CircleGeometry(.025,32),t=new s.MeshBasicMaterial({color:16777215,transparent:!0,side:s.DoubleSide,opacity:1});var n=new s.Mesh(e,t);n.position.x=.12*i,this.lives.push(n),this.lifeGroup.add(n)}this.lifeGroup.position.z=-1.4,this.lifeGroup.position.y=this.config.tableHeight+.24,this.lifeGroup.position.x=this.config.tableWidth/2,this.lifeGroup.rotation.y=Math.PI/2,this.lifeGroup.rotation.x=Math.PI,this.lifeGroup.visible=this.config.mode===o.MODE.SINGLEPLAYER,this.parent.add(this.lifeGroup)}},{key:"setSelfScore",value:function(t){this.selfScore.geometry.dynamic=!0,this.selfScore.geometry=new s.TextGeometry(""+t,{font:this.font,size:.35,height:.001,curveSegments:3}),this.selfScore.geometry.computeBoundingBox(),this.selfScore.geometry.verticesNeedUpdate=!0,this.selfScore.position.x=-this.config.tableWidth/2,this.selfScore.position.y=this.config.tableHeight+.2,this.selfScore.position.z=this.config.tablePositionZ+this.config.tableDepth/2.8+this.selfScore.geometry.boundingBox.max.x/2}},{key:"setOpponentScore",value:function(t){this.opponentScore.geometry=new s.TextGeometry(""+t,{font:this.font,size:.35,height:.001,curveSegments:3}),this.opponentScore.geometry.computeBoundingBox(),this.opponentScore.position.x=this.config.tableWidth/2,this.opponentScore.position.y=this.config.tableHeight+.2,this.opponentScore.position.z=this.config.tablePositionZ-this.config.tableDepth/4-this.opponentScore.geometry.boundingBox.max.x/2+.2}},{key:"setLives",value:function(t){this.lives.forEach(function(e,i){e.material.opacity=t>i?1:.3})}},{key:"hide",value:function(){this.opponentScore.visible=!1,this.selfScore.visible=!1,this.lives.forEach(function(t){t.visible=!1})}},{key:"show",value:function(t){this.opponentScore.visible=t,this.selfScore.visible=!0,this.lives.forEach(function(e){e.visible=!t})}}]),t}();e["default"]=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(52),o=.4,a=function(){function t(e,i,r){n(this,t),this.scene=e,this.font=r,this.config=i;var a=new s.MeshBasicMaterial({color:16777215,transparent:!0}),h=new s.TextGeometry("5",{font:this.font,size:o,height:.001,curveSegments:3});h.computeBoundingBox(),this.countdown=new s.Mesh(h,a),this.countdown.position.x=-h.boundingBox.max.x/2,this.countdown.position.y=this.config.tableHeight+.2,this.countdown.position.z=this.config.tablePositionZ+.5,this.scene.add(this.countdown)}return r(t,[{key:"setCountdown",value:function(t){var e=new s.TextGeometry(t,{font:this.font,size:o,height:.001,curveSegments:3});e.computeBoundingBox(),this.countdown.geometry=e,this.countdown.position.x=-e.boundingBox.max.x/2,this.countdown.position.y=this.config.tableHeight+.4}},{key:"showCountdown",value:function(){this.setCountdown(5),this.countdown.visible=!0}},{key:"hideCountdown",value:function(){this.countdown.visible=!1}}]),t}();e["default"]=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(63),h=n(a),l=i(64),c=n(l),u=i(52),p=i(8),f=n(p),d=i(91),m=n(d),g=16,v=.07,y=.06,_=function(){function t(e,i,n,r,o){s(this,t),this.emitter=o,this.scene=e,this.font=n,this.config=i,this.wrap=(0,h["default"])(g),this.buttons={},this.antique=r,this.messageGroup=new u.Group,this.intersectedButton=null,this.scene.add(this.messageGroup),this.setMessage("waiting"),this.showMessage()}return o(t,[{key:"setMessage",value:function(t){var e,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"futura";(e=this.messageGroup).remove.apply(e,r(this.messageGroup.children));var s=[];s=f["default"].isArray(t)?t.reverse():this.wrap(t).split("\n").reverse();var o=new u.MeshBasicMaterial({color:16777215,transparent:!0}),a=0;s.forEach(function(t,e){var r=new u.TextGeometry(t,{font:"futura"===n?i.font:i.antique,size:"futura"===n?v:.15,height:.001,curveSegments:3});r.computeBoundingBox();var s=new u.Mesh(r,o);s.geometry=r,s.position.x=-r.boundingBox.max.x/2,s.position.y=e*(r.boundingBox.max.y+y),i.messageGroup.add(s),a=r.boundingBox.max.y});var h=s.length*(y+a);this.messageGroup.position.y=this.config.tableHeight+.6-h/2,this.messageGroup.position.z=this.config.tablePositionZ+.5}},{key:"gameOver",value:function(t){var e,i=t.self||t.opponent;(e=this.messageGroup).remove.apply(e,r(this.messageGroup.children));var n=new u.MeshBasicMaterial({color:16777215,transparent:!0}),s="";s=i?t.self>t.opponent?"YOU WON":"YOU LOST":t.highest+" "+(1===t.highest?"PT":"PTS");var o=new u.TextGeometry(s,{font:this.antique,size:v*(i?2.5:3.5),height:.001,curveSegments:3});o.computeBoundingBox();var a=new u.Mesh(o,n);a.position.x=-o.boundingBox.max.x/2,a.position.y=i?.25:.1,this.messageGroup.add(a);var h=i?-.15:-.1;if(this.buttons.exit=new m["default"](this.messageGroup,this.font,"exit",.25,h,this.emitter),this.buttons.restart=new m["default"](this.messageGroup,this.font,"restart",(-.25),h,this.emitter),i){o=new u.TextGeometry("You: "+t.self+" Opponent: "+t.opponent,{font:this.font,size:v,height:.001,curveSegments:3}),o.computeBoundingBox();var l=new u.Mesh(o,n);l.position.x=-o.boundingBox.max.x/2,l.position.y=.07,this.messageGroup.add(l)}this.messageGroup.position.y=this.config.tableHeight+.3}},{key:"showMessage",value:function(){this.messageGroup.visible=!0}},{key:"hideMessage",value:function(){this.messageGroup.visible=!1}},{key:"intersect",value:function(t,e){var i=t.intersectObjects((0,c["default"])(this.buttons).map(function(t){return t.hitbox}),!1);i.length>0&&!this.intersectedButton?(this.intersectedButton=i[0].object._name,e?this.buttons[this.intersectedButton].mouseEnter():this.buttons[this.intersectedButton].enter()):0===i.length&&this.intersectedButton&&(e?this.buttons[this.intersectedButton].mouseLeave():this.buttons[this.intersectedButton].leave(),this.intersectedButton=null)}},{key:"click",value:function(){this.intersectedButton&&(this.buttons[this.intersectedButton].emit(),this.intersectedButton=null)}}]),t}();e["default"]=_},function(t,e){var i=t.exports=function(t,e,i){"object"==typeof t&&(i=t,t=i.start,e=i.stop),"object"==typeof e&&(i=e,t=t||i.start,e=void 0),e||(e=t,t=0),i||(i={});var n=i.mode||"soft",r="hard"===n?/\b/:/(\S+\s+)/;return function(i){var s=i.toString().split(r).reduce(function(i,r){if("hard"===n)for(var s=0;s<r.length;s+=e-t)i.push(r.slice(s,s+e-t));else i.push(r);return i},[]);return s.reduce(function(i,n){if(""===n)return i;var r=n.replace(/\t/g,"    "),s=i.length-1;if(i[s].length+r.length>e)i[s]=i[s].replace(/\s+$/,""),r.split(/\n/).forEach(function(e){i.push(new Array(t+1).join(" ")+e.replace(/^\s+/,""))});else if(r.match(/\n/)){var o=r.split(/\n/);i[s]+=o.shift(),o.forEach(function(e){i.push(new Array(t+1).join(" ")+e.replace(/^\s+/,""))})}else i[s]+=r;return i},[new Array(t+1).join(" ")]).join("\n")}};i.soft=i,i.hard=function(t,e){return i(t,e,{mode:"hard"})}},function(t,e,i){"use strict";var n=i(65),r=i(69),s=i(89),o=i(90),a=s();n(a,{getPolyfill:s,implementation:r,shim:o}),t.exports=a},function(t,e,i){"use strict";var n=i(66),r=i(68),s="function"==typeof Symbol&&"symbol"==typeof Symbol(),o=Object.prototype.toString,a=function(t){return"function"==typeof t&&"[object Function]"===o.call(t)},h=function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(i){return!1}},l=Object.defineProperty&&h(),c=function(t,e,i,n){(!(e in t)||a(n)&&n())&&(l?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},u=function(t,e){var i=arguments.length>2?arguments[2]:{},o=n(e);s&&(o=o.concat(Object.getOwnPropertySymbols(e))),r(o,function(n){c(t,n,e[n],i[n])})};u.supportsDescriptors=!!l,t.exports=u},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,s=Array.prototype.slice,o=i(67),a=Object.prototype.propertyIsEnumerable,h=!a.call({toString:null},"toString"),l=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},p={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),d=function(t){if("undefined"==typeof window||!f)return u(t);try{return u(t)}catch(e){return!1}},m=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===r.call(t),s=o(t),a=e&&"[object String]"===r.call(t),u=[];if(!e&&!i&&!s)throw new TypeError("Object.keys called on a non-object");var p=l&&i;if(a&&t.length>0&&!n.call(t,0))for(var f=0;f<t.length;++f)u.push(String(f));if(s&&t.length>0)for(var m=0;m<t.length;++m)u.push(String(m));else for(var g in t)p&&"prototype"===g||!n.call(t,g)||u.push(String(g));if(h)for(var v=d(t),y=0;y<c.length;++y)v&&"constructor"===c[y]||!n.call(t,c[y])||u.push(c[y]);return u};m.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return e(o(t)?s.call(t):t)}}}else Object.keys=m;return Object.keys||m},t.exports=m},function(t,e){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},function(t,e){var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,e,r){if("[object Function]"!==n.call(e))throw new TypeError("iterator must be a function");var s=t.length;if(s===+s)for(var o=0;o<s;o++)e.call(r,t[o],o,t);else for(var a in t)i.call(t,a)&&e.call(r,t[a],a,t)}},function(t,e,i){"use strict";var n=i(70),r=i(88),s=i(83),o=s.call(Function.call,Object.prototype.propertyIsEnumerable);t.exports=function(t){var e=n.RequireObjectCoercible(t),i=[];for(var s in e)r(e,s)&&o(e,s)&&i.push(e[s]);return i}},function(t,e,i){"use strict";var n=i(71),r=i(74),s=r(n,{SameValueNonNumber:function(t,e){if("number"==typeof t||typeof t!=typeof e)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(t,e)}});t.exports=s},function(t,e,i){"use strict";var n=Object.prototype.toString,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,s=r?Symbol.prototype.toString:n,o=i(72),a=i(73),h=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,l=i(74),c=i(75),u=i(76),p=i(77),f=i(78),d=parseInt,m=i(83),g=m.call(Function.call,String.prototype.slice),v=m.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),y=m.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),_=["","",""].join(""),b=new RegExp("["+_+"]","g"),x=m.call(Function.call,RegExp.prototype.test,b),E=/^[-+]0x[0-9a-f]+$/i,w=m.call(Function.call,RegExp.prototype.test,E),T=["\t\n\x0B\f\r ","\u2028","\u2029\ufeff"].join(""),A=new RegExp("(^["+T+"]+)|(["+T+"]+$)","g"),S=m.call(Function.call,String.prototype.replace),M=function(t){return S(t,A,"")},P=i(85),C=i(87),R=l(l({},P),{Call:function(t,e){var i=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new TypeError(t+" is not a function");return t.apply(e,i)},ToPrimitive:f,ToNumber:function(t){var e=p(t)?t:f(t,"number");if("symbol"==typeof e)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof e){if(v(e))return this.ToNumber(d(g(e,2),2));if(y(e))return this.ToNumber(d(g(e,2),8));if(x(e)||w(e))return NaN;var i=M(e);if(i!==e)return this.ToNumber(i)}return Number(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(o(e)||0===e||!a(e))return 0;var i=c(e)*Math.floor(Math.abs(e));return u(i,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(o(e)||e<=0)return 0;if(e>=255)return 255;var i=Math.floor(t);return i+.5<e?i+1:e<i+.5?i:i%2!==0?i+1:i},ToString:function(t){if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a string");return String(t)},ToObject:function(t){return this.RequireObjectCoercible(t),Object(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,String);return"symbol"==typeof e?s.call(e):this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>h?h:e},CanonicalNumericIndexString:function(t){if("[object String]"!==n.call(t))throw new TypeError("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:P.CheckObjectCoercible,IsArray:Array.isArray||function(t){return"[object Array]"===n.call(t)},IsConstructor:function(t){return"function"==typeof t&&!!t.prototype},IsExtensible:function(t){return!Object.preventExtensions||!p(t)&&Object.isExtensible(t)},IsInteger:function(t){if("number"!=typeof t||o(t)||!a(t))return!1;var e=Math.abs(t);return Math.floor(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(r){var e=t[Symbol.match];if("undefined"!=typeof e)return P.ToBoolean(e)}return C(t)},SameValueZero:function(t,e){return t===e||o(t)&&o(e)},GetV:function(t,e){if(!this.IsPropertyKey(e))throw new TypeError("Assertion failed: IsPropertyKey(P) is not true");var i=this.ToObject(t);return i[e]},GetMethod:function(t,e){if(!this.IsPropertyKey(e))throw new TypeError("Assertion failed: IsPropertyKey(P) is not true");var i=this.GetV(t,e);if(null!=i){if(!this.IsCallable(i))throw new TypeError(e+"is not a function");return i}},Get:function(t,e){if("Object"!==this.Type(t))throw new TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new TypeError("Assertion failed: IsPropertyKey(P) is not true");return t[e]},Type:function(t){return"symbol"==typeof t?"Symbol":P.Type(t)},SpeciesConstructor:function(t,e){if("Object"!==this.Type(t))throw new TypeError("Assertion failed: Type(O) is not Object");var i=t.constructor;if("undefined"==typeof i)return e;if("Object"!==this.Type(i))throw new TypeError("O.constructor is not an Object");var n=r&&Symbol.species?i[Symbol.species]:void 0;if(null==n)return e;if(this.IsConstructor(n))return n;throw new TypeError("no constructor found")}});delete R.CheckObjectCoercible,t.exports=R},function(t,e){t.exports=Number.isNaN||function(t){return t!==t}},function(t,e){var i=Number.isNaN||function(t){return t!==t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!i(t)&&t!==1/0&&t!==-(1/0)}},function(t,e){var i=Object.prototype.hasOwnProperty;t.exports=Object.assign||function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);return t}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e){t.exports=function(t,e){var i=t%e;return Math.floor(i>=0?i:i+e)}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,r=i(79),s=i(80),o=i(81),a=i(82),h=function(t,e){if("undefined"==typeof t||null===t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var i,n,o,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<a.length;++o)if(i=t[a[o]],s(i)&&(n=i.call(t),r(n)))return n;throw new TypeError("No default value")},l=function(t,e){var i=t[e];if(null!==i&&"undefined"!=typeof i){if(!s(i))throw new TypeError(i+" returned for property "+e+" of object "+t+" is not a function");return i}};t.exports=function(t,e){if(r(t))return t;var i="default";arguments.length>1&&(e===String?i="string":e===Number&&(i="number"));var s;if(n&&(Symbol.toPrimitive?s=l(t,Symbol.toPrimitive):a(t)&&(s=Symbol.prototype.valueOf)),"undefined"!=typeof s){var c=s.call(t,i);if(r(c))return c;throw new TypeError("unable to convert exotic object to primitive")}return"default"===i&&(o(t)||a(t))&&(i="string"),h(t,"default"===i?"number":i)}},77,function(t,e){"use strict";var i=Function.prototype.toString,n=/^\s*class /,r=function(t){try{var e=i.call(t),r=e.replace(/\/\/.*\n/g,""),s=r.replace(/\/\*[.\s\S]*\*\//g,""),o=s.replace(/\n/gm," ").replace(/ {2}/g," ");return n.test(o)}catch(a){return!1}},s=function(t){try{return!r(t)&&(i.call(t),!0)}catch(e){return!1}},o=Object.prototype.toString,a="[object Function]",h="[object GeneratorFunction]",l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return s(t);if(r(t))return!1;var e=o.call(t);return e===a||e===h}},function(t,e){"use strict";var i=Date.prototype.getDay,n=function(t){try{return i.call(t),!0}catch(e){return!1}},r=Object.prototype.toString,s="[object Date]",o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(o?n(t):r.call(t)===s)}},function(t,e){"use strict";var i=Object.prototype.toString,n="function"==typeof Symbol&&"symbol"==typeof Symbol();if(n){var r=Symbol.prototype.toString,s=/^Symbol\(.*\)$/,o=function(t){return"symbol"==typeof t.valueOf()&&s.test(r.call(t))};t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==i.call(t))return!1;try{return o(t)}catch(e){return!1}}}else t.exports=function(t){return!1}},function(t,e,i){var n=i(84);t.exports=Function.prototype.bind||n},function(t,e){var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,s="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||r.call(e)!==s)throw new TypeError(i+e);for(var o,a=n.call(arguments,1),h=function(){if(this instanceof o){var i=e.apply(this,a.concat(n.call(arguments)));return Object(i)===i?i:this}return e.apply(t,a.concat(n.call(arguments)))},l=Math.max(0,e.length-a.length),c=[],u=0;u<l;u++)c.push("$"+u);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(h),e.prototype){var p=function(){};p.prototype=e.prototype,o.prototype=new p,p.prototype=null}return o}},function(t,e,i){"use strict";var n=i(72),r=i(73),s=i(75),o=i(76),a=i(80),h=i(86),l={ToPrimitive:h,ToBoolean:function(t){return Boolean(t)},ToNumber:function(t){return Number(t)},ToInteger:function(t){var e=this.ToNumber(t);return n(e)?0:0!==e&&r(e)?s(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(n(e)||0===e||!r(e))return 0;var i=s(e)*Math.floor(Math.abs(e));return o(i,65536)},ToString:function(t){return String(t)},ToObject:function(t){return this.CheckObjectCoercible(t),Object(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new TypeError(e||"Cannot call method on "+t);return t},IsCallable:a,SameValue:function(t,e){return t===e?0!==t||1/t===1/e:n(t)&&n(e)},Type:function(t){return null===t?"Null":"undefined"==typeof t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0}};t.exports=l},function(t,e,i){"use strict";var n=Object.prototype.toString,r=i(79),s=i(80),o={"[[DefaultValue]]":function(t,e){var i=e||("[object Date]"===n.call(t)?String:Number);if(i===String||i===Number){var o,a,h=i===String?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<h.length;++a)if(s(t[h[a]])&&(o=t[h[a]](),r(o)))return o;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};t.exports=function(t,e){return r(t)?t:o["[[DefaultValue]]"](t,e)}},function(t,e){"use strict";var i=RegExp.prototype.exec,n=function(t){try{return i.call(t),!0}catch(e){return!1}},r=Object.prototype.toString,s="[object RegExp]",o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&(o?n(t):r.call(t)===s)}},function(t,e,i){var n=i(83);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,i){"use strict";var n=i(69);t.exports=function(){return"function"==typeof Object.values?Object.values:n}},function(t,e,i){"use strict";var n=i(89),r=i(65);t.exports=function(){var t=n();return r(Object,{values:t},{values:function(){return Object.values!==t}}),t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(52),o=i(6),a=i(47),h=function(){function t(e,i,r,o,a,h){n(this,t),this.font=i,this.emitter=h,this.parent=e,this.name=r,this.button=null,this.text=null,this.loader=new s.TextureLoader,this.loader.setPath("/textures/"),this.buttonGroup=new s.Group,this.buttonWidth=.4,this.buttonHeight=.2,this.borderWidth=.01,this.makeButton(o,a),this.borderAnimation()}return r(t,[{key:"makeButton",value:function(t,e){var i=new s.MeshBasicMaterial({color:16777215,side:s.DoubleSide,transparent:!0,opacity:.5}),n=new s.PlaneGeometry(this.buttonWidth,this.borderWidth),r=new s.Mesh(n,i);r.position.y=this.buttonHeight/2-this.borderWidth/2,this.buttonGroup.add(r),n=new s.PlaneGeometry(this.buttonWidth,this.borderWidth),r=new s.Mesh(n,i),r.position.y=-this.buttonHeight/2+this.borderWidth/2,this.buttonGroup.add(r),n=new s.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),r=new s.Mesh(n,i),r.position.x=-this.buttonWidth/2+this.borderWidth/2,this.buttonGroup.add(r),n=new s.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),r=new s.Mesh(n,i),r.position.x=this.buttonWidth/2-this.borderWidth/2,this.buttonGroup.add(r);var o=new s.Group;i=new s.MeshBasicMaterial({color:16777215,side:s.DoubleSide}),n=new s.PlaneGeometry(this.buttonWidth,this.borderWidth),this.topAnimationBorder=new s.Mesh(n,i),n.translate(this.buttonWidth/2,0,0),this.topAnimationBorder.position.x=-this.buttonWidth/2,this.topAnimationBorder.position.y=this.buttonHeight/2-this.borderWidth/2,this.topAnimationBorder.scale.x=.001,o.add(this.topAnimationBorder),n=new s.PlaneGeometry(this.buttonWidth,this.borderWidth),this.bottomAnimationBorder=new s.Mesh(n,i),n.translate(-this.buttonWidth/2,0,0),this.bottomAnimationBorder.position.x=this.buttonWidth/2,this.bottomAnimationBorder.position.y=-this.buttonHeight/2+this.borderWidth/2,this.bottomAnimationBorder.scale.x=.001,o.add(this.bottomAnimationBorder),n=new s.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),this.leftAnimationBorder=new s.Mesh(n,i),n.translate(0,this.buttonHeight/2-this.borderWidth,0),this.leftAnimationBorder.position.y=-(this.buttonHeight/2-this.borderWidth),this.leftAnimationBorder.position.x=-this.buttonWidth/2+this.borderWidth/2,this.leftAnimationBorder.scale.y=.001,o.add(this.leftAnimationBorder),n=new s.PlaneGeometry(this.borderWidth,this.buttonHeight-2*this.borderWidth),this.rightAnimationBorder=new s.Mesh(n,i),n.translate(0,-(this.buttonHeight/2-this.borderWidth),0),this.rightAnimationBorder.position.y=this.buttonHeight/2-this.borderWidth,this.rightAnimationBorder.position.x=this.buttonWidth/2-this.borderWidth/2,this.rightAnimationBorder.scale.y=.001,o.add(this.rightAnimationBorder),o.position.z=.002,this.buttonGroup.add(o),n=new s.PlaneGeometry(this.buttonWidth,this.buttonHeight),i=new s.MeshBasicMaterial({transparent:!0,opacity:0}),this.hitbox=new s.Mesh(n,i),this.hitbox.position.z=-.001,this.hitbox._name=this.name,this.buttonGroup.add(this.hitbox),this.buttonGroup.position.x=t,this.buttonGroup.position.y=e,this.setupText(),this.parent.add(this.buttonGroup);
}},{key:"setupText",value:function(){var t=new s.MeshBasicMaterial({color:16777215}),e=new s.TextGeometry(this.name.toUpperCase(),{font:this.font,size:.04,height:.001,curveSegments:3});e.computeBoundingBox(),this.text=new s.Mesh(e,t),this.text.position.x=-e.boundingBox.max.x/2,this.text.position.y=-e.boundingBox.max.y/2,this.text.position.z=.01,this.buttonGroup.add(this.text)}},{key:"borderAnimation",value:function(){this.timeline=new o.TimelineMax({paused:!0});var t=o.Power0.easeNone,e=2,i=2*this.buttonWidth+2*this.buttonHeight;this.timeline.to(this.topAnimationBorder.scale,e*(this.buttonWidth/i),{ease:t,x:1}),this.timeline.to(this.rightAnimationBorder.scale,e*(this.buttonHeight/i),{ease:t,y:1}),this.timeline.to(this.bottomAnimationBorder.scale,e*(this.buttonWidth/i),{ease:t,x:1}),this.timeline.to(this.leftAnimationBorder.scale,e*(this.buttonHeight/i),{ease:t,y:1}),this.timeline.call(this.emit.bind(this))}},{key:"emit",value:function(){switch(this.timeline.pause(),this.timeline.seek(0),document.body.style.cursor="initial",this.name){case"restart":this.emitter.emit(a.EVENT.RESTART_BUTTON_PRESSED);break;case"exit":this.emitter.emit(a.EVENT.EXIT_BUTTON_PRESSED);break;default:console.warn("unknown button")}}},{key:"mouseEnter",value:function(){document.body.style.cursor="pointer",this.rightAnimationBorder.scale.y=1,this.leftAnimationBorder.scale.y=1,this.topAnimationBorder.scale.x=1,this.bottomAnimationBorder.scale.x=1}},{key:"mouseLeave",value:function(){document.body.style.cursor="initial",this.rightAnimationBorder.scale.y=.001,this.leftAnimationBorder.scale.y=.001,this.topAnimationBorder.scale.x=.001,this.bottomAnimationBorder.scale.x=.001}},{key:"enter",value:function(){this.timeline.play(0)}},{key:"leave",value:function(){this.timeline.pause(),this.timeline.seek(0)}}]),t}();e["default"]=h},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(52);e["default"]=function(e,i){return new t(function(t){i.load("arrows.obj",function(e){var i=.9;e.scale.set(i,i,i);var r=new n.MeshLambertMaterial({color:16777215,side:n.DoubleSide});e.traverse(function(t){t instanceof n.Mesh&&(t.material=r)}),e.position.z=280,e.position.y=0;var s=new n.Group;s.add(e),t(s)})})}}).call(e,i(2))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(94),a=i(8),h=n(a),l=i(56),c=i(47),u={urls:["/audio/output.ogg","/audio/output.m4a","/audio/output.mp3","/audio/output.ac3"],sprite:{button:[0,1008.9795918367348],joined:[3e3,1019.8412698412698],lose:[6e3,1202.698412698412],miss:[9e3,523.5147392290252],net:[11e3,523.5147392290252],point:[13e3,792.0181405895689],racket01:[15e3,504.9659863945575],racket02:[17e3,504.96598639455925],racket03:[19e3,504.96598639455925],table01:[21e3,523.5147392290252],table02:[23e3,523.5147392290252],table03:[25e3,523.5147392290252],touch:[27e3,523.5147392290252],transition:[29e3,1019.8412698412689],type:[32e3,27.188208616777843],win:[34e3,1202.6984126984103]}},p=function(){function t(e){var i=this;r(this,t),this.config=e,this.muted=!1,this.error=!0,this.uiSprite=new o.Howl({src:u.urls,sprite:u.sprite,onload:function(){console.log("loaded"),i.error=!1}});var n="/audio/loops/";this.loopSounds=new Map,this.loopSounds.set("bass",new o.Howl({loop:!0,src:[n+"loop1-bass.mp3",n+"loop1-bass.ogg"],onload:function(){i.loopSounds.get("bass").play()}})),this.loopSounds.set("bass-pad",new o.Howl({loop:!0,src:[n+"loop1-bass-pad.mp3",n+"loop1-bass-pad.ogg"]})),this.loopSounds.set("bass-pad-synth",new o.Howl({loop:!0,src:[n+"loop1-bass-pad-synth.mp3",n+"loop1-bass-pad-synth.ogg"]})),this.loopSounds.set("waiting",new o.Howl({loop:!0,src:[n+"waiting.mp3",n+"waiting.ogg"]})),"true"===localStorage.muted&&this.mute()}return s(t,[{key:"playLoop",value:function(t){var e=this;if(!this.error){var i=0;this.loopSounds.forEach(function(t,n){e.loopSounds.get(n).playing()&&(i=e.loopSounds.get(n).seek(),e.loopSounds.get(n).stop())}),this.loopSounds.get(t).seek(i),this.loopSounds.get(t).play()}}},{key:"playUI",value:function(t){this.error||this.uiSprite.play(t)}},{key:"paddle",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0};if(!this.error){var t="racket0"+(0,l.rand)(1,4);this.uiSprite.play(t)}}},{key:"table",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:-1,z:-1};if(!(this.error||t.y>this.config.tableHeight+.1&&this.config.mode===c.MODE.MULTIPLAYER)){var i="table0"+(0,l.rand)(1,4);this.uiSprite.pos(t.x,t.y,t.z),t.y>this.config.tableHeight+.1?this.uiSprite.volume((0,l.cap)(e.z*-.5,0,1)):this.uiSprite.volume((0,l.cap)(e.y*-.5,0,1)),this.uiSprite.play(i)}}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"blur",value:function(){o.Howler.mute(!0)}},{key:"focus",value:function(){this.muted||o.Howler.mute(!1)}},{key:"mute",value:function(){(0,h["default"])(".mute img").attr("src","images/icon-mute-596bf2fb7a.svg"),localStorage.muted="true",o.Howler.mute(!0),this.muted=!0}},{key:"unmute",value:function(){(0,h["default"])(".mute img").attr("src","images/icon-unmute-cbfe8e0389.svg"),localStorage.muted="false",o.Howler.mute(!1),this.muted=!1}}]),t}();e["default"]=p},function(t,e,i){var n,r;(function(i){/*!
	 *  howler.js v2.0.2
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){"use strict";var s=function(){this.init()};s.prototype={init:function(){var t=this||o;return t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||d(),"undefined"!=typeof t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||d(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&"undefined"!=typeof t.ctx.close&&(t.ctx.close(),t.ctx=null,d()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;"undefined"==typeof e.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(i){t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch(i){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(i){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),s=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(s||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||o,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),i=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||i)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var n=function(){var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",n,!0)}};return document.addEventListener("touchend",n,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&"undefined"!=typeof t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&"undefined"!=typeof t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.state="resuming",t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new s,a=function(t){var e=this;return t.src&&0!==t.src.length?void e.init(t):void console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return o.ctx||d(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,"undefined"!=typeof o.ctx&&o.ctx&&o.mobileAutoEnable&&o._enableMobileAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(o.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if(r=t._src[i],"string"!=typeof r){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=/^data:audio\/([^;,]+);/i.exec(r),n||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(o.codecs(n)){e=t._src[i];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new h(t),t._webAudio&&c(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if("undefined"==typeof t){t="__default";for(var r=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(r++,n=i._sounds[s]._id);1===r?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state&&!i._sprite[t])return i._queue.push({event:"play",action:function(){i.play(i._soundById(a._id)?a._id:void 0)}}),a._id;if(n&&!a._paused)return e||setTimeout(function(){i._emit("play",a._id)},0),a._id;i._webAudio&&o._autoResume();var h=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),l=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-h),c=1e3*l/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=h,a._start=i._sprite[t][0]/1e3,a._stop=(i._sprite[t][0]+i._sprite[t][1])/1e3,a._loop=!(!a._loop&&!i._sprite[t][2]);var u=a._node;if(i._webAudio){var p=function(){i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;u.gain.setValueAtTime(t,o.ctx.currentTime),a._playStart=o.ctx.currentTime,"undefined"==typeof u.bufferSource.start?a._loop?u.bufferSource.noteGrainOn(0,h,86400):u.bufferSource.noteGrainOn(0,h,l):a._loop?u.bufferSource.start(0,h,86400):u.bufferSource.start(0,h,l),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout(function(){i._emit("play",a._id)},0)},f="running"===o.state;"loaded"===i._state&&f?p():(i.once(f?"load":"resume",p,f?a._id:null),i._clearTimer(a._id))}else{var d=function(){u.currentTime=h,u.muted=a._muted||i._muted||o._muted||u.muted,u.volume=a._volume*o.volume(),u.playbackRate=a._rate,setTimeout(function(){u.play(),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||i._emit("play",a._id)},0)},m="loaded"===i._state&&(window&&window.ejecta||!u.readyState&&o._navigator.isCocoonJS);if(4===u.readyState||m)d();else{var g=function(){d(),u.removeEventListener(o._canPlayEvent,g,!1)};u.addEventListener(o._canPlayEvent,g,!1),i._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)return e;"undefined"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);if(s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node))if(i._webAudio){if(!s._node.bufferSource)return e||i._emit("stop",s._id),i;"undefined"==typeof s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause());s&&!e&&i._emit("stop",s._id)}return i},mute:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if("undefined"==typeof e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var s=i._soundById(n[r]);s&&(s._muted=t,i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i=this,n=arguments;if(0===n.length)return i._volume;if(1===n.length||2===n.length&&"undefined"==typeof n[1]){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else n.length>=2&&(t=parseFloat(n[0]),e=parseInt(n[1],10));var a;if(!("undefined"!=typeof t&&t>=0&&t<=1))return a=e?i._soundById(e):i._sounds[0],a?a._volume:0;if("loaded"!==i._state)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,n)}}),i;"undefined"==typeof e&&(i._volume=t),e=i._getSoundIds(e);for(var h=0;h<e.length;h++)a=i._soundById(e[h]),a&&(a._volume=t,n[2]||i._stopFade(e[h]),i._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(t,o.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=t*o.volume()),i._emit("volume",a._id));return i},fade:function(t,e,i,n){var r=this,s=Math.abs(t-e),a=t>e?"out":"in",h=s/.01,l=h>0?i/h:i;if(l<4&&(h=Math.ceil(h/(4/l)),l=4),"loaded"!==r._state)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;r.volume(t,n);for(var c=r._getSoundIds(n),u=0;u<c.length;u++){var p=r._soundById(c[u]);if(p){if(n||r._stopFade(c[u]),r._webAudio&&!p._muted){var f=o.ctx.currentTime,d=f+i/1e3;p._volume=t,p._node.gain.setValueAtTime(t,f),p._node.gain.linearRampToValueAtTime(e,d)}var m=t;p._interval=setInterval(function(t,i){h>0&&(m+="in"===a?.01:-.01),m=Math.max(0,m),m=Math.min(1,m),m=Math.round(100*m)/100,r._webAudio?("undefined"==typeof n&&(r._volume=m),i._volume=m):r.volume(m,t,!0),m===e&&(clearInterval(i._interval),i._interval=null,r.volume(m,t),r._emit("fade",t))}.bind(r,c[u],p),l)}}return r},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(i._interval),i._interval=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return i=n._soundById(parseInt(r[0],10)),!!i&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s=n._getSoundIds(e),o=0;o<s.length;o++)i=n._soundById(s[o]),i&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));var a;if("number"!=typeof t)return a=i._soundById(e),a?a._rate:i._rate;if("loaded"!==i._state)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,n)}}),i;"undefined"==typeof e&&(i._rate=t),e=i._getSoundIds(e);for(var h=0;h<e.length;h++)if(a=i._soundById(e[h])){a._rateSeek=i.seek(e[h]),a._playStart=i._webAudio?o.ctx.currentTime:a._playStart,a._rate=t,i._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=t:a._node&&(a._node.playbackRate=t);var l=i.seek(e[h]),c=(i._sprite[a._sprite][0]+i._sprite[a._sprite][1])/1e3-l,u=1e3*c/Math.abs(a._rate);!i._endTimers[e[h]]&&a._paused||(i._clearTimer(e[h]),i._endTimers[e[h]]=setTimeout(i._ended.bind(i,a),u)),i._emit("rate",a._id)}return i},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("undefined"==typeof e)return i;if("loaded"!==i._state)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?o.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+h*Math.abs(a._rate))}return a._node.currentTime}var c=i.playing(e);c&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),c&&i.play(e,!0),!i._webAudio&&a._node&&(a._node.currentTime=t),i._emit("seek",e)}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++){e[i]._paused||(t.stop(e[i]._id),t._emit("end",e[i]._id)),t._webAudio||(e[i]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(o._canPlayEvent,e[i]._loadFn,!1)),delete e[i]._node,t._clearTimer(e[i]._id);var n=o._howls.indexOf(t);n>=0&&o._howls.splice(n,1)}var r=!0;for(i=0;i<o._howls.length;i++)if(o._howls[i]._src===t._src){r=!1;break}return l&&r&&delete l[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this,s=r["_on"+t];return"function"==typeof e&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),r},off:function(t,e,i){var n=this,r=n["_on"+t],s=0;if(e){for(s=0;s<r.length;s++)if(e===r[s].fn&&i===r[s].id){r.splice(s,1);break}}else if(t)n["_on"+t]=[];else{var o=Object.keys(n);for(s=0;s<o.length;s++)0===o[s].indexOf("_on")&&Array.isArray(n[o[s]])&&(n[o[s]]=[])}return n},once:function(t,e,i){var n=this;return n.on(t,e,i,1),n},_emit:function(t,e,i){for(var n=this,r=n["_on"+t],s=r.length-1;s>=0;s--)r[s].id&&r[s].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,r[s].fn),0),r[s].once&&n.off(t,r[s].fn,r[s].id));return n},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,i=t._sprite,n=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),o._autoSuspend()),e._webAudio||n||e.stop(t._id),e},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new h(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){var e=this;if("undefined"==typeof t){for(var i=[],n=0;n<e._sounds.length;n++)i.push(e._sounds[n]._id);return i}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=l[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,e},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(i){}}return t.bufferSource=null,e}};var h=function(t){this._parent=t,this.init()};h.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=o._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node="undefined"==typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),t._node.gain.setValueAtTime(i,o.ctx.currentTime),t._node.paused=!0,t._node.connect(o.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(o._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=i*o.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(o._canPlayEvent,t._loadFn,!1)}};var l={},c=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void f(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);p(n.buffer,t)}else{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){var e=(s.status+"")[0];return"0"!==e&&"2"!==e&&"3"!==e?void t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+"."):void p(s.response,t)},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},u(s)}},u=function(t){try{t.send()}catch(e){t.onerror()}},p=function(t,e){o.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(l[e._src]=t,f(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},f=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},d=function(){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),i=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=i?parseInt(i[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!r||o._navigator&&!o._navigator.standalone&&!r)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain="undefined"==typeof o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.value=1,o.masterGain.connect(o.ctx.destination)),o._setup()};n=[],r=function(){return{Howler:o,Howl:a}}.apply(e,n),!(void 0!==r&&(t.exports=r)),e.Howler=o,e.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=s,window.Howler=o,window.Howl=a,window.Sound=h):"undefined"!=typeof i&&(i.HowlerGlobal=s,i.Howler=o,i.Howl=a,i.Sound=h)}(),/*!
	 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
	 *  
	 *  howler.js v2.0.2
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,s){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,r="number"!=typeof r?a[4]:r,s="number"!=typeof s?a[5]:s,"number"!=typeof t?a:(o._orientation=[t,e,i,n,r,s],o.ctx.listener.setOrientation(t,e,i,n,r,s),o)},Howl.prototype.init=function(t){return function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var r="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var s=n._getSoundIds(i),o=0;o<s.length;o++){var a=n._soundById(s[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,r),"spatial"===r?a._panner.setPosition(e,0,0):a._panner.pan.value=e),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(e,i,n,r)}}),s;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,"undefined"==typeof r){if("number"!=typeof e)return s._pos;s._pos=[e,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof e)return h._pos;h._pos=[e,i,n],h._node&&(h._panner&&!h._panner.pan||t(h,"spatial"),h._panner.setPosition(e,i,n)),s._emit("pos",h._id)}}return s},Howl.prototype.orientation=function(e,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(e,i,n,r)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,n="number"!=typeof n?s._orientation[2]:n,"undefined"==typeof r){if("number"!=typeof e)return s._orientation;s._orientation=[e,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof e)return h._orientation;h._orientation=[e,i,n],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),t(h,"spatial")),h._panner.setOrientation(e,i,n)),s._emit("orientation",h._id)}}return s},Howl.prototype.pannerAttr=function(){var e,i,n,r=this,s=arguments;if(!r._webAudio)return r;if(0===s.length)return r._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return n=r._soundById(parseInt(s[0],10)),n?n._pannerAttr:r._pannerAttr;e=s[0],"undefined"==typeof i&&(r._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:r._distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:r._maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:r._panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:r._refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:r._rolloffFactor})}else 2===s.length&&(e=s[0],i=parseInt(s[1],10));for(var o=r._getSoundIds(i),a=0;a<o.length;a++)if(n=r._soundById(o[a])){var h=n._pannerAttr;h={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:h.coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:h.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:h.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:h.maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:h.panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:h.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:h.rolloffFactor};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.panningModel=h.panningModel,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor):(n._pos||(n._pos=r._pos||[0,0,-.5]),t(n,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(e,function(){return this}())},function(t,e,i){(function(e){"use strict";function n(t,e,i){this.params=i||{},this.mode=o.UNKNOWN,this.hideButton=this.params.hideButton||!1,this.predistorted=!!this.params.predistorted,this.renderer=t,this.effect=e;var n=document.querySelector(".webvr-polyfill-fullscreen-wrapper");this.button=new r(n),this.isFullscreenDisabled=!!a.getQueryParameter("no_fullscreen"),this.startMode=o.NORMAL;var s=parseInt(a.getQueryParameter("start_mode"));isNaN(s)||(this.startMode=s),this.hideButton&&this.button.setVisibility(!1),this.getDeviceByType_(VRDisplay).then(function(t){switch(this.hmd=t,this.isVRCompatibleOverride||(this.isVRCompatible=!t.isPolyfilled||a.isMobile()),this.startMode){case o.MAGIC_WINDOW:this.setMode_(o.MAGIC_WINDOW);break;case o.VR:this.enterVRMode_(),this.setMode_(o.VR);break;default:this.setMode_(o.NORMAL)}this.emit("initialized")}.bind(this)),this.button.on("fs",this.onFSClick_.bind(this)),this.button.on("vr",this.onVRClick_.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange_.bind(this)),document.addEventListener("msfullscreenchange",this.onFullscreenChange_.bind(this)),window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange_.bind(this)),window.addEventListener("vrdisplaydeviceparamschange",this.onVRDisplayDeviceParamsChange_.bind(this))}var r=i(96),s=i(97),o=i(38),a=i(58);n.prototype=new s,n.Modes=o,n.prototype.render=function(t,e,i){t instanceof Array?this.effect.render(t[0],e):this.effect.render(t,e)},n.prototype.setVRCompatibleOverride=function(t){this.isVRCompatible=t,this.isVRCompatibleOverride=!0,this.button.setMode(this.mode,this.isVRCompatible)},n.prototype.setFullscreenCallback=function(t){this.fullscreenCallback=t},n.prototype.setVRCallback=function(t){this.vrCallback=t},n.prototype.setExitFullscreenCallback=function(t){this.exitFullscreenCallback=t},n.prototype.getDeviceByType_=function(t){return new e(function(e,i){navigator.getVRDisplays().then(function(i){for(var n=0;n<i.length;n++)if(i[n]instanceof t||i[n].displayName.includes("HTC")||i[n].displayName.includes("Oculus")||i[n].capabilities.canPresent){e(i[n]);break}e(null)},function(){e(null)})})},n.prototype.enterVRMode_=function(){return this.hmd.requestPresent([{source:this.renderer.domElement,predistorted:this.predistorted}])},n.prototype.setMode_=function(t){var e=this.mode;return t==this.mode?void console.warn("Not changing modes, already in %s",t):(this.mode=t,this.button.setMode(t,this.isVRCompatible),void this.emit("modechange",t,e))},n.prototype.onFSClick_=function(){switch(this.mode){case o.NORMAL:case o.UNKNOWN:this.setMode_(o.MAGIC_WINDOW),this.requestFullscreen_();break;case o.MAGIC_WINDOW:if(this.isFullscreenDisabled)return void window.history.back();this.exitFullscreenCallback&&this.exitFullscreenCallback(),this.setMode_(o.NORMAL),this.exitFullscreen_()}},n.prototype.onVRClick_=function(){if(this.mode==o.NORMAL&&a.isIOS()&&a.isIFrame()){if(!this.vrCallback){var t=window.location.href;return t=a.appendQueryParameter(t,"no_fullscreen","true"),t=a.appendQueryParameter(t,"start_mode",o.VR),void(top.location.href=t)}this.vrCallback()}this.enterVRMode_()},n.prototype.requestFullscreen_=function(){var t=document.body;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():a.isIOS()&&window.scrollTo(0,80)},n.prototype.exitFullscreen_=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},n.prototype.onVRDisplayPresentChange_=function(t){console.log("onVRDisplayPresentChange_",t),this.hmd.isPresenting?this.setMode_(o.VR):this.setMode_(o.NORMAL)},n.prototype.onVRDisplayDeviceParamsChange_=function(t){console.log("onVRDisplayDeviceParamsChange_",t)},n.prototype.onFullscreenChange_=function(t){null!==document.webkitFullscreenElement&&null!==document.mozFullScreenElement||this.setMode_(o.NORMAL)},t.exports=n}).call(e,i(2))},function(t,e,i){"use strict";function n(t){var e=t||document.body;this.loadIcons_();var i=this.createButton();i.src=this.ICONS.fullscreen,i.title="Fullscreen mode",i.className+=" fullscreen-button";var n=i.style;n.display="block",i.addEventListener("click",this.createClickHandler_("fs")),e.appendChild(i),this.fsButton=i;var r=this.createButton();r.src=this.ICONS.cardboard,r.title="Virtual reality mode",r.className+=" vr-button";var n=r.style;r.addEventListener("click",this.createClickHandler_("vr")),e.appendChild(r),this.vrButton=r,this.isVisible=!0}var r=i(97),s=i(38),o=i(58);n.prototype=new r,n.prototype.createButton=function(){var t=document.createElement("img");t.className="webvr-button";t.style;return t.draggable=!1,t.addEventListener("dragstart",function(t){t.preventDefault()}),t},n.prototype.setMode=function(t,e){if(e=e||WebVRConfig.FORCE_ENABLE_VR,this.isVisible){switch(t){case s.NORMAL:this.fsButton.style.display="block",this.fsButton.src=this.ICONS.fullscreen,this.vrButton.style.display="none";break;case s.MAGIC_WINDOW:this.fsButton.style.display="block",console.log("setting exit fs"),this.fsButton.src=this.ICONS.exitFullscreen,this.vrButton.style.display="none";break;case s.VR:this.fsButton.style.display="none",this.vrButton.style.display="none"}var i=this.fsButton.style.display;this.fsButton.style.display="inline-block",this.fsButton.offsetHeight,this.fsButton.style.display=i}},n.prototype.setVisibility=function(t){this.isVisible=t,this.fsButton.style.display=t?"block":"none",this.vrButton.style.display=t?"block":"none"},n.prototype.createClickHandler_=function(t){return function(e){e.stopPropagation(),e.preventDefault(),this.emit(t)}.bind(this)},n.prototype.loadIcons_=function(){this.ICONS={},this.ICONS.cardboard=o.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo="),this.ICONS.exitFullscreen='data:image/svg+xml;utf8,\n<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50.2 52.8" style="enable-background:new 0 0 50.2 52.8;" xml:space="preserve">\n<g id="Layer_1">\n  <g>\n    <g> <polyline fill="none" stroke-width="5" stroke="white" points="15.3,52.8 15.3,38.3 0,38.3"/> </g>\n    <g> <polyline fill="none" stroke-width="5" stroke="white" points="50.2,38.3 34.8,38.3 34.8,52.8"/> </g>\n    <g> <polyline fill="none" stroke-width="5" stroke="white" points="34.8,0 34.8,14.4 50.2,14.4"/> </g>\n    <g> <polyline fill="none" stroke-width="5" stroke="white" points="0,14.4 15.3,14.4 15.3,0"/> </g>\n  </g>\n</g>\n</svg>\n    ',this.ICONS.fullscreen='data:image/svg+xml;utf8,\n<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 53.2 53.2" style="enable-background:new 0 0 53.2 53.2;" xml:space="preserve">\n<g id="Layer_1">\n\t<g>\n\t\t<g> <polyline fill="none" stroke-width="5" stroke="white" points="17.8,2.5 2.5,2.5 2.5,16.9"/> </g>\n\t\t<g> <polyline fill="none" stroke-width="5" stroke="white" points="2.5,36.2 2.5,50.7 17.8,50.7"/> </g>\n\t\t<g> <polyline fill="none" stroke-width="5" stroke="white" points="35.3,50.7 50.7,50.7 50.7,36.2"/> </g>\n\t\t<g> <polyline fill="none" stroke-width="5" stroke="white" points="50.7,16.9 50.7,2.5 35.3,2.5"/> </g>\n\t</g>\n</g>\n</svg>\n    ',this.ICONS.settings=o.base64("image/svg+xml","PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVDMTQuNDYgMi4xOCAxNC4yNSAyIDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==")},t.exports=n},function(t,e){"use strict";function i(){this.callbacks={}}i.prototype.emit=function(t){var e=this.callbacks[t];if(e){var i=[].slice.call(arguments);i.shift();for(var n=0;n<e.length;n++)e[n].apply(this,i)}},i.prototype.on=function(t,e){t in this.callbacks?this.callbacks[t].push(e):this.callbacks[t]=[e]},t.exports=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(99),a=n(o),h=function(){function t(){r(this,t),this.timeouts={},this.intervals={}}return s(t,[{key:"setTimeout",value:function(t,e){for(var i=a["default"].generate({length:32});i in this.timeouts;)i=a["default"].generate({length:32});return this.timeouts[i]={callback:t,delay:Date.now()+e},i}},{key:"setInterval",value:function(t,e){for(var i=a["default"].generate({length:32});i in this.intervals;)i=a["default"].generate({length:32});return this.intervals[i]={callback:t,interval:e,next:Date.now()+e},i}},{key:"clearTimeout",value:function(t){delete this.timeouts[t]}},{key:"clearInterval",value:function(t){delete this.intervals[t]}},{key:"step",value:function(){var t=this,e=Date.now();Object.keys(this.timeouts).forEach(function(i){e>=t.timeouts[i].delay&&(t.timeouts[i].callback(),delete t.timeouts[i])}),Object.keys(this.intervals).forEach(function(i){if(e>=t.intervals[i].next)for(t.intervals[i].callback();t.intervals[i]&&e>=t.intervals[i].next;)t.intervals[i].next+=t.intervals[i].interval})}}]),t}();e["default"]=h},function(t,e,i){t.exports=i(100)},function(t,e,i){"use strict";function n(t){for(;;)try{return r.randomBytes(t)}catch(e){continue}}var r=i(101),s=i(123);e.generate=function(t){var e,i=new s,r="";"object"==typeof t?(e=t.length||32,t.charset?i.setType(t.charset):i.setType("alphanumeric"),t.capitalization&&i.setcapitalization(t.capitalization),t.readable&&i.removeUnreadable(),i.removeDuplicates()):"number"==typeof t?(e=t,i.setType("alphanumeric")):(e=32,i.setType("alphanumeric"));for(var o=i.chars.length,a=256-256%o;e>0;)for(var h=n(Math.ceil(256*e/a)),l=0;l<h.length&&e>0;l++){var c=h.readUInt8(l);c<a&&(r+=i.chars.charAt(c%o),e--)}return r}},function(t,e,i){(function(t){function n(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function r(t,e){for(var i in t)e(t[i],i)}var s=i(106);e.createHash=i(108),e.createHmac=i(120),e.randomBytes=function(e,i){if(!i||!i.call)return new t(s(e));try{i.call(this,void 0,new t(s(e)))}catch(n){i(n)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var o=i(121)(e);e.pbkdf2=o.pbkdf2,e.pbkdf2Sync=o.pbkdf2Sync,r(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){n("sorry,",t,"is not implemented yet")}})}).call(e,i(102).Buffer)},function(t,e,i){(function(t,n){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,i){if(s()<i)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(i),e.__proto__=t.prototype):(null===e&&(e=new t(i)),e.length=i),e}function t(e,i,n){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,i,n);if("number"==typeof e){if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,i,n)}function a(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,i,n):"string"==typeof e?u(t,e,i):d(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,i,n){return h(e),e<=0?o(t,e):void 0!==i?"string"==typeof n?o(t,e).fill(i,n):o(t,e).fill(i):o(t,e)}function c(e,i){if(h(i),e=o(e,i<0?0:0|m(i)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;n<i;++n)e[n]=0;return e}function u(e,i,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(i,n);e=o(e,r);var s=e.write(i,n);return s!==r&&(e=e.slice(0,s)),e}function p(t,e){var i=e.length<0?0:0|m(e.length);t=o(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(e,i,n,r){if(i.byteLength,n<0||i.byteLength<n)throw new RangeError("'offset' is out of bounds");if(i.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return i=void 0===n&&void 0===r?new Uint8Array(i):void 0===r?new Uint8Array(i,n):new Uint8Array(i,n,r),t.TYPED_ARRAY_SUPPORT?(e=i,e.__proto__=t.prototype):e=p(e,i),e}function d(e,i){if(t.isBuffer(i)){var n=0|m(i.length);return e=o(e,n),0===e.length?e:(i.copy(e,0,0,n),e)}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||Q(i.length)?o(e,0):p(e,i);if("Buffer"===i.type&&K(i.data))return p(e,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function g(e){return+e!=e&&(e=0),t.alloc(+e)}function v(e,i){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(r)return W(e).length;i=(""+i).toLowerCase(),r=!0}}function y(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return O(this,e,i);case"base64":return P(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function b(e,i,n,r,s){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof i&&(i=t.from(i,r)),t.isBuffer(i))return 0===i.length?-1:x(e,i,n,r,s);if("number"==typeof i)return i=255&i,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,i,n):Uint8Array.prototype.lastIndexOf.call(e,i,n):x(e,[i],n,r,s);throw new TypeError("val must be string, number or Buffer")}function x(t,e,i,n,r){function s(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,a=t.length,h=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}var l;if(r){var c=-1;for(l=i;l<a;l++)if(s(t,l)===s(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===h)return c*o}else c!==-1&&(l-=l-c),c=-1}else for(i+h>a&&(i=a-h),l=i;l>=0;l--){for(var u=!0,p=0;p<h;p++)if(s(t,l+p)!==s(e,p)){u=!1;break}if(u)return l}return-1}function E(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function w(t,e,i,n){return Z(W(e,t.length-i),t,i,n)}function T(t,e,i,n){return Z(Y(e),t,i,n)}function A(t,e,i,n){return T(t,e,i,n)}function S(t,e,i,n){return Z(X(e),t,i,n)}function M(t,e,i,n){return Z(q(e,t.length-i),t,i,n)}function P(t,e,i){return 0===e&&i===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,i))}function C(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var s=t[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a<=i){var h,l,c,u;switch(a){case 1:s<128&&(o=s);break;case 2:h=t[r+1],128===(192&h)&&(u=(31&s)<<6|63&h,u>127&&(o=u));break;case 3:h=t[r+1],l=t[r+2],128===(192&h)&&128===(192&l)&&(u=(15&s)<<12|(63&h)<<6|63&l,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:h=t[r+1],l=t[r+2],c=t[r+3],128===(192&h)&&128===(192&l)&&128===(192&c)&&(u=(15&s)<<18|(63&h)<<12|(63&l)<<6|63&c,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),r+=a}return R(n)}function R(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var i="",n=0;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return i}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function O(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function N(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=e;s<i;++s)r+=H(t[s]);return r}function L(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function k(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function D(e,i,n,r,s,o){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>s||i<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function F(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-i,2);r<s;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function B(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-i,4);r<s;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function U(t,e,i,n,r,s){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function V(t,e,i,n,r){return r||U(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(t,e,i,n,23,4),i+4}function z(t,e,i,n,r){return r||U(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(t,e,i,n,52,8),i+8}function G(t){if(t=j(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var i,n=t.length,r=null,s=[],o=0;o<n;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function Y(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function q(t,e){for(var i,n,r,s=[],o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),n=i>>8,r=i%256,s.push(r),s.push(n);return s}function X(t){return J.toByteArray(G(t))}function Z(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function Q(t){return t!==t}var J=i(103),$=i(104),K=i(105);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=s(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,i){return a(null,t,e,i)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,i){return l(null,t,e,i)},t.allocUnsafe=function(t){return c(null,t)},t.allocUnsafeSlow=function(t){return c(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,i){if(!t.isBuffer(e)||!t.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(e===i)return 0;for(var n=e.length,r=i.length,s=0,o=Math.min(n,r);s<o;++s)if(e[s]!==i[s]){n=e[s],r=i[s];break}return n<r?-1:r<n?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,i){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===i)for(i=0,n=0;n<e.length;++n)i+=e[n].length;var r=t.allocUnsafe(i),s=0;for(n=0;n<e.length;++n){var o=e[n];if(!t.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,s),s+=o.length}return r},t.byteLength=v,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):y.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,i,n,r,s){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),i<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&i>=n)return 0;if(r>=s)return-1;if(i>=n)return 1;if(i>>>=0,n>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var o=s-r,a=n-i,h=Math.min(o,a),l=this.slice(r,s),c=e.slice(i,n),u=0;u<h;++u)if(l[u]!==c[u]){o=l[u],a=c[u];break}return o<a?-1:a<o?1:0},t.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1},t.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},t.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},t.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return E(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":return T(this,t,e,i);case"latin1":case"binary":return A(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,i){var n=this.length;e=~~e,i=void 0===i?n:~~i,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),i<0?(i+=n,i<0&&(i=0)):i>n&&(i=n),i<e&&(i=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=this.subarray(e,i),r.__proto__=t.prototype;else{var s=i-e;r=new t(s,(void 0));for(var o=0;o<s;++o)r[o]=this[o+e]}return r},t.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||k(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n},t.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||k(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},t.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||k(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||k(t,e,this.length);for(var n=e,r=1,s=this[t+--n];n>0&&(r*=256);)s+=this[t+--n]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*e)),s},t.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),$.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),$.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),$.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),$.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e=0|e,i=0|i,!n){var r=Math.pow(2,8*i)-1;D(this,t,e,i,r,0)}var s=1,o=0;for(this[e]=255&t;++o<i&&(s*=256);)this[e+o]=t/s&255;return e+i},t.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e=0|e,i=0|i,!n){var r=Math.pow(2,8*i)-1;D(this,t,e,i,r,0)}var s=i-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+i},t.prototype.writeUInt8=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[i]=255&e,i+1},t.prototype.writeUInt16LE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8):F(this,e,i,!0),i+2},t.prototype.writeUInt16BE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>8,this[i+1]=255&e):F(this,e,i,!1),i+2},t.prototype.writeUInt32LE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[i+3]=e>>>24,this[i+2]=e>>>16,this[i+1]=e>>>8,this[i]=255&e):B(this,e,i,!0),i+4},t.prototype.writeUInt32BE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e):B(this,e,i,!1),i+4},t.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);D(this,t,e,i,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<i&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},t.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);D(this,t,e,i,r-1,-r)}var s=i-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},t.prototype.writeInt8=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[i]=255&e,i+1},t.prototype.writeInt16LE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8):F(this,e,i,!0),i+2},t.prototype.writeInt16BE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>8,this[i+1]=255&e):F(this,e,i,!1),i+2},t.prototype.writeInt32LE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[i]=255&e,this[i+1]=e>>>8,this[i+2]=e>>>16,this[i+3]=e>>>24):B(this,e,i,!0),i+4},t.prototype.writeInt32BE=function(e,i,n){return e=+e,i=0|i,n||D(this,e,i,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[i]=e>>>24,this[i+1]=e>>>16,this[i+2]=e>>>8,this[i+3]=255&e):B(this,e,i,!1),i+4},t.prototype.writeFloatLE=function(t,e,i){return V(this,t,e,!0,i)},t.prototype.writeFloatBE=function(t,e,i){return V(this,t,e,!1,i)},t.prototype.writeDoubleLE=function(t,e,i){return z(this,t,e,!0,i)},t.prototype.writeDoubleBE=function(t,e,i){return z(this,t,e,!1,i)},t.prototype.copy=function(e,i,n,r){if(n||(n=0),r||0===r||(r=this.length),i>=e.length&&(i=e.length),i||(i=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-i<r-n&&(r=e.length-i+n);var s,o=r-n;if(this===e&&n<i&&i<r)for(s=o-1;s>=0;--s)e[s+i]=this[s+n];else if(o<1e3||!t.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)e[s+i]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),i);return o},t.prototype.fill=function(e,i,n,r){if("string"==typeof e){if("string"==typeof i?(r=i,i=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var s=e.charCodeAt(0);s<256&&(e=s)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e=255&e);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;i>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=i;o<n;++o)this[o]=e;else{var a=t.isBuffer(e)?e:W(new t(e,r).toString()),h=a.length;for(o=0;o<n-i;++o)this[o+i]=a[o%h]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,i(102).Buffer,function(){return this}())},function(t,e){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function n(t){return 3*t.length/4-i(t)}function r(t){var e,n,r,s,o,a,h=t.length;o=i(t),a=new c(3*h/4-o),r=o>0?h-4:h;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)s=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],a[u++]=s>>16&255,a[u++]=s>>8&255,a[u++]=255&s;return 2===o?(s=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,a[u++]=255&s):1===o&&(s=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,a[u++]=s>>8&255,a[u++]=255&s),a}function s(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function o(t,e,i){for(var n,r=[],o=e;o<i;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],r.push(s(n));return r.join("")}function a(t){for(var e,i=t.length,n=i%3,r="",s=[],a=16383,l=0,c=i-n;l<c;l+=a)s.push(o(t,l,l+a>c?c:l+a));return 1===n?(e=t[i-1],r+=h[e>>2],r+=h[e<<4&63],r+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],r+=h[e>>10],r+=h[e>>4&63],r+=h[e<<2&63],r+="="),s.push(r),s.join("")}e.byteLength=n,e.toByteArray=r,e.fromByteArray=a;for(var h=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,f=u.length;p<f;++p)h[p]=u[p],l[u.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var s,o,a=8*r-n-1,h=(1<<a)-1,l=h>>1,c=-7,u=i?r-1:0,p=i?-1:1,f=t[e+u];for(u+=p,s=f&(1<<-c)-1,f>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+t[e+u],u+=p,c-=8);if(0===s)s=1-l;else{if(s===h)return o?NaN:(f?-1:1)*(1/0);o+=Math.pow(2,n),s-=l}return(f?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var o,a,h,l=8*s-r-1,c=(1<<l)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,d=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),e+=o+u>=1?p/h:p*Math.pow(2,1-u),e*h>=2&&(o++,h/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*h-1)*Math.pow(2,r),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;t[i+f]=255&a,f+=d,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;t[i+f]=255&o,f+=d,o/=256,l-=8);t[i+f-d]|=128*m}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){(function(e,n){!function(){var r=("undefined"==typeof window?e:window)||{};_crypto=r.crypto||r.msCrypto||i(107),t.exports=function(t){if(_crypto.getRandomValues){var e=new n(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),i(102).Buffer)},4,function(t,e,i){(function(e){function n(t){return function(){var i=[],n={update:function(t,n){return e.isBuffer(t)||(t=new e(t,n)),i.push(t),this},digest:function(n){var r=e.concat(i),s=t(r);return i=null,n?s.toString(n):s}};return n}}var r=i(109),s=n(i(117)),o=n(i(119));t.exports=function(t){return"md5"===t?new s:"rmd160"===t?new o:r(t)}}).call(e,i(102).Buffer)},function(t,e,i){var e=t.exports=function(t){var i=e[t];if(!i)throw new Error(t+" is not supported (we accept pull requests)");return new i},n=i(102).Buffer,r=i(110)(n);e.sha1=i(111)(n,r),e.sha256=i(115)(n,r),e.sha512=i(116)(n,r)},function(t,e){t.exports=function(t){function e(e,i){this._block=new t(e),this._finalSize=i,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,i){"string"==typeof e&&(i=i||"utf8",e=new t(e,i));for(var n=this._len+=e.length,r=this._s=this._s||0,s=0,o=this._block;r<n;){for(var a=Math.min(e.length,s+this._blockSize-r%this._blockSize),h=a-s,l=0;l<h;l++)o[r%this._blockSize+l]=e[l+s];r+=h,s+=h,r%this._blockSize===0&&this._update(o)}return this._s=r,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var i=this._update(this._block)||this._hash();return t?i.toString(t):i},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,i){var n=i(112).inherits;t.exports=function(t,e){function i(){return d.length?d.pop().init():this instanceof i?(this._w=f,e.call(this,64,56),this._h=null,void this.init()):new i}function r(t,e,i,n){return t<20?e&i|~e&n:t<40?e^i^n:t<60?e&i|e&n|i&n:e^i^n}function s(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function o(t,e){return t+e|0}function a(t,e){return t<<e|t>>>32-e}var h=0,l=4,c=8,u=12,p=16,f=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return n(i,e),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},i.prototype._POOL=d,i.prototype._update=function(t){var e,i,n,h,l,c,u,p,f,d;e=c=this._a,i=u=this._b,n=p=this._c,h=f=this._d,l=d=this._e;for(var m=this._w,g=0;g<80;g++){var v=m[g]=g<16?t.readInt32BE(4*g):a(m[g-3]^m[g-8]^m[g-14]^m[g-16],1),y=o(o(a(e,5),r(g,i,n,h)),o(o(l,v),s(g)));l=h,h=n,n=a(i,30),i=e,e=y}this._a=o(e,c),this._b=o(i,u),this._c=o(n,p),this._d=o(h,f),this._e=o(l,d)},i.prototype._hash=function(){d.length<100&&d.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,h),e.writeInt32BE(0|this._b,l),e.writeInt32BE(0|this._c,c),e.writeInt32BE(0|this._d,u),e.writeInt32BE(0|this._e,p),e},i}},function(t,e,i){(function(t,n){function r(t,i){var n={seen:[],stylize:o};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(i)?n.showHidden=i:i&&e._extend(n,i),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),h(n,t,n.depth)}function s(t,e){var i=r.styles[e];return i?"["+r.colors[i][0]+"m"+t+"["+r.colors[i][1]+"m":t}function o(t,e){return t}function a(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function h(t,i,n){if(t.customInspect&&i&&S(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return _(r)||(r=h(t,r,n)),r}var s=l(t,i);if(s)return s;var o=Object.keys(i),m=a(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(i)),A(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(i);if(0===o.length){if(S(i)){var g=i.name?": "+i.name:"";return t.stylize("[Function"+g+"]","special")}if(E(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(T(i))return t.stylize(Date.prototype.toString.call(i),"date");if(A(i))return c(i)}var v="",y=!1,b=["{","}"];if(d(i)&&(y=!0,b=["[","]"]),S(i)){var x=i.name?": "+i.name:"";v=" [Function"+x+"]"}if(E(i)&&(v=" "+RegExp.prototype.toString.call(i)),T(i)&&(v=" "+Date.prototype.toUTCString.call(i)),A(i)&&(v=" "+c(i)),0===o.length&&(!y||0==i.length))return b[0]+v+b[1];if(n<0)return E(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special");t.seen.push(i);var w;return w=y?u(t,i,n,m,o):o.map(function(e){return p(t,i,n,m,e,y)}),t.seen.pop(),f(w,v,b)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(_(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return y(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,i,n,r){for(var s=[],o=0,a=e.length;o<a;++o)I(e,String(o))?s.push(p(t,e,i,n,String(o),!0)):s.push("");return r.forEach(function(r){r.match(/^\d+$/)||s.push(p(t,e,i,n,r,!0))}),s}function p(t,e,i,n,r,s){var o,a,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),I(n,r)||(o="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=g(i)?h(t,l.value,null):h(t,l.value,i-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(o)){if(s&&r.match(/^\d+$/))return a;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function f(t,e,i){var n=0,r=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function x(t){return void 0===t}function E(t){return w(t)&&"[object RegExp]"===P(t)}function w(t){return"object"==typeof t&&null!==t}function T(t){return w(t)&&"[object Date]"===P(t)}function A(t){return w(t)&&("[object Error]"===P(t)||t instanceof Error)}function S(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function P(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var O=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(r(arguments[i]));return e.join(" ")}for(var i=1,n=arguments,s=n.length,o=String(t).replace(O,function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return t}}),a=n[i];i<s;a=n[++i])o+=g(a)||!w(a)?" "+a:" "+r(a);return o},e.deprecate=function(i,r){function s(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(n.noDeprecation===!0)return i;var o=!1;return s};var N,L={};e.debuglog=function(t){if(x(N)&&(N={NODE_ENV:"production"}.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(N)){var i=n.pid;L[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else L[t]=function(){};return L[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=m,e.isNull=g,e.isNullOrUndefined=v,e.isNumber=y,e.isString=_,e.isSymbol=b,e.isUndefined=x,e.isRegExp=E,e.isObject=w,e.isDate=T,e.isError=A,e.isFunction=S,e.isPrimitive=M,e.isBuffer=i(113);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=i(114),e._extend=function(t,e){if(!e||!w(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(e,function(){return this}(),i(3))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,
t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){var n=i(112).inherits;t.exports=function(t,e){function i(){this.init(),this._w=f,e.call(this,64,56)}function r(t,e){return t>>>e|t<<32-e}function s(t,e){return t>>>e}function o(t,e,i){return t&e^~t&i}function a(t,e,i){return t&e^t&i^e&i}function h(t){return r(t,2)^r(t,13)^r(t,22)}function l(t){return r(t,6)^r(t,11)^r(t,25)}function c(t){return r(t,7)^r(t,18)^s(t,3)}function u(t){return r(t,17)^r(t,19)^s(t,10)}var p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=new Array(64);return n(i,e),i.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},i.prototype._update=function(t){var e,i,n,r,s,f,d,m,g,v,y=this._w;e=0|this._a,i=0|this._b,n=0|this._c,r=0|this._d,s=0|this._e,f=0|this._f,d=0|this._g,m=0|this._h;for(var _=0;_<64;_++){var b=y[_]=_<16?t.readInt32BE(4*_):u(y[_-2])+y[_-7]+c(y[_-15])+y[_-16];g=m+l(s)+o(s,f,d)+p[_]+b,v=h(e)+a(e,i,n),m=d,d=f,f=s,s=r+g,r=n,n=i,i=e,e=g+v}this._a=e+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=r+this._d|0,this._e=s+this._e|0,this._f=f+this._f|0,this._g=d+this._g|0,this._h=m+this._h|0},i.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},i}},function(t,e,i){var n=i(112).inherits;t.exports=function(t,e){function i(){this.init(),this._w=h,e.call(this,128,112)}function r(t,e,i){return t>>>i|e<<32-i}function s(t,e,i){return t&e^~t&i}function o(t,e,i){return t&e^t&i^e&i}var a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],h=new Array(160);return n(i,e),i.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},i.prototype._update=function(t){var e,i,n,h,l,c,u,p,f,d,m,g,v,y,_,b,x=this._w;e=0|this._a,i=0|this._b,n=0|this._c,h=0|this._d,l=0|this._e,c=0|this._f,u=0|this._g,p=0|this._h,f=0|this._al,d=0|this._bl,m=0|this._cl,g=0|this._dl,v=0|this._el,y=0|this._fl,_=0|this._gl,b=0|this._hl;for(var E=0;E<80;E++){var w,T,A=2*E;if(E<16)w=x[A]=t.readInt32BE(4*A),T=x[A+1]=t.readInt32BE(4*A+4);else{var S=x[A-30],M=x[A-30+1],P=r(S,M,1)^r(S,M,8)^S>>>7,C=r(M,S,1)^r(M,S,8)^r(M,S,7);S=x[A-4],M=x[A-4+1];var R=r(S,M,19)^r(M,S,29)^S>>>6,I=r(M,S,19)^r(S,M,29)^r(M,S,6),O=x[A-14],N=x[A-14+1],L=x[A-32],k=x[A-32+1];T=C+N,w=P+O+(T>>>0<C>>>0?1:0),T+=I,w=w+R+(T>>>0<I>>>0?1:0),T+=k,w=w+L+(T>>>0<k>>>0?1:0),x[A]=w,x[A+1]=T}var D=o(e,i,n),F=o(f,d,m),B=r(e,f,28)^r(f,e,2)^r(f,e,7),U=r(f,e,28)^r(e,f,2)^r(e,f,7),V=r(l,v,14)^r(l,v,18)^r(v,l,9),z=r(v,l,14)^r(v,l,18)^r(l,v,9),G=a[A],j=a[A+1],H=s(l,c,u),W=s(v,y,_),Y=b+z,q=p+V+(Y>>>0<b>>>0?1:0);Y+=W,q=q+H+(Y>>>0<W>>>0?1:0),Y+=j,q=q+G+(Y>>>0<j>>>0?1:0),Y+=T,q=q+w+(Y>>>0<T>>>0?1:0);var X=U+F,Z=B+D+(X>>>0<U>>>0?1:0);p=u,b=_,u=c,_=y,c=l,y=v,v=g+Y|0,l=h+q+(v>>>0<g>>>0?1:0)|0,h=n,g=m,n=i,m=d,i=e,d=f,f=Y+X|0,e=q+Z+(f>>>0<Y>>>0?1:0)|0}this._al=this._al+f|0,this._bl=this._bl+d|0,this._cl=this._cl+m|0,this._dl=this._dl+g|0,this._el=this._el+v|0,this._fl=this._fl+y|0,this._gl=this._gl+_|0,this._hl=this._hl+b|0,this._a=this._a+e+(this._al>>>0<f>>>0?1:0)|0,this._b=this._b+i+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+n+(this._cl>>>0<m>>>0?1:0)|0,this._d=this._d+h+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+l+(this._el>>>0<v>>>0?1:0)|0,this._f=this._f+c+(this._fl>>>0<y>>>0?1:0)|0,this._g=this._g+u+(this._gl>>>0<_>>>0?1:0)|0,this._h=this._h+p+(this._hl>>>0<b>>>0?1:0)|0},i.prototype._hash=function(){function e(t,e,n){i.writeInt32BE(t,n),i.writeInt32BE(e,n+4)}var i=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),i},i}},function(t,e,i){function n(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,r=-1732584194,c=271733878,u=0;u<t.length;u+=16){var p=i,f=n,d=r,m=c;i=s(i,n,r,c,t[u+0],7,-680876936),c=s(c,i,n,r,t[u+1],12,-389564586),r=s(r,c,i,n,t[u+2],17,606105819),n=s(n,r,c,i,t[u+3],22,-1044525330),i=s(i,n,r,c,t[u+4],7,-176418897),c=s(c,i,n,r,t[u+5],12,1200080426),r=s(r,c,i,n,t[u+6],17,-1473231341),n=s(n,r,c,i,t[u+7],22,-45705983),i=s(i,n,r,c,t[u+8],7,1770035416),c=s(c,i,n,r,t[u+9],12,-1958414417),r=s(r,c,i,n,t[u+10],17,-42063),n=s(n,r,c,i,t[u+11],22,-1990404162),i=s(i,n,r,c,t[u+12],7,1804603682),c=s(c,i,n,r,t[u+13],12,-40341101),r=s(r,c,i,n,t[u+14],17,-1502002290),n=s(n,r,c,i,t[u+15],22,1236535329),i=o(i,n,r,c,t[u+1],5,-165796510),c=o(c,i,n,r,t[u+6],9,-1069501632),r=o(r,c,i,n,t[u+11],14,643717713),n=o(n,r,c,i,t[u+0],20,-373897302),i=o(i,n,r,c,t[u+5],5,-701558691),c=o(c,i,n,r,t[u+10],9,38016083),r=o(r,c,i,n,t[u+15],14,-660478335),n=o(n,r,c,i,t[u+4],20,-405537848),i=o(i,n,r,c,t[u+9],5,568446438),c=o(c,i,n,r,t[u+14],9,-1019803690),r=o(r,c,i,n,t[u+3],14,-187363961),n=o(n,r,c,i,t[u+8],20,1163531501),i=o(i,n,r,c,t[u+13],5,-1444681467),c=o(c,i,n,r,t[u+2],9,-51403784),r=o(r,c,i,n,t[u+7],14,1735328473),n=o(n,r,c,i,t[u+12],20,-1926607734),i=a(i,n,r,c,t[u+5],4,-378558),c=a(c,i,n,r,t[u+8],11,-2022574463),r=a(r,c,i,n,t[u+11],16,1839030562),n=a(n,r,c,i,t[u+14],23,-35309556),i=a(i,n,r,c,t[u+1],4,-1530992060),c=a(c,i,n,r,t[u+4],11,1272893353),r=a(r,c,i,n,t[u+7],16,-155497632),n=a(n,r,c,i,t[u+10],23,-1094730640),i=a(i,n,r,c,t[u+13],4,681279174),c=a(c,i,n,r,t[u+0],11,-358537222),r=a(r,c,i,n,t[u+3],16,-722521979),n=a(n,r,c,i,t[u+6],23,76029189),i=a(i,n,r,c,t[u+9],4,-640364487),c=a(c,i,n,r,t[u+12],11,-421815835),r=a(r,c,i,n,t[u+15],16,530742520),n=a(n,r,c,i,t[u+2],23,-995338651),i=h(i,n,r,c,t[u+0],6,-198630844),c=h(c,i,n,r,t[u+7],10,1126891415),r=h(r,c,i,n,t[u+14],15,-1416354905),n=h(n,r,c,i,t[u+5],21,-57434055),i=h(i,n,r,c,t[u+12],6,1700485571),c=h(c,i,n,r,t[u+3],10,-1894986606),r=h(r,c,i,n,t[u+10],15,-1051523),n=h(n,r,c,i,t[u+1],21,-2054922799),i=h(i,n,r,c,t[u+8],6,1873313359),c=h(c,i,n,r,t[u+15],10,-30611744),r=h(r,c,i,n,t[u+6],15,-1560198380),n=h(n,r,c,i,t[u+13],21,1309151649),i=h(i,n,r,c,t[u+4],6,-145523070),c=h(c,i,n,r,t[u+11],10,-1120210379),r=h(r,c,i,n,t[u+2],15,718787259),n=h(n,r,c,i,t[u+9],21,-343485551),i=l(i,p),n=l(n,f),r=l(r,d),c=l(c,m)}return Array(i,n,r,c)}function r(t,e,i,n,r,s){return l(c(l(l(e,t),l(n,s)),r),i)}function s(t,e,i,n,s,o,a){return r(e&i|~e&n,t,e,s,o,a)}function o(t,e,i,n,s,o,a){return r(e&n|i&~n,t,e,s,o,a)}function a(t,e,i,n,s,o,a){return r(e^i^n,t,e,s,o,a)}function h(t,e,i,n,s,o,a){return r(i^(e|~n),t,e,s,o,a)}function l(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i}function c(t,e){return t<<e|t>>>32-e}var u=i(118);t.exports=function(t){return u.hash(t,n,16)}},function(t,e,i){(function(e){function i(t,i){if(t.length%s!==0){var n=t.length+(s-t.length%s);t=e.concat([t,o],n)}for(var r=[],a=i?t.readInt32BE:t.readInt32LE,h=0;h<t.length;h+=s)r.push(a.call(t,h));return r}function n(t,i,n){for(var r=new e(i),s=n?r.writeInt32BE:r.writeInt32LE,o=0;o<t.length;o++)s.call(r,t[o],4*o,!0);return r}function r(t,r,s,o){e.isBuffer(t)||(t=new e(t));var h=r(i(t,o),t.length*a);return n(h,s,o)}var s=4,o=new e(s);o.fill(0);var a=8;t.exports={hash:r}}).call(e,i(102).Buffer)},function(t,e,i){(function(e){function i(t,e,i){return t^e^i}function n(t,e,i){return t&e|~t&i}function r(t,e,i){return(t|~e)^i}function s(t,e,i){return t&i|e&~i}function o(t,e,i){return t^(e|~i)}function a(t,e){return t<<e|t>>>32-e}function h(t){var i=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var n=m(t),r=8*t.length,s=8*t.length;n[r>>>5]|=128<<24-r%32,n[(r+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);for(var o=0;o<n.length;o+=16)v(i,n,o);for(var o=0;o<5;o++){var a=i[o];i[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var h=g(i);return new e(h)}t.exports=h;/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.
	
	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
	
	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
	
	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],m=function(t){for(var e=[],i=0,n=0;i<t.length;i++,n+=8)e[n>>>5]|=t[i]<<24-n%32;return e},g=function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},v=function(t,e,h){for(var m=0;m<16;m++){var g=h+m,v=e[g];e[g]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var y,_,b,x,E,w,T,A,S,M;w=y=t[0],T=_=t[1],A=b=t[2],S=x=t[3],M=E=t[4];for(var P,m=0;m<80;m+=1)P=y+e[h+l[m]]|0,P+=m<16?i(_,b,x)+f[0]:m<32?n(_,b,x)+f[1]:m<48?r(_,b,x)+f[2]:m<64?s(_,b,x)+f[3]:o(_,b,x)+f[4],P=0|P,P=a(P,u[m]),P=P+E|0,y=E,E=x,x=a(b,10),b=_,_=P,P=w+e[h+c[m]]|0,P+=m<16?o(T,A,S)+d[0]:m<32?s(T,A,S)+d[1]:m<48?r(T,A,S)+d[2]:m<64?n(T,A,S)+d[3]:i(T,A,S)+d[4],P=0|P,P=a(P,p[m]),P=P+M|0,w=M,M=S,S=a(A,10),A=T,T=P;P=t[1]+b+S|0,t[1]=t[2]+x+M|0,t[2]=t[3]+E+w|0,t[3]=t[4]+y+T|0,t[4]=t[0]+_+A|0,t[0]=P}}).call(e,i(102).Buffer)},function(t,e,i){(function(e){function n(t,i){if(!(this instanceof n))return new n(t,i);this._opad=h,this._alg=t;var o="sha512"===t?128:64;i=this._key=e.isBuffer(i)?i:new e(i),i.length>o?i=r(t).update(i).digest():i.length<o&&(i=e.concat([i,s],o));for(var a=this._ipad=new e(o),h=this._opad=new e(o),l=0;l<o;l++)a[l]=54^i[l],h[l]=92^i[l];this._hash=r(t).update(a)}var r=i(108),s=new e(128);s.fill(0),t.exports=n,n.prototype.update=function(t,e){return this._hash.update(t,e),this},n.prototype.digest=function(t){var e=this._hash.digest();return r(this._alg).update(this._opad).update(e).digest(t)}}).call(e,i(102).Buffer)},function(t,e,i){var n=i(122);t.exports=function(t,e){e=e||{};var i=n(t);return e.pbkdf2=i.pbkdf2,e.pbkdf2Sync=i.pbkdf2Sync,e}},function(t,e,i){(function(e){t.exports=function(t){function i(t,e,i,r,s,o){if("function"==typeof s&&(o=s,s=void 0),"function"!=typeof o)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=n(t,e,i,r,s)}catch(h){return o(h)}o(void 0,a)})}function n(i,n,r,s,o){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof s)throw new TypeError("Key length not a number");if(s<0)throw new TypeError("Bad key length");o=o||"sha1",e.isBuffer(i)||(i=new e(i)),e.isBuffer(n)||(n=new e(n));var a,h,l,c=1,u=new e(s),p=new e(n.length+4);n.copy(p,0,0,n.length);for(var f=1;f<=c;f++){p.writeUInt32BE(f,n.length);var d=t.createHmac(o,i).update(p).digest();if(!a&&(a=d.length,l=new e(a),c=Math.ceil(s/a),h=s-(c-1)*a,s>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");d.copy(l,0,0,a);for(var m=1;m<r;m++){d=t.createHmac(o,i).update(d).digest();for(var g=0;g<a;g++)l[g]^=d[g]}var v=(f-1)*a,y=f==c?h:a;l.copy(u,v,0,y)}return u}return{pbkdf2:i,pbkdf2Sync:n}}}).call(e,i(102).Buffer)},function(t,e,i){function n(){this.chars=""}var r=i(124);n.prototype.setType=function(t){var e,i="0123456789",n="abcdefghijklmnopqrstuvwxyz",r=n.toUpperCase(),s="abcdef";e="alphanumeric"===t?i+n+r:"numeric"===t?i:"alphabetic"===t?n+r:"hex"===t?i+s:t,this.chars=e},n.prototype.removeUnreadable=function(){var t=/[0OIl]/g;this.chars=this.chars.replace(t,"")},n.prototype.setcapitalization=function(t){"uppercase"===t?this.chars=this.chars.toUpperCase():"lowercase"===t&&(this.chars=this.chars.toLowerCase())},n.prototype.removeDuplicates=function(){var t=this.chars.split("");t=r(t),this.chars=t.join("")},t.exports=e=n},function(t,e){(function(e){"use strict";function i(t){for(var e=[],i=0;i<t.length;i++)e.indexOf(t[i])===-1&&e.push(t[i]);return e}function n(t){var e=new Set;return t.filter(function(t){if(!e.has(t))return e.add(t),!0})}function r(t){var e=[];return new Set(t).forEach(function(t){e.push(t)}),e}function s(){var t=!1;return new Set([!0]).forEach(function(e){t=e}),t===!0}"Set"in e?"function"==typeof Set.prototype.forEach&&s()?t.exports=r:t.exports=n:t.exports=i}).call(e,function(){return this}())},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(52),r=i(47);e["default"]=function(t,e){var i=null,s=null,o=null,a=new n.Group;a.position.y=e.tableHeight/2,a.position.z=e.tablePositionZ,o=new n.MeshLambertMaterial({color:e.colors.BLUE_TABLE});var h=e.tableDepth/2;i=new n.BoxGeometry(e.tableWidth,e.tableThickness,h),delete i.faces[10],delete i.faces[11],i.faces=i.faces.filter(function(t){return void 0!==t}),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2-e.tableThickness/2,s.position.z=e.tableDepth/4,s.name="table-self",s.receiveShadow=!0,a.add(s),o=new n.MeshLambertMaterial({color:e.colors.BLUE_TABLE}),e.mode===r.MODE.MULTIPLAYER&&(i=new n.BoxGeometry(e.tableWidth,e.tableThickness,h),delete i.faces[8],delete i.faces[9],i.faces=i.faces.filter(function(t){return void 0!==t}),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2-e.tableThickness/2,s.position.z=-e.tableDepth/4,s.name="table-opponent",s.receiveShadow=!0,a.add(s));var l=new n.Group,c=.37*e.tableDepth;l.name="upwardsTableGroup",l.visible=!1,l.rotation.x=Math.PI/2,l.position.y=e.tableHeight/2+c/2,l.position.z=-e.tableThickness/2,i=new n.BoxGeometry(e.tableWidth,e.tableThickness,c),o=new n.MeshLambertMaterial({color:e.colors.PINK_TABLE_UPWARDS}),s=new n.Mesh(i,o),s.castShadow=!0,s.receiveShadow=!0,l.add(s),a.add(l),h=e.mode===r.MODE.MULTIPLAYER?e.tableDepth:e.tableDepth/2;var u=.001,p=.03,f=new n.Group;return o=new n.MeshLambertMaterial({color:16777215,depthWrite:!1}),i=new n.BoxGeometry(p,u,h),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2+u,s.position.x=-e.tableWidth/2+p/2,s.receiveShadow=!0,f.add(s),i=new n.BoxGeometry(p,u,h),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2+u,s.position.x=e.tableWidth/2-p/2,s.receiveShadow=!0,f.add(s),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2+u,s.position.z=h/2-p/2,s.receiveShadow=!0,f.add(s),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2+u,s.position.z=-h/2+p/2,s.receiveShadow=!0,f.add(s),i=new n.BoxGeometry(p,.001,h-2*p),s=new n.Mesh(i,o),s.position.y=e.tableHeight/2+u,s.receiveShadow=!0,f.add(s),e.mode===r.MODE.SINGLEPLAYER&&(f.position.z=e.tableDepth/4),a.add(f),o=new n.MeshLambertMaterial({color:14540253,depthWrite:!1}),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),s=new n.Mesh(i,o),s.position.y=e.tableThickness/2+u,s.position.z=-c/2+p/2,s.receiveShadow=!0,l.add(s),i=new n.BoxGeometry(e.tableWidth-2*p,u,p),s=new n.Mesh(i,o),s.position.y=e.tableThickness/2+u,s.position.z=c/2-p/2,s.receiveShadow=!0,l.add(s),i=new n.BoxGeometry(p,u,c),s=new n.Mesh(i,o),s.position.y=e.tableThickness/2+u,s.position.x=-e.tableWidth/2+p/2,s.receiveShadow=!0,l.add(s),i=new n.BoxGeometry(p,u,c),s=new n.Mesh(i,o),s.position.y=e.tableThickness/2+u,s.position.x=e.tableWidth/2-p/2,s.receiveShadow=!0,l.add(s),i=new n.BoxGeometry(p,.001,c-p),s=new n.Mesh(i,o),s.position.y=e.tableThickness/2+u,s.position.z=p/2,s.receiveShadow=!0,l.add(s),t.add(a),a}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(52);e["default"]=function(t,e){var i=new n.Group,r=new n.Group;r.name="net-collider";var s=new n.BoxGeometry(e.tableWidth,e.netHeight,e.netThickness),o=new n.MeshBasicMaterial({color:1841748,transparent:!0,opacity:.2}),a=new n.Mesh(s,o);a.name="net",r.add(a),s=new n.BoxGeometry(e.tableWidth,.01,2*e.netHeight);var h=o.clone();h.visible=!1;var l=new n.Mesh(s,h);l.position.y=-e.netHeight/2,r.add(l),i.add(r),s=new n.PlaneGeometry(e.tableWidth,e.netThickness),o=new n.MeshBasicMaterial({color:16777215});var c=new n.Mesh(s,o);return c.position.y=e.netHeight/2+.001,c.rotation.x=-Math.PI/2,i.add(c),i.position.z=e.tablePositionZ,i.position.y=e.tableHeight+e.netHeight/2+.01,t.add(i),i.topNet=c,i.collider=a,i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(52);e["default"]=function(t,e){var i=new n.SphereGeometry(e.ballRadius,16,16),r=new n.MeshBasicMaterial({color:e.colors.BALL}),s=new n.Mesh(i,r);return t.add(s),s.castShadow=!0,s}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(52);e["default"]=function(t,e){var i=new n.SphereGeometry(.01,16,16),r=new n.MeshBasicMaterial({color:e.colors.BALL}),s=new n.Mesh(i,r);return t.add(s),s}},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(52);e["default"]=function(e,i,r){return new t(function(t){e.load("paddle.obj",function(e){var s=.024;e.scale.set(s,s,s);var o=new n.MeshBasicMaterial({color:i.colors.PADDLE_COLOR,side:n.DoubleSide}),a=new n.MeshBasicMaterial({color:i.colors.PADDLE_SIDE_COLOR,side:n.DoubleSide}),h=new n.MeshBasicMaterial({color:i.colors.PADDLE_WOOD_COLOR,side:n.DoubleSide}),l=new n.MeshBasicMaterial({color:i.colors.PADDLE_WOOD_SIDE_COLOR,side:n.DoubleSide});e.traverse(function(t){t.isMesh&&("Extrude"===t.name?t.material=a:"Cap_1"===t.name||"Cap_2"===t.name?t.material=o:"Extrude.1"===t.name?t.material=l:t.material=h),t.castShadow=!0});var c=e.clone();c.name="paddle",c.visible=!0,c.castShadow=!0,r.add(c);var u=e.clone();u.name="paddleOpponent",u.position.z=i.tablePositionZ-i.tableDepth/2,u.position.y=1,u.visible=!1,r.add(u),t({paddle:c,paddleOpponent:u})})})}}).call(e,i(2))},function(t,e,i){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(131),a=n(o),h=i(8),l=n(h),c=i(161),u=n(c),p=i(99),f=n(p),d=i(47),m=i(56),g="23456789QWERTZUPASDFGHJKLYXCVBNM",v=function(){function e(t){var i=this;r(this,e),this.emitter=t,this.callbacks={},this.latency=100,this.isHost=void 0,this.pingNumber=0,this.pingInterval=null,this.isOpponentConnected=!1,this.availableServers=["54.89.219.253:6020","52.59.225.245:6020"],this.availablePrefixes=(0,u["default"])(g,Math.floor(g.length/this.availableServers.length)),this.pings={},this.roundTripTimes=[],(0,l["default"])(window).on("beforeunload",function(){i.isOpponentConnected&&i.statusRecord.set("player-"+(i.isHost?1:2),{action:d.ACTION.DISCONNECT}),i.statusRecord&&(i.statusRecord.discard(),i.statusRecord["delete"](),i.paddle1Record.discard(),i.paddle1Record["delete"](),i.paddle2Record.discard(),i.paddle2Record["delete"](),i.hitRecord.discard(),i.hitRecord["delete"](),i.missRecord.discard(),i.missRecord["delete"](),i.pingRecord.discard(),i.pingRecord["delete"]())})}return s(e,[{key:"setCallbacks",value:function(t){this.callbacks=t}},{key:"pingServer",value:function(e){var i=this;return new t(function(t){var n=(0,a["default"])(i.availableServers[e]),r=setTimeout(function(){n.close(),t("timeout")},3e3);n.on("error",function(){}),n.on("connectionStateChanged",function(i){i!==a["default"].CONSTANTS.CONNECTION_STATE.ERROR&&i!==a["default"].CONSTANTS.CONNECTION_STATE.CLOSED&&i!==a["default"].CONSTANTS.CONNECTION_STATE.RECONNECTING&&(clearTimeout(r),n.close(),t(e))})})}},{key:"chooseClosestServer",value:function(){var e=this;return new t(function(i,n){t.race(e.availableServers.map(function(t,i){return e.pingServer(i)})).then(function(t){return"timeout"===t?void n(t):(e.chosenServer=t,e.connectToServer(e.availableServers[t]))}).then(function(){i()})["catch"](function(t){console.warn("error:  "+t),n(t)})})}},{key:"connectToServer",value:function(e){var i=this;return new t(function(t,n){setTimeout(function(){n("timeout")},2e3),i.client=(0,a["default"])(e,{mergeStrategy:a["default"].MERGE_STRATEGIES.REMOTE_WINS}),i.client.login(),i.client.on("error",function(t){n(t)}),i.client.on("connectionStateChanged",function(e){e===a["default"].CONSTANTS.CONNECTION_STATE.OPEN&&t(),e===a["default"].CONSTANTS.CONNECTION_STATE.ERROR&&n("error")})})}},{key:"tryConnecting",value:function(e){var i=this;return this.isHost=!1,new t(function(t,n){var r=-1;i.availablePrefixes.forEach(function(t,i){t.indexOf(e[0])!==-1&&(r=i)}),r===-1&&n("no room found"),i.connectToServer(i.availableServers[r]).then(function(){i.GAME_ID=e,i.isHost=!1,i.setRecords(),i.statusRecord.subscribe("room-is-open",function(e){e?(i.startListening(),i.statusRecord.set("player-2",{action:d.ACTION.CONNECT}),i.isOpponentConnected=!0,setTimeout(i.sendPings.bind(i),1e3),t()):n("room already full")}),setTimeout(function(){n("no room found")},2e3)})["catch"](function(t){n(t)})})}},{key:"openRoom",value:function(){this.isHost=!0;var t=this.availablePrefixes[this.chosenServer][(0,m.rand)(0,this.availablePrefixes[this.chosenServer].length)];return this.GAME_ID=t+f["default"].generate({length:3,charset:g}),this.setRecords(),this.statusRecord.set("room-is-open",!0),this.startListening(),this.GAME_ID}},{key:"setRecords",value:function(){this.statusRecord=this.client.record.getRecord(this.GAME_ID+"-status"),this.paddle1Record=this.client.record.getRecord(this.GAME_ID+"-paddle1"),this.paddle2Record=this.client.record.getRecord(this.GAME_ID+"-paddle2"),this.hitRecord=this.client.record.getRecord(this.GAME_ID+"-hit"),this.missRecord=this.client.record.getRecord(this.GAME_ID+"-miss"),this.pingRecord=this.client.record.getRecord(this.GAME_ID+"-ping")}},{key:"sendPings",value:function(){var t=this;this.pingInterval=setInterval(function(){t.pings[t.pingNumber]=Date.now(),t.pingRecord.set("player-"+(t.isHost?1:2)+"-ping-"+t.pingNumber,{index:t.pingNumber,ping:!0}),t.pingNumber+=1,t.pingNumber>=20&&clearInterval(t.pingInterval)},1e3)}},{key:"receivedPong",value:function(t){var e=Date.now()-this.pings[t.index];this.roundTripTimes.push(e),this.roundTripTimes.sort(function(t,e){return t-e}),this.latency=this.roundTripTimes[Math.floor(this.roundTripTimes.length/2)]/2}},{key:"startListening",value:function(){var t=this;this.statusRecord.subscribe("player-"+(this.isHost?2:1),function(e){switch(e.action){case d.ACTION.CONNECT:setTimeout(t.sendPings.bind(t),1e3),t.statusRecord.set("room-is-open",!1),t.isOpponentConnected=!0,t.emitter.emit(d.EVENT.OPPONENT_CONNECTED);break;case d.ACTION.DISCONNECT:t.isOpponentConnected=!1,t.emitter.emit(d.EVENT.OPPONENT_DISCONNECTED);break;case d.ACTION.PAUSE:t.isOpponentConnected&&t.emitter.emit(d.EVENT.OPPONENT_PAUSED);break;case d.ACTION.UNPAUSE:t.isOpponentConnected&&t.emitter.emit(d.EVENT.OPPONENT_UNPAUSED);break;case d.ACTION.REQUEST_COUNTDOWN:t.callbacks.receivedRequestCountdown();break;case d.ACTION.RESTART_GAME:t.callbacks.receivedRestartGame();break;default:console.warn("unknown action")}}),this.isHost?this.paddle2Record.subscribe("position",function(e){t.callbacks.receivedMove(e)}):this.paddle1Record.subscribe("position",function(e){t.callbacks.receivedMove(e)}),this.hitRecord.subscribe("player-"+(this.isHost?2:1),function(e){t.callbacks.receivedHit(e)}),this.missRecord.subscribe("player-"+(this.isHost?2:1),function(e){t.callbacks.receivedMiss(e)});for(var e=0;e<20;e+=1)this.pingRecord.subscribe("player-"+(this.isHost?2:1)+"-ping-"+e,function(e){e.ping?t.pingRecord.set("player-"+(t.isHost?1:2)+"-ping-"+e.index,{index:e.index,pong:!0}):t.receivedPong(e)})}},{key:"sendMove",value:function(t,e){this.isHost?this.paddle1Record.set("position",{position:t,rotation:e}):this.paddle2Record.set("position",{position:t,rotation:e})}},{key:"sendHit",value:function(t,e){this.hitRecord.set("player-"+(this.isHost?1:2),{point:t,velocity:e,t:Date.now()})}},{key:"sendMiss",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.missRecord.set("player-"+(this.isHost?1:2),{point:t,velocity:e,ballHasHitEnemyTable:i,isInit:n,t:Date.now()})}},{key:"sendRestartGame",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.RESTART_GAME,t:Date.now()})}},{key:"sendRequestCountdown",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.REQUEST_COUNTDOWN,t:Date.now()})}},{key:"sendPause",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.PAUSE,t:Date.now()})}},{key:"sendUnpause",value:function(){this.statusRecord.set("player-"+(this.isHost?1:2),{action:d.ACTION.UNPAUSE,t:Date.now()})}}]),e}();e["default"]=v}).call(e,i(2))},function(t,e,i){function n(t,e){return new f(t,e)}var r=i(132),s=i(133),o=i(134),a=i(135),h=i(146),l=i(150),c=i(153),u=i(159),p=i(160),f=(i(138),function(t,e){this._url=t,this._options=this._getOptions(e||{}),this._connection=new a(this,this._url,this._options),this.event=new h(this._options,this._connection,this),this.rpc=new l(this._options,this._connection,this),this.record=new c(this._options,this._connection,this),this.presence=new u(this._options,this._connection,this),this._messageCallbacks={},this._messageCallbacks[r.TOPIC.EVENT]=this.event._$handle.bind(this.event),this._messageCallbacks[r.TOPIC.RPC]=this.rpc._$handle.bind(this.rpc),this._messageCallbacks[r.TOPIC.RECORD]=this.record._$handle.bind(this.record),this._messageCallbacks[r.TOPIC.PRESENCE]=this.presence._$handle.bind(this.presence),this._messageCallbacks[r.TOPIC.ERROR]=this._onErrorMessage.bind(this)});o(f.prototype),f.prototype.login=function(t,e){return this._connection.authenticate(t||{},e),this},f.prototype.close=function(){this._connection.close()},f.prototype.getConnectionState=function(){return this._connection.getState()},f.prototype.getUid=function(){var t=(new Date).getTime().toString(36),e=(1e16*Math.random()).toString(36).replace(".","");return t+"-"+e},f.prototype._$onMessage=function(t){this._messageCallbacks[t.topic]?this._messageCallbacks[t.topic](t):(t.processedError=!0,this._$onError(t.topic,r.EVENT.MESSAGE_PARSE_ERROR,"Received message for unknown topic "+t.topic)),t.action!==r.ACTIONS.ERROR||t.processedError||this._$onError(t.topic,t.data[0],t.data.slice(0))},f.prototype._$onError=function(t,e,i){var n;if(e!==r.EVENT.ACK_TIMEOUT&&e!==r.EVENT.RESPONSE_TIMEOUT||this.getConnectionState()===r.CONNECTION_STATE.AWAITING_AUTHENTICATION&&(n="Your message timed out because you're not authenticated. Have you called login()?",setTimeout(this._$onError.bind(this,r.EVENT.NOT_AUTHENTICATED,r.TOPIC.ERROR,n),1)),!this.hasListeners("error"))throw console.log("--- You can catch all deepstream errors by subscribing to the error event ---"),n=e+": "+i,t&&(n+=" ("+t+")"),new Error(n);this.emit("error",i,e,t),this.emit(e,t,i)},f.prototype._onErrorMessage=function(t){this._$onError(t.topic,t.data[0],t.data[1])},f.prototype._getOptions=function(t){var e,i={};for(e in p)"undefined"==typeof t[e]?i[e]=p[e]:i[e]=t[e];return i},f.prototype.CONSTANTS=r,n.CONSTANTS=r,f.prototype.MERGE_STRATEGIES=s,n.MERGE_STRATEGIES=s,t.exports=n},function(t,e){e.CONNECTION_STATE={},e.CONNECTION_STATE.CLOSED="CLOSED",e.CONNECTION_STATE.AWAITING_CONNECTION="AWAITING_CONNECTION",e.CONNECTION_STATE.CHALLENGING="CHALLENGING",e.CONNECTION_STATE.AWAITING_AUTHENTICATION="AWAITING_AUTHENTICATION",e.CONNECTION_STATE.AUTHENTICATING="AUTHENTICATING",e.CONNECTION_STATE.OPEN="OPEN",e.CONNECTION_STATE.ERROR="ERROR",e.CONNECTION_STATE.RECONNECTING="RECONNECTING",e.MESSAGE_SEPERATOR=String.fromCharCode(30),e.MESSAGE_PART_SEPERATOR=String.fromCharCode(31),e.TYPES={},e.TYPES.STRING="S",e.TYPES.OBJECT="O",e.TYPES.NUMBER="N",e.TYPES.NULL="L",e.TYPES.TRUE="T",e.TYPES.FALSE="F",e.TYPES.UNDEFINED="U",e.TOPIC={},e.TOPIC.CONNECTION="C",e.TOPIC.AUTH="A",e.TOPIC.ERROR="X",e.TOPIC.EVENT="E",e.TOPIC.RECORD="R",e.TOPIC.RPC="P",e.TOPIC.PRESENCE="U",e.TOPIC.PRIVATE="PRIVATE/",e.EVENT={},e.EVENT.CONNECTION_ERROR="connectionError",e.EVENT.CONNECTION_STATE_CHANGED="connectionStateChanged",e.EVENT.MAX_RECONNECTION_ATTEMPTS_REACHED="MAX_RECONNECTION_ATTEMPTS_REACHED",e.EVENT.CONNECTION_AUTHENTICATION_TIMEOUT="CONNECTION_AUTHENTICATION_TIMEOUT",e.EVENT.ACK_TIMEOUT="ACK_TIMEOUT",e.EVENT.NO_RPC_PROVIDER="NO_RPC_PROVIDER",e.EVENT.RESPONSE_TIMEOUT="RESPONSE_TIMEOUT",e.EVENT.DELETE_TIMEOUT="DELETE_TIMEOUT",e.EVENT.UNSOLICITED_MESSAGE="UNSOLICITED_MESSAGE",e.EVENT.MESSAGE_DENIED="MESSAGE_DENIED",e.EVENT.MESSAGE_PARSE_ERROR="MESSAGE_PARSE_ERROR",e.EVENT.VERSION_EXISTS="VERSION_EXISTS",e.EVENT.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.EVENT.MESSAGE_PERMISSION_ERROR="MESSAGE_PERMISSION_ERROR",e.EVENT.LISTENER_EXISTS="LISTENER_EXISTS",e.EVENT.NOT_LISTENING="NOT_LISTENING",e.EVENT.TOO_MANY_AUTH_ATTEMPTS="TOO_MANY_AUTH_ATTEMPTS",e.EVENT.IS_CLOSED="IS_CLOSED",e.EVENT.RECORD_NOT_FOUND="RECORD_NOT_FOUND",e.EVENT.NOT_SUBSCRIBED="NOT_SUBSCRIBED",e.ACTIONS={},e.ACTIONS.PING="PI",e.ACTIONS.PONG="PO",e.ACTIONS.ACK="A",e.ACTIONS.REDIRECT="RED",e.ACTIONS.CHALLENGE="CH",e.ACTIONS.CHALLENGE_RESPONSE="CHR",e.ACTIONS.READ="R",e.ACTIONS.CREATE="C",e.ACTIONS.UPDATE="U",e.ACTIONS.PATCH="P",e.ACTIONS.DELETE="D",e.ACTIONS.SUBSCRIBE="S",e.ACTIONS.UNSUBSCRIBE="US",e.ACTIONS.HAS="H",e.ACTIONS.SNAPSHOT="SN",e.ACTIONS.INVOKE="I",e.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND="SP",e.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED="SR",e.ACTIONS.SUBSCRIPTION_HAS_PROVIDER="SH",e.ACTIONS.LISTEN="L",e.ACTIONS.UNLISTEN="UL",e.ACTIONS.LISTEN_ACCEPT="LA",e.ACTIONS.LISTEN_REJECT="LR",e.ACTIONS.PROVIDER_UPDATE="PU",e.ACTIONS.QUERY="Q",e.ACTIONS.CREATEORREAD="CR",e.ACTIONS.EVENT="EVT",e.ACTIONS.ERROR="E",e.ACTIONS.REQUEST="REQ",e.ACTIONS.RESPONSE="RES",e.ACTIONS.REJECTION="REJ",e.ACTIONS.PRESENCE_JOIN="PNJ",e.ACTIONS.PRESENCE_LEAVE="PNL",e.ACTIONS.QUERY="Q",e.ACTIONS.WRITE_ACKNOWLEDGEMENT="WA",e.CALL_STATE={},e.CALL_STATE.INITIAL="INITIAL",e.CALL_STATE.CONNECTING="CONNECTING",e.CALL_STATE.ESTABLISHED="ESTABLISHED",e.CALL_STATE.ACCEPTED="ACCEPTED",e.CALL_STATE.DECLINED="DECLINED",e.CALL_STATE.ENDED="ENDED",e.CALL_STATE.ERROR="ERROR"},function(t,e){t.exports={REMOTE_WINS:function(t,e,i,n){n(null,e)},LOCAL_WINS:function(t,e,i,n){n(null,t.get())}}},function(t,e){function i(t){if(t)return n(t)}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n)i[n].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){(function(e){var n=e.WebSocket||e.MozWebSocket,r=i(136),s=i(137),o=i(138),a=i(139),h=i(132),l=function(t,e,i){this._client=t,this._options=i,this._authParams=null,this._authCallback=null,this._deliberateClose=!1,this._redirecting=!1,this._tooManyAuthAttempts=!1,this._connectionAuthenticationTimeout=!1,this._challengeDenied=!1,this._queuedMessages=[],this._reconnectTimeout=null,this._reconnectionAttempt=0,this._currentPacketMessageCount=0,this._sendNextPacketTimeout=null,this._currentMessageResetTimeout=null,this._endpoint=null,this._lastHeartBeat=null,this._heartbeatInterval=null,this._originalUrl=a.parseUrl(e,this._options.path),this._url=this._originalUrl,this._state=h.CONNECTION_STATE.CLOSED,this._createEndpoint()};l.prototype.getState=function(){return this._state},l.prototype.authenticate=function(t,e){return this._authParams=t,this._authCallback=e,this._tooManyAuthAttempts||this._challengeDenied||this._connectionAuthenticationTimeout?void this._client._$onError(h.TOPIC.ERROR,h.EVENT.IS_CLOSED,"this client's connection was closed"):this._deliberateClose===!0&&this._state===h.CONNECTION_STATE.CLOSED?(this._createEndpoint(),void(this._deliberateClose=!1)):void(this._state===h.CONNECTION_STATE.AWAITING_AUTHENTICATION&&this._sendAuthParams())},l.prototype.sendMsg=function(t,e,i){this.send(o.getMsg(t,e,i))},l.prototype.send=function(t){this._queuedMessages.push(t),this._currentPacketMessageCount++,null===this._currentMessageResetTimeout&&(this._currentMessageResetTimeout=a.nextTick(this._resetCurrentMessageCount.bind(this))),this._state===h.CONNECTION_STATE.OPEN&&this._queuedMessages.length<this._options.maxMessagesPerPacket&&this._currentPacketMessageCount<this._options.maxMessagesPerPacket?this._sendQueuedMessages():null===this._sendNextPacketTimeout&&this._queueNextPacket()},l.prototype.close=function(){clearInterval(this._heartbeatInterval),this._deliberateClose=!0,this._endpoint.close()},l.prototype._createEndpoint=function(){this._endpoint=n?new n(this._url):new r(this._url,this._options.nodeSocketOptions),this._endpoint.onopen=this._onOpen.bind(this),this._endpoint.onerror=this._onError.bind(this),this._endpoint.onclose=this._onClose.bind(this),this._endpoint.onmessage=this._onMessage.bind(this)},l.prototype._resetCurrentMessageCount=function(){this._currentPacketMessageCount=0,this._currentMessageResetTimeout=null},l.prototype._sendQueuedMessages=function(){if(this._state===h.CONNECTION_STATE.OPEN&&this._endpoint.readyState===this._endpoint.OPEN){if(0===this._queuedMessages.length)return void(this._sendNextPacketTimeout=null);var t=this._queuedMessages.splice(0,this._options.maxMessagesPerPacket).join("");0!==this._queuedMessages.length?this._queueNextPacket():this._sendNextPacketTimeout=null,this._submit(t)}},l.prototype._submit=function(t){this._endpoint.readyState===this._endpoint.OPEN?this._endpoint.send(t):this._onError("Tried to send message on a closed websocket connection")},l.prototype._queueNextPacket=function(){var t=this._sendQueuedMessages.bind(this),e=this._options.timeBetweenSendingQueuedPackages;this._sendNextPacketTimeout=setTimeout(t,e)},l.prototype._sendAuthParams=function(){this._setState(h.CONNECTION_STATE.AUTHENTICATING);var t=o.getMsg(h.TOPIC.AUTH,h.ACTIONS.REQUEST,[this._authParams]);this._submit(t)},l.prototype._checkHeartBeat=function(){var t=2*this._options.heartbeatInterval;Date.now()-this._lastHeartBeat>t&&(clearInterval(this._heartbeatInterval),this._endpoint.close(),this._onError("Two connections heartbeats missed successively"))},l.prototype._onOpen=function(){this._clearReconnect(),this._lastHeartBeat=Date.now(),this._heartbeatInterval=a.setInterval(this._checkHeartBeat.bind(this),this._options.heartbeatInterval),this._setState(h.CONNECTION_STATE.AWAITING_CONNECTION)},l.prototype._onError=function(t){clearInterval(this._heartbeatInterval),this._setState(h.CONNECTION_STATE.ERROR),setTimeout(function(){var e;e="ECONNRESET"===t.code||"ECONNREFUSED"===t.code?"Can't connect! Deepstream server unreachable on "+this._originalUrl:t.toString(),this._client._$onError(h.TOPIC.CONNECTION,h.EVENT.CONNECTION_ERROR,e)}.bind(this),1)},l.prototype._onClose=function(){clearInterval(this._heartbeatInterval),this._redirecting===!0?(this._redirecting=!1,this._createEndpoint()):this._deliberateClose===!0?this._setState(h.CONNECTION_STATE.CLOSED):this._tryReconnect()},l.prototype._onMessage=function(t){var e,i=s.parse(t.data,this._client);for(e=0;e<i.length;e++)null!==i[e]&&(i[e].topic===h.TOPIC.CONNECTION?this._handleConnectionResponse(i[e]):i[e].topic===h.TOPIC.AUTH?this._handleAuthResponse(i[e]):this._client._$onMessage(i[e]))},l.prototype._handleConnectionResponse=function(t){t.action===h.ACTIONS.PING?(this._lastHeartBeat=Date.now(),this._submit(o.getMsg(h.TOPIC.CONNECTION,h.ACTIONS.PONG))):t.action===h.ACTIONS.ACK?(this._setState(h.CONNECTION_STATE.AWAITING_AUTHENTICATION),this._authParams&&this._sendAuthParams()):t.action===h.ACTIONS.CHALLENGE?(this._setState(h.CONNECTION_STATE.CHALLENGING),this._submit(o.getMsg(h.TOPIC.CONNECTION,h.ACTIONS.CHALLENGE_RESPONSE,[this._originalUrl]))):t.action===h.ACTIONS.REJECTION?(this._challengeDenied=!0,this.close()):t.action===h.ACTIONS.REDIRECT?(this._url=t.data[0],this._redirecting=!0,this._endpoint.close()):t.action===h.ACTIONS.ERROR&&t.data[0]===h.EVENT.CONNECTION_AUTHENTICATION_TIMEOUT&&(this._deliberateClose=!0,this._connectionAuthenticationTimeout=!0,this._client._$onError(h.TOPIC.CONNECTION,t.data[0],t.data[1]))},l.prototype._handleAuthResponse=function(t){t.action===h.ACTIONS.ERROR?(t.data[0]===h.EVENT.TOO_MANY_AUTH_ATTEMPTS?(this._deliberateClose=!0,this._tooManyAuthAttempts=!0):this._setState(h.CONNECTION_STATE.AWAITING_AUTHENTICATION),this._authCallback&&this._authCallback(!1,this._getAuthData(t.data[1]))):t.action===h.ACTIONS.ACK&&(this._setState(h.CONNECTION_STATE.OPEN),this._authCallback&&this._authCallback(!0,this._getAuthData(t.data[0])),this._sendQueuedMessages())},l.prototype._getAuthData=function(t){return void 0===t?null:s.convertTyped(t,this._client)},l.prototype._setState=function(t){this._state=t,this._client.emit(h.EVENT.CONNECTION_STATE_CHANGED,t)},l.prototype._tryReconnect=function(){null===this._reconnectTimeout&&(this._reconnectionAttempt<this._options.maxReconnectAttempts?(this._setState(h.CONNECTION_STATE.RECONNECTING),this._reconnectTimeout=setTimeout(this._tryOpen.bind(this),Math.min(this._options.maxReconnectInterval,this._options.reconnectIntervalIncrement*this._reconnectionAttempt)),this._reconnectionAttempt++):(this._clearReconnect(),this.close(),this._client.emit(h.MAX_RECONNECTION_ATTEMPTS_REACHED,this._reconnectionAttempt)))},l.prototype._tryOpen=function(){this._originalUrl!==this._url&&(this._url=this._originalUrl),this._createEndpoint(),this._reconnectTimeout=null},l.prototype._clearReconnect=function(){clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null,this._reconnectionAttempt=0},t.exports=l}).call(e,function(){return this}())},4,function(t,e,i){var n=i(132),r=function(){this._actions=this._getActions()};r.prototype.parse=function(t,e){var i,r=[],s=t.split(n.MESSAGE_SEPERATOR);for(i=0;i<s.length;i++)s[i].length>2&&r.push(this._parseMessage(s[i],e));return r},r.prototype.convertTyped=function(t,e){var i=t.charAt(0);if(i===n.TYPES.STRING)return t.substr(1);if(i===n.TYPES.OBJECT)try{return JSON.parse(t.substr(1))}catch(r){return void e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,r.toString()+"("+t+")")}return i===n.TYPES.NUMBER?parseFloat(t.substr(1)):i===n.TYPES.NULL?null:i===n.TYPES.TRUE||i!==n.TYPES.FALSE&&void(i!==n.TYPES.UNDEFINED&&e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"UNKNOWN_TYPE ("+t+")"))},r.prototype._getActions=function(){var t,e={};for(t in n.ACTIONS)e[n.ACTIONS[t]]=t;return e},r.prototype._parseMessage=function(t,e){var i=t.split(n.MESSAGE_PART_SEPERATOR),r={};return i.length<2?(t.processedError=!0,e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"Insufficiant message parts"),null):void 0===this._actions[i[1]]?(t.processedError=!0,e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"Unknown action "+i[1]),null):(r.raw=t,r.topic=i[0],r.action=i[1],r.data=i.splice(2),r)},t.exports=new r},function(t,e,i){var n=i(132),r=n.MESSAGE_PART_SEPERATOR;e.getMsg=function(t,e,i){
if(i&&!(i instanceof Array))throw new Error("data must be an array");var s,o=[t,e];if(i)for(s=0;s<i.length;s++)"object"==typeof i[s]?o.push(JSON.stringify(i[s])):o.push(i[s]);return o.join(r)+n.MESSAGE_SEPERATOR},e.typed=function(t){var e=typeof t;if("string"===e)return n.TYPES.STRING+t;if(null===t)return n.TYPES.NULL;if("object"===e)return n.TYPES.OBJECT+JSON.stringify(t);if("number"===e)return n.TYPES.NUMBER+t.toString();if(t===!0)return n.TYPES.TRUE;if(t===!1)return n.TYPES.FALSE;if(void 0===t)return n.TYPES.UNDEFINED;throw new Error("Can't serialize type "+t)}},function(t,e,i){(function(t){var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r="object";e.isNode="undefined"!=typeof t&&"[object process]"===t.toString(),e.nextTick=function(i){e.isNode?t.nextTick(i):setTimeout(i,0)},e.trim=function(t){return t.trim?t.trim():t.replace(n,"")},e.deepEquals=function(t,e){return t===e||typeof t===r&&typeof e===r&&JSON.stringify(t)===JSON.stringify(e)},e.deepCopy=function(t){return typeof t===r?JSON.parse(JSON.stringify(t)):t},e.shallowCopy=function(t){if(Array.isArray(t))return t.slice(0);if(typeof t===r){for(var e=Object.create(null),i=Object.keys(t),n=0;n<i.length;n++)e[i[n]]=t[i[n]];return e}return t},e.setTimeout=function(t,e){return null!==e?setTimeout(t,e):-1},e.setInterval=function(t,e){return null!==e?setInterval(t,e):-1};var s=/^wss:|^ws:|^\/\//,o=/^http:|^https:/,a=i(140);e.parseUrl=function(t,e){if(o.test(t))throw new Error("Only ws and wss are supported");s.test(t)?0===t.indexOf("//")&&(t="ws:"+t):t="ws://"+t;var i=a.parse(t);if(!i.host)throw new Error("invalid url, missing host");return i.protocol=i.protocol?i.protocol:"ws:",i.pathname=i.pathname?i.pathname:e,a.format(i)}}).call(e,i(3))},function(t,e,i){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&l(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function s(t){return h(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function o(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}function h(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function u(t){return null==t}var p=i(141);e.parse=r,e.resolve=o,e.resolveObject=a,e.format=s,e.Url=n;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),_=["/","?","#"],b=255,x=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=i(143);n.prototype.parse=function(t,e,i){if(!h(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var r=f.exec(n);if(r){r=r[0];var s=r.toLowerCase();this.protocol=s,n=n.substr(r.length)}if(i||r||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===n.substr(0,2);!o||r&&T[r]||(n=n.substr(2),this.slashes=!0)}if(!T[r]&&(o||r&&!A[r])){for(var a=-1,l=0;l<_.length;l++){var c=n.indexOf(_[l]);c!==-1&&(a===-1||c<a)&&(a=c)}var u,d;d=a===-1?n.lastIndexOf("@"):n.lastIndexOf("@",a),d!==-1&&(u=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(u)),a=-1;for(var l=0;l<y.length;l++){var c=n.indexOf(y[l]);c!==-1&&(a===-1||c<a)&&(a=c)}a===-1&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),l=0,M=g.length;l<M;l++){var P=g[l];if(P&&!P.match(x)){for(var C="",R=0,I=P.length;R<I;R++)C+=P.charCodeAt(R)>127?"x":P[R];if(!C.match(x)){var O=g.slice(0,l),N=g.slice(l+1),L=P.match(E);L&&(O.push(L[1]),N.unshift(L[2])),N.length&&(n="/"+N.join(".")+n),this.hostname=O.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var k=this.hostname.split("."),D=[],l=0;l<k.length;++l){var F=k[l];D.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(F):F)}this.hostname=D.join(".")}var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!w[s])for(var l=0,M=v.length;l<M;l++){var V=v[l],z=encodeURIComponent(V);z===V&&(z=escape(V)),n=n.split(V).join(z)}var G=n.indexOf("#");G!==-1&&(this.hash=n.substr(G),n=n.slice(0,G));var j=n.indexOf("?");if(j!==-1?(this.search=n.substr(j),this.query=n.substr(j+1),e&&(this.query=S.parse(this.query)),n=n.slice(0,j)):e&&(this.search="",this.query={}),n&&(this.pathname=n),A[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",F=this.search||"";this.path=B+F}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(s=S.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+r+i+o+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h(t)){var e=new n;e.parse(t,!1,!0),t=e}var i=new n;if(Object.keys(this).forEach(function(t){i[t]=this[t]},this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(i[e]=t[e])}),A[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||T[t.protocol])i.pathname=t.pathname;else{for(var r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),i.pathname=r.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var s=i.pathname||"",o=i.search||"";i.path=s+o}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var a=i.pathname&&"/"===i.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=l||a||i.host&&t.pathname,f=p,d=i.pathname&&i.pathname.split("/")||[],r=t.pathname&&t.pathname.split("/")||[],m=i.protocol&&!A[i.protocol];if(m&&(i.hostname="",i.port=null,i.host&&(""===d[0]?d[0]=i.host:d.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host)),t.host=null),p=p&&(""===r[0]||""===d[0])),l)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,d=r;else if(r.length)d||(d=[]),d.pop(),d=d.concat(r),i.search=t.search,i.query=t.query;else if(!u(t.search)){if(m){i.hostname=i.host=d.shift();var g=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");g&&(i.auth=g.shift(),i.host=i.hostname=g.shift())}return i.search=t.search,i.query=t.query,c(i.pathname)&&c(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!d.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var v=d.slice(-1)[0],y=(i.host||t.host)&&("."===v||".."===v)||""===v,_=0,b=d.length;b>=0;b--)v=d[b],"."==v?d.splice(b,1):".."===v?(d.splice(b,1),_++):_&&(d.splice(b,1),_--);if(!p&&!f)for(;_--;_)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){i.hostname=i.host=x?"":d.length?d.shift():"";var g=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");g&&(i.auth=g.shift(),i.host=i.hostname=g.shift())}return p=p||i.host&&d.length,p&&!x&&d.unshift(""),d.length?i.pathname=d.join("/"):(i.pathname=null,i.path=null),c(i.pathname)&&c(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){var n;(function(t,r){!function(s){function o(t){throw RangeError(O[t])}function a(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function h(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(I,".");var r=t.split("."),s=a(r,e).join(".");return n+s}function l(t){for(var e,i,n=[],r=0,s=t.length;r<s;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<s?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=k(t>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function u(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,i){var n=0;for(t=i?L(t/A):t>>1,t+=L(t/e);t>N*w>>1;n+=x)t=L(t/N);return L(n+(N+1)*t/(t+T))}function d(t){var e,i,n,r,s,a,h,l,p,d,m=[],g=t.length,v=0,y=M,_=S;for(i=t.lastIndexOf(P),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&o("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(s=v,a=1,h=x;r>=g&&o("invalid-input"),l=u(t.charCodeAt(r++)),(l>=x||l>L((b-v)/a))&&o("overflow"),v+=l*a,p=h<=_?E:h>=_+w?w:h-_,!(l<p);h+=x)d=x-p,a>L(b/d)&&o("overflow"),a*=d;e=m.length+1,_=f(v-s,e,0==s),L(v/e)>b-y&&o("overflow"),y+=L(v/e),v%=e,m.splice(v++,0,y)}return c(m)}function m(t){var e,i,n,r,s,a,h,c,u,d,m,g,v,y,_,T=[];for(t=l(t),g=t.length,e=M,i=0,s=S,a=0;a<g;++a)m=t[a],m<128&&T.push(k(m));for(n=r=T.length,r&&T.push(P);n<g;){for(h=b,a=0;a<g;++a)m=t[a],m>=e&&m<h&&(h=m);for(v=n+1,h-e>L((b-i)/v)&&o("overflow"),i+=(h-e)*v,e=h,a=0;a<g;++a)if(m=t[a],m<e&&++i>b&&o("overflow"),m==e){for(c=i,u=x;d=u<=s?E:u>=s+w?w:u-s,!(c<d);u+=x)_=c-d,y=x-d,T.push(k(p(d+_%y,0))),c=L(_/y);T.push(k(p(c,0))),s=f(i,v,n==r),i=0,++n}++i,++e}return T.join("")}function g(t){return h(t,function(t){return C.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return h(t,function(t){return R.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof r&&r);y.global!==y&&y.window!==y&&y.self!==y||(s=y);var _,b=2147483647,x=36,E=1,w=26,T=38,A=700,S=72,M=128,P="-",C=/^xn--/,R=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=x-E,L=Math.floor,k=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:l,encode:c},decode:d,encode:m,toASCII:v,toUnicode:g},n=function(){return _}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,i(142)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,i){"use strict";e.decode=e.parse=i(144),e.encode=e.stringify=i(145)},function(t,e){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var h=t.length;a>0&&h>a&&(h=a);for(var l=0;l<h;++l){var c,u,p,f,d=t[l].replace(o,"%20"),m=d.indexOf(n);m>=0?(c=d.substr(0,m),u=d.substr(m+1)):(c=d,u=""),p=decodeURIComponent(c),f=decodeURIComponent(u),i(s,p)?Array.isArray(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s}},function(t,e){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var s=encodeURIComponent(i(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[r]))}).join(e):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(t)):""}},function(t,e,i){var n=i(138),r=i(137),s=i(147),o=i(148),a=i(132),h=i(149),l=i(134),c=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._emitter=new l,this._listener={},this._ackTimeoutRegistry=new s(i,a.TOPIC.EVENT,this._options.subscriptionTimeout),this._resubscribeNotifier=new o(this._client,this._resubscribe.bind(this))};c.prototype.subscribe=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if("function"!=typeof e)throw new Error("invalid argument callback");this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add(t,a.ACTIONS.SUBSCRIBE),this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.SUBSCRIBE,[t])),this._emitter.on(t,e)},c.prototype.unsubscribe=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if(void 0!==e&&"function"!=typeof e)throw new Error("invalid argument callback");this._emitter.off(t,e),this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add(t,a.ACTIONS.UNSUBSCRIBE),this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.UNSUBSCRIBE,[t]))},c.prototype.emit=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.EVENT,[t,n.typed(e)]),this._emitter.emit(t,e)},c.prototype.listen=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");if("function"!=typeof e)throw new Error("invalid argument callback");return this._listener[t]&&!this._listener[t].destroyPending?this._client._$onError(a.TOPIC.EVENT,a.EVENT.LISTENER_EXISTS,t):(this._listener[t]&&this._listener[t].destroy(),void(this._listener[t]=new h(a.TOPIC.EVENT,t,e,this._options,this._client,this._connection)))},c.prototype.unlisten=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");var e=this._listener[t];e&&!e.destroyPending?e.sendDestroy():this._listener[t]?(this._ackTimeoutRegistry.add(t,a.EVENT.UNLISTEN),this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(a.TOPIC.RECORD,a.EVENT.NOT_LISTENING,t)},c.prototype._$handle=function(t){var e=t.data[t.action===a.ACTIONS.ACK?1:0];if(t.action===a.ACTIONS.EVENT)return processed=!0,void(t.data&&2===t.data.length?this._emitter.emit(e,r.convertTyped(t.data[1],this._client)):this._emitter.emit(e));if(t.action===a.ACTIONS.ACK&&t.data[0]===a.ACTIONS.UNLISTEN&&this._listener[e]&&this._listener[e].destroyPending)return this._listener[e].destroy(),void delete this._listener[e];if(this._listener[e])return processed=!0,void this._listener[e]._$onMessage(t);if(t.action!==a.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED&&t.action!==a.ACTIONS.SUBSCRIPTION_HAS_PROVIDER)return t.action===a.ACTIONS.ACK?void this._ackTimeoutRegistry.clear(t):t.action===a.ACTIONS.ERROR?(t.data[0]===a.EVENT.MESSAGE_DENIED?this._ackTimeoutRegistry.remove(t.data[1],t.data[2]):t.data[0]===a.EVENT.NOT_SUBSCRIBED&&this._ackTimeoutRegistry.remove(t.data[1],a.ACTIONS.UNSUBSCRIBE),t.processedError=!0,void this._client._$onError(a.TOPIC.EVENT,t.data[0],t.data[1])):void this._client._$onError(a.TOPIC.EVENT,a.EVENT.UNSOLICITED_MESSAGE,e)},c.prototype._resubscribe=function(){var t=this._emitter._callbacks;for(var e in t)this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.SUBSCRIBE,[e])},t.exports=c},function(t,e,i){var n=i(132),r=i(134),s=function(t,e,i){this._client=t,this._topic=e,this._timeoutDuration=i,this._register={}};r(s.prototype),s.prototype.add=function(t,e){var i=e?e+t:t;this.remove(t,e),this._register[i]=setTimeout(this._onTimeout.bind(this,i,t),this._timeoutDuration)},s.prototype.remove=function(t,e){var i=e?e+t:t;this._register[i]&&this.clear({data:[e,t]})},s.prototype.clear=function(t){var e=t.data[1],i=t.data[0]+e,r=this._register[i]||this._register[e];r?clearTimeout(r):this._client._$onError(this._topic,n.EVENT.UNSOLICITED_MESSAGE,t.raw)},s.prototype._onTimeout=function(t,e){delete this._register[t];var i="No ACK message received in time for "+e;this._client._$onError(this._topic,n.EVENT.ACK_TIMEOUT,i),this.emit("timeout",e)},t.exports=s},function(t,e,i){var n=i(132),r=function(t,e){this._client=t,this._resubscribe=e,this._isReconnecting=!1,this._connectionStateChangeHandler=this._handleConnectionStateChanges.bind(this),this._client.on("connectionStateChanged",this._connectionStateChangeHandler)};r.prototype.destroy=function(){this._client.removeListener("connectionStateChanged",this._connectionStateChangeHandler),this._connectionStateChangeHandler=null,this._client=null},r.prototype._handleConnectionStateChanges=function(){var t=this._client.getConnectionState();t===n.CONNECTION_STATE.RECONNECTING&&this._isReconnecting===!1&&(this._isReconnecting=!0),t===n.CONNECTION_STATE.OPEN&&this._isReconnecting===!0&&(this._isReconnecting=!1,this._resubscribe())},t.exports=r},function(t,e,i){var n=i(132),r=i(148),s=function(t,e,i,n,s,o){this._type=t,this._callback=i,this._pattern=e,this._options=n,this._client=s,this._connection=o,this._ackTimeout=setTimeout(this._onAckTimeout.bind(this),this._options.subscriptionTimeout),this._resubscribeNotifier=new r(s,this._sendListen.bind(this)),this._sendListen(),this.destroyPending=!1};s.prototype.sendDestroy=function(){this.destroyPending=!0,this._connection.sendMsg(this._type,n.ACTIONS.UNLISTEN,[this._pattern]),this._resubscribeNotifier.destroy()},s.prototype.destroy=function(){this._callback=null,this._pattern=null,this._client=null,this._connection=null},s.prototype.accept=function(t){this._connection.sendMsg(this._type,n.ACTIONS.LISTEN_ACCEPT,[this._pattern,t])},s.prototype.reject=function(t){this._connection.sendMsg(this._type,n.ACTIONS.LISTEN_REJECT,[this._pattern,t])},s.prototype._createCallbackResponse=function(t){return{accept:this.accept.bind(this,t.data[1]),reject:this.reject.bind(this,t.data[1])}},s.prototype._$onMessage=function(t){t.action===n.ACTIONS.ACK?clearTimeout(this._ackTimeout):t.action===n.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND?this._callback(t.data[1],!0,this._createCallbackResponse(t)):t.action===n.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED?this._callback(t.data[1],!1):this._client._$onError(this._type,n.EVENT.UNSOLICITED_MESSAGE,t.data[0]+"|"+t.data[1])},s.prototype._sendListen=function(){this._connection.sendMsg(this._type,n.ACTIONS.LISTEN,[this._pattern])},s.prototype._onAckTimeout=function(){this._client._$onError(this._type,n.EVENT.ACK_TIMEOUT,"No ACK message received in time for "+this._pattern)},t.exports=s},function(t,e,i){var n=i(132),r=i(147),s=i(148),o=i(151),a=i(152),h=i(137),l=i(138),c=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._rpcs={},this._providers={},this._provideAckTimeouts={},this._ackTimeoutRegistry=new r(i,n.TOPIC.RPC,this._options.subscriptionTimeout),this._resubscribeNotifier=new s(this._client,this._reprovide.bind(this))};c.prototype.provide=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if(this._providers[t])throw new Error("RPC "+t+" already registered");if("function"!=typeof e)throw new Error("invalid argument callback");this._ackTimeoutRegistry.add(t,n.ACTIONS.SUBSCRIBE),this._providers[t]=e,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.SUBSCRIBE,[t])},c.prototype.unprovide=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._providers[t]&&(delete this._providers[t],this._ackTimeoutRegistry.add(t,n.ACTIONS.UNSUBSCRIBE),this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.UNSUBSCRIBE,[t]))},c.prototype.make=function(t,e,i){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if("function"!=typeof i)throw new Error("invalid argument callback");var r=this._client.getUid(),s=l.typed(e);this._rpcs[r]=new a(this._options,i,this._client),this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REQUEST,[t,r,s])},c.prototype._getRpc=function(t,e,i){var r=this._rpcs[t];return r?r:(this._client._$onError(n.TOPIC.RPC,n.EVENT.UNSOLICITED_MESSAGE,i),null)},c.prototype._respondToRpc=function(t){var e,i=t.data[0],r=t.data[1],s=null;t.data[2]&&(s=h.convertTyped(t.data[2],this._client)),this._providers[i]?(e=new o(this._connection,i,r),this._providers[i](s,e)):this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REJECTION,[i,r])},c.prototype._$handle=function(t){var e,i,r;if(t.action===n.ACTIONS.REQUEST)return void this._respondToRpc(t);if(t.action===n.ACTIONS.ACK&&(t.data[0]===n.ACTIONS.SUBSCRIBE||t.data[0]===n.ACTIONS.UNSUBSCRIBE))return void this._ackTimeoutRegistry.clear(t);if(t.action===n.ACTIONS.ERROR){if(t.data[0]===n.EVENT.MESSAGE_PERMISSION_ERROR)return;if(t.data[0]===n.EVENT.MESSAGE_DENIED&&t.data[2]===n.ACTIONS.SUBSCRIBE)return void this._ackTimeoutRegistry.remove(t.data[1],n.ACTIONS.SUBSCRIBE)}t.action===n.ACTIONS.ERROR||t.action===n.ACTIONS.ACK?(i=t.data[0]===n.EVENT.MESSAGE_DENIED&&t.data[2]===n.ACTIONS.REQUEST?t.data[3]:t.data[2],e=t.data[1]):(e=t.data[0],i=t.data[1]),r=this._getRpc(i,e,t.raw),null!==r&&(t.action===n.ACTIONS.ACK?r.ack():t.action===n.ACTIONS.RESPONSE?(r.respond(t.data[2]),delete this._rpcs[i]):t.action===n.ACTIONS.ERROR&&(t.processedError=!0,r.error(t.data[0]),delete this._rpcs[i]))},c.prototype._reprovide=function(){for(var t in this._providers)this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.SUBSCRIBE,[t])},t.exports=c},function(t,e,i){var n=i(132),r=i(139),s=i(138),o=function(t,e,i){this._connection=t,this._name=e,this._correlationId=i,this._isAcknowledged=!1,this._isComplete=!1,this.autoAck=!0,r.nextTick(this._performAutoAck.bind(this))};o.prototype.ack=function(){this._isAcknowledged===!1&&(this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.ACK,[n.ACTIONS.REQUEST,this._name,this._correlationId]),this._isAcknowledged=!0)},o.prototype.reject=function(){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REJECTION,[this._name,this._correlationId])},o.prototype.error=function(t){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.ERROR,[t,this._name,this._correlationId])},o.prototype.send=function(t){if(this._isComplete===!0)throw new Error("Rpc "+this._name+" already completed");this.ack();var e=s.typed(t);this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.RESPONSE,[this._name,this._correlationId,e]),this._isComplete=!0},o.prototype._performAutoAck=function(){this.autoAck===!0&&this.ack()},t.exports=o},function(t,e,i){var n=i(132),r=i(137),s=function(t,e,i){this._options=t,this._callback=e,this._client=i,this._ackTimeout=setTimeout(this.error.bind(this,n.EVENT.ACK_TIMEOUT),this._options.rpcAckTimeout),this._responseTimeout=setTimeout(this.error.bind(this,n.EVENT.RESPONSE_TIMEOUT),this._options.rpcResponseTimeout)};s.prototype.ack=function(){clearTimeout(this._ackTimeout)},s.prototype.respond=function(t){var e=r.convertTyped(t,this._client);this._callback(null,e),this._complete()},s.prototype.error=function(t){this._callback(t),this._complete()},s.prototype._complete=function(){clearTimeout(this._ackTimeout),clearTimeout(this._responseTimeout)},t.exports=s},function(t,e,i){var n=i(154),r=i(156),s=i(157),o=i(149),a=i(158),h=i(132),l=i(137),c=i(134),u=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._records={},this._lists={},this._listener={},this._destroyEventEmitter=new c,this._hasRegistry=new a(i,e,h.TOPIC.RECORD,h.ACTIONS.HAS,this._options.recordReadTimeout),this._snapshotRegistry=new a(i,e,h.TOPIC.RECORD,h.ACTIONS.SNAPSHOT,this._options.recordReadTimeout)};u.prototype.getRecord=function(t,e){return this._records[t]||(this._records[t]=new n(t,e||{},this._connection,this._options,this._client),this._records[t].on("error",this._onRecordError.bind(this,t)),this._records[t].on("destroyPending",this._onDestroyPending.bind(this,t)),this._records[t].on("delete",this._removeRecord.bind(this,t)),this._records[t].on("discard",this._removeRecord.bind(this,t))),this._records[t].usages++,this._records[t]},u.prototype.getList=function(t,e){return this._lists[t]?this._records[t].usages++:this._lists[t]=new s(this,t,e),this._lists[t]},u.prototype.getAnonymousRecord=function(){return new r(this)},u.prototype.listen=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");if("function"!=typeof e)throw new Error("invalid argument callback");return this._listener[t]&&!this._listener[t].destroyPending?this._client._$onError(h.TOPIC.RECORD,h.EVENT.LISTENER_EXISTS,t):(this._listener[t]&&this._listener[t].destroy(),void(this._listener[t]=new o(h.TOPIC.RECORD,t,e,this._options,this._client,this._connection)))},u.prototype.unlisten=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");var e=this._listener[t];e&&!e.destroyPending?e.sendDestroy():this._listener[t]?(this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(h.TOPIC.RECORD,h.EVENT.NOT_LISTENING,t)},u.prototype.snapshot=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._records[t]&&this._records[t].isReady?e(null,this._records[t].get()):this._snapshotRegistry.request(t,e)},u.prototype.has=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._records[t]?e(null,!0):this._hasRegistry.request(t,e)},u.prototype._$handle=function(t){var e;if(t.action===h.ACTIONS.ERROR&&t.data[0]!==h.EVENT.VERSION_EXISTS&&t.data[0]!==h.ACTIONS.SNAPSHOT&&t.data[0]!==h.ACTIONS.HAS&&t.data[0]!==h.EVENT.MESSAGE_DENIED)return t.processedError=!0,void this._client._$onError(h.TOPIC.RECORD,t.data[0],t.data[1]);if(t.action===h.ACTIONS.ACK||t.action===h.ACTIONS.ERROR){if(e=t.data[1],t.data[0]===h.ACTIONS.DELETE||t.data[0]===h.ACTIONS.UNSUBSCRIBE||t.data[0]===h.EVENT.MESSAGE_DENIED&&t.data[2]===h.ACTIONS.DELETE)return this._destroyEventEmitter.emit("destroy_ack_"+e,t),void(t.data[0]===h.ACTIONS.DELETE&&this._records[e]&&this._records[e]._$onMessage(t));if(t.data[0]===h.ACTIONS.SNAPSHOT)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2]);if(t.data[0]===h.ACTIONS.HAS)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2])}else e=t.data[0];var i=!1;this._records[e]&&(i=!0,this._records[e]._$onMessage(t)),t.action===h.ACTIONS.READ&&this._snapshotRegistry.hasRequest(e)&&(i=!0,this._snapshotRegistry.recieve(e,null,JSON.parse(t.data[2]))),t.action===h.ACTIONS.HAS&&this._hasRegistry.hasRequest(e)&&(i=!0,this._hasRegistry.recieve(e,null,l.convertTyped(t.data[1]))),t.action===h.ACTIONS.ACK&&t.data[0]===h.ACTIONS.UNLISTEN&&this._listener[e]&&this._listener[e].destroyPending?(i=!0,this._listener[e].destroy(),delete this._listener[e]):this._listener[e]?(i=!0,this._listener[e]._$onMessage(t)):t.action===h.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED?i=!0:t.action===h.ACTIONS.SUBSCRIPTION_HAS_PROVIDER&&(i=!0),i||(t.processedError=!0,this._client._$onError(h.TOPIC.RECORD,h.EVENT.UNSOLICITED_MESSAGE,e))},u.prototype._onRecordError=function(t,e){this._client._$onError(h.TOPIC.RECORD,e,t)},u.prototype._onDestroyPending=function(t){if(!this._records[t])return void this.emit("error","Record '"+t+"' does not exists");var e=this._records[t]._$onMessage.bind(this._records[t]);this._destroyEventEmitter.once("destroy_ack_"+t,e),this._removeRecord(t)},u.prototype._removeRecord=function(t){delete this._records[t],delete this._lists[t]},t.exports=u},function(t,e,i){var n=i(155),r=(i(139),i(148)),s=i(134),o=i(132),a=i(138),h=i(137),l=function(t,e,i,n,a){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this.name=t,this.usages=0,this._recordOptions=e,this._connection=i,this._client=a,this._options=n,this.isReady=!1,this.isDestroyed=!1,this.hasProvider=!1,this._$data=Object.create(null),this.version=null,this._eventEmitter=new s,this._queuedMethodCalls=[],this._writeCallbacks={},this._mergeStrategy=null,n.mergeStrategy&&this.setMergeStrategy(n.mergeStrategy),this._resubscribeNotifier=new r(this._client,this._sendRead.bind(this)),this._readAckTimeout=setTimeout(this._onTimeout.bind(this,o.EVENT.ACK_TIMEOUT),this._options.recordReadAckTimeout),this._readTimeout=setTimeout(this._onTimeout.bind(this,o.EVENT.RESPONSE_TIMEOUT),this._options.recordReadTimeout),this._sendRead()};s(l.prototype),l.prototype.setMergeStrategy=function(t){if("function"!=typeof t)throw new Error("Invalid merge strategy: Must be a Function");this._mergeStrategy=t},l.prototype.get=function(t){return n.get(this._$data,t,this._options.recordDeepCopy)},l.prototype.set=function(t,e,i){var r,s;if(1===arguments.length){if("object"!=typeof t)throw new Error("invalid argument data");s=t}else if(2===arguments.length)if("string"==typeof t&&0!==t.length&&"function"!=typeof e)r=t,s=e;else{if("object"!=typeof t||"function"!=typeof e)throw new Error("invalid argument path");s=t,i=e}else if(3===arguments.length){if("string"!=typeof t||0===t.length||"function"!=typeof i)throw new Error("invalid arguments, must pass in a string, a value and a function");r=t,s=e}if(this._checkDestroyed("set"))return this;if(!this.isReady)return this._queuedMethodCalls.push({method:"set",args:arguments}),this;var a=this._$data,h=n.set(a,r,s,this._options.recordDeepCopy);if(a===h)return this;var l;if(void 0!==i){l={},l.writeSuccess=!0,this._setUpCallback(this.version,i);var c=this._client.getConnectionState();c!==o.CONNECTION_STATE.CLOSED&&c!==o.CONNECTION_STATE.RECONNECTING||i("Connection error: error updating record as connection was closed")}return this._sendUpdate(r,s,l),this._applyChange(h),this},l.prototype.subscribe=function(t,e,i){var n=this._normalizeArguments(arguments);if(void 0!==n.path&&("string"!=typeof n.path||0===n.path.length))throw new Error("invalid argument path");if("function"!=typeof n.callback)throw new Error("invalid argument callback");this._checkDestroyed("subscribe")||(n.triggerNow?this.whenReady(function(){this._eventEmitter.on(n.path,n.callback),n.callback(this.get(n.path))}.bind(this)):this._eventEmitter.on(n.path,n.callback))},l.prototype.unsubscribe=function(t,e){var i=this._normalizeArguments(arguments);if(void 0!==i.path&&("string"!=typeof i.path||0===i.path.length))throw new Error("invalid argument path");if(void 0!==i.callback&&"function"!=typeof i.callback)throw new Error("invalid argument callback");this._checkDestroyed("unsubscribe")||this._eventEmitter.off(i.path,i.callback)},l.prototype.discard=function(){this._checkDestroyed("discard")||this.whenReady(function(){this.usages--,this.usages<=0&&(this.emit("destroyPending"),this._discardTimeout=setTimeout(this._onTimeout.bind(this,o.EVENT.ACK_TIMEOUT),this._options.subscriptionTimeout),this._connection.sendMsg(o.TOPIC.RECORD,o.ACTIONS.UNSUBSCRIBE,[this.name]))}.bind(this))},l.prototype["delete"]=function(){this._checkDestroyed("delete")||this.whenReady(function(){this.emit("destroyPending"),this._deleteAckTimeout=setTimeout(this._onTimeout.bind(this,o.EVENT.DELETE_TIMEOUT),this._options.recordDeleteTimeout),this._connection.sendMsg(o.TOPIC.RECORD,o.ACTIONS.DELETE,[this.name])}.bind(this))},l.prototype.whenReady=function(t){this.isReady===!0?t(this):this.once("ready",t.bind(this,this))},l.prototype._$onMessage=function(t){if(t.action===o.ACTIONS.READ)null===this.version?(clearTimeout(this._readTimeout),this._onRead(t)):this._applyUpdate(t,this._client);else if(t.action===o.ACTIONS.ACK)this._processAckMessage(t);else if(t.action===o.ACTIONS.UPDATE||t.action===o.ACTIONS.PATCH)this._applyUpdate(t,this._client);else if(t.action===o.ACTIONS.WRITE_ACKNOWLEDGEMENT)for(var e=JSON.parse(t.data[1]),i=0;i<e.length;i++){
var n=this._writeCallbacks[e[i]];void 0!==n&&(n(h.convertTyped(t.data[2],this._client)),delete this._writeCallbacks[e[i]])}else if(t.data[0]===o.EVENT.VERSION_EXISTS)this._recoverRecord(t.data[2],JSON.parse(t.data[3]),t);else if(t.data[0]===o.EVENT.MESSAGE_DENIED)this._clearTimeouts();else if(t.action===o.ACTIONS.SUBSCRIPTION_HAS_PROVIDER){var r=h.convertTyped(t.data[1],this._client);this.hasProvider=r,this.emit("hasProviderChanged",r)}},l.prototype._recoverRecord=function(t,e,i){i.processedError=!0,this._mergeStrategy?this._mergeStrategy(this,e,t,this._onRecordRecovered.bind(this,t,e,i)):this.emit("error",o.EVENT.VERSION_EXISTS,"received update for "+t+" but version is "+this.version)},l.prototype._sendUpdate=function(t,e,i){this.version++;var n;t?(n=void 0===i?[this.name,this.version,t,a.typed(e)]:[this.name,this.version,t,a.typed(e),i],this._connection.sendMsg(o.TOPIC.RECORD,o.ACTIONS.PATCH,n)):(n=void 0===i?[this.name,this.version,e]:[this.name,this.version,e,i],this._connection.sendMsg(o.TOPIC.RECORD,o.ACTIONS.UPDATE,n))},l.prototype._onRecordRecovered=function(t,e,i,r,s){if(r)this.emit("error",o.EVENT.VERSION_EXISTS,"received update for "+t+" but version is "+this.version);else{var a=this.version;this.version=t;var h=this._$data,l=n.set(h,void 0,s,!1);if(h===l)return;var c=i.data[4];if(c&&JSON.parse(c).writeSuccess){var u=this._writeCallbacks[a];delete this._writeCallbacks[a],this._setUpCallback(this.version,u)}this._sendUpdate(void 0,s,c),this._applyChange(l)}},l.prototype._processAckMessage=function(t){var e=t.data[0];e===o.ACTIONS.SUBSCRIBE?clearTimeout(this._readAckTimeout):e===o.ACTIONS.DELETE?(this.emit("delete"),this._destroy()):e===o.ACTIONS.UNSUBSCRIBE&&(this.emit("discard"),this._destroy())},l.prototype._applyUpdate=function(t){var e,i=parseInt(t.data[1],10);if(e=t.action===o.ACTIONS.PATCH?h.convertTyped(t.data[3],this._client):JSON.parse(t.data[2]),null===this.version)this.version=i;else if(this.version+1!==i)return void(t.action===o.ACTIONS.PATCH?this._connection.sendMsg(o.TOPIC.RECORD,o.ACTIONS.SNAPSHOT,[this.name]):this._recoverRecord(i,e,t));this.version=i,this._applyChange(n.set(this._$data,t.action===o.ACTIONS.PATCH?t.data[2]:void 0,e))},l.prototype._onRead=function(t){this.version=parseInt(t.data[1],10),this._applyChange(n.set(this._$data,void 0,JSON.parse(t.data[2]))),this._setReady()},l.prototype._setReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethodCalls.length;t++)this[this._queuedMethodCalls[t].method].apply(this,this._queuedMethodCalls[t].args);this._queuedMethodCalls=[],this.emit("ready")},l.prototype._setUpCallback=function(t,e){var i=Number(this.version)+1;this._writeCallbacks[i]=e},l.prototype._sendRead=function(){this._connection.sendMsg(o.TOPIC.RECORD,o.ACTIONS.CREATEORREAD,[this.name])},l.prototype._applyChange=function(t){if(!this.isDestroyed){var e=this._$data;if(this._$data=t,this._eventEmitter._callbacks)for(var i=Object.keys(this._eventEmitter._callbacks),r=0;r<i.length;r++){var s=n.get(t,i[r],!1),o=n.get(e,i[r],!1);s!==o&&this._eventEmitter.emit(i[r],this.get(i[r]))}}},l.prototype._normalizeArguments=function(t){if(1===t.length&&"object"==typeof t[0])return t[0];for(var e=Object.create(null),i=0;i<t.length;i++)"string"==typeof t[i]?e.path=t[i]:"function"==typeof t[i]?e.callback=t[i]:"boolean"==typeof t[i]&&(e.triggerNow=t[i]);return e},l.prototype._clearTimeouts=function(){clearTimeout(this._readAckTimeout),clearTimeout(this._deleteAckTimeout),clearTimeout(this._discardTimeout),clearTimeout(this._deleteAckTimeout)},l.prototype._checkDestroyed=function(t){return!!this.isDestroyed&&(this.emit("error","Can't invoke '"+t+"'. Record '"+this.name+"' is already destroyed"),!0)},l.prototype._onTimeout=function(t){this._clearTimeouts(),this.emit("error",t)},l.prototype._destroy=function(){this._clearTimeouts(),this._eventEmitter.off(),this._resubscribeNotifier.destroy(),this.isDestroyed=!0,this.isReady=!1,this._client=null,this._eventEmitter=null,this._connection=null},t.exports=l},function(t,e,i){function n(t,e,i){var r;if(s.deepEquals(t,e))return t;if(null===t||null===e)return e;if(Array.isArray(t)&&Array.isArray(e)){var o=[];for(r=0;r<e.length;r++)o[r]=n(t[r],e[r],i);return o}if(Array.isArray(e)||"object"!=typeof t||"object"!=typeof e)return i!==!1?s.deepCopy(e):e;var a=Object.keys(e),h=Object.create(null);for(r=0;r<a.length;r++)h[a[r]]=n(t[a[r]],e[a[r]],i);return h}function r(t){if(a[t])return a[t];var e="undefined"!==String(t)?String(t).match(o):[];if(!e)throw new Error("invalid path "+t);return a[t]=e.map(function(t){return isNaN(t)?t:parseInt(t,10)})}var s=i(139),o=/([^\.\[\]\s]+)/g,a=Object.create(null);t.exports.get=function(t,e,i){for(var n=r(e),o=0;o<n.length;o++){if(void 0===t)return;if("object"!=typeof t)throw new Error("invalid data or path");t=t[n[o]]}return i!==!1?s.deepCopy(t):t},t.exports.set=function(e,i,o,a){var h=r(i);if(0===h.length)return n(e,o,a);var l=t.exports.get(e,i,!1),c=n(l,o,a);if(c===l)return e;for(var u=s.shallowCopy(e),p=u,f=0;f<h.length;f++)f===h.length-1?p[h[f]]=c:p=void 0!==p[h[f]]?p[h[f]]=s.shallowCopy(p[h[f]]):h[f+1]&&!isNaN(h[f+1])?p[h[f]]=[]:p[h[f]]=Object.create(null);return u}},function(t,e,i){var n=i(154),r=i(134),s=function(t){this.name=null,this._recordHandler=t,this._record=null,this._subscriptions=[],this._proxyMethod("delete"),this._proxyMethod("set"),this._proxyMethod("discard")};r(s.prototype),s.prototype.get=function(t){if(null!==this._record)return this._record.get(t)},s.prototype.subscribe=function(){var t=n.prototype._normalizeArguments(arguments);t.triggerNow=!0,this._subscriptions.push(t),null!==this._record&&this._record.subscribe(t)},s.prototype.unsubscribe=function(){var t,e=n.prototype._normalizeArguments(arguments),i=[];for(t=0;t<this._subscriptions.length;t++)this._subscriptions[t].path===e.path&&this._subscriptions[t].callback===e.callback||i.push(this._subscriptions[t]);this._subscriptions=i,null!==this._record&&this._record.unsubscribe(e)},s.prototype.setName=function(t){this.name=t;var e;if(null!==this._record&&!this._record.isDestroyed){for(e=0;e<this._subscriptions.length;e++)this._record.unsubscribe(this._subscriptions[e]);this._record.discard()}for(this._record=this._recordHandler.getRecord(t),e=0;e<this._subscriptions.length;e++)this._record.subscribe(this._subscriptions[e]);this._record.whenReady(this.emit.bind(this,"ready")),this.emit("nameChanged",t)},s.prototype._proxyMethod=function(t){this[t]=this._callMethodOnRecord.bind(this,t)},s.prototype._callMethodOnRecord=function(t){if(null===this._record)throw new Error("Can`t invoke "+t+". AnonymousRecord not initialised. Call setName first");if("function"!=typeof this._record[t])throw new Error(t+" is not a method on the record");var e=Array.prototype.slice.call(arguments,1);return this._record[t].apply(this._record,e)},t.exports=s},function(t,e,i){var n=i(134),r=i(154),s=i(132),o="entry-added",a="entry-removed",h="entry-moved",l=function(t,e,i){if("string"!=typeof e||0===e.length)throw new Error("invalid argument name");this._recordHandler=t,this._record=this._recordHandler.getRecord(e,i),this._record._applyUpdate=this._applyUpdate.bind(this),this._record.on("delete",this.emit.bind(this,"delete")),this._record.on("discard",this._onDiscard.bind(this)),this._record.on("ready",this._onReady.bind(this)),this.isDestroyed=this._record.isDestroyed,this.isReady=this._record.isReady,this.name=e,this._queuedMethods=[],this._beforeStructure=null,this._hasAddListener=null,this._hasRemoveListener=null,this._hasMoveListener=null,this["delete"]=this._record["delete"].bind(this._record),this.discard=this._record.discard.bind(this._record),this.whenReady=this._record.whenReady.bind(this)};n(l.prototype),l.prototype.getEntries=function(){var t=this._record.get();return t instanceof Array?t:[]},l.prototype.isEmpty=function(){return 0===this.getEntries().length},l.prototype.setEntries=function(t){var e,i="entries must be an array of record names";if(!(t instanceof Array))throw new Error(i);for(e=0;e<t.length;e++)if("string"!=typeof t[e])throw new Error(i);this._record.isReady===!1?this._queuedMethods.push(this.setEntries.bind(this,t)):(this._beforeChange(),this._record.set(t),this._afterChange())},l.prototype.removeEntry=function(t,e){if(this._record.isReady===!1)return void this._queuedMethods.push(this.removeEntry.bind(this,t));var i,n=this._record.get(),r=this._hasIndex(e),s=[];for(i=0;i<n.length;i++)(n[i]!==t||r&&e!==i)&&s.push(n[i]);this._beforeChange(),this._record.set(s),this._afterChange()},l.prototype.addEntry=function(t,e){if("string"!=typeof t)throw new Error("Entry must be a recordName");if(this._record.isReady===!1)return void this._queuedMethods.push(this.addEntry.bind(this,t));var i=this._hasIndex(e),n=this.getEntries();i?n.splice(e,0,t):n.push(t),this._beforeChange(),this._record.set(n),this._afterChange()},l.prototype.subscribe=function(){var t=r.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.subscribe");var e=function(t){t(this.getEntries())}.bind(this,t.callback);t.callback.wrappedCallback=e,t.callback=e,this._record.subscribe(t)},l.prototype.unsubscribe=function(){var t=r.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.unsubscribe");t.callback=t.callback.wrappedCallback,this._record.unsubscribe(t)},l.prototype._onReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethods.length;t++)this._queuedMethods[t]();this.emit("ready")},l.prototype._onDiscard=function(){this.isDestroyed=!0,this.emit("discard")},l.prototype._applyUpdate=function(t){if(t.action===s.ACTIONS.PATCH)throw new Error("PATCH is not supported for Lists");"["!==t.data[2].charAt(0)&&(t.data[2]="[]"),this._beforeChange(),r.prototype._applyUpdate.call(this._record,t),this._afterChange()},l.prototype._hasIndex=function(t){var e=!1,i=this.getEntries();if(void 0!==t){if(isNaN(t))throw new Error("Index must be a number");if(t!==i.length&&(t>=i.length||t<0))throw new Error("Index must be within current entries");e=!0}return e},l.prototype._beforeChange=function(){this._hasAddListener=this.listeners(o).length>0,this._hasRemoveListener=this.listeners(a).length>0,this._hasMoveListener=this.listeners(h).length>0,this._hasAddListener||this._hasRemoveListener||this._hasMoveListener?this._beforeStructure=this._getStructure():this._beforeStructure=null},l.prototype._afterChange=function(){if(null!==this._beforeStructure){var t,e,i=this._getStructure(),n=this._beforeStructure;if(this._hasRemoveListener)for(t in n)for(e=0;e<n[t].length;e++)void 0!==i[t]&&void 0!==i[t][e]||this.emit(a,t,n[t][e]);if(this._hasAddListener||this._hasMoveListener)for(t in i)if(void 0===n[t])for(e=0;e<i[t].length;e++)this.emit(o,t,i[t][e]);else for(e=0;e<i[t].length;e++)n[t][e]!==i[t][e]&&(void 0===n[t][e]?this.emit(o,t,i[t][e]):this.emit(h,t,i[t][e]))}},l.prototype._getStructure=function(){var t,e={},i=this._record.get();for(t=0;t<i.length;t++)void 0===e[i[t]]?e[i[t]]=[t]:e[i[t]].push(t);return e},t.exports=l},function(t,e,n){var r=n(132),s=n(148),o=function(t,e,i,n,r){this._client=t,this._connection=e,this._topic=i,this._action=n,this._timeoutDuration=r,this._requests={},this._resubscribeNotifier=new s(this._client,this._resendRequests.bind(this))};o.prototype.hasRequest=function(t){return!!this._requests[t]},o.prototype.request=function(t,e){var i;this._requests[t]||(this._requests[t]=[],this._connection.sendMsg(this._topic,this._action,[t])),i=setTimeout(this._onResponseTimeout.bind(this,t),this._timeoutDuration),this._requests[t].push({timeout:i,callback:e})},o.prototype.recieve=function(t,e,n){var s=this._requests[t];if(!s)return void this._client._$onError(this._topic,r.EVENT.UNSOLICITED_MESSAGE,"no entry for "+t);for(i=0;i<s.length;i++)entry=s[i],clearTimeout(entry.timeout),entry.callback(e,n);delete this._requests[t]},o.prototype._onResponseTimeout=function(t){var e="No response received in time for "+this._topic+"|"+this._action+"|"+t;this._client._$onError(this._topic,r.EVENT.RESPONSE_TIMEOUT,e)},o.prototype._resendRequests=function(){for(var t in this._requests)this._connection.sendMsg(this._topic,this._action,[this._requests[t]])},t.exports=o},function(t,e,i){var n=i(134),r=i(132),s=i(147),o=(i(137),i(138),i(148)),a=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._emitter=new n,this._ackTimeoutRegistry=new s(i,r.TOPIC.PRESENCE,this._options.subscriptionTimeout),this._resubscribeNotifier=new o(this._client,this._resubscribe.bind(this))};a.prototype.getAll=function(t){this._emitter.hasListeners(r.ACTIONS.QUERY)||this._connection.sendMsg(r.TOPIC.PRESENCE,r.ACTIONS.QUERY,[r.ACTIONS.QUERY]),this._emitter.once(r.ACTIONS.QUERY,t)},a.prototype.subscribe=function(t){if(void 0!==t&&"function"!=typeof t)throw new Error("invalid argument callback");this._emitter.hasListeners(r.TOPIC.PRESENCE)||(this._ackTimeoutRegistry.add(r.TOPIC.PRESENCE,r.ACTIONS.SUBSCRIBE),this._connection.sendMsg(r.TOPIC.PRESENCE,r.ACTIONS.SUBSCRIBE,[r.ACTIONS.SUBSCRIBE])),this._emitter.on(r.TOPIC.PRESENCE,t)},a.prototype.unsubscribe=function(t){if(void 0!==t&&"function"!=typeof t)throw new Error("invalid argument callback");this._emitter.off(r.TOPIC.PRESENCE,t),this._emitter.hasListeners(r.TOPIC.PRESENCE)||(this._ackTimeoutRegistry.add(r.TOPIC.PRESENCE,r.ACTIONS.UNSUBSCRIBE),this._connection.sendMsg(r.TOPIC.PRESENCE,r.ACTIONS.UNSUBSCRIBE,[r.ACTIONS.UNSUBSCRIBE]))},a.prototype._$handle=function(t){t.action===r.ACTIONS.ERROR&&t.data[0]===r.EVENT.MESSAGE_DENIED?(this._ackTimeoutRegistry.remove(r.TOPIC.PRESENCE,t.data[1]),t.processedError=!0,this._client._$onError(r.TOPIC.PRESENCE,r.EVENT.MESSAGE_DENIED,t.data[1])):t.action===r.ACTIONS.ACK?this._ackTimeoutRegistry.clear(t):t.action===r.ACTIONS.PRESENCE_JOIN?this._emitter.emit(r.TOPIC.PRESENCE,t.data[0],!0):t.action===r.ACTIONS.PRESENCE_LEAVE?this._emitter.emit(r.TOPIC.PRESENCE,t.data[0],!1):t.action===r.ACTIONS.QUERY?this._emitter.emit(r.ACTIONS.QUERY,t.data):this._client._$onError(r.TOPIC.PRESENCE,r.EVENT.UNSOLICITED_MESSAGE,t.action)},a.prototype._resubscribe=function(){var t=this._emitter._callbacks;t&&t[r.TOPIC.PRESENCE]&&this._connection.sendMsg(r.TOPIC.PRESENCE,r.ACTIONS.SUBSCRIBE,[r.ACTIONS.SUBSCRIBE])},t.exports=a},function(t,e,i){var n=i(133);t.exports={heartbeatInterval:3e4,recordPersistDefault:!0,reconnectIntervalIncrement:4e3,maxReconnectInterval:18e4,maxReconnectAttempts:5,rpcAckTimeout:6e3,rpcResponseTimeout:1e4,subscriptionTimeout:2e3,maxMessagesPerPacket:100,timeBetweenSendingQueuedPackages:16,recordReadAckTimeout:1e3,recordReadTimeout:3e3,recordDeleteTimeout:3e3,path:"/deepstream",mergeStrategy:n.REMOTE_WINS,recordDeepCopy:!0,nodeSocketOptions:null}},function(t,e){function i(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),i=i>r?r:i,i<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var s=Array(r);++n<r;)s[n]=t[n+e];return s}function n(t,e){return e=null==e?v:e,!!e&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function r(t,e,i){if(!c(i))return!1;var r=typeof e;return!!("number"==r?a(i)&&n(e,i.length):"string"==r&&e in i)&&o(i[e],t)}function s(t,e,n){e=(n?r(t,e,n):void 0===e)?1:O(d(e),0);var s=t?t.length:0;if(!s||e<1)return[];for(var o=0,a=0,h=Array(I(s/e));o<s;)h[a++]=i(t,o,o+=e);return h}function o(t,e){return t===e||t!==t&&e!==e}function a(t){return null!=t&&l(t.length)&&!h(t)}function h(t){var e=c(t)?R.call(t):"";return e==b||e==x}function l(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return!!t&&"object"==typeof t}function p(t){return"symbol"==typeof t||u(t)&&R.call(t)==E}function f(t){if(!t)return 0===t?t:0;if(t=m(t),t===g||t===-g){var e=t<0?-1:1;return e*y}return t===t?t:0}function d(t){var e=f(t),i=e%1;return e===e?i?e-i:e:0}function m(t){if("number"==typeof t)return t;if(p(t))return _;if(c(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=c(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(w,"");var i=A.test(t);return i||S.test(t)?P(t.slice(2),i?2:8):T.test(t)?_:+t}var g=1/0,v=9007199254740991,y=1.7976931348623157e308,_=NaN,b="[object Function]",x="[object GeneratorFunction]",E="[object Symbol]",w=/^\s+|\s+$/g,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,S=/^0o[0-7]+$/i,M=/^(?:0|[1-9]\d*)$/,P=parseInt,C=Object.prototype,R=C.toString,I=Math.ceil,O=Math.max;t.exports=s}]));